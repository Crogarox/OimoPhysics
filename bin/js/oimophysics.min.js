/* OimoPhysics (c) 2017 saharan, The MIT License */'use strict';(function(){function Og(){this.position=new t;this.rotation=new O;this.friction=F.defaultFriction;this.restitution=F.defaultRestitution;this.density=F.defaultDensity;this.collisionGroup=F.defaultCollisionGroup;this.collisionMask=F.defaultCollisionMask;this.contactCallback=this.geometry=null}function za(a){this.sc=-1;this.ha=new wa;this.pa=new wa;this.a=new wa;var b=a.position;this.ha.v=b.x;this.ha.A=b.y;this.ha.B=b.z;b=a.rotation;this.ha.o=b.e00;this.ha.f=b.e01;this.ha.h=b.e02;this.ha.i=b.e10;this.ha.m=b.e11;this.ha.j=b.e12;this.ha.l=b.e20;this.ha.g=b.e21;this.ha.s=b.e22;var b=this.pa,e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Pj=a.restitution;this.Fj=a.friction;this.jk=a.density;this.Ib=a.geometry;this.Aj=a.collisionGroup;this.Bj=a.collisionMask;this.Cj=a.contactCallback;this.u=new Ca;this.Na=null;this.nc=new t}function Qd(){}function Zj(){this.position=new t;this.rotation=new O;this.linearVelocity=new t;this.angularVelocity=new t;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0}function C(a){this.ni=this.Ac=this.ia=this.M=null;this.pg=0;this.ec=this.Mb=null;this.se=0;this.Oe=this.re=null;this.$g=0;var b=a.linearVelocity;this.cb=b.x;this.eb=b.y;this.fb=b.z;b=a.angularVelocity;this.hb=b.x;this.ib=b.y;this.jb=b.z;this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;this.pa=new wa;this.a=new wa;b=a.position;this.pa.v=b.x;this.pa.A=b.y;this.pa.B=b.z;b=a.rotation;this.pa.o=b.e00;this.pa.f=b.e01;this.pa.h=b.e02;this.pa.i=b.e10;this.pa.m=b.e11;this.pa.j=b.e12;this.pa.l=b.e20;this.pa.g=b.e21;this.pa.s=b.e22;var b=this.a,e=this.pa;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Wb=a.type;this.xb=0;this.Fb=!1;this.hk=a.autoSleep;this.ga=this.fa=this.ea=this.da=this.ca=this.ba=this.aa=this.$=this.Z=this.Jh=this.Ih=this.Hh=this.Gh=this.Fh=this.Eh=this.Dh=this.Ch=this.Bh=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Qa=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.zd=this.yd=this.xd=this.wd=this.Za=this.Lc=0;this.Il=a.linearDamping;this.Al=a.angularDamping;this.mf=this.lf=this.kf=this.Ah=this.zh=this.yh=0;this.jc=new t(1,1,1);this.Cf=!1;this.Ug=1;this.kc=null}function Ne(){this.mass=0;this.localInertia=new O}function nc(a){Tb.call(this);this.P=a;this.info=new Oe;this.Xb=Array(F.maxJacobianRows);a=0;for(var b=this.Xb.length;a<b;){var e=a++;this.Xb[e]=new Pe}}function Kb(a){Tb.call(this);this.ti=a;this.info=new Sf;this.Xb=Array(F.maxManifoldPoints);a=0;for(var b=this.Xb.length;a<b;){var e=a++;this.Xb[e]=new of}}function Tf(a){this.sg=a;this.ck=Array(this.sg);this.Za=Array(this.sg);this.Oi=Array(this.sg);a=0;for(var b=this.sg;a<b;){var e=a++;this.ck[e]=Array(this.sg);this.Za[e]=Array(this.sg);this.Oi[e]=Array(this.sg);for(var d=0,c=this.sg;d<c;){var f=d++;this.ck[e][f]=0;this.Za[e][f]=0;this.Oi[e][f]=0}}this.Ij=1<<this.sg;this.zj=Array(this.Ij);this.ik=Array(this.Ij);a=0;for(b=this.Ij;a<b;){for(var d=e=a++,d=(d&85)+(d>>1&85),d=(d&51)+(d>>2&51),d=(d&15)+(d>>4&15),c=Array(d),f=0,h=d;f<h;){var l=f++;c[l]=Array(d);for(var g=0,k=d;g<k;){var m=g++;c[l][m]=0}}this.zj[e]=!1;this.ik[e]=c}}function cc(a){Tb.call(this);this.P=a;this.info=new Oe;a=F.maxJacobianRows;this.$h=new Tf(a);this.Ee=new Bk(a);this.Xb=Array(a);for(var b=0,e=this.Xb.length;b<e;){var d=b++;this.Xb[d]=new Pe}b=this.Ee.Nh.length;this.ul=new Rd(b);this.ui=new Rd(b);this.Hg=Array(a);this.Th=Array(a);this.sf=Array(a);this.lj=Array(a);for(b=0;b<a;)e=b++,this.Hg[e]=0,this.Th[e]=0,this.sf[e]=0,this.lj[e]=0}function Rd(a){this.n=a;this.oc=Array(a);this.af=Array(a);for(var b=0;b<a;){var e=b++;this.oc[e]=e}}function Bk(a){this.Dn=a;this.Ze=0;this.Nh=Array(1<<a);this.Te=new sg(a)}function sg(a){this.size=a;this.Nc=0;this.gh=Array(a);this.kh=Array(a);this.je=0;this.Dg=Array(a)}function ak(a){this.gh=Array(a);this.Dg=Array(a);this.kh=Array(a);this.Rk=Array(a);this.je=this.Nc=0}function Pe(){this.tf=this.mass=this.ld=this.kd=this.jd=this.hd=this.gd=this.fd=this.rd=this.qd=this.pd=this.od=this.nd=this.md=0}function of(){this.rm=this.qm=this.pm=this.om=this.ie=this.Yj=this.Xj=this.Wj=this.Vj=this.Uj=this.Tj=this.fl=this.el=this.dl=this.cl=this.bl=this.al=this.tj=this.sj=this.rj=this.qj=this.pj=this.oj=this.ll=this.kl=this.jl=this.il=this.hl=this.gl=this.Sf=this.Rf=this.Qf=this.Pf=this.Of=this.Nf=this.Zh=this.Yh=this.Xh=this.Wh=this.Vh=this.Uh=0}function pe(){}function qe(){Ec.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper1=new Lb;this.springDamper2=new Lb;this.limitMotor1=new Gc;this.limitMotor2=new Gc}function ab(a){L.call(this,a,hc.UNIVERSAL);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.Ic=b.x;this.Jc=b.y;this.Kc=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.Ic*this.Ic+this.Jc*this.Jc+this.Kc*this.Kc?(b=this.Ic*this.Ic+this.Jc*this.Jc+this.Kc*this.Kc,0<b&&(b=1/Math.sqrt(b)),this.Ic*=b,this.Jc*=b,this.Kc*=b):(this.Jc=this.Ic=0,this.Kc=1);var e=this.C.a,b=this.D.a,d,c,f,h,l,g,k,m,n,q,p,r,v;r=e.o*this.ra+e.f*this.sa+e.h*this.ta;v=e.i*this.ra+e.m*this.sa+e.j*this.ta;d=e.l*this.ra+e.g*this.sa+e.s*this.ta;var aa,w;aa=b.o*this.Ic+b.f*this.Jc+b.h*this.Kc;w=b.i*this.Ic+b.m*this.Jc+b.j*this.Kc;p=b.l*this.Ic+b.g*this.Jc+b.s*this.Kc;l=w*d-p*v;g=p*r-aa*d;k=aa*v-w*r;l*l+g*g+k*k||(l=r*r,g=v*v,k=d*d,l<g?l<k?(k=1/Math.sqrt(g+k),l=0,g=d*k,k*=-v):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0):g<k?(k=1/Math.sqrt(k+l),l=-d*k,g=0,k*=r):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0));c=v*k-d*g;f=d*l-r*k;h=r*g-v*l;m=g*p-k*w;n=k*aa-l*p;q=l*w-g*aa;var A,u;A=e.o*r+e.i*v+e.l*d;u=e.f*r+e.m*v+e.g*d;d=e.h*r+e.j*v+e.s*d;this.ra=A;this.sa=u;this.ta=d;d=e.o*l+e.i*g+e.l*k;r=e.f*l+e.m*g+e.g*k;v=e.h*l+e.j*g+e.s*k;this.zb=d;this.Ab=r;this.Bb=v;d=e.o*c+e.i*f+e.l*h;r=e.f*c+e.m*f+e.g*h;e=e.h*c+e.j*f+e.s*h;this.gc=d;this.hc=r;this.ic=e;e=b.o*m+b.i*n+b.l*q;c=b.f*m+b.m*n+b.g*q;m=b.h*m+b.j*n+b.s*q;this.kb=e;this.lb=c;this.mb=m;e=b.o*l+b.i*g+b.l*k;m=b.f*l+b.m*g+b.g*k;l=b.h*l+b.j*g+b.s*k;this.Wg=e;this.Xg=m;this.Yg=l;l=b.o*aa+b.i*w+b.l*p;g=b.f*aa+b.m*w+b.g*p;b=b.h*aa+b.j*w+b.s*p;this.Ic=l;this.Jc=g;this.Kc=b;this.zi=this.zl=this.yi=0;this.Em=this.Dm=this.Cm=!1;this.Fk=a.springDamper1.clone();this.Gk=a.springDamper2.clone();this.xk=a.limitMotor1.clone();this.yk=a.limitMotor2.clone()}function wc(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function Lb(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function re(){Ec.call(this);this.springDamper=new Lb}function se(a){L.call(this,a,0);this.ue=a.springDamper.clone()}function Gc(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function Ce(){Ec.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper=new Lb;this.limitMotor=new Gc}function Mb(a){L.call(this,a,1);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.kb=b.x;this.lb=b.y;this.mb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.kb*this.kb+this.lb*this.lb+this.mb*this.mb?(b=this.kb*this.kb+this.lb*this.lb+this.mb*this.mb,0<b&&(b=1/Math.sqrt(b)),this.kb*=b,this.lb*=b,this.mb*=b):(this.kb=1,this.mb=this.lb=0);var e,d,c,f,h,l,g,k;d=this.ra*this.kb+this.sa*this.lb+this.ta*this.mb;-1.000001<d&&-.999999>d?(b=this.ra,e=this.sa,c=this.ta,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.sa*this.mb-this.ta*this.lb,e=this.ta*this.kb-this.ra*this.mb,f=this.ra*this.lb-this.sa*this.kb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.ra,m=this.sa,q=this.ta,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.zb=0,this.Ab=q*p,this.Bb=-m*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0):r<v?(p=1/Math.sqrt(v+p),this.zb=-q*p,this.Ab=0,this.Bb=n*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0);this.gc=this.sa*this.Bb-this.ta*this.Ab;this.hc=this.ta*this.zb-this.ra*this.Bb;this.ic=this.ra*this.Ab-this.sa*this.zb;n=b*this.ra+e*this.sa+c*this.ta;m=d*this.ra+f*this.sa+h*this.ta;q=l*this.ra+g*this.sa+k*this.ta;this.kb=n;this.lb=m;this.mb=q;n=b*this.zb+e*this.Ab+c*this.Bb;m=d*this.zb+f*this.Ab+h*this.Bb;q=l*this.zb+g*this.Ab+k*this.Bb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.gc+e*this.hc+c*this.ic;e=d*this.gc+f*this.hc+h*this.ic;c=l*this.gc+g*this.hc+k*this.ic;this.Ic=b;this.Jc=e;this.Kc=c;this.angularErrorZ=this.angularErrorY=this.angle=0;this.V=new Qe(this);this.ue=a.springDamper.clone();this.Lh=a.limitMotor.clone()}function Wd(){Ec.call(this);this.localTwistAxis1=new t(1,0,0);this.localTwistAxis2=new t(1,0,0);this.localSwingAxis1=new t(0,1,0);this.twistSpringDamper=new Lb;this.swingSpringDamper=new Lb;this.twistLimitMotor=new Gc;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function wb(a){L.call(this,a,hc.RAGDOLL);var b=a.localTwistAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localSwingAxis1;this.zb=b.x;this.Ab=b.y;this.Bb=b.z;b=a.localTwistAxis2;this.kb=b.x;this.lb=b.y;this.mb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.gc=this.sa*this.Bb-this.ta*this.Ab;this.hc=this.ta*this.zb-this.ra*this.Bb;this.ic=this.ra*this.Ab-this.sa*this.zb;if(this.gc*this.gc+this.hc*this.hc+this.ic*this.ic)b=this.gc*this.gc+this.hc*this.hc+this.ic*this.ic,0<b&&(b=1/Math.sqrt(b)),this.gc*=b,this.hc*=b,this.ic*=b,this.zb=this.hc*this.ta-this.ic*this.sa,this.Ab=this.ic*this.ra-this.gc*this.ta,this.Bb=this.gc*this.sa-this.hc*this.ra;else{var b=this.ra,e=this.sa,d=this.ta,c=b*b,f=e*e,h=d*d;c<f?c<h?(c=1/Math.sqrt(f+h),this.zb=0,this.Ab=d*c,this.Bb=-e*c):(c=1/Math.sqrt(c+f),this.zb=e*c,this.Ab=-b*c,this.Bb=0):f<h?(c=1/Math.sqrt(h+c),this.zb=-d*c,this.Ab=0,this.Bb=b*c):(c=1/Math.sqrt(c+f),this.zb=e*c,this.Ab=-b*c,this.Bb=0);this.gc=this.sa*this.Bb-this.ta*this.Ab;this.hc=this.ta*this.zb-this.ra*this.Bb;this.ic=this.ra*this.Ab-this.sa*this.zb}var l,g,k,m,c=this.ra*this.kb+this.sa*this.lb+this.ta*this.mb;-1.000001<c&&-.999999>c?(b=this.ra,e=this.sa,d=this.ta,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.sa*this.mb-this.ta*this.lb,e=this.ta*this.kb-this.ra*this.mb,f=this.ra*this.lb-this.sa*this.kb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);k=e;var h=c,e=d,n=2*b;g=2*k;d=2*h;c=b*n;f=k*g;l=h*d;h=b*g;m=k*d;k=b*d;var n=e*n,q=e*g;g=e*d;b=1-f-l;e=h-g;d=k+q;h+=g;l=1-c-l;g=m-n;k-=q;m+=n;c=1-c-f;f=b*this.ra+e*this.sa+d*this.ta;n=h*this.ra+l*this.sa+g*this.ta;q=k*this.ra+m*this.sa+c*this.ta;this.kb=f;this.lb=n;this.mb=q;f=b*this.zb+e*this.Ab+d*this.Bb;n=h*this.zb+l*this.Ab+g*this.Bb;q=k*this.zb+m*this.Ab+c*this.Bb;this.Wg=f;this.Xg=n;this.Yg=q;b=b*this.gc+e*this.hc+d*this.ic;e=h*this.gc+l*this.hc+g*this.ic;d=k*this.gc+m*this.hc+c*this.ic;this.Ic=b;this.Jc=e;this.Kc=d;this.Nk=a.twistSpringDamper.clone();this.Mk=a.twistLimitMotor.clone();this.Hk=a.swingSpringDamper.clone();this.Jj=a.maxSwingAngle1;this.Kj=a.maxSwingAngle2;this.Jj<F.minRagdollMaxSwingAngle&&(this.Jj=F.minRagdollMaxSwingAngle);this.Kj<F.minRagdollMaxSwingAngle&&(this.Kj=F.minRagdollMaxSwingAngle);this.Wk=new Gc;this.Wk.lowerLimit=-1;this.swingConstraintAxisZ=this.swingConstraintAxisY=this.swingConstraintAxisX=this.swingConstraintAxis1Z=this.swingConstraintAxis1Y=this.swingConstraintAxis1X=this.twistAxisZ=this.twistAxisY=this.twistAxisX=this.swingAxisZ=this.swingAxisY=this.swingAxisX=this.swingError=this.ej=this.Wi=this.Wk.upperLimit=0}function Dd(){Ec.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.limitMotor=new wc;this.springDamper=new Lb}function Bb(a){L.call(this,a,hc.PRISMATIC);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.kb=b.x;this.lb=b.y;this.mb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.kb*this.kb+this.lb*this.lb+this.mb*this.mb?(b=this.kb*this.kb+this.lb*this.lb+this.mb*this.mb,0<b&&(b=1/Math.sqrt(b)),this.kb*=b,this.lb*=b,this.mb*=b):(this.kb=1,this.mb=this.lb=0);var e,d,c,f,h,l,g,k;d=this.ra*this.kb+this.sa*this.lb+this.ta*this.mb;-1.000001<d&&-.999999>d?(b=this.ra,e=this.sa,c=this.ta,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.sa*this.mb-this.ta*this.lb,e=this.ta*this.kb-this.ra*this.mb,f=this.ra*this.lb-this.sa*this.kb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.ra,m=this.sa,q=this.ta,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.zb=0,this.Ab=q*p,this.Bb=-m*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0):r<v?(p=1/Math.sqrt(v+p),this.zb=-q*p,this.Ab=0,this.Bb=n*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0);this.gc=this.sa*this.Bb-this.ta*this.Ab;this.hc=this.ta*this.zb-this.ra*this.Bb;this.ic=this.ra*this.Ab-this.sa*this.zb;n=b*this.ra+e*this.sa+c*this.ta;m=d*this.ra+f*this.sa+h*this.ta;q=l*this.ra+g*this.sa+k*this.ta;this.kb=n;this.lb=m;this.mb=q;n=b*this.zb+e*this.Ab+c*this.Bb;m=d*this.zb+f*this.Ab+h*this.Bb;q=l*this.zb+g*this.Ab+k*this.Bb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.gc+e*this.hc+c*this.ic;e=d*this.gc+f*this.hc+h*this.ic;c=l*this.gc+g*this.hc+k*this.ic;this.Ic=b;this.Jc=e;this.Kc=c;this.V=new Qe(this);this.angularErrorZ=this.angularErrorY=this.angularErrorX=this.linearErrorZ=this.linearErrorY=this.Vf=0;this.ue=a.springDamper.clone();this.Lh=a.limitMotor.clone()}function hc(){}function Oc(a){this.wk=a}function Ck(){this.tb=this.Wc=this.ua=0}function Qe(a){this.P=a;this.me=this.le=this.ke=this.Od=this.Nd=this.Md=this.$c=this.Zc=this.Yc=0}function te(){Ec.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.translationalLimitMotor=new wc;this.translationalSpringDamper=new Lb;this.rotationalLimitMotor=new Gc;this.rotationalSpringDamper=new Lb}function Ec(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new t;this.localAnchor2=new t;this.allowCollision=!1;this.solverType=F.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=F.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function tb(a){L.call(this,a,2);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.kb=b.x;this.lb=b.y;this.mb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.kb*this.kb+this.lb*this.lb+this.mb*this.mb?(b=this.kb*this.kb+this.lb*this.lb+this.mb*this.mb,0<b&&(b=1/Math.sqrt(b)),this.kb*=b,this.lb*=b,this.mb*=b):(this.kb=1,this.mb=this.lb=0);var e,d,c,f,h,l,g,k;d=this.ra*this.kb+this.sa*this.lb+this.ta*this.mb;-1.000001<d&&-.999999>d?(b=this.ra,e=this.sa,c=this.ta,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.sa*this.mb-this.ta*this.lb,e=this.ta*this.kb-this.ra*this.mb,f=this.ra*this.lb-this.sa*this.kb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.ra,m=this.sa,q=this.ta,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.zb=0,this.Ab=q*p,this.Bb=-m*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0):r<v?(p=1/Math.sqrt(v+p),this.zb=-q*p,this.Ab=0,this.Bb=n*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0);this.gc=this.sa*this.Bb-this.ta*this.Ab;this.hc=this.ta*this.zb-this.ra*this.Bb;this.ic=this.ra*this.Ab-this.sa*this.zb;n=b*this.ra+e*this.sa+c*this.ta;m=d*this.ra+f*this.sa+h*this.ta;q=l*this.ra+g*this.sa+k*this.ta;this.kb=n;this.lb=m;this.mb=q;n=b*this.zb+e*this.Ab+c*this.Bb;m=d*this.zb+f*this.Ab+h*this.Bb;q=l*this.zb+g*this.Ab+k*this.Bb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.gc+e*this.hc+c*this.ic;e=d*this.gc+f*this.hc+h*this.ic;c=l*this.gc+g*this.hc+k*this.ic;this.Ic=b;this.Jc=e;this.Kc=c;this.linearErrorZ=this.linearErrorY=this.Vf=this.angularErrorZ=this.angularErrorY=this.angle=0;this.V=new Qe(this);this.Lk=a.translationalSpringDamper.clone();this.Kk=a.translationalLimitMotor.clone();this.Ek=a.rotationalSpringDamper.clone();this.Dk=a.rotationalLimitMotor.clone()}function L(a,b){this.qb=new Oc(this);this.rb=new Oc(this);this.Ec=F.defaultJointPositionCorrectionAlgorithm;this.Wb=b;this.kc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.gk=a.allowCollision;this.Ji=a.breakForce;this.Ki=a.breakTorque;switch(a.solverType){case 0:this.Rj=new nc(this);break;case 1:this.Rj=new cc(this)}b=a.localAnchor1;this.Pi=b.x;this.Qi=b.y;this.Ri=b.z;a=a.localAnchor2;this.Si=a.x;this.Ti=a.y;this.Ui=a.z;this.Kc=this.Jc=this.Ic=this.Yg=this.Xg=this.Wg=this.mb=this.lb=this.kb=this.ic=this.hc=this.gc=this.Bb=this.Ab=this.zb=this.ta=this.sa=this.ra=this.If=this.Hf=this.Gf=this.Ff=this.Ef=this.Df=this.Ub=this.Tb=this.Sb=this.Rb=this.Qb=this.Pb=0;this.Nb=Array(F.maxJacobianRows);a=0;for(b=F.maxJacobianRows;a<b;){var e=a++;this.Nb[e]=new Ck}}function gj(){this.Aa=new bd;this.bb=this.motorSpeed=this.Ha=this.Ia=this.Ma=this.Fa=0;this.ua=null}function Oe(){this.De=this.Ce=null;this.Ka=0;this.rows=Array(F.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new gj}}function hj(){this.Eg=new bd;this.vj=new bd;this.uj=new bd;this.friction=this.Ma=this.Fa=0;this.ua=null}function Sf(){this.De=this.Ce=null;this.Ka=0;this.rows=Array(F.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new hj}}function bd(){this.wc=this.Y=this.X=this.W=this.U=this.T=this.S=this.Da=this.Ca=this.Ba=this.xa=this.wa=this.va=0}function ij(a){this.Ja=a;this.ol=0;this.pl=Array(F.maxManifoldPoints);a=0;for(var b=F.maxManifoldPoints;a<b;){var e=a++;this.pl[e]=new Ab}}function Ab(){this.Dc=this.Kd=this.Jd=this.Id=this.Hd=this.Gd=this.Fd=this.cc=this.bc=this.ac=this.Eb=this.Db=this.Cb=this.gf=this.ff=this.ef=this.df=this.cf=this.bf=0;this.Wd=new jj;this.Jf=this.Se=!1;this.sc=-1}function Ac(){this.Xd=this.Ii=this.Hi=this.Gi=this.Zi=this.Yi=this.Xi=this.og=this.ng=this.mg=0;this.tc=Array(F.maxManifoldPoints);for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.tc[e]=new Ab}}function jj(){this.We=this.Ve=this.Ue=this.tb=this.xc=this.yc=this.Xc=0}function ld(a){this.Rj=new Kb(this);this.Ja=a}function ic(){}function Tb(){this.D=this.C=null;this.Cf=!1}function Rc(){}function Re(){this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new t(1,.1,.1);this.jointLineColor=new t(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new t(.2,.2,1);this.contactTangentColor=new t(.1,.8,.1);this.contactNormalColor=new t(1,.1,.1);this.disabledContactColor=new t(.5,.1,.1);this.newContactColor=new t(1,1,.1);this.contactColor=new t(1,.1,.1);this.pairColor=new t(1,1,.1);this.bvhNodeColor=new t(.4,.4,.4);this.aabbColor=new t(1,.1,.1);this.kinematicShapeColor=new t(1,.5,.1);this.staticShapeColor=new t(.7,.7,.7);this.sleepingShapeColor2=new t(.2,.8,.5);this.sleepingShapeColor1=new t(.3,.3,.8);this.sleepyShapeColor2=new t(.6,.8,.3);this.sleepyShapeColor1=new t(.5,.25,.6);this.shapeColor2=new t(1,.8,.1);this.shapeColor1=new t(.7,.2,.4)}function Eb(){this.p=new Ub;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.bk=Array(5);this.rh=Array(5);this.dk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.bk[b]=Array(e);this.rh[b]=Array(e);this.dk[b]=Array(e);for(e=0;8>e;){var d=e++,c=.7853981633974475*b,f=.7853981633974475*d;this.bk[b][d]=new t(Math.sin(c)*Math.cos(f),Math.cos(c),-Math.sin(c)*Math.sin(f));this.rh[b][d]=new t;this.dk[b][d]=new t}}this.jj=Array(8);this.Sl=Array(8);this.ae=Array(8);this.Fe=Array(8);this.Af=Array(8);for(a=0;8>a;)b=a++,this.jj[b]=new t(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.Sl[b]=new t(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.ae[b]=new t,this.Fe[b]=new t,this.Af[b]=new t;this.style=new Re}function vd(){this.position=new t;this.normal=new t;this.shape=null;this.fraction=1;this.position.O();this.normal.O();this.hit=!1}function Mc(){}function Xc(){}function cd(){}function pf(){this.u=new Ca;this.Bl=null}function ue(){this.wi=new Ed;this.gj=new wa;this.Vf=new t;this.O=new t;this.Ul=this.ij=null}function Se(){this.wi=new Ed;this.gj=new t;this.end=new t;this.ij=null}function qa(a,b){null==a&&(a=2);switch(a){case 1:this.dc=new uc;break;case 2:this.dc=new dc}this.wh=new Fd(this.dc);null==b&&(b=new t(0,-9.80665,0));this.lk=new t(b.x,b.y,b.z);this.hi=this.Kh=this.mi=this.jf=null;this.Mj=this.zk=this.pg=this.Vi=0;this.Bk=10;this.Ak=5;this.Oj=new Se;this.Mi=new ue;this.ek=new pf;this.lg=new Dk;this.Qe=Array(F.islandInitialConstraintArraySize);this.dh=Array(F.islandInitialRigidBodyArraySize);this.Mh=new kj;this.Ga=new Ub;this.Jl=0}function kj(){this.invDt=this.dt=0;this.dtRatio=1}function Dk(){this.xf=Array(F.islandInitialRigidBodyArraySize);this.yf=Array(F.islandInitialConstraintArraySize);this.ph=Array(F.islandInitialConstraintArraySize);this.oh=Array(F.islandInitialConstraintArraySize);this.hh=this.ih=this.wf=this.vf=0}function Fd(a){this.dc=a;this.Km=new Sd;this.ji=0}function Nc(){this.Mc=this.Ud=this.M=this.ia=null}function tc(){this.ia=this.M=null;this.qb=new Nc;this.rb=new Nc;this.xh=this.D=this.C=this.vc=this.uc=null;this.Li=new bk;this.Lm=new md;this.Qj=this.Hj=!1;this.Ja=new Ac;this.Ll=new ij(this.Ja);this.Ke=new ld(this.Ja);this.ug=!1}function ga(a,b,e,d){null==d&&(d=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=d;ga.numCreations++}function Ub(){this.b=Array(256);this.c=0;this.nb=Array(256);this.pb=0;this.zf=Array(256);this.Uf=0;this.Td=Array(256);this.$d=0}function na(){}function M(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){null==v&&(v=1);null==r&&(r=0);null==p&&(p=0);null==q&&(q=0);null==n&&(n=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==c&&(c=0);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;M.numCreations++}function O(a,b,e,d,c,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==c&&(c=1);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;O.numCreations++}function dd(){}function Pb(){}function Zb(){this.Oa=Array(4);this.gb=Array(4);this.ob=Array(4);this.fj=Array(3);this.fj[0]=new t(1,0,0);this.fj[1]=new t(0,1,0);this.fj[2]=new t(0,0,1);this.Nn=new t;this.On=new t;this.Gn=new t;this.Fn=new t;this.Mn=new wa;for(var a=0;4>a;){var b=a++;this.Oa[b]=new t;this.gb[b]=new t;this.ob[b]=new t}this.dir=new t;this.closest=new t;this.closestPoint1=new t;this.closestPoint2=new t;this.Fg=new lj}function F(){}function wa(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function t(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;t.numCreations++}function Ek(){this.ql=new t}function Dc(){this.ud=new t;this.gb=new t;this.ob=new t}function nd(){this.id=++nd.Cc;this.ia=this.M=null;this.Lj=new t;this.Jk=this.Ej=0;this.cj=!1;this.yb=Array(3);this.we=Array(3);this.Ie=Array(3);this.ai=new t;this.ii=Array(3);this.ii[0]=1;this.ii[1]=2;this.ii[2]=0}function lj(){this.yb=Array(F.maxEPAVertices);this.ei=new t;this.Ae=0;this.Fc=this.Vc=null;this.ah=0;this.Re=this.ve=null}function Te(){this.qh=!1}function Nd(a){this.qh=a}function wd(a){this.qh=a}function de(){this.qh=!1}function Gd(){this.qh=!1}function ed(a){this.qh=a}function bk(){}function mj(){this.position1=new t;this.position2=new t;this.id=this.depth=0}function md(){this.numPoints=0;this.normal=new t;this.points=Array(F.maxManifoldPoints);this.incremental=!1;for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.points[e]=new mj}}function Sd(){this.Hb=Array(8);for(var a=0;6>a;){var b=a++;this.Hb[b]=Array(8)}a=new de;this.Hb[0][0]=new Te;this.Hb[0][1]=new wd(!1);this.Hb[0][2]=a;this.Hb[0][3]=a;this.Hb[0][4]=new Nd(!1);this.Hb[0][5]=a;this.Hb[1][0]=new wd(!0);this.Hb[1][1]=a;this.Hb[1][2]=a;this.Hb[1][3]=a;this.Hb[1][4]=a;this.Hb[1][5]=a;this.Hb[2][0]=a;this.Hb[2][1]=a;this.Hb[2][2]=a;this.Hb[2][3]=a;this.Hb[2][4]=a;this.Hb[2][5]=a;this.Hb[3][0]=a;this.Hb[3][1]=a;this.Hb[3][2]=a;this.Hb[3][3]=a;this.Hb[3][4]=a;this.Hb[3][5]=a;this.Hb[4][0]=new Nd(!0);this.Hb[4][1]=a;this.Hb[4][2]=a;this.Hb[4][3]=a;this.Hb[4][4]=new Gd;this.Hb[4][5]=a;this.Hb[5][0]=a;this.Hb[5][1]=a;this.Hb[5][2]=a;this.Hb[5][3]=a;this.Hb[5][4]=a;this.Hb[5][5]=a}function xd(a){Da.call(this,0);this.fc=this.$a=a;this.Be()}function Ed(){this.position=new t;this.normal=new t;this.fraction=0}function Nb(){}function Zc(a,b){Da.call(this,2);this.$a=a;this.Gb=b;this.Be()}function od(a){Da.call(this,5);this.Ae=a.length;this.yb=Array(this.Ae);this.tg=Array(this.Ae);for(var b=0,e=this.Ae;b<e;){var d=b++;this.yb[d]=a[d];this.tg[d]=new t}this.Ml=!0;this.Be()}function $c(a,b){Da.call(this,3);this.$a=a;this.Gb=b;this.ak=a/Math.sqrt(a*a+4*b*b);this.Sj=2*b/Math.sqrt(a*a+4*b*b);this.Be()}function fd(a,b){Da.call(this,4);this.$a=a;this.Gb=b;this.fc=this.$a;this.Be()}function gd(a){Da.call(this,1);this.Le=a.x;this.Me=a.y;this.Ne=a.z;this.mk=this.Le;this.qk=this.pk=this.nk=0;this.rk=this.Me;this.uk=this.tk=this.sk=0;this.vk=this.Ne;this.Be()}function Ca(){this.la=this.ka=this.ja=this.oa=this.na=this.ma=0}function Fk(){this.Ob=null;this.Nj=0;this.oi=new nj;this.Xe=this.Tf=this.Rc=null;this.ai=Array(1024)}function nj(){this.Gl=0;this.yj=!1}function oj(a,b){Jc.call(this,a,b);this.Qd=null;this.Zg=!1}function ee(){this.Kf=this.Lf=this.M=null;this.F=Array(2);this.La=0;this.Ea=null;this.N=0;this.Na=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function dc(){jb.call(this);this.Gj=!0;this.he=new Fk;this.Ye=Array(1024);this.uf=0}function uc(){jb.call(this);this.Gj=!1}function Pc(){this.rg=this.qg=null}function Jc(a,b){this.userData=a;this.sc=b;this.M=this.ia=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function Hd(){}function Bc(){}function Cf(){Da.call(this,-1);this.min=new t;this.max=new t}function De(){Da.call(this,-1)}function Da(a){bc.call(this,a);this.fc=F.defaultGJKMargin;this.Ml=!1}function bc(a){this.Wb=a;this.nf=0}function jb(){this.ki=0;this.Yd=this.Pe=this.te=null;this.Gj=!1;this.$i=0;this.bh=null;this.Fl=0;this.Dj=new De;this.u=new Cf;this.Mf=new wa;this.O=new t;this.wi=new Ed}function Kc(){}function pd(a){this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,pd)}function Gb(a,b){function e(){}e.prototype=a;a=new e;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}Math.R=!0;pd.R=!0;pd.Pa=function(a){return a instanceof Error?a:new pd(a)};pd.Jb=Error;pd.prototype=Gb(Error.prototype,{qa:pd});Kc.R=!0;Kc.Hc=function(a){if(a instanceof Array&&null==a.xl)return Array;var b=a.qa;if(null!=b)return b;a=Kc.Kb(a);return null!=a?Kc.qc(a):null};Kc.sb=function(a,b){if(null==a)return!1;if(a==b)return!0;var e=a.Yn;if(null!=e)for(var d=0,c=e.length;d<c;){var f=d++,f=e[f];if(f==b||Kc.sb(f,b))return!0}return Kc.sb(a.Jb,b)};Kc.ab=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.xl:!1;case kl:return"boolean"==typeof a;case ll:return!0;case ml:return"number"==typeof a;case nl:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||Kc.sb(Kc.Hc(a),b))return!0}else{if("object"==typeof b&&Kc.mc(b)&&a instanceof b)return!0}else return!1;return b==ol&&null!=a.R||b==pl&&null!=a.Xn?!0:a.xl==b}};Kc.lc=function(a,b){if(Kc.ab(a,b))return a;throw new pd("Cannot cast "+a+" to "+b);};Kc.Kb=function(a){a=Kc.rc.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};Kc.mc=function(a){return null!=Kc.Kb(a)};Kc.qc=function(a){return window[a]};jb.R=!0;jb.prototype={Ph:function(){return null},Qh:function(){},sd:function(){},Kb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},si:function(){},Pa:function(){return this.Yd},sb:function(){return this.Gj},ab:function(){return this.$i},Sd:function(){},rf:function(){},eh:function(){},qa:jb};bc.R=!0;bc.prototype={Be:function(){},Lb:function(){},li:function(){return!1},ab:function(){return this.Wb},Pa:function(){return this.nf},Sd:function(a,b,e,d){var c,f,h,l;c=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;c-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.li(e.o*c+e.i*f+e.l*a,e.f*c+e.m*f+e.g*a,e.h*c+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,d)){var g,k;b=d.position;c=b.x;f=b.y;h=b.z;b=d.normal;l=b.x;g=b.y;k=b.z;var m,n;m=e.o*c+e.f*f+e.h*h;n=e.i*c+e.m*f+e.j*h;h=e.l*c+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;c=m+e.v;f=n+e.A;h+=e.B;e=d.position;e.x=c;e.y=f;e.z=h;d=d.normal;d.x=b;d.y=a;d.z=l;return!0}return!1},qa:bc};Da.R=!0;Da.Jb=bc;Da.prototype=Gb(bc.prototype,{gn:function(){return this.fc},Jn:function(a){0>a&&(a=0);this.fc=a},Ld:function(){},Sd:function(a,b,e,d){return this.Ml?Zb.Pa.Sd(this,e,a,b,d):bc.prototype.Sd.call(this,a,b,e,d)},qa:Da});De.R=!0;De.Jb=Da;De.prototype=Gb(Da.prototype,{za:function(a,b,e){this.Ym=a;var d,c,f;d=e.x;c=e.y;f=e.z;var h;e=b.o*d+b.i*c+b.l*f;h=b.f*d+b.m*c+b.g*f;b=b.h*d+b.j*c+b.s*f;d=this.nl=new t;d.x=e;d.y=h;d.z=b;this.fc=a.fc},Ld:function(a,b){this.Ym.Ld(a,b);var e=this.nl;if(0<a.x*e.x+a.y*e.y+a.z*e.z){a=this.nl;var e=b.y+a.y,d=b.z+a.z;b.x+=a.x;b.y=e;b.z=d}},qa:De});Cf.R=!0;Cf.Jb=Da;Cf.prototype=Gb(Da.prototype,{Ld:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z},qa:Cf});Bc.R=!0;Bc.prototype={td:function(){},qa:Bc};Hd.R=!0;Jc.R=!0;Jc.prototype={sb:function(){return this.sc},Pa:function(){var a=new Ca;a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I;return a},ab:function(a){a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I},qa:Jc};Pc.R=!0;Pc.prototype={Pa:function(){return this.qg},ab:function(){return this.rg},sb:function(){return this.M},qa:Pc};uc.R=!0;uc.Jb=jb;uc.prototype=Gb(jb.prototype,{Ph:function(a,b){a=new Jc(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ia=this.Pe);this.Pe=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;return a},Qh:function(a){this.ki--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ia);a.M=null;a.ia=null;a.userData=null},sd:function(a,b){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;for(a=this.te;null!=a;){for(var b=a.M,e=a.M;null!=e;){var d=e.M;this.$i++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var c=this.bh;null!=c?(this.bh=c.M,c.M=null):c=new Pc;null!=this.Yd&&(c.M=this.Yd);this.Yd=c;c.qg=a;c.rg=e}e=d}a=b}},Sd:function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.te;null!=l;){var g=l.M,k=d,m=c,n=a,q=f,p=h,r=b,v=k<q?k:q,aa=m<p?m:p,w=n<r?n:r,A=m>p?m:p,u=n>r?n:r,D=l.J,t=l.K,z=l.L,E=l.G,x=l.H,zb=l.I;if(D>(k>q?k:q)||E<v||t>A||x<aa||z>u||zb<w)n=!1;else{var q=q-k,p=p-m,N=r-n,r=0>q?-q:q,v=0>p?-p:p,A=0>N?-N:N,aa=.5*(E-D),w=.5*(x-t),u=.5*(zb-z),k=k-.5*(E+D),m=m-.5*(x+t),n=n-.5*(zb+z),z=m*N-n*p;0<(0>z?-z:z)-(w*A+u*v)?n=!0:(n=n*q-k*N,n=0<(0>n?-n:n)-(u*r+aa*A));n?n=!0:(n=k*p-m*q,n=0<(0>n?-n:n)-(aa*v+w*r));n=n?!1:!0}n&&e.td(l);l=g}},rf:function(a,b,e,d){for(var c=this.te;null!=c;){var f=c.M,h=this.u.min;h.x=c.J;h.y=c.K;h.z=c.L;h=this.u.max;h.x=c.G;h.y=c.H;h.z=c.I;this.Dj.za(a,b,e);h=Zb.Pa;0==h.kj(this.Dj,this.u,b,this.Mf,null,!1)&&0>=h.distance&&d.td(c);c=f}},eh:function(a,b){for(var e=this.te;null!=e;){var d=e.M;a.ma<e.G&&a.ja>e.J&&a.na<e.H&&a.ka>e.K&&a.oa<e.I&&a.la>e.L&&b.td(e);e=d}},qa:uc});dc.R=!0;dc.Jb=jb;dc.prototype=Gb(jb.prototype,{fh:function(a,b){this.$i++;var e=0==a.N,d=0==b.N;a==b?e||(this.fh(a.F[0],b),this.fh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&d?(a=a.Na,b=b.Na,e=this.bh,null!=e?(this.bh=e.M,e.M=null):e=new Pc,null!=this.Yd&&(e.M=this.Yd),this.Yd=e,e.qg=a,e.rg=b):d||a.N>b.N?(this.fh(a.F[0],b),this.fh(a.F[1],b)):(this.fh(b.F[0],a),this.fh(b.F[1],a)))},rl:function(a,b,e,d,c,f,h,l){var g=a.J,k=a.K,m=a.L,n=a.G,q=a.H,p=a.I,r;if(g>(b>c?b:c)||n<(b<c?b:c)||k>(e>f?e:f)||q<(e<f?e:f)||m>(d>h?d:h)||p<(d<h?d:h))r=!1;else{var v=c-b,aa=f-e,w=h-d;r=0>v?-v:v;var A=0>aa?-aa:aa,u=0>w?-w:w,D=.5*(n-g),t=.5*(q-k),z=.5*(p-m),g=b-.5*(n+g),k=e-.5*(q+k),m=d-.5*(p+m),p=k*w-m*aa;0<(0>p?-p:p)-(t*u+z*A)?u=!0:(w=m*v-g*w,u=0<(0>w?-w:w)-(z*r+D*u));u?r=!0:(v=g*aa-k*v,r=0<(0>v?-v:v)-(D*A+t*r));r=r?!1:!0}r&&(0==a.N?l.td(a.Na):(this.rl(a.F[0],b,e,d,c,f,h,l),this.rl(a.F[1],b,e,d,c,f,h,l)))},Vk:function(a,b,e,d,c){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.Dj.za(b,e,d);f=Zb.Pa;0==f.kj(this.Dj,this.u,e,this.Mf,null,!1)&&0>=f.distance&&(0==a.N?c.td(a.Na):(this.Vk(a.F[0],b,e,d,c),this.Vk(a.F[1],b,e,d,c)))},Qk:function(a,b,e){a.J<b.ja&&a.G>b.ma&&a.K<b.ka&&a.H>b.na&&a.L<b.la&&a.I>b.oa&&(0==a.N?e.td(a.Na):(this.Qk(a.F[0],b,e),this.Qk(a.F[1],b,e)))},Ph:function(a,b){a=new oj(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ia=this.Pe);this.Pe=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.he;var e=b.Rc;null!=e?(b.Rc=e.M,e.M=null):e=new ee;var d=e;d.Na=a;a.Qd=d;d.J=a.J;d.K=a.K;d.L=a.L;d.G=a.G;d.H=a.H;d.I=a.I;b.Nj++;null==b.Tf?b.Tf=d:(b.Xe.Kf=d,d.Lf=b.Xe);b.Xe=d;if(null==d.Na||d.Na.Qd!=d||null!=d.F[0]||null!=d.F[1]||0!=d.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==b.Ob)b.Ob=d;else{for(var c=b.Ob;0<c.N&&(e=b.oi.Dl(c,d),-1!=e);)c=c.F[e];var f=c.Ea,e=b.Rc;null!=e?(b.Rc=e.M,e.M=null):e=new ee;if(null==f)b.Ob=e;else{var h=c.La;f.F[h]=e;e.Ea=f;e.La=h}f=c.La;e.F[f]=c;c.Ea=e;c.La=f;c=c.La^1;e.F[c]=d;d.Ea=e;for(d.La=c;null!=e;){if(b.oi.yj&&!(2>e.N)){var d=e.Ea,f=e.F[0],h=e.F[1],l=f.N-h.N,c=e.La;1<l?(h=f.F[0],l=f.F[1],h.N>l.N?(f.F[1]=e,e.Ea=f,e.La=1,e.F[0]=l,l.Ea=e,l.La=0):(f.F[0]=e,e.Ea=f,e.La=0,e.F[0]=h,h.Ea=e,h.La=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].N,l=f.F[1].N,f.N=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].N,l=e.F[1].N,e.N=(h>l?h:l)+1,null!=d?(d.F[c]=f,f.Ea=d,f.La=c):(b.Ob=f,f.Ea=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.N>l.N?(h.F[1]=e,e.Ea=h,e.La=1,e.F[1]=l,l.Ea=e,l.La=1):(h.F[0]=e,e.Ea=h,e.La=0,e.F[1]=f,f.Ea=e,f.La=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].N,l=h.F[1].N,h.N=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].N,l=e.F[1].N,e.N=(f>l?f:l)+1,null!=d?(d.F[c]=h,h.Ea=d,h.La=c):(b.Ob=h,h.Ea=null),e=h)}d=e.F[0].N;c=e.F[1].N;e.N=(d>c?d:c)+1;d=e.F[0];c=e.F[1];e.J=d.J<c.J?d.J:c.J;e.K=d.K<c.K?d.K:c.K;e.L=d.L<c.L?d.L:c.L;e.G=d.G>c.G?d.G:c.G;e.H=d.H>c.H?d.H:c.H;e.I=d.I>c.I?d.I:c.I;e=e.Ea}}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){b=Array(this.uf<<1);e=0;for(d=this.uf;e<d;)c=e++,b[c]=this.Ye[c],this.Ye[c]=null;this.Ye=b}this.Ye[this.uf++]=a}return a},Qh:function(a){this.ki--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ia);a.M=null;a.ia=null;b=this.he;e=a.Qd;b.Nj--;var d=e.Lf,c=e.Kf;null!=d&&(d.Kf=c);null!=c&&(c.Lf=d);e==b.Tf&&(b.Tf=b.Tf.Kf);e==b.Xe&&(b.Xe=b.Xe.Lf);e.Kf=null;e.Lf=null;if(null==e.Na||e.Na.Qd!=e||null!=e.F[0]||null!=e.F[1]||0!=e.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(b.Ob==e)b.Ob=null;else{var d=e.Ea,c=d.F[e.La^1],f=d.Ea;if(null==f){c.Ea=null;c.La=0;b.Ob=c;if(null!=d.Na&&null!=d.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.La=0;d.Ea=null;d.N=0;d.Na=null;d.M=b.Rc;b.Rc=d}else{var h=d.La;f.F[h]=c;c.Ea=f;c.La=h;if(null!=d.Na&&null!=d.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.La=0;d.Ea=null;d.N=0;d.Na=null;d.M=b.Rc;b.Rc=d;for(d=f;null!=d;){if(b.oi.yj&&!(2>d.N)){var c=d.Ea,h=d.F[0],l=d.F[1],g=h.N-l.N,f=d.La;1<g?(l=h.F[0],g=h.F[1],l.N>g.N?(h.F[1]=d,d.Ea=h,d.La=1,d.F[0]=g,g.Ea=d,g.La=0):(h.F[0]=d,d.Ea=h,d.La=0,d.F[0]=l,l.Ea=d,l.La=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].N,g=h.F[1].N,h.N=(l>g?l:g)+1,l=d.F[0],g=d.F[1],d.J=l.J<g.J?l.J:g.J,d.K=l.K<g.K?l.K:g.K,d.L=l.L<g.L?l.L:g.L,d.G=l.G>g.G?l.G:g.G,d.H=l.H>g.H?l.H:g.H,d.I=l.I>g.I?l.I:g.I,l=d.F[0].N,g=d.F[1].N,d.N=(l>g?l:g)+1,null!=c?(c.F[f]=h,h.Ea=c,h.La=f):(b.Ob=h,h.Ea=null),d=h):-1>g&&(h=l.F[0],g=l.F[1],h.N>g.N?(l.F[1]=d,d.Ea=l,d.La=1,d.F[1]=g,g.Ea=d,g.La=1):(l.F[0]=d,d.Ea=l,d.La=0,d.F[1]=h,h.Ea=d,h.La=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].N,g=l.F[1].N,l.N=(h>g?h:g)+1,h=d.F[0],g=d.F[1],d.J=h.J<g.J?h.J:g.J,d.K=h.K<g.K?h.K:g.K,d.L=h.L<g.L?h.L:g.L,d.G=h.G>g.G?h.G:g.G,d.H=h.H>g.H?h.H:g.H,d.I=h.I>g.I?h.I:g.I,h=d.F[0].N,g=d.F[1].N,d.N=(h>g?h:g)+1,null!=c?(c.F[f]=l,l.Ea=c,l.La=f):(b.Ob=l,l.Ea=null),d=l)}c=d.F[0].N;f=d.F[1].N;d.N=(c>f?c:f)+1;c=d.F[0];f=d.F[1];d.J=c.J<f.J?c.J:f.J;d.K=c.K<f.K?c.K:f.K;d.L=c.L<f.L?c.L:f.L;d.G=c.G>f.G?c.G:f.G;d.H=c.H>f.H?c.H:f.H;d.I=c.I>f.I?c.I:f.I;d=d.Ea}}}a.Qd=null;if(null!=e.Na&&null!=e.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");e.F[0]=null;e.F[1]=null;e.La=0;e.Ea=null;e.N=0;e.Na=null;e.M=b.Rc;b.Rc=e;a.userData=null;a.M=null;a.ia=null;a.Zg&&(a.Zg=!1)},sd:function(a,b,e){if(!(a.J<=b.ma&&a.G>=b.ja&&a.K<=b.na&&a.H>=b.ka&&a.L<=b.oa&&a.I>=b.la)){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var d;b=e.x;d=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<d?0:d;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>d?0:d;a.I+=0>e?0:e}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){e=Array(this.uf<<1);b=0;for(d=this.uf;b<d;){var c=b++;e[c]=this.Ye[c];this.Ye[c]=null}this.Ye=e}this.Ye[this.uf++]=a}}},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;if(!(2>this.ki)){for(var b=this.uf/this.ki<F.bvhIncrementalCollisionThreshold,e=0,d=this.uf;e<d;){var c=e++,f=this.Ye[c];if(f.Zg){var h=this.he,l=f.Qd;h.Nj--;var g=l.Lf,k=l.Kf;null!=g&&(g.Kf=k);null!=k&&(k.Lf=g);l==h.Tf&&(h.Tf=h.Tf.Kf);l==h.Xe&&(h.Xe=h.Xe.Lf);l.Kf=null;l.Lf=null;if(null==l.Na||l.Na.Qd!=l||null!=l.F[0]||null!=l.F[1]||0!=l.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(h.Ob==l)h.Ob=null;else{var m=l.Ea,n=m.F[l.La^1],q=m.Ea;if(null==q){n.Ea=null;n.La=0;h.Ob=n;if(null!=m.Na&&null!=m.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.La=0;m.F[0]=null;m.F[1]=null;m.La=0;m.Ea=null;m.N=0;m.Na=null;m.M=h.Rc;h.Rc=m}else{n.Ea=q;var p=m.La;q.F[p]=n;n.Ea=q;n.La=p;if(null!=m.Na&&null!=m.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.La=0;m.F[0]=null;m.F[1]=null;m.La=0;m.Ea=null;m.N=0;m.Na=null;m.M=h.Rc;h.Rc=m;for(var r=q;null!=r;){if(h.oi.yj&&!(2>r.N)){var v=r.Ea,aa=r.F[0],w=r.F[1],A=aa.N-w.N,u=r.La;if(1<A){var D=aa.F[0],t=aa.F[1];if(D.N>t.N){aa.F[1]=r;r.Ea=aa;r.La=1;r.F[0]=t;t.Ea=r;t.La=0;var z=aa.F[0],E=aa.F[1];aa.J=z.J<E.J?z.J:E.J;aa.K=z.K<E.K?z.K:E.K;aa.L=z.L<E.L?z.L:E.L;aa.G=z.G>E.G?z.G:E.G;aa.H=z.H>E.H?z.H:E.H;aa.I=z.I>E.I?z.I:E.I;var x=aa.F[0].N,zb=aa.F[1].N;aa.N=(x>zb?x:zb)+1;var N=r.F[0],G=r.F[1];r.J=N.J<G.J?N.J:G.J;r.K=N.K<G.K?N.K:G.K;r.L=N.L<G.L?N.L:G.L;r.G=N.G>G.G?N.G:G.G;r.H=N.H>G.H?N.H:G.H;r.I=N.I>G.I?N.I:G.I;var al=r.F[0].N,Fl=r.F[1].N;r.N=(al>Fl?al:Fl)+1}else{aa.F[0]=r;r.Ea=aa;r.La=0;r.F[0]=D;D.Ea=r;D.La=0;var C=aa.F[0],ha=aa.F[1];aa.J=C.J<ha.J?C.J:ha.J;aa.K=C.K<ha.K?C.K:ha.K;aa.L=C.L<ha.L?C.L:ha.L;aa.G=C.G>ha.G?C.G:ha.G;aa.H=C.H>ha.H?C.H:ha.H;aa.I=C.I>ha.I?C.I:ha.I;var O=aa.F[0].N,Vb=aa.F[1].N;aa.N=(O>Vb?O:Vb)+1;var L=r.F[0],ka=r.F[1];r.J=L.J<ka.J?L.J:ka.J;r.K=L.K<ka.K?L.K:ka.K;r.L=L.L<ka.L?L.L:ka.L;r.G=L.G>ka.G?L.G:ka.G;r.H=L.H>ka.H?L.H:ka.H;r.I=L.I>ka.I?L.I:ka.I;var bb=r.F[0].N,U=r.F[1].N;r.N=(bb>U?bb:U)+1}null!=v?(v.F[u]=aa,aa.Ea=v,aa.La=u):(h.Ob=aa,aa.Ea=null);r=aa}else if(-1>A){var R=w.F[0],lc=w.F[1];if(R.N>lc.N){w.F[1]=r;r.Ea=w;r.La=1;r.F[1]=lc;lc.Ea=r;lc.La=1;var Na=w.F[0],Ra=w.F[1];w.J=Na.J<Ra.J?Na.J:Ra.J;w.K=Na.K<Ra.K?Na.K:Ra.K;w.L=Na.L<Ra.L?Na.L:Ra.L;w.G=Na.G>Ra.G?Na.G:Ra.G;w.H=Na.H>Ra.H?Na.H:Ra.H;w.I=Na.I>Ra.I?Na.I:Ra.I;var M=w.F[0].N,Pa=w.F[1].N;w.N=(M>Pa?M:Pa)+1;var Ba=r.F[0],Hb=r.F[1];r.J=Ba.J<Hb.J?Ba.J:Hb.J;r.K=Ba.K<Hb.K?Ba.K:Hb.K;r.L=Ba.L<Hb.L?Ba.L:Hb.L;r.G=Ba.G>Hb.G?Ba.G:Hb.G;r.H=Ba.H>Hb.H?Ba.H:Hb.H;r.I=Ba.I>Hb.I?Ba.I:Hb.I;var J=r.F[0].N,Qa=r.F[1].N;r.N=(J>Qa?J:Qa)+1}else{w.F[0]=r;r.Ea=w;r.La=0;r.F[1]=R;R.Ea=r;R.La=1;var ba=w.F[0],Q=w.F[1];w.J=ba.J<Q.J?ba.J:Q.J;w.K=ba.K<Q.K?ba.K:Q.K;w.L=ba.L<Q.L?ba.L:Q.L;w.G=ba.G>Q.G?ba.G:Q.G;w.H=ba.H>Q.H?ba.H:Q.H;w.I=ba.I>Q.I?ba.I:Q.I;var P=w.F[0].N,xa=w.F[1].N;w.N=(P>xa?P:xa)+1;var ta=r.F[0],W=r.F[1];r.J=ta.J<W.J?ta.J:W.J;r.K=ta.K<W.K?ta.K:W.K;r.L=ta.L<W.L?ta.L:W.L;r.G=ta.G>W.G?ta.G:W.G;r.H=ta.H>W.H?ta.H:W.H;r.I=ta.I>W.I?ta.I:W.I;var pa=r.F[0].N,y=r.F[1].N;r.N=(pa>y?pa:y)+1}null!=v?(v.F[u]=w,w.Ea=v,w.La=u):(h.Ob=w,w.Ea=null);r=w}}var Ia=r.F[0].N,ca=r.F[1].N;r.N=(Ia>ca?Ia:ca)+1;var Ea=r.F[0],ya=r.F[1];r.J=Ea.J<ya.J?Ea.J:ya.J;r.K=Ea.K<ya.K?Ea.K:ya.K;r.L=Ea.L<ya.L?Ea.L:ya.L;r.G=Ea.G>ya.G?Ea.G:ya.G;r.H=Ea.H>ya.H?Ea.H:ya.H;r.I=Ea.I>ya.I?Ea.I:ya.I;r=r.Ea}}}f.Qd=null;if(null!=l.Na&&null!=l.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");l.M=null;l.La=0;l.F[0]=null;l.F[1]=null;l.La=0;l.Ea=null;l.N=0;l.Na=null;l.M=h.Rc;h.Rc=l;var Fa=this.he,Sa=Fa.Rc;null!=Sa?(Fa.Rc=Sa.M,Sa.M=null):Sa=new ee;var la=Sa;la.Na=f;f.Qd=la;la.J=f.J;la.K=f.K;la.L=f.L;la.G=f.G;la.H=f.H;la.I=f.I;Fa.Nj++;null==Fa.Tf?Fa.Tf=la:(Fa.Xe.Kf=la,la.Lf=Fa.Xe);Fa.Xe=la;if(null==la.Na||la.Na.Qd!=la||null!=la.F[0]||null!=la.F[1]||0!=la.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==Fa.Ob)Fa.Ob=la;else{for(var Z=Fa.Ob;0<Z.N;){var Ga=Fa.oi.Dl(Z,la);if(-1==Ga)break;else Z=Z.F[Ga]}var ra=Z.Ea,va=Fa.Rc;null!=va?(Fa.Rc=va.M,va.M=null):va=new ee;var I=va;if(null==ra)Fa.Ob=I;else{var La=Z.La;ra.F[La]=I;I.Ea=ra;I.La=La}var Wa=Z.La;I.F[Wa]=Z;Z.Ea=I;Z.La=Wa;var S=Z.La^1;I.F[S]=la;la.Ea=I;for(la.La=S;null!=I;){if(Fa.oi.yj&&!(2>I.N)){var Xa=I.Ea,T=I.F[0],K=I.F[1],ia=T.N-K.N,gb=I.La;if(1<ia){var da=T.F[0],Hc=T.F[1];if(da.N>Hc.N){T.F[1]=I;I.Ea=T;I.La=1;I.F[0]=Hc;Hc.Ea=I;Hc.La=0;var sa=T.F[0],fb=T.F[1];T.J=sa.J<fb.J?sa.J:fb.J;T.K=sa.K<fb.K?sa.K:fb.K;T.L=sa.L<fb.L?sa.L:fb.L;T.G=sa.G>fb.G?sa.G:fb.G;T.H=sa.H>fb.H?sa.H:fb.H;T.I=sa.I>fb.I?sa.I:fb.I;var kb=T.F[0].N,Ya=T.F[1].N;T.N=(kb>Ya?kb:Ya)+1;var ma=I.F[0],oa=I.F[1];I.J=ma.J<oa.J?ma.J:oa.J;I.K=ma.K<oa.K?ma.K:oa.K;I.L=ma.L<oa.L?ma.L:oa.L;I.G=ma.G>oa.G?ma.G:oa.G;I.H=ma.H>oa.H?ma.H:oa.H;I.I=ma.I>oa.I?ma.I:oa.I;var Ja=I.F[0].N,Ha=I.F[1].N;I.N=(Ja>Ha?Ja:Ha)+1}else{T.F[0]=I;I.Ea=T;I.La=0;I.F[0]=da;da.Ea=I;da.La=0;var ob=T.F[0],fa=T.F[1];T.J=ob.J<fa.J?ob.J:fa.J;T.K=ob.K<fa.K?ob.K:fa.K;T.L=ob.L<fa.L?ob.L:fa.L;T.G=ob.G>fa.G?ob.G:fa.G;T.H=ob.H>fa.H?ob.H:fa.H;T.I=ob.I>fa.I?ob.I:fa.I;var ea=T.F[0].N,ja=T.F[1].N;T.N=(ea>ja?ea:ja)+1;var cb=I.F[0],Aa=I.F[1];I.J=cb.J<Aa.J?cb.J:Aa.J;I.K=cb.K<Aa.K?cb.K:Aa.K;I.L=cb.L<Aa.L?cb.L:Aa.L;I.G=cb.G>Aa.G?cb.G:Aa.G;I.H=cb.H>Aa.H?cb.H:Aa.H;I.I=cb.I>Aa.I?cb.I:Aa.I;var sb=I.F[0].N,Ua=I.F[1].N;I.N=(sb>Ua?sb:Ua)+1}null!=Xa?(Xa.F[gb]=T,T.Ea=Xa,T.La=gb):(Fa.Ob=T,T.Ea=null);I=T}else if(-1>ia){var qb=K.F[0],rb=K.F[1];if(qb.N>rb.N){K.F[1]=I;I.Ea=K;I.La=1;I.F[1]=rb;rb.Ea=I;rb.La=1;var ub=K.F[0],Va=K.F[1];K.J=ub.J<Va.J?ub.J:Va.J;K.K=ub.K<Va.K?ub.K:Va.K;K.L=ub.L<Va.L?ub.L:Va.L;K.G=ub.G>Va.G?ub.G:Va.G;K.H=ub.H>Va.H?ub.H:Va.H;K.I=ub.I>Va.I?ub.I:Va.I;var xb=K.F[0].N,rc=K.F[1].N;K.N=(xb>rc?xb:rc)+1;var Za=I.F[0],ua=I.F[1];I.J=Za.J<ua.J?Za.J:ua.J;I.K=Za.K<ua.K?Za.K:ua.K;I.L=Za.L<ua.L?Za.L:ua.L;I.G=Za.G>ua.G?Za.G:ua.G;I.H=Za.H>ua.H?Za.H:ua.H;I.I=Za.I>ua.I?Za.I:ua.I;var Qb=I.F[0].N,H=I.F[1].N;I.N=(Qb>H?Qb:H)+1}else{K.F[0]=I;I.Ea=K;I.La=0;I.F[1]=qb;qb.Ea=I;qb.La=1;var pb=K.F[0],db=K.F[1];K.J=pb.J<db.J?pb.J:db.J;K.K=pb.K<db.K?pb.K:db.K;K.L=pb.L<db.L?pb.L:db.L;K.G=pb.G>db.G?pb.G:db.G;K.H=pb.H>db.H?pb.H:db.H;K.I=pb.I>db.I?pb.I:db.I;var oc=K.F[0].N,$a=K.F[1].N;K.N=(oc>$a?oc:$a)+1;var hb=I.F[0],B=I.F[1];I.J=hb.J<B.J?hb.J:B.J;I.K=hb.K<B.K?hb.K:B.K;I.L=hb.L<B.L?hb.L:B.L;I.G=hb.G>B.G?hb.G:B.G;I.H=hb.H>B.H?hb.H:B.H;I.I=hb.I>B.I?hb.I:B.I;var Db=I.F[0].N,fe=I.F[1].N;I.N=(Db>fe?Db:fe)+1}null!=Xa?(Xa.F[gb]=K,K.Ea=Xa,K.La=gb):(Fa.Ob=K,K.Ea=null);I=K}}var Tc=I.F[0].N,Fb=I.F[1].N;I.N=(Tc>Fb?Tc:Fb)+1;var Oa=I.F[0],nb=I.F[1];I.J=Oa.J<nb.J?Oa.J:nb.J;I.K=Oa.K<nb.K?Oa.K:nb.K;I.L=Oa.L<nb.L?Oa.L:nb.L;I.G=Oa.G>nb.G?Oa.G:nb.G;I.H=Oa.H>nb.H?Oa.H:nb.H;I.I=Oa.I>nb.I?Oa.I:nb.I;I=I.Ea}}b&&this.fh(this.he.Ob,f.Qd);f.Zg=!1}this.Ye[c]=null}b||this.fh(this.he.Ob,this.he.Ob);this.uf=0}},Sd:function(a,b,e){null!=this.he.Ob&&this.rl(this.he.Ob,a.x,a.y,a.z,b.x,b.y,b.z,e)},rf:function(a,b,e,d){null!=this.he.Ob&&this.Vk(this.he.Ob,a,b,e,d)},eh:function(a,b){null!=this.he.Ob&&this.Qk(this.he.Ob,a,b)},wn:function(){return this.he.Qm()},qa:dc});ee.R=!0;ee.prototype={qa:ee};oj.R=!0;oj.Jb=Jc;oj.prototype=Gb(Jc.prototype,{qa:oj});nj.R=!0;nj.prototype={Dl:function(a,b){switch(this.Gl){case 0:var e,d,c;e=b.J+b.G;d=b.K+b.H;c=b.L+b.I;var f=a.F[0],h=a.F[1],l,g;b=f.J+f.G;a=f.K+f.H;f=f.L+f.I;l=h.J+h.G;g=h.K+h.H;h=h.L+h.I;b-=e;a-=d;f-=c;l-=e;g-=d;h-=c;return b*b+a*a+f*f<l*l+g*g+h*h?0:1;case 1:f=a.F[0];e=a.F[1];d=a.H-a.K;c=a.I-a.L;var h=2*((a.G-a.J)*(d+c)+d*c),k,m;d=a.J<b.J?a.J:b.J;k=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;c=a.G>b.G?a.G:b.G;m=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;a=m-k;l=g-l;d=2*((c-d)*(a+l)+a*l);a=2*d;var n=2*(d-h),h=n;d=f.J<b.J?f.J:b.J;k=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;c=f.G>b.G?f.G:b.G;m=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.N?(f=m-k,l=g-l,h+=2*((c-d)*(f+l)+f*l)):(k=m-k,l=g-l,g=f.H-f.K,m=f.I-f.L,h+=2*((c-d)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m));f=n;d=e.J<b.J?e.J:b.J;k=e.K<b.K?e.K:b.K;l=e.L<b.L?e.L:b.L;c=e.G>b.G?e.G:b.G;m=e.H>b.H?e.H:b.H;g=e.I>b.I?e.I:b.I;0==e.N?(e=m-k,b=g-l,f+=2*((c-d)*(e+b)+e*b)):(b=m-k,l=g-l,g=e.H-e.K,n=e.I-e.L,f+=2*((c-d)*(b+l)+b*l)-2*((e.G-e.J)*(g+n)+g*n));return a<h?a<f?-1:1:h<f?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Gl),-1}},qa:nj};Fk.R=!0;Fk.prototype={Qm:function(){return this.Yk(this.Ob)},Yk:function(a){if(null==a||0==a.N)return 0;var b=a.F[0].N-a.F[1].N;0>b&&(b=-b);return b+this.Yk(a.F[0])+this.Yk(a.F[1])},qa:Fk};Ca.R=!0;Ca.prototype={za:function(a,b){this.ma=a.x;this.na=a.y;this.oa=a.z;this.ja=b.x;this.ka=b.y;this.la=b.z;return this},Hc:function(){var a=new t;a.x=this.ma;a.y=this.na;a.z=this.oa;return a},ad:function(a){a.x=this.ma;a.y=this.na;a.z=this.oa},Pd:function(a){this.ma=a.x;this.na=a.y;this.oa=a.z;return this},zc:function(){var a=new t;a.x=this.ja;a.y=this.ka;a.z=this.la;return a},Cc:function(a){a.x=this.ja;a.y=this.ka;a.z=this.la},cd:function(a){this.ja=a.x;this.ka=a.y;this.la=a.z;return this},sb:function(){var a=new t,b,e,d;b=this.ma+this.ja;e=this.na+this.ka;d=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},Kb:function(a){var b,e,d;b=this.ma+this.ja;e=this.na+this.ka;d=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*d},lc:function(){var a=new t,b,e,d;b=this.ja-this.ma;e=this.ka-this.na;d=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},mc:function(a){var b,e,d;b=this.ja-this.ma;e=this.ka-this.na;d=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*d},Pa:function(a){this.ma=this.ma<a.ma?this.ma:a.ma;this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.ja=this.ja>a.ja?this.ja:a.ja;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;return this},ab:function(a){var b=new Ca;b.ma=this.ma<a.ma?this.ma:a.ma;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.ja=this.ja>a.ja?this.ja:a.ja;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;return b},bd:function(a){return this.ma<a.ja&&this.ja>a.ma&&this.na<a.ka&&this.ka>a.na&&this.oa<a.la?this.la>a.oa:!1},qc:function(a){var b=new Ca;b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;return b},rc:function(a,b){b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la},Zd:function(a){this.ma=a.ma;this.na=a.na;this.oa=a.oa;this.ja=a.ja;this.ka=a.ka;this.la=a.la;return this},clone:function(){var a=new Ca;a.ma=this.ma;a.na=this.na;a.oa=this.oa;a.ja=this.ja;a.ka=this.ka;a.la=this.la;return a},qa:Ca};gd.R=!0;gd.Jb=Da;gd.prototype=Gb(Da.prototype,{hn:function(){var a=new t;a.x=this.Le;a.y=this.Me;a.z=this.Ne;return a},jn:function(a){a.x=this.Le;a.y=this.Me;a.z=this.Ne},Be:function(){this.nf=8*this.Le*this.Me*this.Ne;var a,b,e;a=this.Le*this.Le;b=this.Me*this.Me;e=this.Ne*this.Ne;this.cg=.3333333333333333*(b+e);this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(e+a);this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(a+b)},Lb:function(a,b){var e,d,c,f,h;f=b.o*this.mk+b.f*this.nk+b.h*this.pk;h=b.i*this.mk+b.m*this.nk+b.j*this.pk;e=b.l*this.mk+b.g*this.nk+b.s*this.pk;var l,g;l=b.o*this.qk+b.f*this.rk+b.h*this.sk;g=b.i*this.qk+b.m*this.rk+b.j*this.sk;d=b.l*this.qk+b.g*this.rk+b.s*this.sk;var k,m;k=b.o*this.tk+b.f*this.uk+b.h*this.vk;m=b.i*this.tk+b.m*this.uk+b.j*this.vk;c=b.l*this.tk+b.g*this.uk+b.s*this.vk;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>d?-d:d)+(0>c?-c:c);a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-e;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+e},Ld:function(a,b){var e,d,c;c=d=e=this.fc;e=e<this.Le?e:this.Le;d=d<this.Me?d:this.Me;c=c<this.Ne?c:this.Ne;e=this.Le-e;d=this.Me-d;c=this.Ne-c;b.x=0<a.x?e:-e;b.y=0<a.y?d:-d;b.z=0<a.z?c:-c},li:function(a,b,e,d,c,f,h){var l=this.Le,g=this.Me,k=this.Ne;d-=a;c-=b;f-=e;var m=0,n=0,q=0,p=1,r=1,v=1;if(-1E-6<d&&1E-6>d){if(a<=-l||a>=l)return!1}else{var aa=1/d,w=(-l-a)*aa,l=(l-a)*aa;w>l&&(aa=w,w=l,l=aa);0<w&&(m=w);1>l&&(p=l)}if(-1E-6<c&&1E-6>c){if(b<=-g||b>=g)return!1}else w=1/c,l=(-g-b)*w,g=(g-b)*w,l>g&&(w=l,l=g,g=w),0<l&&(n=l),1>g&&(r=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(q=g),1>k&&(v=k);if(1<=m||1<=n||1<=q||0>=p||0>=r||0>=v)return!1;k=m;m=0;n>k&&(k=n,m=1);q>k&&(k=q,m=2);r<p&&(p=r);v<p&&(p=v);if(k>p||!k)return!1;switch(m){case 0:h.normal.za(0<d?-1:1,0,0);break;case 1:h.normal.za(0,0<c?-1:1,0);break;case 2:h.normal.za(0,0,0<f?-1:1)}h.position.za(a+k*d,b+k*c,e+k*f);h.fraction=k;return!0},qa:gd});fd.R=!0;fd.Jb=Da;fd.prototype=Gb(Da.prototype,{Sh:function(){return this.$a},mj:function(){return this.Gb},Be:function(){var a=this.$a*this.$a,b=this.Gb*this.Gb,e=6.28318530717958*a*this.Gb,d=3.14159265358979*a*this.$a*4/3,c=(this.nf=e+d)?1/this.nf:0;this.cg=b=c*(e*(.25*a+b/3)+d*(.4*a+this.Gb*this.$a*.75+b));this.fg=this.eg=this.dg=0;this.gg=c*(e*a*.5+d*a*.4);this.jg=this.ig=this.hg=0;this.kg=b},Lb:function(a,b){var e,d,c;c=d=e=this.$a;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Gb;h=(0>h?-h:h)*this.Gb;l=(0>l?-l:l)*this.Gb;e+=f;d+=h;c+=l;a.ma=b.v-e;a.na=b.A-d;a.oa=b.B-c;a.ja=b.v+e;a.ka=b.A+d;a.la=b.B+c},Ld:function(a,b){0<a.y?b.za(0,this.Gb,0):b.za(0,-this.Gb,0)},li:function(a,b,e,d,c,f,h){var l=this.Gb,g=d-a,k=f-e,m,n=g*g+k*k,q=a*g+e*k;m=a*a+e*e-this.$a*this.$a;var p=q*q-n*m;if(0>p)return!1;if(0<n){if(p=Math.sqrt(p),m=(-q-p)/n,1<=m||0>=(-q+p)/n)return!1}else{if(0<=m)return!1;m=0}n=b+(c-b)*m;if(n>-l&&n<l)return 0<m?(f=m,q=h.normal.za(a+g*f,0,e+k*f),b=Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),0<b&&(b=1/b),c=q.y*b,d=q.z*b,q.x=q.x*b,q.y=c,q.z=d,h.position.za(a+f*g,n,e+f*k),h.fraction=f,!0):!1;var g=0>n?-l:l,r;r=a-0;l=b-g;k=e-0;a=d-a;b=c-b;e=f-e;n=a*a+b*b+e*e;q=r*a+l*b+k*e;m=r*r+l*l+k*k-this.$a*this.$a;p=q*q-n*m;if(0>p)return!1;f=(-q-Math.sqrt(p))/n;if(0>f||1<f)return!1;a=r+a*f;n=l+b*f;e=k+e*f;q=a*a+n*n+e*e;0<q&&(q=1/Math.sqrt(q));b=h.position;b.x=a+0;b.y=n+g;b.z=e+0;g=h.normal;g.x=a*q;g.y=n*q;g.z=e*q;h.fraction=f;return!0},qa:fd});$c.R=!0;$c.Jb=Da;$c.prototype=Gb(Da.prototype,{Sh:function(){return this.$a},mj:function(){return this.Gb},Be:function(){var a=this.$a*this.$a,b=this.Gb*this.Gb*4;this.nf=3.14159265358979*a*this.Gb*2/3;this.cg=.05*(3*a+2*b);this.fg=this.eg=this.dg=0;this.gg=.3*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+2*b)},Lb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.$a;h*=this.$a;l*=this.$a;e*=this.Gb;d*=this.Gb;c*=this.Gb;var g,k,m,n,q,p;g=-e-f;k=-d-h;m=-c-l;n=-e+f;q=-d+h;p=-c+l;l=g>n?g:n;h=k>q?k:q;f=m>p?m:p;g=g<n?g:n;k=k<q?k:q;m=m<p?m:p;a.ma=b.v+(g<e?g:e);a.na=b.A+(k<d?k:d);a.oa=b.B+(m<c?m:c);a.ja=b.v+(l>e?l:e);a.ka=b.A+(h>d?h:d);a.la=b.B+(f>c?f:c)},Ld:function(a,b){var e=a.x,d=a.y,c=a.z;0<d&&d*d>this.ak*this.ak*(e*e+d*d+c*c)?(b.za(0,this.Gb-this.fc/this.ak,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,d=e*e+a*a,c=2*this.Gb,c=(c-this.fc)/c*this.$a-this.fc/this.Sj,0>c&&(c=0),d=0<d?c/Math.sqrt(d):0,c=this.Gb-this.fc,0>c&&(c=0),b.x=e*d,b.y=-c,b.z=a*d)},li:function(a,b,e,d,c,f,h){var l=this.Gb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,m=(l-b)*m;if(n>m)var q=n,n=m,m=q;0<n&&(g=n);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var q=this.Sj*this.Sj,m=q*(d*d+c*c+f*f)-c*c,n=q*(a*d+b*c+e*f)-b*c,q=q*(a*a+b*b+e*e)-b*b,p=n*n-m*q;if(m){if(0>p)return!1;p=Math.sqrt(p);if(0>m)if(0<c){if(q=0,n=(-n+p)/m,0>=n)return!1}else{if(q=(-n-p)/m,n=1,1<=q)return!1}else if(q=(-n-p)/m,n=(-n+p)/m,1<=q||0>=n)return!1}else if(m=-q/(2*n),0<n){if(q=0,n=m,0>=m)return!1}else if(q=m,n=1,1<=m)return!1;b+=l;if(n<=g||k<=q)return!1;if(q<g){l=g;if(!l)return!1;h.normal.za(0,0<c?-1:1,0)}else{l=q;if(!l)return!1;g=h.normal.za(a+d*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;k=this.Sj;n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;h.normal.y+=this.ak}h.position.za(a+l*d,b+l*c,e+l*f);h.fraction=l;return!0},qa:$c});od.R=!0;od.Jb=Da;od.prototype=Gb(Da.prototype,{An:function(){return this.yb},Be:function(){this.cg=this.nf=1;this.fg=this.eg=this.dg=0;this.gg=1;this.jg=this.ig=this.hg=0;this.kg=1;for(var a=this.yb[0].x,b=this.yb[0].y,e=this.yb[0].z,d=this.yb[0].x,c=this.yb[0].y,f=this.yb[0].z,h=1,l=this.Ae;h<l;){var g=h++,k=this.yb[g].x,m=this.yb[g].y,g=this.yb[g].z;k<a?a=k:k>d&&(d=k);m<b?b=m:m>c&&(c=m);g<e?e=g:g>f&&(f=g)}h=d-a;l=c-b;k=f-e;this.nf=h*l*k;a=.25*((a+d)*(a+d)+(b+c)*(b+c)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.cg=.3333333333333333*(l+k)+a;this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(k+h)+a;this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(h+l)+a},Lb:function(a,b){var e,d,c,f,h,l,g,k,m;m=k=g=this.fc;var n,q,p;e=this.yb[0];n=e.x;q=e.y;p=e.z;d=b.o*n+b.f*q+b.h*p;e=b.i*n+b.m*q+b.j*p;c=b.l*n+b.g*q+b.s*p;n=d+b.v;q=e+b.A;p=c+b.B;e=n;d=q;c=p;f=n;h=q;l=p;for(var r=1,v=this.Ae;r<v;){n=r++;p=this.yb[n];n=p.x;q=p.y;p=p.z;var aa,w;aa=b.o*n+b.f*q+b.h*p;w=b.i*n+b.m*q+b.j*p;p=b.l*n+b.g*q+b.s*p;n=aa;q=w;n+=b.v;q+=b.A;p+=b.B;e=e<n?e:n;d=d<q?d:q;c=c<p?c:p;f=f>n?f:n;h=h>q?h:q;l=l>p?l:p}a.ma=e-g;a.na=d-k;a.oa=c-m;a.ja=f+g;a.ka=h+k;a.la=l+m},Ld:function(a,b){for(var e=this.yb[0],e=e.x*a.x+e.y*a.y+e.z*a.z,d=0,c=1,f=this.Ae;c<f;){var h=c++,l=this.yb[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,d=h)}a=this.yb[d];b.x=a.x;b.y=a.y;b.z=a.z},qa:od});Zc.R=!0;Zc.Jb=Da;Zc.prototype=Gb(Da.prototype,{Sh:function(){return this.$a},mj:function(){return this.Gb},Be:function(){var a=this.$a*this.$a,b=this.Gb*this.Gb*4;this.nf=3.14159265358979*a*this.Gb*2;this.cg=.08333333333333333*(3*a+b);this.fg=this.eg=this.dg=0;this.gg=.5*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+b)},Lb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;e=0>e?-e:e;d=0>d?-d:d;c=0>c?-c:c;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.$a;h*=this.$a;l*=this.$a;e*=this.Gb;d*=this.Gb;c*=this.Gb;f+=e;h+=d;l+=c;a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-l;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+l},Ld:function(a,b){var e=a.x,d=a.z,c=e*e+d*d,f=this.$a-this.fc;0>f&&(f=0);c=0<c?f/Math.sqrt(c):0;f=this.Gb-this.fc;0>f&&(f=0);b.x=e*c;b.y=0<a.y?f:-f;b.z=d*c},li:function(a,b,e,d,c,f,h){var l=this.Gb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,l=(l-b)*m;n>l&&(m=n,n=l,l=m);0<n&&(g=n);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=d*d+f*f,n=a*d+e*f,m=a*a+e*e-this.$a*this.$a,q=n*n-l*m;if(0>q)return!1;if(0<l){if(q=Math.sqrt(q),m=(-n-q)/l,l=(-n+q)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.za(0,0<c?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.za(a+d*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);n=k.y*l;m=k.z*l;k.x=k.x*l;k.y=n;k.z=m}h.position.za(a+g*d,b+g*c,e+g*f);h.fraction=g;return!0},qa:Zc});Nb.R=!0;Ed.R=!0;Ed.prototype={qa:Ed};xd.R=!0;xd.Jb=Da;xd.prototype=Gb(Da.prototype,{Sh:function(){return this.$a},Be:function(){this.nf=4.188790204786386*this.$a*this.$a*this.$a;this.cg=.4*this.$a*this.$a;this.fg=this.eg=this.dg=0;this.gg=.4*this.$a*this.$a;this.jg=this.ig=this.hg=0;this.kg=.4*this.$a*this.$a},Lb:function(a,b){var e,d,c;c=d=e=this.$a;a.ma=b.v-e;a.na=b.A-d;a.oa=b.B-c;a.ja=b.v+e;a.ka=b.A+d;a.la=b.B+c},Ld:function(a,b){b.O()},li:function(a,b,e,d,c,f,h){var l;d-=a;c-=b;l=f-e;f=d*d+c*c+l*l;var g=a*d+b*c+e*l,k=g*g-f*(a*a+b*b+e*e-this.$a*this.$a);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=d*f;b+=c*f;e+=l*f;d=a*a+b*b+e*e;0<d&&(d=1/Math.sqrt(d));c=h.position;c.x=a;c.y=b;c.z=e;c=h.normal;c.x=a*d;c.y=b*d;c.z=e*d;h.fraction=f;return!0},qa:xd});Sd.R=!0;Sd.prototype={Pa:function(a,b){return this.Hb[a][b]},qa:Sd};md.R=!0;md.prototype={cm:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var d=b++;this.points[d].depth>a&&(a=this.points[d].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.O();e.position2.O();e.depth=0;e.id=0}this.normal.O()},qa:md};mj.R=!0;mj.prototype={qa:mj};bk.R=!0;bk.prototype={Je:function(){null!=this.gi&&this.gi.clear()},qa:bk};ed.R=!0;ed.prototype={xi:function(a,b,e,d){var c=a.normal;c.x=b;c.y=e;c.z=d;this.qh&&(a=a.normal,b=-a.y,e=-a.z,a.x=-a.x,a.y=b,a.z=e)},ri:function(a,b,e,d,c,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.qh?(l=a.position1,l.x=c,l.y=f,l.z=h,c=a.position2,c.x=b,c.y=e,c.z=d):(l=a.position1,l.x=b,l.y=e,l.z=d,b=a.position2,b.x=c,b.y=f,b.z=h)},Rh:function(){},Yl:function(a,b,e,d,c,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.O();g.position2.O();g.depth=0;g.id=0}a.normal.O();this.qh?this.Rh(a,e,b,c,d,f):this.Rh(a,b,e,d,c,f)},qa:ed};Gd.R=!0;Gd.Jb=ed;Gd.prototype=Gb(ed.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k,m;f=d.f;h=d.m;l=d.g;g=c.f;k=c.m;m=c.g;var n=b.Gb,q=e.Gb;b=b.$a;e=e.$a;var p,r,v,aa,w,A;p=d.v+f*-n;r=d.A+h*-n;v=d.B+l*-n;f=d.v+f*n;aa=d.A+h*n;w=d.B+l*n;h=c.v+g*-q;l=c.A+k*-q;d=c.B+m*-q;g=c.v+g*q;k=c.A+k*q;A=c.B+m*q;var u,D,t;u=p-h;D=r-l;t=v-d;f-=p;aa-=r;c=w-v;m=g-h;w=k-l;g=A-d;k=-(u*f+D*aa+t*c);u=u*m+D*w+t*g;D=n*n*4;t=f*m+aa*w+c*g;A=q*q*4;D||A?D?A?((q=D*A-t*t)?(n=t*u+A*k,n=0>n?0:n>q?1:n/q):n=0,q=n*t+u,0>q?(q=0,n=k,n=0>n?0:n>D?1:n/D):q>A?(q=1,n=t+k,n=0>n?0:n>D?1:n/D):q/=A):(q=0,n=k,n=0>n?0:n>D?1:n/D):(n=0,q=u,q=0>q?0:q>A?1:q/A):q=n=0;p+=f*n;r+=aa*n;v+=c*n;h+=m*q;l+=w*q;d+=g*q;aa=p-h;f=r-l;q=v-d;n=aa*aa+f*f+q*q;n>=(b+e)*(b+e)||(n=Math.sqrt(n),0<n?(aa*=1/n,f*=1/n,q*=1/n):(aa=1,q=f=0),this.xi(a,aa,f,q),this.ri(a,p+aa*-b,r+f*-b,v+q*-b,h+aa*e,l+f*e,d+q*e,b+e-n,0))},qa:Gd});de.R=!0;de.Jb=ed;de.prototype=Gb(ed.prototype,{Rh:function(a,b,e,d,c,f){var h=Zb.Pa;d=h.kj(b,e,d,c,F.enableGJKCaching?f:null,!0);a.incremental=!0;if(d!=Pb.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+d);else if(!(h.distance>b.fc+e.fc)){var l,g,k;f=h.closestPoint1;d=f.x;c=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,n,q;m=d-l;n=c-g;q=f-k;if(m*m+n*n+q*q){0>h.distance&&(m=-m,n=-n,q=-q);var p=m*m+n*n+q*q;0<p&&(p=1/Math.sqrt(p));m*=p;n*=p;q*=p;this.xi(a,m,n,q);d+=m*-b.fc;c+=n*-b.fc;f+=q*-b.fc;l+=m*e.fc;g+=n*e.fc;k+=q*e.fc;this.ri(a,d,c,f,l,g,k,b.fc+e.fc-h.distance,0)}}},qa:de});wd.R=!0;wd.Jb=ed;wd.prototype=Gb(ed.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k;f=e.Le;h=e.Me;e=e.Ne;l=-f;g=-h;k=-e;b=b.$a;var m,n,q;m=d.v-c.v;n=d.A-c.A;q=d.B-c.B;var p,r;p=c.o*m+c.i*n+c.l*q;r=c.f*m+c.m*n+c.g*q;m=c.h*m+c.j*n+c.s*q;if(l<p&&f>p&&g<r&&h>r&&k<m&&e>m){var v;n=f-(0>p?-p:p);v=h-(0>r?-r:r);var aa=e-(0>m?-m:m),w,A;n<v?n<aa?(l=0<p?1:-1,w=k=g=0,q=A=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),A=w=1,q=0,n=aa):v<aa?(0<r?(l=0,g=1):(l=0,g=-1),k=0,w=1,A=0,q=1,n=v):(0<m?(g=l=0,k=1):(g=l=0,k=-1),A=w=1,q=0,n=aa);p=l*f+w*p;h=g*h+A*r;m=k*e+q*m;e=c.o*p+c.f*h+c.h*m;r=c.i*p+c.m*h+c.j*m;h=c.l*p+c.g*h+c.s*m;m=c.o*l+c.f*g+c.h*k;p=c.i*l+c.m*g+c.j*k;f=c.l*l+c.g*g+c.s*k;this.xi(a,m,p,f);this.ri(a,d.v+m*-b,d.A+p*-b,d.B+f*-b,c.v+e,c.A+r,c.B+h,n,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=p<f?p:f,n=r<h?r:h,q=m<e?m:e,f=f>l?f:l,n=n>g?n:g,q=q>k?q:k,p-=f,l=r-n,g=m-q,e=p*p+l*l+g*g,e>=b*b||(e=Math.sqrt(e),r=c.o*f+c.f*n+c.h*q,h=c.i*f+c.m*n+c.j*q,m=c.l*f+c.g*n+c.s*q,k=c.o*p+c.f*l+c.h*g,f=c.i*p+c.m*l+c.j*g,p=c.l*p+c.g*l+c.s*g,g=k*k+f*f+p*p,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,p*=g,this.xi(a,l,f,p),this.ri(a,d.v+l*-b,d.A+f*-b,d.B+p*-b,c.v+r,c.A+h,c.B+m,b-e,0))},qa:wd});Nd.R=!0;Nd.Jb=ed;Nd.prototype=Gb(ed.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f=e.Gb;b=b.$a;e=e.$a;var h,l,g;h=c.f;l=c.m;g=c.g;var k,m;k=d.v;m=d.A;d=d.B;var n,q,p,r;n=c.v+h*-f;q=c.A+l*-f;p=c.B+g*-f;h=c.v+h*f;l=c.A+l*f;r=c.B+g*f;c=h-n;g=l-q;l=r-p;f=f*f*4;h=(k-n)*c+(m-q)*g+(d-p)*l;h=0>h?0:h>f?1:h/f;f=n+c*h;q+=g*h;p+=l*h;l=k-f;g=m-q;n=d-p;c=l*l+g*g+n*n;c>=(b+e)*(b+e)||(c=Math.sqrt(c),0<c?(l*=1/c,g*=1/c,n*=1/c):(l=1,n=g=0),this.xi(a,l,g,n),this.ri(a,k+l*-b,m+g*-b,d+n*-b,f+l*e,q+g*e,p+n*e,b+e-c,0))},qa:Nd});Te.R=!0;Te.Jb=ed;Te.prototype=Gb(ed.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f,h,l;f=d.v-c.v;h=d.A-c.A;l=d.B-c.B;b=b.$a;e=e.$a;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.xi(a,f,h,l),this.ri(a,d.v+f*-b,d.A+h*-b,d.B+l*-b,c.v+f*e,c.A+h*e,c.B+l*e,b+e-g,0))},qa:Te});lj.R=!0;lj.prototype={Sn:function(){for(var a=this.Vc;null!=a;){for(var b=a.M,e=0;3>e;){var d=e++;a.yb[d].dj=null;a.yb[d].pi=null;if(-1==a.Ie[d])return this.Bc=2,!1;if(null==a.we[d])return this.Bc=3,!1}a=b}return!0},am:function(a,b,e){if(b.Jk!=a){b.Jk=a;var d=b.ai;d.x=e.x;d.y=e.y;d.z=e.z;var c=b.yb[0].ud,f=d.y-c.y,h=d.z-c.z;d.x=d.x-c.x;d.y=f;d.z=h;d=b.ai;c=b.Lj;b.cj=0<d.x*c.x+d.y*c.y+d.z*c.z;if(b.cj){for(d=0;3>d;)if(c=d++,f=b.we[c],null!=f){h=f.ai;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.yb[0].ud,g=h.y-l.y,k=h.z-l.z;h.x=h.x-l.x;h.y=g;h.z=k;h=f.ai;l=f.Lj;f.cj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.cj?this.am(a,f,e):(h=b.yb[c],h.pi=b.yb[b.ii[c]],h.dj=f)}for(a=0;3>a;)e=a++,d=b.we[e],null!=d&&(c=b.Ie[e],d.we[c]=null,d.Ie[c]=-1,b.we[e]=null,b.Ie[e]=-1);this.ah--;a=b.ia;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ia=a);b==this.Vc&&(this.Vc=this.Vc.M);b==this.Fc&&(this.Fc=this.Fc.ia);b.M=null;b.ia=null;b.$j();b.M=this.ve;this.ve=b}else this.Bc=6}},Vg:function(a,b,e,d){this.Bc=0;this.Ae=4;this.yb[0]=a;this.yb[1]=b;this.yb[2]=e;this.yb[3]=d;var c=this.ei,f=a.ud;c.x=f.x;c.y=f.y;c.z=f.z;var f=b.ud,h=c.y+f.y,l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=e.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=d.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=.25*c.y;h=.25*c.z;c.x=.25*c.x;c.y=f;c.z=h;c=this.ve;null!=c?(this.ve=c.M,c.M=null):c=new nd;f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new nd;h=this.ve;null!=h?(this.ve=h.M,h.M=null):h=new nd;l=this.ve;null!=l?(this.ve=l.M,l.M=null):l=new nd;c.za(a,b,e,this.ei,!0)||(this.Bc=1);f.za(a,b,d,this.ei,!0)||(this.Bc=1);h.za(a,e,d,this.ei,!0)||(this.Bc=1);l.za(b,e,d,this.ei,!0)||(this.Bc=1);c.Ig(f)||(this.Bc=1);c.Ig(h)||(this.Bc=1);c.Ig(l)||(this.Bc=1);f.Ig(h)||(this.Bc=1);f.Ig(l)||(this.Bc=1);h.Ig(l)||(this.Bc=1);this.ah++;null==this.Vc?this.Vc=c:(this.Fc.M=c,c.ia=this.Fc);this.Fc=c;this.ah++;null==this.Vc?this.Vc=f:(this.Fc.M=f,f.ia=this.Fc);this.Fc=f;this.ah++;null==this.Vc?this.Vc=h:(this.Fc.M=h,h.ia=this.Fc);this.Fc=h;this.ah++;null==this.Vc?this.Vc=l:(this.Fc.M=l,l.ia=this.Fc);this.Fc=l;return!this.Bc},Im:function(a,b){this.yb[this.Ae++]=a;var e=b.yb[0];this.am(this.Ae,b,a.ud);if(0!=this.Bc)return!1;b=e;for(var d=null,c=null;;){if(null==b.pi)return this.Bc=4,!1;if(null==b.dj)return this.Bc=5,!1;var f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new nd;null==c&&(c=f);f.za(b,b.pi,a,this.ei,!1)||(this.Bc=1);if(0!=this.Bc)return!1;this.ah++;null==this.Vc?this.Vc=f:(this.Fc.M=f,f.ia=this.Fc);this.Fc=f;f.Ig(b.dj)||(this.Bc=1);null==d||f.Ig(d)||(this.Bc=1);d=f;b=b.pi;if(b==e)break}d.Ig(c)||(this.Bc=1);return 0==this.Bc?this.Sn():!1},qa:lj};nd.R=!0;nd.prototype={za:function(a,b,e,d,c){null==c&&(c=!1);var f,h,l,g,k,m,n,q,p,r,v,aa,w=a.ud;f=w.x;h=w.y;l=w.z;var A=b.ud;g=A.x;k=A.y;m=A.z;var u=e.ud;n=u.x;q=u.y;p=u.z;r=d.x;v=d.y;aa=d.z;var D,t,z,E,x,zb,N,G,al;D=g-f;t=k-h;z=m-l;E=n-f;x=q-h;zb=p-l;N=f-r;G=h-v;al=l-aa;var F,C,ha;F=t*zb-z*x;C=z*E-D*zb;ha=D*x-t*E;var O=!1;if(0>N*F+G*C+al*ha)if(c){var Vb=b;b=e;e=Vb;F*=-1;C*=-1;ha*=-1}else O=!0;this.yb[0]=a;this.yb[1]=b;this.yb[2]=e;var L=this.Lj;L.x=F;L.y=C;L.z=ha;var ka=a.ud,bb=b.ud,U=e.ud,R=this.ai,M,Na,Ra,yc,Pa,Ba,Hb,J,Qa,ba,Q,P,xa,ta,W,pa,y,Ia;M=ka.x;Na=ka.y;Ra=ka.z;yc=bb.x;Pa=bb.y;Ba=bb.z;Hb=U.x;J=U.y;Qa=U.z;ba=yc-M;Q=Pa-Na;P=Ba-Ra;xa=Hb-yc;ta=J-Pa;W=Qa-Ba;pa=M-Hb;y=Na-J;Ia=Ra-Qa;var ca,Ea,ya;ca=Q*W-P*ta;Ea=P*xa-ba*W;ya=ba*ta-Q*xa;var Fa=M*(Q*ya-P*Ea)+Na*(P*ca-ba*ya)+Ra*(ba*Ea-Q*ca),Sa=yc*(ta*ya-W*Ea)+Pa*(W*ca-xa*ya)+Ba*(xa*Ea-ta*ca),la=Hb*(y*ya-Ia*Ea)+J*(Ia*ca-pa*ya)+Qa*(pa*Ea-y*ca),Z=-1,Ga,ra,va;va=ra=Ga=0;if(0>Fa){var I,La,Wa,S,Xa,T;I=ka.x;La=ka.y;Wa=ka.z;S=bb.x;Xa=bb.y;T=bb.z;var K,ia,gb;K=S-I;ia=Xa-La;gb=T-Wa;var da=K*I+ia*La+gb*Wa,da=-da/(K*K+ia*ia+gb*gb);if(0>da)R.x=I,R.y=La,R.z=Wa;else if(1<da)R.x=S,R.y=Xa,R.z=T;else{var Hc,sa,fb;Hc=I+K*da;sa=La+ia*da;fb=Wa+gb*da;R.x=Hc;R.y=sa;R.z=fb}Z=R.x*R.x+R.y*R.y+R.z*R.z;Ga=R.x;ra=R.y;va=R.z}if(0>Sa){var kb,Ya,ma,oa,Ja,Ha;kb=bb.x;Ya=bb.y;ma=bb.z;oa=U.x;Ja=U.y;Ha=U.z;var ob,fa,ea;ob=oa-kb;fa=Ja-Ya;ea=Ha-ma;var ja=ob*kb+fa*Ya+ea*ma,ja=-ja/(ob*ob+fa*fa+ea*ea);if(0>ja)R.x=kb,R.y=Ya,R.z=ma;else if(1<ja)R.x=oa,R.y=Ja,R.z=Ha;else{var cb,Aa,sb;cb=kb+ob*ja;Aa=Ya+fa*ja;sb=ma+ea*ja;R.x=cb;R.y=Aa;R.z=sb}var Ua=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||Ua<Z)Z=Ua,Ga=R.x,ra=R.y,va=R.z}if(0>la){var qb,rb,ub,Va,xb,rc;qb=ka.x;rb=ka.y;ub=ka.z;Va=U.x;xb=U.y;rc=U.z;var Za,ua,Qb;Za=Va-qb;ua=xb-rb;Qb=rc-ub;var H=Za*qb+ua*rb+Qb*ub,H=-H/(Za*Za+ua*ua+Qb*Qb);if(0>H)R.x=qb,R.y=rb,R.z=ub;else if(1<H)R.x=Va,R.y=xb,R.z=rc;else{var pb,db,oc;pb=qb+Za*H;db=rb+ua*H;oc=ub+Qb*H;R.x=pb;R.y=db;R.z=oc}var $a=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||$a<Z)Z=$a,Ga=R.x,ra=R.y,va=R.z}if(0<Z)R.x=Ga,R.y=ra,R.z=va;else{var hb=ca*ca+Ea*Ea+ya*ya;0<hb&&(hb=1/Math.sqrt(hb));ca*=hb;Ea*=hb;ya*=hb;var B=ca*ca+Ea*Ea+ya*ya,B=(M*ca+Na*Ea+Ra*ya)/B;Ga=ca*B;ra=Ea*B;va=ya*B;R.x=Ga;R.y=ra;R.z=va}var Db=this.ai;this.Ej=Db.x*Db.x+Db.y*Db.y+Db.z*Db.z;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=-1;this.Ie[1]=-1;this.Ie[2]=-1;return!O},Ig:function(a){for(var b=0,e=0;3>e;)for(var d=e++,c=0;3>c;){var f=c++,h=this.ii[d];this.yb[d]==a.yb[this.ii[f]]&&this.yb[h]==a.yb[f]&&(this.we[d]=a,this.Ie[d]=f,a.we[f]=this,a.Ie[f]=d,++b)}return 1!=b?!1:!0},$j:function(){this.ia=this.M=null;this.Jk=0;this.cj=!1;this.Ej=0;this.yb[0]=null;this.yb[1]=null;this.yb[2]=null;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=0;this.Ie[1]=0;this.Ie[2]=0},qa:nd};Dc.R=!0;Dc.prototype={za:function(a,b,e){var d=this.ud;d.x=a.x;d.y=a.y;d.z=a.z;a=this.gb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.ob;b.x=e.x;b.y=e.y;b.z=e.z;this.dj=this.pi=this.M=null;return this},$j:function(){this.dj=this.pi=this.M=null},qa:Dc};Ek.R=!0;Ek.prototype={clear:function(){this.ql.O()},qa:Ek};t.R=!0;t.prototype={za:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},O:function(){this.z=this.y=this.x=0;return this},bd:function(a){return new t(this.x+a.x,this.y+a.y,this.z+a.z)},Pa:function(a,b){return new t(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},ge:function(a){return new t(this.x-a.x,this.y-a.y,this.z-a.z)},ee:function(a){return new t(this.x*a,this.y*a,this.z*a)},He:function(a,b,e){return new t(this.x*a,this.y*b,this.z*e)},Pd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},sb:function(a){return new t(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},cd:function(a){var b=this.y+a.y,e=this.z+a.z;this.x+=a.x;this.y=b;this.z=e;return this},ab:function(a,b){var e=this.y+a.y*b,d=this.z+a.z*b;this.x+=a.x*b;this.y=e;this.z=d;return this},Ge:function(a){var b=this.y-a.y,e=this.z-a.z;this.x=this.x-a.x;this.y=b;this.z=e;return this},fe:function(a){var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Bf:function(a,b,e){b=this.y*b;e=this.z*e;this.x=this.x*a;this.y=b;this.z=e;return this},Kb:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},lc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},qc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},zc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;a=new t;a.x=b;a.y=e;a.z=d;return a},mc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},rc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Cc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;this.x=b;this.y=e;this.z=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},be:function(){return this.x*this.x+this.y*this.y+this.z*this.z},de:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new t(this.x*a,this.y*a,this.z*a)},ce:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Hc:function(){return new t(-this.x,-this.y,-this.z)},ad:function(){var a=-this.y,b=-this.z;this.x=-this.x;this.y=a;this.z=b;return this},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new t(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"},qa:t};wa.R=!0;wa.prototype={Mf:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},sb:function(){var a=new t;a.x=this.v;a.y=this.A;a.z=this.B;return a},Kb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},zc:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Hc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},lc:function(){var a=new O;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},mc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Cc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},qc:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+d*this.l;m=b*this.f+e*this.m+d*this.g;b=b*this.h+e*this.j+d*this.s;e=c*this.o+f*this.i+h*this.l;d=c*this.f+f*this.m+h*this.g;c=c*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=d;this.j=c;this.l=f;this.g=h;this.s=l},Pa:function(){var a=new ga,b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},ab:function(a){var b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},rc:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.o=1-g-d;this.f=k-c;this.h=b+h;this.i=k+c;this.m=1-a-d;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new wa;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},Zd:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this},qa:wa};F.R=!0;Zb.R=!0;Zb.ad=function(){return Zb.Pa};Zb.prototype={kj:function(a,b,e,d,c,f){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var h=this.Oa,l=this.gb,g=this.ob,k=this.closest,m=this.dir;null!=c?(null==c.gi&&(c.gi=new Ek),this.Cn(c.gi)):m.O();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var n,q,p;n=d.v-e.v;q=d.A-e.A;p=d.B-e.B;m.x=n;m.y=q;m.z=p;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.za(1,0,0)}this.ya=0;this.pf(!1);this.qf(!1);var r=this.Oa[this.ya],v=this.gb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.ob[this.ya],w=r.y-aa.y,A=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=A;this.ya=1;for(var u=0;40>u;){var D=0;switch(this.ya){case 1:var t=h[0];k.x=t.x;k.y=t.y;k.z=t.z;D=1;break;case 2:var z,E,x,zb,N,G,F=h[0];z=F.x;E=F.y;x=F.z;var C=h[1];zb=C.x;N=C.y;G=C.z;var O,ha,L;O=zb-z;ha=N-E;L=G-x;var Vb=O*z+ha*E+L*x,Vb=-Vb/(O*O+ha*ha+L*L);if(0>Vb){var M=k;M.x=z;M.y=E;M.z=x;D=1}else if(1<Vb){var ka=k;ka.x=zb;ka.y=N;ka.z=G;D=2}else{var bb,U,R;bb=z+O*Vb;U=E+ha*Vb;R=x+L*Vb;var lc=k;lc.x=bb;lc.y=U;lc.z=R;D=3}break;case 3:var Na=h[0],Ra=h[1],yc=h[2],Pa,Ba,Hb,J,Qa,ba,Q,P,xa,ta,W,pa,y,Ia,ca,Ea,ya,Fa,Sa=Na;Pa=Sa.x;Ba=Sa.y;Hb=Sa.z;var la=Ra;J=la.x;Qa=la.y;ba=la.z;var Z=yc;Q=Z.x;P=Z.y;xa=Z.z;ta=J-Pa;W=Qa-Ba;pa=ba-Hb;y=Q-J;Ia=P-Qa;ca=xa-ba;Ea=Pa-Q;ya=Ba-P;Fa=Hb-xa;var Ga,ra,va;Ga=W*ca-pa*Ia;ra=pa*y-ta*ca;va=ta*Ia-W*y;var I=Pa*(W*va-pa*ra)+Ba*(pa*Ga-ta*va)+Hb*(ta*ra-W*Ga),La=J*(Ia*va-ca*ra)+Qa*(ca*Ga-y*va)+ba*(y*ra-Ia*Ga),Wa=Q*(ya*va-Fa*ra)+P*(Fa*Ga-Ea*va)+xa*(Ea*ra-ya*Ga),S=-1,Xa,T,K,ia=0;K=T=Xa=0;if(0>I){var gb,da,Hc,sa,fb,kb,Ya=Na;gb=Ya.x;da=Ya.y;Hc=Ya.z;var ma=Ra;sa=ma.x;fb=ma.y;kb=ma.z;var oa,Ja,Ha;oa=sa-gb;Ja=fb-da;Ha=kb-Hc;var ob=oa*gb+Ja*da+Ha*Hc,ob=-ob/(oa*oa+Ja*Ja+Ha*Ha),fa;if(0>ob){var ea=k;ea.x=gb;ea.y=da;ea.z=Hc;fa=1}else if(1<ob){var ja=k;ja.x=sa;ja.y=fb;ja.z=kb;fa=2}else{var cb,Aa,sb;cb=gb+oa*ob;Aa=da+Ja*ob;sb=Hc+Ha*ob;var Ua=k;Ua.x=cb;Ua.y=Aa;Ua.z=sb;fa=3}var qb=k.x*k.x+k.y*k.y+k.z*k.z,ia=fa,S=qb,rb=k;Xa=rb.x;T=rb.y;K=rb.z}if(0>La){var ub,Va,xb,rc,Za,ua,Qb=Ra;ub=Qb.x;Va=Qb.y;xb=Qb.z;var H=yc;rc=H.x;Za=H.y;ua=H.z;var pb,db,oc;pb=rc-ub;db=Za-Va;oc=ua-xb;var $a=pb*ub+db*Va+oc*xb,$a=-$a/(pb*pb+db*db+oc*oc),hb;if(0>$a){var B=k;B.x=ub;B.y=Va;B.z=xb;hb=1}else if(1<$a){var Db=k;Db.x=rc;Db.y=Za;Db.z=ua;hb=2}else{var fe,Tc,Fb;fe=ub+pb*$a;Tc=Va+db*$a;Fb=xb+oc*$a;var Oa=k;Oa.x=fe;Oa.y=Tc;Oa.z=Fb;hb=3}var nb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||nb<S){var ia=hb<<1,S=nb,vb=k;Xa=vb.x;T=vb.y;K=vb.z}}if(0>Wa){var yb,eb,Y,Ma,lb,Ta,ib=Na;yb=ib.x;eb=ib.y;Y=ib.z;var Ka=yc;Ma=Ka.x;lb=Ka.y;Ta=Ka.z;var Jb,bl,X;Jb=Ma-yb;bl=lb-eb;X=Ta-Y;var Cb=Jb*yb+bl*eb+X*Y,Cb=-Cb/(Jb*Jb+bl*bl+X*X),hd;if(0>Cb){var Cc=k;Cc.x=yb;Cc.y=eb;Cc.z=Y;hd=1}else if(1<Cb){var ql=k;ql.x=Ma;ql.y=lb;ql.z=Ta;hd=2}else{var ec,qd,ga;ec=yb+Jb*Cb;qd=eb+bl*Cb;ga=Y+X*Cb;var na=k;na.x=ec;na.y=qd;na.z=ga;hd=3}var xc=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||xc<S){var ia=hd&1|(hd&2)<<1,S=xc,qa=k;Xa=qa.x;T=qa.y;K=qa.z}}if(0<S){var jc=k;jc.x=Xa;jc.y=T;jc.z=K;D=ia}else{var pc=Ga*Ga+ra*ra+va*va;0<pc&&(pc=1/Math.sqrt(pc));Ga*=pc;ra*=pc;va*=pc;var kc=Ga*Ga+ra*ra+va*va,kc=(Pa*Ga+Ba*ra+Hb*va)/kc;Xa=Ga*kc;T=ra*kc;K=va*kc;var ac=k;ac.x=Xa;ac.y=T;ac.z=K;D=7}break;case 4:var Wb=h[0],Xb=h[1],Rb=h[2],fc=h[3],Sb,Ob,Yb,gc,Ib,$b,mb,za,tg,Ca,qc,mc,id,Ic,wa,sc,vc,Da,Uf,Gb,yd,Fc,wb,Ue,ab,Id,Pg,rl=Wb;Sb=rl.x;Ob=rl.y;Yb=rl.z;var tb=Xb;gc=tb.x;Ib=tb.y;$b=tb.z;var jb=Rb;mb=jb.x;za=jb.y;tg=jb.z;var zc=fc;Ca=zc.x;qc=zc.y;mc=zc.z;id=gc-Sb;Ic=Ib-Ob;wa=$b-Yb;sc=mb-Sb;vc=za-Ob;Da=tg-Yb;Uf=Ca-Sb;Gb=qc-Ob;yd=mc-Yb;Fc=mb-gc;wb=za-Ib;Ue=tg-$b;ab=Ca-gc;Id=qc-Ib;Pg=mc-$b;var Eb,Tb,Gk,Mb,Qc,Gl,Bb,ic,Ab,Ub,dc,Zb;Eb=Ic*Da-wa*vc;Tb=wa*sc-id*Da;Gk=id*vc-Ic*sc;Mb=vc*yd-Da*Gb;Qc=Da*Uf-sc*yd;Gl=sc*Gb-vc*Uf;Bb=Gb*wa-yd*Ic;ic=yd*id-Uf*wa;Ab=Uf*Ic-Gb*id;Ub=Id*Ue-Pg*wb;dc=Pg*Fc-ab*Ue;Zb=ab*wb-Id*Fc;var nc=0<id*Ub+Ic*dc+wa*Zb?1:-1,cc=Sb*Eb+Ob*Tb+Yb*Gk,Ec=Sb*Mb+Ob*Qc+Yb*Gl,Kc=Sb*Bb+Ob*ic+Yb*Ab,Ac=gc*Ub+Ib*dc+$b*Zb,ug=-1,Kb,Lb,pj,uc=0;pj=Lb=Kb=0;if(0>cc*nc){var rd,Uc,Vf,tc,Pb,Gc,Df,hl,vh,cl,hc,sd,Qg,Rg,vg,wh,Jd,sl,xh=Wb;rd=xh.x;Uc=xh.y;Vf=xh.z;var ed=Xb;tc=ed.x;Pb=ed.y;Gc=ed.z;var ck=Rb;Df=ck.x;hl=ck.y;vh=ck.z;cl=tc-rd;hc=Pb-Uc;sd=Gc-Vf;Qg=Df-tc;Rg=hl-Pb;vg=vh-Gc;wh=rd-Df;Jd=Uc-hl;sl=Vf-vh;var Lc,jd,kd;Lc=hc*vg-sd*Rg;jd=sd*Qg-cl*vg;kd=cl*Rg-hc*Qg;var Oc=rd*(hc*kd-sd*jd)+Uc*(sd*Lc-cl*kd)+Vf*(cl*jd-hc*Lc),Pl=tc*(Rg*kd-vg*jd)+Pb*(vg*Lc-Qg*kd)+Gc*(Qg*jd-Rg*Lc),Vc=Df*(Jd*kd-sl*jd)+hl*(sl*Lc-wh*kd)+vh*(wh*jd-Jd*Lc),Wc=-1,Yc,td,ad,Sc=0;ad=td=Yc=0;if(0>Oc){var Ee,Ve,We,Kd,qj,ve,we=Wb;Ee=we.x;Ve=we.y;We=we.z;var Nc=Xb;Kd=Nc.x;qj=Nc.y;ve=Nc.z;var dl,el,fl;dl=Kd-Ee;el=qj-Ve;fl=ve-We;var wg=dl*Ee+el*Ve+fl*We,wg=-wg/(dl*dl+el*el+fl*fl),Nb;if(0>wg){var Jc=k;Jc.x=Ee;Jc.y=Ve;Jc.z=We;Nb=1}else if(1<wg){var yh=k;yh.x=Kd;yh.y=qj;yh.z=ve;Nb=2}else{var bc,Fe,dk;bc=Ee+dl*wg;Fe=Ve+el*wg;dk=We+fl*wg;var wc=k;wc.x=bc;wc.y=Fe;wc.z=dk;Nb=3}var ld=k.x*k.x+k.y*k.y+k.z*k.z,Sc=Nb,Wc=ld,Xc=k;Yc=Xc.x;td=Xc.y;ad=Xc.z}if(0>Pl){var Pc,Bc,Xe,dd,ek,zh,Ah=Xb;Pc=Ah.x;Bc=Ah.y;Xe=Ah.z;var Bh=Rb;dd=Bh.x;ek=Bh.y;zh=Bh.z;var Ye,Ze,$e;Ye=dd-Pc;Ze=ek-Bc;$e=zh-Xe;var Zd=Ye*Pc+Ze*Bc+$e*Xe,Zd=-Zd/(Ye*Ye+Ze*Ze+$e*$e),rj;if(0>Zd){var tl=k;tl.x=Pc;tl.y=Bc;tl.z=Xe;rj=1}else if(1<Zd){var ul=k;ul.x=dd;ul.y=ek;ul.z=zh;rj=2}else{var Zc,Ef,Ff;Zc=Pc+Ye*Zd;Ef=Bc+Ze*Zd;Ff=Xe+$e*Zd;var Gf=k;Gf.x=Zc;Gf.y=Ef;Gf.z=Ff;rj=3}var Hl=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||Hl<Wc){var Sc=rj<<1,Wc=Hl,$c=k;Yc=$c.x;td=$c.y;ad=$c.z}}if(0>Vc){var Wf,Xf,af,Yf,Hf,xe,bf=Wb;Wf=bf.x;Xf=bf.y;af=bf.z;var Zf=Rb;Yf=Zf.x;Hf=Zf.y;xe=Zf.z;var $f,ag,bg;$f=Yf-Wf;ag=Hf-Xf;bg=xe-af;var Ge=$f*Wf+ag*Xf+bg*af,Ge=-Ge/($f*$f+ag*ag+bg*bg),He;if(0>Ge){var cf=k;cf.x=Wf;cf.y=Xf;cf.z=af;He=1}else if(1<Ge){var cg=k;cg.x=Yf;cg.y=Hf;cg.z=xe;He=2}else{var qf,Ie,rf;qf=Wf+$f*Ge;Ie=Xf+ag*Ge;rf=af+bg*Ge;var dg=k;dg.x=qf;dg.y=Ie;dg.z=rf;He=3}var fd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||fd<Wc){var Sc=He&1|(He&2)<<1,Wc=fd,gd=k;Yc=gd.x;td=gd.y;ad=gd.z}}var vl;if(0<Wc){var wl=k;wl.x=Yc;wl.y=td;wl.z=ad;vl=Sc}else{var df=Lc*Lc+jd*jd+kd*kd;0<df&&(df=1/Math.sqrt(df));Lc*=df;jd*=df;kd*=df;var sf=Lc*Lc+jd*jd+kd*kd,sf=(rd*Lc+Uc*jd+Vf*kd)/sf;Yc=Lc*sf;td=jd*sf;ad=kd*sf;var If=k;If.x=Yc;If.y=td;If.z=ad;vl=7}var Ql=k.x*k.x+k.y*k.y+k.z*k.z,uc=vl,ug=Ql,Jf=k;Kb=Jf.x;Lb=Jf.y;pj=Jf.z}if(0>Ec*nc){var ge,ye,Kf,Rc,eg,zd,Ad,Bd,il,fg,gg,$d,he,ie,ae,tf,ef,ff,gf=Wb;ge=gf.x;ye=gf.y;Kf=gf.z;var Lf=Rb;Rc=Lf.x;eg=Lf.y;zd=Lf.z;var xl=fc;Ad=xl.x;Bd=xl.y;il=xl.z;fg=Rc-ge;gg=eg-ye;$d=zd-Kf;he=Ad-Rc;ie=Bd-eg;ae=il-zd;tf=ge-Ad;ef=ye-Bd;ff=Kf-il;var Td,Ld,Md;Td=gg*ae-$d*ie;Ld=$d*he-fg*ae;Md=fg*ie-gg*he;var Rl=ge*(gg*Md-$d*Ld)+ye*($d*Td-fg*Md)+Kf*(fg*Ld-gg*Td),Mf=Rc*(ie*Md-ae*Ld)+eg*(ae*Td-he*Md)+zd*(he*Ld-ie*Td),Xd=Ad*(ef*Md-ff*Ld)+Bd*(ff*Td-tf*Md)+il*(tf*Ld-ef*Td),ud=-1,Cd,hg,Ch,ig=0;Ch=hg=Cd=0;if(0>Rl){var Yd,be,ze,hf,jg,jf,kf=Wb;Yd=kf.x;be=kf.y;ze=kf.z;var lf=Rb;hf=lf.x;jg=lf.y;jf=lf.z;var Ae,uf,kg;Ae=hf-Yd;uf=jg-be;kg=jf-ze;var vf=Ae*Yd+uf*be+kg*ze,vf=-vf/(Ae*Ae+uf*uf+kg*kg),xg;if(0>vf){var lg=k;lg.x=Yd;lg.y=be;lg.z=ze;xg=1}else if(1<vf){var mf=k;mf.x=hf;mf.y=jg;mf.z=jf;xg=2}else{var wf,Je,yg;wf=Yd+Ae*vf;Je=be+uf*vf;yg=ze+kg*vf;var zg=k;zg.x=wf;zg.y=Je;zg.z=yg;xg=3}var nd=k.x*k.x+k.y*k.y+k.z*k.z,ig=xg,ud=nd,mg=k;Cd=mg.x;hg=mg.y;Ch=mg.z}if(0>Mf){var xf,yf,Be,Ag,yl,ng,og=Rb;xf=og.x;yf=og.y;Be=og.z;var pg=fc;Ag=pg.x;yl=pg.y;ng=pg.z;var Nf,Ke,nf;Nf=Ag-xf;Ke=yl-yf;nf=ng-Be;var zf=Nf*xf+Ke*yf+nf*Be,zf=-zf/(Nf*Nf+Ke*Ke+nf*nf),bd;if(0>zf){var vd=k;vd.x=xf;vd.y=yf;vd.z=Be;bd=1}else if(1<zf){var Fd=k;Fd.x=Ag;Fd.y=yl;Fd.z=ng;bd=2}else{var md,Sg,xd;md=xf+Nf*zf;Sg=yf+Ke*zf;xd=Be+nf*zf;var od=k;od.x=md;od.y=Sg;od.z=xd;bd=3}var Qd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ud||Qd<ud){var ig=bd<<1,ud=Qd,Mc=k;Cd=Mc.x;hg=Mc.y;Ch=Mc.z}}if(0>Xd){var Dc,pd,Dh,qe,re,Eh,Fh=Wb;Dc=Fh.x;pd=Fh.y;Dh=Fh.z;var Gh=fc;qe=Gh.x;re=Gh.y;Eh=Gh.z;var Hh,Ih,Jh;Hh=qe-Dc;Ih=re-pd;Jh=Eh-Dh;var Bg=Hh*Dc+Ih*pd+Jh*Dh,Bg=-Bg/(Hh*Hh+Ih*Ih+Jh*Jh),Kh;if(0>Bg){var Lh=k;Lh.x=Dc;Lh.y=pd;Lh.z=Dh;Kh=1}else if(1<Bg){var Mh=k;Mh.x=qe;Mh.y=re;Mh.z=Eh;Kh=2}else{var sj,Tg,tj;sj=Dc+Hh*Bg;Tg=pd+Ih*Bg;tj=Dh+Jh*Bg;var se=k;se.x=sj;se.y=Tg;se.z=tj;Kh=3}var Ce=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ud||Ce<ud){var ig=Kh&1|(Kh&2)<<1,ud=Ce,Wd=k;Cd=Wd.x;hg=Wd.y;Ch=Wd.z}}var Dd;if(0<ud){var te=k;te.x=Cd;te.y=hg;te.z=Ch;Dd=ig}else{var Ug=Td*Td+Ld*Ld+Md*Md;0<Ug&&(Ug=1/Math.sqrt(Ug));Td*=Ug;Ld*=Ug;Md*=Ug;var uj=Td*Td+Ld*Ld+Md*Md,uj=(ge*Td+ye*Ld+Kf*Md)/uj;Cd=Td*uj;hg=Ld*uj;Ch=Md*uj;var Ed=k;Ed.x=Cd;Ed.y=hg;Ed.z=Ch;Dd=7}var Sd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ug||Sd<ug){var uc=Dd&1|(Dd&6)<<1,ug=Sd,Nd=k;Kb=Nd.x;Lb=Nd.y;pj=Nd.z}}if(0>Kc*nc){var qg,Cg,Nh,wd,vj,Vg,Wg,Xg,Oh,Yg,Zg,$g,ah,bh,Dg,Ph,Qh,Rh,Sh=Wb;qg=Sh.x;Cg=Sh.y;Nh=Sh.z;var Th=Xb;wd=Th.x;vj=Th.y;Vg=Th.z;var ee=fc;Wg=ee.x;Xg=ee.y;Oh=ee.z;Yg=wd-qg;Zg=vj-Cg;$g=Vg-Nh;ah=Wg-wd;bh=Xg-vj;Dg=Oh-Vg;Ph=qg-Wg;Qh=Cg-Xg;Rh=Nh-Oh;var je,ke,le;je=Zg*Dg-$g*bh;ke=$g*ah-Yg*Dg;le=Yg*bh-Zg*ah;var pe=qg*(Zg*le-$g*ke)+Cg*($g*je-Yg*le)+Nh*(Yg*ke-Zg*je),Qe=wd*(bh*le-Dg*ke)+vj*(Dg*je-ah*le)+Vg*(ah*ke-bh*je),Le=Wg*(Qh*le-Rh*ke)+Xg*(Rh*je-Ph*le)+Oh*(Ph*ke-Qh*je),Od=-1,Ud,Uh,Vh,cd=0;Vh=Uh=Ud=0;if(0>pe){var Af,Of,Pf,Eg,wj,Wh,Xh=Wb;Af=Xh.x;Of=Xh.y;Pf=Xh.z;var Yh=Xb;Eg=Yh.x;wj=Yh.y;Wh=Yh.z;var Zh,$h,ai;Zh=Eg-Af;$h=wj-Of;ai=Wh-Pf;var Fg=Zh*Af+$h*Of+ai*Pf,Fg=-Fg/(Zh*Zh+$h*$h+ai*ai),xj;if(0>Fg){var bi=k;bi.x=Af;bi.y=Of;bi.z=Pf;xj=1}else if(1<Fg){var ci=k;ci.x=Eg;ci.y=wj;ci.z=Wh;xj=2}else{var yj,ch,fk;yj=Af+Zh*Fg;ch=Of+$h*Fg;fk=Pf+ai*Fg;var gk=k;gk.x=yj;gk.y=ch;gk.z=fk;xj=3}var Te=k.x*k.x+k.y*k.y+k.z*k.z,cd=xj,Od=Te,de=k;Ud=de.x;Uh=de.y;Vh=de.z}if(0>Qe){var zj,Aj,di,Gd,hk,ei,fi=Xb;zj=fi.x;Aj=fi.y;di=fi.z;var gi=fc;Gd=gi.x;hk=gi.y;ei=gi.z;var hi,ii,ji;hi=Gd-zj;ii=hk-Aj;ji=ei-di;var Gg=hi*zj+ii*Aj+ji*di,Gg=-Gg/(hi*hi+ii*ii+ji*ji),Bj;if(0>Gg){var ki=k;ki.x=zj;ki.y=Aj;ki.z=di;Bj=1}else if(1<Gg){var li=k;li.x=Gd;li.y=hk;li.z=ei;Bj=2}else{var Cj,dh,ik;Cj=zj+hi*Gg;dh=Aj+ii*Gg;ik=di+ji*Gg;var jk=k;jk.x=Cj;jk.y=dh;jk.z=ik;Bj=3}var Hd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||Hd<Od){var cd=Bj<<1,Od=Hd,Hk=k;Ud=Hk.x;Uh=Hk.y;Vh=Hk.z}}if(0>Le){var Dj,Ej,mi,Ik,kk,ni,oi=Wb;Dj=oi.x;Ej=oi.y;mi=oi.z;var pi=fc;Ik=pi.x;kk=pi.y;ni=pi.z;var qi,ri,si;qi=Ik-Dj;ri=kk-Ej;si=ni-mi;var Hg=qi*Dj+ri*Ej+si*mi,Hg=-Hg/(qi*qi+ri*ri+si*si),ti;if(0>Hg){var ui=k;ui.x=Dj;ui.y=Ej;ui.z=mi;ti=1}else if(1<Hg){var vi=k;vi.x=Ik;vi.y=kk;vi.z=ni;ti=2}else{var Fj,eh,Gj;Fj=Dj+qi*Hg;eh=Ej+ri*Hg;Gj=mi+si*Hg;var lk=k;lk.x=Fj;lk.y=eh;lk.z=Gj;ti=3}var Jk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||Jk<Od){var cd=ti&1|(ti&2)<<1,Od=Jk,Kk=k;Ud=Kk.x;Uh=Kk.y;Vh=Kk.z}}var mk;if(0<Od){var Lk=k;Lk.x=Ud;Lk.y=Uh;Lk.z=Vh;mk=cd}else{var fh=je*je+ke*ke+le*le;0<fh&&(fh=1/Math.sqrt(fh));je*=fh;ke*=fh;le*=fh;var Hj=je*je+ke*ke+le*le,Hj=(qg*je+Cg*ke+Nh*le)/Hj;Ud=je*Hj;Uh=ke*Hj;Vh=le*Hj;var nk=k;nk.x=Ud;nk.y=Uh;nk.z=Vh;mk=7}var ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ug||ok<ug){var uc=mk&3|(mk&4)<<1,ug=ok,pk=k;Kb=pk.x;Lb=pk.y;pj=pk.z}}if(0>Ac*nc){var rg,Ig,wi,qk,Ij,gh,hh,ih,xi,jh,kh,lh,mh,nh,Jg,yi,zi,Ai,Bi=Xb;rg=Bi.x;Ig=Bi.y;wi=Bi.z;var Ci=Rb;qk=Ci.x;Ij=Ci.y;gh=Ci.z;var rk=fc;hh=rk.x;ih=rk.y;xi=rk.z;jh=qk-rg;kh=Ij-Ig;lh=gh-wi;mh=hh-qk;nh=ih-Ij;Jg=xi-gh;yi=rg-hh;zi=Ig-ih;Ai=wi-xi;var me,ne,oe;me=kh*Jg-lh*nh;ne=lh*mh-jh*Jg;oe=jh*nh-kh*mh;var Ne=rg*(kh*oe-lh*ne)+Ig*(lh*me-jh*oe)+wi*(jh*ne-kh*me),Oe=qk*(nh*oe-Jg*ne)+Ij*(Jg*me-mh*oe)+gh*(mh*ne-nh*me),Me=hh*(zi*oe-Ai*ne)+ih*(Ai*me-yi*oe)+xi*(yi*ne-zi*me),Pd=-1,Vd,Di,Ei,Mk=0;Ei=Di=Vd=0;if(0>Ne){var Bf,Qf,Rf,Kg,Jj,Fi,Gi=Xb;Bf=Gi.x;Qf=Gi.y;Rf=Gi.z;var Hi=Rb;Kg=Hi.x;Jj=Hi.y;Fi=Hi.z;var Ii,Ji,Ki;Ii=Kg-Bf;Ji=Jj-Qf;Ki=Fi-Rf;var Lg=Ii*Bf+Ji*Qf+Ki*Rf,Lg=-Lg/(Ii*Ii+Ji*Ji+Ki*Ki),Kj;if(0>Lg){var Li=k;Li.x=Bf;Li.y=Qf;Li.z=Rf;Kj=1}else if(1<Lg){var Mi=k;Mi.x=Kg;Mi.y=Jj;Mi.z=Fi;Kj=2}else{var Lj,oh,sk;Lj=Bf+Ii*Lg;oh=Qf+Ji*Lg;sk=Rf+Ki*Lg;var tk=k;tk.x=Lj;tk.y=oh;tk.z=sk;Kj=3}var Pe=k.x*k.x+k.y*k.y+k.z*k.z,Mk=Kj,Pd=Pe,Nk=k;Vd=Nk.x;Di=Nk.y;Ei=Nk.z}if(0>Oe){var Mj,Nj,Ni,Rd,uk,Oi,Pi=Rb;Mj=Pi.x;Nj=Pi.y;Ni=Pi.z;var Qi=fc;Rd=Qi.x;uk=Qi.y;Oi=Qi.z;var Ri,Si,Ti;Ri=Rd-Mj;Si=uk-Nj;Ti=Oi-Ni;var Mg=Ri*Mj+Si*Nj+Ti*Ni,Mg=-Mg/(Ri*Ri+Si*Si+Ti*Ti),Oj;if(0>Mg){var Ui=k;Ui.x=Mj;Ui.y=Nj;Ui.z=Ni;Oj=1}else if(1<Mg){var Vi=k;Vi.x=Rd;Vi.y=uk;Vi.z=Oi;Oj=2}else{var Pj,ph,vk;Pj=Mj+Ri*Mg;ph=Nj+Si*Mg;vk=Ni+Ti*Mg;var wk=k;wk.x=Pj;wk.y=ph;wk.z=vk;Oj=3}var Ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Ok<Pd){var Mk=Oj<<1,Pd=Ok,Pk=k;Vd=Pk.x;Di=Pk.y;Ei=Pk.z}}if(0>Me){var Qj,Rj,Wi,Qk,xk,Xi,Yi=Xb;Qj=Yi.x;Rj=Yi.y;Wi=Yi.z;var Zi=fc;Qk=Zi.x;xk=Zi.y;Xi=Zi.z;var $i,aj,bj;$i=Qk-Qj;aj=xk-Rj;bj=Xi-Wi;var Ng=$i*Qj+aj*Rj+bj*Wi,Ng=-Ng/($i*$i+aj*aj+bj*bj),cj;if(0>Ng){var dj=k;dj.x=Qj;dj.y=Rj;dj.z=Wi;cj=1}else if(1<Ng){var ej=k;ej.x=Qk;ej.y=xk;ej.z=Xi;cj=2}else{var Sj,qh,Tj;Sj=Qj+$i*Ng;qh=Rj+aj*Ng;Tj=Wi+bj*Ng;var yk=k;yk.x=Sj;yk.y=qh;yk.z=Tj;cj=3}var Rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Rk<Pd){var Mk=cj&1|(cj&2)<<1,Pd=Rk,Sk=k;Vd=Sk.x;Di=Sk.y;Ei=Sk.z}}var Tk;if(0<Pd){var Uk=k;Uk.x=Vd;Uk.y=Di;Uk.z=Ei;Tk=Mk}else{var rh=me*me+ne*ne+oe*oe;0<rh&&(rh=1/Math.sqrt(rh));me*=rh;ne*=rh;oe*=rh;var Uj=me*me+ne*ne+oe*oe,Uj=(rg*me+Ig*ne+wi*oe)/Uj;Vd=me*Uj;Di=ne*Uj;Ei=oe*Uj;var zk=k;zk.x=Vd;zk.y=Di;zk.z=Ei;Tk=7}var Vk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ug||Vk<ug){var uc=Tk<<1,ug=Vk,Ak=k;Kb=Ak.x;Lb=Ak.y;pj=Ak.z}}if(0<ug){var sh=k;sh.x=Kb;sh.y=Lb;sh.z=pj;D=uc}else k.O(),D=15}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.ya){case 1:this.En();break;case 2:this.ml();break;case 3:this.tl()}if(4==this.ya){var Vj=this.Zm(a,b,e,d,h,l,g);if(0!=Vj)return this.distance=0,Vj;this.distance=-this.depth;return 0}this.distance=0;return 1}this.zm(D);m.x=k.x;m.y=k.y;m.z=k.z;var th=m,Re=-th.y,pf=-th.z;th.x=-th.x;th.y=Re;th.z=pf;this.pf(!1);this.qf(!1);var Wj=this.Oa[this.ya],Xj=this.gb[this.ya];Wj.x=Xj.x;Wj.y=Xj.y;Wj.z=Xj.z;var ce=Wj,uh=this.ob[this.ya],ue=ce.y-uh.y,Se=ce.z-uh.z;ce.x=ce.x-uh.x;ce.y=ue;ce.z=Se;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var Yj=h[this.ya];if(1E-8>Yj.x*m.x+Yj.y*m.y+Yj.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.im(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=c&&null!=c.gi&&this.In(c.gi),0;this.ya++;++u}return 2},Vl:function(a,b,e,d,c,f,h){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var l=this.Oa,g=this.closest,k=this.dir,m,n,q;m=d.v-e.v;n=d.A-e.A;q=d.B-e.B;k.x=m;k.y=n;k.z=q;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.za(1,0,0);this.ya=0;if(null!=this.hj)this.pf(!0);else{var p=this.gb[this.ya];p.x=this.pc.v;p.y=this.pc.A;p.z=this.pc.B}this.qf(!0);var r=this.Oa[this.ya],v=this.gb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.ob[this.ya],w=r.y-aa.y,A=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=A;this.ya=1;var u=0,D=0,t=this.Gn,z=this.Fn;t.O();z.x=f.x;z.y=f.y;z.z=f.z;var E=z.y-c.y,x=z.z-c.z;z.x=z.x-c.x;z.y=E;for(z.z=x;40>u;){var zb=0;switch(this.ya){case 1:var N=l[0];g.x=N.x;g.y=N.y;g.z=N.z;zb=1;break;case 2:var G,F,C,O,ha,L,Vb=l[0];G=Vb.x;F=Vb.y;C=Vb.z;var M=l[1];O=M.x;ha=M.y;L=M.z;var ka,bb,U;ka=O-G;bb=ha-F;U=L-C;var R=ka*G+bb*F+U*C,R=-R/(ka*ka+bb*bb+U*U);if(0>R){var lc=g;lc.x=G;lc.y=F;lc.z=C;zb=1}else if(1<R){var Na=g;Na.x=O;Na.y=ha;Na.z=L;zb=2}else{var Ra,yc,Pa;Ra=G+ka*R;yc=F+bb*R;Pa=C+U*R;var Ba=g;Ba.x=Ra;Ba.y=yc;Ba.z=Pa;zb=3}break;case 3:var Hb=l[0],J=l[1],Qa=l[2],ba,Q,P,xa,ta,W,pa,y,Ia,ca,Ea,ya,Fa,Sa,la,Z,Ga,ra,va=Hb;ba=va.x;Q=va.y;P=va.z;var I=J;xa=I.x;ta=I.y;W=I.z;var La=Qa;pa=La.x;y=La.y;Ia=La.z;ca=xa-ba;Ea=ta-Q;ya=W-P;Fa=pa-xa;Sa=y-ta;la=Ia-W;Z=ba-pa;Ga=Q-y;ra=P-Ia;var Wa,S,Xa;Wa=Ea*la-ya*Sa;S=ya*Fa-ca*la;Xa=ca*Sa-Ea*Fa;var T=ba*(Ea*Xa-ya*S)+Q*(ya*Wa-ca*Xa)+P*(ca*S-Ea*Wa),K=xa*(Sa*Xa-la*S)+ta*(la*Wa-Fa*Xa)+W*(Fa*S-Sa*Wa),ia=pa*(Ga*Xa-ra*S)+y*(ra*Wa-Z*Xa)+Ia*(Z*S-Ga*Wa),gb=-1,da,Hc,sa,fb=0;sa=Hc=da=0;if(0>T){var kb,Ya,ma,oa,Ja,Ha,ob=Hb;kb=ob.x;Ya=ob.y;ma=ob.z;var fa=J;oa=fa.x;Ja=fa.y;Ha=fa.z;var ea,ja,cb;ea=oa-kb;ja=Ja-Ya;cb=Ha-ma;var Aa=ea*kb+ja*Ya+cb*ma,Aa=-Aa/(ea*ea+ja*ja+cb*cb),sb;if(0>Aa){var Ua=g;Ua.x=kb;Ua.y=Ya;Ua.z=ma;sb=1}else if(1<Aa){var qb=g;qb.x=oa;qb.y=Ja;qb.z=Ha;sb=2}else{var rb,ub,Va;rb=kb+ea*Aa;ub=Ya+ja*Aa;Va=ma+cb*Aa;var xb=g;xb.x=rb;xb.y=ub;xb.z=Va;sb=3}var rc=g.x*g.x+g.y*g.y+g.z*g.z,fb=sb,gb=rc,Za=g;da=Za.x;Hc=Za.y;sa=Za.z}if(0>K){var ua,Qb,H,pb,db,oc,$a=J;ua=$a.x;Qb=$a.y;H=$a.z;var hb=Qa;pb=hb.x;db=hb.y;oc=hb.z;var B,Db,fe;B=pb-ua;Db=db-Qb;fe=oc-H;var Tc=B*ua+Db*Qb+fe*H,Tc=-Tc/(B*B+Db*Db+fe*fe),Fb;if(0>Tc){var Oa=g;Oa.x=ua;Oa.y=Qb;Oa.z=H;Fb=1}else if(1<Tc){var nb=g;nb.x=pb;nb.y=db;nb.z=oc;Fb=2}else{var vb,yb,eb;vb=ua+B*Tc;yb=Qb+Db*Tc;eb=H+fe*Tc;var Y=g;Y.x=vb;Y.y=yb;Y.z=eb;Fb=3}var Ma=g.x*g.x+g.y*g.y+g.z*g.z;if(0>gb||Ma<gb){var fb=Fb<<1,gb=Ma,lb=g;da=lb.x;Hc=lb.y;sa=lb.z}}if(0>ia){var Ta,ib,Ka,Jb,ga,X,Cb=Hb;Ta=Cb.x;ib=Cb.y;Ka=Cb.z;var hd=Qa;Jb=hd.x;ga=hd.y;X=hd.z;var Cc,na,ec;Cc=Jb-Ta;na=ga-ib;ec=X-Ka;var qd=Cc*Ta+na*ib+ec*Ka,qd=-qd/(Cc*Cc+na*na+ec*ec),qa;if(0>qd){var za=g;za.x=Ta;za.y=ib;za.z=Ka;qa=1}else if(1<qd){var xc=g;xc.x=Jb;xc.y=ga;xc.z=X;qa=2}else{var wa,jc,pc;wa=Ta+Cc*qd;jc=ib+na*qd;pc=Ka+ec*qd;var kc=g;kc.x=wa;kc.y=jc;kc.z=pc;qa=3}var ac=g.x*g.x+g.y*g.y+g.z*g.z;if(0>gb||ac<gb){var fb=qa&1|(qa&2)<<1,gb=ac,Wb=g;da=Wb.x;Hc=Wb.y;sa=Wb.z}}if(0<gb){var Xb=g;Xb.x=da;Xb.y=Hc;Xb.z=sa;zb=fb}else{var Rb=Wa*Wa+S*S+Xa*Xa;0<Rb&&(Rb=1/Math.sqrt(Rb));Wa*=Rb;S*=Rb;Xa*=Rb;var fc=Wa*Wa+S*S+Xa*Xa,fc=(ba*Wa+Q*S+P*Xa)/fc;da=Wa*fc;Hc=S*fc;sa=Xa*fc;var Sb=g;Sb.x=da;Sb.y=Hc;Sb.z=sa;zb=7}break;case 4:var Ob=l[0],Yb=l[1],gc=l[2],Ib=l[3],$b,mb,Ca,tg,Da,qc,mc,id,Ic,Gb,sc,vc,wb,Uf,ab,yd,Fc,tb,Ue,jb,Id,Pg,Eb,Tb,Mb,zc,Bb,ic=Ob;$b=ic.x;mb=ic.y;Ca=ic.z;var Gk=Yb;tg=Gk.x;Da=Gk.y;qc=Gk.z;var Ab=gc;mc=Ab.x;id=Ab.y;Ic=Ab.z;var Qc=Ib;Gb=Qc.x;sc=Qc.y;vc=Qc.z;wb=tg-$b;Uf=Da-mb;ab=qc-Ca;yd=mc-$b;Fc=id-mb;tb=Ic-Ca;Ue=Gb-$b;jb=sc-mb;Id=vc-Ca;Pg=mc-tg;Eb=id-Da;Tb=Ic-qc;Mb=Gb-tg;zc=sc-Da;Bb=vc-qc;var Ub,dc,nc,Kb,Lb,Zb,uc,cc,Ec,tc,Pb,Kc;Ub=Uf*tb-ab*Fc;dc=ab*yd-wb*tb;nc=wb*Fc-Uf*yd;Kb=Fc*Id-tb*jb;Lb=tb*Ue-yd*Id;Zb=yd*jb-Fc*Ue;uc=jb*ab-Id*Uf;cc=Id*wb-Ue*ab;Ec=Ue*Uf-jb*wb;tc=zc*Tb-Bb*Eb;Pb=Bb*Pg-Mb*Tb;Kc=Mb*Eb-zc*Pg;var hc=0<wb*tc+Uf*Pb+ab*Kc?1:-1,Ac=$b*Ub+mb*dc+Ca*nc,Gc=$b*Kb+mb*Lb+Ca*Zb,pj=$b*uc+mb*cc+Ca*Ec,ed=tg*tc+Da*Pb+qc*Kc,rd=-1,Uc,Vf,Nb,Nc=0;Nb=Vf=Uc=0;if(0>Ac*hc){var Jc,Df,Pc,vh,Bc,wc,sd,Qg,Rg,vg,wh,Jd,bc,xh,Oc,ck,Lc,jd,kd=Ob;Jc=kd.x;Df=kd.y;Pc=kd.z;var Xc=Yb;vh=Xc.x;Bc=Xc.y;wc=Xc.z;var ld=gc;sd=ld.x;Qg=ld.y;Rg=ld.z;vg=vh-Jc;wh=Bc-Df;Jd=wc-Pc;bc=sd-vh;xh=Qg-Bc;Oc=Rg-wc;ck=Jc-sd;Lc=Df-Qg;jd=Pc-Rg;var Vc,Wc,Yc;Vc=wh*Oc-Jd*xh;Wc=Jd*bc-vg*Oc;Yc=vg*xh-wh*bc;var td=Jc*(wh*Yc-Jd*Wc)+Df*(Jd*Vc-vg*Yc)+Pc*(vg*Wc-wh*Vc),ad=vh*(xh*Yc-Oc*Wc)+Bc*(Oc*Vc-bc*Yc)+wc*(bc*Wc-xh*Vc),Sc=sd*(Lc*Yc-jd*Wc)+Qg*(jd*Vc-ck*Yc)+Rg*(ck*Wc-Lc*Vc),Ee=-1,Ve,We,Kd,qj=0;Kd=We=Ve=0;if(0>td){var ve,we,Rc,dd,$c,gd,wg=Ob;ve=wg.x;we=wg.y;Rc=wg.z;var bd=Yb;dd=bd.x;$c=bd.y;gd=bd.z;var Dc,yh,Zc;Dc=dd-ve;yh=$c-we;Zc=gd-Rc;var Fe=Dc*ve+yh*we+Zc*Rc,Fe=-Fe/(Dc*Dc+yh*yh+Zc*Zc),dk;if(0>Fe){var fd=g;fd.x=ve;fd.y=we;fd.z=Rc;dk=1}else if(1<Fe){var pd=g;pd.x=dd;pd.y=$c;pd.z=gd;dk=2}else{var vd,Fd,od;vd=ve+Dc*Fe;Fd=we+yh*Fe;od=Rc+Zc*Fe;var Xe=g;Xe.x=vd;Xe.y=Fd;Xe.z=od;dk=3}var Dd=g.x*g.x+g.y*g.y+g.z*g.z,qj=dk,Ee=Dd,ek=g;Ve=ek.x;We=ek.y;Kd=ek.z}if(0>ad){var zh,Ah,Bh,Ye,Ze,$e,Zd=Yb;zh=Zd.x;Ah=Zd.y;Bh=Zd.z;var rj=gc;Ye=rj.x;Ze=rj.y;$e=rj.z;var Mc,md,nd;Mc=Ye-zh;md=Ze-Ah;nd=$e-Bh;var Ef=Mc*zh+md*Ah+nd*Bh,Ef=-Ef/(Mc*Mc+md*md+nd*nd),Ff;if(0>Ef){var Gf=g;Gf.x=zh;Gf.y=Ah;Gf.z=Bh;Ff=1}else if(1<Ef){var wd=g;wd.x=Ye;wd.y=Ze;wd.z=$e;Ff=2}else{var xd,Wf,Xf;xd=zh+Mc*Ef;Wf=Ah+md*Ef;Xf=Bh+nd*Ef;var af=g;af.x=xd;af.y=Wf;af.z=Xf;Ff=3}var Yf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||Yf<Ee){var qj=Ff<<1,Ee=Yf,Hf=g;Ve=Hf.x;We=Hf.y;Kd=Hf.z}}if(0>Sc){var xe,bf,Zf,$f,ag,bg,Ge=Ob;xe=Ge.x;bf=Ge.y;Zf=Ge.z;var He=gc;$f=He.x;ag=He.y;bg=He.z;var cf,cg,qf;cf=$f-xe;cg=ag-bf;qf=bg-Zf;var Ie=cf*xe+cg*bf+qf*Zf,Ie=-Ie/(cf*cf+cg*cg+qf*qf),rf;if(0>Ie){var dg=g;dg.x=xe;dg.y=bf;dg.z=Zf;rf=1}else if(1<Ie){var Qd=g;Qd.x=$f;Qd.y=ag;Qd.z=bg;rf=2}else{var qe,re,se;qe=xe+cf*Ie;re=bf+cg*Ie;se=Zf+qf*Ie;var df=g;df.x=qe;df.y=re;df.z=se;rf=3}var sf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||sf<Ee){var qj=rf&1|(rf&2)<<1,Ee=sf,If=g;Ve=If.x;We=If.y;Kd=If.z}}var Wd;if(0<Ee){var Jf=g;Jf.x=Ve;Jf.y=We;Jf.z=Kd;Wd=qj}else{var ge=Vc*Vc+Wc*Wc+Yc*Yc;0<ge&&(ge=1/Math.sqrt(ge));Vc*=ge;Wc*=ge;Yc*=ge;var ye=Vc*Vc+Wc*Wc+Yc*Yc,ye=(Jc*Vc+Df*Wc+Pc*Yc)/ye;Ve=Vc*ye;We=Wc*ye;Kd=Yc*ye;var Kf=g;Kf.x=Ve;Kf.y=We;Kf.z=Kd;Wd=7}var te=g.x*g.x+g.y*g.y+g.z*g.z,Nc=Wd,rd=te,eg=g;Uc=eg.x;Vf=eg.y;Nb=eg.z}if(0>Gc*hc){var zd,Ad,Bd,cd,fg,gg,$d,he,ie,ae,tf,ef,ff,gf,Lf,Ed,Td,Ld,Md=Ob;zd=Md.x;Ad=Md.y;Bd=Md.z;var Nd=gc;cd=Nd.x;fg=Nd.y;gg=Nd.z;var Mf=Ib;$d=Mf.x;he=Mf.y;ie=Mf.z;ae=cd-zd;tf=fg-Ad;ef=gg-Bd;ff=$d-cd;gf=he-fg;Lf=ie-gg;Ed=zd-$d;Td=Ad-he;Ld=Bd-ie;var Xd,ud,Cd;Xd=tf*Lf-ef*gf;ud=ef*ff-ae*Lf;Cd=ae*gf-tf*ff;var hg=zd*(tf*Cd-ef*ud)+Ad*(ef*Xd-ae*Cd)+Bd*(ae*ud-tf*Xd),ee=cd*(gf*Cd-Lf*ud)+fg*(Lf*Xd-ff*Cd)+gg*(ff*ud-gf*Xd),ig=$d*(Td*Cd-Ld*ud)+he*(Ld*Xd-Ed*Cd)+ie*(Ed*ud-Td*Xd),Yd=-1,be,ze,hf,jg=0;hf=ze=be=0;if(0>hg){var jf,kf,lf,Ae,uf,kg,vf=Ob;jf=vf.x;kf=vf.y;lf=vf.z;var xg=gc;Ae=xg.x;uf=xg.y;kg=xg.z;var lg,mf,wf;lg=Ae-jf;mf=uf-kf;wf=kg-lf;var Je=lg*jf+mf*kf+wf*lf,Je=-Je/(lg*lg+mf*mf+wf*wf),yg;if(0>Je){var zg=g;zg.x=jf;zg.y=kf;zg.z=lf;yg=1}else if(1<Je){var Ce=g;Ce.x=Ae;Ce.y=uf;Ce.z=kg;yg=2}else{var mg,xf,yf;mg=jf+lg*Je;xf=kf+mf*Je;yf=lf+wf*Je;var Be=g;Be.x=mg;Be.y=xf;Be.z=yf;yg=3}var Ag=g.x*g.x+g.y*g.y+g.z*g.z,jg=yg,Yd=Ag,Sd=g;be=Sd.x;ze=Sd.y;hf=Sd.z}if(0>ee){var ng,og,pg,Nf,Ke,nf,zf=gc;ng=zf.x;og=zf.y;pg=zf.z;var de=Ib;Nf=de.x;Ke=de.y;nf=de.z;var Gd,Rd,Hd;Gd=Nf-ng;Rd=Ke-og;Hd=nf-pg;var Sg=Gd*ng+Rd*og+Hd*pg,Sg=-Sg/(Gd*Gd+Rd*Rd+Hd*Hd),pe;if(0>Sg){var Qe=g;Qe.x=ng;Qe.y=og;Qe.z=pg;pe=1}else if(1<Sg){var Te=g;Te.x=Nf;Te.y=Ke;Te.z=nf;pe=2}else{var Ne,Oe,Pe;Ne=ng+Gd*Sg;Oe=og+Rd*Sg;Pe=pg+Hd*Sg;var Dh=g;Dh.x=Ne;Dh.y=Oe;Dh.z=Pe;pe=3}var Re=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||Re<Yd){var jg=pe<<1,Yd=Re,pf=g;be=pf.x;ze=pf.y;hf=pf.z}}if(0>ig){var Eh,Fh,Gh,Hh,Ih,Jh,Bg=Ob;Eh=Bg.x;Fh=Bg.y;Gh=Bg.z;var Kh=Ib;Hh=Kh.x;Ih=Kh.y;Jh=Kh.z;var Lh,Mh,sj;Lh=Hh-Eh;Mh=Ih-Fh;sj=Jh-Gh;var Tg=Lh*Eh+Mh*Fh+sj*Gh,Tg=-Tg/(Lh*Lh+Mh*Mh+sj*sj),tj;if(0>Tg){var ue=g;ue.x=Eh;ue.y=Fh;ue.z=Gh;tj=1}else if(1<Tg){var Se=g;Se.x=Hh;Se.y=Ih;Se.z=Jh;tj=2}else{var kj,mj,oj;kj=Eh+Lh*Tg;mj=Fh+Mh*Tg;oj=Gh+sj*Tg;var Ug=g;Ug.x=kj;Ug.y=mj;Ug.z=oj;tj=3}var uj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||uj<Yd){var jg=tj&1|(tj&2)<<1,Yd=uj,Cf=g;be=Cf.x;ze=Cf.y;hf=Cf.z}}var De;if(0<Yd){var Og=g;Og.x=be;Og.y=ze;Og.z=hf;De=jg}else{var qg=Xd*Xd+ud*ud+Cd*Cd;0<qg&&(qg=1/Math.sqrt(qg));Xd*=qg;ud*=qg;Cd*=qg;var Cg=Xd*Xd+ud*ud+Cd*Cd,Cg=(zd*Xd+Ad*ud+Bd*Cd)/Cg;be=Xd*Cg;ze=ud*Cg;hf=Cd*Cg;var Nh=g;Nh.x=be;Nh.y=ze;Nh.z=hf;De=7}var Zj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||Zj<rd){var Nc=De&1|(De&6)<<1,rd=Zj,vj=g;Uc=vj.x;Vf=vj.y;Nb=vj.z}}if(0>pj*hc){var Vg,Wg,Xg,Oh,Yg,Zg,$g,ah,bh,Dg,Ph,Qh,Rh,Sh,Th,Sf,je,ke,le=Ob;Vg=le.x;Wg=le.y;Xg=le.z;var of=Yb;Oh=of.x;Yg=of.y;Zg=of.z;var Tf=Ib;$g=Tf.x;ah=Tf.y;bh=Tf.z;Dg=Oh-Vg;Ph=Yg-Wg;Qh=Zg-Xg;Rh=$g-Oh;Sh=ah-Yg;Th=bh-Zg;Sf=Vg-$g;je=Wg-ah;ke=Xg-bh;var Le,Od,Ud;Le=Ph*Th-Qh*Sh;Od=Qh*Rh-Dg*Th;Ud=Dg*Sh-Ph*Rh;var Uh=Vg*(Ph*Ud-Qh*Od)+Wg*(Qh*Le-Dg*Ud)+Xg*(Dg*Od-Ph*Le),Vh=Oh*(Sh*Ud-Th*Od)+Yg*(Th*Le-Rh*Ud)+Zg*(Rh*Od-Sh*Le),Bk=$g*(je*Ud-ke*Od)+ah*(ke*Le-Sf*Ud)+bh*(Sf*Od-je*Le),Af=-1,Of,Pf,Eg,wj=0;Eg=Pf=Of=0;if(0>Uh){var Wh,Xh,Yh,Zh,$h,ai,Fg=Ob;Wh=Fg.x;Xh=Fg.y;Yh=Fg.z;var xj=Yb;Zh=xj.x;$h=xj.y;ai=xj.z;var bi,ci,yj;bi=Zh-Wh;ci=$h-Xh;yj=ai-Yh;var ch=bi*Wh+ci*Xh+yj*Yh,ch=-ch/(bi*bi+ci*ci+yj*yj),fk;if(0>ch){var gk=g;gk.x=Wh;gk.y=Xh;gk.z=Yh;fk=1}else if(1<ch){var sg=g;sg.x=Zh;sg.y=$h;sg.z=ai;fk=2}else{var ak,zj,Aj;ak=Wh+bi*ch;zj=Xh+ci*ch;Aj=Yh+yj*ch;var di=g;di.x=ak;di.y=zj;di.z=Aj;fk=3}var Ck=g.x*g.x+g.y*g.y+g.z*g.z,wj=fk,Af=Ck,hk=g;Of=hk.x;Pf=hk.y;Eg=hk.z}if(0>Vh){var ei,fi,gi,hi,ii,ji,Gg=Yb;ei=Gg.x;fi=Gg.y;gi=Gg.z;var Bj=Ib;hi=Bj.x;ii=Bj.y;ji=Bj.z;var ki,li,Cj;ki=hi-ei;li=ii-fi;Cj=ji-gi;var dh=ki*ei+li*fi+Cj*gi,dh=-dh/(ki*ki+li*li+Cj*Cj),ik;if(0>dh){var jk=g;jk.x=ei;jk.y=fi;jk.z=gi;ik=1}else if(1<dh){var gj=g;gj.x=hi;gj.y=ii;gj.z=ji;ik=2}else{var Hk,Dj,Ej;Hk=ei+ki*dh;Dj=fi+li*dh;Ej=gi+Cj*dh;var mi=g;mi.x=Hk;mi.y=Dj;mi.z=Ej;ik=3}var Ik=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Ik<Af){var wj=ik<<1,Af=Ik,kk=g;Of=kk.x;Pf=kk.y;Eg=kk.z}}if(0>Bk){var ni,oi,pi,qi,ri,si,Hg=Ob;ni=Hg.x;oi=Hg.y;pi=Hg.z;var ti=Ib;qi=ti.x;ri=ti.y;si=ti.z;var ui,vi,Fj;ui=qi-ni;vi=ri-oi;Fj=si-pi;var eh=ui*ni+vi*oi+Fj*pi,eh=-eh/(ui*ui+vi*vi+Fj*Fj),Gj;if(0>eh){var lk=g;lk.x=ni;lk.y=oi;lk.z=pi;Gj=1}else if(1<eh){var Jk=g;Jk.x=qi;Jk.y=ri;Jk.z=si;Gj=2}else{var Kk,mk,Lk;Kk=ni+ui*eh;mk=oi+vi*eh;Lk=pi+Fj*eh;var fh=g;fh.x=Kk;fh.y=mk;fh.z=Lk;Gj=3}var Hj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Hj<Af){var wj=Gj&1|(Gj&2)<<1,Af=Hj,nk=g;Of=nk.x;Pf=nk.y;Eg=nk.z}}var ok;if(0<Af){var pk=g;pk.x=Of;pk.y=Pf;pk.z=Eg;ok=wj}else{var rg=Le*Le+Od*Od+Ud*Ud;0<rg&&(rg=1/Math.sqrt(rg));Le*=rg;Od*=rg;Ud*=rg;var Ig=Le*Le+Od*Od+Ud*Ud,Ig=(Vg*Le+Wg*Od+Xg*Ud)/Ig;Of=Le*Ig;Pf=Od*Ig;Eg=Ud*Ig;var wi=g;wi.x=Of;wi.y=Pf;wi.z=Eg;ok=7}var qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||qk<rd){var Nc=ok&3|(ok&4)<<1,rd=qk,Ij=g;Uc=Ij.x;Vf=Ij.y;Nb=Ij.z}}if(0>ed*hc){var gh,hh,ih,xi,jh,kh,lh,mh,nh,Jg,yi,zi,Ai,Bi,Ci,rk,me,ne,oe=Yb;gh=oe.x;hh=oe.y;ih=oe.z;var hj=gc;xi=hj.x;jh=hj.y;kh=hj.z;var ij=Ib;lh=ij.x;mh=ij.y;nh=ij.z;Jg=xi-gh;yi=jh-hh;zi=kh-ih;Ai=lh-xi;Bi=mh-jh;Ci=nh-kh;rk=gh-lh;me=hh-mh;ne=ih-nh;var Me,Pd,Vd;Me=yi*Ci-zi*Bi;Pd=zi*Ai-Jg*Ci;Vd=Jg*Bi-yi*Ai;var Di=gh*(yi*Vd-zi*Pd)+hh*(zi*Me-Jg*Vd)+ih*(Jg*Pd-yi*Me),Ei=xi*(Bi*Vd-Ci*Pd)+jh*(Ci*Me-Ai*Vd)+kh*(Ai*Pd-Bi*Me),Mk=lh*(me*Vd-ne*Pd)+mh*(ne*Me-rk*Vd)+nh*(rk*Pd-me*Me),Bf=-1,Qf,Rf,Kg,Jj=0;Kg=Rf=Qf=0;if(0>Di){var Fi,Gi,Hi,Ii,Ji,Ki,Lg=Yb;Fi=Lg.x;Gi=Lg.y;Hi=Lg.z;var Kj=gc;Ii=Kj.x;Ji=Kj.y;Ki=Kj.z;var Li,Mi,Lj;Li=Ii-Fi;Mi=Ji-Gi;Lj=Ki-Hi;var oh=Li*Fi+Mi*Gi+Lj*Hi,oh=-oh/(Li*Li+Mi*Mi+Lj*Lj),sk;if(0>oh){var tk=g;tk.x=Fi;tk.y=Gi;tk.z=Hi;sk=1}else if(1<oh){var jj=g;jj.x=Ii;jj.y=Ji;jj.z=Ki;sk=2}else{var Nk,Mj,Nj;Nk=Fi+Li*oh;Mj=Gi+Mi*oh;Nj=Hi+Lj*oh;var Ni=g;Ni.x=Nk;Ni.y=Mj;Ni.z=Nj;sk=3}var Dk=g.x*g.x+g.y*g.y+g.z*g.z,Jj=sk,Bf=Dk,uk=g;Qf=uk.x;Rf=uk.y;Kg=uk.z}if(0>Ei){var Oi,Pi,Qi,Ri,Si,Ti,Mg=gc;Oi=Mg.x;Pi=Mg.y;Qi=Mg.z;var Oj=Ib;Ri=Oj.x;Si=Oj.y;Ti=Oj.z;var Ui,Vi,Pj;Ui=Ri-Oi;Vi=Si-Pi;Pj=Ti-Qi;var ph=Ui*Oi+Vi*Pi+Pj*Qi,ph=-ph/(Ui*Ui+Vi*Vi+Pj*Pj),vk;if(0>ph){var wk=g;wk.x=Oi;wk.y=Pi;wk.z=Qi;vk=1}else if(1<ph){var Ok=g;Ok.x=Ri;Ok.y=Si;Ok.z=Ti;vk=2}else{var Pk,Qj,Rj;Pk=Oi+Ui*ph;Qj=Pi+Vi*ph;Rj=Qi+Pj*ph;var Wi=g;Wi.x=Pk;Wi.y=Qj;Wi.z=Rj;vk=3}var Qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Qk<Bf){var Jj=vk<<1,Bf=Qk,xk=g;Qf=xk.x;Rf=xk.y;Kg=xk.z}}if(0>Mk){var Xi,Yi,Zi,$i,aj,bj,Ng=Yb;Xi=Ng.x;Yi=Ng.y;Zi=Ng.z;var cj=Ib;$i=cj.x;aj=cj.y;bj=cj.z;var dj,ej,Sj;dj=$i-Xi;ej=aj-Yi;Sj=bj-Zi;var qh=dj*Xi+ej*Yi+Sj*Zi,qh=-qh/(dj*dj+ej*ej+Sj*Sj),Tj;if(0>qh){var yk=g;yk.x=Xi;yk.y=Yi;yk.z=Zi;Tj=1}else if(1<qh){var Rk=g;Rk.x=$i;Rk.y=aj;Rk.z=bj;Tj=2}else{var Sk,Tk,Uk;Sk=Xi+dj*qh;Tk=Yi+ej*qh;Uk=Zi+Sj*qh;var rh=g;rh.x=Sk;rh.y=Tk;rh.z=Uk;Tj=3}var Uj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Uj<Bf){var Jj=Tj&1|(Tj&2)<<1,Bf=Uj,zk=g;Qf=zk.x;Rf=zk.y;Kg=zk.z}}var Vk;if(0<Bf){var Ak=g;Ak.x=Qf;Ak.y=Rf;Ak.z=Kg;Vk=Jj}else{var sh=Me*Me+Pd*Pd+Vd*Vd;0<sh&&(sh=1/Math.sqrt(sh));Me*=sh;Pd*=sh;Vd*=sh;var Vj=Me*Me+Pd*Pd+Vd*Vd,Vj=(gh*Me+hh*Pd+ih*Vd)/Vj;Qf=Me*Vj;Rf=Pd*Vj;Kg=Vd*Vj;var th=g;th.x=Qf;th.y=Rf;th.z=Kg;Vk=7}var bk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||bk<rd){var Nc=Vk<<1,rd=bk,lj=g;Uc=lj.x;Vf=lj.y;Nb=lj.z}}if(0<rd){var Wj=g;Wj.x=Uc;Wj.y=Vf;Wj.z=Nb;zb=Nc}else g.O(),zb=15}this.zm(zb);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!D||4==this.ya){h.fraction=D;break}this.im();h.fraction=D;var Xj=h.normal;Xj.x=k.x;Xj.y=k.y;Xj.z=k.z;var ce=Xj,uh=Math.sqrt(ce.x*ce.x+ce.y*ce.y+ce.z*ce.z);0<uh&&(uh=1/uh);var Ek=ce.y*uh,Fk=ce.z*uh;ce.x=ce.x*uh;ce.y=Ek;ce.z=Fk;var Yj=h.position,nj=this.closestPoint1;Yj.x=nj.x;Yj.y=nj.y;Yj.z=nj.z;var Wk=Yj,kl=Wk.y+c.y*D,ll=Wk.z+c.z*D;Wk.x+=c.x*D;Wk.y=kl;Wk.z=ll;return!0}k.x=g.x;k.y=g.y;k.z=g.z;var Xk=k,ml=-Xk.y,nl=-Xk.z;Xk.x=-Xk.x;Xk.y=ml;Xk.z=nl;if(null!=this.hj)this.pf(!0);else{var zl=this.gb[this.ya];zl.x=this.pc.v;zl.y=this.pc.A;zl.z=this.pc.B}this.qf(!0);var jl=this.Oa[this.ya],Al=this.gb[this.ya];jl.x=Al.x;jl.y=Al.y;jl.z=Al.z;var Yk=jl,Bl=this.ob[this.ya],ol=Yk.y-Bl.y,pl=Yk.z-Bl.z;Yk.x=Yk.x-Bl.x;Yk.y=ol;Yk.z=pl;var Zk=l[this.ya],Sl=Zk.y-t.y,Tl=Zk.z-t.z;Zk.x=Zk.x-t.x;Zk.y=Sl;Zk.z=Tl;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var Cl=l[this.ya],fj=k,Il=Cl.x*fj.x+Cl.y*fj.y+Cl.z*fj.z;if(0>Il){if(0<=z.x*fj.x+z.y*fj.y+z.z*fj.z)break;var gl=Il/(z.x*fj.x+z.y*fj.y+z.z*fj.z),D=D+gl;if(1<=D)break;var Ul=t.y+z.y*gl,Vl=t.z+z.z*gl;t.x=t.x+z.x*gl;t.y=Ul;t.z=Vl;for(var Jl=0,Wl=this.ya+1;Jl<Wl;){var Xl=Jl++,$k=l[Xl],Dl=-gl,Yl=$k.y+z.y*Dl,Zl=$k.z+z.z*Dl;$k.x=$k.x+z.x*Dl;$k.y=Yl;$k.z=Zl}}for(var Kl=!1,Ll=0,$l=this.ya;Ll<$l;){var El=Ll++,Ml=l[El].x-l[this.ya].x,Nl=l[El].y-l[this.ya].y,Ol=l[El].z-l[this.ya].z;if(1E-8>Ml*Ml+Nl*Nl+Ol*Ol){Kl=!0;break}}Kl||this.ya++;++u}return!1},im:function(){switch(this.ya){case 1:var a=this.closestPoint1,b=this.gb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,d=this.ob[0];e.x=d.x;e.y=d.y;e.z=d.z;break;case 2:var c,f,h,l=this.closest;c=l.x;f=l.y;h=l.z;var g,k,m,n,q,p,r,v,aa,w,A,u,D,t,z,E,x,zb,N=this.Oa[0];g=N.x;k=N.y;m=N.z;var G=this.gb[0];n=G.x;q=G.y;p=G.z;var F=this.ob[0];r=F.x;v=F.y;aa=F.z;var C=this.Oa[1];w=C.x;A=C.y;u=C.z;var O=this.gb[1];D=O.x;t=O.y;z=O.z;var ha=this.ob[1];E=ha.x;x=ha.y;zb=ha.z;var L,Vb,M;L=w-g;Vb=A-k;M=u-m;var ka=L*L+Vb*Vb+M*M;ka&&(ka=1/ka);var bb=((c-g)*L+(f-k)*Vb+(h-m)*M)*ka,U,R,lc,Na,Ra,yc,Pa,Ba,Hb;U=D-n;R=t-q;lc=z-p;Na=n+U*bb;Ra=q+R*bb;yc=p+lc*bb;U=E-r;R=x-v;lc=zb-aa;Pa=r+U*bb;Ba=v+R*bb;Hb=aa+lc*bb;var J=this.closestPoint1;J.x=Na;J.y=Ra;J.z=yc;var Qa=this.closestPoint2;Qa.x=Pa;Qa.y=Ba;Qa.z=Hb;break;case 3:var ba,Q,P,xa=this.closest;ba=xa.x;Q=xa.y;P=xa.z;var ta,W,pa,y,Ia,ca,Ea,ya,Fa,Sa,la,Z,Ga,ra,va,I,La,Wa,S,Xa,T,K,ia,gb,da,Hc,sa,fb=this.Oa[0];ta=fb.x;W=fb.y;pa=fb.z;var kb=this.gb[0];y=kb.x;Ia=kb.y;ca=kb.z;var Ya=this.ob[0];Ea=Ya.x;ya=Ya.y;Fa=Ya.z;var ma=this.Oa[1];Sa=ma.x;la=ma.y;Z=ma.z;var oa=this.gb[1];Ga=oa.x;ra=oa.y;va=oa.z;var Ja=this.ob[1];I=Ja.x;La=Ja.y;Wa=Ja.z;var Ha=this.Oa[2];S=Ha.x;Xa=Ha.y;T=Ha.z;var ob=this.gb[2];K=ob.x;ia=ob.y;gb=ob.z;var fa=this.ob[2];da=fa.x;Hc=fa.y;sa=fa.z;var ea,ja,cb,Aa,sb,Ua,qb,rb,ub;ea=Sa-ta;ja=la-W;cb=Z-pa;Aa=S-ta;sb=Xa-W;Ua=T-pa;qb=ba-ta;rb=Q-W;ub=P-pa;var Va=ea*ea+ja*ja+cb*cb,xb=ea*Aa+ja*sb+cb*Ua,rc=Aa*Aa+sb*sb+Ua*Ua,Za=ea*qb+ja*rb+cb*ub,ua=Aa*qb+sb*rb+Ua*ub,Qb=Va*rc-xb*xb;Qb&&(Qb=1/Qb);var H=(Za*rc-ua*xb)*Qb,pb=(-Za*xb+ua*Va)*Qb,db,oc,$a,hb,B,Db,fe,Tc,Fb;db=Ga-y;oc=ra-Ia;$a=va-ca;hb=y+db*H;B=Ia+oc*H;Db=ca+$a*H;db=K-y;oc=ia-Ia;$a=gb-ca;hb+=db*pb;B+=oc*pb;Db+=$a*pb;db=I-Ea;oc=La-ya;$a=Wa-Fa;fe=Ea+db*H;Tc=ya+oc*H;Fb=Fa+$a*H;db=da-Ea;oc=Hc-ya;$a=sa-Fa;fe+=db*pb;Tc+=oc*pb;Fb+=$a*pb;var Oa=this.closestPoint1;Oa.x=hb;Oa.y=B;Oa.z=Db;var nb=this.closestPoint2;nb.x=fe;nb.y=Tc;nb.z=Fb;break;default:throw Error("!?");}},Cn:function(a){var b=this.dir;a=a.ql;b.x=a.x;b.y=a.y;b.z=a.z},In:function(a){a=a.ql;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;var b=-a.y,e=-a.z;a.x=-a.x;a.y=b;a.z=e},zm:function(a){this.ya=a;this.ya=(this.ya&5)+(this.ya>>1&5);this.ya=(this.ya&3)+(this.ya>>2&3);switch(a){case 2:a=this.Oa[0];var b=this.Oa[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[0];b=this.gb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[0];b=this.ob[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.Oa[0];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[0];b=this.gb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[0];b=this.ob[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.Oa[1];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[1];b=this.gb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[1];b=this.ob[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.Oa[0];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[0];b=this.gb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[0];b=this.ob[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.Oa[0];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[0];b=this.gb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[0];b=this.ob[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.Oa[1];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[1];b=this.gb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[1];b=this.ob[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.Oa[0];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[0];b=this.gb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[0];b=this.ob[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.Oa[2];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[2];b=this.gb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[2];b=this.ob[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.Oa[0];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[0];b=this.gb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[0];b=this.ob[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.Oa[1];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[1];b=this.gb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[1];b=this.ob[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.Oa[1];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.gb[1];b=this.gb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.ob[1];b=this.ob[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.Oa[0],b=this.Oa[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.gb[0],b=this.gb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.ob[0],b=this.ob[3],a.x=b.x,a.y=b.y,a.z=b.z}},pf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;e=this.pc.o*c+this.pc.i*f+this.pc.l*h;l=this.pc.f*c+this.pc.m*f+this.pc.g*h;b=this.pc.h*c+this.pc.j*f+this.pc.s*h;d=this.dir;d.x=e;d.y=l;d.z=b;this.hj.Ld(this.dir,this.gb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.gb[this.ya],b=this.dir,e=this.hj.fc,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.gb[this.ya];b=a.x;e=a.y;d=a.z;l=this.pc.o*b+this.pc.f*e+this.pc.h*d;a=this.pc.i*b+this.pc.m*e+this.pc.j*d;e=this.pc.l*b+this.pc.g*e+this.pc.s*d;b=l+this.pc.v;a+=this.pc.A;e+=this.pc.B;l=this.gb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},qf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;b=this.Gc.o*c+this.Gc.i*f+this.Gc.l*h;e=this.Gc.f*c+this.Gc.m*f+this.Gc.g*h;l=this.Gc.h*c+this.Gc.j*f+this.Gc.s*h;d=this.dir;d.x=-b;d.y=-e;d.z=-l;this.Sk.Ld(this.dir,this.ob[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.ob[this.ya],b=this.dir,e=this.Sk.fc,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.ob[this.ya];b=a.x;e=a.y;d=a.z;l=this.Gc.o*b+this.Gc.f*e+this.Gc.h*d;a=this.Gc.i*b+this.Gc.m*e+this.Gc.j*d;e=this.Gc.l*b+this.Gc.g*e+this.Gc.s*d;b=l+this.Gc.v;a+=this.Gc.A;e+=this.Gc.B;l=this.ob[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},En:function(){for(var a=0;3>a;){var b=a++,e=this.dir,b=this.fj[b];e.x=b.x;e.y=b.y;e.z=b.z;this.pf(!1);this.qf(!1);e=this.Oa[this.ya];b=this.gb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;var b=this.ob[this.ya],d=e.y-b.y,c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.ya++;this.ml();if(4==this.ya)break;this.ya--;e=this.dir;b=-e.y;d=-e.z;e.x=-e.x;e.y=b;e.z=d;this.pf(!1);this.qf(!1);e=this.Oa[this.ya];b=this.gb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;b=this.ob[this.ya];d=e.y-b.y;c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.ya++;this.ml();if(4==this.ya)break;this.ya--}},ml:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var d,c,f,h,l,g;f=this.Oa[0];d=f.x;c=f.y;f=f.z;g=this.Oa[1];h=g.x;l=g.y;g=g.z;d-=h;c-=l;f-=g;for(l=0;3>l;){g=l++;var k,m;g=this.fj[g];h=g.x;k=g.y;m=g.z;g=c*m-f*k;m=f*h-d*m;h=d*k-c*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.pf(!1);this.qf(!1);g=this.Oa[this.ya];h=this.gb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.ob[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.tl();if(4==this.ya)break;this.ya--;g=this.dir;h=-g.y;k=-g.z;g.x=-g.x;g.y=h;g.z=k;this.pf(!1);this.qf(!1);g=this.Oa[this.ya];h=this.gb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.ob[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.tl();if(4==this.ya)break;this.ya--}d=this.dir;d.x=a;d.y=b;d.z=e},tl:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var d,c,f,h,l,g,k,m,n;f=this.Oa[0];d=f.x;c=f.y;f=f.z;m=this.Oa[1];h=m.x;l=m.y;g=m.z;n=this.Oa[2];k=n.x;m=n.y;n=n.z;h-=d;l-=c;g-=f;d=k-d;c=m-c;m=n-f;f=l*m-g*c;m=g*d-h*m;c=h*c-l*d;h=this.dir;h.x=f;h.y=m;h.z=c;this.pf(!1);this.qf(!1);c=this.Oa[this.ya];f=this.gb[this.ya];c.x=f.x;c.y=f.y;c.z=f.z;f=this.ob[this.ya];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.ya++;if(this.jm())break;this.ya--;c=this.dir;f=-c.y;h=-c.z;c.x=-c.x;c.y=f;c.z=h;this.pf(!1);this.qf(!1);c=this.Oa[this.ya];f=this.gb[this.ya];c.x=f.x;c.y=f.y;c.z=f.z;f=this.ob[this.ya];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.ya++;if(this.jm())break;this.ya--;break}c=this.dir;c.x=a;c.y=b;c.z=e},jm:function(){var a=this.Oa[2].x-this.Oa[0].x,b=this.Oa[2].y-this.Oa[0].y,e=this.Oa[2].z-this.Oa[0].z,d=this.Oa[3].x-this.Oa[0].x,c=this.Oa[3].y-this.Oa[0].y,f=this.Oa[3].z-this.Oa[0].z,a=(this.Oa[1].x-this.Oa[0].x)*(b*f-e*c)-(this.Oa[1].y-this.Oa[0].y)*(a*f-e*d)+(this.Oa[1].z-this.Oa[0].z)*(a*c-b*d);return 1E-12<a?!0:-1E-12>a},Zm:function(a,b,e,d,c,f,h){for(var l=this.Fg;0<l.ah;){var g=l.Vc;l.ah--;var k=g.ia,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ia=k);g==l.Vc&&(l.Vc=l.Vc.M);g==l.Fc&&(l.Fc=l.Fc.ia);g.M=null;g.ia=null;g.$j();g.M=l.ve;l.ve=g}if(null!=l.Vc)throw Error("assertion error: _triangleList == null is false");if(null!=l.Fc)throw Error("assertion error: _triangleListLast == null is false");for(;0<l.Ae;){var n=l.yb[--l.Ae];n.$j();n.M=l.Re;l.Re=n}var q=this.Fg,p=this.Fg,r=p.Re;null!=r?(p.Re=r.M,r.M=null):r=new Dc;var v=r.za(c[0],f[0],h[0]),aa=this.Fg,w=aa.Re;null!=w?(aa.Re=w.M,w.M=null):w=new Dc;var A=w.za(c[1],f[1],h[1]),u=this.Fg,D=u.Re;null!=D?(u.Re=D.M,D.M=null):D=new Dc;var t=D.za(c[2],f[2],h[2]),z=this.Fg,E=z.Re;null!=E?(z.Re=E.M,E.M=null):E=new Dc;if(!q.Vg(v,A,t,E.za(c[3],f[3],h[3])))return Pb.EPA_FAILED_TO_INIT;this.ya=0;for(var x=this.Oa[0],zb=this.gb[0],N=this.ob[0],G=0;40>G;){for(var F=this.Fg.Vc,C=1/0,O=null;null!=F;){var ha=F.M;F.Ej<C&&(C=F.Ej,O=F);F=ha}var L=O,M=this.dir,na=L.Lj;M.x=na.x;M.y=na.y;M.z=na.z;var ka=M,bb=Math.sqrt(ka.x*ka.x+ka.y*ka.y+ka.z*ka.z);0<bb&&(bb=1/bb);var U=ka.y*bb,R=ka.z*bb;ka.x=ka.x*bb;ka.y=U;ka.z=R;this.pf(!1);this.qf(!1);var lc=this.Oa[this.ya],Na=this.gb[this.ya];lc.x=Na.x;lc.y=Na.y;lc.z=Na.z;var Ra=lc,yc=this.ob[this.ya],Pa=Ra.y-yc.y,Ba=Ra.z-yc.z;Ra.x=Ra.x-yc.x;Ra.y=Pa;Ra.z=Ba;var Hb=L.yb[0],J=L.yb[1],Qa=L.yb[2],ba=Hb.ud,Q=this.dir,P=this.dir;if(1E-6>x.x*P.x+x.y*P.y+x.z*P.z-(ba.x*Q.x+ba.y*Q.y+ba.z*Q.z)||39==G){var xa=this.closest,ta=this.dir;xa.x=ta.x;xa.y=ta.y;xa.z=ta.z;var W=xa,pa=this.dir,y=Hb.ud,Ia=this.dir,ca=(pa.x*y.x+pa.y*y.y+pa.z*y.z)/(Ia.x*Ia.x+Ia.y*Ia.y+Ia.z*Ia.z),Ea=W.y*ca,ya=W.z*ca;W.x=W.x*ca;W.y=Ea;W.z=ya;var Fa,Sa,la,Z=this.closest;Fa=Z.x;Sa=Z.y;la=Z.z;var Ga,ra,va,I,La,Wa,S,Xa,T,K,ia,gb,da,Hc,sa,fb,kb,Ya,ma,oa,Ja,Ha,ob,fa,ea,ja,cb,Aa=Hb.ud;Ga=Aa.x;ra=Aa.y;va=Aa.z;var sb=Hb.gb;I=sb.x;La=sb.y;Wa=sb.z;var Ua=Hb.ob;S=Ua.x;Xa=Ua.y;T=Ua.z;var qb=J.ud;K=qb.x;ia=qb.y;gb=qb.z;var rb=J.gb;da=rb.x;Hc=rb.y;sa=rb.z;var ub=J.ob;fb=ub.x;kb=ub.y;Ya=ub.z;var Va=Qa.ud;ma=Va.x;oa=Va.y;Ja=Va.z;var xb=Qa.gb;Ha=xb.x;ob=xb.y;fa=xb.z;var rc=Qa.ob;ea=rc.x;ja=rc.y;cb=rc.z;var Za,ua,Qb,H,pb,db,oc,$a,hb;Za=K-Ga;ua=ia-ra;Qb=gb-va;H=ma-Ga;pb=oa-ra;db=Ja-va;oc=Fa-Ga;$a=Sa-ra;hb=la-va;var B=Za*Za+ua*ua+Qb*Qb,Db=Za*H+ua*pb+Qb*db,fe=H*H+pb*pb+db*db,Tc=Za*oc+ua*$a+Qb*hb,Fb=H*oc+pb*$a+db*hb,Oa=B*fe-Db*Db;Oa&&(Oa=1/Oa);var nb=(Tc*fe-Fb*Db)*Oa,vb=(-Tc*Db+Fb*B)*Oa,yb,eb,Y,Ma,lb,Ta,ib,Ka,Jb;yb=da-I;eb=Hc-La;Y=sa-Wa;Ma=I+yb*nb;lb=La+eb*nb;Ta=Wa+Y*nb;yb=Ha-I;eb=ob-La;Y=fa-Wa;Ma+=yb*vb;lb+=eb*vb;Ta+=Y*vb;yb=fb-S;eb=kb-Xa;Y=Ya-T;ib=S+yb*nb;Ka=Xa+eb*nb;Jb=T+Y*nb;yb=ea-S;eb=ja-Xa;Y=cb-T;ib+=yb*vb;Ka+=eb*vb;Jb+=Y*vb;var ga=this.closestPoint1;ga.x=Ma;ga.y=lb;ga.z=Ta;var X=this.closestPoint2;X.x=ib;X.y=Ka;X.z=Jb;var Cb=this.closest;this.depth=Math.sqrt(Cb.x*Cb.x+Cb.y*Cb.y+Cb.z*Cb.z);return Pb.SUCCEEDED}var hd=this.Fg,Cc=hd.Re;null!=Cc?(hd.Re=Cc.M,Cc.M=null):Cc=new Dc;var qa=Cc.za(x,zb,N);if(!this.Fg.Im(qa,L))return Pb.EPA_FAILED_TO_ADD_VERTEX;++G}return Pb.EPA_DID_NOT_CONVERGE},Pa:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!0)},ab:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!1)},rf:function(a,b,e,d,c,f,h){return this.Vl(a,b,e,d,c,f,h)},Sd:function(a,b,e,d,c){var f=this.Mn;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.Nn,l=this.On;h.x=d.x;h.y=d.y;h.z=d.z;d=h.y-e.y;var g=h.z-e.z;h.x=h.x-e.x;h.y=d;h.z=g;l.O();return this.Vl(null,a,f,b,h,l,c)},qa:Zb};Pb.R=!0;dd.R=!0;dd.bd=function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-d;g=h-c;k=b-a;var m;m=-(l*d+g*c+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=d,e.y=c,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=d+l*m;e.y=c+g*m;e.z=a+k*m;return 3};dd.cd=function(a,b,e,d){var c,f,h,l,g,k,m,n,q,p,r,v,aa,w,A,u,D,t;c=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;n=e.y;q=e.z;p=l-c;r=g-f;v=k-h;aa=m-l;w=n-g;A=q-k;u=c-m;D=f-n;t=h-q;var z,E,x;z=r*A-v*w;E=v*aa-p*A;x=p*w-r*aa;var zb=-1,N,G,F,C=0;F=G=N=0;if(0>c*(r*x-v*E)+f*(v*z-p*x)+h*(p*E-r*z)){var L;p=a.x;zb=a.y;N=a.z;r=b.x;v=b.y;L=b.z;var ha;ha=r-p;F=v-zb;G=L-N;C=-(ha*p+F*zb+G*N)/(ha*ha+F*F+G*G);0>C?(d.x=p,d.y=zb,d.z=N,G=1):1<C?(d.x=r,d.y=v,d.z=L,G=2):(p+=ha*C,zb+=F*C,N+=G*C,d.x=p,d.y=zb,d.z=N,G=3);N=d.x*d.x+d.y*d.y+d.z*d.z;C=G;zb=N;N=d.x;G=d.y;F=d.z}0>l*(w*x-A*E)+g*(A*z-aa*x)+k*(aa*E-w*z)&&(aa=b.x,l=b.y,b=b.z,A=e.x,p=e.y,r=e.z,v=A-aa,w=p-l,g=r-b,k=-(v*aa+w*l+g*b)/(v*v+w*w+g*g),0>k?(d.x=aa,d.y=l,d.z=b,b=1):1<k?(d.x=A,d.y=p,d.z=r,b=2):(aa+=v*k,l+=w*k,b+=g*k,d.x=aa,d.y=l,d.z=b,b=3),l=d.x*d.x+d.y*d.y+d.z*d.z,0>zb||l<zb)&&(C=b<<1,zb=l,N=d.x,G=d.y,F=d.z);0>m*(D*x-t*E)+n*(t*z-u*x)+q*(u*E-D*z)&&(n=a.x,m=a.y,a=a.z,u=e.x,D=e.y,b=e.z,l=u-n,t=D-m,e=b-a,q=-(l*n+t*m+e*a)/(l*l+t*t+e*e),0>q?(d.x=n,d.y=m,d.z=a,e=1):1<q?(d.x=u,d.y=D,d.z=b,e=2):(n+=l*q,m+=t*q,e=a+e*q,d.x=n,d.y=m,d.z=e,e=3),a=d.x*d.x+d.y*d.y+d.z*d.z,0>zb||a<zb)&&(C=e&1|(e&2)<<1,zb=a,N=d.x,G=d.y,F=d.z);if(0<zb)return d.x=N,d.y=G,d.z=F,C;e=z*z+E*E+x*x;0<e&&(e=1/Math.sqrt(e));z*=e;E*=e;x*=e;c=(c*z+f*E+h*x)/(z*z+E*E+x*x);N=z*c;G=E*c;F=x*c;d.x=N;d.y=G;d.z=F;return 7};dd.Pd=function(a,b,e,d,c){var f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,V,z,E,x,zb,N,G,F,C,L,ha;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;n=e.x;q=e.y;p=e.z;r=d.x;v=d.y;t=d.z;w=g-f;A=k-h;u=m-l;D=n-f;V=q-h;z=p-l;E=r-f;x=v-h;zb=t-l;N=n-g;G=q-k;F=p-m;C=r-g;L=v-k;ha=t-m;var O,M,na,ka,bb,U,R,lc,Na,Ra,yc,Pa;O=A*z-u*V;M=u*D-w*z;na=w*V-A*D;ka=V*zb-z*x;bb=z*E-D*zb;U=D*x-V*E;R=x*u-zb*A;lc=zb*w-E*u;Na=E*A-x*w;Ra=L*F-ha*G;yc=ha*N-C*F;Pa=C*G-L*N;var Ba=0<w*Ra+A*yc+u*Pa?1:-1,Hb=f*O+h*M+l*na,J=f*ka+h*bb+l*U,Qa=f*R+h*lc+l*Na,ba=g*Ra+k*yc+m*Pa,Q=-1,P,xa,ta,W=0;ta=xa=P=0;if(0>Hb*Ba){var pa,y,Ia,ca,Ea,ya,Fa,Sa,la,Z,Ga,ra,va,I,La,Wa,S,Xa;pa=a.x;y=a.y;Ia=a.z;ca=b.x;Ea=b.y;ya=b.z;Fa=e.x;Sa=e.y;la=e.z;Z=ca-pa;Ga=Ea-y;ra=ya-Ia;va=Fa-ca;I=Sa-Ea;La=la-ya;Wa=pa-Fa;S=y-Sa;Xa=Ia-la;var T,K,ia;T=Ga*La-ra*I;K=ra*va-Z*La;ia=Z*I-Ga*va;var gb=pa*(Ga*ia-ra*K)+y*(ra*T-Z*ia)+Ia*(Z*K-Ga*T),da=ca*(I*ia-La*K)+Ea*(La*T-va*ia)+ya*(va*K-I*T),Hc=Fa*(S*ia-Xa*K)+Sa*(Xa*T-Wa*ia)+la*(Wa*K-S*T),sa=-1,fb,kb,Ya,ma=0;Ya=kb=fb=0;if(0>gb){var oa,Ja,Ha,ob,fa,ea;oa=a.x;Ja=a.y;Ha=a.z;ob=b.x;fa=b.y;ea=b.z;var ja,cb,Aa;ja=ob-oa;cb=fa-Ja;Aa=ea-Ha;var sb=ja*oa+cb*Ja+Aa*Ha,sb=-sb/(ja*ja+cb*cb+Aa*Aa),Ua;if(0>sb)c.x=oa,c.y=Ja,c.z=Ha,Ua=1;else if(1<sb)c.x=ob,c.y=fa,c.z=ea,Ua=2;else{var qb,rb,ub;qb=oa+ja*sb;rb=Ja+cb*sb;ub=Ha+Aa*sb;c.x=qb;c.y=rb;c.z=ub;Ua=3}var Va=c.x*c.x+c.y*c.y+c.z*c.z,ma=Ua,sa=Va;fb=c.x;kb=c.y;Ya=c.z}if(0>da){var xb,rc,Za,ua,Qb,H;xb=b.x;rc=b.y;Za=b.z;ua=e.x;Qb=e.y;H=e.z;var pb,db,oc;pb=ua-xb;db=Qb-rc;oc=H-Za;var $a=pb*xb+db*rc+oc*Za,$a=-$a/(pb*pb+db*db+oc*oc),hb;if(0>$a)c.x=xb,c.y=rc,c.z=Za,hb=1;else if(1<$a)c.x=ua,c.y=Qb,c.z=H,hb=2;else{var B,Db,ga;B=xb+pb*$a;Db=rc+db*$a;ga=Za+oc*$a;c.x=B;c.y=Db;c.z=ga;hb=3}var Tc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||Tc<sa)ma=hb<<1,sa=Tc,fb=c.x,kb=c.y,Ya=c.z}if(0>Hc){var Fb,Oa,nb,vb,yb,eb;Fb=a.x;Oa=a.y;nb=a.z;vb=e.x;yb=e.y;eb=e.z;var Y,Ma,lb;Y=vb-Fb;Ma=yb-Oa;lb=eb-nb;var Ta=Y*Fb+Ma*Oa+lb*nb,Ta=-Ta/(Y*Y+Ma*Ma+lb*lb),ib;if(0>Ta)c.x=Fb,c.y=Oa,c.z=nb,ib=1;else if(1<Ta)c.x=vb,c.y=yb,c.z=eb,ib=2;else{var Ka,Jb,qa;Ka=Fb+Y*Ta;Jb=Oa+Ma*Ta;qa=nb+lb*Ta;c.x=Ka;c.y=Jb;c.z=qa;ib=3}var X=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||X<sa)ma=ib&1|(ib&2)<<1,sa=X,fb=c.x,kb=c.y,Ya=c.z}var Cb;if(0<sa)c.x=fb,c.y=kb,c.z=Ya,Cb=ma;else{var hd=T*T+K*K+ia*ia;0<hd&&(hd=1/Math.sqrt(hd));T*=hd;K*=hd;ia*=hd;var Cc=T*T+K*K+ia*ia,Cc=(pa*T+y*K+Ia*ia)/Cc;fb=T*Cc;kb=K*Cc;Ya=ia*Cc;c.x=fb;c.y=kb;c.z=Ya;Cb=7}var za=c.x*c.x+c.y*c.y+c.z*c.z,W=Cb,Q=za;P=c.x;xa=c.y;ta=c.z}if(0>J*Ba){var ec,qd,Ca,wa,xc,Da,jc,pc,kc,ac,Wb,Xb,Rb,fc,Sb,Ob,Yb,gc;ec=a.x;qd=a.y;Ca=a.z;wa=e.x;xc=e.y;Da=e.z;jc=d.x;pc=d.y;kc=d.z;ac=wa-ec;Wb=xc-qd;Xb=Da-Ca;Rb=jc-wa;fc=pc-xc;Sb=kc-Da;Ob=ec-jc;Yb=qd-pc;gc=Ca-kc;var Ib,$b,mb;Ib=Wb*Sb-Xb*fc;$b=Xb*Rb-ac*Sb;mb=ac*fc-Wb*Rb;var Gb=ec*(Wb*mb-Xb*$b)+qd*(Xb*Ib-ac*mb)+Ca*(ac*$b-Wb*Ib),tg=wa*(fc*mb-Sb*$b)+xc*(Sb*Ib-Rb*mb)+Da*(Rb*$b-fc*Ib),wb=jc*(Yb*mb-gc*$b)+pc*(gc*Ib-Ob*mb)+kc*(Ob*$b-Yb*Ib),qc=-1,mc,id,Ic,ab=0;Ic=id=mc=0;if(0>Gb){var sc,vc,tb,jb,Eb,yd;sc=a.x;vc=a.y;tb=a.z;jb=e.x;Eb=e.y;yd=e.z;var Fc,Tb,Ue;Fc=jb-sc;Tb=Eb-vc;Ue=yd-tb;var Mb=Fc*sc+Tb*vc+Ue*tb,Mb=-Mb/(Fc*Fc+Tb*Tb+Ue*Ue),Id;if(0>Mb)c.x=sc,c.y=vc,c.z=tb,Id=1;else if(1<Mb)c.x=jb,c.y=Eb,c.z=yd,Id=2;else{var Pg,Bb,ic;Pg=sc+Fc*Mb;Bb=vc+Tb*Mb;ic=tb+Ue*Mb;c.x=Pg;c.y=Bb;c.z=ic;Id=3}var Ab=c.x*c.x+c.y*c.y+c.z*c.z,ab=Id,qc=Ab;mc=c.x;id=c.y;Ic=c.z}if(0>tg){var zc,Ub,dc,nc,Kb,Qc;zc=e.x;Ub=e.y;dc=e.z;nc=d.x;Kb=d.y;Qc=d.z;var Lb,Zb,uc;Lb=nc-zc;Zb=Kb-Ub;uc=Qc-dc;var hc=Lb*zc+Zb*Ub+uc*dc,hc=-hc/(Lb*Lb+Zb*Zb+uc*uc),tc;if(0>hc)c.x=zc,c.y=Ub,c.z=dc,tc=1;else if(1<hc)c.x=nc,c.y=Kb,c.z=Qc,tc=2;else{var Pb,Kc,cc;Pb=zc+Lb*hc;Kc=Ub+Zb*hc;cc=dc+uc*hc;c.x=Pb;c.y=Kc;c.z=cc;tc=3}var Ec=c.x*c.x+c.y*c.y+c.z*c.z;if(0>qc||Ec<qc)ab=tc<<1,qc=Ec,mc=c.x,id=c.y,Ic=c.z}if(0>wb){var Nb,Ac,Gc,Nc,Jc,Pc;Nb=a.x;Ac=a.y;Gc=a.z;Nc=d.x;Jc=d.y;Pc=d.z;var Bc,bc,rd;Bc=Nc-Nb;bc=Jc-Ac;rd=Pc-Gc;var Uc=Bc*Nb+bc*Ac+rd*Gc,Uc=-Uc/(Bc*Bc+bc*bc+rd*rd),wc;if(0>Uc)c.x=Nb,c.y=Ac,c.z=Gc,wc=1;else if(1<Uc)c.x=Nc,c.y=Jc,c.z=Pc,wc=2;else{var Oc,ed,Rc;Oc=Nb+Bc*Uc;ed=Ac+bc*Uc;Rc=Gc+rd*Uc;c.x=Oc;c.y=ed;c.z=Rc;wc=3}var Df=c.x*c.x+c.y*c.y+c.z*c.z;if(0>qc||Df<qc)ab=wc&1|(wc&2)<<1,qc=Df,mc=c.x,id=c.y,Ic=c.z}var Xc;if(0<qc)c.x=mc,c.y=id,c.z=Ic,Xc=ab;else{var Dc=Ib*Ib+$b*$b+mb*mb;0<Dc&&(Dc=1/Math.sqrt(Dc));Ib*=Dc;$b*=Dc;mb*=Dc;var Zc=Ib*Ib+$b*$b+mb*mb,Zc=(ec*Ib+qd*$b+Ca*mb)/Zc;mc=Ib*Zc;id=$b*Zc;Ic=mb*Zc;c.x=mc;c.y=id;c.z=Ic;Xc=7}var ld=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||ld<Q)W=Xc&1|(Xc&6)<<1,Q=ld,P=c.x,xa=c.y,ta=c.z}if(0>Qa*Ba){var sd,dd,$c,gd,bd,Jd,Mc,md,nd,fd,Lc,jd,kd,pd,vd,Vc,Wc,Yc;sd=a.x;dd=a.y;$c=a.z;gd=b.x;bd=b.y;Jd=b.z;Mc=d.x;md=d.y;nd=d.z;fd=gd-sd;Lc=bd-dd;jd=Jd-$c;kd=Mc-gd;pd=md-bd;vd=nd-Jd;Vc=sd-Mc;Wc=dd-md;Yc=$c-nd;var td,ad,Sc;td=Lc*vd-jd*pd;ad=jd*kd-fd*vd;Sc=fd*pd-Lc*kd;var Ee=sd*(Lc*Sc-jd*ad)+dd*(jd*td-fd*Sc)+$c*(fd*ad-Lc*td),Ve=gd*(pd*Sc-vd*ad)+bd*(vd*td-kd*Sc)+Jd*(kd*ad-pd*td),We=Mc*(Wc*Sc-Yc*ad)+md*(Yc*td-Vc*Sc)+nd*(Vc*ad-Wc*td),Kd=-1,cd,ve,we,Fd=0;we=ve=cd=0;if(0>Ee){var wd,Gd,od,Qd,Rd,Wd;wd=a.x;Gd=a.y;od=a.z;Qd=b.x;Rd=b.y;Wd=b.z;var Ed,Nd,Fe;Ed=Qd-wd;Nd=Rd-Gd;Fe=Wd-od;var xd=Ed*wd+Nd*Gd+Fe*od,xd=-xd/(Ed*Ed+Nd*Nd+Fe*Fe),Hd;if(0>xd)c.x=wd,c.y=Gd,c.z=od,Hd=1;else if(1<xd)c.x=Qd,c.y=Rd,c.z=Wd,Hd=2;else{var qe,re,se;qe=wd+Ed*xd;re=Gd+Nd*xd;se=od+Fe*xd;c.x=qe;c.y=re;c.z=se;Hd=3}var Ce=c.x*c.x+c.y*c.y+c.z*c.z,Fd=Hd,Kd=Ce;cd=c.x;ve=c.y;we=c.z}if(0>Ve){var Xe,Dd,Sd,de,pe,te;Xe=b.x;Dd=b.y;Sd=b.z;de=d.x;pe=d.y;te=d.z;var Ye,Ze,$e;Ye=de-Xe;Ze=pe-Dd;$e=te-Sd;var Zd=Ye*Xe+Ze*Dd+$e*Sd,Zd=-Zd/(Ye*Ye+Ze*Ze+$e*$e),ee;if(0>Zd)c.x=Xe,c.y=Dd,c.z=Sd,ee=1;else if(1<Zd)c.x=de,c.y=pe,c.z=te,ee=2;else{var Qe,Te,pf;Qe=Xe+Ye*Zd;Te=Dd+Ze*Zd;pf=Sd+$e*Zd;c.x=Qe;c.y=Te;c.z=pf;ee=3}var Ef=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Kd||Ef<Kd)Fd=ee<<1,Kd=Ef,cd=c.x,ve=c.y,we=c.z}if(0>We){var Ff,Gf,ue,Se,Wf,Xf;Ff=a.x;Gf=a.y;ue=a.z;Se=d.x;Wf=d.y;Xf=d.z;var af,Yf,Hf;af=Se-Ff;Yf=Wf-Gf;Hf=Xf-ue;var xe=af*Ff+Yf*Gf+Hf*ue,xe=-xe/(af*af+Yf*Yf+Hf*Hf),bf;if(0>xe)c.x=Ff,c.y=Gf,c.z=ue,bf=1;else if(1<xe)c.x=Se,c.y=Wf,c.z=Xf,bf=2;else{var Zf,$f,ag;Zf=Ff+af*xe;$f=Gf+Yf*xe;ag=ue+Hf*xe;c.x=Zf;c.y=$f;c.z=ag;bf=3}var bg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Kd||bg<Kd)Fd=bf&1|(bf&2)<<1,Kd=bg,cd=c.x,ve=c.y,we=c.z}var Ge;if(0<Kd)c.x=cd,c.y=ve,c.z=we,Ge=Fd;else{var He=td*td+ad*ad+Sc*Sc;0<He&&(He=1/Math.sqrt(He));td*=He;ad*=He;Sc*=He;var cf=td*td+ad*ad+Sc*Sc,cf=(sd*td+dd*ad+$c*Sc)/cf;cd=td*cf;ve=ad*cf;we=Sc*cf;c.x=cd;c.y=ve;c.z=we;Ge=7}var cg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||cg<Q)W=Ge&3|(Ge&4)<<1,Q=cg,P=c.x,xa=c.y,ta=c.z}if(0>ba*Ba){var qf,Ie,rf,dg,Ne,Oe,Pe,Re,df,sf,If,De,Jf,ge,ye,Kf,Cf,eg;qf=b.x;Ie=b.y;rf=b.z;dg=e.x;Ne=e.y;Oe=e.z;Pe=d.x;Re=d.y;df=d.z;sf=dg-qf;If=Ne-Ie;De=Oe-rf;Jf=Pe-dg;ge=Re-Ne;ye=df-Oe;Kf=qf-Pe;Cf=Ie-Re;eg=rf-df;var zd,Ad,Bd;zd=If*ye-De*ge;Ad=De*Jf-sf*ye;Bd=sf*ge-If*Jf;var Og=qf*(If*Bd-De*Ad)+Ie*(De*zd-sf*Bd)+rf*(sf*Ad-If*zd),fg=dg*(ge*Bd-ye*Ad)+Ne*(ye*zd-Jf*Bd)+Oe*(Jf*Ad-ge*zd),gg=Pe*(Cf*Bd-eg*Ad)+Re*(eg*zd-Kf*Bd)+df*(Kf*Ad-Cf*zd),$d=-1,he,ie,ae,tf=0;ae=ie=he=0;if(0>Og){var ef,ff,gf,Lf,Sf,Td;ef=b.x;ff=b.y;gf=b.z;Lf=e.x;Sf=e.y;Td=e.z;var Ld,Md,of;Ld=Lf-ef;Md=Sf-ff;of=Td-gf;var Mf=Ld*ef+Md*ff+of*gf,Mf=-Mf/(Ld*Ld+Md*Md+of*of),Xd;if(0>Mf)c.x=ef,c.y=ff,c.z=gf,Xd=1;else if(1<Mf)c.x=Lf,c.y=Sf,c.z=Td,Xd=2;else{var ud,Cd,hg;ud=ef+Ld*Mf;Cd=ff+Md*Mf;hg=gf+of*Mf;c.x=ud;c.y=Cd;c.z=hg;Xd=3}var Ch=c.x*c.x+c.y*c.y+c.z*c.z,tf=Xd,$d=Ch;he=c.x;ie=c.y;ae=c.z}if(0>fg){var ig,Yd,be,ze,hf,jg;ig=e.x;Yd=e.y;be=e.z;ze=d.x;hf=d.y;jg=d.z;var jf,kf,lf;jf=ze-ig;kf=hf-Yd;lf=jg-be;var Ae=jf*ig+kf*Yd+lf*be,Ae=-Ae/(jf*jf+kf*kf+lf*lf),uf;if(0>Ae)c.x=ig,c.y=Yd,c.z=be,uf=1;else if(1<Ae)c.x=ze,c.y=hf,c.z=jg,uf=2;else{var kg,vf,xg;kg=ig+jf*Ae;vf=Yd+kf*Ae;xg=be+lf*Ae;c.x=kg;c.y=vf;c.z=xg;uf=3}var lg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>$d||lg<$d)tf=uf<<1,$d=lg,he=c.x,ie=c.y,ae=c.z}if(0>gg){var mf,wf,Je,yg,zg,Tf;mf=b.x;wf=b.y;Je=b.z;yg=d.x;zg=d.y;Tf=d.z;var mg,xf,yf;mg=yg-mf;xf=zg-wf;yf=Tf-Je;var Be=mg*mf+xf*wf+yf*Je,Be=-Be/(mg*mg+xf*xf+yf*yf),Ag;if(0>Be)c.x=mf,c.y=wf,c.z=Je,Ag=1;else if(1<Be)c.x=yg,c.y=zg,c.z=Tf,Ag=2;else{var sg,ng,og;sg=mf+mg*Be;ng=wf+xf*Be;og=Je+yf*Be;c.x=sg;c.y=ng;c.z=og;Ag=3}var pg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>$d||pg<$d)tf=Ag&1|(Ag&2)<<1,$d=pg,he=c.x,ie=c.y,ae=c.z}var Nf;if(0<$d)c.x=he,c.y=ie,c.z=ae,Nf=tf;else{var Ke=zd*zd+Ad*Ad+Bd*Bd;0<Ke&&(Ke=1/Math.sqrt(Ke));zd*=Ke;Ad*=Ke;Bd*=Ke;var nf=zd*zd+Ad*Ad+Bd*Bd,nf=(qf*zd+Ie*Ad+rf*Bd)/nf;he=zd*nf;ie=Ad*nf;ae=Bd*nf;c.x=he;c.y=ie;c.z=ae;Nf=7}var zf=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||zf<Q)W=Nf<<1,Q=zf,P=c.x,xa=c.y,ta=c.z}if(0<Q)return c.x=P,c.y=xa,c.z=ta,W;c.O();return 15};O.R=!0;O.prototype={za:function(a,b,e,d,c,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Mf:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},zc:function(a){return new O(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},Kg:function(a){return new O(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},Bf:function(a){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},de:function(a){return new O(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Cc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e10+a.e10,c=this.e11+a.e11,f=this.e12+a.e12,h=this.e20+a.e20,l=this.e21+a.e21,g=this.e22+a.e22;this.e00+=a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Lg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e10-a.e10,c=this.e11-a.e11,f=this.e12-a.e12,h=this.e20-a.e20,l=this.e21-a.e21,g=this.e22-a.e22;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Jg:function(a){var b=this.e01*a,e=this.e02*a,d=this.e10*a,c=this.e11*a,f=this.e12*a,h=this.e20*a,l=this.e21*a,g=this.e22*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},ee:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,c=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Ge:function(a,b,e){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},bd:function(a,b,e){return new O(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},fe:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22)},Hc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d)},He:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e10*b,h=this.e11*b;b=this.e12*b;var l=this.e20*e,g=this.e21*e;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},cd:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e10*a,h=this.e11*b,l=this.e12*e,g=this.e20*a;b=this.e21*b;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},ge:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;h=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;e=a*this.e02+l*this.e12+g*this.e22;c=k*this.e00+m*this.e10+n*this.e20;f=k*this.e01+m*this.e11+n*this.e21;k=k*this.e02+m*this.e12+n*this.e22;m=q*this.e00+b*this.e10+h*this.e20;n=q*this.e01+b*this.e11+h*this.e21;q=q*this.e02+b*this.e12+h*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=k;this.e20=m;this.e21=n;this.e22=q;return this},ad:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e10*a+this.e11*k+this.e12*q,f=this.e10*l+this.e11*m+this.e12*b,h=this.e10*g+this.e11*n+this.e12*p,r=this.e20*a+this.e21*k+this.e22*q,l=this.e20*l+this.e21*m+this.e22*b,g=this.e20*g+this.e21*n+this.e22*p;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=h;this.e20=r;this.e21=l;this.e22=g;return this},bi:function(){return new O(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},ci:function(){var a=this.e10,b=this.e20,e=this.e01,d=this.e11,c=this.e21,f=this.e02,h=this.e12,l=this.e22;this.e00=this.e00;this.e01=a;this.e02=b;this.e10=e;this.e11=d;this.e12=c;this.e20=f;this.e21=h;this.e22=l;return this},Pd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Ng:function(){return this.e00+this.e11+this.e22},be:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);return new O(a*k,-d*k,h*k,-b*k,c*k,-l*k,e*k,-f*k,g*k)},ce:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);this.e00=a*k;this.e01=-d*k;this.e02=h*k;this.e10=-b*k;this.e11=c*k;this.e12=-l*k;this.e20=e*k;this.e21=-f*k;this.e22=g*k;return this},Mg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new O(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},sb:function(a){var b=a.x,e=a.y,d=a.z,c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h,d=d*l,k=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;this.e00=1-g-d;this.e01=k-c;this.e02=b+h;this.e10=k+c;this.e11=1-a-d;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},xj:function(){var a=new ga,b=this.e00,e=this.e11,d=this.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},ab:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),d=Math.sin(a.z),c=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*d;this.e02=e;this.e10=c*d+a*b*e;this.e11=c*a-b*e*d;this.e12=-f*b;this.e20=b*d-c*a*e;this.e21=a*b+c*e*d;this.e22=c*f;return this},di:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,1.570796326794895,.5*a)):new t(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},qc:function(a){return 0==a?new t(this.e00,this.e01,this.e02):1==a?new t(this.e10,this.e11,this.e12):2==a?new t(this.e20,this.e21,this.e22):null},lc:function(a){return 0==a?new t(this.e00,this.e10,this.e20):1==a?new t(this.e01,this.e11,this.e21):2==a?new t(this.e02,this.e12,this.e22):null},rc:function(a,b){0==a?b.za(this.e00,this.e01,this.e02):1==a?b.za(this.e10,this.e11,this.e12):2==a?b.za(this.e20,this.e21,this.e22):b.O()},mc:function(a,b){0==a?b.za(this.e00,this.e10,this.e20):1==a?b.za(this.e01,this.e11,this.e21):2==a?b.za(this.e02,this.e12,this.e22):b.O()},Kb:function(a,b,e){var d=a.y,c=a.z,f=b.x,h=b.y;b=b.z;var l=e.x,g=e.y;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},Pa:function(a,b,e){var d=b.x,c=e.x,f=a.y,h=b.y,l=e.y,g=a.z;b=b.z;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"},qa:O};M.R=!0;M.prototype={za:function(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Mf:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},lc:function(a){return new M(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},Bf:function(a){return new M(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},Ge:function(a){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},Pd:function(a){return new M(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},mc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e03+a.e03,c=this.e10+a.e10,f=this.e11+a.e11,h=this.e12+a.e12,l=this.e13+a.e13,g=this.e20+a.e20,k=this.e21+a.e21,m=this.e22+a.e22,n=this.e23+a.e23,q=this.e30+a.e30,p=this.e31+a.e31,r=this.e32+a.e32,v=this.e33+a.e33;this.e00+=a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Jg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e03-a.e03,c=this.e10-a.e10,f=this.e11-a.e11,h=this.e12-a.e12,l=this.e13-a.e13,g=this.e20-a.e20,k=this.e21-a.e21,m=this.e22-a.e22,n=this.e23-a.e23,q=this.e30-a.e30,p=this.e31-a.e31,r=this.e32-a.e32,v=this.e33-a.e33;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},He:function(a){var b=this.e01*a,e=this.e02*a,d=this.e03*a,c=this.e10*a,f=this.e11*a,h=this.e12*a,l=this.e13*a,g=this.e20*a,k=this.e21*a,m=this.e22*a,n=this.e23*a,q=this.e30*a,p=this.e31*a,r=this.e32*a,v=this.e33*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},be:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,d=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,n=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,q=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,p=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,r=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,v=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},fe:function(a,b,e){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},zc:function(a,b,e){return new M(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},de:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,k*this.e03+m*this.e13+n*this.e23,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22,q*this.e03+b*this.e13+d*this.e23,this.e30,this.e31,this.e32,this.e33)},qc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e03,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e13,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d,this.e23,this.e30*a+this.e31*k+this.e32*q,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*n+this.e32*d,this.e33)},ci:function(a,b,e){return new M(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},Pa:function(a,b,e){return new M(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},ge:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e03*a,h=this.e10*b,l=this.e11*b,g=this.e12*b;b=this.e13*b;var k=this.e20*e,m=this.e21*e,n=this.e22*e;e=this.e23*e;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Cc:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e03,h=this.e10*a,l=this.e11*b,g=this.e12*e,k=this.e13,m=this.e20*a,n=this.e21*b,q=this.e22*e,p=this.e23,r=this.e30*a;b=this.e31*b;e=this.e32*e;var v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=b;this.e32=e;this.e33=v;return this},ee:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c,p=d*e*h+b*c,r=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;b=a*this.e02+l*this.e12+g*this.e22;e=a*this.e03+l*this.e13+g*this.e23;var c=k*this.e00+m*this.e10+n*this.e20,f=k*this.e01+m*this.e11+n*this.e21,h=k*this.e02+m*this.e12+n*this.e22,k=k*this.e03+m*this.e13+n*this.e23,m=q*this.e00+p*this.e10+r*this.e20,n=q*this.e01+p*this.e11+r*this.e21,v=q*this.e02+p*this.e12+r*this.e22,q=q*this.e03+p*this.e13+r*this.e23,p=this.e30,r=this.e31,t=this.e32,w=this.e33;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=b;this.e03=e;this.e10=c;this.e11=f;this.e12=h;this.e13=k;this.e20=m;this.e21=n;this.e22=v;this.e23=q;this.e30=p;this.e31=r;this.e32=t;this.e33=w;return this},rc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e03,f=this.e10*a+this.e11*k+this.e12*q,h=this.e10*l+this.e11*m+this.e12*b,r=this.e10*g+this.e11*n+this.e12*p,v=this.e13,t=this.e20*a+this.e21*k+this.e22*q,w=this.e20*l+this.e21*m+this.e22*b,A=this.e20*g+this.e21*n+this.e22*p,u=this.e23,D=this.e30*a+this.e31*k+this.e32*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*n+this.e32*p,n=this.e33;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e03=c;this.e10=f;this.e11=h;this.e12=r;this.e13=v;this.e20=t;this.e21=w;this.e22=A;this.e23=u;this.e30=D;this.e31=l;this.e32=g;this.e33=n;return this},di:function(a,b,e){var d=this.e01+a*this.e31,c=this.e02+a*this.e32,f=this.e03+a*this.e33,h=this.e10+b*this.e30,l=this.e11+b*this.e31,g=this.e12+b*this.e32;b=this.e13+b*this.e33;var k=this.e20+e*this.e30,m=this.e21+e*this.e31,n=this.e22+e*this.e32;e=this.e23+e*this.e33;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00+=a*this.e30;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},ab:function(a,b,e){var d=this.e01,c=this.e02,f=this.e00*a+this.e01*b+this.e02*e+this.e03,h=this.e10,l=this.e11,g=this.e12,k=this.e10*a+this.e11*b+this.e12*e+this.e13,m=this.e20,n=this.e21,q=this.e22,p=this.e20*a+this.e21*b+this.e22*e+this.e23,r=this.e30,v=this.e31,t=this.e32;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=v;this.e32=t;this.e33=a;return this},Mg:function(){return new M(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Ng:function(){var a=this.e10,b=this.e20,e=this.e30,d=this.e01,c=this.e11,f=this.e21,h=this.e31,l=this.e02,g=this.e12,k=this.e22,m=this.e32,n=this.e03,q=this.e13,p=this.e23,r=this.e33;this.e00=this.e00;this.e01=a;this.e02=b;this.e03=e;this.e10=d;this.e11=c;this.e12=f;this.e13=h;this.e20=l;this.e21=g;this.e22=k;this.e23=m;this.e30=n;this.e31=q;this.e32=p;this.e33=r;return this},Hc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,d=this.e21*this.e32-this.e22*this.e31,c=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*c+this.e13*d)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*c-this.e11*e+this.e13*a)-this.e03*(this.e10*d-this.e11*b+this.e12*a)},Lg:function(){return this.e00+this.e11+this.e22+this.e33},bd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,A=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);return new M(q*b,-t*b,l*b,-A*b,-p*b,n*b,-k*b,f*b,r*b,-g*b,m*b,-e*b,-v*b,h*b,-w*b,a*b)},cd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,A=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);this.e00=q*b;this.e01=-t*b;this.e02=l*b;this.e03=-A*b;this.e10=-p*b;this.e11=n*b;this.e12=-k*b;this.e13=f*b;this.e20=r*b;this.e21=-g*b;this.e22=m*b;this.e23=-e*b;this.e30=-v*b;this.e31=h*b;this.e32=-w*b;this.e33=a*b;return this},Kb:function(a,b,e,d,c,f,h,l,g){d=a-d;c=b-c;f=e-f;var k=1/Math.sqrt(d*d+c*c+f*f);d*=k;c*=k;f*=k;var m=l*f-g*c;g=g*d-h*f;h=h*c-l*d;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=c*h-f*g;var k=f*m-d*h,n=d*g-c*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=n;this.e13=-(l*a+k*b+n*e);this.e20=d;this.e21=c;this.e22=f;this.e23=-(d*a+c*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},ce:function(a,b,e,d){a=1/Math.tan(.5*a);d/=e-d;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},bi:function(a,b,e,d){d=1/(e-d);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e33=this.e32=this.e31=this.e30=0;return this},Kg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},ad:function(a){var b=a.e01,e=a.e02,d=a.e10,c=a.e11,f=a.e12,h=a.e20,l=a.e21,g=a.e22;this.e00=a.e00;this.e01=b;this.e02=e;this.e03=0;this.e10=d;this.e11=c;this.e12=f;this.e13=0;this.e20=h;this.e21=l;this.e22=g;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},sb:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new M(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"},qa:M};na.R=!0;na.abs=function(a){return 0<a?a:-a};na.sin=function(a){return Math.sin(a)};na.cos=function(a){return Math.cos(a)};na.tan=function(a){return Math.tan(a)};na.asin=function(a){return Math.asin(a)};na.acos=function(a){return Math.acos(a)};na.atan=function(a){return Math.atan(a)};na.ge=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};na.fe=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};na.atan2=function(a,b){return Math.atan2(a,b)};na.sqrt=function(a){return Math.sqrt(a)};na.zc=function(a,b,e){return a<b?b:a>e?e:a};na.be=function(){return Math.random()};na.ce=function(a,b){return a+Math.random()*(b-a)};na.ee=function(a,b){return new t(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};na.de=function(){return new t(-1+2*Math.random(),-1+2*Math.random(),-1+2*Math.random())};Ub.R=!0;Ub.prototype={zc:function(){return 0==this.c?new t:this.b[--this.c]},mc:function(){return 0==this.pb?new O:this.nb[--this.pb]},qc:function(){return 0==this.Uf?new M:this.zf[--this.Uf]},rc:function(){return 0==this.$d?new ga:this.Td[--this.$d]},Pa:function(a,b,e,d){if(null!=a){a.O();if(this.c==this.b.length){for(var c=Array(this.c<<1),f=0,h=this.c;f<h;){var l=f++;c[l]=this.b[l];this.b[l]=null}this.b=c}this.b[this.c++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.pb==this.nb.length){a=Array(this.pb<<1);c=0;for(f=this.pb;c<f;)h=c++,a[h]=this.nb[h],this.nb[h]=null;this.nb=a}this.nb[this.pb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.Uf==this.zf.length){b=Array(this.Uf<<1);a=0;for(c=this.Uf;a<c;)f=a++,b[f]=this.zf[f],this.zf[f]=null;this.zf=b}this.zf[this.Uf++]=e}if(null!=d){d.x=0;d.y=0;d.z=0;d.w=1;if(this.$d==this.Td.length){e=Array(this.$d<<1);b=0;for(a=this.$d;b<a;)c=b++,e[c]=this.Td[c],this.Td[c]=null;this.Td=e}this.Td[this.$d++]=d}},lc:function(a){a.O();if(this.c==this.b.length){for(var b=Array(this.c<<1),e=0,d=this.c;e<d;){var c=e++;b[c]=this.b[c];this.b[c]=null}this.b=b}this.b[this.c++]=a},ab:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.pb==this.nb.length){for(var b=Array(this.pb<<1),e=0,d=this.pb;e<d;){var c=e++;b[c]=this.nb[c];this.nb[c]=null}this.nb=b}this.nb[this.pb++]=a},sb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.Uf==this.zf.length){for(var b=Array(this.Uf<<1),e=0,d=this.Uf;e<d;){var c=e++;b[c]=this.zf[c];this.zf[c]=null}this.zf=b}this.zf[this.Uf++]=a},Kb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.$d==this.Td.length){for(var b=Array(this.$d<<1),e=0,d=this.$d;e<d;){var c=e++;b[c]=this.Td[c];this.Td[c]=null}this.Td=b}this.Td[this.$d++]=a},qa:Ub};ga.R=!0;ga.prototype={Mf:function(){this.z=this.y=this.x=0;this.w=1;return this},za:function(a,b,e,d){this.x=a;this.y=b;this.z=e;this.w=d;return this},Pa:function(a){return new ga(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Cc:function(a){return new ga(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},rc:function(a){return new ga(this.x*a,this.y*a,this.z*a,this.w*a)},ab:function(a){var b=this.y+a.y,e=this.z+a.z,d=this.w+a.w;this.x+=a.x;this.y=b;this.z=e;this.w=d;return this},Hc:function(a){var b=this.y-a.y,e=this.z-a.z,d=this.w-a.w;this.x=this.x-a.x;this.y=b;this.z=e;this.w=d;return this},zc:function(a){var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},sb:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},qc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new ga(this.x*a,this.y*a,this.z*a,this.w*a)},mc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},ad:function(a,b){var e=a.x,d=a.y;a=a.z;var c=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*c+d*f+a*b)));if(!this.w)return c=e*e,f=d*d,b=a*a,c<f?c<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-d*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+c),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h),this;h=.5/this.w;this.x=(d*b-a*f)*h;this.y=(a*c-e*b)*h;this.z=(e*f-d*c)*h;return this},bd:function(a,b){var e,d,c,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,d=-a.y,c=-a.z,a=-a.w):(e=a.x,d=a.y,c=a.z,a=a.w);if(.999999<f)return e=new ga(this.x+(e-this.x)*b,this.y+(d-this.y)*b,this.z+(c-this.z)*b,this.w+(a-this.w)*b),d=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<d&&(d=1/d),c=e.y*d,a=e.z*d,f=e.w*d,e.x=e.x*d,e.y=c,e.z=a,e.w=f,e;b*=Math.acos(f);e-=this.x*f;d-=this.y*f;c-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+d*d+c*c+a*a),h=Math.sin(b);b=Math.cos(b);return new ga(this.x*b+e*f*h,this.y*b+d*f*h,this.z*b+c*f*h,this.w*b+a*f*h)},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new ga(this.x,this.y,this.z,this.w)},Kb:function(a){var b=a.e00,e=a.e11,d=a.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},cd:function(){var a=new O,b=this.x,e=this.y,d=this.z,c=this.w,f=2*b,h=2*e,l=2*d,g=b*f,k=e*h,d=d*l,m=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;a.e00=1-k-d;a.e01=m-c;a.e02=b+h;a.e10=m+c;a.e11=1-g-d;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"},qa:ga};tc.R=!0;tc.prototype={Vm:function(){if(null!=this.xh){var a=this.Lm;this.xh.Yl(a,this.uc.Ib,this.vc.Ib,this.uc.a,this.vc.a,this.Li);(this.ug=0<a.numPoints)?(this.Ja.Jm(a.normal),this.Ke.Ec=a.cm()>F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?F.alternativeContactPositionCorrectionAlgorithm:F.defaultContactPositionCorrectionAlgorithm,a.incremental?this.Ll.Bn(a,this.C.a,this.D.a):this.Ll.Pn(a,this.C.a,this.D.a)):this.Ja.Je()}},Ck:function(){var a=this.uc.Cj,b=this.vc.Cj;a==b&&(b=null);null!=a&&a.$e(this);null!=b&&b.$e(this)},lc:function(){return this.uc},mc:function(){return this.vc},Zj:function(){return this.ug},ab:function(){return this.Ja},Pa:function(){return this.Ke},Kb:function(){return this.ia},sb:function(){return this.M},qa:tc};Nc.R=!0;Nc.prototype={Pa:function(){return this.Ud},sb:function(){return this.Mc},Kb:function(){return this.ia},ab:function(){return this.M},qa:Nc};Fd.R=!0;Fd.prototype={bn:function(){for(var a=this.dc.Yd;null!=a;){for(var b=a.M;;){var e;if(a.qg.sc==a.rg.sc)throw Error("assertion error: pp._p1._id != pp._p2._id is false");a.qg.sc<a.rg.sc?(e=a.qg.userData,a=a.rg.userData):(e=a.rg.userData,a=a.qg.userData);if(!this.Kn(e,a))break;var d=e.Vb,c=a.Vb,f;f=d.se<c.se?d.Mb:c.Mb;for(var d=e.sc,c=a.sc,h=!1;null!=f;){var l=f.M;f=f.Ud;if(f.uc.sc==d&&f.vc.sc==c){h=f.Hj=!0;break}f=l}h||(d=this.bg,null!=d?(this.bg=d.M,d.M=null):d=new tc,null==this.vd?this.vd=d:(this.qe.M=d,d.ia=this.qe),this.qe=d,d.Hj=!0,c=this.Km.Hb[e.Ib.Wb][a.Ib.Wb],d.uc=e,d.vc=a,d.C=e.Vb,d.D=a.Vb,d.ug=!1,null==d.C.Mb?d.C.Mb=d.qb:(d.C.ec.M=d.qb,d.qb.ia=d.C.ec),d.C.ec=d.qb,null==d.D.Mb?d.D.Mb=d.rb:(d.D.ec.M=d.rb,d.rb.ia=d.D.ec),d.D.ec=d.rb,d.C.se++,d.D.se++,d.qb.Mc=d.D,d.rb.Mc=d.C,d.qb.Ud=d,d.rb.Ud=d,d.xh=c,d=d.Ke,d.uc=e,d.vc=a,d.C=d.uc.Vb,d.D=d.vc.Vb,d.aj=d.C.a,d.bj=d.D.a,this.ji++);break}a=b}},cn:function(){for(var a=this.dc.Gj,b=this.vd;null!=b;){for(var e=b.M;;){if(b.Hj){b.Hj=!1;b.Qj=!1;break}if(!a){var d=b.ia,c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ia);b.M=null;b.ia=null;d=b.qb.ia;c=b.qb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.qb==b.C.Mb&&(b.C.Mb=b.C.Mb.M);b.qb==b.C.ec&&(b.C.ec=b.C.ec.ia);b.qb.M=null;b.qb.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.D.Mb&&(b.D.Mb=b.D.Mb.M);b.rb==b.D.ec&&(b.D.ec=b.D.ec.ia);b.rb.M=null;b.rb.ia=null;b.C.se--;b.D.se--;b.qb.Mc=null;b.rb.Mc=null;b.qb.Ud=null;b.rb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ja.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}var c=b.uc,d=b.vc,f=c.Vb,h=d.Vb,h=!h.Fb&&1!=h.Wb;if((f.Fb||1==f.Wb)&&!h){b.Qj=!0;break}f=c.u;h=d.u;c=c.Na;d=d.Na;if(!(c.J<d.G&&c.G>d.J&&c.K<d.H&&c.H>d.K&&c.L<d.I&&c.I>d.L)){d=b.ia;c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ia);b.M=null;b.ia=null;d=b.qb.ia;c=b.qb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.qb==b.C.Mb&&(b.C.Mb=b.C.Mb.M);b.qb==b.C.ec&&(b.C.ec=b.C.ec.ia);b.qb.M=null;b.qb.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.D.Mb&&(b.D.Mb=b.D.Mb.M);b.rb==b.D.ec&&(b.D.ec=b.D.ec.ia);b.rb.M=null;b.rb.ia=null;b.C.se--;b.D.se--;b.qb.Mc=null;b.rb.Mc=null;b.qb.Ud=null;b.rb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ja.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}b.Qj=!(f.ma<h.ja&&f.ja>h.ma&&f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa);break}b=e}},Kn:function(a,b){var e=a.Vb,d=b.Vb;if(e==d||0!=e.Wb&&0!=d.Wb||!(a.Aj&b.Bj&&b.Aj&a.Bj))return!1;e.$g<d.$g?(a=e.re,e=d):a=d.re;for(;null!=a;){if(a.Mc==e&&!a.wk.gk)return!1;a=a.M}return!0},Ok:function(){this.dc.si();this.bn();this.cn()},Ck:function(){for(var a=this.vd;null!=a;){var b=a.M;a.ug&&a.Ck();a=b}},ab:function(){return this.ji},Pa:function(){return this.vd},qa:Fd};Dk.R=!0;Dk.prototype={Je:function(){for(;0<this.vf;)this.xf[--this.vf]=null;for(;0<this.wf;)this.yf[--this.wf]=null;for(;0<this.ih;)this.ph[--this.ih]=null;for(;0<this.hh;)this.oh[--this.hh]=null},fk:function(a){if(this.vf==this.xf.length){for(var b=Array(this.vf<<1),e=0,d=this.vf;e<d;){var c=e++;b[c]=this.xf[c];this.xf[c]=null}this.xf=b}a.Cf=!0;this.xf[this.vf++]=a},yl:function(a,b){if(this.wf==this.yf.length){for(var e=Array(this.wf<<1),d=0,c=this.wf;d<c;){var f=d++;e[f]=this.yf[f];this.yf[f]=null}this.yf=e}a.Cf=!0;this.yf[this.wf++]=a;if(b==ic.SPLIT_IMPULSE){if(this.ih==this.ph.length){e=Array(this.ih<<1);d=0;for(c=this.ih;d<c;)f=d++,e[f]=this.ph[f],this.ph[f]=null;this.ph=e}this.ph[this.ih++]=a}if(b==ic.NGS){if(this.hh==this.oh.length){b=Array(this.hh<<1);e=0;for(d=this.hh;e<d;)c=e++,b[c]=this.oh[c],this.oh[c]=null;this.oh=b}this.oh[this.hh++]=a}},Um:function(a,b){a=a.dt;var e=b.pa,d=b.a;e.v=d.v;e.A=d.A;e.B=d.B;e.o=d.o;e.f=d.f;e.h=d.h;e.i=d.i;e.m=d.m;e.j=d.j;e.l=d.l;e.g=d.g;e.s=d.s;b.hk&&b.cb*b.cb+b.eb*b.eb+b.fb*b.fb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&b.hb*b.hb+b.ib*b.ib+b.jb*b.jb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?(b.xb+=a,b.xb>F.sleepingTimeThreshold&&(b.Fb=!0,b.xb=0)):b.xb=0;if(!b.Fb){if(0==b.Wb){var e=a*b.Il,d=e*e,e=1/(1+e+d*(.5+.16666666666666666*e+.041666666666666664*d)),d=a*b.Al,c=d*d,d=1/(1+d+c*(.5+.16666666666666666*d+.041666666666666664*c)),f,h,l,c=this.dm*b.Ug;f=this.em*b.Ug;h=this.fm*b.Ug;c+=b.yh*b.Za;f+=b.zh*b.Za;h+=b.Ah*b.Za;var g,k;g=b.Z*b.kf+b.$*b.lf+b.aa*b.mf;k=b.ba*b.kf+b.ca*b.lf+b.da*b.mf;l=b.ea*b.kf+b.fa*b.lf+b.ga*b.mf;b.cb+=c*a;b.eb+=f*a;b.fb+=h*a;b.cb*=e;b.eb*=e;b.fb*=e;b.hb+=g*a;b.ib+=k*a;b.jb+=l*a;b.hb*=d;b.ib*=d;b.jb*=d}b.Hl(a);for(a=b.Ac;null!=a;){e=a.M;d=a.pa;f=a.ha;var c=b.pa,m,n,q,p,r;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;d=a.a;f=a.ha;c=b.a;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;a.Ib.Lb(a.u,a.pa);d=a.u.ma;c=a.u.na;f=a.u.oa;h=a.u.ja;l=a.u.ka;g=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=d<a.u.ma?d:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=f<a.u.oa?f:a.u.oa;a.u.ja=h>a.u.ja?h:a.u.ja;a.u.ka=l>a.u.ka?l:a.u.ka;a.u.la=g>a.u.la?g:a.u.la;null!=a.Na&&(d=a.a.v-a.pa.v,c=a.a.A-a.pa.A,f=a.a.B-a.pa.B,h=a.nc,h.x=d,h.y=c,h.z=f,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=e}}},Tm:function(a,b,e){for(var d=a.dt,c=!0,f=0,h=this.vf;f<h;){var l=f++,g=this.xf[l],k=g.pa,m=g.a;k.v=m.v;k.A=m.A;k.B=m.B;k.o=m.o;k.f=m.f;k.h=m.h;k.i=m.i;k.m=m.m;k.j=m.j;k.l=m.l;k.g=m.g;k.s=m.s;g.Fb=!1;g.hk&&g.cb*g.cb+g.eb*g.eb+g.fb*g.fb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&g.hb*g.hb+g.ib*g.ib+g.jb*g.jb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?g.xb+=d:g.xb=0;g.xb<F.sleepingTimeThreshold&&(c=!1);if(0==g.Wb){var n=d*g.Il,q=n*n,p=1/(1+n+q*(.5+.16666666666666666*n+.041666666666666664*q)),r=d*g.Al,v=r*r,t=1/(1+r+v*(.5+.16666666666666666*r+.041666666666666664*v)),w,A,u,D,V,z;w=this.dm*g.Ug;A=this.em*g.Ug;u=this.fm*g.Ug;w+=g.yh*g.Za;A+=g.zh*g.Za;u+=g.Ah*g.Za;var E,x,zb;E=g.Z*g.kf+g.$*g.lf+g.aa*g.mf;x=g.ba*g.kf+g.ca*g.lf+g.da*g.mf;zb=g.ea*g.kf+g.fa*g.lf+g.ga*g.mf;D=E;V=x;z=zb;g.cb+=w*d;g.eb+=A*d;g.fb+=u*d;g.cb*=p;g.eb*=p;g.fb*=p;g.hb+=D*d;g.ib+=V*d;g.jb+=z*d;g.hb*=t;g.ib*=t;g.jb*=t}}if(c)for(var N=0,G=this.vf;N<G;){var C=N++,L=this.xf[C];L.Fb=!0;L.xb=0}else{for(var O=0,ha=this.wf;O<ha;){var M=O++;this.yf[M].jh(a)}for(var Vb=0,na=this.wf;Vb<na;){var ka=Vb++;this.yf[ka].sh(a)}for(var bb=0;bb<b;){bb++;for(var U=0,R=this.wf;U<R;){var lc=U++;this.yf[lc].nh()}}for(var Na=0,Ra=this.wf;Na<Ra;){var yc=Na++;this.yf[yc].vi(a)}for(var Pa=0,Ba=this.vf;Pa<Ba;){var Hb=Pa++;this.xf[Hb].Hl(d)}for(var J=0,Qa=this.ih;J<Qa;){var ba=J++;this.ph[ba].Gg(a)}for(var Q=0;Q<e;){Q++;for(var P=0,xa=this.ih;P<xa;){var ta=P++;this.ph[ta].mh()}}for(var W=0,pa=this.vf;W<pa;){var y=W++;this.xf[y].Rm()}for(var Ia=0,ca=this.hh;Ia<ca;){var Ea=Ia++;this.oh[Ea].Gg(a)}for(var ya=0;ya<e;){ya++;for(var Fa=0,Sa=this.hh;Fa<Sa;){var la=Fa++;this.oh[la].lh(a)}}for(var Z=0,Ga=this.wf;Z<Ga;){var ra=Z++;this.yf[ra].$e()}for(var va=0,I=this.vf;va<I;)for(var La=va++,Wa=this.xf[La],S=Wa.Ac;null!=S;){var Xa=S.M,T=S.pa,K=S.ha,ia=Wa.pa,gb,da,Hc,sa,fb,kb,Ya,ma,oa;gb=ia.o*K.o+ia.f*K.i+ia.h*K.l;da=ia.o*K.f+ia.f*K.m+ia.h*K.g;Hc=ia.o*K.h+ia.f*K.j+ia.h*K.s;sa=ia.i*K.o+ia.m*K.i+ia.j*K.l;fb=ia.i*K.f+ia.m*K.m+ia.j*K.g;kb=ia.i*K.h+ia.m*K.j+ia.j*K.s;Ya=ia.l*K.o+ia.g*K.i+ia.s*K.l;ma=ia.l*K.f+ia.g*K.m+ia.s*K.g;oa=ia.l*K.h+ia.g*K.j+ia.s*K.s;T.o=gb;T.f=da;T.h=Hc;T.i=sa;T.m=fb;T.j=kb;T.l=Ya;T.g=ma;T.s=oa;var Ja,Ha,ob;Ja=ia.o*K.v+ia.f*K.A+ia.h*K.B;Ha=ia.i*K.v+ia.m*K.A+ia.j*K.B;ob=ia.l*K.v+ia.g*K.A+ia.s*K.B;T.v=Ja;T.A=Ha;T.B=ob;T.v+=ia.v;T.A+=ia.A;T.B+=ia.B;var fa=S.a,ea=S.ha,ja=Wa.a,cb,Aa,sb,Ua,qb,rb,ub,Va,xb;cb=ja.o*ea.o+ja.f*ea.i+ja.h*ea.l;Aa=ja.o*ea.f+ja.f*ea.m+ja.h*ea.g;sb=ja.o*ea.h+ja.f*ea.j+ja.h*ea.s;Ua=ja.i*ea.o+ja.m*ea.i+ja.j*ea.l;qb=ja.i*ea.f+ja.m*ea.m+ja.j*ea.g;rb=ja.i*ea.h+ja.m*ea.j+ja.j*ea.s;ub=ja.l*ea.o+ja.g*ea.i+ja.s*ea.l;Va=ja.l*ea.f+ja.g*ea.m+ja.s*ea.g;xb=ja.l*ea.h+ja.g*ea.j+ja.s*ea.s;fa.o=cb;fa.f=Aa;fa.h=sb;fa.i=Ua;fa.m=qb;fa.j=rb;fa.l=ub;fa.g=Va;fa.s=xb;var rc,Za,ua;rc=ja.o*ea.v+ja.f*ea.A+ja.h*ea.B;Za=ja.i*ea.v+ja.m*ea.A+ja.j*ea.B;ua=ja.l*ea.v+ja.g*ea.A+ja.s*ea.B;fa.v=rc;fa.A=Za;fa.B=ua;fa.v+=ja.v;fa.A+=ja.A;fa.B+=ja.B;var Qb,H,pb,db,oc,$a;S.Ib.Lb(S.u,S.pa);Qb=S.u.ma;H=S.u.na;pb=S.u.oa;db=S.u.ja;oc=S.u.ka;$a=S.u.la;S.Ib.Lb(S.u,S.a);S.u.ma=Qb<S.u.ma?Qb:S.u.ma;S.u.na=H<S.u.na?H:S.u.na;S.u.oa=pb<S.u.oa?pb:S.u.oa;S.u.ja=db>S.u.ja?db:S.u.ja;S.u.ka=oc>S.u.ka?oc:S.u.ka;S.u.la=$a>S.u.la?$a:S.u.la;if(null!=S.Na){var hb,B,Db;hb=S.a.v-S.pa.v;B=S.a.A-S.pa.A;Db=S.a.B-S.pa.B;var ga=S.nc;ga.x=hb;ga.y=B;ga.z=Db;S.Vb.kc.dc.sd(S.Na,S.u,S.nc)}S=Xa}}},qa:Dk};kj.R=!0;kj.prototype={qa:kj};qa.R=!0;qa.prototype={Ok:function(){var a=(new Date).getTime()/1E3;this.wh.Ok();Rc.broadPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a);for(var a=(new Date).getTime()/1E3,b=this.wh.vd;null!=b;){var e=b.M;b.Qj||b.Vm();b=e}Rc.narrowPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a)},Sm:function(){var a=(new Date).getTime()/1E3;if(F.disableSleeping)for(var b=this.jf;null!=b;){var e=b.M;b.Fb=!1;b.xb=0;b=e}if(this.dh.length<this.Vi){for(b=this.dh.length<<1;b<this.Vi;)b<<=1;this.dh=Array(b)}this.Mj=0;b=this.lg;e=this.lk;b.dm=e.x;b.em=e.y;b.fm=e.z;b=this.jf;for(this.hf=0;null!=b;){for(e=b.M;!b.Cf&&!b.Fb&&1!=b.Wb;){if(0==b.se&&0==b.$g){this.lg.Um(this.Mh,b);this.Mj++;break}this.Xm(b);this.lg.Tm(this.Mh,this.Bk,this.Ak);this.lg.Je();this.Mj++;break}b=e}this.wh.Ck();for(b=this.jf;null!=b;)e=b.M,b.Cf=!1,b=e;for(b=this.jf;null!=b;)e=b.M,b.yh=0,b.zh=0,b.Ah=0,b.kf=0,b.lf=0,b.mf=0,b=e;for(;0<this.hf;)this.Qe[--this.hf].Cf=!1,this.Qe[this.hf]=null;Rc.dynamicsTime=1E3*((new Date).getTime()/1E3-a)},Xm:function(a){var b=1;this.lg.fk(a);for(this.dh[0]=a;0<b;)if(a=this.dh[--b],this.dh[b]=null,1!=a.Wb){for(var e=a.Mb;null!=e;){var d=e.M,c=e.Ud.Ke,f=e.Ud.Ke.Rj;if(c.Zj()&&!f.Cf){if(this.Qe.length==this.hf){for(var h=Array(this.hf<<1),l=0,g=this.hf;l<g;){var k=l++;h[k]=this.Qe[k];this.Qe[k]=null}this.Qe=h}this.Qe[this.hf++]=f;this.lg.yl(f,c.Ec);e=e.Mc;e.Cf||(this.lg.fk(e),this.dh[b++]=e)}e=d}for(d=a.re;null!=d;){a=d.M;e=d.wk;c=e.Rj;if(!c.Cf){if(this.Qe.length==this.hf){f=Array(this.hf<<1);h=0;for(l=this.hf;h<l;)g=h++,f[g]=this.Qe[g],this.Qe[g]=null;this.Qe=f}this.Qe[this.hf++]=c;this.lg.yl(c,e.Ec);d=d.Mc;d.Cf||(this.lg.fk(d),this.dh[b++]=d)}d=a}}},Mm:function(a,b){a.drawBvh&&this.kk(a,b.Ob,0,a.style.bvhNodeColor)},kk:function(a,b,e,d){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var c=this.Ga,f=0==c.c?new t:c.b[--c.c],c=this.Ga,c=0==c.c?new t:c.b[--c.c];f.x=b.J;f.y=b.K;f.z=b.L;c.x=b.G;c.y=b.H;c.z=b.I;a.Pk(f,c,d);var h=this.Ga;if(null!=f){f.O();if(h.c==h.b.length){for(var l=Array(h.c<<1),g=0,k=h.c;g<k;){var m=g++;l[m]=h.b[m];h.b[m]=null}h.b=l}h.b[h.c++]=f}f=this.Ga;if(null!=c){c.O();if(f.c==f.b.length){h=Array(f.c<<1);l=0;for(g=f.c;l<g;)k=l++,h[k]=f.b[k],f.b[k]=null;f.b=h}f.b[f.c++]=c}}this.kk(a,b.F[0],e+1,d);this.kk(a,b.F[1],e+1,d)}},Pm:function(a){for(var b=a.style,e=this.jf;null!=e;){var d=e.M,c=null,f=0==e.Wb;f||(c=2==e.Wb?b.kinematicShapeColor:b.staticShapeColor);for(var h=e.Ac;null!=h;){var l=h.M;f&&(c=h.sc&1?e.Fb?b.sleepingShapeColor2:e.xb>F.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Fb?b.sleepingShapeColor1:e.xb>F.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var g=h.Ib,k=h.a;switch(g.Wb){case 0:a.Am(k,g.$a,c);break;case 1:var m=g,n=this.Ga,q=0==n.c?new t:n.b[--n.c],p=q;p.x=m.Le;p.y=m.Me;p.z=m.Ne;a.Pl(k,q,c);var r=this.Ga;if(null!=q){q.O();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var A=aa++;v[A]=r.b[A];r.b[A]=null}r.b=v}r.b[r.c++]=q}break;case 2:var u=g;a.Wl(k,u.$a,u.Gb,c);break;case 3:var D=g;a.Tl(k,D.$a,D.Gb,c);break;case 4:var V=g;a.Rl(k,V.$a,V.Gb,c);break;case 5:var z=g,E=z.Ae,x=this.Ga,zb=0==x.c?new t:x.b[--x.c],N=this.Ga,G=0==N.c?new t:N.b[--N.c],C=this.Ga,L=0==C.c?new t:C.b[--C.c],M=this.Ga,ha=0==M.c?new t:M.b[--M.c],ga=this.Ga,Vb=0==ga.c?new t:ga.b[--ga.c],na=this.Ga,ka=0==na.c?new t:na.b[--na.c],bb=this.Ga,U=0==bb.pb?new O:bb.nb[--bb.pb],R=this.Ga,lc=0==R.c?new t:R.b[--R.c],Na=U;Na.e00=k.o;Na.e01=k.f;Na.e02=k.h;Na.e10=k.i;Na.e11=k.m;Na.e12=k.j;Na.e20=k.l;Na.e21=k.g;Na.e22=k.s;var Ra=lc;Ra.x=k.v;Ra.y=k.A;Ra.z=k.B;for(var yc=0,Pa=E;yc<Pa;){var Ba=yc++,Hb=z.tg[Ba],J=z.yb[Ba];Hb.x=J.x;Hb.y=J.y;Hb.z=J.z;var Qa=Hb,ba=Qa.x*U.e10+Qa.y*U.e11+Qa.z*U.e12,Q=Qa.x*U.e20+Qa.y*U.e21+Qa.z*U.e22;Qa.x=Qa.x*U.e00+Qa.y*U.e01+Qa.z*U.e02;Qa.y=ba;Qa.z=Q;var P=Qa,xa=P.y+lc.y,ta=P.z+lc.z;P.x=P.x+lc.x;P.y=xa;P.z=ta}if(30<E)for(var W=0,pa=E;W<pa;){var y=W++,Ia=z.tg[y];zb.x=Ia.x;zb.y=Ia.y;zb.z=Ia.z;var ca=z.tg[(y+1)%E];G.x=ca.x;G.y=ca.y;G.z=ca.z}else if(this.fi.wireframe||10<E)for(var Ea=0,ya=E;Ea<ya;){var Fa=Ea++,Sa=z.tg[Fa];zb.x=Sa.x;zb.y=Sa.y;zb.z=Sa.z;for(var la=0,Z=Fa;la<Z;){var Ga=la++,ra=z.tg[Ga];G.x=ra.x;G.y=ra.y;G.z=ra.z}}else for(var va=0,I=E;va<I;){var La=va++,Wa=z.tg[La];zb.x=Wa.x;zb.y=Wa.y;zb.z=Wa.z;for(var S=0,Xa=La;S<Xa;){var T=S++,K=z.tg[T];G.x=K.x;G.y=K.y;G.z=K.z;for(var ia=0,gb=T;ia<gb;){var da=ia++,Hc=z.tg[da];L.x=Hc.x;L.y=Hc.y;L.z=Hc.z;ha.x=G.x;ha.y=G.y;ha.z=G.z;var sa=ha,fb=sa.y-zb.y,kb=sa.z-zb.z;sa.x=sa.x-zb.x;sa.y=fb;sa.z=kb;Vb.x=L.x;Vb.y=L.y;Vb.z=L.z;var Ya=Vb,ma=Ya.y-zb.y,oa=Ya.z-zb.z;Ya.x=Ya.x-zb.x;Ya.y=ma;Ya.z=oa;ka.x=ha.x;ka.y=ha.y;ka.z=ha.z;var Ja=ka,Ha=Ja.z*Vb.x-Ja.x*Vb.z,ob=Ja.x*Vb.y-Ja.y*Vb.x;Ja.x=Ja.y*Vb.z-Ja.z*Vb.y;Ja.y=Ha;Ja.z=ob;var fa=Ja,ea=Math.sqrt(fa.x*fa.x+fa.y*fa.y+fa.z*fa.z);0<ea&&(ea=1/ea);var ja=fa.y*ea,cb=fa.z*ea;fa.x=fa.x*ea;fa.y=ja;fa.z=cb;var Aa=-ka.y,sb=-ka.z;ka.x=-ka.x;ka.y=Aa;ka.z=sb}}}var Ua=this.Ga;if(null!=zb){zb.O();if(Ua.c==Ua.b.length){for(var qb=Array(Ua.c<<1),rb=0,ub=Ua.c;rb<ub;){var Va=rb++;qb[Va]=Ua.b[Va];Ua.b[Va]=null}Ua.b=qb}Ua.b[Ua.c++]=zb}var xb=this.Ga;if(null!=G){G.O();if(xb.c==xb.b.length){for(var rc=Array(xb.c<<1),Za=0,ua=xb.c;Za<ua;){var Qb=Za++;rc[Qb]=xb.b[Qb];xb.b[Qb]=null}xb.b=rc}xb.b[xb.c++]=G}var H=this.Ga;if(null!=L){L.O();if(H.c==H.b.length){for(var pb=Array(H.c<<1),db=0,oc=H.c;db<oc;){var $a=db++;pb[$a]=H.b[$a];H.b[$a]=null}H.b=pb}H.b[H.c++]=L}var hb=this.Ga;if(null!=ha){ha.O();if(hb.c==hb.b.length){for(var B=Array(hb.c<<1),Db=0,qa=hb.c;Db<qa;){var Tc=Db++;B[Tc]=hb.b[Tc];hb.b[Tc]=null}hb.b=B}hb.b[hb.c++]=ha}var Fb=this.Ga;if(null!=Vb){Vb.O();if(Fb.c==Fb.b.length){for(var Oa=Array(Fb.c<<1),nb=0,vb=Fb.c;nb<vb;){var yb=nb++;Oa[yb]=Fb.b[yb];Fb.b[yb]=null}Fb.b=Oa}Fb.b[Fb.c++]=Vb}var eb=this.Ga;if(null!=ka){ka.O();if(eb.c==eb.b.length){for(var Y=Array(eb.c<<1),Ma=0,lb=eb.c;Ma<lb;){var Ta=Ma++;Y[Ta]=eb.b[Ta];eb.b[Ta]=null}eb.b=Y}eb.b[eb.c++]=ka}var ib=this.Ga;if(null!=U){U.e00=1;U.e01=0;U.e02=0;U.e10=0;U.e11=1;U.e12=0;U.e20=0;U.e21=0;U.e22=1;if(ib.pb==ib.nb.length){for(var Ka=Array(ib.pb<<1),Jb=0,Ca=ib.pb;Jb<Ca;){var X=Jb++;Ka[X]=ib.nb[X];ib.nb[X]=null}ib.nb=Ka}ib.nb[ib.pb++]=U}var Cb=this.Ga;if(null!=lc){lc.O();if(Cb.c==Cb.b.length){for(var hd=Array(Cb.c<<1),Cc=0,za=Cb.c;Cc<za;){var ec=Cc++;hd[ec]=Cb.b[ec];Cb.b[ec]=null}Cb.b=hd}Cb.b[Cb.c++]=lc}}}if(a.drawAabbs){var qd=h.u,wa=b.aabbColor,Da=this.Ga,xc=0==Da.c?new t:Da.b[--Da.c],ab=this.Ga,jc=0==ab.c?new t:ab.b[--ab.c],pc=xc;pc.x=qd.ma;pc.y=qd.na;pc.z=qd.oa;var kc=jc;kc.x=qd.ja;kc.y=qd.ka;kc.z=qd.la;a.Pk(xc,jc,wa);var ac=this.Ga;if(null!=xc){xc.O();if(ac.c==ac.b.length){for(var Wb=Array(ac.c<<1),Xb=0,Rb=ac.c;Xb<Rb;){var fc=Xb++;Wb[fc]=ac.b[fc];ac.b[fc]=null}ac.b=Wb}ac.b[ac.c++]=xc}var Sb=this.Ga;if(null!=jc){jc.O();if(Sb.c==Sb.b.length){for(var Ob=Array(Sb.c<<1),Yb=0,gc=Sb.c;Yb<gc;){var Ib=Yb++;Ob[Ib]=Sb.b[Ib];Sb.b[Ib]=null}Sb.b=Ob}Sb.b[Sb.c++]=jc}}h=l}e=d}},Nm:function(a){if(a.drawPairs||a.drawContacts)for(var b=this.wh.vd;null!=b;){var e=b.M;if(a.drawPairs){var d=this.Ga,c=0==d.c?new t:d.b[--d.c],f=this.Ga,h=0==f.c?new t:f.b[--f.c],l=c;l.x=b.uc.a.v;l.y=b.uc.a.A;l.z=b.uc.a.B;var g=h;g.x=b.vc.a.v;g.y=b.vc.a.A;g.z=b.vc.a.B;var k=this.Ga;if(null!=c){c.O();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=c}var r=this.Ga;if(null!=h){h.O();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var A=aa++;v[A]=r.b[A];r.b[A]=null}r.b=v}r.b[r.c++]=h}}if(a.drawContacts)for(var u=b.Ke,D=b.Ke.Ja.tc,V=0,z=b.Ke.Ja.Xd;V<z;){var E=V++,x=D[E],zb=a.style,N=this.Ga,G=0==N.c?new t:N.b[--N.c],F=this.Ga,C=0==F.c?new t:F.b[--F.c],L=this.Ga,ha=0==L.c?new t:L.b[--L.c],O=this.Ga,M=0==O.c?new t:O.b[--O.c],ga=this.Ga,ka=0==ga.c?new t:ga.b[--ga.c],bb=G;bb.x=x.Fd;bb.y=x.Gd;bb.z=x.Hd;var U=C;U.x=x.Id;U.y=x.Jd;U.z=x.Kd;var R=ha;R.x=u.Ja.mg;R.y=u.Ja.ng;R.z=u.Ja.og;var lc=M;lc.x=u.Ja.Xi;lc.y=u.Ja.Yi;lc.z=u.Ja.Zi;var Na=ka;Na.x=u.Ja.Gi;Na.y=u.Ja.Hi;Na.z=u.Ja.Ii;C.x=G.x;C.y=G.y;C.z=G.z;var Ra=C,yc=zb.contactNormalLength,Pa=Ra.y+ha.y*yc,Ba=Ra.z+ha.z*yc;Ra.x=Ra.x+ha.x*yc;Ra.y=Pa;Ra.z=Ba;if(a.drawContactBases){C.x=G.x;C.y=G.y;C.z=G.z;var Hb=C,J=zb.contactTangentLength,Qa=Hb.y+M.y*J,ba=Hb.z+M.z*J;Hb.x=Hb.x+M.x*J;Hb.y=Qa;Hb.z=ba;C.x=G.x;C.y=G.y;C.z=G.z;var Q=C,P=zb.contactBinormalLength,xa=Q.y+ka.y*P,ta=Q.z+ka.z*P;Q.x=Q.x+ka.x*P;Q.y=xa;Q.z=ta}var W=this.Ga;if(null!=G){G.O();if(W.c==W.b.length){for(var pa=Array(W.c<<1),y=0,Ia=W.c;y<Ia;){var ca=y++;pa[ca]=W.b[ca];W.b[ca]=null}W.b=pa}W.b[W.c++]=G}var Ea=this.Ga;if(null!=C){C.O();if(Ea.c==Ea.b.length){for(var ya=Array(Ea.c<<1),Fa=0,Sa=Ea.c;Fa<Sa;){var la=Fa++;ya[la]=Ea.b[la];Ea.b[la]=null}Ea.b=ya}Ea.b[Ea.c++]=C}var Z=this.Ga;if(null!=ha){ha.O();if(Z.c==Z.b.length){for(var Ga=Array(Z.c<<1),ra=0,va=Z.c;ra<va;){var I=ra++;Ga[I]=Z.b[I];Z.b[I]=null}Z.b=Ga}Z.b[Z.c++]=ha}var La=this.Ga;if(null!=M){M.O();if(La.c==La.b.length){for(var Wa=Array(La.c<<1),S=0,Xa=La.c;S<Xa;){var T=S++;Wa[T]=La.b[T];La.b[T]=null}La.b=Wa}La.b[La.c++]=M}var K=this.Ga;if(null!=ka){ka.O();if(K.c==K.b.length){for(var ia=Array(K.c<<1),gb=0,da=K.c;gb<da;){var na=gb++;ia[na]=K.b[na];K.b[na]=null}K.b=ia}K.b[K.c++]=ka}}b=e}if(a.drawJoints)for(var sa=this.Kh;null!=sa;){var fb=sa.M,kb=this.Ga,Ya=0==kb.c?new t:kb.b[--kb.c],ma=this.Ga,oa=0==ma.c?new t:ma.b[--ma.c],Ja=Ya;Ja.x=sa.C.a.v;Ja.y=sa.C.a.A;Ja.z=sa.C.a.B;var Ha=oa;Ha.x=sa.D.a.v;Ha.y=sa.D.a.A;Ha.z=sa.D.a.B;var ob=this.Ga,fa=0==ob.c?new t:ob.b[--ob.c],ea=this.Ga,ja=0==ea.c?new t:ea.b[--ea.c],cb=this.Ga,Aa=0==cb.c?new t:cb.b[--cb.c],sb=this.Ga,Ua=0==sb.c?new t:sb.b[--sb.c],qb=this.Ga,rb=0==qb.c?new t:qb.b[--qb.c],ub=this.Ga,Va=0==ub.c?new t:ub.b[--ub.c],xb=this.Ga,rc=0==xb.c?new t:xb.b[--xb.c],Za=this.Ga,ua=0==Za.c?new t:Za.b[--Za.c],Qb=fa;Qb.x=sa.Df;Qb.y=sa.Ef;Qb.z=sa.Ff;var H=ja;H.x=sa.Gf;H.y=sa.Hf;H.z=sa.If;var pb=Aa;pb.x=sa.ub;pb.y=sa.vb;pb.z=sa.wb;var db=Ua;db.x=sa.xe;db.y=sa.ye;db.z=sa.ze;var oc=rb;oc.x=sa.th;oc.y=sa.uh;oc.z=sa.vh;var $a=Va;$a.x=sa.Yb;$a.y=sa.Zb;$a.z=sa.$b;var hb=rc;hb.x=sa.ne;hb.y=sa.oe;hb.z=sa.pe;var B=ua;B.x=sa.Rg;B.y=sa.Sg;B.z=sa.Tg;if(a.drawJointLimits)switch(sa.Wb){case 1:var Db=sa.Lh;this.Ni(a,fa,Ua,rb,rc,a.style.jointRotationalConstraintRadius,Db.lowerLimit,Db.upperLimit,a.style.jointLineColor);break;case 2:var qa=sa,Tc=a.style.jointLineColor,Fb=qa.Dk,Oa=qa.Kk;this.Ni(a,ja,Ua,rb,rc,a.style.jointRotationalConstraintRadius,Fb.lowerLimit,Fb.upperLimit,Tc);this.El(a,fa,Aa,Oa.lowerLimit,Oa.upperLimit,Tc);break;case 3:var nb=sa.Lh;this.El(a,fa,Aa,nb.lowerLimit,nb.upperLimit,a.style.jointLineColor);break;case 4:var vb=sa,yb=a.style.jointRotationalConstraintRadius,eb=a.style.jointLineColor,Y=vb.xk,Ma=vb.yk;this.Ni(a,fa,Ua,rb,Ua,yb,vb.yi-Y.upperLimit,vb.yi-Y.lowerLimit,eb);this.Ni(a,ja,Va,rc,Va,yb,Ma.lowerLimit-vb.zi,Ma.upperLimit-vb.zi,eb);break;case 5:var lb=sa,Ta=a.style.jointRotationalConstraintRadius,ib=a.style.jointLineColor,Ka=lb.Mk;this.Ni(a,ja,rc,ua,rc,Ta,Ka.lowerLimit-lb.ej,Ka.upperLimit-lb.ej,ib);this.Om(a,fa,Aa,Ua,rb,lb.Jj,lb.Kj,Ta,ib);var Jb=this.Ga,Ca=0==Jb.c?new t:Jb.b[--Jb.c];Ca.x=ja.x;Ca.y=ja.y;Ca.z=ja.z;var X=Ca,Cb=X.y+Va.y*Ta,hd=X.z+Va.z*Ta;X.x=X.x+Va.x*Ta;X.y=Cb;X.z=hd;var Cc=X,za=this.Ga;if(null!=Cc){Cc.O();if(za.c==za.b.length){for(var ec=Array(za.c<<1),qd=0,wa=za.c;qd<wa;){var Da=qd++;ec[Da]=za.b[Da];za.b[Da]=null}za.b=ec}za.b[za.c++]=Cc}}var xc=this.Ga;if(null!=Ya){Ya.O();if(xc.c==xc.b.length){for(var ab=Array(xc.c<<1),jc=0,pc=xc.c;jc<pc;){var kc=jc++;ab[kc]=xc.b[kc];xc.b[kc]=null}xc.b=ab}xc.b[xc.c++]=Ya}var ac=this.Ga;if(null!=oa){oa.O();if(ac.c==ac.b.length){for(var Wb=Array(ac.c<<1),Xb=0,Rb=ac.c;Xb<Rb;){var fc=Xb++;Wb[fc]=ac.b[fc];ac.b[fc]=null}ac.b=Wb}ac.b[ac.c++]=oa}var Sb=this.Ga;if(null!=fa){fa.O();if(Sb.c==Sb.b.length){for(var Ob=Array(Sb.c<<1),Yb=0,gc=Sb.c;Yb<gc;){var Ib=Yb++;Ob[Ib]=Sb.b[Ib];Sb.b[Ib]=null}Sb.b=Ob}Sb.b[Sb.c++]=fa}var $b=this.Ga;if(null!=ja){ja.O();if($b.c==$b.b.length){for(var mb=Array($b.c<<1),tb=0,Gb=$b.c;tb<Gb;){var wb=tb++;mb[wb]=$b.b[wb];$b.b[wb]=null}$b.b=mb}$b.b[$b.c++]=ja}var qc=this.Ga;if(null!=Aa){Aa.O();if(qc.c==qc.b.length){for(var mc=Array(qc.c<<1),id=0,Ic=qc.c;id<Ic;){var jb=id++;mc[jb]=qc.b[jb];qc.b[jb]=null}qc.b=mc}qc.b[qc.c++]=Aa}var sc=this.Ga;if(null!=Ua){Ua.O();if(sc.c==sc.b.length){for(var vc=Array(sc.c<<1),Tb=0,Mb=sc.c;Tb<Mb;){var Eb=Tb++;vc[Eb]=sc.b[Eb];sc.b[Eb]=null}sc.b=vc}sc.b[sc.c++]=Ua}var yd=this.Ga;if(null!=rb){rb.O();if(yd.c==yd.b.length){for(var Fc=Array(yd.c<<1),Bb=0,ic=yd.c;Bb<ic;){var Ub=Bb++;Fc[Ub]=yd.b[Ub];yd.b[Ub]=null}yd.b=Fc}yd.b[yd.c++]=rb}var Id=this.Ga;if(null!=Va){Va.O();if(Id.c==Id.b.length){for(var dc=Array(Id.c<<1),Lb=0,hc=Id.c;Lb<hc;){var Zb=Lb++;dc[Zb]=Id.b[Zb];Id.b[Zb]=null}Id.b=dc}Id.b[Id.c++]=Va}var zc=this.Ga;if(null!=rc){rc.O();if(zc.c==zc.b.length){for(var Ab=Array(zc.c<<1),uc=0,nc=zc.c;uc<nc;){var Kb=uc++;Ab[Kb]=zc.b[Kb];zc.b[Kb]=null}zc.b=Ab}zc.b[zc.c++]=rc}var Qc=this.Ga;if(null!=ua){ua.O();if(Qc.c==Qc.b.length){for(var tc=Array(Qc.c<<1),Nb=0,Ac=Qc.c;Nb<Ac;){var Pb=Nb++;tc[Pb]=Qc.b[Pb];Qc.b[Pb]=null}Qc.b=tc}Qc.b[Qc.c++]=ua}sa=fb}},Ni:function(a,b,e,d,c,f,h,l,g){if(h!=l){var k=this.Ga,k=0==k.c?new t:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;var m=k.y+c.y*f,n=k.z+c.z*f;k.x+=c.x*f;k.y=m;k.z=n;c=this.Ga;if(null!=k){k.O();if(c.c==c.b.length){for(var m=Array(c.c<<1),n=0,q=c.c;n<q;){var p=n++;m[p]=c.b[p];c.b[p]=null}c.b=m}c.b[c.c++]=k}}h>l?a.ellipse(b,e,d,f,f,g):a.arc(b,e,d,f,f,h,l,!0,g)},El:function(a,b,e,d,c){if(d<c){a=this.Ga;a=0==a.c?new t:a.b[--a.c];a.x=b.x;a.y=b.y;a.z=b.z;var f=a.y+e.y*d,h=a.z+e.z*d;a.x+=e.x*d;a.y=f;a.z=h;d=this.Ga;d=0==d.c?new t:d.b[--d.c];d.x=b.x;d.y=b.y;d.z=b.z;b=d.y+e.y*c;f=d.z+e.z*c;d.x+=e.x*c;d.y=b;d.z=f;e=this.Ga;if(null!=a){a.O();if(e.c==e.b.length){c=Array(e.c<<1);b=0;for(f=e.c;b<f;)h=b++,c[h]=e.b[h],e.b[h]=null;e.b=c}e.b[e.c++]=a}a=this.Ga;if(null!=d){d.O();if(a.c==a.b.length){e=Array(a.c<<1);c=0;for(b=a.c;c<b;)f=c++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=d}}},Om:function(a,b,e,d,c,f,h,l){var g=0;a=this.Ga;var k=0==a.c?new t:a.b[--a.c];a=this.Ga;var m=0==a.$d?new ga:a.Td[--a.$d];a=this.Ga;var n=0==a.pb?new O:a.nb[--a.pb];a=this.Ga;a=0==a.c?new t:a.b[--a.c];for(var q=0;17>q;){q++;var p=Math.cos(g)*f,r=Math.sin(g)*h,v=Math.sqrt(p*p+r*r),aa=Math.sin(.5*v),w=Math.cos(.5*v),A=k.O(),u=A.y+d.y*p,D=A.z+d.z*p;A.x=A.x+d.x*p;A.y=u;A.z=D;p=A;A=p.y+c.y*r;u=p.z+c.z*r;p.x=p.x+c.x*r;p.y=A;p.z=u;r=1/v*aa;v=k.y*r;aa=k.z*r;k.x=k.x*r;k.y=v;k.z=aa;m.x=k.x;m.y=k.y;m.z=k.z;m.w=w;var V=m.x,D=m.y,p=m.z,v=m.w,z=2*V,u=2*D,aa=2*p,w=V*z,r=D*u,p=p*aa,A=V*u,D=D*aa,V=V*aa,z=v*z,u=v*u,v=v*aa;n.e00=1-r-p;n.e01=A-v;n.e02=V+u;n.e10=A+v;n.e11=1-w-p;n.e12=D-z;n.e20=V-u;n.e21=D+z;n.e22=1-w-r;w=this.Ga;w=0==w.c?new t:w.b[--w.c];r=w.y+e.y*l;v=w.z+e.z*l;w.x=w.x+e.x*l;w.y=r;w.z=v;r=w.x*n.e10+w.y*n.e11+w.z*n.e12;v=w.x*n.e20+w.y*n.e21+w.z*n.e22;w.x=w.x*n.e00+w.y*n.e01+w.z*n.e02;w.y=r;w.z=v;r=w;v=r.y+b.y;aa=r.z+b.z;r.x=r.x+b.x;r.y=v;r.z=aa;r=this.Ga;if(null!=a){a.O();if(r.c==r.b.length){v=Array(r.c<<1);aa=0;for(p=r.c;aa<p;)A=aa++,v[A]=r.b[A],r.b[A]=null;r.b=v}r.b[r.c++]=a}a=w;g+=.39269908169872375}b=this.Ga;if(null!=k){k.O();if(b.c==b.b.length){e=Array(b.c<<1);d=0;for(c=b.c;d<c;)f=d++,e[f]=b.b[f],b.b[f]=null;b.b=e}b.b[b.c++]=k}k=this.Ga;if(null!=m){m.x=0;m.y=0;m.z=0;m.w=1;if(k.$d==k.Td.length){b=Array(k.$d<<1);e=0;for(d=k.$d;e<d;)c=e++,b[c]=k.Td[c],k.Td[c]=null;k.Td=b}k.Td[k.$d++]=m}m=this.Ga;if(null!=n){n.e00=1;n.e01=0;n.e02=0;n.e10=0;n.e11=1;n.e12=0;n.e20=0;n.e21=0;n.e22=1;if(m.pb==m.nb.length){k=Array(m.pb<<1);b=0;for(e=m.pb;b<e;)d=b++,k[d]=m.nb[d],m.nb[d]=null;m.nb=k}m.nb[m.pb++]=n}n=this.Ga;if(null!=a){a.O();if(n.c==n.b.length){m=Array(n.c<<1);k=0;for(b=n.c;k<b;)e=k++,m[e]=n.b[e],n.b[e]=null;n.b=m}n.b[n.c++]=a}},be:function(a){0<this.Mh.dt&&(this.Mh.dtRatio=a/this.Mh.dt);this.Mh.dt=a;this.Mh.invDt=1/a;a=(new Date).getTime()/1E3;this.Ok();this.Sm();Rc.totalTime=1E3*((new Date).getTime()/1E3-a)},ab:function(a){if(null!=a.kc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.jf?this.jf=a:(this.mi.M=a,a.ia=this.mi);this.mi=a;a.kc=this;for(a=a.Ac;null!=a;){var b=a.M;a.Na=this.dc.Ph(a,a.u);a.sc=this.Jl++;this.pg++;a=b}this.Vi++},ce:function(a){if(a.kc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.jf&&(this.jf=this.jf.M);a==this.mi&&(this.mi=this.mi.ia);a.M=null;a.ia=null;a.kc=null;for(a=a.Ac;null!=a;){b=a.M;this.dc.Qh(a.Na);a.Na=null;a.sc=-1;for(var d=a.Vb.Mb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Mc;d.Fb=!1;d.xb=0;var d=this.wh,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ia);c.M=null;c.ia=null;f=c.qb.ia;h=c.qb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.qb==c.C.Mb&&(c.C.Mb=c.C.Mb.M);c.qb==c.C.ec&&(c.C.ec=c.C.ec.ia);c.qb.M=null;c.qb.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.D.Mb&&(c.D.Mb=c.D.Mb.M);c.rb==c.D.ec&&(c.D.ec=c.D.ec.ia);c.rb.M=null;c.rb.ia=null;c.C.se--;c.D.se--;c.qb.Mc=null;c.rb.Mc=null;c.qb.Ud=null;c.rb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ja.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}this.pg--;a=b}this.Vi--},Pa:function(a){if(null!=a.kc)throw Error("A joint cannot belong to multiple worlds.");null==this.Kh?this.Kh=a:(this.hi.M=a,a.ia=this.hi);this.hi=a;a.kc=this;a.qb.Mc=a.D;a.rb.Mc=a.C;null==a.C.re?a.C.re=a.qb:(a.C.Oe.M=a.qb,a.qb.ia=a.C.Oe);a.C.Oe=a.qb;null==a.D.re?a.D.re=a.rb:(a.D.Oe.M=a.rb,a.rb.ia=a.D.Oe);a.D.Oe=a.rb;a.C.$g++;a.D.$g++;var b=a.C;b.Fb=!1;b.xb=0;b=a.D;b.Fb=!1;b.xb=0;a.ed();this.zk++},sl:function(a){if(a.kc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Kh&&(this.Kh=this.Kh.M);a==this.hi&&(this.hi=this.hi.ia);a.M=null;a.ia=null;a.kc=null;b=a.qb.ia;e=a.qb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.qb==a.C.re&&(a.C.re=a.C.re.M);a.qb==a.C.Oe&&(a.C.Oe=a.C.Oe.ia);a.qb.M=null;a.qb.ia=null;b=a.rb.ia;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.rb==a.D.re&&(a.D.re=a.D.re.M);a.rb==a.D.Oe&&(a.D.Oe=a.D.Oe.ia);a.rb.M=null;a.rb.ia=null;a.qb.Mc=null;a.rb.Mc=null;a.C.$g--;a.D.$g--;b=a.C;b.Fb=!1;b.xb=0;a=a.D;a.Fb=!1;a.xb=0;this.zk--},de:function(a){this.fi=a},mc:function(){return this.fi},sb:function(){null!=this.fi&&(Kc.ab(this.dc,dc)&&this.Mm(this.fi,Kc.lc(this.dc,dc).he),this.Pm(this.fi),this.Nm(this.fi))},Sd:function(a,b,e){var d=this.Oj.gj;d.x=a.x;d.y=a.y;d.z=a.z;d=this.Oj.end;d.x=b.x;d.y=b.y;d.z=b.z;this.Oj.ij=e;this.dc.Sd(a,b,this.Oj)},rf:function(a,b,e,d){this.Mi.Ul=a;var c=this.Mi.gj;c.v=b.v;c.A=b.A;c.B=b.B;c.o=b.o;c.f=b.f;c.h=b.h;c.i=b.i;c.m=b.m;c.j=b.j;c.l=b.l;c.g=b.g;c.s=b.s;c=this.Mi.Vf;c.x=e.x;c.y=e.y;c.z=e.z;this.Mi.ij=d;this.dc.rf(a,b,e,this.Mi)},eh:function(a,b){this.ek.u.Zd(a);this.ek.Bl=b;this.dc.eh(a,this.ek)},cd:function(){return this.jf},rc:function(){return this.Kh},Kb:function(){return this.dc},lc:function(){return this.wh},ad:function(){return this.Vi},Cc:function(){return this.zk},Pd:function(){return this.pg},zc:function(){return this.Mj},bd:function(){return this.Bk},ge:function(a){this.Bk=a},Hc:function(){return this.Ak},fe:function(a){this.Ak=a},qc:function(){return this.lk},ee:function(a){var b=this.lk;b.x=a.x;b.y=a.y;b.z=a.z},qa:qa};Se.R=!0;Se.Jb=Bc;Se.prototype=Gb(Bc.prototype,{td:function(a){a=a.userData;a.Ib.Sd(this.gj,this.end,a.a,this.wi)&&this.ij.td(a,this.wi)},qa:Se});ue.R=!0;ue.Jb=Bc;ue.prototype=Gb(Bc.prototype,{td:function(a){a=a.userData;Kc.ab(a.Ib,Da)&&Zb.Pa.rf(this.Ul,a.Ib,this.gj,a.a,this.Vf,this.O,this.wi)&&this.ij.td(a,this.wi)},qa:ue});pf.R=!0;pf.Jb=Bc;pf.prototype=Gb(Bc.prototype,{td:function(a){a=a.userData;var b=a.u;b.ma<this.u.ja&&b.ja>this.u.ma&&b.na<this.u.ka&&b.ka>this.u.na&&b.oa<this.u.la&&b.la>this.u.oa&&this.Bl.td(a)},qa:pf});cd.R=!0;cd.prototype={td:function(){},qa:cd};Xc.R=!0;Xc.prototype={Pa:function(){},sb:function(){},$e:function(){},ab:function(){},qa:Xc};Mc.R=!0;Mc.prototype={td:function(){},qa:Mc};vd.R=!0;vd.Jb=Mc;vd.prototype=Gb(Mc.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.O();this.normal.O();this.hit=!1},td:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}},qa:vd});Eb.R=!0;Eb.prototype={Pk:function(a,b){var e=this.p,d=(0==e.c?new t:e.b[--e.c]).za(a.x,a.y,a.z),e=this.p,c=(0==e.c?new t:e.b[--e.c]).za(a.x,a.y,b.z),e=this.p,f=(0==e.c?new t:e.b[--e.c]).za(a.x,b.y,a.z),e=this.p,h=(0==e.c?new t:e.b[--e.c]).za(a.x,b.y,b.z),e=this.p,l=(0==e.c?new t:e.b[--e.c]).za(b.x,a.y,a.z),e=this.p,e=(0==e.c?new t:e.b[--e.c]).za(b.x,a.y,b.z),g=this.p;a=(0==g.c?new t:g.b[--g.c]).za(b.x,b.y,a.z);g=this.p;b=(0==g.c?new t:g.b[--g.c]).za(b.x,b.y,b.z);g=this.p;if(null!=d){d.O();if(g.c==g.b.length){for(var k=Array(g.c<<1),m=0,n=g.c;m<n;){var q=m++;k[q]=g.b[q];g.b[q]=null}g.b=k}g.b[g.c++]=d}d=this.p;if(null!=c){c.O();if(d.c==d.b.length){g=Array(d.c<<1);k=0;for(m=d.c;k<m;)n=k++,g[n]=d.b[n],d.b[n]=null;d.b=g}d.b[d.c++]=c}c=this.p;if(null!=f){f.O();if(c.c==c.b.length){d=Array(c.c<<1);g=0;for(k=c.c;g<k;)m=g++,d[m]=c.b[m],c.b[m]=null;c.b=d}c.b[c.c++]=f}f=this.p;if(null!=h){h.O();if(f.c==f.b.length){c=Array(f.c<<1);d=0;for(g=f.c;d<g;)k=d++,c[k]=f.b[k],f.b[k]=null;f.b=c}f.b[f.c++]=h}h=this.p;if(null!=l){l.O();if(h.c==h.b.length){f=Array(h.c<<1);c=0;for(d=h.c;c<d;)g=c++,f[g]=h.b[g],h.b[g]=null;h.b=f}h.b[h.c++]=l}l=this.p;if(null!=e){e.O();if(l.c==l.b.length){h=Array(l.c<<1);f=0;for(c=l.c;f<c;)d=f++,h[d]=l.b[d],l.b[d]=null;l.b=h}l.b[l.c++]=e}e=this.p;if(null!=a){a.O();if(e.c==e.b.length){l=Array(e.c<<1);h=0;for(f=e.c;h<f;)c=h++,l[c]=e.b[c],e.b[c]=null;e.b=l}e.b[e.c++]=a}a=this.p;if(null!=b){b.O();if(a.c==a.b.length){e=Array(a.c<<1);l=0;for(h=a.c;l<h;)f=l++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=b}},ellipse:function(a,b,e,d,c,f){this.arc(a,b,e,d,c,0,6.28318530717958,!1,f)},arc:function(a,b,e,d,c,f,h){var l=this.p,l=0==l.c?new t:l.b[--l.c];l.x=b.x;l.y=b.y;l.z=b.z;b=l.y*d;var g=l.z*d;l.x=l.x*d;l.y=b;l.z=g;b=l;d=this.p;d=0==d.c?new t:d.b[--d.c];d.x=e.x;d.y=e.y;d.z=e.z;e=d.y*c;l=d.z*c;d.x=d.x*c;d.y=e;d.z=l;e=d;c=h-f;0>c&&(c=-c);(l=c/.5235987755982984+.5|0)||(l=1);c=f;f=(h-f)/l;h=this.p;h=0==h.c?new t:h.b[--h.c];h.x=a.x;h.y=a.y;h.z=a.z;d=Math.cos(c);var g=h.y+b.y*d,k=h.z+b.z*d;h.x+=b.x*d;h.y=g;h.z=k;d=Math.sin(c);g=h.y+e.y*d;k=h.z+e.z*d;h.x+=e.x*d;h.y=g;h.z=k;for(d=0;d<l;){d++;c+=f;g=this.p;g=0==g.c?new t:g.b[--g.c];g.x=a.x;g.y=a.y;g.z=a.z;var k=Math.cos(c),m=g.y+b.y*k,n=g.z+b.z*k;g.x=g.x+b.x*k;g.y=m;g.z=n;k=Math.sin(c);m=g.y+e.y*k;n=g.z+e.z*k;g.x=g.x+e.x*k;g.y=m;g.z=n;k=this.p;if(null!=h){h.O();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=h}h=g}a=this.p;if(null!=h){h.O();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(d=a.c;f<d;)l=f++,c[l]=a.b[l],a.b[l]=null;a.b=c}a.b[a.c++]=h}a=this.p;if(null!=b){b.O();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(h=a.c;f<h;)d=f++,c[d]=a.b[d],a.b[d]=null;a.b=c}a.b[a.c++]=b}b=this.p;if(null!=e){e.O();if(b.c==b.b.length){a=Array(b.c<<1);c=0;for(f=b.c;c<f;)h=c++,a[h]=b.b[h],b.b[h]=null;b.b=a}b.b[b.c++]=e}},Tl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.pb?new O:q.nb[--q.pb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var A=this.p,u=0==A.c?new t:A.b[--A.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,z=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=z;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=u.x;x.y=u.y;x.z=u.z;var zb=-b,N=x.y+f.y*zb,G=x.z+f.z*zb;x.x+=f.x*zb;x.y=N;x.z=G;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ha=0==L.c?new t:L.b[--L.c];ha.x=u.x;ha.y=u.y;ha.z=u.z;var M=ha.y+f.y*b,Vb=ha.z+f.z*b;ha.x+=f.x*b;ha.y=M;ha.z=Vb;var ga=ha.y+0*k.y,ka=ha.z+0*k.z;ha.x+=0*k.x;ha.y=ga;ha.z=ka;var bb=this.p,U=0==bb.c?new t:bb.b[--bb.c];U.x=u.x;U.y=u.y;U.z=u.z;var R=U.y+0*f.y,lc=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=lc;var Na=-b,Ra=U.y+k.y*Na,yc=U.z+k.z*Na;U.x+=k.x*Na;U.y=Ra;U.z=yc;var Pa=this.p,Ba=0==Pa.c?new t:Pa.b[--Pa.c];Ba.x=u.x;Ba.y=u.y;Ba.z=u.z;var Hb=Ba.y+0*f.y,J=Ba.z+0*f.z;Ba.x+=0*f.x;Ba.y=Hb;Ba.z=J;var Qa=Ba.y+k.y*b,ba=Ba.z+k.z*b;Ba.x+=k.x*b;Ba.y=Qa;Ba.z=ba;this.ellipse(u,f,k,b,b,d);var Q=this.p;if(null!=x){x.O();if(Q.c==Q.b.length){for(var P=Array(Q.c<<1),xa=0,ta=Q.c;xa<ta;){var W=xa++;P[W]=Q.b[W];Q.b[W]=null}Q.b=P}Q.b[Q.c++]=x}var pa=this.p;if(null!=ha){ha.O();if(pa.c==pa.b.length){for(var y=Array(pa.c<<1),Ia=0,ca=pa.c;Ia<ca;){var Ea=Ia++;y[Ea]=pa.b[Ea];pa.b[Ea]=null}pa.b=y}pa.b[pa.c++]=ha}var ya=this.p;if(null!=U){U.O();if(ya.c==ya.b.length){for(var Fa=Array(ya.c<<1),Sa=0,la=ya.c;Sa<la;){var Z=Sa++;Fa[Z]=ya.b[Z];ya.b[Z]=null}ya.b=Fa}ya.b[ya.c++]=U}var Ga=this.p;if(null!=Ba){Ba.O();if(Ga.c==Ga.b.length){for(var ra=Array(Ga.c<<1),va=0,I=Ga.c;va<I;){var La=va++;ra[La]=Ga.b[La];Ga.b[La]=null}Ga.b=ra}Ga.b[Ga.c++]=Ba}}else{for(var Wa=1/Math.sqrt(b*b+4*e*e),S=2*e*Wa,Xa=b*Wa,T=0;8>T;){var K=T++,ia=this.Af[K],gb=this.jj[K];ia.x=gb.x;ia.y=gb.y;ia.z=gb.z;var da=ia,na=da.y*S,sa=da.z*S;da.x=da.x*S;da.y=na;da.z=sa;da.y+=Xa;var fb=this.Af[K],kb=fb.x*p.e10+fb.y*p.e11+fb.z*p.e12,Ya=fb.x*p.e20+fb.y*p.e21+fb.z*p.e22;fb.x=fb.x*p.e00+fb.y*p.e01+fb.z*p.e02;fb.y=kb;fb.z=Ya;var ma=this.ae[K],oa=this.Sl[K];ma.x=oa.x;ma.y=oa.y;ma.z=oa.z;var Ja=ma,Ha=Ja.y*S,ob=Ja.z*S;Ja.x=Ja.x*S;Ja.y=Ha;Ja.z=ob;Ja.y+=Xa;var fa=this.ae[K],ea=fa.x*p.e10+fa.y*p.e11+fa.z*p.e12,ja=fa.x*p.e20+fa.y*p.e21+fa.z*p.e22;fa.x=fa.x*p.e00+fa.y*p.e01+fa.z*p.e02;fa.y=ea;fa.z=ja;var cb=this.Fe[K],Aa=this.jj[K];cb.x=Aa.x;cb.y=Aa.y;cb.z=Aa.z;var sb=cb,Ua=sb.x*p.e10+sb.y*p.e11+sb.z*p.e12,qb=sb.x*p.e20+sb.y*p.e21+sb.z*p.e22;sb.x=sb.x*p.e00+sb.y*p.e01+sb.z*p.e02;sb.y=Ua;sb.z=qb;var rb=sb,ub=rb.y*b,Va=rb.z*b;rb.x=rb.x*b;rb.y=ub;rb.z=Va;var xb=rb,rc=xb.y+n.y,Za=xb.z+n.z;xb.x=xb.x+n.x;xb.y=rc;xb.z=Za;var ua=this.Fe[K],Qb=-e,H=ua.y+l.y*Qb,pb=ua.z+l.z*Qb;ua.x=ua.x+l.x*Qb;ua.y=H;ua.z=pb}for(var db=0;8>db;){var oc=db++,$a=this.ae[oc],hb=this.p,B=0==hb.c?new t:hb.b[--hb.c];B.x=l.x;B.y=l.y;B.z=l.z;var Db=B,qa=-Db.y,za=-Db.z;Db.x=-Db.x;Db.y=qa;Db.z=za;var $a=Db,Fb=this.p;if(null!=$a){$a.O();if(Fb.c==Fb.b.length){for(var Oa=Array(Fb.c<<1),nb=0,vb=Fb.c;nb<vb;){var yb=nb++;Oa[yb]=Fb.b[yb];Fb.b[yb]=null}Fb.b=Oa}Fb.b[Fb.c++]=$a}}}var eb=this.p;if(null!=v){v.O();if(eb.c==eb.b.length){for(var Y=Array(eb.c<<1),Ma=0,lb=eb.c;Ma<lb;){var Ta=Ma++;Y[Ta]=eb.b[Ta];eb.b[Ta]=null}eb.b=Y}eb.b[eb.c++]=v}var ib=this.p;if(null!=u){u.O();if(ib.c==ib.b.length){for(var Ka=Array(ib.c<<1),Jb=0,Ca=ib.c;Jb<Ca;){var X=Jb++;Ka[X]=ib.b[X];ib.b[X]=null}ib.b=Ka}ib.b[ib.c++]=u}var Cb=this.p;if(null!=n){n.O();if(Cb.c==Cb.b.length){for(var hd=Array(Cb.c<<1),Cc=0,wa=Cb.c;Cc<wa;){var ec=Cc++;hd[ec]=Cb.b[ec];Cb.b[ec]=null}Cb.b=hd}Cb.b[Cb.c++]=n}var Da=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Da.pb==Da.nb.length){for(var ab=Array(Da.pb<<1),wb=0,xc=Da.pb;wb<xc;){var tb=wb++;ab[tb]=Da.nb[tb];Da.nb[tb]=null}Da.nb=ab}Da.nb[Da.pb++]=p}var jc=this.p;if(null!=f){f.O();if(jc.c==jc.b.length){for(var pc=Array(jc.c<<1),kc=0,ac=jc.c;kc<ac;){var Wb=kc++;pc[Wb]=jc.b[Wb];jc.b[Wb]=null}jc.b=pc}jc.b[jc.c++]=f}var Xb=this.p;if(null!=l){l.O();if(Xb.c==Xb.b.length){for(var Rb=Array(Xb.c<<1),fc=0,Sb=Xb.c;fc<Sb;){var Ob=fc++;Rb[Ob]=Xb.b[Ob];Xb.b[Ob]=null}Xb.b=Rb}Xb.b[Xb.c++]=l}var Yb=this.p;if(null!=k){k.O();if(Yb.c==Yb.b.length){for(var gc=Array(Yb.c<<1),Ib=0,$b=Yb.c;Ib<$b;){var mb=Ib++;gc[mb]=Yb.b[mb];Yb.b[mb]=null}Yb.b=gc}Yb.b[Yb.c++]=k}},Wl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.pb?new O:q.nb[--q.pb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var A=this.p,u=0==A.c?new t:A.b[--A.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,z=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=z;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=v.x;x.y=v.y;x.z=v.z;var zb=-b,N=x.y+f.y*zb,G=x.z+f.z*zb;x.x+=f.x*zb;x.y=N;x.z=G;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ha=0==L.c?new t:L.b[--L.c];ha.x=v.x;ha.y=v.y;ha.z=v.z;var M=ha.y+f.y*b,Vb=ha.z+f.z*b;ha.x+=f.x*b;ha.y=M;ha.z=Vb;var ga=ha.y+0*k.y,ka=ha.z+0*k.z;ha.x+=0*k.x;ha.y=ga;ha.z=ka;var bb=this.p,U=0==bb.c?new t:bb.b[--bb.c];U.x=v.x;U.y=v.y;U.z=v.z;var R=U.y+0*f.y,lc=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=lc;var Na=-b,Ra=U.y+k.y*Na,yc=U.z+k.z*Na;U.x+=k.x*Na;U.y=Ra;U.z=yc;var Pa=this.p,Ba=0==Pa.c?new t:Pa.b[--Pa.c];Ba.x=v.x;Ba.y=v.y;Ba.z=v.z;var Hb=Ba.y+0*f.y,J=Ba.z+0*f.z;Ba.x+=0*f.x;Ba.y=Hb;Ba.z=J;var Qa=Ba.y+k.y*b,ba=Ba.z+k.z*b;Ba.x+=k.x*b;Ba.y=Qa;Ba.z=ba;var Q=this.p,P=0==Q.c?new t:Q.b[--Q.c];P.x=u.x;P.y=u.y;P.z=u.z;var xa=-b,ta=P.y+f.y*xa,W=P.z+f.z*xa;P.x+=f.x*xa;P.y=ta;P.z=W;var pa=P.y+0*k.y,y=P.z+0*k.z;P.x+=0*k.x;P.y=pa;P.z=y;var Ia=this.p,ca=0==Ia.c?new t:Ia.b[--Ia.c];ca.x=u.x;ca.y=u.y;ca.z=u.z;var Ea=ca.y+f.y*b,ya=ca.z+f.z*b;ca.x+=f.x*b;ca.y=Ea;ca.z=ya;var Fa=ca.y+0*k.y,Sa=ca.z+0*k.z;ca.x+=0*k.x;ca.y=Fa;ca.z=Sa;var la=this.p,Z=0==la.c?new t:la.b[--la.c];Z.x=u.x;Z.y=u.y;Z.z=u.z;var Ga=Z.y+0*f.y,ra=Z.z+0*f.z;Z.x+=0*f.x;Z.y=Ga;Z.z=ra;var va=-b,I=Z.y+k.y*va,La=Z.z+k.z*va;Z.x+=k.x*va;Z.y=I;Z.z=La;var Wa=this.p,S=0==Wa.c?new t:Wa.b[--Wa.c];S.x=u.x;S.y=u.y;S.z=u.z;var Xa=S.y+0*f.y,T=S.z+0*f.z;S.x+=0*f.x;S.y=Xa;S.z=T;var K=S.y+k.y*b,ia=S.z+k.z*b;S.x+=k.x*b;S.y=K;S.z=ia;this.ellipse(v,f,k,b,b,d);this.ellipse(u,f,k,b,b,d);var gb=this.p;if(null!=x){x.O();if(gb.c==gb.b.length){for(var da=Array(gb.c<<1),na=0,sa=gb.c;na<sa;){var fb=na++;da[fb]=gb.b[fb];gb.b[fb]=null}gb.b=da}gb.b[gb.c++]=x}var kb=this.p;if(null!=ha){ha.O();if(kb.c==kb.b.length){for(var Ya=Array(kb.c<<1),ma=0,oa=kb.c;ma<oa;){var Ja=ma++;Ya[Ja]=kb.b[Ja];kb.b[Ja]=null}kb.b=Ya}kb.b[kb.c++]=ha}var Ha=this.p;if(null!=U){U.O();if(Ha.c==Ha.b.length){for(var ob=Array(Ha.c<<1),fa=0,ea=Ha.c;fa<ea;){var ja=fa++;ob[ja]=Ha.b[ja];Ha.b[ja]=null}Ha.b=ob}Ha.b[Ha.c++]=U}var cb=this.p;if(null!=Ba){Ba.O();if(cb.c==cb.b.length){for(var Aa=Array(cb.c<<1),sb=0,Ua=cb.c;sb<Ua;){var qb=sb++;Aa[qb]=cb.b[qb];cb.b[qb]=null}cb.b=Aa}cb.b[cb.c++]=Ba}var rb=this.p;if(null!=P){P.O();if(rb.c==rb.b.length){for(var ub=Array(rb.c<<1),Va=0,xb=rb.c;Va<xb;){var rc=Va++;ub[rc]=rb.b[rc];rb.b[rc]=null}rb.b=ub}rb.b[rb.c++]=P}var Za=this.p;if(null!=ca){ca.O();if(Za.c==Za.b.length){for(var ua=Array(Za.c<<1),Qb=0,H=Za.c;Qb<H;){var pb=Qb++;ua[pb]=Za.b[pb];Za.b[pb]=null}Za.b=ua}Za.b[Za.c++]=ca}var db=this.p;if(null!=Z){Z.O();if(db.c==db.b.length){for(var oc=Array(db.c<<1),$a=0,hb=db.c;$a<hb;){var B=$a++;oc[B]=db.b[B];db.b[B]=null}db.b=oc}db.b[db.c++]=Z}var Db=this.p;if(null!=S){S.O();if(Db.c==Db.b.length){for(var qa=Array(Db.c<<1),za=0,Fb=Db.c;za<Fb;){var Oa=za++;qa[Oa]=Db.b[Oa];Db.b[Oa]=null}Db.b=qa}Db.b[Db.c++]=S}}else{for(var nb=0;8>nb;){var vb=nb++,yb=this.Af[vb],eb=this.jj[vb];yb.x=eb.x;yb.y=eb.y;yb.z=eb.z;var Y=yb,Ma=Y.x*p.e10+Y.y*p.e11+Y.z*p.e12,lb=Y.x*p.e20+Y.y*p.e21+Y.z*p.e22;Y.x=Y.x*p.e00+Y.y*p.e01+Y.z*p.e02;Y.y=Ma;Y.z=lb;var Ta=this.ae[vb],ib=this.Af[vb];Ta.x=ib.x;Ta.y=ib.y;Ta.z=ib.z;var Ka=Ta,Jb=Ka.y*b,Ca=Ka.z*b;Ka.x=Ka.x*b;Ka.y=Jb;Ka.z=Ca;var X=Ka,Cb=X.y+n.y,Da=X.z+n.z;X.x=X.x+n.x;X.y=Cb;X.z=Da;var Cc=this.Fe[vb],wa=this.ae[vb];Cc.x=wa.x;Cc.y=wa.y;Cc.z=wa.z;var ec=this.ae[vb],ab=ec.y+l.y*e,tb=ec.z+l.z*e;ec.x=ec.x+l.x*e;ec.y=ab;ec.z=tb;var wb=this.Fe[vb],xc=-e,Gb=wb.y+l.y*xc,jc=wb.z+l.z*xc;wb.x=wb.x+l.x*xc;wb.y=Gb;wb.z=jc}for(var pc=0;8>pc;){var kc=pc++,ac=v,Wb=this.ae[kc],Xb=this.ae[(kc+1)%8],Rb=l,ac=u,Wb=this.Fe[(kc+1)%8],Xb=this.Fe[kc],fc=this.p,Sb=0==fc.c?new t:fc.b[--fc.c];Sb.x=l.x;Sb.y=l.y;Sb.z=l.z;var Ob=Sb,Yb=-Ob.y,gc=-Ob.z;Ob.x=-Ob.x;Ob.y=Yb;Ob.z=gc;var Rb=Ob,Ib=this.p;if(null!=Rb){Rb.O();if(Ib.c==Ib.b.length){for(var $b=Array(Ib.c<<1),mb=0,jb=Ib.c;mb<jb;){var Eb=mb++;$b[Eb]=Ib.b[Eb];Ib.b[Eb]=null}Ib.b=$b}Ib.b[Ib.c++]=Rb}var ac=this.ae[kc],Wb=this.Fe[kc],Xb=this.Fe[(kc+1)%8],Tb=this.ae[(kc+1)%8],Rb=this.Af[kc],qc=this.Af[(kc+1)%8];this.rect(ac,Wb,Xb,Tb,Rb,Rb,qc,qc,d)}}var mc=this.p;if(null!=v){v.O();if(mc.c==mc.b.length){for(var id=Array(mc.c<<1),Ic=0,Mb=mc.c;Ic<Mb;){var sc=Ic++;id[sc]=mc.b[sc];mc.b[sc]=null}mc.b=id}mc.b[mc.c++]=v}var vc=this.p;if(null!=u){u.O();if(vc.c==vc.b.length){for(var Ub=Array(vc.c<<1),Bb=0,dc=vc.c;Bb<dc;){var Zb=Bb++;Ub[Zb]=vc.b[Zb];vc.b[Zb]=null}vc.b=Ub}vc.b[vc.c++]=u}var Fc=this.p;if(null!=n){n.O();if(Fc.c==Fc.b.length){for(var Lb=Array(Fc.c<<1),ic=0,Kb=Fc.c;ic<Kb;){var hc=ic++;Lb[hc]=Fc.b[hc];Fc.b[hc]=null}Fc.b=Lb}Fc.b[Fc.c++]=n}var Ab=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Ab.pb==Ab.nb.length){for(var uc=Array(Ab.pb<<1),nc=0,tc=Ab.pb;nc<tc;){var zc=nc++;uc[zc]=Ab.nb[zc];Ab.nb[zc]=null}Ab.nb=uc}Ab.nb[Ab.pb++]=p}var Pb=this.p;if(null!=f){f.O();if(Pb.c==Pb.b.length){for(var Nb=Array(Pb.c<<1),Ac=0,Kc=Pb.c;Ac<Kc;){var Qc=Ac++;Nb[Qc]=Pb.b[Qc];Pb.b[Qc]=null}Pb.b=Nb}Pb.b[Pb.c++]=f}var cc=this.p;if(null!=l){l.O();if(cc.c==cc.b.length){for(var Ec=Array(cc.c<<1),Gc=0,Bc=cc.c;Gc<Bc;){var bc=Gc++;Ec[bc]=cc.b[bc];cc.b[bc]=null}cc.b=Ec}cc.b[cc.c++]=l}var wc=this.p;if(null!=k){k.O();if(wc.c==wc.b.length){for(var Nc=Array(wc.c<<1),Jc=0,Pc=wc.c;Jc<Pc;){var Dc=Jc++;Nc[Dc]=wc.b[Dc];wc.b[Dc]=null}wc.b=Nc}wc.b[wc.c++]=k}},Rl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.pb?new O:q.nb[--q.pb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);for(var r=this.rh,v=this.dk,aa=0;5>aa;)for(var w=aa++,A=0,u=this.rh[w].length;A<u;){var D=A++,V=v[w][D],z=this.bk[w][D];V.x=z.x;V.y=z.y;V.z=z.z;var E=V,x=E.x*p.e10+E.y*p.e11+E.z*p.e12,zb=E.x*p.e20+E.y*p.e21+E.z*p.e22;E.x=E.x*p.e00+E.y*p.e01+E.z*p.e02;E.y=x;E.z=zb}for(var N=0;4>N;){var G=N++;if(!G)for(var F=0;3>F;)for(var C=F++,L=0,M=this.rh[C].length;L<M;){var na=L++,Vb=r[C][na],ga=v[C][na];Vb.x=ga.x;Vb.y=ga.y;Vb.z=ga.z;var ka=Vb,bb=ka.y*b,U=ka.z*b;ka.x=ka.x*b;ka.y=bb;ka.z=U;var R=ka,lc=R.y+n.y,Na=R.z+n.z;R.x=R.x+n.x;R.y=lc;R.z=Na;var Ra=R,yc=Ra.y+l.y*e,Pa=Ra.z+l.z*e;Ra.x=Ra.x+l.x*e;Ra.y=yc;Ra.z=Pa}if(2==G)for(var Ba=2;5>Ba;)for(var Hb=Ba++,J=0,Qa=this.rh[Hb].length;J<Qa;){var ba=J++,Q=r[Hb][ba],P=v[Hb][ba];Q.x=P.x;Q.y=P.y;Q.z=P.z;var xa=Q,ta=xa.y*b,W=xa.z*b;xa.x=xa.x*b;xa.y=ta;xa.z=W;var pa=xa,y=pa.y+n.y,Ia=pa.z+n.z;pa.x=pa.x+n.x;pa.y=y;pa.z=Ia;var ca=pa,Ea=-e,ya=ca.y+l.y*Ea,Fa=ca.z+l.z*Ea;ca.x=ca.x+l.x*Ea;ca.y=ya;ca.z=Fa}for(var Sa=0;8>Sa;){var la=Sa++,Z,Ga,ra,va,I,La,Wa,S;G?3==G?this.wireframe?(Z=r[4][0],Ga=r[G][(la+1)%8],ra=r[G][la]):(Z=r[4][0],Ga=r[G][(la+1)%8],ra=r[G][la],I=v[4][0],La=v[G][(la+1)%8],Wa=v[G][la]):this.wireframe?(Z=r[G][la],Ga=r[G][(la+1)%8],ra=r[G+1][la]):(Z=r[G][la],Ga=r[G][(la+1)%8],ra=r[G+1][la],va=r[G+1][(la+1)%8],I=v[G][la],La=v[G][(la+1)%8],Wa=v[G+1][la],S=v[G+1][(la+1)%8],this.rect(Z,ra,va,Ga,I,Wa,S,La,d)):this.wireframe?(Z=r[0][0],Ga=r[1][la]):(Z=r[0][0],Ga=r[1][la],ra=r[1][(la+1)%8],I=v[0][0],La=v[1][la],Wa=v[1][(la+1)%8])}}var Xa=this.p,T=0==Xa.c?new t:Xa.b[--Xa.c];T.x=n.x;T.y=n.y;T.z=n.z;var K=T.y+l.y*e,ia=T.z+l.z*e;T.x+=l.x*e;T.y=K;T.z=ia;var gb=this.p,da=0==gb.c?new t:gb.b[--gb.c];da.x=n.x;da.y=n.y;da.z=n.z;var qa=-e,sa=da.y+l.y*qa,fb=da.z+l.z*qa;da.x+=l.x*qa;da.y=sa;da.z=fb;if(this.wireframe){var kb=this.p,Ya=0==kb.c?new t:kb.b[--kb.c];Ya.x=T.x;Ya.y=T.y;Ya.z=T.z;var ma=-b,oa=Ya.y+f.y*ma,Ja=Ya.z+f.z*ma;Ya.x+=f.x*ma;Ya.y=oa;Ya.z=Ja;var Ha=Ya.y+0*k.y,ob=Ya.z+0*k.z;Ya.x+=0*k.x;Ya.y=Ha;Ya.z=ob;var fa=this.p,ea=0==fa.c?new t:fa.b[--fa.c];ea.x=T.x;ea.y=T.y;ea.z=T.z;var ja=ea.y+f.y*b,cb=ea.z+f.z*b;ea.x+=f.x*b;ea.y=ja;ea.z=cb;var Aa=ea.y+0*k.y,sb=ea.z+0*k.z;ea.x+=0*k.x;ea.y=Aa;ea.z=sb;var Ua=this.p,qb=0==Ua.c?new t:Ua.b[--Ua.c];qb.x=T.x;qb.y=T.y;qb.z=T.z;var rb=qb.y+0*f.y,ub=qb.z+0*f.z;qb.x+=0*f.x;qb.y=rb;qb.z=ub;var Va=-b,xb=qb.y+k.y*Va,rc=qb.z+k.z*Va;qb.x+=k.x*Va;qb.y=xb;qb.z=rc;var Za=this.p,ua=0==Za.c?new t:Za.b[--Za.c];ua.x=T.x;ua.y=T.y;ua.z=T.z;var Qb=ua.y+0*f.y,H=ua.z+0*f.z;ua.x+=0*f.x;ua.y=Qb;ua.z=H;var pb=ua.y+k.y*b,db=ua.z+k.z*b;ua.x+=k.x*b;ua.y=pb;ua.z=db;var oc=this.p,$a=0==oc.c?new t:oc.b[--oc.c];$a.x=da.x;$a.y=da.y;$a.z=da.z;var hb=-b,B=$a.y+f.y*hb,Db=$a.z+f.z*hb;$a.x+=f.x*hb;$a.y=B;$a.z=Db;var za=$a.y+0*k.y,Ca=$a.z+0*k.z;$a.x+=0*k.x;$a.y=za;$a.z=Ca;var Fb=this.p,Oa=0==Fb.c?new t:Fb.b[--Fb.c];Oa.x=da.x;Oa.y=da.y;Oa.z=da.z;var nb=Oa.y+f.y*b,vb=Oa.z+f.z*b;Oa.x+=f.x*b;Oa.y=nb;Oa.z=vb;var yb=Oa.y+0*k.y,eb=Oa.z+0*k.z;Oa.x+=0*k.x;Oa.y=yb;Oa.z=eb;var Y=this.p,Ma=0==Y.c?new t:Y.b[--Y.c];Ma.x=da.x;Ma.y=da.y;Ma.z=da.z;var lb=Ma.y+0*f.y,Ta=Ma.z+0*f.z;Ma.x+=0*f.x;Ma.y=lb;Ma.z=Ta;var ib=-b,Ka=Ma.y+k.y*ib,Jb=Ma.z+k.z*ib;Ma.x+=k.x*ib;Ma.y=Ka;Ma.z=Jb;var Da=this.p,X=0==Da.c?new t:Da.b[--Da.c];X.x=da.x;X.y=da.y;X.z=da.z;var Cb=X.y+0*f.y,wa=X.z+0*f.z;X.x+=0*f.x;X.y=Cb;X.z=wa;var Cc=X.y+k.y*b,wb=X.z+k.z*b;X.x+=k.x*b;X.y=Cc;X.z=wb;this.ellipse(T,f,k,b,b,d);this.ellipse(da,f,k,b,b,d);var ec=this.p;if(null!=Ya){Ya.O();if(ec.c==ec.b.length){for(var ab=Array(ec.c<<1),tb=0,Gb=ec.c;tb<Gb;){var xc=tb++;ab[xc]=ec.b[xc];ec.b[xc]=null}ec.b=ab}ec.b[ec.c++]=Ya}var jb=this.p;if(null!=ea){ea.O();if(jb.c==jb.b.length){for(var jc=Array(jb.c<<1),pc=0,kc=jb.c;pc<kc;){var ac=pc++;jc[ac]=jb.b[ac];jb.b[ac]=null}jb.b=jc}jb.b[jb.c++]=ea}var Wb=this.p;if(null!=qb){qb.O();if(Wb.c==Wb.b.length){for(var Xb=Array(Wb.c<<1),Rb=0,fc=Wb.c;Rb<fc;){var Sb=Rb++;Xb[Sb]=Wb.b[Sb];Wb.b[Sb]=null}Wb.b=Xb}Wb.b[Wb.c++]=qb}var Ob=this.p;if(null!=ua){ua.O();if(Ob.c==Ob.b.length){for(var Yb=Array(Ob.c<<1),gc=0,Ib=Ob.c;gc<Ib;){var $b=gc++;Yb[$b]=Ob.b[$b];Ob.b[$b]=null}Ob.b=Yb}Ob.b[Ob.c++]=ua}var mb=this.p;if(null!=$a){$a.O();if(mb.c==mb.b.length){for(var Eb=Array(mb.c<<1),Ab=0,Tb=mb.c;Ab<Tb;){var qc=Ab++;Eb[qc]=mb.b[qc];mb.b[qc]=null}mb.b=Eb}mb.b[mb.c++]=$a}var mc=this.p;if(null!=Oa){Oa.O();if(mc.c==mc.b.length){for(var id=Array(mc.c<<1),Ic=0,Mb=mc.c;Ic<Mb;){var sc=Ic++;id[sc]=mc.b[sc];mc.b[sc]=null}mc.b=id}mc.b[mc.c++]=Oa}var vc=this.p;if(null!=Ma){Ma.O();if(vc.c==vc.b.length){for(var Pb=Array(vc.c<<1),Ub=0,Zb=vc.c;Ub<Zb;){var Bb=Ub++;Pb[Bb]=vc.b[Bb];vc.b[Bb]=null}vc.b=Pb}vc.b[vc.c++]=Ma}var Fc=this.p;if(null!=X){X.O();if(Fc.c==Fc.b.length){for(var Lb=Array(Fc.c<<1),hc=0,ic=Fc.c;hc<ic;){var dc=hc++;Lb[dc]=Fc.b[dc];Fc.b[dc]=null}Fc.b=Lb}Fc.b[Fc.c++]=X}}else{for(var uc=0;8>uc;){var Kb=uc++,cc=this.Af[Kb],nc=this.jj[Kb];cc.x=nc.x;cc.y=nc.y;cc.z=nc.z;var zc=cc,wc=zc.x*p.e10+zc.y*p.e11+zc.z*p.e12,tc=zc.x*p.e20+zc.y*p.e21+zc.z*p.e22;zc.x=zc.x*p.e00+zc.y*p.e01+zc.z*p.e02;zc.y=wc;zc.z=tc;var Nb=this.ae[Kb],Ac=this.Af[Kb];Nb.x=Ac.x;Nb.y=Ac.y;Nb.z=Ac.z;var Qc=Nb,Ec=Qc.y*b,Gc=Qc.z*b;Qc.x=Qc.x*b;Qc.y=Ec;Qc.z=Gc;var bc=Qc,Kc=bc.y+n.y,Nc=bc.z+n.z;bc.x=bc.x+n.x;bc.y=Kc;bc.z=Nc;var Dc=this.Fe[Kb],Jc=this.ae[Kb];Dc.x=Jc.x;Dc.y=Jc.y;Dc.z=Jc.z;var Bc=this.ae[Kb],Pc=Bc.y+l.y*e,Zc=Bc.z+l.z*e;Bc.x=Bc.x+l.x*e;Bc.y=Pc;Bc.z=Zc;var Oc=this.Fe[Kb],Xc=-e,dd=Oc.y+l.y*Xc,ed=Oc.z+l.z*Xc;Oc.x=Oc.x+l.x*Xc;Oc.y=dd;Oc.z=ed}for(var $c=0;8>$c;){var Rc=$c++,cd=this.Af[Rc],rd=this.Af[(Rc+1)%8];this.rect(this.ae[Rc],this.Fe[Rc],this.Fe[(Rc+1)%8],this.ae[(Rc+1)%8],cd,cd,rd,rd,d)}}var Uc=this.p;if(null!=T){T.O();if(Uc.c==Uc.b.length){for(var fd=Array(Uc.c<<1),gd=0,pd=Uc.c;gd<pd;){var bd=gd++;fd[bd]=Uc.b[bd];Uc.b[bd]=null}Uc.b=fd}Uc.b[Uc.c++]=T}var Mc=this.p;if(null!=da){da.O();if(Mc.c==Mc.b.length){for(var md=Array(Mc.c<<1),nd=0,xd=Mc.c;nd<xd;){var ld=nd++;md[ld]=Mc.b[ld];Mc.b[ld]=null}Mc.b=md}Mc.b[Mc.c++]=da}var sd=this.p;if(null!=n){n.O();if(sd.c==sd.b.length){for(var vd=Array(sd.c<<1),wd=0,Gd=sd.c;wd<Gd;){var od=wd++;vd[od]=sd.b[od];sd.b[od]=null}sd.b=vd}sd.b[sd.c++]=n}var Jd=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Jd.pb==Jd.nb.length){for(var Ed=Array(Jd.pb<<1),Fd=0,Nd=Jd.pb;Fd<Nd;){var Dd=Fd++;Ed[Dd]=Jd.nb[Dd];Jd.nb[Dd]=null}Jd.nb=Ed}Jd.nb[Jd.pb++]=p}var Lc=this.p;if(null!=f){f.O();if(Lc.c==Lc.b.length){for(var jd=Array(Lc.c<<1),kd=0,Sd=Lc.c;kd<Sd;){var Hd=kd++;jd[Hd]=Lc.b[Hd];Lc.b[Hd]=null}Lc.b=jd}Lc.b[Lc.c++]=f}var Vc=this.p;if(null!=l){l.O();if(Vc.c==Vc.b.length){for(var Wc=Array(Vc.c<<1),Yc=0,td=Vc.c;Yc<td;){var ad=Yc++;Wc[ad]=Vc.b[ad];Vc.b[ad]=null}Vc.b=Wc}Vc.b[Vc.c++]=l}var Sc=this.p;if(null!=k){k.O();if(Sc.c==Sc.b.length){for(var Qd=Array(Sc.c<<1),Rd=0,Wd=Sc.c;Rd<Wd;){var Kd=Rd++;Qd[Kd]=Sc.b[Kd];Sc.b[Kd]=null}Sc.b=Qd}Sc.b[Sc.c++]=k}},Am:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],d=this.p,d=0==d.pb?new O:d.nb[--d.pb];c.x=a.v;c.y=a.A;c.z=a.B;d.e00=a.o;d.e01=a.f;d.e02=a.h;d.e10=a.i;d.e11=a.m;d.e12=a.j;d.e20=a.l;d.e21=a.g;d.e22=a.s;a=this.rh;for(var f=this.dk,h=0;5>h;)for(var l=h++,g=0,k=this.rh[l].length;g<k;){var m=g++,n=f[l][m],q=this.bk[l][m];n.x=q.x;n.y=q.y;n.z=q.z;var q=n.x*d.e10+n.y*d.e11+n.z*d.e12,p=n.x*d.e20+n.y*d.e21+n.z*d.e22;n.x=n.x*d.e00+n.y*d.e01+n.z*d.e02;n.y=q;n.z=p;n=a[l][m];m=f[l][m];n.x=m.x;n.y=m.y;n.z=m.z;m=n;n=m.y*b;q=m.z*b;m.x=m.x*b;m.y=n;m.z=q;n=m.y+c.y;q=m.z+c.z;m.x=m.x+c.x;m.y=n;m.z=q}for(b=0;4>b;)for(h=b++,l=0;8>l;){var r=l++,v;h&&3!=h&&!this.wireframe&&(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],n=a[h+1][(r+1)%8],q=f[h][r],p=f[h][(r+1)%8],v=f[h+1][r],r=f[h+1][(r+1)%8],this.rect(g,m,n,k,q,v,r,p,e))}e=this.p;if(null!=c){c.O();if(e.c==e.b.length){a=Array(e.c<<1);f=0;for(b=e.c;f<b;)h=f++,a[h]=e.b[h],e.b[h]=null;e.b=a}e.b[e.c++]=c}c=this.p;if(null!=d){d.e00=1;d.e01=0;d.e02=0;d.e10=0;d.e11=1;d.e12=0;d.e20=0;d.e21=0;d.e22=1;if(c.pb==c.nb.length){e=Array(c.pb<<1);a=0;for(f=c.pb;a<f;)b=a++,e[b]=c.nb[b],c.nb[b]=null;c.nb=e}c.nb[c.pb++]=d}},Pl:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],f=this.p,h=0==f.c?new t:f.b[--f.c],l=this.p,g=0==l.c?new t:l.b[--l.c],k=this.p,m=0==k.c?new t:k.b[--k.c],n=this.p,q=0==n.pb?new O:n.nb[--n.pb];m.x=a.v;m.y=a.A;m.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;c.za(q.e00,q.e10,q.e20);h.za(q.e01,q.e11,q.e21);g.za(q.e02,q.e12,q.e22);var p=b.x,r=b.y,v=b.z,aa=this.p,w=0==aa.c?new t:aa.b[--aa.c];w.x=m.x;w.y=m.y;w.z=m.z;var A=-p,u=w.y+c.y*A,D=w.z+c.z*A;w.x+=c.x*A;w.y=u;w.z=D;var V=-r,z=w.y+h.y*V,E=w.z+h.z*V;w.x+=h.x*V;w.y=z;w.z=E;var x=-v,zb=w.y+g.y*x,N=w.z+g.z*x;w.x+=g.x*x;w.y=zb;w.z=N;var G=this.p,F=0==G.c?new t:G.b[--G.c];F.x=m.x;F.y=m.y;F.z=m.z;var C=-p,L=F.y+c.y*C,M=F.z+c.z*C;F.x+=c.x*C;F.y=L;F.z=M;var ga=-r,Vb=F.y+h.y*ga,na=F.z+h.z*ga;F.x+=h.x*ga;F.y=Vb;F.z=na;var ka=F.y+g.y*v,bb=F.z+g.z*v;F.x+=g.x*v;F.y=ka;F.z=bb;var U=this.p,R=0==U.c?new t:U.b[--U.c];R.x=m.x;R.y=m.y;R.z=m.z;var lc=-p,Na=R.y+c.y*lc,Ra=R.z+c.z*lc;R.x+=c.x*lc;R.y=Na;R.z=Ra;var yc=R.y+h.y*r,Pa=R.z+h.z*r;R.x+=h.x*r;R.y=yc;R.z=Pa;var Ba=-v,Hb=R.y+g.y*Ba,J=R.z+g.z*Ba;R.x+=g.x*Ba;R.y=Hb;R.z=J;var Qa=this.p,ba=0==Qa.c?new t:Qa.b[--Qa.c];ba.x=m.x;ba.y=m.y;ba.z=m.z;var Q=-p,P=ba.y+c.y*Q,xa=ba.z+c.z*Q;ba.x+=c.x*Q;ba.y=P;ba.z=xa;var ta=ba.y+h.y*r,W=ba.z+h.z*r;ba.x+=h.x*r;ba.y=ta;ba.z=W;var pa=ba.y+g.y*v,y=ba.z+g.z*v;ba.x+=g.x*v;ba.y=pa;ba.z=y;var Ia=this.p,ca=0==Ia.c?new t:Ia.b[--Ia.c];ca.x=m.x;ca.y=m.y;ca.z=m.z;var Ea=ca.y+c.y*p,ya=ca.z+c.z*p;ca.x+=c.x*p;ca.y=Ea;ca.z=ya;var Fa=-r,Sa=ca.y+h.y*Fa,la=ca.z+h.z*Fa;ca.x+=h.x*Fa;ca.y=Sa;ca.z=la;var Z=-v,Ga=ca.y+g.y*Z,ra=ca.z+g.z*Z;ca.x+=g.x*Z;ca.y=Ga;ca.z=ra;var va=this.p,I=0==va.c?new t:va.b[--va.c];I.x=m.x;I.y=m.y;I.z=m.z;var La=I.y+c.y*p,Wa=I.z+c.z*p;I.x+=c.x*p;I.y=La;I.z=Wa;var S=-r,Xa=I.y+h.y*S,T=I.z+h.z*S;I.x+=h.x*S;I.y=Xa;I.z=T;var K=I.y+g.y*v,ia=I.z+g.z*v;I.x+=g.x*v;I.y=K;I.z=ia;var gb=this.p,da=0==gb.c?new t:gb.b[--gb.c];da.x=m.x;da.y=m.y;da.z=m.z;var qa=da.y+c.y*p,sa=da.z+c.z*p;da.x+=c.x*p;da.y=qa;da.z=sa;var fb=da.y+h.y*r,kb=da.z+h.z*r;da.x+=h.x*r;da.y=fb;da.z=kb;var Ya=-v,ma=da.y+g.y*Ya,oa=da.z+g.z*Ya;da.x+=g.x*Ya;da.y=ma;da.z=oa;var Ja=this.p,Ha=0==Ja.c?new t:Ja.b[--Ja.c];Ha.x=m.x;Ha.y=m.y;Ha.z=m.z;var ob=Ha.y+c.y*p,fa=Ha.z+c.z*p;Ha.x+=c.x*p;Ha.y=ob;Ha.z=fa;var ea=Ha.y+h.y*r,ja=Ha.z+h.z*r;Ha.x+=h.x*r;Ha.y=ea;Ha.z=ja;var cb=Ha.y+g.y*v,Aa=Ha.z+g.z*v;Ha.x+=g.x*v;Ha.y=cb;Ha.z=Aa;if(!this.wireframe){var sb=this.p,Ua=0==sb.c?new t:sb.b[--sb.c];Ua.x=c.x;Ua.y=c.y;Ua.z=c.z;var qb=-Ua.y,rb=-Ua.z;Ua.x=-Ua.x;Ua.y=qb;Ua.z=rb;var ub=this.p,Va=0==ub.c?new t:ub.b[--ub.c];Va.x=h.x;Va.y=h.y;Va.z=h.z;var xb=-Va.y,rc=-Va.z;Va.x=-Va.x;Va.y=xb;Va.z=rc;var Za=this.p,ua=0==Za.c?new t:Za.b[--Za.c];ua.x=g.x;ua.y=g.y;ua.z=g.z;var Qb=-ua.y,H=-ua.z;ua.x=-ua.x;ua.y=Qb;ua.z=H;this.rect(w,F,ba,R,Ua,Ua,Ua,Ua,e);this.rect(ca,da,Ha,I,c,c,c,c,e);this.rect(w,ca,I,F,Va,Va,Va,Va,e);this.rect(R,ba,Ha,da,h,h,h,h,e);this.rect(w,R,da,ca,ua,ua,ua,ua,e);this.rect(F,I,Ha,ba,g,g,g,g,e);var pb=this.p;if(null!=Ua){Ua.O();if(pb.c==pb.b.length){for(var db=Array(pb.c<<1),oc=0,$a=pb.c;oc<$a;){var hb=oc++;db[hb]=pb.b[hb];pb.b[hb]=null}pb.b=db}pb.b[pb.c++]=Ua}var B=this.p;if(null!=Va){Va.O();if(B.c==B.b.length){for(var Db=Array(B.c<<1),za=0,Da=B.c;za<Da;){var Fb=za++;Db[Fb]=B.b[Fb];B.b[Fb]=null}B.b=Db}B.b[B.c++]=Va}var Oa=this.p;if(null!=ua){ua.O();if(Oa.c==Oa.b.length){for(var nb=Array(Oa.c<<1),vb=0,yb=Oa.c;vb<yb;){var eb=vb++;nb[eb]=Oa.b[eb];Oa.b[eb]=null}Oa.b=nb}Oa.b[Oa.c++]=ua}}var Y=this.p;if(null!=w){w.O();if(Y.c==Y.b.length){for(var Ma=Array(Y.c<<1),lb=0,Ta=Y.c;lb<Ta;){var ib=lb++;Ma[ib]=Y.b[ib];Y.b[ib]=null}Y.b=Ma}Y.b[Y.c++]=w}var Ka=this.p;if(null!=F){F.O();if(Ka.c==Ka.b.length){for(var Jb=Array(Ka.c<<1),Ca=0,X=Ka.c;Ca<X;){var Cb=Ca++;Jb[Cb]=Ka.b[Cb];Ka.b[Cb]=null}Ka.b=Jb}Ka.b[Ka.c++]=F}var wa=this.p;if(null!=R){R.O();if(wa.c==wa.b.length){for(var Cc=Array(wa.c<<1),ab=0,ec=wa.c;ab<ec;){var wb=ab++;Cc[wb]=wa.b[wb];wa.b[wb]=null}wa.b=Cc}wa.b[wa.c++]=R}var jb=this.p;if(null!=ba){ba.O();if(jb.c==jb.b.length){for(var tb=Array(jb.c<<1),xc=0,Gb=jb.c;xc<Gb;){var jc=xc++;tb[jc]=jb.b[jc];jb.b[jc]=null}jb.b=tb}jb.b[jb.c++]=ba}var pc=this.p;if(null!=ca){ca.O();if(pc.c==pc.b.length){for(var kc=Array(pc.c<<1),ac=0,Wb=pc.c;ac<Wb;){var Xb=ac++;kc[Xb]=pc.b[Xb];pc.b[Xb]=null}pc.b=kc}pc.b[pc.c++]=ca}var Rb=this.p;if(null!=I){I.O();if(Rb.c==Rb.b.length){for(var fc=Array(Rb.c<<1),Sb=0,Ob=Rb.c;Sb<Ob;){var Yb=Sb++;fc[Yb]=Rb.b[Yb];Rb.b[Yb]=null}Rb.b=fc}Rb.b[Rb.c++]=I}var gc=this.p;if(null!=da){da.O();if(gc.c==gc.b.length){for(var Ib=Array(gc.c<<1),$b=0,mb=gc.c;$b<mb;){var Eb=$b++;Ib[Eb]=gc.b[Eb];gc.b[Eb]=null}gc.b=Ib}gc.b[gc.c++]=da}var Ab=this.p;if(null!=Ha){Ha.O();if(Ab.c==Ab.b.length){for(var Tb=Array(Ab.c<<1),qc=0,mc=Ab.c;qc<mc;){var Kb=qc++;Tb[Kb]=Ab.b[Kb];Ab.b[Kb]=null}Ab.b=Tb}Ab.b[Ab.c++]=Ha}var Ic=this.p;if(null!=m){m.O();if(Ic.c==Ic.b.length){for(var Mb=Array(Ic.c<<1),sc=0,vc=Ic.c;sc<vc;){var Pb=sc++;Mb[Pb]=Ic.b[Pb];Ic.b[Pb]=null}Ic.b=Mb}Ic.b[Ic.c++]=m}var Bb=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(Bb.pb==Bb.nb.length){for(var Ub=Array(Bb.pb<<1),dc=0,Zb=Bb.pb;dc<Zb;){var cc=dc++;Ub[cc]=Bb.nb[cc];Bb.nb[cc]=null}Bb.nb=Ub}Bb.nb[Bb.pb++]=q}var Lb=this.p;if(null!=c){c.O();if(Lb.c==Lb.b.length){for(var hc=Array(Lb.c<<1),ic=0,uc=Lb.c;ic<uc;){var nc=ic++;hc[nc]=Lb.b[nc];Lb.b[nc]=null}Lb.b=hc}Lb.b[Lb.c++]=c}var Nb=this.p;if(null!=h){h.O();if(Nb.c==Nb.b.length){for(var wc=Array(Nb.c<<1),zc=0,Ac=Nb.c;zc<Ac;){var tc=zc++;wc[tc]=Nb.b[tc];Nb.b[tc]=null}Nb.b=wc}Nb.b[Nb.c++]=h}var bc=this.p;if(null!=g){g.O();if(bc.c==bc.b.length){for(var Bc=Array(bc.c<<1),Ec=0,Gc=bc.c;Ec<Gc;){var Dc=Ec++;Bc[Dc]=bc.b[Dc];bc.b[Dc]=null}bc.b=Bc}bc.b[bc.c++]=g}},rect:function(){},ab:function(){},sb:function(){},Pa:function(){},qa:Eb};Re.R=!0;Re.prototype={qa:Re};Rc.R=!0;Tb.R=!0;Tb.prototype={jh:function(){},sh:function(){},nh:function(){},vi:function(){},Gg:function(){},mh:function(){},lh:function(){},$e:function(){},qa:Tb};ic.R=!0;ld.R=!0;ld.prototype={Vd:function(a,b){b.Ce=this.C;b.De=this.D;var e,d,c,f,h,l,g,k,m;e=this.Ja.mg;d=this.Ja.ng;c=this.Ja.og;f=this.Ja.Xi;h=this.Ja.Yi;l=this.Ja.Zi;g=this.Ja.Gi;k=this.Ja.Hi;m=this.Ja.Ii;for(var n=Math.sqrt(this.uc.Fj*this.vc.Fj),q=Math.sqrt(this.uc.Pj*this.vc.Pj),p=this.Ja.Xd,r=b.Ka=0;r<p;){var v=r++,v=this.Ja.tc[v];if(0>v.Dc)v.Jf=!0,v=v.Wd,v.Xc=0,v.yc=0,v.xc=0,v.tb=0,v.Ue=0,v.Ve=0,v.We=0;else{v.Jf=!1;var t=b.rows[b.Ka++];t.friction=n;t.Ma=0;var w=t.Eg;w.va=e;w.wa=d;w.xa=c;w.Ba=e;w.Ca=d;w.Da=c;w.S=v.Db*c-v.Eb*d;w.T=v.Eb*e-v.Cb*c;w.U=v.Cb*d-v.Db*e;w.W=v.bc*c-v.cc*d;w.X=v.cc*e-v.ac*c;w.Y=v.ac*d-v.bc*e;w=t.vj;w.va=f;w.wa=h;w.xa=l;w.Ba=f;w.Ca=h;w.Da=l;w.S=v.Db*l-v.Eb*h;w.T=v.Eb*f-v.Cb*l;w.U=v.Cb*h-v.Db*f;w.W=v.bc*l-v.cc*h;w.X=v.cc*f-v.ac*l;w.Y=v.ac*h-v.bc*f;w=t.uj;w.va=g;w.wa=k;w.xa=m;w.Ba=g;w.Ca=k;w.Da=m;w.S=v.Db*m-v.Eb*k;w.T=v.Eb*g-v.Cb*m;w.U=v.Cb*k-v.Db*g;w.W=v.bc*m-v.cc*k;w.X=v.cc*g-v.ac*m;w.Y=v.ac*k-v.bc*g;w=t.Eg;w=w.va*this.C.cb+w.wa*this.C.eb+w.xa*this.C.fb+(w.S*this.C.hb+w.T*this.C.ib+w.U*this.C.jb)-(w.Ba*this.D.cb+w.Ca*this.D.eb+w.Da*this.D.fb+(w.W*this.D.hb+w.X*this.D.ib+w.Y*this.D.jb));t.Fa=w<-F.contactEnableBounceThreshold&&!v.Se?-w*q:0;this.Ec==ic.BAUMGARTE&&v.Dc>F.linearSlop&&(w=(v.Dc-F.linearSlop)*F.velocityBaumgarte*a.invDt,t.Fa<w&&(t.Fa=w));v.Se||(w=v.Wd,w.Xc=0,w.yc=0,w.xc=0,w.tb=0,w.Ue=0,w.Ve=0,w.We=0);t.ua=v.Wd}}},dd:function(a){a.Ce=this.C;a.De=this.D;var b,e,d;b=this.Ja.mg;e=this.Ja.ng;d=this.Ja.og;for(var c=this.Ja.Xd,f=a.Ka=0;f<c;){var h=f++,h=this.Ja.tc[h];if(!h.Jf){var l=a.rows[a.Ka++],g=l.Eg;g.va=b;g.wa=e;g.xa=d;g.Ba=b;g.Ca=e;g.Da=d;g.S=h.Db*d-h.Eb*e;g.T=h.Eb*b-h.Cb*d;g.U=h.Cb*e-h.Db*b;g.W=h.bc*d-h.cc*e;g.X=h.cc*b-h.ac*d;g.Y=h.ac*e-h.bc*b;l.Fa=h.Dc-F.linearSlop;0>l.Fa&&(l.Fa=0);l.ua=h.Wd}}},Ik:function(){this.Ja.Kl(this.aj,this.bj)},ab:function(){return this.uc},sb:function(){return this.vc},Pa:function(){return this.Ja},Zj:function(){for(var a=0,b=this.Ja.Xd;a<b;){var e=a++;if(0<=this.Ja.tc[e].Dc)return!0}return!1},qa:ld};jj.R=!0;jj.prototype={Zd:function(a){this.Xc=a.Xc;this.yc=a.yc;this.xc=a.xc;this.Ue=a.Ue;this.Ve=a.Ve;this.We=a.We},qa:jj};Ac.R=!0;Ac.prototype={Je:function(){for(var a=0,b=this.Xd;a<b;){var e=a++,e=this.tc[e];e.bf=0;e.cf=0;e.df=0;e.ef=0;e.ff=0;e.gf=0;e.Cb=0;e.Db=0;e.Eb=0;e.ac=0;e.bc=0;e.cc=0;e.Fd=0;e.Gd=0;e.Hd=0;e.Id=0;e.Jd=0;e.Kd=0;e.Dc=0;var d=e.Wd;d.Xc=0;d.yc=0;d.xc=0;d.tb=0;d.Ue=0;d.Ve=0;d.We=0;e.Se=!1;e.Jf=!1;e.sc=-1}this.Xd=0},Jm:function(a){this.mg=a.x;this.ng=a.y;this.og=a.z;var b=a.x,e=a.y;a=a.z;var d=b*b,c=e*e,f=a*a,h;d<c?d<f?(f=1/Math.sqrt(c+f),d=0,c=-a*f,f*=e,h=e*f-a*c,a=-b*f,b*=c):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d):c<f?(f=1/Math.sqrt(d+f),d=a*f,c=0,f*=-b,h=e*f,a=a*d-b*f,b=-e*d):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d);this.Xi=d;this.Yi=c;this.Zi=f;this.Gi=h;this.Hi=a;this.Ii=b},Kl:function(a,b){for(var e=0,d=this.Xd;e<d;){var c=e++,c=this.tc[c],f,h,l;f=a.o*c.bf+a.f*c.cf+a.h*c.df;h=a.i*c.bf+a.m*c.cf+a.j*c.df;l=a.l*c.bf+a.g*c.cf+a.s*c.df;c.Cb=f;c.Db=h;c.Eb=l;f=b.o*c.ef+b.f*c.ff+b.h*c.gf;h=b.i*c.ef+b.m*c.ff+b.j*c.gf;l=b.l*c.ef+b.g*c.ff+b.s*c.gf;c.ac=f;c.bc=h;c.cc=l;c.Fd=c.Cb+a.v;c.Gd=c.Db+a.A;c.Hd=c.Eb+a.B;c.Id=c.ac+b.v;c.Jd=c.bc+b.A;c.Kd=c.cc+b.B;c.Dc=-((c.Fd-c.Id)*this.mg+(c.Gd-c.Jd)*this.ng+(c.Hd-c.Kd)*this.og)}},sb:function(){var a=new t;a.x=this.mg;a.y=this.ng;a.z=this.og;return a},Kb:function(a){a.x=this.mg;a.y=this.ng;a.z=this.og},qc:function(){var a=new t;a.x=this.Xi;a.y=this.Yi;a.z=this.Zi;return a},rc:function(a){a.x=this.Xi;a.y=this.Yi;a.z=this.Zi},Pa:function(){var a=new t;a.x=this.Gi;a.y=this.Hi;a.z=this.Ii;return a},ab:function(a){a.x=this.Gi;a.y=this.Hi;a.z=this.Ii},mc:function(){return this.tc},lc:function(){return this.Xd},qa:Ac};Ab.R=!0;Ab.prototype={Kb:function(){var a=new t;a.x=this.Fd;a.y=this.Gd;a.z=this.Hd;return a},lc:function(a){a.x=this.Fd;a.y=this.Gd;a.z=this.Hd},mc:function(){var a=new t;a.x=this.Id;a.y=this.Jd;a.z=this.Kd;return a},qc:function(a){a.x=this.Id;a.y=this.Jd;a.z=this.Kd},ab:function(){return this.Dc},zc:function(){return this.Se},sb:function(){return this.Wd.Xc},rc:function(){return this.Wd.yc},Pa:function(){return this.Wd.xc},Cc:function(){return!this.Jf},qa:Ab};ij.R=!0;ij.prototype={Hn:function(){for(var a=this.Ja.Xd;0<=--a;){var b=this.Ja.tc[a],e,d;e=b.Fd-b.Id;d=b.Gd-b.Jd;var b=b.Hd-b.Kd,c=this.Ja.mg*e+this.Ja.ng*d+this.Ja.og*b;c>F.contactPersistenceThreshold?this.xm(a):(e+=this.Ja.mg*-c,d+=this.Ja.ng*-c,b+=this.Ja.og*-c,e*e+d*d+b*b>F.contactPersistenceThreshold*F.contactPersistenceThreshold&&this.xm(a))}},xm:function(a){var b=--this.Ja.Xd;if(a!=b){var e=this.Ja.tc[a];this.Ja.tc[a]=this.Ja.tc[b];this.Ja.tc[b]=e}a=this.Ja.tc[b];a.bf=0;a.cf=0;a.df=0;a.ef=0;a.ff=0;a.gf=0;a.Cb=0;a.Db=0;a.Eb=0;a.ac=0;a.bc=0;a.cc=0;a.Fd=0;a.Gd=0;a.Hd=0;a.Id=0;a.Jd=0;a.Kd=0;a.Dc=0;b=a.Wd;b.Xc=0;b.yc=0;b.xc=0;b.tb=0;b.Ue=0;b.Ve=0;b.We=0;a.Se=!1;a.Jf=!1;a.sc=-1},Wm:function(a,b,e){var d=this.Ja.Xd;if(d==F.maxManifoldPoints){var d=this.Ja.tc[this.an(a,b,e)],c=a.position1;d.Fd=c.x;d.Gd=c.y;d.Hd=c.z;c=a.position2;d.Id=c.x;d.Jd=c.y;d.Kd=c.z;d.Cb=d.Fd-b.v;d.Db=d.Gd-b.A;d.Eb=d.Hd-b.B;d.ac=d.Id-e.v;d.bc=d.Jd-e.A;d.cc=d.Kd-e.B;var f,c=b.o*d.Cb+b.i*d.Db+b.l*d.Eb;f=b.f*d.Cb+b.m*d.Db+b.g*d.Eb;b=b.h*d.Cb+b.j*d.Db+b.s*d.Eb;d.bf=c;d.cf=f;d.df=b;b=e.o*d.ac+e.i*d.bc+e.l*d.cc;c=e.f*d.ac+e.m*d.bc+e.g*d.cc;e=e.h*d.ac+e.j*d.bc+e.s*d.cc;d.ef=b;d.ff=c;d.gf=e;d.Dc=a.depth;e=d.Wd;e.Xc=0;e.yc=0;e.xc=0;e.tb=0;e.Ue=0;e.Ve=0;e.We=0;d.sc=a.id;d.Se=!1;d.Jf=!1}else d=this.Ja.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Cb=d.Fd-b.v,d.Db=d.Gd-b.A,d.Eb=d.Hd-b.B,d.ac=d.Id-e.v,d.bc=d.Jd-e.A,d.cc=d.Kd-e.B,c=b.o*d.Cb+b.i*d.Db+b.l*d.Eb,f=b.f*d.Cb+b.m*d.Db+b.g*d.Eb,b=b.h*d.Cb+b.j*d.Db+b.s*d.Eb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.ac+e.i*d.bc+e.l*d.cc,c=e.f*d.ac+e.m*d.bc+e.g*d.cc,e=e.h*d.ac+e.j*d.bc+e.s*d.cc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth,e=d.Wd,e.Xc=0,e.yc=0,e.xc=0,e.tb=0,e.Ue=0,e.Ve=0,e.We=0,d.sc=a.id,d.Se=!1,d.Jf=!1,this.Ja.Xd++},an:function(a,b){var e=this.Ja.tc[0],d=this.Ja.tc[1],c=this.Ja.tc[2],f=this.Ja.tc[3],h=e.Dc,l=0;d.Dc>h&&(h=d.Dc,l=1);c.Dc>h&&(h=c.Dc,l=2);f.Dc>h&&(h=f.Dc,l=3);var g,k,m,n=a.position1;g=n.x;k=n.y;m=n.z;g-=b.v;k-=b.A;m-=b.B;var q=d.Cb,p=d.Db,r=d.Eb,v=c.Cb,t=c.Db,w=c.Eb,A=f.Cb,u=f.Db,D=f.Eb,V,z,E,x,F,N,G,C,L,M,O,ga,Vb,na,ka,bb,U,R;V=v-q;z=t-p;E=w-r;x=g-A;F=k-u;N=m-D;G=A-q;C=u-p;L=D-r;M=g-v;O=k-t;ga=m-w;Vb=g-q;na=k-p;ka=m-r;bb=A-v;U=u-t;R=D-w;var lc,Na,Ra,yc,Pa,Ba,Hb,J,Qa;lc=z*N-E*F;Na=E*x-V*N;Ra=V*F-z*x;yc=C*ga-L*O;Pa=L*M-G*ga;Ba=G*O-C*M;Hb=na*R-ka*U;J=ka*bb-Vb*R;Qa=Vb*U-na*bb;var ba=lc*lc+Na*Na+Ra*Ra,Q=yc*yc+Pa*Pa+Ba*Ba,P=Hb*Hb+J*J+Qa*Qa,xa=ba>Q?ba>P?ba:P:Q>P?Q:P,ta=e.Cb,W=e.Db,pa=e.Eb,y=c.Cb,Ia=c.Db,ca=c.Eb,Ea=f.Cb,ya=f.Db,Fa=f.Eb,Sa,la,Z,Ga,ra,va,I,La,Wa,S,Xa,T,K,ia,gb,da,qa,sa;Sa=y-ta;la=Ia-W;Z=ca-pa;Ga=g-Ea;ra=k-ya;va=m-Fa;I=Ea-ta;La=ya-W;Wa=Fa-pa;S=g-y;Xa=k-Ia;T=m-ca;K=g-ta;ia=k-W;gb=m-pa;da=Ea-y;qa=ya-Ia;sa=Fa-ca;var fb,kb,Ya,ma,oa,Ja,Ha,ob,fa;fb=la*va-Z*ra;kb=Z*Ga-Sa*va;Ya=Sa*ra-la*Ga;ma=La*T-Wa*Xa;oa=Wa*S-I*T;Ja=I*Xa-La*S;Ha=ia*sa-gb*qa;ob=gb*da-K*sa;fa=K*qa-ia*da;var ea=fb*fb+kb*kb+Ya*Ya,ja=ma*ma+oa*oa+Ja*Ja,cb=Ha*Ha+ob*ob+fa*fa,Aa=ea>ja?ea>cb?ea:cb:ja>cb?ja:cb,sb=e.Cb,Ua=e.Db,qb=e.Eb,rb=d.Cb,ub=d.Db,Va=d.Eb,xb=f.Cb,rc=f.Db,Za=f.Eb,ua,Qb,H,pb,db,za,$a,hb,B,Db,wa,Da,Fb,Oa,nb,vb,yb,eb;ua=rb-sb;Qb=ub-Ua;H=Va-qb;pb=g-xb;db=k-rc;za=m-Za;$a=xb-sb;hb=rc-Ua;B=Za-qb;Db=g-rb;wa=k-ub;Da=m-Va;Fb=g-sb;Oa=k-Ua;nb=m-qb;vb=xb-rb;yb=rc-ub;eb=Za-Va;var Y,Ma,lb,Ta,ib,Ka,Ca,jb,X;Y=Qb*za-H*db;Ma=H*pb-ua*za;lb=ua*db-Qb*pb;Ta=hb*Da-B*wa;ib=B*Db-$a*Da;Ka=$a*wa-hb*Db;Ca=Oa*eb-nb*yb;jb=nb*vb-Fb*eb;X=Fb*yb-Oa*vb;var Cb=Y*Y+Ma*Ma+lb*lb,wb=Ta*Ta+ib*ib+Ka*Ka,ab=Ca*Ca+jb*jb+X*X,tb=Cb>wb?Cb>ab?Cb:ab:wb>ab?wb:ab,ec=e.Cb,Ab=e.Db,Bb=e.Eb,Eb=d.Cb,xc=d.Db,Gb=d.Eb,jc=c.Cb,pc=c.Db,kc=c.Eb,ac,Wb,Xb,Rb,fc,Sb,Ob,Yb,gc,Ib,$b,mb,Lb,Kb,Nb,qc,mc,Tb;ac=Eb-ec;Wb=xc-Ab;Xb=Gb-Bb;Rb=g-jc;fc=k-pc;Sb=m-kc;Ob=jc-ec;Yb=pc-Ab;gc=kc-Bb;Ib=g-Eb;$b=k-xc;mb=m-Gb;Lb=g-ec;Kb=k-Ab;Nb=m-Bb;qc=jc-Eb;mc=pc-xc;Tb=kc-Gb;var Pb,Mb,sc,vc,Ub,bc,cc,dc,hc;Pb=Wb*Sb-Xb*fc;Mb=Xb*Rb-ac*Sb;sc=ac*fc-Wb*Rb;vc=Yb*mb-gc*$b;Ub=gc*Ib-Ob*mb;bc=Ob*$b-Yb*Ib;cc=Kb*Tb-Nb*mc;dc=Nb*qc-Lb*Tb;hc=Lb*mc-Kb*qc;var Zb=Pb*Pb+Mb*Mb+sc*sc,nc=vc*vc+Ub*Ub+bc*bc,ic=cc*cc+dc*dc+hc*hc,uc=Zb>nc?Zb>ic?Zb:ic:nc>ic?nc:ic,tc=xa,wc=0;if(Aa>tc&&1!=l||!l)tc=Aa,wc=1;tb>tc&&2!=l&&(tc=tb,wc=2);uc>tc&&3!=l&&(tc=uc,wc=3);return wc},dn:function(a,b,e){for(var d=F.contactPersistenceThreshold*F.contactPersistenceThreshold,c=-1,f=0,h=this.Ja.Xd;f<h;){var l=f++,g=this.Ja.tc[l],k,m,n,q,p,r;p=a.position1;k=p.x;m=p.y;n=p.z;r=a.position2;q=r.x;p=r.y;r=r.z;k-=b.v;m-=b.A;n-=b.B;q-=e.v;p-=e.A;r-=e.B;k=g.Cb-k;m=g.Db-m;n=g.Eb-n;q=g.ac-q;p=g.bc-p;g=g.cc-r;r=k*k+m*m+n*n;g=q*q+p*p+g*g;g=r<g?r:g;g<d&&(d=g,c=l)}return c},Pn:function(a,b,e){this.ol=this.Ja.Xd;for(var d=0,c=this.ol;d<c;){var f=d++,h=this.pl[f],f=this.Ja.tc[f];h.bf=f.bf;h.cf=f.cf;h.df=f.df;h.ef=f.ef;h.ff=f.ff;h.gf=f.gf;h.Cb=f.Cb;h.Db=f.Db;h.Eb=f.Eb;h.ac=f.ac;h.bc=f.bc;h.cc=f.cc;h.Fd=f.Fd;h.Gd=f.Gd;h.Hd=f.Hd;h.Id=f.Id;h.Jd=f.Jd;h.Kd=f.Kd;h.Dc=f.Dc;h.Wd.Zd(f.Wd);h.sc=f.sc;h.Se=f.Se;h.Jf=!1}d=a.numPoints;this.Ja.Xd=d;for(c=0;c<d;){var f=c++,h=this.Ja.tc[f],f=a.points[f],l=f.position1;h.Fd=l.x;h.Gd=l.y;h.Hd=l.z;l=f.position2;h.Id=l.x;h.Jd=l.y;h.Kd=l.z;h.Cb=h.Fd-b.v;h.Db=h.Gd-b.A;h.Eb=h.Hd-b.B;h.ac=h.Id-e.v;h.bc=h.Jd-e.A;h.cc=h.Kd-e.B;var g,k,l=b.o*h.Cb+b.i*h.Db+b.l*h.Eb;g=b.f*h.Cb+b.m*h.Db+b.g*h.Eb;k=b.h*h.Cb+b.j*h.Db+b.s*h.Eb;h.bf=l;h.cf=g;h.df=k;l=e.o*h.ac+e.i*h.bc+e.l*h.cc;g=e.f*h.ac+e.m*h.bc+e.g*h.cc;k=e.h*h.ac+e.j*h.bc+e.s*h.cc;h.ef=l;h.ff=g;h.gf=k;h.Dc=f.depth;l=h.Wd;l.Xc=0;l.yc=0;l.xc=0;l.tb=0;l.Ue=0;l.Ve=0;l.We=0;h.sc=f.id;h.Se=!1;h.Jf=!1;f=0;for(l=this.ol;f<l;)if(g=f++,g=this.pl[g],h.sc==g.sc){h.Wd.Zd(g.Wd);h.Se=!0;break}}},Bn:function(a,b,e){this.Ja.Kl(b,e);for(var d=0,c=this.Ja.Xd;d<c;){var f=d++;this.Ja.tc[f].Se=!0}if(1!=a.numPoints)throw Error("assertion error: result.numPoints == 1 is false");a=a.points[0];d=this.dn(a,b,e);-1==d?this.Wm(a,b,e):(d=this.Ja.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Cb=d.Fd-b.v,d.Db=d.Gd-b.A,d.Eb=d.Hd-b.B,d.ac=d.Id-e.v,d.bc=d.Jd-e.A,d.cc=d.Kd-e.B,c=b.o*d.Cb+b.i*d.Db+b.l*d.Eb,f=b.f*d.Cb+b.m*d.Db+b.g*d.Eb,b=b.h*d.Cb+b.j*d.Db+b.s*d.Eb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.ac+e.i*d.bc+e.l*d.cc,c=e.f*d.ac+e.m*d.bc+e.g*d.cc,e=e.h*d.ac+e.j*d.bc+e.s*d.cc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth);this.Hn()},qa:ij};bd.R=!0;bd.prototype={Bm:function(){this.wc=0;if(0!=this.va||0!=this.wa||0!=this.xa||0!=this.Ba||0!=this.Ca||0!=this.Da)this.wc|=1;if(0!=this.S||0!=this.T||0!=this.U||0!=this.W||0!=this.X||0!=this.Y)this.wc|=2},qa:bd};Sf.R=!0;Sf.prototype={qa:Sf};hj.R=!0;hj.prototype={qa:hj};Oe.R=!0;Oe.prototype={qa:Oe};gj.R=!0;gj.prototype={qa:gj};L.R=!0;L.prototype={ed:function(){var a=this.C.a,b=this.D.a,e,d,c;e=a.o*this.Pi+a.f*this.Qi+a.h*this.Ri;d=a.i*this.Pi+a.m*this.Qi+a.j*this.Ri;c=a.l*this.Pi+a.g*this.Qi+a.s*this.Ri;this.Pb=e;this.Qb=d;this.Rb=c;e=b.o*this.Si+b.f*this.Ti+b.h*this.Ui;d=b.i*this.Si+b.m*this.Ti+b.j*this.Ui;c=b.l*this.Si+b.g*this.Ti+b.s*this.Ui;this.Sb=e;this.Tb=d;this.Ub=c;this.Df=this.Pb+a.v;this.Ef=this.Qb+a.A;this.Ff=this.Rb+a.B;this.Gf=this.Sb+b.v;this.Hf=this.Tb+b.A;this.If=this.Ub+b.B;e=a.o*this.ra+a.f*this.sa+a.h*this.ta;d=a.i*this.ra+a.m*this.sa+a.j*this.ta;c=a.l*this.ra+a.g*this.sa+a.s*this.ta;this.ub=e;this.vb=d;this.wb=c;e=a.o*this.zb+a.f*this.Ab+a.h*this.Bb;d=a.i*this.zb+a.m*this.Ab+a.j*this.Bb;c=a.l*this.zb+a.g*this.Ab+a.s*this.Bb;this.xe=e;this.ye=d;this.ze=c;e=a.o*this.gc+a.f*this.hc+a.h*this.ic;d=a.i*this.gc+a.m*this.hc+a.j*this.ic;a=a.l*this.gc+a.g*this.hc+a.s*this.ic;this.th=e;this.uh=d;this.vh=a;a=b.o*this.kb+b.f*this.lb+b.h*this.mb;e=b.i*this.kb+b.m*this.lb+b.j*this.mb;d=b.l*this.kb+b.g*this.lb+b.s*this.mb;this.Yb=a;this.Zb=e;this.$b=d;a=b.o*this.Wg+b.f*this.Xg+b.h*this.Yg;e=b.i*this.Wg+b.m*this.Xg+b.j*this.Yg;d=b.l*this.Wg+b.g*this.Xg+b.s*this.Yg;this.ne=a;this.oe=e;this.pe=d;a=b.o*this.Ic+b.f*this.Jc+b.h*this.Kc;e=b.i*this.Ic+b.m*this.Jc+b.j*this.Kc;b=b.l*this.Ic+b.g*this.Jc+b.s*this.Kc;this.Rg=a;this.Sg=e;this.Tg=b},Vd:function(a,b){b.Ce=this.C;b.De=this.D;b.Ka=0},dd:function(a){a.Ce=this.C;a.De=this.D;a.Ka=0},Cl:function(){var a=this.Ai*this.Ai+this.Bi*this.Bi+this.Ci*this.Ci,b=this.Di*this.Di+this.Ei*this.Ei+this.Fi*this.Fi;0<this.Ji&&a>this.Ji*this.Ji?this.kc.sl(this):0<this.Ki&&b>this.Ki*this.Ki&&this.kc.sl(this)},ge:function(){return this.C},Ge:function(){return this.D},Jg:function(){return this.Wb},ab:function(){var a=new t;a.x=this.Df;a.y=this.Ef;a.z=this.Ff;return a},Kb:function(){var a=new t;a.x=this.Gf;a.y=this.Hf;a.z=this.If;return a},sb:function(a){a.x=this.Df;a.y=this.Ef;a.z=this.Ff},lc:function(a){a.x=this.Gf;a.y=this.Hf;a.z=this.If},be:function(){var a=new t;a.x=this.Pi;a.y=this.Qi;a.z=this.Ri;return a},de:function(){var a=new t;a.x=this.Si;a.y=this.Ti;a.z=this.Ui;return a},ce:function(a){a.x=this.Pi;a.y=this.Qi;a.z=this.Ri},ee:function(a){a.x=this.Si;a.y=this.Ti;a.z=this.Ui},Cc:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.ub;e=this.xe;d=this.th;c=this.vb;f=this.ye;h=this.uh;l=this.wb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},ad:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.Yb;e=this.ne;d=this.Rg;c=this.Zb;f=this.oe;h=this.Sg;l=this.$b;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Hc:function(a){var b,e,d,c,f,h,l,g,k;b=this.ub;e=this.xe;d=this.th;c=this.vb;f=this.ye;h=this.uh;l=this.wb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},bd:function(a){var b,e,d,c,f,h,l,g,k;b=this.Yb;e=this.ne;d=this.Rg;c=this.Zb;f=this.oe;h=this.Sg;l=this.$b;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Pa:function(){return this.gk},Kg:function(a){this.gk=a},cd:function(){return this.Ji},Lg:function(a){this.Ji=a},Pd:function(){return this.Ki},Mg:function(a){this.Ki=a},fe:function(){return this.Ec},Ng:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Ec=a},mc:function(){var a=new t;a.x=this.Ai;a.y=this.Bi;a.z=this.Ci;return a},qc:function(a){a.x=this.Ai;a.y=this.Bi;a.z=this.Ci},rc:function(){var a=new t;a.x=this.Di;a.y=this.Ei;a.z=this.Fi;return a},zc:function(a){a.x=this.Di;a.y=this.Ei;a.z=this.Fi},Bf:function(){return this.ia},He:function(){return this.M},qa:L};tb.R=!0;tb.Jb=L;tb.prototype=Gb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorY*d,d=this.angularErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,A;l=-this.Rb;g=this.Qb;k=this.Rb;m=-this.Pb;n=-this.Qb;q=this.Pb;p=-this.Ub;r=this.Tb;v=this.Ub;t=-this.Sb;w=-this.Tb;A=this.Sb;var u,D=1/(this.C.Za+this.D.Za),V=this.V.Yc,z=this.V.Zc,E=this.V.$c,x=(this.C.Z*V+this.C.$*z+this.C.aa*E)*V+(this.C.ba*V+this.C.ca*z+this.C.da*E)*z+(this.C.ea*V+this.C.fa*z+this.C.ga*E)*E;u=(this.D.Z*V+this.D.$*z+this.D.aa*E)*V+(this.D.ba*V+this.D.ca*z+this.D.da*E)*z+(this.D.ea*V+this.D.fa*z+this.D.ga*E)*E;if(0<x){var C=V*this.Pb+z*this.Qb+E*this.Rb,C=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-C*C;0<C&&(x=0<this.C.Za?1/(1/x+this.C.Lc*C):0)}0<u&&(V=V*this.Sb+z*this.Tb+E*this.Ub,V=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-V*V,0<V&&(u=0<this.D.Za?1/(1/u+this.D.Lc*V):0));x=x+u?1/(x+u):0;if(0>=this.Lk.frequency||!e){u=this.Nb[0];V=a.rows[a.Ka++];z=V.Aa;z.va=0;z.wa=0;z.xa=0;z.Ba=0;z.Ca=0;z.Da=0;z.S=0;z.T=0;z.U=0;z.W=0;z.X=0;z.Y=0;V.Fa=0;V.Ma=0;V.Ia=0;V.Ha=0;V.motorSpeed=0;V.bb=0;V.ua=null;V.ua=u;u=V;var V=this.Vf,C=this.Kk,E=this.Lk,N,z=F.linearSlop;if(e)E=0,N=1;else{if(0<E.frequency){var z=0,G=6.28318530717958*E.frequency,L=E.dampingRatio;L<F.minSpringDamperDampingRatio&&(L=F.minSpringDamperDampingRatio);N=b.dt;L=2*L*G;G*=G;E.useSymplecticEuler?(E=1/(N*L),N=G/L):(E=1/(N*(N*G+L)),N=G/(N*G+L))}else E=0,N=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<C.motorForce?(u.motorSpeed=C.motorSpeed,u.bb=C.motorForce*b.dt):(u.motorSpeed=0,u.bb=0)}var L=C.lowerLimit,M=C.upperLimit;L>M?V=G=C=0:L==M?(C=-1/0,G=1/0,V-=L):V<L?(C=-1/0,G=0,V=V-L+z,0<V&&(V=0)):V>M?(C=0,G=1/0,V=V-M-z,0>V&&(V=0)):V=G=C=0;u.Ia=C;u.Ha=G;u.Ma=E*(D?1/D:0);u.Fa=V*N;u=u.Aa;u.va=this.V.Yc;u.wa=this.V.Zc;u.xa=this.V.$c;u.Ba=this.V.Yc;u.Ca=this.V.Zc;u.Da=this.V.$c;u.S=-0;u.T=-l;u.U=-g;u.W=-0;u.X=-p;u.Y=-r}u=this.Nb[1];l=a.rows[a.Ka++];g=l.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.S=0;g.T=0;g.U=0;g.W=0;g.X=0;g.Y=0;l.Fa=0;l.Ma=0;l.Ia=0;l.Ha=0;l.motorSpeed=0;l.bb=0;l.ua=u;u=l;u.Fa=c;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=this.V.Md;u.wa=this.V.Nd;u.xa=this.V.Od;u.Ba=this.V.Md;u.Ca=this.V.Nd;u.Da=this.V.Od;u.S=-k;u.T=-0;u.U=-m;u.W=-v;u.X=-0;u.Y=-t;c=this.Nb[2];u=a.rows[a.Ka++];k=u.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.S=0;k.T=0;k.U=0;k.W=0;k.X=0;k.Y=0;u.Fa=0;u.Ma=0;u.Ia=0;u.Ha=0;u.motorSpeed=0;u.bb=0;u.ua=c;u.Fa=f;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=this.V.ke;u.wa=this.V.le;u.xa=this.V.me;u.Ba=this.V.ke;u.Ca=this.V.le;u.Da=this.V.me;u.S=-n;u.T=-q;u.U=-0;u.W=-w;u.X=-A;u.Y=-0;if(0>=this.Ek.frequency||!e)f=this.Nb[3],n=a.rows[a.Ka++],q=n.Aa,q.va=0,q.wa=0,q.xa=0,q.Ba=0,q.Ca=0,q.Da=0,q.S=0,q.T=0,q.U=0,q.W=0,q.X=0,q.Y=0,n.Fa=0,n.Ma=0,n.Ia=0,n.Ha=0,n.motorSpeed=0,n.bb=0,n.ua=f,u=n,f=this.angle,q=this.Dk,w=this.Ek,n=F.angularSlop,e?(e=0,w=1):(0<w.frequency?(n=0,e=6.28318530717958*w.frequency,c=w.dampingRatio,c<F.minSpringDamperDampingRatio&&(c=F.minSpringDamperDampingRatio),A=b.dt,c=2*c*e,k=e*e,w.useSymplecticEuler?(e=1/(A*c),w=k/c):(e=1/(A*(A*k+c)),w=k/(A*k+c))):(e=0,w=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<q.motorTorque?(u.motorSpeed=q.motorSpeed,u.bb=q.motorTorque*b.dt):(u.motorSpeed=0,u.bb=0)),b=q.lowerLimit,q=q.upperLimit,A=.5*(b+q),f=((f-A+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+A,b>q?b=c=A=0:b==q?(A=-1/0,c=1/0,b=f-b):f<b?(A=-1/0,c=0,b=f-b+n,0<b&&(b=0)):f>q?(A=0,c=1/0,b=f-q-n,0>b&&(b=0)):b=c=A=0,u.Ia=A,u.Ha=c,u.Ma=e*(x?1/x:0),u.Fa=b*w,u=u.Aa,u.S=this.V.Yc,u.T=this.V.Zc,u.U=this.V.$c,u.W=this.V.Yc,u.X=this.V.Zc,u.Y=this.V.$c;b=this.Nb[4];x=a.rows[a.Ka++];e=x.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.S=0;e.T=0;e.U=0;e.W=0;e.X=0;e.Y=0;x.Fa=0;x.Ma=0;x.Ia=0;x.Ha=0;x.motorSpeed=0;x.bb=0;x.ua=b;u=x;u.Fa=h;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.S=this.V.Md;u.T=this.V.Nd;u.U=this.V.Od;u.W=this.V.Md;u.X=this.V.Nd;u.Y=this.V.Od;h=this.Nb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.S=0;b.T=0;b.U=0;b.W=0;b.X=0;b.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=h;u=a;u.Fa=d;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.S=this.V.ke;u.T=this.V.le;u.U=this.V.me;u.W=this.V.ke;u.X=this.V.le;u.Y=this.V.me},ed:function(){L.prototype.ed.call(this);var a=this.V,b=a.P.C.Za,e=a.P.D.Za,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,V,z,E,x,F,C,G,M,O,ga,ha,na,Vb=a.P.ub*a.P.Yb+a.P.vb*a.P.Zb+a.P.wb*a.P.$b;if(-1.000001<Vb&&-.999999>Vb){var qa,ka,bb,U=a.P.ub,R=a.P.vb,lc=a.P.wb,Na=U*U,Ra=R*R,yc=lc*lc,Pa;Na<Ra?Na<yc?(Pa=1/Math.sqrt(Ra+yc),qa=0,ka=lc*Pa,bb=-R*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0):Ra<yc?(Pa=1/Math.sqrt(yc+Na),qa=-lc*Pa,ka=0,bb=U*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0);d=qa;c=ka;f=bb;h=0}else{var Ba,Hb,J;Ba=a.P.vb*a.P.$b-a.P.wb*a.P.Zb;Hb=a.P.wb*a.P.Yb-a.P.ub*a.P.$b;J=a.P.ub*a.P.Zb-a.P.vb*a.P.Yb;var Qa=Math.sqrt(.5*(1+Vb)),Vb=.5/Qa;Ba*=Vb;Hb*=Vb;J*=Vb;d=Ba;c=Hb;f=J;h=Qa}var ba,Q,P,xa,ta,W,pa,y;P=Q=ba=0;xa=1;ta=d;W=c;pa=f;y=h;var Ia=ba*ta+Q*W+P*pa+xa*y;0>Ia&&(Ia=-Ia,ta=-ta,W=-W,pa=-pa,y=-y);if(.999999<Ia){var ca,Ea,ya,Fa;ca=ta-ba;Ea=W-Q;ya=pa-P;Fa=y-xa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ea;pa=P+b/(b+e)*ya;y=xa+b/(b+e)*Fa;var Sa=ta*ta+W*W+pa*pa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=pa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ia);ta+=ba*-Ia;W+=Q*-Ia;pa+=P*-Ia;y+=xa*-Ia;var Z=ta*ta+W*W+pa*pa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;pa*=Z;y*=Z;var Ga=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;xa*=ra;l=ba+ta*Ga;g=Q+W*Ga;k=P+pa*Ga;m=xa+y*Ga}var va=l,I=g,La=k,Wa=m,S=2*va,Xa=2*I,T=2*La,K=va*S,ia=I*Xa,gb=La*T,da=va*Xa,za=I*T,sa=va*T,fb=Wa*S,kb=Wa*Xa,Ya=Wa*T;n=1-ia-gb;q=da-Ya;p=sa+kb;r=da+Ya;v=1-K-gb;t=za-fb;w=sa-kb;A=za+fb;u=1-K-ia;var ma,oa;ma=n*a.P.ub+q*a.P.vb+p*a.P.wb;oa=r*a.P.ub+v*a.P.vb+t*a.P.wb;D=w*a.P.ub+A*a.P.vb+u*a.P.wb;G=a.Yc;M=a.Zc;O=a.$c;ga=a.Md;ha=a.Nd;na=a.Od;var Ja=G*ma+M*oa+O*D;if(-1.000001<Ja&&-.999999>Ja){var Ha,ob,fa,ea=G*G,ja=M*M,cb=O*O,Aa;ea<ja?ea<cb?(Aa=1/Math.sqrt(ja+cb),Ha=0,ob=O*Aa,fa=-M*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-G*Aa,fa=0):ja<cb?(Aa=1/Math.sqrt(cb+ea),Ha=-O*Aa,ob=0,fa=G*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-G*Aa,fa=0);l=Ha;g=ob;k=fa;m=0}else{var sb,Ua,qb;sb=M*D-O*oa;Ua=O*ma-G*D;qb=G*oa-M*ma;var rb=Math.sqrt(.5*(1+Ja)),Ja=.5/rb;sb*=Ja;Ua*=Ja;qb*=Ja;l=sb;g=Ua;k=qb;m=rb}var ub=l,Va=g,xb=k,wa=m,Za=2*ub,ua=2*Va,Da=2*xb,H=ub*Za,pb=Va*ua,db=xb*Da,Ca=ub*ua,$a=Va*Da,hb=ub*Da,B=wa*Za,Db=wa*ua,jb=wa*Da;n=1-pb-db;q=Ca-jb;p=hb+Db;r=Ca+jb;v=1-H-db;t=$a-B;w=hb-Db;A=$a+B;u=1-H-pb;var ab,Fb,Oa;ab=n*ga+q*ha+p*na;Fb=r*ga+v*ha+t*na;Oa=w*ga+A*ha+u*na;V=ab;z=Fb;E=Oa;x=oa*E-D*z;F=D*V-ma*E;C=ma*z-oa*V;if(1E-6<x*x+F*F+C*C){var nb=x*x+F*F+C*C;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;F*=nb;C*=nb}else{var vb=ma*ma,yb=oa*oa,eb=D*D,Y;vb<yb?vb<eb?(Y=1/Math.sqrt(yb+eb),x=0,F=D*Y,C=-oa*Y):(Y=1/Math.sqrt(vb+yb),x=oa*Y,F=-ma*Y,C=0):yb<eb?(Y=1/Math.sqrt(eb+vb),x=-D*Y,F=0,C=ma*Y):(Y=1/Math.sqrt(vb+yb),x=oa*Y,F=-ma*Y,C=0)}V=F*D-C*oa;z=C*ma-x*D;E=x*oa-F*ma;a.Yc=ma;a.Zc=oa;a.$c=D;a.Md=V;a.Nd=z;a.Od=E;a.ke=x;a.le=F;a.me=C;var Ma,lb,Ta;Ma=this.vb*this.$b-this.wb*this.Zb;lb=this.wb*this.Yb-this.ub*this.$b;Ta=this.ub*this.Zb-this.vb*this.Yb;var ib=this.ub*this.Yb+this.vb*this.Zb+this.wb*this.$b,Ka=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib),Jb=Ma*Ma+lb*lb+Ta*Ta;0<Jb&&(Jb=1/Math.sqrt(Jb));Ma*=Jb;lb*=Jb;Ta*=Jb;Ma*=Ka;lb*=Ka;Ta*=Ka;this.angularErrorY=Ma*this.V.Md+lb*this.V.Nd+Ta*this.V.Od;this.angularErrorZ=Ma*this.V.ke+lb*this.V.le+Ta*this.V.me;var wb,X,Cb;wb=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Cb=this.xe*this.oe-this.ye*this.ne;ib=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib);0>wb*this.V.Yc+X*this.V.Zc+Cb*this.V.$c&&(this.angle=-this.angle);var tb,Ab,Bb;tb=this.Gf-this.Df;Ab=this.Hf-this.Ef;Bb=this.If-this.Ff;this.Vf=tb*this.V.Yc+Ab*this.V.Zc+Bb*this.V.$c;this.linearErrorY=tb*this.V.Md+Ab*this.V.Nd+Bb*this.V.Od;this.linearErrorZ=tb*this.V.ke+Ab*this.V.le+Bb*this.V.me},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Yb;a.y=this.Zb;a.z=this.$b;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Yb;a.y=this.Zb;a.z=this.$b},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.kb;a.y=this.lb;a.z=this.mb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.kb;a.y=this.lb;a.z=this.mb},vn:function(){return this.Lk},nn:function(){return this.Ek},un:function(){return this.Kk},mn:function(){return this.Dk},Xk:function(){return this.angle},$k:function(){return this.Vf},qa:tb});Ec.R=!0;Ec.prototype={Vg:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var d=this.rigidBody1,c,f,h;c=e.x;f=e.y;h=e.z;c-=d.a.v;f-=d.a.A;h-=d.a.B;a=d.a.o*c+d.a.i*f+d.a.l*h;b=d.a.f*c+d.a.m*f+d.a.g*h;d=d.a.h*c+d.a.j*f+d.a.s*h;c=this.localAnchor1;c.x=a;c.y=b;c.z=d;b=this.rigidBody2;d=e.x;c=e.y;f=e.z;d-=b.a.v;c-=b.a.A;f-=b.a.B;e=b.a.o*d+b.a.i*c+b.a.l*f;a=b.a.f*d+b.a.m*c+b.a.g*f;b=b.a.h*d+b.a.j*c+b.a.s*f;d=this.localAnchor2;d.x=e;d.y=a;d.z=b},qa:Ec};te.R=!0;te.Jb=Ec;te.prototype=Gb(Ec.prototype,{za:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},qa:te});Qe.R=!0;Qe.prototype={qa:Qe};Ck.R=!0;Ck.prototype={qa:Ck};Oc.R=!0;Oc.prototype={Pa:function(){return this.wk},sb:function(){return this.Mc},Kb:function(){return this.ia},ab:function(){return this.M},qa:Oc};hc.R=!0;Bb.R=!0;Bb.Jb=L;Bb.prototype=Gb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorX*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,A,u;g=-this.Rb;k=this.Qb;m=this.Rb;n=-this.Pb;q=-this.Qb;p=this.Pb;r=-this.Ub;v=this.Tb;t=this.Ub;w=-this.Sb;A=-this.Tb;u=this.Sb;var D,V;V=1/(this.C.Za+this.D.Za);if(0>=this.ue.frequency||!e){D=this.Nb[0];var z=a.rows[a.Ka++],E=z.Aa;E.va=0;E.wa=0;E.xa=0;E.Ba=0;E.Ca=0;E.Da=0;E.S=0;E.T=0;E.U=0;E.W=0;E.X=0;E.Y=0;z.Fa=0;z.Ma=0;z.Ia=0;z.Ha=0;z.motorSpeed=0;z.bb=0;z.ua=D;D=z;var z=this.Vf,x=this.Lh,C=this.ue,E=F.linearSlop;if(e)C=0,e=1;else{if(0<C.frequency){var E=0,N=6.28318530717958*C.frequency,G=C.dampingRatio;G<F.minSpringDamperDampingRatio&&(G=F.minSpringDamperDampingRatio);e=b.dt;G=2*G*N;N*=N;C.useSymplecticEuler?(C=1/(e*G),e=N/G):(C=1/(e*(e*N+G)),e=N/(e*N+G))}else C=0,e=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<x.motorForce?(D.motorSpeed=x.motorSpeed,D.bb=x.motorForce*b.dt):(D.motorSpeed=0,D.bb=0)}b=x.lowerLimit;N=x.upperLimit;b>N?b=G=x=0:b==N?(x=-1/0,G=1/0,b=z-b):z<b?(x=-1/0,G=0,b=z-b+E,0<b&&(b=0)):z>N?(x=0,G=1/0,b=z-N-E,0>b&&(b=0)):b=G=x=0;D.Ia=x;D.Ha=G;D.Ma=C*(V?1/V:0);D.Fa=b*e;V=D.Aa;V.va=this.V.Yc;V.wa=this.V.Zc;V.xa=this.V.$c;V.Ba=this.V.Yc;V.Ca=this.V.Zc;V.Da=this.V.$c;V.S=-0;V.T=-g;V.U=-k;V.W=-0;V.X=-r;V.Y=-v}g=this.Nb[1];k=a.rows[a.Ka++];r=k.Aa;r.va=0;r.wa=0;r.xa=0;r.Ba=0;r.Ca=0;r.Da=0;r.S=0;r.T=0;r.U=0;r.W=0;r.X=0;r.Y=0;k.Fa=0;k.Ma=0;k.Ia=0;k.Ha=0;k.motorSpeed=0;k.bb=0;k.ua=g;D=k;D.Fa=c;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.va=this.V.Md;V.wa=this.V.Nd;V.xa=this.V.Od;V.Ba=this.V.Md;V.Ca=this.V.Nd;V.Da=this.V.Od;V.S=-m;V.T=-0;V.U=-n;V.W=-t;V.X=-0;V.Y=-w;c=this.Nb[2];m=a.rows[a.Ka++];n=m.Aa;n.va=0;n.wa=0;n.xa=0;n.Ba=0;n.Ca=0;n.Da=0;n.S=0;n.T=0;n.U=0;n.W=0;n.X=0;n.Y=0;m.Fa=0;m.Ma=0;m.Ia=0;m.Ha=0;m.motorSpeed=0;m.bb=0;m.ua=c;D=m;D.Fa=f;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.va=this.V.ke;V.wa=this.V.le;V.xa=this.V.me;V.Ba=this.V.ke;V.Ca=this.V.le;V.Da=this.V.me;V.S=-q;V.T=-p;V.U=-0;V.W=-A;V.X=-u;V.Y=-0;f=this.Nb[3];q=a.rows[a.Ka++];p=q.Aa;p.va=0;p.wa=0;p.xa=0;p.Ba=0;p.Ca=0;p.Da=0;p.S=0;p.T=0;p.U=0;p.W=0;p.X=0;p.Y=0;q.Fa=0;q.Ma=0;q.Ia=0;q.Ha=0;q.motorSpeed=0;q.bb=0;q.ua=f;D=q;D.Fa=h;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.S=1;V.T=0;V.U=0;V.W=1;V.X=0;V.Y=0;h=this.Nb[4];f=a.rows[a.Ka++];q=f.Aa;q.va=0;q.wa=0;q.xa=0;q.Ba=0;q.Ca=0;q.Da=0;q.S=0;q.T=0;q.U=0;q.W=0;q.X=0;q.Y=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.bb=0;f.ua=h;D=f;D.Fa=l;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.S=0;V.T=1;V.U=0;V.W=0;V.X=1;V.Y=0;l=this.Nb[5];a=a.rows[a.Ka++];h=a.Aa;h.va=0;h.wa=0;h.xa=0;h.Ba=0;h.Ca=0;h.Da=0;h.S=0;h.T=0;h.U=0;h.W=0;h.X=0;h.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=l;D=a;D.Fa=d;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.S=0;V.T=0;V.U=1;V.W=0;V.X=0;V.Y=1},ed:function(){L.prototype.ed.call(this);var a=this.V,b=a.P.C.Za,e=a.P.D.Za,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,F,z,E,x,C,N,G,M,O,ga,ha,na,Vb=a.P.ub*a.P.Yb+a.P.vb*a.P.Zb+a.P.wb*a.P.$b;if(-1.000001<Vb&&-.999999>Vb){var qa,ka,bb,U=a.P.ub,R=a.P.vb,Da=a.P.wb,Na=U*U,Ra=R*R,za=Da*Da,Pa;Na<Ra?Na<za?(Pa=1/Math.sqrt(Ra+za),qa=0,ka=Da*Pa,bb=-R*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0):Ra<za?(Pa=1/Math.sqrt(za+Na),qa=-Da*Pa,ka=0,bb=U*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0);d=qa;c=ka;f=bb;h=0}else{var Ba,Hb,J;Ba=a.P.vb*a.P.$b-a.P.wb*a.P.Zb;Hb=a.P.wb*a.P.Yb-a.P.ub*a.P.$b;J=a.P.ub*a.P.Zb-a.P.vb*a.P.Yb;var Qa=Math.sqrt(.5*(1+Vb)),Vb=.5/Qa;Ba*=Vb;Hb*=Vb;J*=Vb;d=Ba;c=Hb;f=J;h=Qa}var ba,Q,P,xa,ta,W,pa,y;P=Q=ba=0;xa=1;ta=d;W=c;pa=f;y=h;var Ia=ba*ta+Q*W+P*pa+xa*y;0>Ia&&(Ia=-Ia,ta=-ta,W=-W,pa=-pa,y=-y);if(.999999<Ia){var ca,Ea,ya,Fa;ca=ta-ba;Ea=W-Q;ya=pa-P;Fa=y-xa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ea;pa=P+b/(b+e)*ya;y=xa+b/(b+e)*Fa;var Sa=ta*ta+W*W+pa*pa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=pa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ia);ta+=ba*-Ia;W+=Q*-Ia;pa+=P*-Ia;y+=xa*-Ia;var Z=ta*ta+W*W+pa*pa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;pa*=Z;y*=Z;var Ga=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;xa*=ra;l=ba+ta*Ga;g=Q+W*Ga;k=P+pa*Ga;m=xa+y*Ga}var va=l,I=g,La=k,Wa=m,S=2*va,Xa=2*I,T=2*La,K=va*S,ia=I*Xa,gb=La*T,da=va*Xa,wa=I*T,sa=va*T,fb=Wa*S,kb=Wa*Xa,Ya=Wa*T;n=1-ia-gb;q=da-Ya;p=sa+kb;r=da+Ya;v=1-K-gb;t=wa-fb;w=sa-kb;A=wa+fb;u=1-K-ia;var ma,oa;ma=n*a.P.ub+q*a.P.vb+p*a.P.wb;oa=r*a.P.ub+v*a.P.vb+t*a.P.wb;D=w*a.P.ub+A*a.P.vb+u*a.P.wb;G=a.Yc;M=a.Zc;O=a.$c;ga=a.Md;ha=a.Nd;na=a.Od;var Ja=G*ma+M*oa+O*D;if(-1.000001<Ja&&-.999999>Ja){var Ha,ob,fa,ea=G*G,ja=M*M,cb=O*O,Aa;ea<ja?ea<cb?(Aa=1/Math.sqrt(ja+cb),Ha=0,ob=O*Aa,fa=-M*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-G*Aa,fa=0):ja<cb?(Aa=1/Math.sqrt(cb+ea),Ha=-O*Aa,ob=0,fa=G*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-G*Aa,fa=0);l=Ha;g=ob;k=fa;m=0}else{var sb,Ua,qb;sb=M*D-O*oa;Ua=O*ma-G*D;qb=G*oa-M*ma;var rb=Math.sqrt(.5*(1+Ja)),Ja=.5/rb;sb*=Ja;Ua*=Ja;qb*=Ja;l=sb;g=Ua;k=qb;m=rb}var ub=l,Va=g,xb=k,Ca=m,Za=2*ub,ua=2*Va,Qb=2*xb,H=ub*Za,pb=Va*ua,db=xb*Qb,jb=ub*ua,$a=Va*Qb,hb=ub*Qb,B=Ca*Za,Db=Ca*ua,ab=Ca*Qb;n=1-pb-db;q=jb-ab;p=hb+Db;r=jb+ab;v=1-H-db;t=$a-B;w=hb-Db;A=$a+B;u=1-H-pb;var wb,Fb,Oa;wb=n*ga+q*ha+p*na;Fb=r*ga+v*ha+t*na;Oa=w*ga+A*ha+u*na;F=wb;z=Fb;E=Oa;x=oa*E-D*z;C=D*F-ma*E;N=ma*z-oa*F;if(1E-6<x*x+C*C+N*N){var nb=x*x+C*C+N*N;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;C*=nb;N*=nb}else{var vb=ma*ma,yb=oa*oa,eb=D*D,Y;vb<yb?vb<eb?(Y=1/Math.sqrt(yb+eb),x=0,C=D*Y,N=-oa*Y):(Y=1/Math.sqrt(vb+yb),x=oa*Y,C=-ma*Y,N=0):yb<eb?(Y=1/Math.sqrt(eb+vb),x=-D*Y,C=0,N=ma*Y):(Y=1/Math.sqrt(vb+yb),x=oa*Y,C=-ma*Y,N=0)}F=C*D-N*oa;z=N*ma-x*D;E=x*oa-C*ma;a.Yc=ma;a.Zc=oa;a.$c=D;a.Md=F;a.Nd=z;a.Od=E;a.ke=x;a.le=C;a.me=N;var Ma,lb,Ta,ib,Ka,Jb,tb,X,Cb,Ab,Bb,Eb,ec,Gb,Lb,Kb,xc,Nb;Ma=this.ub;lb=this.xe;Ta=this.th;ib=this.vb;Ka=this.ye;Jb=this.uh;tb=this.wb;X=this.ze;Cb=this.vh;Ab=this.Yb;Bb=this.ne;Eb=this.Rg;ec=this.Zb;Gb=this.oe;Lb=this.Sg;Kb=this.$b;xc=this.pe;Nb=this.Tg;var jc,pc,kc,ac,Wb,Xb,Rb,fc;jc=Ab*Ma+Bb*lb+Eb*Ta;pc=Ab*ib+Bb*Ka+Eb*Jb;kc=Ab*tb+Bb*X+Eb*Cb;ac=ec*Ma+Gb*lb+Lb*Ta;Wb=ec*ib+Gb*Ka+Lb*Jb;Xb=ec*tb+Gb*X+Lb*Cb;Rb=Kb*Ma+xc*lb+Nb*Ta;fc=Kb*ib+xc*Ka+Nb*Jb;var Sb,Ob,Yb,gc,Ib=Kb*tb+xc*X+Nb*Cb,$b=jc+Wb+Ib,mb;0<$b?(mb=Math.sqrt($b+1),gc=.5*mb,mb=.5/mb,Sb=(fc-Xb)*mb,Ob=(kc-Rb)*mb,Yb=(ac-pc)*mb):jc>Wb?jc>Ib?(mb=Math.sqrt(jc-Wb-Ib+1),Sb=.5*mb,mb=.5/mb,Ob=(pc+ac)*mb,Yb=(kc+Rb)*mb,gc=(fc-Xb)*mb):(mb=Math.sqrt(Ib-jc-Wb+1),Yb=.5*mb,mb=.5/mb,Sb=(kc+Rb)*mb,Ob=(Xb+fc)*mb,gc=(ac-pc)*mb):Wb>Ib?(mb=Math.sqrt(Wb-Ib-jc+1),Ob=.5*mb,mb=.5/mb,Sb=(pc+ac)*mb,Yb=(Xb+fc)*mb,gc=(kc-Rb)*mb):(mb=Math.sqrt(Ib-jc-Wb+1),Yb=.5*mb,mb=.5/mb,Sb=(kc+Rb)*mb,Ob=(Xb+fc)*mb,gc=(ac-pc)*mb);var Tb=gc,Pb=2*(-1>=Tb?3.14159265358979:1<=Tb?0:Math.acos(Tb));this.angularErrorX=Sb;this.angularErrorY=Ob;this.angularErrorZ=Yb;var Mb=this.angularErrorX*this.angularErrorX+this.angularErrorY*this.angularErrorY+this.angularErrorZ*this.angularErrorZ;0<Mb&&(Mb=1/Math.sqrt(Mb));this.angularErrorX*=Mb;this.angularErrorY*=Mb;this.angularErrorZ*=Mb;this.angularErrorX*=Pb;this.angularErrorY*=Pb;this.angularErrorZ*=Pb;var qc,mc,Ub;qc=this.Gf-this.Df;mc=this.Hf-this.Ef;Ub=this.If-this.Ff;this.Vf=qc*this.V.Yc+mc*this.V.Zc+Ub*this.V.$c;this.linearErrorY=qc*this.V.Md+mc*this.V.Nd+Ub*this.V.Od;this.linearErrorZ=qc*this.V.ke+mc*this.V.le+Ub*this.V.me},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Yb;a.y=this.Zb;a.z=this.$b;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Yb;a.y=this.Zb;a.z=this.$b},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.kb;a.y=this.lb;a.z=this.mb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.kb;a.y=this.lb;a.z=this.mb},nj:function(){return this.ue},Zk:function(){return this.Lh},$k:function(){return this.Vf},qa:Bb});Dd.R=!0;Dd.Jb=Ec;Dd.prototype=Gb(Ec.prototype,{za:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},qa:Dd});wb.R=!0;wb.Jb=L;wb.prototype=Gb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,A;l=-this.Rb;g=this.Qb;k=this.Rb;m=-this.Pb;n=-this.Qb;q=this.Pb;p=-this.Ub;r=this.Tb;v=this.Ub;t=-this.Sb;w=-this.Tb;A=this.Sb;var u=this.swingAxisX,D=this.swingAxisY,C=this.swingAxisZ,d=(this.C.Z*u+this.C.$*D+this.C.aa*C)*u+(this.C.ba*u+this.C.ca*D+this.C.da*C)*D+(this.C.ea*u+this.C.fa*D+this.C.ga*C)*C,z=(this.D.Z*u+this.D.$*D+this.D.aa*C)*u+(this.D.ba*u+this.D.ca*D+this.D.da*C)*D+(this.D.ea*u+this.D.fa*D+this.D.ga*C)*C;if(0<d){var E=u*this.Pb+D*this.Qb+C*this.Rb,E=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-E*E;0<E&&(d=0<this.C.Za?1/(1/d+this.C.Lc*E):0)}0<z&&(u=u*this.Sb+D*this.Tb+C*this.Ub,u=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-u*u,0<u&&(z=0<this.D.Za?1/(1/z+this.D.Lc*u):0));z=d+z?1/(d+z):0;D=this.Yb;C=this.Zb;E=this.$b;d=(this.C.Z*D+this.C.$*C+this.C.aa*E)*D+(this.C.ba*D+this.C.ca*C+this.C.da*E)*C+(this.C.ea*D+this.C.fa*C+this.C.ga*E)*E;u=(this.D.Z*D+this.D.$*C+this.D.aa*E)*D+(this.D.ba*D+this.D.ca*C+this.D.da*E)*C+(this.D.ea*D+this.D.fa*C+this.D.ga*E)*E;if(0<d){var x=D*this.Pb+C*this.Qb+E*this.Rb,x=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-x*x;0<x&&(d=0<this.C.Za?1/(1/d+this.C.Lc*x):0)}0<u&&(D=D*this.Sb+C*this.Tb+E*this.Ub,D=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-D*D,0<D&&(u=0<this.D.Za?1/(1/u+this.D.Lc*D):0));d=d+u?1/(d+u):0;u=this.Nb[0];D=a.rows[a.Ka++];C=D.Aa;C.va=0;C.wa=0;C.xa=0;C.Ba=0;C.Ca=0;C.Da=0;C.S=0;C.T=0;C.U=0;C.W=0;C.X=0;C.Y=0;D.Fa=0;D.Ma=0;D.Ia=0;D.Ha=0;D.motorSpeed=0;D.bb=0;D.ua=u;u=D;u.Fa=c;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=1;u.wa=0;u.xa=0;u.Ba=1;u.Ca=0;u.Da=0;u.S=-0;u.T=-l;u.U=-g;u.W=-0;u.X=-p;u.Y=-r;u=this.Nb[1];c=a.rows[a.Ka++];l=c.Aa;l.va=0;l.wa=0;l.xa=0;l.Ba=0;l.Ca=0;l.Da=0;l.S=0;l.T=0;l.U=0;l.W=0;l.X=0;l.Y=0;c.Fa=0;c.Ma=0;c.Ia=0;c.Ha=0;c.motorSpeed=0;c.bb=0;c.ua=u;u=c;u.Fa=f;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=0;u.wa=1;u.xa=0;u.Ba=0;u.Ca=1;u.Da=0;u.S=-k;u.T=-0;u.U=-m;u.W=-v;u.X=-0;u.Y=-t;u=this.Nb[2];f=a.rows[a.Ka++];k=f.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.S=0;k.T=0;k.U=0;k.W=0;k.X=0;k.Y=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.bb=0;f.ua=u;u=f;u.Fa=h;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=0;u.wa=0;u.xa=1;u.Ba=0;u.Ca=0;u.Da=1;u.S=-n;u.T=-q;u.U=-0;u.W=-w;u.X=-A;u.Y=-0;0<this.swingError&&(0>=this.Hk.frequency||!e)&&(u=this.Nb[3],h=a.rows[a.Ka++],n=h.Aa,n.va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.S=0,n.T=0,n.U=0,n.W=0,n.X=0,n.Y=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.bb=0,h.ua=u,u=h,h=this.swingError,w=this.Wk,q=this.Hk,n=F.angularSlop,e?(q=0,A=1):(0<q.frequency?(n=0,k=6.28318530717958*q.frequency,f=q.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),A=b.dt,f=2*f*k,k*=k,q.useSymplecticEuler?(q=1/(A*f),A=k/f):(q=1/(A*(A*k+f)),A=k/(A*k+f))):(q=0,A=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<w.motorTorque?(u.motorSpeed=w.motorSpeed,u.bb=w.motorTorque*b.dt):(u.motorSpeed=0,u.bb=0)),f=w.lowerLimit,w=w.upperLimit,k=.5*(f+w),h=((h-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,h+=k,f>w?h=m=k=0:f==w?(k=-1/0,m=1/0,h-=f):h<f?(k=-1/0,m=0,h=h-f+n,0<h&&(h=0)):h>w?(k=0,m=1/0,h=h-w-n,0>h&&(h=0)):h=m=k=0,u.Ia=k,u.Ha=m,u.Ma=q*(z?1/z:0),u.Fa=h*A,u=u.Aa,u.S=this.swingAxisX,u.T=this.swingAxisY,u.U=this.swingAxisZ,u.W=this.swingAxisX,u.X=this.swingAxisY,u.Y=this.swingAxisZ);if(0>=this.Nk.frequency||!e)z=this.Nb[4],a=a.rows[a.Ka++],u=a.Aa,u.va=0,u.wa=0,u.xa=0,u.Ba=0,u.Ca=0,u.Da=0,u.S=0,u.T=0,u.U=0,u.W=0,u.X=0,u.Y=0,a.Fa=0,a.Ma=0,a.Ia=0,a.Ha=0,a.motorSpeed=0,a.bb=0,a.ua=z,u=a,a=this.ej,h=this.Mk,n=this.Nk,z=F.angularSlop,e?(e=0,n=1):(0<n.frequency?(z=0,e=6.28318530717958*n.frequency,w=n.dampingRatio,w<F.minSpringDamperDampingRatio&&(w=F.minSpringDamperDampingRatio),q=b.dt,w=2*w*e,A=e*e,n.useSymplecticEuler?(e=1/(q*w),n=A/w):(e=1/(q*(q*A+w)),n=A/(q*A+w))):(e=0,n=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<h.motorTorque?(u.motorSpeed=h.motorSpeed,u.bb=h.motorTorque*b.dt):(u.motorSpeed=0,u.bb=0)),b=h.lowerLimit,h=h.upperLimit,q=.5*(b+h),a=((a-q+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,a+=q,b>h?b=w=q=0:b==h?(q=-1/0,w=1/0,b=a-b):a<b?(q=-1/0,w=0,b=a-b+z,0<b&&(b=0)):a>h?(q=0,w=1/0,b=a-h-z,0>b&&(b=0)):b=w=q=0,u.Ia=q,u.Ha=w,u.Ma=e*(d?1/d:0),u.Fa=b*n,u=u.Aa,u.S=this.twistAxisX,u.T=this.twistAxisY,u.U=this.twistAxisZ,u.W=this.twistAxisX,u.X=this.twistAxisY,u.Y=this.twistAxisZ},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f;a=this.ub;b=this.vb;e=this.wb;d=this.Yb;c=this.Zb;f=this.$b;var h,l,g,k,m,n,q,p,r;h=this.ub;l=this.xe;g=this.th;k=this.vb;m=this.ye;n=this.uh;q=this.wb;p=this.ze;r=this.vh;var v,t,w,A,u,D,C,z;D=a*d+b*c+e*f;-1.000001<D&&-.999999>D?(u=a*a,d=b*b,c=e*e,u<d?u<c?(d=1/Math.sqrt(d+c),u=0,e*=d,a=-b*d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0):d<c?(d=1/Math.sqrt(c+u),u=-e*d,e=0,a*=d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0),v=u,t=e,w=a,A=0):(u=Math.sqrt(.5*(1+D)),D=.5/u,v=(b*f-e*c)*D,t=(e*d-a*f)*D,w=(a*c-b*d)*D,A=u);D=v;f=t;u=w;a=A;c=2*D;e=2*f;b=2*u;C=D*c;z=f*e;d=u*b;u=D*e;f*=b;D*=b;var E=a*c,x=a*e;c=a*b;a=1-z-d;b=u-c;e=D+x;u+=c;d=1-C-d;c=f-E;D-=x;f+=E;C=1-C-z;this.Wi=2*(-1>=A?3.14159265358979:1<=A?0:Math.acos(A));A=v;z=w;w=a*this.ne+u*this.oe+D*this.pe;E=b*this.ne+d*this.oe+f*this.pe;v=e*this.ne+c*this.oe+C*this.pe;this.ej=Math.atan2(this.th*w+this.uh*E+this.vh*v,this.xe*w+this.ye*E+this.ze*v);this.twistAxisX=this.ub+this.Yb;this.twistAxisY=this.vb+this.Zb;this.twistAxisZ=this.wb+this.$b;v=this.twistAxisX*this.twistAxisX+this.twistAxisY*this.twistAxisY+this.twistAxisZ*this.twistAxisZ;0<v&&(v=1/Math.sqrt(v));this.twistAxisX*=v;this.twistAxisY*=v;this.twistAxisZ*=v;w=Math.sqrt(A*A+t*t+z*z);0<w&&(w=1/w);A*=w*this.Wi;t*=w*this.Wi;z*=w*this.Wi;v=l*A+m*t+p*z;t=g*A+n*t+r*z;w=this.Jj;A=this.Kj;w=1/(w*w);z=1/(A*A);(A=v*v*w+t*t*z)?(E=Math.sqrt(1/A),A=v*E,E*=t,x=A*w,z*=E,w=1/Math.sqrt(x*x+z*z),x*=w,z*=w,v=(v-A)*x+(t-E)*z,0<v?(this.swingError=v,this.swingAxisX=0,this.swingAxisY=x,this.swingAxisZ=z,h=h*this.swingAxisX+l*this.swingAxisY+g*this.swingAxisZ,k=k*this.swingAxisX+m*this.swingAxisY+n*this.swingAxisZ,q=q*this.swingAxisX+p*this.swingAxisY+r*this.swingAxisZ,this.swingAxisX=h,this.swingAxisY=k,this.swingAxisZ=q,q=a*this.swingAxisX+b*this.swingAxisY+e*this.swingAxisZ,p=u*this.swingAxisX+d*this.swingAxisY+c*this.swingAxisZ,r=D*this.swingAxisX+f*this.swingAxisY+C*this.swingAxisZ,this.swingAxisX=q,this.swingAxisY=p,this.swingAxisZ=r,this.swingConstraintAxisX=this.swingAxisX,this.swingConstraintAxisY=this.swingAxisY,this.swingConstraintAxisZ=this.swingAxisZ):this.swingError=0):this.swingError=this.swingAxisZ=this.swingAxisY=this.swingAxisX=0;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Yb;a.y=this.Zb;a.z=this.$b;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Yb;a.y=this.Zb;a.z=this.$b},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.kb;a.y=this.lb;a.z=this.mb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.kb;a.y=this.lb;a.z=this.mb},zn:function(){return this.Nk},yn:function(){return this.Mk},tn:function(){return this.Hk},rn:function(){var a=new t;a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ;return a},sn:function(a){a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ},qn:function(){return this.Wi},xn:function(){return this.ej},qa:wb});Wd.R=!0;Wd.Jb=Ec;Wd.prototype=Gb(Ec.prototype,{za:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;var g;e=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;h=this.localTwistAxis1;h.x=e;h.y=g;h.z=f;g=d.x;f=d.y;h=d.z;d=b.a.o*g+b.a.i*f+b.a.l*h;e=b.a.f*g+b.a.m*f+b.a.g*h;b=b.a.h*g+b.a.j*f+b.a.s*h;g=this.localTwistAxis2;g.x=d;g.y=e;g.z=b;d=c.x;e=c.y;g=c.z;c=a.a.o*d+a.a.i*e+a.a.l*g;b=a.a.f*d+a.a.m*e+a.a.g*g;a=a.a.h*d+a.a.j*e+a.a.s*g;d=this.localSwingAxis1;d.x=c;d.y=b;d.z=a;return this},qa:Wd});Mb.R=!0;Mb.Jb=L;Mb.prototype=Gb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,A,u;g=-this.Rb;k=this.Qb;m=this.Rb;n=-this.Pb;q=-this.Qb;p=this.Pb;r=-this.Ub;v=this.Tb;t=this.Ub;w=-this.Sb;A=-this.Tb;u=this.Sb;var D=this.V.Yc,C=this.V.Zc,z=this.V.$c,E=(this.C.Z*D+this.C.$*C+this.C.aa*z)*D+(this.C.ba*D+this.C.ca*C+this.C.da*z)*C+(this.C.ea*D+this.C.fa*C+this.C.ga*z)*z,x=(this.D.Z*D+this.D.$*C+this.D.aa*z)*D+(this.D.ba*D+this.D.ca*C+this.D.da*z)*C+(this.D.ea*D+this.D.fa*C+this.D.ga*z)*z;if(0<E){var L=D*this.Pb+C*this.Qb+z*this.Rb,L=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-L*L;0<L&&(E=0<this.C.Za?1/(1/E+this.C.Lc*L):0)}0<x&&(D=D*this.Sb+C*this.Tb+z*this.Ub,D=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-D*D,0<D&&(x=0<this.D.Za?1/(1/x+this.D.Lc*D):0));E=E+x?1/(E+x):0;x=this.Nb[0];D=a.rows[a.Ka++];C=D.Aa;C.va=0;C.wa=0;C.xa=0;C.Ba=0;C.Ca=0;C.Da=0;C.S=0;C.T=0;C.U=0;C.W=0;C.X=0;C.Y=0;D.Fa=0;D.Ma=0;D.Ia=0;D.Ha=0;D.motorSpeed=0;D.bb=0;D.ua=x;x=D;x.Fa=c;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.va=1;x.wa=0;x.xa=0;x.Ba=1;x.Ca=0;x.Da=0;x.S=-0;x.T=-g;x.U=-k;x.W=-0;x.X=-r;x.Y=-v;x=this.Nb[1];c=a.rows[a.Ka++];g=c.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.S=0;g.T=0;g.U=0;g.W=0;g.X=0;g.Y=0;c.Fa=0;c.Ma=0;c.Ia=0;c.Ha=0;c.motorSpeed=0;c.bb=0;c.ua=x;x=c;x.Fa=f;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.va=0;x.wa=1;x.xa=0;x.Ba=0;x.Ca=1;x.Da=0;x.S=-m;x.T=-0;x.U=-n;x.W=-t;x.X=-0;x.Y=-w;f=this.Nb[2];x=a.rows[a.Ka++];m=x.Aa;m.va=0;m.wa=0;m.xa=0;m.Ba=0;m.Ca=0;m.Da=0;m.S=0;m.T=0;m.U=0;m.W=0;m.X=0;m.Y=0;x.Fa=0;x.Ma=0;x.Ia=0;x.Ha=0;x.motorSpeed=0;x.bb=0;x.ua=f;x.Fa=h;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.va=0;x.wa=0;x.xa=1;x.Ba=0;x.Ca=0;x.Da=1;x.S=-q;x.T=-p;x.U=-0;x.W=-A;x.X=-u;x.Y=-0;if(0>=this.ue.frequency||!e)h=this.Nb[3],q=a.rows[a.Ka++],p=q.Aa,p.va=0,p.wa=0,p.xa=0,p.Ba=0,p.Ca=0,p.Da=0,p.S=0,p.T=0,p.U=0,p.W=0,p.X=0,p.Y=0,q.Fa=0,q.Ma=0,q.Ia=0,q.Ha=0,q.motorSpeed=0,q.bb=0,q.ua=h,x=q,h=this.angle,p=this.Lh,A=this.ue,q=F.angularSlop,e?(e=0,A=1):(0<A.frequency?(q=0,e=6.28318530717958*A.frequency,f=A.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),u=b.dt,f=2*f*e,m=e*e,A.useSymplecticEuler?(e=1/(u*f),A=m/f):(e=1/(u*(u*m+f)),A=m/(u*m+f))):(e=0,A=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<p.motorTorque?(x.motorSpeed=p.motorSpeed,x.bb=p.motorTorque*b.dt):(x.motorSpeed=0,x.bb=0)),b=p.lowerLimit,p=p.upperLimit,u=.5*(b+p),h=((h-u+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+u,b>p?b=f=u=0:b==p?(u=-1/0,f=1/0,b=h-b):h<b?(u=-1/0,f=0,b=h-b+q,0<b&&(b=0)):h>p?(u=0,f=1/0,b=h-p-q,0>b&&(b=0)):b=f=u=0,x.Ia=u,x.Ha=f,x.Ma=e*(E?1/E:0),x.Fa=b*A,x=x.Aa,x.S=this.V.Yc,x.T=this.V.Zc,x.U=this.V.$c,x.W=this.V.Yc,x.X=this.V.Zc,x.Y=this.V.$c;b=this.Nb[4];E=a.rows[a.Ka++];e=E.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.S=0;e.T=0;e.U=0;e.W=0;e.X=0;e.Y=0;E.Fa=0;E.Ma=0;E.Ia=0;E.Ha=0;E.motorSpeed=0;E.bb=0;E.ua=b;x=E;x.Fa=l;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.S=this.V.Md;x.T=this.V.Nd;x.U=this.V.Od;x.W=this.V.Md;x.X=this.V.Nd;x.Y=this.V.Od;l=this.Nb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.S=0;b.T=0;b.U=0;b.W=0;b.X=0;b.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=l;x=a;x.Fa=d;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.S=this.V.ke;x.T=this.V.le;x.U=this.V.me;x.W=this.V.ke;x.X=this.V.le;x.Y=this.V.me},ed:function(){L.prototype.ed.call(this);var a=this.V,b=a.P.C.Za,e=a.P.D.Za,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,C,z,E,x,F,N,G,M,O,ga,ha,na,qa=a.P.ub*a.P.Yb+a.P.vb*a.P.Zb+a.P.wb*a.P.$b;if(-1.000001<qa&&-.999999>qa){var Da,ka,bb,U=a.P.ub,R=a.P.vb,za=a.P.wb,Na=U*U,Ra=R*R,wa=za*za,Pa;Na<Ra?Na<wa?(Pa=1/Math.sqrt(Ra+wa),Da=0,ka=za*Pa,bb=-R*Pa):(Pa=1/Math.sqrt(Na+Ra),Da=R*Pa,ka=-U*Pa,bb=0):Ra<wa?(Pa=1/Math.sqrt(wa+Na),Da=-za*Pa,ka=0,bb=U*Pa):(Pa=1/Math.sqrt(Na+Ra),Da=R*Pa,ka=-U*Pa,bb=0);d=Da;c=ka;f=bb;h=0}else{var Ba,Hb,J;Ba=a.P.vb*a.P.$b-a.P.wb*a.P.Zb;Hb=a.P.wb*a.P.Yb-a.P.ub*a.P.$b;J=a.P.ub*a.P.Zb-a.P.vb*a.P.Yb;var Qa=Math.sqrt(.5*(1+qa)),qa=.5/Qa;Ba*=qa;Hb*=qa;J*=qa;d=Ba;c=Hb;f=J;h=Qa}var ba,Q,P,xa,ta,W,pa,y;P=Q=ba=0;xa=1;ta=d;W=c;pa=f;y=h;var Ia=ba*ta+Q*W+P*pa+xa*y;0>Ia&&(Ia=-Ia,ta=-ta,W=-W,pa=-pa,y=-y);if(.999999<Ia){var ca,Ea,ya,Fa;ca=ta-ba;Ea=W-Q;ya=pa-P;Fa=y-xa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ea;pa=P+b/(b+e)*ya;y=xa+b/(b+e)*Fa;var Sa=ta*ta+W*W+pa*pa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=pa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ia);ta+=ba*-Ia;W+=Q*-Ia;pa+=P*-Ia;y+=xa*-Ia;var Z=ta*ta+W*W+pa*pa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;pa*=Z;y*=Z;var Ga=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;xa*=ra;l=ba+ta*Ga;g=Q+W*Ga;k=P+pa*Ga;m=xa+y*Ga}var va=l,I=g,La=k,Wa=m,S=2*va,Xa=2*I,T=2*La,K=va*S,ia=I*Xa,gb=La*T,da=va*Xa,Ca=I*T,sa=va*T,fb=Wa*S,kb=Wa*Xa,Ya=Wa*T;n=1-ia-gb;q=da-Ya;p=sa+kb;r=da+Ya;v=1-K-gb;t=Ca-fb;w=sa-kb;A=Ca+fb;u=1-K-ia;var ma,oa;ma=n*a.P.ub+q*a.P.vb+p*a.P.wb;oa=r*a.P.ub+v*a.P.vb+t*a.P.wb;D=w*a.P.ub+A*a.P.vb+u*a.P.wb;G=a.Yc;M=a.Zc;O=a.$c;ga=a.Md;ha=a.Nd;na=a.Od;var Ja=G*ma+M*oa+O*D;if(-1.000001<Ja&&-.999999>Ja){var Ha,ob,fa,ea=G*G,ja=M*M,cb=O*O,Aa;ea<ja?ea<cb?(Aa=1/Math.sqrt(ja+cb),Ha=0,ob=O*Aa,fa=-M*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-G*Aa,fa=0):ja<cb?(Aa=1/Math.sqrt(cb+ea),Ha=-O*Aa,ob=0,fa=G*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-G*Aa,fa=0);l=Ha;g=ob;k=fa;m=0}else{var sb,Ua,qb;sb=M*D-O*oa;Ua=O*ma-G*D;qb=G*oa-M*ma;var rb=Math.sqrt(.5*(1+Ja)),Ja=.5/rb;sb*=Ja;Ua*=Ja;qb*=Ja;l=sb;g=Ua;k=qb;m=rb}var ub=l,Va=g,xb=k,jb=m,Za=2*ub,ua=2*Va,Qb=2*xb,H=ub*Za,pb=Va*ua,db=xb*Qb,ab=ub*ua,$a=Va*Qb,hb=ub*Qb,B=jb*Za,Db=jb*ua,wb=jb*Qb;n=1-pb-db;q=ab-wb;p=hb+Db;r=ab+wb;v=1-H-db;t=$a-B;w=hb-Db;A=$a+B;u=1-H-pb;var tb,Fb,Oa;tb=n*ga+q*ha+p*na;Fb=r*ga+v*ha+t*na;Oa=w*ga+A*ha+u*na;C=tb;z=Fb;E=Oa;x=oa*E-D*z;F=D*C-ma*E;N=ma*z-oa*C;if(1E-6<x*x+F*F+N*N){var nb=x*x+F*F+N*N;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;F*=nb;N*=nb}else{var vb=ma*ma,yb=oa*oa,eb=D*D,Y;vb<yb?vb<eb?(Y=1/Math.sqrt(yb+eb),x=0,F=D*Y,N=-oa*Y):(Y=1/Math.sqrt(vb+yb),x=oa*Y,F=-ma*Y,N=0):yb<eb?(Y=1/Math.sqrt(eb+vb),x=-D*Y,F=0,N=ma*Y):(Y=1/Math.sqrt(vb+yb),x=oa*Y,F=-ma*Y,N=0)}C=F*D-N*oa;z=N*ma-x*D;E=x*oa-F*ma;a.Yc=ma;a.Zc=oa;a.$c=D;a.Md=C;a.Nd=z;a.Od=E;a.ke=x;a.le=F;a.me=N;var Ma,lb,Ta;Ma=this.vb*this.$b-this.wb*this.Zb;lb=this.wb*this.Yb-this.ub*this.$b;Ta=this.ub*this.Zb-this.vb*this.Yb;var ib=this.ub*this.Yb+this.vb*this.Zb+this.wb*this.$b,Ka=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib),Jb=Ma*Ma+lb*lb+Ta*Ta;0<Jb&&(Jb=1/Math.sqrt(Jb));Ma*=Jb;lb*=Jb;Ta*=Jb;Ma*=Ka;lb*=Ka;Ta*=Ka;this.angularErrorY=Ma*this.V.Md+lb*this.V.Nd+Ta*this.V.Od;this.angularErrorZ=Ma*this.V.ke+lb*this.V.le+Ta*this.V.me;var Ab,X,Cb;Ab=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Cb=this.xe*this.oe-this.ye*this.ne;ib=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib);0>Ab*this.V.Yc+X*this.V.Zc+Cb*this.V.$c&&(this.angle=-this.angle);this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Yb;a.y=this.Zb;a.z=this.$b;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Yb;a.y=this.Zb;a.z=this.$b},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.kb;a.y=this.lb;a.z=this.mb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.kb;a.y=this.lb;a.z=this.mb},nj:function(){return this.ue},Zk:function(){return this.Lh},Xk:function(){return this.angle},qa:Mb});Ce.R=!0;Ce.Jb=Ec;Ce.prototype=Gb(Ec.prototype,{za:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},qa:Ce});Gc.R=!0;Gc.prototype={Pa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},ab:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new Gc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a},qa:Gc};se.R=!0;se.Jb=L;se.prototype=Gb(L.prototype,{Rd:function(a,b,e){if(!(0<this.ue.frequency&&e)){var d,c,f;d=this.Gf-this.Df;c=this.Hf-this.Ef;f=this.If-this.Ff;var h;if(0<this.ue.frequency){h=6.28318530717958*this.ue.frequency;e=this.ue.dampingRatio;e<F.minSpringDamperDampingRatio&&(e=F.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.ue.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.Za+this.D.Za}else h=0,b=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;var g,k,m,n,q,p,r,v,t,w;g=-this.Rb;k=this.Qb;m=this.Rb;n=-this.Pb;e=-this.Qb;l=this.Pb;q=-this.Ub;p=this.Tb;r=this.Ub;v=-this.Sb;t=-this.Tb;w=this.Sb;var A=this.Nb[0],u=a.rows[a.Ka++],D=u.Aa;D.va=0;D.wa=0;D.xa=0;D.Ba=0;D.Ca=0;D.Da=0;D.S=0;D.T=0;D.U=0;D.W=0;D.X=0;D.Y=0;u.Fa=0;u.Ma=0;u.Ia=0;u.Ha=0;u.motorSpeed=0;u.bb=0;u.ua=A;A=u;A.Fa=d*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=1;d.wa=0;d.xa=0;d.Ba=1;d.Ca=0;d.Da=0;d.S=-0;d.T=-g;d.U=-k;d.W=-0;d.X=-q;d.Y=-p;d=this.Nb[1];g=a.rows[a.Ka++];k=g.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.S=0;k.T=0;k.U=0;k.W=0;k.X=0;k.Y=0;g.Fa=0;g.Ma=0;g.Ia=0;g.Ha=0;g.motorSpeed=0;g.bb=0;g.ua=d;A=g;A.Fa=c*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=0;d.wa=1;d.xa=0;d.Ba=0;d.Ca=1;d.Da=0;d.S=-m;d.T=-0;d.U=-n;d.W=-r;d.X=-0;d.Y=-v;c=this.Nb[2];a=a.rows[a.Ka++];d=a.Aa;d.va=0;d.wa=0;d.xa=0;d.Ba=0;d.Ca=0;d.Da=0;d.S=0;d.T=0;d.U=0;d.W=0;d.X=0;d.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=c;A=a;A.Fa=f*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=0;d.wa=0;d.xa=1;d.Ba=0;d.Ca=0;d.Da=1;d.S=-e;d.T=-l;d.U=-0;d.W=-t;d.X=-w;d.Y=-0}},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},nj:function(){return this.ue},qa:se});re.R=!0;re.Jb=Ec;re.prototype=Gb(Ec.prototype,{za:function(a,b,e){this.Vg(a,b,e);return this},qa:re});Lb.R=!0;Lb.prototype={Pa:function(a,b){this.frequency=a;this.dampingRatio=b;return this},ab:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new Lb;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a},qa:Lb};wc.R=!0;wc.prototype={Pa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},ab:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new wc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a},qa:wc};ab.R=!0;ab.Jb=L;ab.prototype=Gb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.zl*d,g,k,m,n,q,p,r,v,t,w,A,u,D,C,z,E,x,L;g=0;k=-this.Rb;m=this.Qb;n=this.Rb;q=0;p=-this.Pb;r=-this.Qb;v=this.Pb;w=t=0;A=-this.Ub;u=this.Tb;D=this.Ub;C=0;z=-this.Sb;E=-this.Tb;x=this.Sb;L=0;g=-g;k=-k;m=-m;n=-n;q=-q;p=-p;r=-r;v=-v;t=-t;w=-w;A=-A;u=-u;D=-D;C=-C;z=-z;E=-E;x=-x;L=-L;var N=this.Wf,G=this.Xf,M=this.Yf,O=(this.C.Z*N+this.C.$*G+this.C.aa*M)*N+(this.C.ba*N+this.C.ca*G+this.C.da*M)*G+(this.C.ea*N+this.C.fa*G+this.C.ga*M)*M,ga=(this.D.Z*N+this.D.$*G+this.D.aa*M)*N+(this.D.ba*N+this.D.ca*G+this.D.da*M)*G+(this.D.ea*N+this.D.fa*G+this.D.ga*M)*M;if(0<O){var ha=N*this.Pb+G*this.Qb+M*this.Rb,na=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-ha*ha;0<na&&(O=0<this.C.Za?1/(1/O+this.C.Lc*na):0)}if(0<ga){var qa=N*this.Sb+G*this.Tb+M*this.Ub,Da=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-qa*qa;0<Da&&(ga=0<this.D.Za?1/(1/ga+this.D.Lc*Da):0)}var ka=O+ga?1/(O+ga):0,bb=this.Zf,U=this.$f,R=this.ag,za=(this.C.Z*bb+this.C.$*U+this.C.aa*R)*bb+(this.C.ba*bb+this.C.ca*U+this.C.da*R)*U+(this.C.ea*bb+this.C.fa*U+this.C.ga*R)*R,Na=(this.D.Z*bb+this.D.$*U+this.D.aa*R)*bb+(this.D.ba*bb+this.D.ca*U+this.D.da*R)*U+(this.D.ea*bb+this.D.fa*U+this.D.ga*R)*R;if(0<za){var Ra=bb*this.Pb+U*this.Qb+R*this.Rb,wa=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-Ra*Ra;0<wa&&(za=0<this.C.Za?1/(1/za+this.C.Lc*wa):0)}if(0<Na){var Pa=bb*this.Sb+U*this.Tb+R*this.Ub,Ba=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-Pa*Pa;0<Ba&&(Na=0<this.D.Za?1/(1/Na+this.D.Lc*Ba):0)}var Ca=za+Na?1/(za+Na):0,J=this.Nb[0],Qa=a.rows[a.Ka++],ba=Qa.Aa;ba.va=0;ba.wa=0;ba.xa=0;ba.Ba=0;ba.Ca=0;ba.Da=0;ba.S=0;ba.T=0;ba.U=0;ba.W=0;ba.X=0;ba.Y=0;Qa.Fa=0;Qa.Ma=0;Qa.Ia=0;Qa.Ha=0;Qa.motorSpeed=0;Qa.bb=0;Qa.ua=J;var Q=Qa;Q.Fa=c;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;var P=Q.Aa;P.va=1;P.wa=0;P.xa=0;P.Ba=1;P.Ca=0;P.Da=0;P.S=g;P.T=k;P.U=m;P.W=w;P.X=A;P.Y=u;var xa=this.Nb[1],ta=a.rows[a.Ka++],W=ta.Aa;W.va=0;W.wa=0;W.xa=0;W.Ba=0;W.Ca=0;W.Da=0;W.S=0;W.T=0;W.U=0;W.W=0;W.X=0;W.Y=0;ta.Fa=0;ta.Ma=0;ta.Ia=0;ta.Ha=0;ta.motorSpeed=0;ta.bb=0;ta.ua=xa;Q=ta;Q.Fa=f;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;P=Q.Aa;P.va=0;P.wa=1;P.xa=0;P.Ba=0;P.Ca=1;P.Da=0;P.S=n;P.T=q;P.U=p;P.W=D;P.X=C;P.Y=z;var pa=this.Nb[2],y=a.rows[a.Ka++],Ia=y.Aa;Ia.va=0;Ia.wa=0;Ia.xa=0;Ia.Ba=0;Ia.Ca=0;Ia.Da=0;Ia.S=0;Ia.T=0;Ia.U=0;Ia.W=0;Ia.X=0;Ia.Y=0;y.Fa=0;y.Ma=0;y.Ia=0;y.Ha=0;y.motorSpeed=0;y.bb=0;y.ua=pa;Q=y;Q.Fa=h;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;P=Q.Aa;P.va=0;P.wa=0;P.xa=1;P.Ba=0;P.Ca=0;P.Da=1;P.S=r;P.T=v;P.U=t;P.W=E;P.X=x;P.Y=L;if(!this.Cm&&(0>=this.Fk.frequency||!e)){var ca=this.Nb[3],Ea=a.rows[a.Ka++],ya=Ea.Aa;ya.va=0;ya.wa=0;ya.xa=0;ya.Ba=0;ya.Ca=0;ya.Da=0;ya.S=0;ya.T=0;ya.U=0;ya.W=0;ya.X=0;ya.Y=0;Ea.Fa=0;Ea.Ma=0;Ea.Ia=0;Ea.Ha=0;Ea.motorSpeed=0;Ea.bb=0;Ea.ua=ca;var Q=Ea,Fa=this.yi,Sa=this.xk,la=this.Fk,Z,Ga,ra=F.angularSlop;if(e)Z=0,Ga=1;else{if(0<la.frequency){var ra=0,va=6.28318530717958*la.frequency,I=la.dampingRatio;I<F.minSpringDamperDampingRatio&&(I=F.minSpringDamperDampingRatio);var La=b.dt,Wa=2*I*va,S=va*va;la.useSymplecticEuler?(Z=1/(La*Wa),Ga=S/Wa):(Z=1/(La*(La*S+Wa)),Ga=S/(La*S+Wa))}else Z=0,Ga=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Sa.motorTorque?(Q.motorSpeed=Sa.motorSpeed,Q.bb=Sa.motorTorque*b.dt):(Q.motorSpeed=0,Q.bb=0)}var Xa=Sa.lowerLimit,T=Sa.upperLimit,K=.5*(Xa+T),Fa=Fa-K,Fa=((Fa+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Fa=Fa+K,ia,gb,da;Xa>T?da=gb=ia=0:Xa==T?(ia=-1/0,gb=1/0,da=Fa-Xa):Fa<Xa?(ia=-1/0,gb=0,da=Fa-Xa+ra,0<da&&(da=0)):Fa>T?(ia=0,gb=1/0,da=Fa-T-ra,0>da&&(da=0)):da=gb=ia=0;var jb=ka?1/ka:0;Q.Ia=ia;Q.Ha=gb;Q.Ma=Z*jb;Q.Fa=da*Ga;P=Q.Aa;P.S=this.Wf;P.T=this.Xf;P.U=this.Yf;P.W=this.Wf;P.X=this.Xf;P.Y=this.Yf}if(!this.Dm){var sa=this.Nb[4],fb=a.rows[a.Ka++],kb=fb.Aa;kb.va=0;kb.wa=0;kb.xa=0;kb.Ba=0;kb.Ca=0;kb.Da=0;kb.S=0;kb.T=0;kb.U=0;kb.W=0;kb.X=0;kb.Y=0;fb.Fa=0;fb.Ma=0;fb.Ia=0;fb.Ha=0;fb.motorSpeed=0;fb.bb=0;fb.ua=sa;Q=fb;Q.Fa=l;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;P=Q.Aa;P.S=this.Og;P.T=this.Pg;P.U=this.Qg;P.W=this.Og;P.X=this.Pg;P.Y=this.Qg}if(!this.Em&&(0>=this.Gk.frequency||!e)){var Ya=this.Nb[5],ma=a.rows[a.Ka++],oa=ma.Aa;oa.va=0;oa.wa=0;oa.xa=0;oa.Ba=0;oa.Ca=0;oa.Da=0;oa.S=0;oa.T=0;oa.U=0;oa.W=0;oa.X=0;oa.Y=0;ma.Fa=0;ma.Ma=0;ma.Ia=0;ma.Ha=0;ma.motorSpeed=0;ma.bb=0;ma.ua=Ya;var Q=ma,Ja=this.zi,Ha=this.yk,ob=this.Gk,fa,ea,ja=F.angularSlop;if(e)fa=0,ea=1;else{if(0<ob.frequency){var ja=0,cb=6.28318530717958*ob.frequency,Aa=ob.dampingRatio;Aa<F.minSpringDamperDampingRatio&&(Aa=F.minSpringDamperDampingRatio);var sb=b.dt,Ua=2*Aa*cb,qb=cb*cb;ob.useSymplecticEuler?(fa=1/(sb*Ua),ea=qb/Ua):(fa=1/(sb*(sb*qb+Ua)),ea=qb/(sb*qb+Ua))}else fa=0,ea=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Ha.motorTorque?(Q.motorSpeed=Ha.motorSpeed,Q.bb=Ha.motorTorque*b.dt):(Q.motorSpeed=0,Q.bb=0)}var rb=Ha.lowerLimit,ub=Ha.upperLimit,Va=.5*(rb+ub),Ja=Ja-Va,Ja=((Ja+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Ja=Ja+Va,xb,ab,Za;rb>ub?Za=ab=xb=0:rb==ub?(xb=-1/0,ab=1/0,Za=Ja-rb):Ja<rb?(xb=-1/0,ab=0,Za=Ja-rb+ja,0<Za&&(Za=0)):Ja>ub?(xb=0,ab=1/0,Za=Ja-ub-ja,0>Za&&(Za=0)):Za=ab=xb=0;var ua=Ca?1/Ca:0;Q.Ia=xb;Q.Ha=ab;Q.Ma=fa*ua;Q.Fa=Za*ea;P=Q.Aa;P.S=this.Zf;P.T=this.$f;P.U=this.ag;P.W=this.Zf;P.X=this.$f;P.Y=this.ag}},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f,h,l,g;a=this.ub;b=this.vb;e=this.wb;h=this.Rg;l=this.Sg;g=this.Tg;d=l*e-g*b;c=g*a-h*e;f=h*b-l*a;this.Wf=c*g-f*l;this.Xf=f*h-d*g;this.Yf=d*l-c*h;this.Og=d;this.Pg=c;this.Qg=f;this.Zf=b*f-e*c;this.$f=e*d-a*f;this.ag=a*c-b*d;a=this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf;0<a&&(a=1/Math.sqrt(a));this.Wf*=a;this.Xf*=a;this.Yf*=a;a=this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg;0<a&&(a=1/Math.sqrt(a));this.Og*=a;this.Pg*=a;this.Qg*=a;a=this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag;0<a&&(a=1/Math.sqrt(a));this.Zf*=a;this.$f*=a;this.ag*=a;this.Cm=!(this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf);this.Dm=!(this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg);this.Em=!(this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag);var k,m,n,q,p,r,v,t,w;k=this.ub;a=this.xe;b=this.th;m=this.vb;e=this.ye;d=this.uh;n=this.wb;c=this.ze;f=this.vh;q=this.Yb;p=this.ne;h=this.Rg;r=this.Zb;v=this.oe;l=this.Sg;t=this.$b;w=this.pe;g=this.Tg;var A,u,D;A=k*h+m*l+n*g;u=a*p+e*v+c*w;D=b*p+d*v+f*w;-1>=A?(e=Math.atan2(D,u),a=.5*e,b=-1.570796326794895,e=.5*-e):1<=A?(e=Math.atan2(D,u),a=.5*e,b=1.570796326794895,e*=.5):(A=Math.asin(A),k=Math.atan2(-(k*p+m*v+n*w),k*q+m*r+n*t),a=Math.atan2(-(a*h+e*l+c*g),b*h+d*l+f*g),b=A,e=k);this.yi=a;this.zl=b;this.zi=e;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Rg;a.y=this.Sg;a.z=this.Tg;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Rg;a.y=this.Sg;a.z=this.Tg},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.Ic;a.y=this.Jc;a.z=this.Kc;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.Ic;a.y=this.Jc;a.z=this.Kc},on:function(){return this.Fk},pn:function(){return this.Gk},kn:function(){return this.xk},ln:function(){return this.yk},en:function(){return this.yi},fn:function(){return this.zi},qa:ab});qe.R=!0;qe.Jb=Ec;qe.prototype=Gb(Ec.prototype,{za:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;d=a.a.o*f+a.a.i*h+a.a.l*l;e=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;f=this.localAxis1;f.x=d;f.y=e;f.z=a;d=c.x;e=c.y;f=c.z;c=b.a.o*d+b.a.i*e+b.a.l*f;a=b.a.f*d+b.a.m*e+b.a.g*f;b=b.a.h*d+b.a.j*e+b.a.s*f;d=this.localAxis2;d.x=c;d.y=a;d.z=b;return this},qa:qe});pe.R=!0;of.R=!0;of.prototype={qa:of};Pe.R=!0;Pe.prototype={qa:Pe};ak.R=!0;ak.prototype={za:function(a){this.Nc=a.Nc;for(var b=0,e=this.Nc;b<e;){var d=b++;this.gh[d]=a.gh[d];this.kh[d]=a.kh[d]}this.je=a.je;b=0;for(e=this.je;b<e;)d=b++,this.Dg[d]=a.Dg[d]},Tk:function(a,b,e,d,c,f,h){for(var l=0,g=this.je;l<g;){var k=l++,k=this.Dg[k],m=a.rows[k];this.Rk[k]=m.Fa*f-e[k]-m.Ma*d[k]}l=b.Oi;g=0;for(k=this.Nc;g<k;){var n=g++,m=this.gh[n],n=this.kh[n],q=a.rows[m],n=(0>n?q.Ia:0<n?q.Ha:0)-d[m];if(c[m]=n)for(var q=0,p=this.je;q<p;){var r=q++,v=r=this.Dg[r],t=this.Rk;t[v]-=l[m][r]*n}}g=this.Dg;k=this.je;for(n=m=0;n<k;)q=n++,m|=1<<g[q];b.zj[m]||(b.$m(m,g,k),b.zj[m]=!0);g=b.ik[m];b=!0;k=0;for(m=this.je;k<m;){for(var n=k++,q=this.Dg[n],p=a.rows[q],v=r=d[q],t=0,w=this.je;t<w;)var A=t++,v=v+this.Rk[this.Dg[A]]*g[n][A];if(v<p.Ia-F.directMlcpSolverEps||v>p.Ha+F.directMlcpSolverEps){b=!1;break}c[q]=v-r}if(h)return!0;if(!b)return!1;h=0;for(g=this.Nc;h<g;){n=h++;k=this.gh[n];m=a.rows[k];n=this.kh[n];q=d[k]+c[k];p=e[k];r=0;for(v=a.Ka;r<v;)t=r++,p+=l[k][t]*c[t];k=m.Fa*f-p-m.Ma*q;if(0>n&&k>F.directMlcpSolverEps||0<n&&k<-F.directMlcpSolverEps){b=!1;break}}return b},qa:ak};sg.R=!0;sg.prototype={qa:sg};Bk.R=!0;Bk.prototype={Oh:function(a,b){if(b==a.Ka)null==this.Nh[this.Ze]&&(this.Nh[this.Ze]=new ak(this.Dn)),this.Nh[this.Ze++].za(this.Te);else{var e=a.rows[b],d=e.Ia>-1/0,c=e.Ha<1/0;0==e.Ia&&0==e.Ha?(c=this.Te,c.gh[c.Nc]=b,c.kh[c.Nc]=0,c.Nc++,this.Oh(a,b+1),this.Te.Nc--):(e=this.Te,e.Dg[e.je]=b,e.je++,this.Oh(a,b+1),this.Te.je--,d&&(d=this.Te,d.gh[d.Nc]=b,d.kh[d.Nc]=-1,d.Nc++,this.Oh(a,b+1),this.Te.Nc--),c&&(c=this.Te,c.gh[c.Nc]=b,c.kh[c.Nc]=1,c.Nc++,this.Oh(a,b+1),this.Te.Nc--))}},qa:Bk};Rd.R=!0;Rd.prototype={qa:Rd};cc.R=!0;cc.Jb=Tb;cc.prototype=Gb(Tb.prototype,{jh:function(a){this.P.ed();this.P.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;this.$h.Uk(this.info,this.Xb);a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.je=0;a.Oh(this.info,0);a=this.ul;for(var b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b},sh:function(a){var b=this.P.Ec==ic.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ua;e.ua=0;e.Wc=0;e.tb=0}else{a=0;for(e=this.info.Ka;a<e;){var d=a++,c=this.info.rows[d],f=c.ua,h=f.ua*b;h<c.Ia?h=c.Ia:h>c.Ha&&(h=c.Ha);f.ua=h;0<c.bb?(h=f.Wc*b,c=c.bb,h<-c?h=-c:h>c&&(h=c),f.Wc=h):f.Wc=0;this.sf[d]=f.ua+f.Wc}var b=this.sf,e=a=!1,l,g,k,m,n,q,p,r,d=this.C.cb,f=this.C.eb,c=this.C.fb,h=this.D.cb;l=this.D.eb;g=this.D.fb;k=this.C.hb;m=this.C.ib;n=this.C.jb;q=this.D.hb;p=this.D.ib;r=this.D.jb;for(var v=0,t=this.info.Ka;v<t;){var w=v++,A=this.info.rows[w].Aa,u=this.Xb[w],w=b[w];A.wc&1&&(d+=u.md*w,f+=u.nd*w,c+=u.od*w,h+=u.pd*-w,l+=u.qd*-w,g+=u.rd*-w,a=!0);A.wc&2&&(k+=u.fd*w,m+=u.gd*w,n+=u.hd*w,q+=u.jd*-w,p+=u.kd*-w,r+=u.ld*-w,e=!0)}a&&(this.C.cb=d,this.C.eb=f,this.C.fb=c,this.D.cb=h,this.D.eb=l,this.D.fb=g);e&&(this.C.hb=k,this.C.ib=m,this.C.jb=n,this.D.hb=q,this.D.ib=p,this.D.jb=r)}},nh:function(){var a=this.info.Ka,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.cb;e=this.C.eb;d=this.C.fb;c=this.D.cb;f=this.D.eb;h=this.D.fb;l=this.C.hb;g=this.C.ib;k=this.C.jb;m=this.D.hb;n=this.D.ib;q=this.D.jb;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.ua,v=v.Aa,w=0,w=w+(b*v.va+e*v.wa+d*v.xa),w=w-(c*v.Ba+f*v.Ca+h*v.Da),w=w+(l*v.S+g*v.T+k*v.U),w=w-(m*v.W+n*v.X+q*v.Y);this.Hg[r]=w;this.Th[r]=t.ua;this.lj[r]=0}b=this.$h.Oi;for(e=0;e<a;)if(d=e++,h=this.info.rows[d],c=h.ua,l=this.Xb[d],0<h.bb)for(f=c.Wc,h=f+l.tf*(-h.motorSpeed-this.Hg[d]),l=c.Wc,h<-l?h=-l:h>l&&(h=l),c.Wc=h,c=h-f,this.lj[d]=c,f=0,h=a;f<h;)g=l=f++,k=this.Hg,k[g]+=c*b[d][l];e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ul.oc[b],this.Ee.Nh[b].Tk(this.info,this.$h,this.Hg,this.Th,this.sf,1,!1)){for(e=0;e<a;)c=e++,d=this.sf[c],this.info.rows[c].ua.ua+=d,f=this.lj,f[c]+=d;a=this.lj;d=e=!1;c=this.C.cb;f=this.C.eb;h=this.C.fb;l=this.D.cb;g=this.D.eb;k=this.D.fb;m=this.C.hb;n=this.C.ib;q=this.C.jb;p=this.D.hb;r=this.D.ib;t=this.D.jb;v=0;for(w=this.info.Ka;v<w;){var A=v++,u=this.info.rows[A].Aa,D=this.Xb[A],A=a[A];u.wc&1&&(c+=D.md*A,f+=D.nd*A,h+=D.od*A,l+=D.pd*-A,g+=D.qd*-A,k+=D.rd*-A,e=!0);u.wc&2&&(m+=D.fd*A,n+=D.gd*A,q+=D.hd*A,p+=D.jd*-A,r+=D.kd*-A,t+=D.ld*-A,d=!0)}e&&(this.C.cb=c,this.C.eb=f,this.C.fb=h,this.D.cb=l,this.D.eb=g,this.D.fb=k);d&&(this.C.hb=m,this.C.ib=n,this.C.jb=q,this.D.hb=p,this.D.ib=r,this.D.jb=t);a=this.ul;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ua,m=m.Aa;m.wc&1?(b+=m.va*k.ua,e+=m.wa*k.ua,d+=m.xa*k.ua):m.wc&2&&(c+=m.S*k.ua,f+=m.T*k.ua,h+=m.U*k.ua)}this.P.Ai=b*a.invDt;this.P.Bi=e*a.invDt;this.P.Ci=d*a.invDt;this.P.Di=c*a.invDt;this.P.Ei=f*a.invDt;this.P.Fi=h*a.invDt},Gg:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.$h.Uk(this.info,this.Xb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.je=0;a.Oh(this.info,0);for(var a=this.ui,b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b;a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ua.tb=0},mh:function(){var a=this.info.Ka,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.Sc;e=this.C.Tc;d=this.C.Uc;c=this.D.Sc;f=this.D.Tc;h=this.D.Uc;l=this.C.Oc;g=this.C.Pc;k=this.C.Qc;m=this.D.Oc;n=this.D.Pc;q=this.D.Qc;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.ua,v=v.Aa,w=0,w=w+(b*v.va+e*v.wa+d*v.xa),w=w-(c*v.Ba+f*v.Ca+h*v.Da),w=w+(l*v.S+g*v.T+k*v.U),w=w-(m*v.W+n*v.X+q*v.Y);this.Hg[r]=w;this.Th[r]=t.tb}e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ui.oc[b],this.Ee.Nh[b].Tk(this.info,this.$h,this.Hg,this.Th,this.sf,F.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)d=e++,this.info.rows[d].ua.tb+=this.sf[d];a=this.sf;d=e=!1;c=this.C.Sc;f=this.C.Tc;h=this.C.Uc;l=this.D.Sc;g=this.D.Tc;k=this.D.Uc;m=this.C.Oc;n=this.C.Pc;q=this.C.Qc;p=this.D.Oc;r=this.D.Pc;t=this.D.Qc;v=0;for(w=this.info.Ka;v<w;){var A=v++,u=this.info.rows[A].Aa,D=this.Xb[A],A=a[A];u.wc&1&&(c+=D.md*A,f+=D.nd*A,h+=D.od*A,l+=D.pd*-A,g+=D.qd*-A,k+=D.rd*-A,e=!0);u.wc&2&&(m+=D.fd*A,n+=D.gd*A,q+=D.hd*A,p+=D.jd*-A,r+=D.kd*-A,t+=D.ld*-A,d=!0)}e&&(this.C.Sc=c,this.C.Tc=f,this.C.Uc=h,this.D.Sc=l,this.D.Tc=g,this.D.Uc=k);d&&(this.C.Oc=m,this.C.Pc=n,this.C.Qc=q,this.D.Oc=p,this.D.Pc=r,this.D.Qc=t);a=this.ui;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},lh:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.$h.Uk(this.info,this.Xb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.je=0;a.Oh(this.info,0);for(var e=this.ui,d=this.Ee.Ze,c=0,f=0,h=0,l=e.n;h<l;){var g=h++,k=e.oc[g];k<d?(e.af[c]=k,++c):(e.af[d+f]=k,++f)}var m=e.oc;e.oc=e.af;e.af=m;for(var n=this.info.Ka,q=0;q<n;){var p=q++,r=this.info.rows[p].ua;this.Hg[p]=0;this.Th[p]=r.tb}for(var v=!1,t=0,w=this.Ee.Ze;t<w;){var A=t++,u=this.ui.oc[A];if(this.Ee.Nh[u].Tk(this.info,this.$h,this.Hg,this.Th,this.sf,F.positionNgsBaumgarte,!1)){for(var D=0,C=n;D<C;){var z=D++;this.info.rows[z].ua.tb+=this.sf[z]}for(var E=this.sf,x=!1,L=!1,N,G,M,O,ga,ha,na,qa,za,ka,bb,U,R=U=bb=ka=za=qa=na=ha=ga=O=M=G=N=0,Da=this.info.Ka;R<Da;){var Na=R++,Ra=this.info.rows[Na].Aa,wa=this.Xb[Na],Pa=E[Na];Ra.wc&1&&(N+=wa.md*Pa,G+=wa.nd*Pa,M+=wa.od*Pa,O+=wa.pd*-Pa,ga+=wa.qd*-Pa,ha+=wa.rd*-Pa,x=!0);Ra.wc&2&&(na+=wa.fd*Pa,qa+=wa.gd*Pa,za+=wa.hd*Pa,ka+=wa.jd*-Pa,bb+=wa.kd*-Pa,U+=wa.ld*-Pa,L=!0)}if(x){var Ba=this.C;Ba.a.v+=N;Ba.a.A+=G;Ba.a.B+=M;var Ca=this.D;Ca.a.v+=O;Ca.a.A+=ga;Ca.a.B+=ha}if(L){var J=this.C,Qa=Math.sqrt(na*na+qa*qa+za*za),ba=.5*Qa,Q,P;if(.5>ba){var xa=ba*ba;Q=.5*(1-.16666666666666666*xa+xa*xa*.008333333333333333);P=1-.5*xa+xa*xa*.041666666666666664}else Q=Math.sin(ba)/Qa,P=Math.cos(ba);var ta,W,pa;ta=na*Q;W=qa*Q;pa=za*Q;var y,Ia,ca,Ea;y=ta;Ia=W;ca=pa;Ea=P;var ya,Fa,Sa,la,Z=J.a.o,Ga=J.a.m,ra=J.a.s,va=Z+Ga+ra,I;0<va?(I=Math.sqrt(va+1),la=.5*I,I=.5/I,ya=(J.a.g-J.a.j)*I,Fa=(J.a.h-J.a.l)*I,Sa=(J.a.i-J.a.f)*I):Z>Ga?Z>ra?(I=Math.sqrt(Z-Ga-ra+1),ya=.5*I,I=.5/I,Fa=(J.a.f+J.a.i)*I,Sa=(J.a.h+J.a.l)*I,la=(J.a.g-J.a.j)*I):(I=Math.sqrt(ra-Z-Ga+1),Sa=.5*I,I=.5/I,ya=(J.a.h+J.a.l)*I,Fa=(J.a.j+J.a.g)*I,la=(J.a.i-J.a.f)*I):Ga>ra?(I=Math.sqrt(Ga-ra-Z+1),Fa=.5*I,I=.5/I,ya=(J.a.f+J.a.i)*I,Sa=(J.a.j+J.a.g)*I,la=(J.a.h-J.a.l)*I):(I=Math.sqrt(ra-Z-Ga+1),Sa=.5*I,I=.5/I,ya=(J.a.h+J.a.l)*I,Fa=(J.a.j+J.a.g)*I,la=(J.a.i-J.a.f)*I);ya=Ea*ya+y*la+Ia*Sa-ca*Fa;Fa=Ea*Fa-y*Sa+Ia*la+ca*ya;Sa=Ea*Sa+y*Fa-Ia*ya+ca*la;la=Ea*la-y*ya-Ia*Fa-ca*Sa;var La=ya*ya+Fa*Fa+Sa*Sa+la*la;1E-32<La&&(La=1/Math.sqrt(La));ya*=La;Fa*=La;Sa*=La;la*=La;var Wa=ya,S=Fa,Xa=Sa,T=la,K=2*Wa,ia=2*S,gb=2*Xa,da=Wa*K,ab=S*ia,sa=Xa*gb,fb=Wa*ia,kb=S*gb,Ya=Wa*gb,ma=T*K,oa=T*ia,Ja=T*gb;J.a.o=1-ab-sa;J.a.f=fb-Ja;J.a.h=Ya+oa;J.a.i=fb+Ja;J.a.m=1-da-sa;J.a.j=kb-ma;J.a.l=Ya-oa;J.a.g=kb+ma;J.a.s=1-da-ab;var Ha,ob,fa,ea,ja,cb,Aa,sb,Ua;Ha=J.a.o*J.Qa+J.a.f*J.Ta+J.a.h*J.Wa;ob=J.a.o*J.Ra+J.a.f*J.Ua+J.a.h*J.Xa;fa=J.a.o*J.Sa+J.a.f*J.Va+J.a.h*J.Ya;ea=J.a.i*J.Qa+J.a.m*J.Ta+J.a.j*J.Wa;ja=J.a.i*J.Ra+J.a.m*J.Ua+J.a.j*J.Xa;cb=J.a.i*J.Sa+J.a.m*J.Va+J.a.j*J.Ya;Aa=J.a.l*J.Qa+J.a.g*J.Ta+J.a.s*J.Wa;sb=J.a.l*J.Ra+J.a.g*J.Ua+J.a.s*J.Xa;Ua=J.a.l*J.Sa+J.a.g*J.Va+J.a.s*J.Ya;J.Z=Ha;J.$=ob;J.aa=fa;J.ba=ea;J.ca=ja;J.da=cb;J.ea=Aa;J.fa=sb;J.ga=Ua;var qb,rb,ub,Va,xb,jb,Za,ua,wb;qb=J.Z*J.a.o+J.$*J.a.f+J.aa*J.a.h;rb=J.Z*J.a.i+J.$*J.a.m+J.aa*J.a.j;ub=J.Z*J.a.l+J.$*J.a.g+J.aa*J.a.s;Va=J.ba*J.a.o+J.ca*J.a.f+J.da*J.a.h;xb=J.ba*J.a.i+J.ca*J.a.m+J.da*J.a.j;jb=J.ba*J.a.l+J.ca*J.a.g+J.da*J.a.s;Za=J.ea*J.a.o+J.fa*J.a.f+J.ga*J.a.h;ua=J.ea*J.a.i+J.fa*J.a.m+J.ga*J.a.j;wb=J.ea*J.a.l+J.fa*J.a.g+J.ga*J.a.s;J.Z=qb;J.$=rb;J.aa=ub;J.ba=Va;J.ca=xb;J.da=jb;J.ea=Za;J.fa=ua;J.ga=wb;var H=this.D,pb=Math.sqrt(ka*ka+bb*bb+U*U),db=.5*pb,tb,$a;if(.5>db){var hb=db*db;tb=.5*(1-.16666666666666666*hb+hb*hb*.008333333333333333);$a=1-.5*hb+hb*hb*.041666666666666664}else tb=Math.sin(db)/pb,$a=Math.cos(db);var B,Db,Ab;B=ka*tb;Db=bb*tb;Ab=U*tb;var Bb,Fb,Oa,nb;Bb=B;Fb=Db;Oa=Ab;nb=$a;var vb,yb,eb,Y,Ma=H.a.o,lb=H.a.m,Ta=H.a.s,ib=Ma+lb+Ta,Ka;0<ib?(Ka=Math.sqrt(ib+1),Y=.5*Ka,Ka=.5/Ka,vb=(H.a.g-H.a.j)*Ka,yb=(H.a.h-H.a.l)*Ka,eb=(H.a.i-H.a.f)*Ka):Ma>lb?Ma>Ta?(Ka=Math.sqrt(Ma-lb-Ta+1),vb=.5*Ka,Ka=.5/Ka,yb=(H.a.f+H.a.i)*Ka,eb=(H.a.h+H.a.l)*Ka,Y=(H.a.g-H.a.j)*Ka):(Ka=Math.sqrt(Ta-Ma-lb+1),eb=.5*Ka,Ka=.5/Ka,vb=(H.a.h+H.a.l)*Ka,yb=(H.a.j+H.a.g)*Ka,Y=(H.a.i-H.a.f)*Ka):lb>Ta?(Ka=Math.sqrt(lb-Ta-Ma+1),yb=.5*Ka,Ka=.5/Ka,vb=(H.a.f+H.a.i)*Ka,eb=(H.a.j+H.a.g)*Ka,Y=(H.a.h-H.a.l)*Ka):(Ka=Math.sqrt(Ta-Ma-lb+1),eb=.5*Ka,Ka=.5/Ka,vb=(H.a.h+H.a.l)*Ka,yb=(H.a.j+H.a.g)*Ka,Y=(H.a.i-H.a.f)*Ka);vb=nb*vb+Bb*Y+Fb*eb-Oa*yb;yb=nb*yb-Bb*eb+Fb*Y+Oa*vb;eb=nb*eb+Bb*yb-Fb*vb+Oa*Y;Y=nb*Y-Bb*vb-Fb*yb-Oa*eb;var Jb=vb*vb+yb*yb+eb*eb+Y*Y;1E-32<Jb&&(Jb=1/Math.sqrt(Jb));vb*=Jb;yb*=Jb;eb*=Jb;Y*=Jb;var Eb=vb,X=yb,Cb=eb,Gb=Y,Lb=2*Eb,Kb=2*X,ec=2*Cb,Mb=Eb*Lb,Nb=X*Kb,Tb=Cb*ec,Pb=Eb*Kb,Ub=X*ec,jc=Eb*ec,pc=Gb*Lb,kc=Gb*Kb,ac=Gb*ec;H.a.o=1-Nb-Tb;H.a.f=Pb-ac;H.a.h=jc+kc;H.a.i=Pb+ac;H.a.m=1-Mb-Tb;H.a.j=Ub-pc;H.a.l=jc-kc;H.a.g=Ub+pc;H.a.s=1-Mb-Nb;var Wb,Xb,Rb,fc,Sb,Ob,Yb,gc,Ib;Wb=H.a.o*H.Qa+H.a.f*H.Ta+H.a.h*H.Wa;Xb=H.a.o*H.Ra+H.a.f*H.Ua+H.a.h*H.Xa;Rb=H.a.o*H.Sa+H.a.f*H.Va+H.a.h*H.Ya;fc=H.a.i*H.Qa+H.a.m*H.Ta+H.a.j*H.Wa;Sb=H.a.i*H.Ra+H.a.m*H.Ua+H.a.j*H.Xa;Ob=H.a.i*H.Sa+H.a.m*H.Va+H.a.j*H.Ya;Yb=H.a.l*H.Qa+H.a.g*H.Ta+H.a.s*H.Wa;gc=H.a.l*H.Ra+H.a.g*H.Ua+H.a.s*H.Xa;Ib=H.a.l*H.Sa+H.a.g*H.Va+H.a.s*H.Ya;H.Z=Wb;H.$=Xb;H.aa=Rb;H.ba=fc;H.ca=Sb;H.da=Ob;H.ea=Yb;H.fa=gc;H.ga=Ib;var $b,mb,bc,cc,dc,qc,mc,hc,ic;$b=H.Z*H.a.o+H.$*H.a.f+H.aa*H.a.h;mb=H.Z*H.a.i+H.$*H.a.m+H.aa*H.a.j;bc=H.Z*H.a.l+H.$*H.a.g+H.aa*H.a.s;cc=H.ba*H.a.o+H.ca*H.a.f+H.da*H.a.h;dc=H.ba*H.a.i+H.ca*H.a.m+H.da*H.a.j;qc=H.ba*H.a.l+H.ca*H.a.g+H.da*H.a.s;mc=H.ea*H.a.o+H.fa*H.a.f+H.ga*H.a.h;hc=H.ea*H.a.i+H.fa*H.a.m+H.ga*H.a.j;ic=H.ea*H.a.l+H.fa*H.a.g+H.ga*H.a.s;H.Z=$b;H.$=mb;H.aa=bc;H.ba=cc;H.ca=dc;H.da=qc;H.ea=mc;H.fa=hc;H.ga=ic}for(var Zb=this.ui,sc=0;Zb.oc[sc]!=u;)++sc;for(;0<sc;){var vc=Zb.oc[sc];Zb.oc[sc]=Zb.oc[sc-1];Zb.oc[sc-1]=vc;--sc}v=!0;break}}v||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},$e:function(){this.P.ed();this.P.Cl()},qa:cc});Tf.R=!0;Tf.prototype={$m:function(a,b,e){for(var d=0;d<e;)for(var c=d++,f=b[c],h=0,l=e;h<l;){var g=h++;this.ck[c][g]=this.Za[f][b[g]]}d=this.ck;a=this.ik[a];var k;switch(e){case 4:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[5];k=a[5];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=c[5]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=c[5]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=c[5]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=c[5]*g[4];g=d[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=c[5]*g[4];c=d[5];b=a[5];e=1/c[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[5];g=d[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=d[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=d[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=d[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;c=d[h];b=a[h];l=1/c[h];b[h]=l;g=0;for(k=h;g<k;){var m=g++;b[m]*=l}g=h+1;for(k=e;g<k;)m=g++,c[m]*=l;for(var m=0,n=h;m<n;){var q=m++,g=d[q];k=a[q];for(var p=0,q=q+1;p<q;){var r=p++;k[r]-=b[r]*g[h]}k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}m=h+1;for(n=e;m<n;){k=m++;g=d[k];k=a[k];p=0;for(q=h;p<q;)r=p++,k[r]-=b[r]*g[h];k[h]=-l*g[h];k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}}for(d=1;d<e;)for(c=d++,b=a[c],f=0,h=c;f<h;)l=f++,a[l][c]=b[l]}},Uk:function(a,b){var e=this.Za,d=this.Oi,c=a.Ka,f=a.Ce,h=a.De,l=f.Za,g=h.Za,k,m,n,q,p,r,v,t,w,A,u,D,C,z,E,x;k=f.Z;m=f.$;n=f.aa;q=f.ba;p=f.ca;r=f.da;v=f.ea;t=f.fa;f=f.ga;w=h.Z;A=h.$;u=h.aa;D=h.ba;C=h.ca;z=h.da;E=h.ea;x=h.fa;for(var h=h.ga,F=0;F<c;){var N=F++,G=a.rows[N].Aa,N=b[N];G.Bm();G.wc&1?(N.md=G.va*l,N.nd=G.wa*l,N.od=G.xa*l,N.pd=G.Ba*g,N.qd=G.Ca*g,N.rd=G.Da*g):(N.md=0,N.nd=0,N.od=0,N.pd=0,N.qd=0,N.rd=0);if(G.wc&2){var L,M,O;L=k*G.S+m*G.T+n*G.U;M=q*G.S+p*G.T+r*G.U;O=v*G.S+t*G.T+f*G.U;N.fd=L;N.gd=M;N.hd=O;L=w*G.W+A*G.X+u*G.Y;M=D*G.W+C*G.X+z*G.Y;G=E*G.W+x*G.X+h*G.Y;N.jd=L;N.kd=M;N.ld=G}else N.fd=0,N.gd=0,N.hd=0,N.jd=0,N.kd=0,N.ld=0}for(l=0;l<c;)for(g=l++,k=a.rows[g].Aa,m=g,n=c;m<n;)q=m++,p=b[q],r=k.va*p.md+k.wa*p.nd+k.xa*p.od+(k.S*p.fd+k.T*p.gd+k.U*p.hd)+(k.Ba*p.pd+k.Ca*p.qd+k.Da*p.rd)+(k.W*p.jd+k.X*p.kd+k.Y*p.ld),g==q?(e[g][q]=r+a.rows[g].Ma,d[g][q]=r,p.mass=r+a.rows[g].Ma,p.tf=r,0!=p.mass&&(p.mass=1/p.mass),p.tf&&(p.tf=1/p.tf)):(e[g][q]=r,e[q][g]=r,d[g][q]=r,d[q][g]=r);a=0;for(b=this.Ij;a<b;)e=a++,this.zj[e]=!1},qa:Tf};Kb.R=!0;Kb.Jb=Tb;Kb.prototype=Gb(Tb.prototype,{jh:function(a){this.ti.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.Za;var b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.info.rows[z],z=this.Xb[z],x=E.Eg;z.Uh=x.va*a;z.Vh=x.wa*a;z.Wh=x.xa*a;z.Xh=x.Ba*b;z.Yh=x.Ca*b;z.Zh=x.Da*b;var F,N,G;F=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;z.Nf=F;z.Of=N;z.Pf=G;F=n*x.W+q*x.X+p*x.Y;N=r*x.W+v*x.X+t*x.Y;G=w*x.W+A*x.X+u*x.Y;z.Qf=F;z.Rf=N;z.Sf=G;z.ie=a+b+(z.Nf*x.S+z.Of*x.T+z.Pf*x.U)+(z.Qf*x.W+z.Rf*x.X+z.Sf*x.Y);0!=z.ie&&(z.ie=1/z.ie);x=E.vj;E=E.uj;z.gl=x.va*a;z.hl=x.wa*a;z.il=x.xa*a;z.jl=x.Ba*b;z.kl=x.Ca*b;z.ll=x.Da*b;z.al=E.va*a;z.bl=E.wa*a;z.cl=E.xa*a;z.dl=E.Ba*b;z.el=E.Ca*b;z.fl=E.Da*b;F=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;z.oj=F;z.pj=N;z.qj=G;F=n*x.W+q*x.X+p*x.Y;N=r*x.W+v*x.X+t*x.Y;G=w*x.W+A*x.X+u*x.Y;z.rj=F;z.sj=N;z.tj=G;F=e*E.S+d*E.T+c*E.U;N=f*E.S+h*E.T+l*E.U;G=g*E.S+k*E.T+m*E.U;z.Tj=F;z.Uj=N;z.Vj=G;F=n*E.W+q*E.X+p*E.Y;N=r*E.W+v*E.X+t*E.Y;G=w*E.W+A*E.X+u*E.Y;z.Wj=F;z.Xj=N;z.Yj=G;x=a+b+(z.oj*x.S+z.pj*x.T+z.qj*x.U)+(z.rj*x.W+z.sj*x.X+z.tj*x.Y);N=F=z.oj*E.S+z.pj*E.T+z.qj*E.U+(z.rj*E.W+z.sj*E.X+z.tj*E.Y);E=a+b+(z.Tj*E.S+z.Uj*E.T+z.Vj*E.U)+(z.Wj*E.W+z.Xj*E.X+z.Yj*E.Y);(G=x*E-F*N)&&(G=1/G);z.om=E*G;z.pm=-F*G;z.qm=-N*G;z.rm=x*G}},sh:function(a){var b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.cb;e=this.C.eb;d=this.C.fb;c=this.D.cb;f=this.D.eb;h=this.D.fb;l=this.C.hb;g=this.C.ib;k=this.C.jb;m=this.D.hb;n=this.D.ib;q=this.D.jb;for(var p=0,r=this.info.Ka;p<r;){var v=p++,t=this.info.rows[v],w=t.ua,v=this.Xb[v],A=t.vj,u=t.uj,t=w.Xc,A=w.Ue*A.va+w.Ve*A.wa+w.We*A.xa,u=w.Ue*u.va+w.Ve*u.wa+w.We*u.xa;w.yc=A;w.xc=u;w.Xc*=a.dtRatio;w.yc*=a.dtRatio;w.xc*=a.dtRatio;b+=v.Uh*t;e+=v.Vh*t;d+=v.Wh*t;b+=v.gl*A;e+=v.hl*A;d+=v.il*A;b+=v.al*u;e+=v.bl*u;d+=v.cl*u;c+=v.Xh*-t;f+=v.Yh*-t;h+=v.Zh*-t;c+=v.jl*-A;f+=v.kl*-A;h+=v.ll*-A;c+=v.dl*-u;f+=v.el*-u;h+=v.fl*-u;l+=v.Nf*t;g+=v.Of*t;k+=v.Pf*t;l+=v.oj*A;g+=v.pj*A;k+=v.qj*A;l+=v.Tj*u;g+=v.Uj*u;k+=v.Vj*u;m+=v.Qf*-t;n+=v.Rf*-t;q+=v.Sf*-t;m+=v.rj*-A;n+=v.sj*-A;q+=v.tj*-A;m+=v.Wj*-u;n+=v.Xj*-u;q+=v.Yj*-u}this.C.cb=b;this.C.eb=e;this.C.fb=d;this.D.cb=c;this.D.eb=f;this.D.fb=h;this.C.hb=l;this.C.ib=g;this.C.jb=k;this.D.hb=m;this.D.ib=n;this.D.jb=q},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.cb;b=this.C.eb;e=this.C.fb;d=this.D.cb;c=this.D.eb;f=this.D.fb;h=this.C.hb;l=this.C.ib;g=this.C.jb;k=this.D.hb;m=this.D.ib;n=this.D.jb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Xb[r],t=v.ua,w=0,A=v.vj,w=w+(a*A.va+b*A.wa+e*A.xa),w=w-(d*A.Ba+c*A.Ca+f*A.Da),w=w+(h*A.S+l*A.T+g*A.U),w=w-(k*A.W+m*A.X+n*A.Y),u=0,A=v.uj,u=u+(a*A.va+b*A.wa+e*A.xa),u=u-(d*A.Ba+c*A.Ca+f*A.Da),u=u+(h*A.S+l*A.T+g*A.U),u=u-(k*A.W+m*A.X+n*A.Y),A=-(w*r.om+u*r.pm),D=-(w*r.qm+u*r.rm),w=t.yc,u=t.xc;t.yc+=A;t.xc+=D;(v=v.friction*t.Xc)?(A=t.yc*t.yc+t.xc*t.xc,A>v*v&&(v/=Math.sqrt(A),t.yc*=v,t.xc*=v)):(t.yc=0,t.xc=0);A=t.yc-w;D=t.xc-u;a+=r.gl*A;b+=r.hl*A;e+=r.il*A;a+=r.al*D;b+=r.bl*D;e+=r.cl*D;d+=r.jl*-A;c+=r.kl*-A;f+=r.ll*-A;d+=r.dl*-D;c+=r.el*-D;f+=r.fl*-D;h+=r.oj*A;l+=r.pj*A;g+=r.qj*A;h+=r.Tj*D;l+=r.Uj*D;g+=r.Vj*D;k+=r.rj*-A;m+=r.sj*-A;n+=r.tj*-A;k+=r.Wj*-D;m+=r.Xj*-D;n+=r.Yj*-D}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.Xb[r],t=v.ua,w=0,u=v.Eg,w+=a*u.va+b*u.wa+e*u.xa,w-=d*u.Ba+c*u.Ca+f*u.Da,w+=h*u.S+l*u.T+g*u.U,w-=k*u.W+m*u.X+n*u.Y,v=(v.Fa-w)*r.ie,w=t.Xc,t.Xc+=v,0>t.Xc&&(t.Xc=0),v=t.Xc-w,a+=r.Uh*v,b+=r.Vh*v,e+=r.Wh*v,d+=r.Xh*-v,c+=r.Yh*-v,f+=r.Zh*-v,h+=r.Nf*v,l+=r.Of*v,g+=r.Pf*v,k+=r.Qf*-v,m+=r.Rf*-v,n+=r.Sf*-v;this.C.cb=a;this.C.eb=b;this.C.fb=e;this.D.cb=d;this.D.eb=c;this.D.fb=f;this.C.hb=h;this.C.ib=l;this.C.jb=g;this.D.hb=k;this.D.ib=m;this.D.jb=n},Gg:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.Xb[z],z=this.info.rows[z].Eg;E.Uh=z.va*a;E.Vh=z.wa*a;E.Wh=z.xa*a;E.Xh=z.Ba*b;E.Yh=z.Ca*b;E.Zh=z.Da*b;var x,F,N;x=e*z.S+d*z.T+c*z.U;F=f*z.S+h*z.T+l*z.U;N=g*z.S+k*z.T+m*z.U;E.Nf=x;E.Of=F;E.Pf=N;x=n*z.W+q*z.X+p*z.Y;F=r*z.W+v*z.X+t*z.Y;N=w*z.W+A*z.X+u*z.Y;E.Qf=x;E.Rf=F;E.Sf=N;E.ie=a+b+(E.Nf*z.S+E.Of*z.T+E.Pf*z.U)+(E.Qf*z.W+E.Rf*z.X+E.Sf*z.Y);0!=E.ie&&(E.ie=1/E.ie)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ua.tb=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Sc;b=this.C.Tc;e=this.C.Uc;d=this.D.Sc;c=this.D.Tc;f=this.D.Uc;h=this.C.Oc;l=this.C.Pc;g=this.C.Qc;k=this.D.Oc;m=this.D.Pc;n=this.D.Qc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Xb[r],t=v.ua,w=v.Eg,A=0,A=A+(a*w.va+b*w.wa+e*w.xa),A=A-(d*w.Ba+c*w.Ca+f*w.Da),A=A+(h*w.S+l*w.T+g*w.U),A=A-(k*w.W+m*w.X+n*w.Y),v=(v.Fa-A)*r.ie*F.positionSplitImpulseBaumgarte,w=t.tb;t.tb+=v;0>t.tb&&(t.tb=0);v=t.tb-w;a+=r.Uh*v;b+=r.Vh*v;e+=r.Wh*v;d+=r.Xh*-v;c+=r.Yh*-v;f+=r.Zh*-v;h+=r.Nf*v;l+=r.Of*v;g+=r.Pf*v;k+=r.Qf*-v;m+=r.Rf*-v;n+=r.Sf*-v}this.C.Sc=a;this.C.Tc=b;this.C.Uc=e;this.D.Sc=d;this.D.Tc=c;this.D.Uc=f;this.C.Oc=h;this.C.Pc=l;this.C.Qc=g;this.D.Oc=k;this.D.Pc=m;this.D.Qc=n},lh:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.Xb[z],x=this.info.rows[z].Eg;E.Uh=x.va*a;E.Vh=x.wa*a;E.Wh=x.xa*a;E.Xh=x.Ba*b;E.Yh=x.Ca*b;E.Zh=x.Da*b;var L,N,G;L=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;E.Nf=L;E.Of=N;E.Pf=G;var M,O,ga;M=n*x.W+q*x.X+p*x.Y;O=r*x.W+v*x.X+t*x.Y;ga=w*x.W+A*x.X+u*x.Y;E.Qf=M;E.Rf=O;E.Sf=ga;E.ie=a+b+(E.Nf*x.S+E.Of*x.T+E.Pf*x.U)+(E.Qf*x.W+E.Rf*x.X+E.Sf*x.Y);0!=E.ie&&(E.ie=1/E.ie)}for(var ha,na,qa,wa,ka,za,U,R,Da,Na,Ra,Ca,Pa=Ca=Ra=Na=Da=R=U=za=ka=wa=qa=na=ha=0,Ba=this.info.Ka;Pa<Ba;){var ab=Pa++,J=this.info.rows[ab],Qa=this.Xb[ab],ba=J.ua,Q=J.Eg,P=0,P=P+(ha*Q.va+na*Q.wa+qa*Q.xa),P=P-(wa*Q.Ba+ka*Q.Ca+za*Q.Da),P=P+(U*Q.S+R*Q.T+Da*Q.U),P=P-(Na*Q.W+Ra*Q.X+Ca*Q.Y),xa=(J.Fa-P)*Qa.ie*F.positionNgsBaumgarte,ta=ba.tb;ba.tb+=xa;0>ba.tb&&(ba.tb=0);xa=ba.tb-ta;ha+=Qa.Uh*xa;na+=Qa.Vh*xa;qa+=Qa.Wh*xa;wa+=Qa.Xh*-xa;ka+=Qa.Yh*-xa;za+=Qa.Zh*-xa;U+=Qa.Nf*xa;R+=Qa.Of*xa;Da+=Qa.Pf*xa;Na+=Qa.Qf*-xa;Ra+=Qa.Rf*-xa;Ca+=Qa.Sf*-xa}var W=this.C;W.a.v+=ha;W.a.A+=na;W.a.B+=qa;var pa=this.D;pa.a.v+=wa;pa.a.A+=ka;pa.a.B+=za;var y=this.C,Ia=Math.sqrt(U*U+R*R+Da*Da),ca=.5*Ia,Ea,ya;if(.5>ca){var Fa=ca*ca;Ea=.5*(1-.16666666666666666*Fa+Fa*Fa*.008333333333333333);ya=1-.5*Fa+Fa*Fa*.041666666666666664}else Ea=Math.sin(ca)/Ia,ya=Math.cos(ca);var Sa,la;Sa=U*Ea;la=R*Ea;var Z,Ga;Z=Da*Ea;Ga=ya;var ra,va,I,La,Wa=y.a.o,S=y.a.m,Xa=y.a.s,T=Wa+S+Xa,K;0<T?(K=Math.sqrt(T+1),La=.5*K,K=.5/K,ra=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,I=(y.a.i-y.a.f)*K):Wa>S?Wa>Xa?(K=Math.sqrt(Wa-S-Xa+1),ra=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,I=(y.a.h+y.a.l)*K,La=(y.a.g-y.a.j)*K):(K=Math.sqrt(Xa-Wa-S+1),I=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K):S>Xa?(K=Math.sqrt(S-Xa-Wa+1),va=.5*K,K=.5/K,ra=(y.a.f+y.a.i)*K,I=(y.a.j+y.a.g)*K,La=(y.a.h-y.a.l)*K):(K=Math.sqrt(Xa-Wa-S+1),I=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K);ra=Ga*ra+Sa*La+la*I-Z*va;va=Ga*va-Sa*I+la*La+Z*ra;I=Ga*I+Sa*va-la*ra+Z*La;La=Ga*La-Sa*ra-la*va-Z*I;var ia=ra*ra+va*va+I*I+La*La;1E-32<ia&&(ia=1/Math.sqrt(ia));ra*=ia;va*=ia;I*=ia;La*=ia;var gb=ra,da=va,jb=I,sa=La,fb=2*gb,kb=2*da,Ya=2*jb,ma=gb*fb,oa=da*kb,Ja=jb*Ya,Ha=gb*kb,ob=da*Ya,fa=gb*Ya,ea=sa*fb,ja=sa*kb,cb=sa*Ya;y.a.o=1-oa-Ja;y.a.f=Ha-cb;y.a.h=fa+ja;y.a.i=Ha+cb;y.a.m=1-ma-Ja;y.a.j=ob-ea;y.a.l=fa-ja;y.a.g=ob+ea;y.a.s=1-ma-oa;var Aa,sb,Ua,qb,rb,ub,Va,xb,tb;Aa=y.a.o*y.Qa+y.a.f*y.Ta+y.a.h*y.Wa;sb=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;Ua=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;qb=y.a.i*y.Qa+y.a.m*y.Ta+y.a.j*y.Wa;rb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;ub=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;Va=y.a.l*y.Qa+y.a.g*y.Ta+y.a.s*y.Wa;xb=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;tb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;y.Z=Aa;y.$=sb;y.aa=Ua;y.ba=qb;y.ca=rb;y.da=ub;y.ea=Va;y.fa=xb;y.ga=tb;var Za,ua,wb,H,pb,db,Ab,$a,hb;Za=y.Z*y.a.o+y.$*y.a.f+y.aa*y.a.h;ua=y.Z*y.a.i+y.$*y.a.m+y.aa*y.a.j;wb=y.Z*y.a.l+y.$*y.a.g+y.aa*y.a.s;H=y.ba*y.a.o+y.ca*y.a.f+y.da*y.a.h;pb=y.ba*y.a.i+y.ca*y.a.m+y.da*y.a.j;db=y.ba*y.a.l+y.ca*y.a.g+y.da*y.a.s;Ab=y.ea*y.a.o+y.fa*y.a.f+y.ga*y.a.h;$a=y.ea*y.a.i+y.fa*y.a.m+y.ga*y.a.j;hb=y.ea*y.a.l+y.fa*y.a.g+y.ga*y.a.s;y.Z=Za;y.$=ua;y.aa=wb;y.ba=H;y.ca=pb;y.da=db;y.ea=Ab;y.fa=$a;y.ga=hb;var B=this.D,Db=Math.sqrt(Na*Na+Ra*Ra+Ca*Ca),Bb=.5*Db,Eb,Fb;if(.5>Bb){var Oa=Bb*Bb;Eb=.5*(1-.16666666666666666*Oa+Oa*Oa*.008333333333333333);Fb=1-.5*Oa+Oa*Oa*.041666666666666664}else Eb=Math.sin(Bb)/Db,Fb=Math.cos(Bb);var nb,vb;nb=Na*Eb;vb=Ra*Eb;var yb,eb;yb=Ca*Eb;eb=Fb;var Y,Ma,lb,Ta,ib=B.a.o,Ka=B.a.m,Jb=B.a.s,Gb=ib+Ka+Jb,X;0<Gb?(X=Math.sqrt(Gb+1),Ta=.5*X,X=.5/X,Y=(B.a.g-B.a.j)*X,Ma=(B.a.h-B.a.l)*X,lb=(B.a.i-B.a.f)*X):ib>Ka?ib>Jb?(X=Math.sqrt(ib-Ka-Jb+1),Y=.5*X,X=.5/X,Ma=(B.a.f+B.a.i)*X,lb=(B.a.h+B.a.l)*X,Ta=(B.a.g-B.a.j)*X):(X=Math.sqrt(Jb-ib-Ka+1),lb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,Ma=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X):Ka>Jb?(X=Math.sqrt(Ka-Jb-ib+1),Ma=.5*X,X=.5/X,Y=(B.a.f+B.a.i)*X,lb=(B.a.j+B.a.g)*X,Ta=(B.a.h-B.a.l)*X):(X=Math.sqrt(Jb-ib-Ka+1),lb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,Ma=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X);Y=eb*Y+nb*Ta+vb*lb-yb*Ma;Ma=eb*Ma-nb*lb+vb*Ta+yb*Y;lb=eb*lb+nb*Ma-vb*Y+yb*Ta;Ta=eb*Ta-nb*Y-vb*Ma-yb*lb;var Cb=Y*Y+Ma*Ma+lb*lb+Ta*Ta;1E-32<Cb&&(Cb=1/Math.sqrt(Cb));Y*=Cb;Ma*=Cb;lb*=Cb;Ta*=Cb;var Lb=Y,Kb=Ma,Mb=lb,ec=Ta,Nb=2*Lb,Tb=2*Kb,Pb=2*Mb,Ub=Lb*Nb,Zb=Kb*Tb,jc=Mb*Pb,pc=Lb*Tb,kc=Kb*Pb,ac=Lb*Pb,Wb=ec*Nb,Xb=ec*Tb,Rb=ec*Pb;B.a.o=1-Zb-jc;B.a.f=pc-Rb;B.a.h=ac+Xb;B.a.i=pc+Rb;B.a.m=1-Ub-jc;B.a.j=kc-Wb;B.a.l=ac-Xb;B.a.g=kc+Wb;B.a.s=1-Ub-Zb;var fc,Sb,Ob,Yb,gc,Ib,$b,mb,bc;fc=B.a.o*B.Qa+B.a.f*B.Ta+B.a.h*B.Wa;Sb=B.a.o*B.Ra+B.a.f*B.Ua+B.a.h*B.Xa;Ob=B.a.o*B.Sa+B.a.f*B.Va+B.a.h*B.Ya;Yb=B.a.i*B.Qa+B.a.m*B.Ta+B.a.j*B.Wa;gc=B.a.i*B.Ra+B.a.m*B.Ua+B.a.j*B.Xa;Ib=B.a.i*B.Sa+B.a.m*B.Va+B.a.j*B.Ya;$b=B.a.l*B.Qa+B.a.g*B.Ta+B.a.s*B.Wa;mb=B.a.l*B.Ra+B.a.g*B.Ua+B.a.s*B.Xa;bc=B.a.l*B.Sa+B.a.g*B.Va+B.a.s*B.Ya;B.Z=fc;B.$=Sb;B.aa=Ob;B.ba=Yb;B.ca=gc;B.da=Ib;B.ea=$b;B.fa=mb;B.ga=bc;var cc,dc,qc,mc,hc,ic,nc,sc,vc;cc=B.Z*B.a.o+B.$*B.a.f+B.aa*B.a.h;dc=B.Z*B.a.i+B.$*B.a.m+B.aa*B.a.j;qc=B.Z*B.a.l+B.$*B.a.g+B.aa*B.a.s;mc=B.ba*B.a.o+B.ca*B.a.f+B.da*B.a.h;hc=B.ba*B.a.i+B.ca*B.a.m+B.da*B.a.j;ic=B.ba*B.a.l+B.ca*B.a.g+B.da*B.a.s;nc=B.ea*B.a.o+B.fa*B.a.f+B.ga*B.a.h;sc=B.ea*B.a.i+B.fa*B.a.m+B.ga*B.a.j;vc=B.ea*B.a.l+B.fa*B.a.g+B.ga*B.a.s;B.Z=cc;B.$=dc;B.aa=qc;B.ba=mc;B.ca=hc;B.da=ic;B.ea=nc;B.fa=sc;B.ga=vc},$e:function(){for(var a=0,b=this.info.Ka;a<b;){var e=a++,d=this.info.rows[e],e=d.ua,c=d.vj,d=d.uj,f,h,l;l=h=f=0;f+=c.va*e.yc;h+=c.wa*e.yc;l+=c.xa*e.yc;f+=d.va*e.xc;h+=d.wa*e.xc;l+=d.xa*e.xc;e.Ue=f;e.Ve=h;e.We=l}this.ti.Ik()},qa:Kb});nc.R=!0;nc.Jb=Tb;nc.prototype=Gb(Tb.prototype,{jh:function(a){this.P.ed();this.P.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.Za;var b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.info.rows[z],z=this.Xb[z],x=E.Aa;x.Bm();x.wc&1?(z.md=x.va*a,z.nd=x.wa*a,z.od=x.xa*a,z.pd=x.Ba*b,z.qd=x.Ca*b,z.rd=x.Da*b):(z.md=0,z.nd=0,z.od=0,z.pd=0,z.qd=0,z.rd=0);if(x.wc&2){var F,N,G;F=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;z.fd=F;z.gd=N;z.hd=G;F=n*x.W+q*x.X+p*x.Y;N=r*x.W+v*x.X+t*x.Y;G=w*x.W+A*x.X+u*x.Y;z.jd=F;z.kd=N;z.ld=G}else z.fd=0,z.gd=0,z.hd=0,z.jd=0,z.kd=0,z.ld=0;z.tf=z.md*x.va+z.nd*x.wa+z.od*x.xa+(z.pd*x.Ba+z.qd*x.Ca+z.rd*x.Da)+(z.fd*x.S+z.gd*x.T+z.hd*x.U)+(z.jd*x.W+z.kd*x.X+z.ld*x.Y);z.mass=z.tf+E.Ma;z.tf&&(z.tf=1/z.tf);0!=z.mass&&(z.mass=1/z.mass)}},sh:function(a){var b=this.P.Ec==ic.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ua;e.ua=0;e.Wc=0;e.tb=0}else{var d,c,f,h,l,g,k,m,n,q;a=this.C.cb;e=this.C.eb;d=this.C.fb;c=this.D.cb;f=this.D.eb;h=this.D.fb;l=this.C.hb;g=this.C.ib;k=this.C.jb;m=this.D.hb;n=this.D.ib;q=this.D.jb;for(var p=0,r=this.info.Ka;p<r;){var v=p++,t=this.Xb[v],v=this.info.rows[v].ua;v.ua*=b;v.Wc*=b;v=v.ua+v.Wc;a+=t.md*v;e+=t.nd*v;d+=t.od*v;c+=t.pd*-v;f+=t.qd*-v;h+=t.rd*-v;l+=t.fd*v;g+=t.gd*v;k+=t.hd*v;m+=t.jd*-v;n+=t.kd*-v;q+=t.ld*-v}this.C.cb=a;this.C.eb=e;this.C.fb=d;this.D.cb=c;this.D.eb=f;this.D.fb=h;this.C.hb=l;this.C.ib=g;this.C.jb=k;this.D.hb=m;this.D.ib=n;this.D.jb=q}},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.cb;b=this.C.eb;e=this.C.fb;d=this.D.cb;c=this.D.eb;f=this.D.fb;h=this.C.hb;l=this.C.ib;g=this.C.jb;k=this.D.hb;m=this.D.ib;n=this.D.jb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Xb[r],t=v.ua,w=v.Aa;if(0!=v.bb){var A=0,A=A+(a*w.va+b*w.wa+e*w.xa),A=A-(d*w.Ba+c*w.Ca+f*w.Da),A=A+(h*w.S+l*w.T+g*w.U),A=A-(k*w.W+m*w.X+n*w.Y),A=(-v.motorSpeed-A)*r.tf,u=t.Wc;t.Wc+=A;t.Wc<-v.bb?t.Wc=-v.bb:t.Wc>v.bb&&(t.Wc=v.bb);A=t.Wc-u;w.wc&1&&(a+=r.md*A,b+=r.nd*A,e+=r.od*A,d+=r.pd*-A,c+=r.qd*-A,f+=r.rd*-A);w.wc&2&&(h+=r.fd*A,l+=r.gd*A,g+=r.hd*A,k+=r.jd*-A,m+=r.kd*-A,n+=r.ld*-A)}}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.Xb[r],t=v.ua,w=v.Aa,A=0,A+=a*w.va+b*w.wa+e*w.xa,A-=d*w.Ba+c*w.Ca+f*w.Da,A+=h*w.S+l*w.T+g*w.U,A-=k*w.W+m*w.X+n*w.Y,A=(v.Fa-A-t.ua*v.Ma)*r.mass,u=t.ua,t.ua+=A,t.ua<v.Ia?t.ua=v.Ia:t.ua>v.Ha&&(t.ua=v.Ha),A=t.ua-u,w.wc&1&&(a+=r.md*A,b+=r.nd*A,e+=r.od*A,d+=r.pd*-A,c+=r.qd*-A,f+=r.rd*-A),w.wc&2&&(h+=r.fd*A,l+=r.gd*A,g+=r.hd*A,k+=r.jd*-A,m+=r.kd*-A,n+=r.ld*-A);this.C.cb=a;this.C.eb=b;this.C.fb=e;this.D.cb=d;this.D.eb=c;this.D.fb=f;this.C.hb=h;this.C.ib=l;this.C.jb=g;this.D.hb=k;this.D.ib=m;this.D.jb=n},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ua,m=m.Aa;m.wc&1?(b+=m.va*k.ua,e+=m.wa*k.ua,d+=m.xa*k.ua):m.wc&2&&(c+=m.S*k.ua,f+=m.T*k.ua,h+=m.U*k.ua)}this.P.Ai=b*a.invDt;this.P.Bi=e*a.invDt;this.P.Ci=d*a.invDt;this.P.Di=c*a.invDt;this.P.Ei=f*a.invDt;this.P.Fi=h*a.invDt},Gg:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.Xb[z],z=this.info.rows[z].Aa;E.md=z.va*a;E.nd=z.wa*a;E.od=z.xa*a;E.pd=z.Ba*b;E.qd=z.Ca*b;E.rd=z.Da*b;var x,F,N;x=e*z.S+d*z.T+c*z.U;F=f*z.S+h*z.T+l*z.U;N=g*z.S+k*z.T+m*z.U;E.fd=x;E.gd=F;E.hd=N;x=n*z.W+q*z.X+p*z.Y;F=r*z.W+v*z.X+t*z.Y;N=w*z.W+A*z.X+u*z.Y;E.jd=x;E.kd=F;E.ld=N;E.mass=E.md*z.va+E.nd*z.wa+E.od*z.xa+(E.pd*z.Ba+E.qd*z.Ca+E.rd*z.Da)+(E.fd*z.S+E.gd*z.T+E.hd*z.U)+(E.jd*z.W+E.kd*z.X+E.ld*z.Y);E.mass&&(E.mass=1/E.mass)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ua.tb=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Sc;b=this.C.Tc;e=this.C.Uc;d=this.D.Sc;c=this.D.Tc;f=this.D.Uc;h=this.C.Oc;l=this.C.Pc;g=this.C.Qc;k=this.D.Oc;m=this.D.Pc;n=this.D.Qc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,t=this.info.rows[r],r=this.Xb[r],C=t.ua,w=t.Aa,A=0,A=A+(a*w.va+b*w.wa+e*w.xa),A=A-(d*w.Ba+c*w.Ca+f*w.Da),A=A+(h*w.S+l*w.T+g*w.U),A=A-(k*w.W+m*w.X+n*w.Y),w=(t.Fa*F.positionSplitImpulseBaumgarte-A)*r.mass,A=C.tb;C.tb+=w;C.tb<t.Ia?C.tb=t.Ia:C.tb>t.Ha&&(C.tb=t.Ha);w=C.tb-A;a+=r.md*w;b+=r.nd*w;e+=r.od*w;d+=r.pd*-w;c+=r.qd*-w;f+=r.rd*-w;h+=r.fd*w;l+=r.gd*w;g+=r.hd*w;k+=r.jd*-w;m+=r.kd*-w;n+=r.ld*-w}this.C.Sc=a;this.C.Tc=b;this.C.Uc=e;this.D.Sc=d;this.D.Tc=c;this.D.Uc=f;this.C.Oc=h;this.C.Pc=l;this.C.Qc=g;this.D.Oc=k;this.D.Pc=m;this.D.Qc=n},lh:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,t,C,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;t=this.D.ca;C=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,L=this.info.Ka;D<L;){var z=D++,E=this.Xb[z],x=this.info.rows[z].Aa;E.md=x.va*a;E.nd=x.wa*a;E.od=x.xa*a;E.pd=x.Ba*b;E.qd=x.Ca*b;E.rd=x.Da*b;var M,N,G;M=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;E.fd=M;E.gd=N;E.hd=G;var O,ga,na;O=n*x.W+q*x.X+p*x.Y;ga=r*x.W+t*x.X+C*x.Y;na=w*x.W+A*x.X+u*x.Y;E.jd=O;E.kd=ga;E.ld=na;E.mass=E.md*x.va+E.nd*x.wa+E.od*x.xa+(E.pd*x.Ba+E.qd*x.Ca+E.rd*x.Da)+(E.fd*x.S+E.gd*x.T+E.hd*x.U)+(E.jd*x.W+E.kd*x.X+E.ld*x.Y);E.mass&&(E.mass=1/E.mass)}for(var ha,qa,wa,za,ka,Da,U,R,Ca,Na,Ra,ab,Pa=ab=Ra=Na=Ca=R=U=Da=ka=za=wa=qa=ha=0,Ba=this.info.Ka;Pa<Ba;){var jb=Pa++,J=this.info.rows[jb],Qa=this.Xb[jb],ba=J.ua,Q=J.Aa,P=0,P=P+(ha*Q.va+qa*Q.wa+wa*Q.xa),P=P-(za*Q.Ba+ka*Q.Ca+Da*Q.Da),P=P+(U*Q.S+R*Q.T+Ca*Q.U),P=P-(Na*Q.W+Ra*Q.X+ab*Q.Y),xa=(J.Fa*F.positionNgsBaumgarte-P)*Qa.mass,ta=ba.tb;ba.tb+=xa;ba.tb<J.Ia?ba.tb=J.Ia:ba.tb>J.Ha&&(ba.tb=J.Ha);xa=ba.tb-ta;ha+=Qa.md*xa;qa+=Qa.nd*xa;wa+=Qa.od*xa;za+=Qa.pd*-xa;ka+=Qa.qd*-xa;Da+=Qa.rd*-xa;U+=Qa.fd*xa;R+=Qa.gd*xa;Ca+=Qa.hd*xa;Na+=Qa.jd*-xa;Ra+=Qa.kd*-xa;ab+=Qa.ld*-xa}var W=this.C;W.a.v+=ha;W.a.A+=qa;W.a.B+=wa;var pa=this.D;pa.a.v+=za;pa.a.A+=ka;pa.a.B+=Da;var y=this.C,Ia=Math.sqrt(U*U+R*R+Ca*Ca),ca=.5*Ia,Ea,ya;if(.5>ca){var Fa=ca*ca;Ea=.5*(1-.16666666666666666*Fa+Fa*Fa*.008333333333333333);ya=1-.5*Fa+Fa*Fa*.041666666666666664}else Ea=Math.sin(ca)/Ia,ya=Math.cos(ca);var Sa,la;Sa=U*Ea;la=R*Ea;var Z,Ga;Z=Ca*Ea;Ga=ya;var ra,va,I,La,Wa=y.a.o,S=y.a.m,Xa=y.a.s,T=Wa+S+Xa,K;0<T?(K=Math.sqrt(T+1),La=.5*K,K=.5/K,ra=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,I=(y.a.i-y.a.f)*K):Wa>S?Wa>Xa?(K=Math.sqrt(Wa-S-Xa+1),ra=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,I=(y.a.h+y.a.l)*K,La=(y.a.g-y.a.j)*K):(K=Math.sqrt(Xa-Wa-S+1),I=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K):S>Xa?(K=Math.sqrt(S-Xa-Wa+1),va=.5*K,K=.5/K,ra=(y.a.f+y.a.i)*K,I=(y.a.j+y.a.g)*K,La=(y.a.h-y.a.l)*K):(K=Math.sqrt(Xa-Wa-S+1),I=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K);ra=Ga*ra+Sa*La+la*I-Z*va;va=Ga*va-Sa*I+la*La+Z*ra;I=Ga*I+Sa*va-la*ra+Z*La;La=Ga*La-Sa*ra-la*va-Z*I;var ia=ra*ra+va*va+I*I+La*La;1E-32<ia&&(ia=1/Math.sqrt(ia));ra*=ia;va*=ia;I*=ia;La*=ia;var gb=ra,da=va,tb=I,sa=La,fb=2*gb,kb=2*da,Ya=2*tb,ma=gb*fb,oa=da*kb,Ja=tb*Ya,Ha=gb*kb,ob=da*Ya,fa=gb*Ya,ea=sa*fb,ja=sa*kb,cb=sa*Ya;y.a.o=1-oa-Ja;y.a.f=Ha-cb;y.a.h=fa+ja;y.a.i=Ha+cb;y.a.m=1-ma-Ja;y.a.j=ob-ea;y.a.l=fa-ja;y.a.g=ob+ea;y.a.s=1-ma-oa;var Aa,sb,Ua,qb,rb,ub,Va,xb,wb;Aa=y.a.o*y.Qa+y.a.f*y.Ta+y.a.h*y.Wa;sb=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;Ua=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;qb=y.a.i*y.Qa+y.a.m*y.Ta+y.a.j*y.Wa;rb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;ub=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;Va=y.a.l*y.Qa+y.a.g*y.Ta+y.a.s*y.Wa;xb=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;wb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;y.Z=Aa;y.$=sb;y.aa=Ua;y.ba=qb;y.ca=rb;y.da=ub;y.ea=Va;y.fa=xb;y.ga=wb;var Za,ua,Ab,H,pb,db,Bb,$a,hb;Za=y.Z*y.a.o+y.$*y.a.f+y.aa*y.a.h;ua=y.Z*y.a.i+y.$*y.a.m+y.aa*y.a.j;Ab=y.Z*y.a.l+y.$*y.a.g+y.aa*y.a.s;H=y.ba*y.a.o+y.ca*y.a.f+y.da*y.a.h;pb=y.ba*y.a.i+y.ca*y.a.m+y.da*y.a.j;db=y.ba*y.a.l+y.ca*y.a.g+y.da*y.a.s;Bb=y.ea*y.a.o+y.fa*y.a.f+y.ga*y.a.h;$a=y.ea*y.a.i+y.fa*y.a.m+y.ga*y.a.j;hb=y.ea*y.a.l+y.fa*y.a.g+y.ga*y.a.s;y.Z=Za;y.$=ua;y.aa=Ab;y.ba=H;y.ca=pb;y.da=db;y.ea=Bb;y.fa=$a;y.ga=hb;var B=this.D,Db=Math.sqrt(Na*Na+Ra*Ra+ab*ab),Eb=.5*Db,Gb,Fb;if(.5>Eb){var Oa=Eb*Eb;Gb=.5*(1-.16666666666666666*Oa+Oa*Oa*.008333333333333333);Fb=1-.5*Oa+Oa*Oa*.041666666666666664}else Gb=Math.sin(Eb)/Db,Fb=Math.cos(Eb);var nb,vb;nb=Na*Gb;vb=Ra*Gb;var yb,eb;yb=ab*Gb;eb=Fb;var Y,Ma,lb,Ta,ib=B.a.o,Ka=B.a.m,Jb=B.a.s,Lb=ib+Ka+Jb,X;0<Lb?(X=Math.sqrt(Lb+1),Ta=.5*X,X=.5/X,Y=(B.a.g-B.a.j)*X,Ma=(B.a.h-B.a.l)*X,lb=(B.a.i-B.a.f)*X):ib>Ka?ib>Jb?(X=Math.sqrt(ib-Ka-Jb+1),Y=.5*X,X=.5/X,Ma=(B.a.f+B.a.i)*X,lb=(B.a.h+B.a.l)*X,Ta=(B.a.g-B.a.j)*X):(X=Math.sqrt(Jb-ib-Ka+1),lb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,Ma=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X):Ka>Jb?(X=Math.sqrt(Ka-Jb-ib+1),Ma=.5*X,X=.5/X,Y=(B.a.f+B.a.i)*X,lb=(B.a.j+B.a.g)*X,Ta=(B.a.h-B.a.l)*X):(X=Math.sqrt(Jb-ib-Ka+1),lb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,Ma=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X);Y=eb*Y+nb*Ta+vb*lb-yb*Ma;Ma=eb*Ma-nb*lb+vb*Ta+yb*Y;lb=eb*lb+nb*Ma-vb*Y+yb*Ta;Ta=eb*Ta-nb*Y-vb*Ma-yb*lb;var Cb=Y*Y+Ma*Ma+lb*lb+Ta*Ta;1E-32<Cb&&(Cb=1/Math.sqrt(Cb));Y*=Cb;Ma*=Cb;lb*=Cb;Ta*=Cb;var Kb=Y,Mb=Ma,Pb=lb,Nb=Ta,Tb=2*Kb,Ub=2*Mb,Zb=2*Pb,bc=Kb*Tb,cc=Mb*Ub,jc=Pb*Zb,dc=Kb*Ub,kc=Mb*Zb,ac=Kb*Zb,Wb=Nb*Tb,Xb=Nb*Ub,Rb=Nb*Zb;B.a.o=1-cc-jc;B.a.f=dc-Rb;B.a.h=ac+Xb;B.a.i=dc+Rb;B.a.m=1-bc-jc;B.a.j=kc-Wb;B.a.l=ac-Xb;B.a.g=kc+Wb;B.a.s=1-bc-cc;var fc,Sb,Ob,Yb,gc,Ib,$b,mb,hc;fc=B.a.o*B.Qa+B.a.f*B.Ta+B.a.h*B.Wa;Sb=B.a.o*B.Ra+B.a.f*B.Ua+B.a.h*B.Xa;Ob=B.a.o*B.Sa+B.a.f*B.Va+B.a.h*B.Ya;Yb=B.a.i*B.Qa+B.a.m*B.Ta+B.a.j*B.Wa;gc=B.a.i*B.Ra+B.a.m*B.Ua+B.a.j*B.Xa;Ib=B.a.i*B.Sa+B.a.m*B.Va+B.a.j*B.Ya;$b=B.a.l*B.Qa+B.a.g*B.Ta+B.a.s*B.Wa;mb=B.a.l*B.Ra+B.a.g*B.Ua+B.a.s*B.Xa;hc=B.a.l*B.Sa+B.a.g*B.Va+B.a.s*B.Ya;B.Z=fc;B.$=Sb;B.aa=Ob;B.ba=Yb;B.ca=gc;B.da=Ib;B.ea=$b;B.fa=mb;B.ga=hc;var ic,nc,qc,mc,tc,uc,wc,sc,vc;ic=B.Z*B.a.o+B.$*B.a.f+B.aa*B.a.h;nc=B.Z*B.a.i+B.$*B.a.m+B.aa*B.a.j;qc=B.Z*B.a.l+B.$*B.a.g+B.aa*B.a.s;mc=B.ba*B.a.o+B.ca*B.a.f+B.da*B.a.h;tc=B.ba*B.a.i+B.ca*B.a.m+B.da*B.a.j;uc=B.ba*B.a.l+B.ca*B.a.g+B.da*B.a.s;wc=B.ea*B.a.o+B.fa*B.a.f+B.ga*B.a.h;sc=B.ea*B.a.i+B.fa*B.a.m+B.ga*B.a.j;vc=B.ea*B.a.l+B.fa*B.a.g+B.ga*B.a.s;B.Z=ic;B.$=nc;B.aa=qc;B.ba=mc;B.ca=tc;B.da=uc;B.ea=wc;B.fa=sc;B.ga=vc},$e:function(){this.P.ed();this.P.Cl()},qa:nc});Ne.R=!0;Ne.prototype={qa:Ne};C.R=!0;C.prototype={Hl:function(a){switch(this.Wb){case 1:this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=this.jb=this.ib=this.hb=this.fb=this.eb=this.cb=0;break;case 0:case 2:var b,e,d,c,f;b=this.cb*a;e=this.eb*a;d=this.fb*a;c=this.hb*a;f=this.ib*a;a=this.jb*a;var h=b*b+e*e+d*d,l=c*c+f*f+a*a;if(h||l){h>F.maxTranslationPerStep*F.maxTranslationPerStep&&(h=F.maxTranslationPerStep/Math.sqrt(h),this.cb*=h,this.eb*=h,this.fb*=h,b*=h,e*=h,d*=h);l>F.maxRotationPerStep*F.maxRotationPerStep&&(l=F.maxRotationPerStep/Math.sqrt(l),this.hb*=l,this.ib*=l,this.jb*=l,c*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(c*c+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));c*=b;f*=b;a*=b;b=e;e=this.a.o;d=this.a.m;var l=this.a.s,h=e+d+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+c*e+f*d-a*l;l=b*l-c*d+f*e+a*h;d=b*d+c*l-f*h+a*e;e=b*e-c*h-f*l-a*d;a=h*h+l*l+d*d+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;d*=a;b=e*a;var k=2*f;g=2*h;e=2*d;a=f*k;c=h*g;d*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-c-d;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-d;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-c;f=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;l=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=f;this.$=a;this.aa=c;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g;f=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;a=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;c=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;b=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;e=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;d=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;l=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;h=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=f;this.$=a;this.aa=c;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g}}},Rm:function(){var a=this.Oc*this.Oc+this.Pc*this.Pc+this.Qc*this.Qc;if(this.Sc*this.Sc+this.Tc*this.Tc+this.Uc*this.Uc||a)switch(this.Wb){case 1:this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;break;case 0:case 2:var b,e,d,c,f;b=this.Sc;e=this.Tc;d=this.Uc;a=this.Oc;c=this.Pc;f=this.Qc;this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(a*a+c*c+f*f);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));a*=b;c*=b;f*=b;b=e;var h,l;e=this.a.o;d=this.a.m;l=this.a.s;h=e+d+l;var g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+a*e+c*d-f*l;l=b*l-a*d+c*e+f*h;d=b*d+a*l-c*h+f*e;e=b*e-a*h-c*l-f*d;c=h*h+l*l+d*d+e*e;1E-32<c&&(c=1/Math.sqrt(c));a=h*c;h=l*c;d*=c;b=e*c;var k=2*a;g=2*h;e=2*d;c=a*k;f=h*g;d*=e;l=a*g;h*=e;a*=e;k*=b;g*=b;b*=e;this.a.o=1-f-d;this.a.f=l-b;this.a.h=a+g;this.a.i=l+b;this.a.m=1-c-d;this.a.j=h-k;this.a.l=a-g;this.a.g=h+k;this.a.s=1-c-f;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;c=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;f=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;l=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=c;this.aa=f;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;c=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;f=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;b=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;e=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;d=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;l=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;h=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=c;this.aa=f;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g}},wj:function(){for(var a,b,e,d,c,f,h,l,g,k=g=l=h=f=c=d=e=b=a=0,m=this.Ac;null!=m;){var n=m.M,q=m.Ib;q.Be();var p=m.jk*q.nf,r,t,C,w,A,u,D,F;r=m.ha.o*q.cg+m.ha.f*q.fg+m.ha.h*q.ig;t=m.ha.o*q.dg+m.ha.f*q.gg+m.ha.h*q.jg;C=m.ha.o*q.eg+m.ha.f*q.hg+m.ha.h*q.kg;w=m.ha.i*q.cg+m.ha.m*q.fg+m.ha.j*q.ig;A=m.ha.i*q.dg+m.ha.m*q.gg+m.ha.j*q.jg;u=m.ha.i*q.eg+m.ha.m*q.hg+m.ha.j*q.kg;D=m.ha.l*q.cg+m.ha.g*q.fg+m.ha.s*q.ig;F=m.ha.l*q.dg+m.ha.g*q.gg+m.ha.s*q.jg;var q=m.ha.l*q.eg+m.ha.g*q.hg+m.ha.s*q.kg,z,E,x,L,N,G;z=r*m.ha.o+t*m.ha.f+C*m.ha.h;E=r*m.ha.i+t*m.ha.m+C*m.ha.j;C=r*m.ha.l+t*m.ha.g+C*m.ha.s;x=w*m.ha.o+A*m.ha.f+u*m.ha.h;L=w*m.ha.i+A*m.ha.m+u*m.ha.j;u=w*m.ha.l+A*m.ha.g+u*m.ha.s;N=D*m.ha.o+F*m.ha.f+q*m.ha.h;G=D*m.ha.i+F*m.ha.m+q*m.ha.j;q=D*m.ha.l+F*m.ha.g+q*m.ha.s;r=z;t=E;w=x;A=L;D=N;F=G;r*=p;t*=p;C*=p;w*=p;A*=p;u*=p;D*=p;F*=p;var q=q*p,M,O,ga;x=m.ha.v*m.ha.v;L=m.ha.A*m.ha.A;M=m.ha.B*m.ha.B;N=-m.ha.v*m.ha.A;G=-m.ha.A*m.ha.B;ga=-m.ha.B*m.ha.v;m=L+M;z=N;E=ga;M=x+M;O=G;x+=L;r+=m*p;t+=z*p;C+=E*p;w+=N*p;A+=M*p;u+=O*p;D+=ga*p;F+=G*p;q+=x*p;k+=p;a+=r;b+=t;e+=C;d+=w;c+=A;f+=u;h+=D;l+=F;g+=q;m=n}this.Lc=k;this.wd=a;this.xd=b;this.yd=e;this.zd=d;this.Ad=c;this.Bd=f;this.Cd=h;this.Dd=l;this.Ed=g;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Lc&&0<a&&0==this.Wb){this.Za=1/this.Lc;a=this.Ad*this.Ed-this.Bd*this.Dd;b=this.zd*this.Ed-this.Bd*this.Cd;e=this.zd*this.Dd-this.Ad*this.Cd;d=this.xd*this.Ed-this.yd*this.Dd;c=this.wd*this.Ed-this.yd*this.Cd;f=this.wd*this.Dd-this.xd*this.Cd;h=this.xd*this.Bd-this.yd*this.Ad;l=this.wd*this.Bd-this.yd*this.zd;g=this.wd*this.Ad-this.xd*this.zd;k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Qa=a*k;this.Ra=-d*k;this.Sa=h*k;this.Ta=-b*k;this.Ua=c*k;this.Va=-l*k;this.Wa=e*k;this.Xa=-f*k;this.Ya=g*k;this.Bh=this.Qa;this.Ch=this.Ra;this.Dh=this.Sa;this.Eh=this.Ta;this.Fh=this.Ua;this.Gh=this.Va;this.Hh=this.Wa;this.Ih=this.Xa;this.Jh=this.Ya;this.Qa=this.Bh*this.jc.x;this.Ra=this.Ch*this.jc.x;this.Sa=this.Dh*this.jc.x;this.Ta=this.Eh*this.jc.y;this.Ua=this.Fh*this.jc.y;this.Va=this.Gh*this.jc.y;this.Wa=this.Hh*this.jc.z;this.Xa=this.Ih*this.jc.z;this.Ya=this.Jh*this.jc.z;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g}else this.ga=this.fa=this.ea=this.da=this.ca=this.ba=this.aa=this.$=this.Z=this.Jh=this.Ih=this.Hh=this.Gh=this.Fh=this.Eh=this.Dh=this.Ch=this.Bh=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Qa=this.Za=0,0==this.Wb&&(this.Wb=1);this.Fb=!1;this.xb=0},Xl:function(){var a=new t;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},Zl:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},sm:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.pa;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=b}this.Fb=!1;this.xb=0},vm:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.pa;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Ac;null!=b;){e=b.M;a=b.pa;var d=b.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;a=b.a;d=b.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;b.Ib.Lb(b.u,b.pa);a=b.u.ma;c=b.u.na;d=b.u.oa;f=b.u.ja;h=b.u.ka;l=b.u.la;b.Ib.Lb(b.u,b.a);b.u.ma=a<b.u.ma?a:b.u.ma;b.u.na=c<b.u.na?c:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.ja=f>b.u.ja?f:b.u.ja;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;null!=b.Na&&(a=b.a.v-b.pa.v,c=b.a.A-b.pa.A,d=b.a.B-b.pa.B,f=b.nc,f.x=a,f.y=c,f.z=d,b.Vb.kc.dc.sd(b.Na,b.u,b.nc));b=e}this.Fb=!1;this.xb=0},bm:function(){var a=new O;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},gm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},tm:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,d,c,f,h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.pa;c=a.ha;d=this.pa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=b}this.Fb=!1;this.xb=0},Wn:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.a.o=e*d;this.a.f=-e*f;this.a.h=c;this.a.i=b*f+d*a*c;this.a.m=b*d-a*c*f;this.a.j=-e*a;this.a.l=a*f-b*d*c;this.a.g=d*a+b*c*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;c=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;f=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;b=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=c;this.aa=f;this.ba=e;this.ca=d;this.da=b;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;c=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;f=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;e=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;d=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;b=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=c;this.aa=f;this.ba=e;this.ca=d;this.da=b;this.ea=h;this.fa=l;this.ga=g;a=this.pa;c=this.a;a.v=c.v;a.A=c.A;a.B=c.B;a.o=c.o;a.f=c.f;a.h=c.h;a.i=c.i;a.m=c.m;a.j=c.j;a.l=c.l;a.g=c.g;a.s=c.s;for(a=this.Ac;null!=a;){c=a.M;f=a.pa;d=a.ha;e=this.pa;var k,m,n,q,p;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;f=a.a;d=a.ha;e=this.a;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;a.Ib.Lb(a.u,a.pa);f=a.u.ma;e=a.u.na;d=a.u.oa;b=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=f<a.u.ma?f:a.u.ma;a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=b>a.u.ja?b:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(f=a.a.v-a.pa.v,e=a.a.A-a.pa.A,d=a.a.B-a.pa.B,b=a.nc,b.x=f,b.y=e,b.z=d,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=c}this.Fb=!1;this.xb=0},mm:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+d*this.a.l;m=b*this.a.f+e*this.a.m+d*this.a.g;b=b*this.a.h+e*this.a.j+d*this.a.s;e=c*this.a.o+f*this.a.i+h*this.a.l;d=c*this.a.f+f*this.a.m+h*this.a.g;c=c*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=d;this.a.j=c;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;g=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;m=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;k=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;b=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=l;this.$=g;this.aa=a;this.ba=m;this.ca=k;this.da=c;this.ea=f;this.fa=h;this.ga=b;l=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;g=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;a=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;m=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;k=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;c=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;f=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;h=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;b=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=l;this.$=g;this.aa=a;this.ba=m;this.ca=k;this.da=c;this.ea=f;this.fa=h;this.ga=b;l=this.pa;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Ac;null!=l;){g=l.M;a=l.pa;k=l.ha;m=this.pa;var n,q,p;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;a=l.a;k=l.ha;m=this.a;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;l.Ib.Lb(l.u,l.pa);a=l.u.ma;m=l.u.na;k=l.u.oa;c=l.u.ja;f=l.u.ka;h=l.u.la;l.Ib.Lb(l.u,l.a);l.u.ma=a<l.u.ma?a:l.u.ma;l.u.na=m<l.u.na?m:l.u.na;l.u.oa=k<l.u.oa?k:l.u.oa;l.u.ja=c>l.u.ja?c:l.u.ja;l.u.ka=f>l.u.ka?f:l.u.ka;l.u.la=h>l.u.la?h:l.u.la;null!=l.Na&&(a=l.a.v-l.pa.v,m=l.a.A-l.pa.A,k=l.a.B-l.pa.B,c=l.nc,c.x=a,c.y=m,c.z=k,l.Vb.kc.dc.sd(l.Na,l.u,l.nc));l=g}this.Fb=!1;this.xb=0},ym:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);d=l*n;c=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=d*this.a.o+c*this.a.i+g*this.a.l;m=d*this.a.f+c*this.a.m+g*this.a.g;g=d*this.a.h+c*this.a.j+g*this.a.s;d=a*this.a.o+b*this.a.i+f*this.a.l;c=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=d;this.a.m=c;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;h=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;g=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;m=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=e;this.$=a;this.aa=b;this.ba=f;this.ca=h;this.da=g;this.ea=k;this.fa=m;this.ga=l;e=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;a=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;b=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;f=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;h=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;g=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;k=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;m=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;l=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=e;this.$=a;this.aa=b;this.ba=f;this.ca=h;this.da=g;this.ea=k;this.fa=m;this.ga=l;e=this.pa;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Ac;null!=e;){a=e.M;b=e.pa;h=e.ha;f=this.pa;var q,p,g=f.o*h.o+f.f*h.i+f.h*h.l,k=f.o*h.f+f.f*h.m+f.h*h.g,m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;b=e.a;h=e.ha;f=this.a;g=f.o*h.o+f.f*h.i+f.h*h.l;k=f.o*h.f+f.f*h.m+f.h*h.g;m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;e.Ib.Lb(e.u,e.pa);b=e.u.ma;f=e.u.na;h=e.u.oa;g=e.u.ja;k=e.u.ka;m=e.u.la;e.Ib.Lb(e.u,e.a);e.u.ma=b<e.u.ma?b:e.u.ma;e.u.na=f<e.u.na?f:e.u.na;e.u.oa=h<e.u.oa?h:e.u.oa;e.u.ja=g>e.u.ja?g:e.u.ja;e.u.ka=k>e.u.ka?k:e.u.ka;e.u.la=m>e.u.la?m:e.u.la;null!=e.Na&&(b=e.a.v-e.pa.v,f=e.a.A-e.pa.A,h=e.a.B-e.pa.B,g=e.nc,g.x=b,g.y=f,g.z=h,e.Vb.kc.dc.sd(e.Na,e.u,e.nc));e=a}this.Fb=!1;this.xb=0},Ol:function(){var a=new ga,b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},Ql:function(a){var b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},nm:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.a.o=1-g-d;this.a.f=k-c;this.a.h=b+h;this.a.i=k+c;this.a.m=1-a-d;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;g=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;l=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;k=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;e=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;b=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=g;this.aa=c;this.ba=l;this.ca=d;this.da=k;this.ea=h;this.fa=e;this.ga=b;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;g=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;c=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;l=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;d=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;k=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;e=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;b=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=g;this.aa=c;this.ba=l;this.ca=d;this.da=k;this.ea=h;this.fa=e;this.ga=b;a=this.pa;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Ac;null!=a;){g=a.M;c=a.pa;d=a.ha;var l=this.pa,m,n,q,p,k=l.o*d.o+l.f*d.i+l.h*d.l,h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;c=a.a;d=a.ha;l=this.a;k=l.o*d.o+l.f*d.i+l.h*d.l;h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;a.Ib.Lb(a.u,a.pa);c=a.u.ma;l=a.u.na;d=a.u.oa;k=a.u.ja;h=a.u.ka;e=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=c<a.u.ma?c:a.u.ma;a.u.na=l<a.u.na?l:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=k>a.u.ja?k:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=e>a.u.la?e:a.u.la;null!=a.Na&&(c=a.a.v-a.pa.v,l=a.a.A-a.pa.A,d=a.a.B-a.pa.B,k=a.nc,k.x=c,k.y=l,k.z=d,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=g}this.Fb=!1;this.xb=0},hm:function(){var a=this.a,b=new wa;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},km:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},um:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,d,c,f,h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.pa;c=a.ha;d=this.pa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=b}this.Fb=!1;this.xb=0},He:function(){return this.Lc},ce:function(){var a=new O;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed;return a},de:function(a){a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Bf:function(){var a=new Ne;a.mass=this.Lc;var b=a.localInertia;b.e00=this.wd;b.e01=this.xd;b.e02=this.yd;b.e10=this.zd;b.e11=this.Ad;b.e12=this.Bd;b.e20=this.Cd;b.e21=this.Dd;b.e22=this.Ed;return a},Jg:function(a){a.mass=this.Lc;a=a.localInertia;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Un:function(a){this.Lc=a.mass;a=a.localInertia;this.wd=a.e00;this.xd=a.e01;this.yd=a.e02;this.zd=a.e10;this.Ad=a.e11;this.Bd=a.e12;this.Cd=a.e20;this.Dd=a.e21;this.Ed=a.e22;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Lc&&0<a&&0==this.Wb){this.Za=1/this.Lc;a=this.Ad*this.Ed-this.Bd*this.Dd;var b=this.zd*this.Ed-this.Bd*this.Cd,e=this.zd*this.Dd-this.Ad*this.Cd,d=this.xd*this.Ed-this.yd*this.Dd,c=this.wd*this.Ed-this.yd*this.Cd,f=this.wd*this.Dd-this.xd*this.Cd,h=this.xd*this.Bd-this.yd*this.Ad,l=this.wd*this.Bd-this.yd*this.zd,g=this.wd*this.Ad-this.xd*this.zd,k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Qa=a*k;this.Ra=-d*k;this.Sa=h*k;this.Ta=-b*k;this.Ua=c*k;this.Va=-l*k;this.Wa=e*k;this.Xa=-f*k;this.Ya=g*k;this.Bh=this.Qa;this.Ch=this.Ra;this.Dh=this.Sa;this.Eh=this.Ta;this.Fh=this.Ua;this.Gh=this.Va;this.Hh=this.Wa;this.Ih=this.Xa;this.Jh=this.Ya;this.Qa=this.Bh*this.jc.x;this.Ra=this.Ch*this.jc.x;this.Sa=this.Dh*this.jc.x;this.Ta=this.Eh*this.jc.y;this.Ua=this.Fh*this.jc.y;this.Va=this.Gh*this.jc.y;this.Wa=this.Hh*this.jc.z;this.Xa=this.Ih*this.jc.z;this.Ya=this.Jh*this.jc.z;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g}else this.ga=this.fa=this.ea=this.da=this.ca=this.ba=this.aa=this.$=this.Z=this.Jh=this.Ih=this.Hh=this.Gh=this.Fh=this.Eh=this.Dh=this.Ch=this.Bh=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Qa=this.Za=0,0==this.Wb&&(this.Wb=1);this.Fb=!1;this.xb=0},Mg:function(){var a=this.jc;return new t(a.x,a.y,a.z)},Vn:function(a){var b=this.jc;b.x=a.x;b.y=a.y;b.z=a.z;this.Qa=this.Bh*this.jc.x;this.Ra=this.Ch*this.jc.x;this.Sa=this.Dh*this.jc.x;this.Ta=this.Eh*this.jc.y;this.Ua=this.Fh*this.jc.y;this.Va=this.Gh*this.jc.y;this.Wa=this.Hh*this.jc.z;this.Xa=this.Ih*this.jc.z;this.Ya=this.Jh*this.jc.z;var e,d,c,f,h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;this.Fb=!1;this.xb=0},Pd:function(){var a=new t;a.x=this.cb;a.y=this.eb;a.z=this.fb;return a},be:function(a){a.x=this.cb;a.y=this.eb;a.z=this.fb},Tn:function(a){1==this.Wb?this.fb=this.eb=this.cb=0:(this.cb=a.x,this.eb=a.y,this.fb=a.z);this.Fb=!1;this.xb=0},Cc:function(){var a=new t;a.x=this.hb;a.y=this.ib;a.z=this.jb;return a},Hc:function(a){a.x=this.cb;a.y=this.eb;a.z=this.fb},Ln:function(a){1==this.Wb?this.jb=this.ib=this.hb=0:(this.hb=a.x,this.ib=a.y,this.jb=a.z);this.Fb=!1;this.xb=0},ab:function(a){if(1!=this.Wb){var b,e;b=a.x;e=a.y;a=a.z;this.cb+=b;this.eb+=e;this.fb+=a}this.Fb=!1;this.xb=0},Pa:function(a){if(1!=this.Wb){var b,e;b=a.x;e=a.y;a=a.z;this.hb+=b;this.ib+=e;this.jb+=a}this.Fb=!1;this.xb=0},qc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.cb+=e*this.Za;this.eb+=d*this.Za;this.fb+=a*this.Za;var c,f,h;c=b.x;f=b.y;h=b.z;c-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*d;a=h*e-c*a;c=c*d-f*e;e=this.Z*b+this.$*a+this.aa*c;d=this.ba*b+this.ca*a+this.da*c;b=this.ea*b+this.fa*a+this.ga*c;this.hb+=e;this.ib+=d;this.jb+=b;this.Fb=!1;this.xb=0},rc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.cb+=b*this.Za;this.eb+=e*this.Za;this.fb+=a*this.Za;this.Fb=!1;this.xb=0},Kb:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c;a=this.Z*b+this.$*e+this.aa*d;c=this.ba*b+this.ca*e+this.da*d;b=this.ea*b+this.fa*e+this.ga*d;this.hb+=a;this.ib+=c;this.jb+=b;this.Fb=!1;this.xb=0},lc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.yh+=e;this.zh+=d;this.Ah+=a;var c,f;c=b.x;f=b.y;b=b.z;c-=this.a.v;f-=this.a.A;b-=this.a.B;this.kf+=f*a-b*d;this.lf+=b*e-c*a;this.mf+=c*d-f*e;this.Fb=!1;this.xb=0},mc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.yh+=b;this.zh+=e;this.Ah+=a;this.Fb=!1;this.xb=0},zc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.kf+=b;this.lf+=e;this.mf+=a;this.Fb=!1;this.xb=0},bd:function(){return this.Ug},Rn:function(a){this.Ug=a;this.Fb=!1;this.xb=0},ee:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},fe:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;e-=this.a.v;d-=this.a.A;c-=this.a.B;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},ge:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},Ge:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},ci:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d+this.a.v;e=c+this.a.A;a+=this.a.B;d=new t;d.x=b;d.y=e;d.z=a;return d},di:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;c=this.a.l*e+this.a.g*d+this.a.s*c;e=a+this.a.v;d=f+this.a.A;c+=this.a.B;b.x=e;b.y=d;b.z=c},xj:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},wl:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;e=this.a.l*e+this.a.g*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Nl:function(){return this.pg},Ng:function(){return this.Ac},Kg:function(){return this.se},ad:function(){return this.Mb},Lg:function(){return this.$g},cd:function(){return this.re},sb:function(a){null==this.Ac?this.Ac=a:(this.ni.M=a,a.ia=this.ni);this.ni=a;this.pg++;a.Vb=this;if(null!=this.kc){var b=this.kc;a.Na=b.dc.Ph(a,a.u);a.sc=b.Jl++;b.pg++}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=b}},wm:function(a){var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Ac&&(this.Ac=this.Ac.M);a==this.ni&&(this.ni=this.ni.ia);a.M=null;a.ia=null;this.pg--;a.Vb=null;if(null!=this.kc){b=this.kc;b.dc.Qh(a.Na);a.Na=null;a.sc=-1;for(var d=a.Vb.Mb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Mc;d.Fb=!1;d.xb=0;var d=b.wh,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ia);c.M=null;c.ia=null;f=c.qb.ia;h=c.qb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.qb==c.C.Mb&&(c.C.Mb=c.C.Mb.M);c.qb==c.C.ec&&(c.C.ec=c.C.ec.ia);c.qb.M=null;c.qb.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.D.Mb&&(c.D.Mb=c.D.Mb.M);c.rb==c.D.ec&&(c.D.ec=c.D.ec.ia);c.rb.M=null;c.rb.ia=null;c.C.se--;c.D.se--;c.qb.Mc=null;c.rb.Mc=null;c.qb.Ud=null;c.rb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ja.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}b.pg--}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,l,g,k,m,n,q,p,f=c.o*d.o+c.f*d.i+c.h*d.l,h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Vb.kc.dc.sd(a.Na,a.u,a.nc));a=b}},lm:function(){return this.Wb},Fm:function(a){this.Wb=a;this.wj()},Hm:function(){this.Fb=!1;this.xb=0},Gm:function(){this.Fb=!0;this.xb=0},bi:function(){return this.xb},Qn:function(a){this.hk=a;this.Fb=!1;this.xb=0},$l:function(){return this.ia},vl:function(){return this.M},qa:C};Zj.R=!0;Zj.prototype={qa:Zj};Qd.R=!0;za.R=!0;za.prototype={qc:function(){return this.Fj},ge:function(a){this.Fj=a},Hc:function(){return this.Pj},He:function(a){this.Pj=a},zc:function(){var a=this.ha,b=new wa;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Cc:function(a){var b=this.ha;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Pd:function(){var a=this.a,b=new wa;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},be:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Ge:function(a){var b=this.ha;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Vb)for(a=this.Vb,a.wj(),b=a.Ac;null!=b;){var e=b.M,d=b.pa,c=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ha;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Ib.Lb(b.u,b.pa);d=b.u.ma;f=b.u.na;c=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Ib.Lb(b.u,b.a);b.u.ma=d<b.u.ma?d:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.Na&&(d=b.a.v-b.pa.v,f=b.a.A-b.pa.A,c=b.a.B-b.pa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Vb.kc.dc.sd(b.Na,b.u,b.nc));b=e}},mc:function(){return this.jk},fe:function(a){this.jk=a;if(null!=this.Vb){a=this.Vb;a.wj();for(var b=a.Ac;null!=b;){var e=b.M,d=b.pa,c=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ha;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Ib.Lb(b.u,b.pa);d=b.u.ma;f=b.u.na;c=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Ib.Lb(b.u,b.a);b.u.ma=d<b.u.ma?d:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.Na&&(d=b.a.v-b.pa.v,f=b.a.A-b.pa.A,c=b.a.B-b.pa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Vb.kc.dc.sd(b.Na,b.u,b.nc));b=e}}},Pa:function(){return this.u.clone()},ab:function(a){a.Zd(this.u)},rc:function(){return this.Ib},ad:function(){return this.Vb},sb:function(){return this.Aj},ce:function(a){this.Aj=a},Kb:function(){return this.Bj},de:function(a){this.Bj=a},lc:function(){return this.Cj},ee:function(a){this.Cj=a},cd:function(){return this.ia},bd:function(){return this.M},qa:za};Og.R=!0;Og.prototype={qa:Og};String.prototype.qa=String;String.R=!0;Array.R=!0;Date.prototype.qa=Date;Date.R=["Date"];var nl={},ll={},ml=Number,kl=Boolean,ol={},pl={};Kc.rc={}.toString;Hd.Ng=1;Hd.bi=2;Hd.BRUTE_FORCE=1;Hd.BVH=2;Nb.sm=0;Nb.Mg=1;Nb.wl=2;Nb.di=3;Nb.ci=4;Nb.xj=5;Nb.SPHERE=0;Nb.BOX=1;Nb.CYLINDER=2;Nb.CONE=3;Nb.CAPSULE=4;Nb.CONVEX_HULL=5;nd.Cc=0;t.numCreations=0;F.defaultFriction=.2;F.defaultRestitution=.2;F.defaultDensity=1;F.defaultCollisionGroup=1;F.defaultCollisionMask=1;F.maxTranslationPerStep=20;F.maxRotationPerStep=3.14159265358979;F.bvhProxyPadding=.1;F.bvhIncrementalCollisionThreshold=.45;F.defaultGJKMargin=.05;F.enableGJKCaching=!0;F.maxEPAVertices=128;F.maxEPAPolyhedronFaces=128;F.contactEnableBounceThreshold=.5;F.velocityBaumgarte=.2;F.positionSplitImpulseBaumgarte=.4;F.positionNgsBaumgarte=1;F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;F.defaultContactPositionCorrectionAlgorithm=0;F.alternativeContactPositionCorrectionAlgorithm=1;F.contactPersistenceThreshold=.05;F.maxManifoldPoints=4;F.defaultJointConstraintSolverType=0;F.defaultJointPositionCorrectionAlgorithm=0;F.jointWarmStartingFactorForBaungarte=.8;F.jointWarmStartingFactor=.95;F.minSpringDamperDampingRatio=1E-6;F.minRagdollMaxSwingAngle=1E-6;F.maxJacobianRows=6;F.directMlcpSolverEps=1E-9;F.islandInitialRigidBodyArraySize=128;F.islandInitialConstraintArraySize=128;F.sleepingVelocityThreshold=.2;F.sleepingAngularVelocityThreshold=.5;F.sleepingTimeThreshold=1;F.disableSleeping=!1;F.linearSlop=.005;F.angularSlop=.017453292519943278;Zb.Pa=new Zb;Pb.wm=0;Pb.bm=1;Pb.$l=2;Pb.Zl=257;Pb.Xl=258;Pb.Ql=259;Pb.SUCCEEDED=0;Pb.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;Pb.GJK_DID_NOT_CONVERGE=2;Pb.EPA_FAILED_TO_INIT=257;Pb.EPA_FAILED_TO_ADD_VERTEX=258;Pb.EPA_DID_NOT_CONVERGE=259;O.numCreations=0;M.numCreations=0;na.POSITIVE_INFINITY=1/0;na.NEGATIVE_INFINITY=-1/0;na.PI=3.14159265358979;na.TWO_PI=6.28318530717958;na.HALF_PI=1.570796326794895;na.TO_RADIANS=.017453292519943278;na.TO_DEGREES=57.29577951308238;ga.numCreations=0;Eb.Jg=8;Eb.Kg=4;Eb.Bf=8;Rc.broadPhaseCollisionTime=0;Rc.narrowPhaseCollisionTime=0;Rc.dynamicsTime=0;Rc.totalTime=0;ic.Lg=0;ic.um=1;ic.km=2;ic.BAUMGARTE=0;ic.SPLIT_IMPULSE=1;ic.NGS=2;bd.He=1;bd.Ge=2;hc.tm=0;hc.nm=1;hc.vl=2;hc.lm=3;hc.ym=4;hc.mm=5;hc.SPHERICAL=0;hc.REVOLUTE=1;hc.CYLINDRICAL=2;hc.PRISMATIC=3;hc.UNIVERSAL=4;hc.RAGDOLL=5;pe.gm=0;pe.Nl=1;pe.ITERATIVE=0;pe.DIRECT=1;Qd.Ol=0;Qd.vm=1;Qd.hm=2;Qd.DYNAMIC=0;Qd.STATIC=1;Qd.KINEMATIC=2;window.OIMO={};window.OIMO.DebugDraw=Eb;Eb.prototype.aabb=Eb.prototype.Pk;Eb.prototype.ellipse=Eb.prototype.ellipse;Eb.prototype.arc=Eb.prototype.arc;Eb.prototype.cone=Eb.prototype.Tl;Eb.prototype.cylinder=Eb.prototype.Wl;Eb.prototype.capsule=Eb.prototype.Rl;Eb.prototype.sphere=Eb.prototype.Am;Eb.prototype.box=Eb.prototype.Pl;Eb.prototype.rect=Eb.prototype.rect;Eb.prototype.point=Eb.prototype.ab;Eb.prototype.triangle=Eb.prototype.sb;Eb.prototype.line=Eb.prototype.Pa;window.OIMO.BroadPhase=jb;jb.prototype.createProxy=jb.prototype.Ph;jb.prototype.destroyProxy=jb.prototype.Qh;jb.prototype.moveProxy=jb.prototype.sd;jb.prototype.isOverlapping=jb.prototype.Kb;jb.prototype.collectPairs=jb.prototype.si;jb.prototype.getProxyPairList=jb.prototype.Pa;jb.prototype.isIncremental=jb.prototype.sb;jb.prototype.getTestCount=jb.prototype.ab;jb.prototype.rayCast=jb.prototype.Sd;jb.prototype.convexCast=jb.prototype.rf;jb.prototype.aabbTest=jb.prototype.eh;window.OIMO.Geometry=bc;bc.prototype.getType=bc.prototype.ab;bc.prototype.getVolume=bc.prototype.Pa;bc.prototype.rayCast=bc.prototype.Sd;window.OIMO.ConvexGeometry=Da;Da.prototype.getGjkMergin=Da.prototype.gn;Da.prototype.setGjkMergin=Da.prototype.Jn;Da.prototype.computeLocalSupportingVertex=Da.prototype.Ld;Da.prototype.rayCast=Da.prototype.Sd;window.OIMO.BroadPhaseProxyCallback=Bc;Bc.prototype.process=Bc.prototype.td;window.OIMO.BroadPhaseType=Hd;window.OIMO.Proxy=Jc;Jc.prototype.getId=Jc.prototype.sb;Jc.prototype.getFatAabb=Jc.prototype.Pa;Jc.prototype.getFatAabbTo=Jc.prototype.ab;window.OIMO.ProxyPair=Pc;Pc.prototype.getProxy1=Pc.prototype.Pa;Pc.prototype.getProxy2=Pc.prototype.ab;Pc.prototype.getNext=Pc.prototype.sb;window.OIMO.BruteForceBroadPhase=uc;uc.prototype.createProxy=uc.prototype.Ph;uc.prototype.destroyProxy=uc.prototype.Qh;uc.prototype.moveProxy=uc.prototype.sd;uc.prototype.collectPairs=uc.prototype.si;uc.prototype.rayCast=uc.prototype.Sd;uc.prototype.convexCast=uc.prototype.rf;uc.prototype.aabbTest=uc.prototype.eh;window.OIMO.BvhBroadPhase=dc;dc.prototype.createProxy=dc.prototype.Ph;dc.prototype.destroyProxy=dc.prototype.Qh;dc.prototype.moveProxy=dc.prototype.sd;dc.prototype.collectPairs=dc.prototype.si;dc.prototype.rayCast=dc.prototype.Sd;dc.prototype.convexCast=dc.prototype.rf;dc.prototype.aabbTest=dc.prototype.eh;dc.prototype.getTreeBalance=dc.prototype.wn;window.OIMO.Aabb=Ca;Ca.prototype.init=Ca.prototype.za;Ca.prototype.getMin=Ca.prototype.Hc;Ca.prototype.getMinTo=Ca.prototype.ad;Ca.prototype.setMin=Ca.prototype.Pd;Ca.prototype.getMax=Ca.prototype.zc;Ca.prototype.getMaxTo=Ca.prototype.Cc;Ca.prototype.setMax=Ca.prototype.cd;Ca.prototype.getCenter=Ca.prototype.sb;Ca.prototype.getCenterTo=Ca.prototype.Kb;Ca.prototype.getExtents=Ca.prototype.lc;Ca.prototype.getExtentsTo=Ca.prototype.mc;Ca.prototype.combine=Ca.prototype.Pa;Ca.prototype.combined=Ca.prototype.ab;Ca.prototype.overlap=Ca.prototype.bd;Ca.prototype.getIntersection=Ca.prototype.qc;Ca.prototype.getIntersectionTo=Ca.prototype.rc;Ca.prototype.copyFrom=Ca.prototype.Zd;Ca.prototype.clone=Ca.prototype.clone;window.OIMO.BoxGeometry=gd;gd.prototype.getHalfExtents=gd.prototype.hn;gd.prototype.getHalfExtentsTo=gd.prototype.jn;gd.prototype.computeLocalSupportingVertex=gd.prototype.Ld;window.OIMO.CapsuleGeometry=fd;fd.prototype.getRadius=fd.prototype.Sh;fd.prototype.getHalfHeight=fd.prototype.mj;fd.prototype.computeLocalSupportingVertex=fd.prototype.Ld;window.OIMO.ConeGeometry=$c;$c.prototype.getRadius=$c.prototype.Sh;$c.prototype.getHalfHeight=$c.prototype.mj;$c.prototype.computeLocalSupportingVertex=$c.prototype.Ld;window.OIMO.ConvexHullGeometry=od;od.prototype.getVertices=od.prototype.An;od.prototype.computeLocalSupportingVertex=od.prototype.Ld;window.OIMO.CylinderGeometry=Zc;Zc.prototype.getRadius=Zc.prototype.Sh;Zc.prototype.getHalfHeight=Zc.prototype.mj;Zc.prototype.computeLocalSupportingVertex=Zc.prototype.Ld;window.OIMO.GeometryType=Nb;window.OIMO.RayCastHit=Ed;window.OIMO.SphereGeometry=xd;xd.prototype.getRadius=xd.prototype.Sh;xd.prototype.computeLocalSupportingVertex=xd.prototype.Ld;window.OIMO.CollisionMatrix=Sd;Sd.prototype.getDetector=Sd.prototype.Pa;window.OIMO.DetectorResult=md;md.prototype.getMaxDepth=md.prototype.cm;md.prototype.clear=md.prototype.clear;window.OIMO.DetectorResultPoint=mj;window.OIMO.Detector=ed;ed.prototype.detect=ed.prototype.Yl;window.OIMO.CapsuleCapsuleDetector=Gd;window.OIMO.GjkEpaDetector=de;window.OIMO.SphereBoxDetector=wd;window.OIMO.SphereCapsuleDetector=Nd;window.OIMO.SphereSphereDetector=Te;window.OIMO.Vec3=t;t.prototype.init=t.prototype.za;t.prototype.zero=t.prototype.O;t.prototype.add=t.prototype.bd;t.prototype.addScaled=t.prototype.Pa;t.prototype.sub=t.prototype.ge;t.prototype.scale=t.prototype.ee;t.prototype.scale3=t.prototype.He;t.prototype.dot=t.prototype.Pd;t.prototype.cross=t.prototype.sb;t.prototype.addEq=t.prototype.cd;t.prototype.addScaledEq=t.prototype.ab;t.prototype.subEq=t.prototype.Ge;t.prototype.scaleEq=t.prototype.fe;t.prototype.scale3Eq=t.prototype.Bf;t.prototype.crossEq=t.prototype.Kb;t.prototype.mulMat3=t.prototype.lc;t.prototype.mulMat4=t.prototype.qc;t.prototype.mulTransform=t.prototype.zc;t.prototype.mulMat3Eq=t.prototype.mc;t.prototype.mulMat4Eq=t.prototype.rc;t.prototype.mulTransformEq=t.prototype.Cc;t.prototype.length=t.prototype.length;t.prototype.lengthSq=t.prototype.be;t.prototype.normalized=t.prototype.de;t.prototype.normalize=t.prototype.ce;t.prototype.negate=t.prototype.Hc;t.prototype.negateEq=t.prototype.ad;t.prototype.copyFrom=t.prototype.Zd;t.prototype.clone=t.prototype.clone;t.prototype.toString=t.prototype.toString;window.OIMO.Transform=wa;wa.prototype.identity=wa.prototype.Mf;wa.prototype.getPosition=wa.prototype.sb;wa.prototype.getPositionTo=wa.prototype.Kb;wa.prototype.setPosition=wa.prototype.zc;wa.prototype.translate=wa.prototype.Hc;wa.prototype.getRotation=wa.prototype.lc;wa.prototype.getRotationTo=wa.prototype.mc;wa.prototype.setRotation=wa.prototype.Cc;wa.prototype.rotate=wa.prototype.qc;wa.prototype.getOrientation=wa.prototype.Pa;wa.prototype.getOrientationTo=wa.prototype.ab;wa.prototype.setOrientation=wa.prototype.rc;wa.prototype.clone=wa.prototype.clone;wa.prototype.copyFrom=wa.prototype.Zd;window.OIMO.Setting=F;window.OIMO.GjkEpa=Zb;Zb.prototype.computeClosestPoints=Zb.prototype.Pa;Zb.prototype.computeDistance=Zb.prototype.ab;Zb.prototype.convexCast=Zb.prototype.rf;Zb.prototype.rayCast=Zb.prototype.Sd;Zb.getInstance=Zb.ad;window.OIMO.GjkEpaResultState=Pb;window.OIMO.SimplexUtil=dd;dd.projectOrigin2=dd.bd;dd.projectOrigin3=dd.cd;dd.projectOrigin4=dd.Pd;window.OIMO.Mat3=O;O.prototype.init=O.prototype.za;O.prototype.identity=O.prototype.Mf;O.prototype.add=O.prototype.zc;O.prototype.sub=O.prototype.Kg;O.prototype.scale=O.prototype.Bf;O.prototype.mul=O.prototype.de;O.prototype.addEq=O.prototype.Cc;O.prototype.subEq=O.prototype.Lg;O.prototype.scaleEq=O.prototype.Jg;O.prototype.mulEq=O.prototype.ee;O.prototype.prependScale=O.prototype.Ge;O.prototype.appendScale=O.prototype.bd;O.prototype.prependRotation=O.prototype.fe;O.prototype.appendRotation=O.prototype.Hc;O.prototype.prependScaleEq=O.prototype.He;O.prototype.appendScaleEq=O.prototype.cd;O.prototype.prependRotationEq=O.prototype.ge;O.prototype.appendRotationEq=O.prototype.ad;O.prototype.transpose=O.prototype.bi;O.prototype.transposeEq=O.prototype.ci;O.prototype.determinant=O.prototype.Pd;O.prototype.trace=O.prototype.Ng;O.prototype.inverse=O.prototype.be;O.prototype.inverseEq=O.prototype.ce;O.prototype.toArray=O.prototype.Mg;O.prototype.copyFrom=O.prototype.Zd;O.prototype.clone=O.prototype.clone;O.prototype.fromQuat=O.prototype.sb;O.prototype.toQuat=O.prototype.xj;O.prototype.fromEulerXyz=O.prototype.ab;O.prototype.toEulerXyz=O.prototype.di;O.prototype.getRow=O.prototype.qc;O.prototype.getCol=O.prototype.lc;O.prototype.getRowTo=O.prototype.rc;O.prototype.getColTo=O.prototype.mc;O.prototype.fromRows=O.prototype.Kb;O.prototype.fromCols=O.prototype.Pa;O.prototype.toString=O.prototype.toString;window.OIMO.Mat4=M;M.prototype.init=M.prototype.za;M.prototype.identity=M.prototype.Mf;M.prototype.add=M.prototype.lc;M.prototype.sub=M.prototype.Bf;M.prototype.scale=M.prototype.Ge;M.prototype.mul=M.prototype.Pd;M.prototype.addEq=M.prototype.mc;M.prototype.subEq=M.prototype.Jg;M.prototype.scaleEq=M.prototype.He;M.prototype.mulEq=M.prototype.be;M.prototype.prependScale=M.prototype.fe;M.prototype.appendScale=M.prototype.zc;M.prototype.prependRotation=M.prototype.de;M.prototype.appendRotation=M.prototype.qc;M.prototype.prependTranslation=M.prototype.ci;M.prototype.appendTranslation=M.prototype.Pa;M.prototype.prependScaleEq=M.prototype.ge;M.prototype.appendScaleEq=M.prototype.Cc;M.prototype.prependRotationEq=M.prototype.ee;M.prototype.appendRotationEq=M.prototype.rc;M.prototype.prependTranslationEq=M.prototype.di;M.prototype.appendTranslationEq=M.prototype.ab;M.prototype.transpose=M.prototype.Mg;M.prototype.transposeEq=M.prototype.Ng;M.prototype.determinant=M.prototype.Hc;M.prototype.trace=M.prototype.Lg;M.prototype.inverse=M.prototype.bd;M.prototype.inverseEq=M.prototype.cd;M.prototype.lookAt=M.prototype.Kb;M.prototype.perspective=M.prototype.ce;M.prototype.ortho=M.prototype.bi;M.prototype.toArray=M.prototype.Kg;M.prototype.copyFrom=M.prototype.Zd;M.prototype.fromMat3=M.prototype.ad;M.prototype.fromTransform=M.prototype.sb;M.prototype.clone=M.prototype.clone;M.prototype.toString=M.prototype.toString;window.OIMO.MathUtil=na;na.abs=na.abs;na.sin=na.sin;na.cos=na.cos;na.tan=na.tan;na.asin=na.asin;na.acos=na.acos;na.atan=na.atan;na.safeAsin=na.ge;na.safeAcos=na.fe;na.atan2=na.atan2;na.sqrt=na.sqrt;na.clamp=na.zc;na.rand=na.be;na.randIn=na.ce;na.randVec3In=na.ee;na.randVec3=na.de;window.OIMO.Pool=Ub;Ub.prototype.vec3=Ub.prototype.zc;Ub.prototype.mat3=Ub.prototype.mc;Ub.prototype.mat4=Ub.prototype.qc;Ub.prototype.quat=Ub.prototype.rc;Ub.prototype.dispose=Ub.prototype.Pa;Ub.prototype.disposeVec3=Ub.prototype.lc;Ub.prototype.disposeMat3=Ub.prototype.ab;Ub.prototype.disposeMat4=Ub.prototype.sb;Ub.prototype.disposeQuat=Ub.prototype.Kb;window.OIMO.Quat=ga;ga.prototype.identity=ga.prototype.Mf;ga.prototype.init=ga.prototype.za;ga.prototype.add=ga.prototype.Pa;ga.prototype.sub=ga.prototype.Cc;ga.prototype.scale=ga.prototype.rc;ga.prototype.addEq=ga.prototype.ab;ga.prototype.subEq=ga.prototype.Hc;ga.prototype.scaleEq=ga.prototype.zc;ga.prototype.length=ga.prototype.length;ga.prototype.lengthSq=ga.prototype.lc;ga.prototype.dot=ga.prototype.sb;ga.prototype.normalized=ga.prototype.qc;ga.prototype.normalize=ga.prototype.mc;ga.prototype.setArc=ga.prototype.ad;ga.prototype.slerp=ga.prototype.bd;ga.prototype.copyFrom=ga.prototype.Zd;ga.prototype.clone=ga.prototype.clone;ga.prototype.fromMat3=ga.prototype.Kb;ga.prototype.toMat3=ga.prototype.cd;ga.prototype.toString=ga.prototype.toString;window.OIMO.Contact=tc;tc.prototype.getShape1=tc.prototype.lc;tc.prototype.getShape2=tc.prototype.mc;tc.prototype.isTouching=tc.prototype.Zj;tc.prototype.getManifold=tc.prototype.ab;tc.prototype.getContactConstraint=tc.prototype.Pa;tc.prototype.getPrev=tc.prototype.Kb;tc.prototype.getNext=tc.prototype.sb;window.OIMO.ContactLink=Nc;Nc.prototype.getContact=Nc.prototype.Pa;Nc.prototype.getOther=Nc.prototype.sb;Nc.prototype.getPrev=Nc.prototype.Kb;Nc.prototype.getNext=Nc.prototype.ab;window.OIMO.ContactManager=Fd;Fd.prototype.getNumContacts=Fd.prototype.ab;Fd.prototype.getContactList=Fd.prototype.Pa;window.OIMO.TimeStep=kj;window.OIMO.World=qa;qa.prototype.step=qa.prototype.be;qa.prototype.addRigidBody=qa.prototype.ab;qa.prototype.removeRigidBody=qa.prototype.ce;qa.prototype.addJoint=qa.prototype.Pa;qa.prototype.removeJoint=qa.prototype.sl;qa.prototype.setDebugDraw=qa.prototype.de;qa.prototype.getDebugDraw=qa.prototype.mc;qa.prototype.debugDraw=qa.prototype.sb;qa.prototype.rayCast=qa.prototype.Sd;qa.prototype.convexCast=qa.prototype.rf;qa.prototype.aabbTest=qa.prototype.eh;qa.prototype.getRigidBodyList=qa.prototype.cd;qa.prototype.getJointList=qa.prototype.rc;qa.prototype.getBroadPhase=qa.prototype.Kb;qa.prototype.getContactManager=qa.prototype.lc;qa.prototype.getNumRigidBodies=qa.prototype.ad;qa.prototype.getNumJoints=qa.prototype.Cc;qa.prototype.getNumShapes=qa.prototype.Pd;qa.prototype.getNumIslands=qa.prototype.zc;qa.prototype.getNumVelocityIterations=qa.prototype.bd;qa.prototype.setNumVelocityIterations=qa.prototype.ge;qa.prototype.getNumPositionIterations=qa.prototype.Hc;qa.prototype.setNumPositionIterations=qa.prototype.fe;qa.prototype.getGravity=qa.prototype.qc;qa.prototype.setGravity=qa.prototype.ee;window.OIMO.AabbTestCallback=cd;cd.prototype.process=cd.prototype.td;window.OIMO.ContactCallback=Xc;Xc.prototype.beginContact=Xc.prototype.Pa;Xc.prototype.preSolve=Xc.prototype.sb;Xc.prototype.postSolve=Xc.prototype.$e;Xc.prototype.endContact=Xc.prototype.ab;window.OIMO.RayCastCallback=Mc;Mc.prototype.process=Mc.prototype.td;window.OIMO.RayCastClosest=vd;vd.prototype.clear=vd.prototype.clear;vd.prototype.process=vd.prototype.td;window.OIMO.DebugDrawStyle=Re;window.OIMO.Performance=Rc;window.OIMO.ConstraintSolver=Tb;Tb.prototype.preSolveVelocity=Tb.prototype.jh;Tb.prototype.warmStart=Tb.prototype.sh;Tb.prototype.solveVelocity=Tb.prototype.nh;Tb.prototype.postSolveVelocity=Tb.prototype.vi;Tb.prototype.preSolvePosition=Tb.prototype.Gg;Tb.prototype.solvePositionSplitImpulse=Tb.prototype.mh;Tb.prototype.solvePositionNgs=Tb.prototype.lh;Tb.prototype.postSolve=Tb.prototype.$e;window.OIMO.PositionCorrectionAlgorithm=ic;window.OIMO.ContactConstraint=ld;ld.prototype.getShape1=ld.prototype.ab;ld.prototype.getShape2=ld.prototype.sb;ld.prototype.getManifold=ld.prototype.Pa;ld.prototype.isTouching=ld.prototype.Zj;window.OIMO.Manifold=Ac;Ac.prototype.getNormal=Ac.prototype.sb;Ac.prototype.getNormalTo=Ac.prototype.Kb;Ac.prototype.getTangent=Ac.prototype.qc;Ac.prototype.getTangentTo=Ac.prototype.rc;Ac.prototype.getBinormal=Ac.prototype.Pa;Ac.prototype.getBinormalTo=Ac.prototype.ab;Ac.prototype.getPoints=Ac.prototype.mc;Ac.prototype.getNumPoints=Ac.prototype.lc;window.OIMO.ManifoldPoint=Ab;Ab.prototype.getPosition1=Ab.prototype.Kb;Ab.prototype.getPosition1To=Ab.prototype.lc;Ab.prototype.getPosition2=Ab.prototype.mc;Ab.prototype.getPosition2To=Ab.prototype.qc;Ab.prototype.getDepth=Ab.prototype.ab;Ab.prototype.isWarmStarted=Ab.prototype.zc;Ab.prototype.getNormalImpulse=Ab.prototype.sb;Ab.prototype.getTangentImpulse=Ab.prototype.rc;Ab.prototype.getBinormalImpulse=Ab.prototype.Pa;Ab.prototype.isEnabled=Ab.prototype.Cc;window.OIMO.Joint=L;L.prototype.getRigidBody1=L.prototype.ge;L.prototype.getRigidBody2=L.prototype.Ge;L.prototype.getType=L.prototype.Jg;L.prototype.getAnchor1=L.prototype.ab;L.prototype.getAnchor2=L.prototype.Kb;L.prototype.getAnchor1To=L.prototype.sb;L.prototype.getAnchor2To=L.prototype.lc;L.prototype.getLocalAnchor1=L.prototype.be;L.prototype.getLocalAnchor2=L.prototype.de;L.prototype.getLocalAnchor1To=L.prototype.ce;L.prototype.getLocalAnchor2To=L.prototype.ee;L.prototype.getBasis1=L.prototype.Cc;L.prototype.getBasis2=L.prototype.ad;L.prototype.getBasis1To=L.prototype.Hc;L.prototype.getBasis2To=L.prototype.bd;L.prototype.getAllowCollision=L.prototype.Pa;L.prototype.setAllowCollision=L.prototype.Kg;L.prototype.getBreakForce=L.prototype.cd;L.prototype.setBreakForce=L.prototype.Lg;L.prototype.getBreakTorque=L.prototype.Pd;L.prototype.setBreakTorque=L.prototype.Mg;L.prototype.getPositionCorrectionAlgorithm=L.prototype.fe;L.prototype.setPositionCorrectionAlgorithm=L.prototype.Ng;L.prototype.getAppliedForce=L.prototype.mc;L.prototype.getAppliedForceTo=L.prototype.qc;L.prototype.getAppliedTorque=L.prototype.rc;L.prototype.getAppliedTorqueTo=L.prototype.zc;L.prototype.getPrev=L.prototype.Bf;L.prototype.getNext=L.prototype.He;window.OIMO.CylindricalJoint=tb;tb.prototype.getAxis1=tb.prototype.vg;tb.prototype.getAxis2=tb.prototype.xg;tb.prototype.getAxis1To=tb.prototype.wg;tb.prototype.getAxis2To=tb.prototype.yg;tb.prototype.getLocalAxis1=tb.prototype.zg;tb.prototype.getLocalAxis2=tb.prototype.Bg;tb.prototype.getLocalAxis1To=tb.prototype.Ag;tb.prototype.getLocalAxis2To=tb.prototype.Cg;tb.prototype.getTranslationalSpringDamper=tb.prototype.vn;tb.prototype.getRotationalSpringDamper=tb.prototype.nn;tb.prototype.getTranslationalLimitMotor=tb.prototype.un;tb.prototype.getRotationalLimitMotor=tb.prototype.mn;tb.prototype.getAngle=tb.prototype.Xk;tb.prototype.getTranslation=tb.prototype.$k;window.OIMO.JointConfig=Ec;window.OIMO.CylindricalJointConfig=te;te.prototype.init=te.prototype.za;window.OIMO.JointLink=Oc;Oc.prototype.getContact=Oc.prototype.Pa;Oc.prototype.getOther=Oc.prototype.sb;Oc.prototype.getPrev=Oc.prototype.Kb;Oc.prototype.getNext=Oc.prototype.ab;window.OIMO.JointType=hc;window.OIMO.PrismaticJoint=Bb;Bb.prototype.getAxis1=Bb.prototype.vg;Bb.prototype.getAxis2=Bb.prototype.xg;Bb.prototype.getAxis1To=Bb.prototype.wg;Bb.prototype.getAxis2To=Bb.prototype.yg;Bb.prototype.getLocalAxis1=Bb.prototype.zg;Bb.prototype.getLocalAxis2=Bb.prototype.Bg;Bb.prototype.getLocalAxis1To=Bb.prototype.Ag;Bb.prototype.getLocalAxis2To=Bb.prototype.Cg;Bb.prototype.getSpringDamper=Bb.prototype.nj;Bb.prototype.getLimitMotor=Bb.prototype.Zk;Bb.prototype.getTranslation=Bb.prototype.$k;window.OIMO.PrismaticJointConfig=Dd;Dd.prototype.init=Dd.prototype.za;window.OIMO.RagdollJoint=wb;wb.prototype.getAxis1=wb.prototype.vg;wb.prototype.getAxis2=wb.prototype.xg;wb.prototype.getAxis1To=wb.prototype.wg;wb.prototype.getAxis2To=wb.prototype.yg;wb.prototype.getLocalAxis1=wb.prototype.zg;wb.prototype.getLocalAxis2=wb.prototype.Bg;wb.prototype.getLocalAxis1To=wb.prototype.Ag;wb.prototype.getLocalAxis2To=wb.prototype.Cg;wb.prototype.getTwistSpringDamper=wb.prototype.zn;wb.prototype.getTwistLimitMotor=wb.prototype.yn;wb.prototype.getSwingSpringDamper=wb.prototype.tn;wb.prototype.getSwingAxis=wb.prototype.rn;wb.prototype.getSwingAxisTo=wb.prototype.sn;wb.prototype.getSwingAngle=wb.prototype.qn;wb.prototype.getTwistAngle=wb.prototype.xn;window.OIMO.RagdollJointConfig=Wd;Wd.prototype.init=Wd.prototype.za;window.OIMO.RevoluteJoint=Mb;Mb.prototype.getAxis1=Mb.prototype.vg;Mb.prototype.getAxis2=Mb.prototype.xg;Mb.prototype.getAxis1To=Mb.prototype.wg;Mb.prototype.getAxis2To=Mb.prototype.yg;Mb.prototype.getLocalAxis1=Mb.prototype.zg;Mb.prototype.getLocalAxis2=Mb.prototype.Bg;Mb.prototype.getLocalAxis1To=Mb.prototype.Ag;Mb.prototype.getLocalAxis2To=Mb.prototype.Cg;Mb.prototype.getSpringDamper=Mb.prototype.nj;Mb.prototype.getLimitMotor=Mb.prototype.Zk;Mb.prototype.getAngle=Mb.prototype.Xk;window.OIMO.RevoluteJointConfig=Ce;Ce.prototype.init=Ce.prototype.za;window.OIMO.RotationalLimitMotor=Gc;Gc.prototype.setLimits=Gc.prototype.Pa;Gc.prototype.setMotor=Gc.prototype.ab;Gc.prototype.clone=Gc.prototype.clone;window.OIMO.SphericalJoint=se;se.prototype.getSpringDamper=se.prototype.nj;window.OIMO.SphericalJointConfig=re;re.prototype.init=re.prototype.za;window.OIMO.SpringDamper=Lb;Lb.prototype.setSpring=Lb.prototype.Pa;Lb.prototype.setSymplecticEuler=Lb.prototype.ab;Lb.prototype.clone=Lb.prototype.clone;window.OIMO.TranslationalLimitMotor=wc;wc.prototype.setLimits=wc.prototype.Pa;wc.prototype.setMotor=wc.prototype.ab;wc.prototype.clone=wc.prototype.clone;window.OIMO.UniversalJoint=ab;ab.prototype.getAxis1=ab.prototype.vg;ab.prototype.getAxis2=ab.prototype.xg;ab.prototype.getAxis1To=ab.prototype.wg;ab.prototype.getAxis2To=ab.prototype.yg;ab.prototype.getLocalAxis1=ab.prototype.zg;ab.prototype.getLocalAxis2=ab.prototype.Bg;ab.prototype.getLocalAxis1To=ab.prototype.Ag;ab.prototype.getLocalAxis2To=ab.prototype.Cg;ab.prototype.getSpringDamper1=ab.prototype.on;ab.prototype.getSpringDamper2=ab.prototype.pn;ab.prototype.getLimitMotor1=ab.prototype.kn;ab.prototype.getLimitMotor2=ab.prototype.ln;ab.prototype.getAngle1=ab.prototype.en;ab.prototype.getAngle2=ab.prototype.fn;window.OIMO.UniversalJointConfig=qe;qe.prototype.init=qe.prototype.za;window.OIMO.ConstraintSolverType=pe;window.OIMO.DirectJointConstraintSolver=cc;cc.prototype.preSolveVelocity=cc.prototype.jh;cc.prototype.warmStart=cc.prototype.sh;cc.prototype.solveVelocity=cc.prototype.nh;cc.prototype.postSolveVelocity=cc.prototype.vi;cc.prototype.preSolvePosition=cc.prototype.Gg;cc.prototype.solvePositionSplitImpulse=cc.prototype.mh;cc.prototype.solvePositionNgs=cc.prototype.lh;cc.prototype.postSolve=cc.prototype.$e;window.OIMO.PgsContactConstraintSolver=Kb;Kb.prototype.preSolveVelocity=Kb.prototype.jh;Kb.prototype.warmStart=Kb.prototype.sh;Kb.prototype.solveVelocity=Kb.prototype.nh;Kb.prototype.preSolvePosition=Kb.prototype.Gg;Kb.prototype.solvePositionSplitImpulse=Kb.prototype.mh;Kb.prototype.solvePositionNgs=Kb.prototype.lh;Kb.prototype.postSolve=Kb.prototype.$e;window.OIMO.PgsJointConstraintSolver=nc;nc.prototype.preSolveVelocity=nc.prototype.jh;nc.prototype.warmStart=nc.prototype.sh;nc.prototype.solveVelocity=nc.prototype.nh;nc.prototype.postSolveVelocity=nc.prototype.vi;nc.prototype.preSolvePosition=nc.prototype.Gg;nc.prototype.solvePositionSplitImpulse=nc.prototype.mh;nc.prototype.solvePositionNgs=nc.prototype.lh;nc.prototype.postSolve=nc.prototype.$e;window.OIMO.MassData=Ne;window.OIMO.RigidBody=C;C.prototype.getPosition=C.prototype.Xl;C.prototype.getPositionTo=C.prototype.Zl;C.prototype.setPosition=C.prototype.sm;C.prototype.translate=C.prototype.vm;C.prototype.getRotation=C.prototype.bm;C.prototype.getRotationTo=C.prototype.gm;C.prototype.setRotation=C.prototype.tm;C.prototype.setRotationXyz=C.prototype.Wn;C.prototype.rotate=C.prototype.mm;C.prototype.rotateXyz=C.prototype.ym;C.prototype.getOrientation=C.prototype.Ol;C.prototype.getOrientationTo=C.prototype.Ql;C.prototype.setOrientation=C.prototype.nm;C.prototype.getTransform=C.prototype.hm;C.prototype.getTransformTo=C.prototype.km;C.prototype.setTransform=C.prototype.um;C.prototype.getMass=C.prototype.He;C.prototype.getLocalInertia=C.prototype.ce;C.prototype.getLocalInertiaTo=C.prototype.de;C.prototype.getMassData=C.prototype.Bf;C.prototype.getMassDataTo=C.prototype.Jg;C.prototype.setMassData=C.prototype.Un;C.prototype.getRotationFactor=C.prototype.Mg;C.prototype.setRotationFactor=C.prototype.Vn;C.prototype.getLinearVelocity=C.prototype.Pd;C.prototype.getLinearVelocityTo=C.prototype.be;C.prototype.setLinearVelocity=C.prototype.Tn;C.prototype.getAngularVelocity=C.prototype.Cc;C.prototype.getAngularVelocityTo=C.prototype.Hc;C.prototype.setAngularVelocity=C.prototype.Ln;C.prototype.addLinearVelocity=C.prototype.ab;C.prototype.addAngularVelocity=C.prototype.Pa;C.prototype.applyImpulse=C.prototype.qc;C.prototype.applyLinearImpulse=C.prototype.rc;C.prototype.applyAngularImpulse=C.prototype.Kb;C.prototype.applyForce=C.prototype.lc;C.prototype.applyForceToCenter=C.prototype.mc;C.prototype.applyTorque=C.prototype.zc;C.prototype.getGravityScale=C.prototype.bd;C.prototype.setGravityScale=C.prototype.Rn;C.prototype.getLocalPoint=C.prototype.ee;C.prototype.getLocalPointTo=C.prototype.fe;C.prototype.getLocalVector=C.prototype.ge;C.prototype.getLocalVectorTo=C.prototype.Ge;C.prototype.getWorldPoint=C.prototype.ci;C.prototype.getWorldPointTo=C.prototype.di;C.prototype.getWorldVector=C.prototype.xj;C.prototype.getWorldVectorTo=C.prototype.wl;C.prototype.getNumShapes=C.prototype.Nl;C.prototype.getShapeList=C.prototype.Ng;C.prototype.getNumContectLinks=C.prototype.Kg;C.prototype.getContactLinkList=C.prototype.ad;C.prototype.getNumJointLinks=C.prototype.Lg;C.prototype.getJointLinkList=C.prototype.cd;C.prototype.addShape=C.prototype.sb;C.prototype.removeShape=C.prototype.wm;C.prototype.getType=C.prototype.lm;C.prototype.setType=C.prototype.Fm;C.prototype.wakeUp=C.prototype.Hm;C.prototype.sleep=C.prototype.Gm;C.prototype.getSleepTime=C.prototype.bi;C.prototype.setAutoSleep=C.prototype.Qn;C.prototype.getPrev=C.prototype.$l;C.prototype.getNext=C.prototype.vl;window.OIMO.RigidBodyConfig=Zj;window.OIMO.RigidBodyType=Qd;window.OIMO.Shape=za;za.prototype.getFriction=za.prototype.qc;za.prototype.setFriction=za.prototype.ge;za.prototype.getRestitution=za.prototype.Hc;za.prototype.setRestitution=za.prototype.He;za.prototype.getLocalTransform=za.prototype.zc;za.prototype.getLocalTransformTo=za.prototype.Cc;za.prototype.getTransform=za.prototype.Pd;za.prototype.getTransformTo=za.prototype.be;za.prototype.setLocalTransform=za.prototype.Ge;za.prototype.getDensity=za.prototype.mc;za.prototype.setDensity=za.prototype.fe;za.prototype.getAabb=za.prototype.Pa;za.prototype.getAabbTo=za.prototype.ab;za.prototype.getGeometry=za.prototype.rc;za.prototype.getRigidBody=za.prototype.ad;za.prototype.getCollisionGroup=za.prototype.sb;za.prototype.setCollisionGroup=za.prototype.ce;za.prototype.getCollisionMask=za.prototype.Kb;za.prototype.setCollisionMask=za.prototype.de;za.prototype.getContactCallback=za.prototype.lc;za.prototype.setContactCallback=za.prototype.ee;za.prototype.getPrev=za.prototype.cd;za.prototype.getNext=za.prototype.bd;window.OIMO.ShapeConfig=Og})(window);
