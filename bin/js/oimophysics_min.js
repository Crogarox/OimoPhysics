/* OimoPhysics (c) 2017 saharan, The MIT License */'use strict';(function(kl){function Ng(){this.position=new t;this.rotation=new O;this.friction=F.defaultFriction;this.restitution=F.defaultRestitution;this.density=F.defaultDensity;this.collisionGroup=F.defaultCollisionGroup;this.collisionMask=F.defaultCollisionMask;this.contactCallback=this.geometry=null}function pa(a){this.sc=-1;this.ha=new za;this.pa=new za;this.a=new za;var b=a.position;this.ha.v=b.x;this.ha.A=b.y;this.ha.B=b.z;b=a.rotation;this.ha.o=b.e00;this.ha.f=b.e01;this.ha.h=b.e02;this.ha.i=b.e10;this.ha.m=b.e11;this.ha.j=b.e12;this.ha.l=b.e20;this.ha.g=b.e21;this.ha.s=b.e22;var b=this.pa,e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Pj=a.restitution;this.Fj=a.friction;this.jk=a.density;this.Ib=a.geometry;this.Aj=a.collisionGroup;this.Bj=a.collisionMask;this.Cj=a.contactCallback;this.u=new Ga;this.Na=null;this.nc=new t}function Qd(){}function Zj(){this.position=new t;this.rotation=new O;this.linearVelocity=new t;this.angularVelocity=new t;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0}function C(a){this.ni=this.Ac=this.ia=this.M=null;this.pg=0;this.dc=this.Mb=null;this.se=0;this.Oe=this.re=null;this.$g=0;var b=a.linearVelocity;this.eb=b.x;this.fb=b.y;this.gb=b.z;b=a.angularVelocity;this.mb=b.x;this.nb=b.y;this.ob=b.z;this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;this.pa=new za;this.a=new za;b=a.position;this.pa.v=b.x;this.pa.A=b.y;this.pa.B=b.z;b=a.rotation;this.pa.o=b.e00;this.pa.f=b.e01;this.pa.h=b.e02;this.pa.i=b.e10;this.pa.m=b.e11;this.pa.j=b.e12;this.pa.l=b.e20;this.pa.g=b.e21;this.pa.s=b.e22;var b=this.a,e=this.pa;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.mc=a.type;this.xb=0;this.Fb=!1;this.hk=a.autoSleep;this.ga=this.fa=this.ea=this.da=this.ca=this.ba=this.aa=this.$=this.Z=this.Jh=this.Ih=this.Hh=this.Gh=this.Fh=this.Eh=this.Dh=this.Ch=this.Bh=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Qa=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.zd=this.yd=this.xd=this.wd=this.Za=this.Lc=0;this.Il=a.linearDamping;this.Al=a.angularDamping;this.mf=this.lf=this.kf=this.Ah=this.zh=this.yh=0;this.ic=new t(1,1,1);this.Cf=!1;this.Ug=1;this.jc=null}function Ne(){this.mass=0;this.localInertia=new O}function dc(a){Kb.call(this);this.P=a;this.info=new Oe;this.Wb=Array(F.maxJacobianRows);a=0;for(var b=this.Wb.length;a<b;){var e=a++;this.Wb[e]=new Pe}}function Ub(a){Kb.call(this);this.ti=a;this.info=new Sf;this.Wb=Array(F.maxManifoldPoints);a=0;for(var b=this.Wb.length;a<b;){var e=a++;this.Wb[e]=new of}}function Tf(a){this.sg=a;this.ck=Array(this.sg);this.Za=Array(this.sg);this.Oi=Array(this.sg);a=0;for(var b=this.sg;a<b;){var e=a++;this.ck[e]=Array(this.sg);this.Za[e]=Array(this.sg);this.Oi[e]=Array(this.sg);for(var d=0,c=this.sg;d<c;){var f=d++;this.ck[e][f]=0;this.Za[e][f]=0;this.Oi[e][f]=0}}this.Ij=1<<this.sg;this.zj=Array(this.Ij);this.ik=Array(this.Ij);a=0;for(b=this.Ij;a<b;){for(var d=e=a++,d=(d&85)+(d>>1&85),d=(d&51)+(d>>2&51),d=(d&15)+(d>>4&15),c=Array(d),f=0,h=d;f<h;){var l=f++;c[l]=Array(d);for(var g=0,k=d;g<k;){var m=g++;c[l][m]=0}}this.zj[e]=!1;this.ik[e]=c}}function Ec(a){Kb.call(this);this.P=a;this.info=new Oe;a=F.maxJacobianRows;this.$h=new Tf(a);this.Ee=new Bk(a);this.Wb=Array(a);for(var b=0,e=this.Wb.length;b<e;){var d=b++;this.Wb[d]=new Pe}b=this.Ee.Nh.length;this.ul=new Rd(b);this.ui=new Rd(b);this.Hg=Array(a);this.Th=Array(a);this.sf=Array(a);this.lj=Array(a);for(b=0;b<a;)e=b++,this.Hg[e]=0,this.Th[e]=0,this.sf[e]=0,this.lj[e]=0}function Rd(a){this.n=a;this.oc=Array(a);this.af=Array(a);for(var b=0;b<a;){var e=b++;this.oc[e]=e}}function Bk(a){this.Cn=a;this.Ze=0;this.Nh=Array(1<<a);this.Te=new sg(a)}function sg(a){this.size=a;this.Nc=0;this.gh=Array(a);this.kh=Array(a);this.ie=0;this.Dg=Array(a)}function ak(a){this.gh=Array(a);this.Dg=Array(a);this.kh=Array(a);this.Rk=Array(a);this.ie=this.Nc=0}function Pe(){this.tf=this.mass=this.ld=this.kd=this.jd=this.hd=this.gd=this.fd=this.rd=this.qd=this.pd=this.od=this.nd=this.md=0}function of(){this.rm=this.qm=this.pm=this.om=this.he=this.Yj=this.Xj=this.Wj=this.Vj=this.Uj=this.Tj=this.fl=this.el=this.dl=this.cl=this.bl=this.al=this.tj=this.sj=this.rj=this.qj=this.pj=this.oj=this.ll=this.kl=this.jl=this.il=this.hl=this.gl=this.Sf=this.Rf=this.Qf=this.Pf=this.Of=this.Nf=this.Zh=this.Yh=this.Xh=this.Wh=this.Vh=this.Uh=0}function pe(){}function qe(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper1=new Mb;this.springDamper2=new Mb;this.limitMotor1=new Jc;this.limitMotor2=new Jc}function vb(a){L.call(this,a,oc.UNIVERSAL);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.Ic=b.x;this.Jc=b.y;this.Kc=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.Ic*this.Ic+this.Jc*this.Jc+this.Kc*this.Kc?(b=this.Ic*this.Ic+this.Jc*this.Jc+this.Kc*this.Kc,0<b&&(b=1/Math.sqrt(b)),this.Ic*=b,this.Jc*=b,this.Kc*=b):(this.Jc=this.Ic=0,this.Kc=1);var e=this.C.a,b=this.D.a,d,c,f,h,l,g,k,m,n,q,p,r,v;r=e.o*this.ra+e.f*this.sa+e.h*this.ta;v=e.i*this.ra+e.m*this.sa+e.j*this.ta;d=e.l*this.ra+e.g*this.sa+e.s*this.ta;var aa,w;aa=b.o*this.Ic+b.f*this.Jc+b.h*this.Kc;w=b.i*this.Ic+b.m*this.Jc+b.j*this.Kc;p=b.l*this.Ic+b.g*this.Jc+b.s*this.Kc;l=w*d-p*v;g=p*r-aa*d;k=aa*v-w*r;l*l+g*g+k*k||(l=r*r,g=v*v,k=d*d,l<g?l<k?(k=1/Math.sqrt(g+k),l=0,g=d*k,k*=-v):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0):g<k?(k=1/Math.sqrt(k+l),l=-d*k,g=0,k*=r):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0));c=v*k-d*g;f=d*l-r*k;h=r*g-v*l;m=g*p-k*w;n=k*aa-l*p;q=l*w-g*aa;var A,u;A=e.o*r+e.i*v+e.l*d;u=e.f*r+e.m*v+e.g*d;d=e.h*r+e.j*v+e.s*d;this.ra=A;this.sa=u;this.ta=d;d=e.o*l+e.i*g+e.l*k;r=e.f*l+e.m*g+e.g*k;v=e.h*l+e.j*g+e.s*k;this.zb=d;this.Ab=r;this.Bb=v;d=e.o*c+e.i*f+e.l*h;r=e.f*c+e.m*f+e.g*h;e=e.h*c+e.j*f+e.s*h;this.fc=d;this.gc=r;this.hc=e;e=b.o*m+b.i*n+b.l*q;c=b.f*m+b.m*n+b.g*q;m=b.h*m+b.j*n+b.s*q;this.hb=e;this.ib=c;this.jb=m;e=b.o*l+b.i*g+b.l*k;m=b.f*l+b.m*g+b.g*k;l=b.h*l+b.j*g+b.s*k;this.Wg=e;this.Xg=m;this.Yg=l;l=b.o*aa+b.i*w+b.l*p;g=b.f*aa+b.m*w+b.g*p;b=b.h*aa+b.j*w+b.s*p;this.Ic=l;this.Jc=g;this.Kc=b;this.zi=this.zl=this.yi=0;this.Dm=this.Cm=this.Bm=!1;this.Fk=a.springDamper1.clone();this.Gk=a.springDamper2.clone();this.xk=a.limitMotor1.clone();this.yk=a.limitMotor2.clone()}function Hc(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function Mb(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function re(){Fc.call(this);this.springDamper=new Mb}function se(a){L.call(this,a,0);this.ue=a.springDamper.clone()}function Jc(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function Ce(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper=new Mb;this.limitMotor=new Jc}function Qb(a){L.call(this,a,1);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.hb=b.x;this.ib=b.y;this.jb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.hb*this.hb+this.ib*this.ib+this.jb*this.jb?(b=this.hb*this.hb+this.ib*this.ib+this.jb*this.jb,0<b&&(b=1/Math.sqrt(b)),this.hb*=b,this.ib*=b,this.jb*=b):(this.hb=1,this.jb=this.ib=0);var e,d,c,f,h,l,g,k;d=this.ra*this.hb+this.sa*this.ib+this.ta*this.jb;-1.000001<d&&-.999999>d?(b=this.ra,e=this.sa,c=this.ta,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.sa*this.jb-this.ta*this.ib,e=this.ta*this.hb-this.ra*this.jb,f=this.ra*this.ib-this.sa*this.hb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.ra,m=this.sa,q=this.ta,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.zb=0,this.Ab=q*p,this.Bb=-m*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0):r<v?(p=1/Math.sqrt(v+p),this.zb=-q*p,this.Ab=0,this.Bb=n*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0);this.fc=this.sa*this.Bb-this.ta*this.Ab;this.gc=this.ta*this.zb-this.ra*this.Bb;this.hc=this.ra*this.Ab-this.sa*this.zb;n=b*this.ra+e*this.sa+c*this.ta;m=d*this.ra+f*this.sa+h*this.ta;q=l*this.ra+g*this.sa+k*this.ta;this.hb=n;this.ib=m;this.jb=q;n=b*this.zb+e*this.Ab+c*this.Bb;m=d*this.zb+f*this.Ab+h*this.Bb;q=l*this.zb+g*this.Ab+k*this.Bb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.fc+e*this.gc+c*this.hc;e=d*this.fc+f*this.gc+h*this.hc;c=l*this.fc+g*this.gc+k*this.hc;this.Ic=b;this.Jc=e;this.Kc=c;this.angularErrorZ=this.angularErrorY=this.angle=0;this.V=new Qe(this);this.ue=a.springDamper.clone();this.Lh=a.limitMotor.clone()}function Wd(){Fc.call(this);this.localTwistAxis1=new t(1,0,0);this.localTwistAxis2=new t(1,0,0);this.localSwingAxis1=new t(0,1,0);this.twistSpringDamper=new Mb;this.swingSpringDamper=new Mb;this.twistLimitMotor=new Jc;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function Lb(a){L.call(this,a,oc.RAGDOLL);var b=a.localTwistAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localSwingAxis1;this.zb=b.x;this.Ab=b.y;this.Bb=b.z;b=a.localTwistAxis2;this.hb=b.x;this.ib=b.y;this.jb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.fc=this.sa*this.Bb-this.ta*this.Ab;this.gc=this.ta*this.zb-this.ra*this.Bb;this.hc=this.ra*this.Ab-this.sa*this.zb;if(this.fc*this.fc+this.gc*this.gc+this.hc*this.hc)b=this.fc*this.fc+this.gc*this.gc+this.hc*this.hc,0<b&&(b=1/Math.sqrt(b)),this.fc*=b,this.gc*=b,this.hc*=b,this.zb=this.gc*this.ta-this.hc*this.sa,this.Ab=this.hc*this.ra-this.fc*this.ta,this.Bb=this.fc*this.sa-this.gc*this.ra;else{var b=this.ra,e=this.sa,d=this.ta,c=b*b,f=e*e,h=d*d;c<f?c<h?(c=1/Math.sqrt(f+h),this.zb=0,this.Ab=d*c,this.Bb=-e*c):(c=1/Math.sqrt(c+f),this.zb=e*c,this.Ab=-b*c,this.Bb=0):f<h?(c=1/Math.sqrt(h+c),this.zb=-d*c,this.Ab=0,this.Bb=b*c):(c=1/Math.sqrt(c+f),this.zb=e*c,this.Ab=-b*c,this.Bb=0);this.fc=this.sa*this.Bb-this.ta*this.Ab;this.gc=this.ta*this.zb-this.ra*this.Bb;this.hc=this.ra*this.Ab-this.sa*this.zb}var l,g,k,m,c=this.ra*this.hb+this.sa*this.ib+this.ta*this.jb;-1.000001<c&&-.999999>c?(b=this.ra,e=this.sa,d=this.ta,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.sa*this.jb-this.ta*this.ib,e=this.ta*this.hb-this.ra*this.jb,f=this.ra*this.ib-this.sa*this.hb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);k=e;var h=c,e=d,n=2*b;g=2*k;d=2*h;c=b*n;f=k*g;l=h*d;h=b*g;m=k*d;k=b*d;var n=e*n,q=e*g;g=e*d;b=1-f-l;e=h-g;d=k+q;h+=g;l=1-c-l;g=m-n;k-=q;m+=n;c=1-c-f;f=b*this.ra+e*this.sa+d*this.ta;n=h*this.ra+l*this.sa+g*this.ta;q=k*this.ra+m*this.sa+c*this.ta;this.hb=f;this.ib=n;this.jb=q;f=b*this.zb+e*this.Ab+d*this.Bb;n=h*this.zb+l*this.Ab+g*this.Bb;q=k*this.zb+m*this.Ab+c*this.Bb;this.Wg=f;this.Xg=n;this.Yg=q;b=b*this.fc+e*this.gc+d*this.hc;e=h*this.fc+l*this.gc+g*this.hc;d=k*this.fc+m*this.gc+c*this.hc;this.Ic=b;this.Jc=e;this.Kc=d;this.Nk=a.twistSpringDamper.clone();this.Mk=a.twistLimitMotor.clone();this.Hk=a.swingSpringDamper.clone();this.Jj=a.maxSwingAngle1;this.Kj=a.maxSwingAngle2;this.Jj<F.minRagdollMaxSwingAngle&&(this.Jj=F.minRagdollMaxSwingAngle);this.Kj<F.minRagdollMaxSwingAngle&&(this.Kj=F.minRagdollMaxSwingAngle);this.Wk=new Jc;this.Wk.lowerLimit=-1;this.swingConstraintAxisZ=this.swingConstraintAxisY=this.swingConstraintAxisX=this.swingConstraintAxis1Z=this.swingConstraintAxis1Y=this.swingConstraintAxis1X=this.twistAxisZ=this.twistAxisY=this.twistAxisX=this.swingAxisZ=this.swingAxisY=this.swingAxisX=this.swingError=this.ej=this.Wi=this.Wk.upperLimit=0}function Dd(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.limitMotor=new Hc;this.springDamper=new Mb}function Nb(a){L.call(this,a,oc.PRISMATIC);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.hb=b.x;this.ib=b.y;this.jb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.hb*this.hb+this.ib*this.ib+this.jb*this.jb?(b=this.hb*this.hb+this.ib*this.ib+this.jb*this.jb,0<b&&(b=1/Math.sqrt(b)),this.hb*=b,this.ib*=b,this.jb*=b):(this.hb=1,this.jb=this.ib=0);var e,d,c,f,h,l,g,k;d=this.ra*this.hb+this.sa*this.ib+this.ta*this.jb;-1.000001<d&&-.999999>d?(b=this.ra,e=this.sa,c=this.ta,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.sa*this.jb-this.ta*this.ib,e=this.ta*this.hb-this.ra*this.jb,f=this.ra*this.ib-this.sa*this.hb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.ra,m=this.sa,q=this.ta,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.zb=0,this.Ab=q*p,this.Bb=-m*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0):r<v?(p=1/Math.sqrt(v+p),this.zb=-q*p,this.Ab=0,this.Bb=n*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0);this.fc=this.sa*this.Bb-this.ta*this.Ab;this.gc=this.ta*this.zb-this.ra*this.Bb;this.hc=this.ra*this.Ab-this.sa*this.zb;n=b*this.ra+e*this.sa+c*this.ta;m=d*this.ra+f*this.sa+h*this.ta;q=l*this.ra+g*this.sa+k*this.ta;this.hb=n;this.ib=m;this.jb=q;n=b*this.zb+e*this.Ab+c*this.Bb;m=d*this.zb+f*this.Ab+h*this.Bb;q=l*this.zb+g*this.Ab+k*this.Bb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.fc+e*this.gc+c*this.hc;e=d*this.fc+f*this.gc+h*this.hc;c=l*this.fc+g*this.gc+k*this.hc;this.Ic=b;this.Jc=e;this.Kc=c;this.V=new Qe(this);this.angularErrorZ=this.angularErrorY=this.angularErrorX=this.linearErrorZ=this.linearErrorY=this.Vf=0;this.ue=a.springDamper.clone();this.Lh=a.limitMotor.clone()}function oc(){}function Oc(a){this.wk=a}function Ck(){this.tb=this.Wc=this.ua=0}function Qe(a){this.P=a;this.le=this.ke=this.je=this.Od=this.Nd=this.Md=this.$c=this.Zc=this.Yc=0}function te(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.translationalLimitMotor=new Hc;this.translationalSpringDamper=new Mb;this.rotationalLimitMotor=new Jc;this.rotationalSpringDamper=new Mb}function Fc(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new t;this.localAnchor2=new t;this.allowCollision=!1;this.solverType=F.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=F.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function Wa(a){L.call(this,a,2);var b=a.localAxis1;this.ra=b.x;this.sa=b.y;this.ta=b.z;b=a.localAxis2;this.hb=b.x;this.ib=b.y;this.jb=b.z;this.ra*this.ra+this.sa*this.sa+this.ta*this.ta?(b=this.ra*this.ra+this.sa*this.sa+this.ta*this.ta,0<b&&(b=1/Math.sqrt(b)),this.ra*=b,this.sa*=b,this.ta*=b):(this.ra=1,this.ta=this.sa=0);this.hb*this.hb+this.ib*this.ib+this.jb*this.jb?(b=this.hb*this.hb+this.ib*this.ib+this.jb*this.jb,0<b&&(b=1/Math.sqrt(b)),this.hb*=b,this.ib*=b,this.jb*=b):(this.hb=1,this.jb=this.ib=0);var e,d,c,f,h,l,g,k;d=this.ra*this.hb+this.sa*this.ib+this.ta*this.jb;-1.000001<d&&-.999999>d?(b=this.ra,e=this.sa,c=this.ta,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.sa*this.jb-this.ta*this.ib,e=this.ta*this.hb-this.ra*this.jb,f=this.ra*this.ib-this.sa*this.hb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.ra,m=this.sa,q=this.ta,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.zb=0,this.Ab=q*p,this.Bb=-m*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0):r<v?(p=1/Math.sqrt(v+p),this.zb=-q*p,this.Ab=0,this.Bb=n*p):(p=1/Math.sqrt(p+r),this.zb=m*p,this.Ab=-n*p,this.Bb=0);this.fc=this.sa*this.Bb-this.ta*this.Ab;this.gc=this.ta*this.zb-this.ra*this.Bb;this.hc=this.ra*this.Ab-this.sa*this.zb;n=b*this.ra+e*this.sa+c*this.ta;m=d*this.ra+f*this.sa+h*this.ta;q=l*this.ra+g*this.sa+k*this.ta;this.hb=n;this.ib=m;this.jb=q;n=b*this.zb+e*this.Ab+c*this.Bb;m=d*this.zb+f*this.Ab+h*this.Bb;q=l*this.zb+g*this.Ab+k*this.Bb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.fc+e*this.gc+c*this.hc;e=d*this.fc+f*this.gc+h*this.hc;c=l*this.fc+g*this.gc+k*this.hc;this.Ic=b;this.Jc=e;this.Kc=c;this.linearErrorZ=this.linearErrorY=this.Vf=this.angularErrorZ=this.angularErrorY=this.angle=0;this.V=new Qe(this);this.Lk=a.translationalSpringDamper.clone();this.Kk=a.translationalLimitMotor.clone();this.Ek=a.rotationalSpringDamper.clone();this.Dk=a.rotationalLimitMotor.clone()}function L(a,b){this.qb=new Oc(this);this.rb=new Oc(this);this.Ec=F.defaultJointPositionCorrectionAlgorithm;this.mc=b;this.jc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.gk=a.allowCollision;this.Ji=a.breakForce;this.Ki=a.breakTorque;switch(a.solverType){case 0:this.Rj=new dc(this);break;case 1:this.Rj=new Ec(this)}b=a.localAnchor1;this.Pi=b.x;this.Qi=b.y;this.Ri=b.z;a=a.localAnchor2;this.Si=a.x;this.Ti=a.y;this.Ui=a.z;this.Kc=this.Jc=this.Ic=this.Yg=this.Xg=this.Wg=this.jb=this.ib=this.hb=this.hc=this.gc=this.fc=this.Bb=this.Ab=this.zb=this.ta=this.sa=this.ra=this.If=this.Hf=this.Gf=this.Ff=this.Ef=this.Df=this.Ub=this.Tb=this.Sb=this.Rb=this.Qb=this.Pb=0;this.Nb=Array(F.maxJacobianRows);a=0;for(b=F.maxJacobianRows;a<b;){var e=a++;this.Nb[e]=new Ck}}function gj(){this.Aa=new dd;this.bb=this.motorSpeed=this.Ha=this.Ia=this.Ma=this.Fa=0;this.ua=null}function Oe(){this.De=this.Ce=null;this.Ka=0;this.rows=Array(F.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new gj}}function hj(){this.Eg=new dd;this.vj=new dd;this.uj=new dd;this.friction=this.Ma=this.Fa=0;this.ua=null}function Sf(){this.De=this.Ce=null;this.Ka=0;this.rows=Array(F.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new hj}}function dd(){this.wc=this.Y=this.X=this.W=this.U=this.T=this.S=this.Da=this.Ca=this.Ba=this.xa=this.wa=this.va=0}function ij(a){this.Ja=a;this.ol=0;this.pl=Array(F.maxManifoldPoints);a=0;for(var b=F.maxManifoldPoints;a<b;){var e=a++;this.pl[e]=new bc}}function bc(){this.Dc=this.Kd=this.Jd=this.Id=this.Hd=this.Gd=this.Fd=this.bc=this.ac=this.$b=this.Eb=this.Db=this.Cb=this.gf=this.ff=this.ef=this.df=this.cf=this.bf=0;this.Wd=new jj;this.Jf=this.Se=!1;this.sc=-1}function zc(){this.Xd=this.Ii=this.Hi=this.Gi=this.Zi=this.Yi=this.Xi=this.og=this.ng=this.mg=0;this.tc=Array(F.maxManifoldPoints);for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.tc[e]=new bc}}function jj(){this.We=this.Ve=this.Ue=this.tb=this.xc=this.yc=this.Xc=0}function md(a){this.Rj=new Ub(this);this.Ja=a}function ec(){}function Kb(){this.D=this.C=null;this.Cf=!1}function Rc(){}function Re(){this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new t(1,.1,.1);this.jointLineColor=new t(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new t(.2,.2,1);this.contactTangentColor=new t(.1,.8,.1);this.contactNormalColor=new t(1,.1,.1);this.disabledContactColor=new t(.5,.1,.1);this.newContactColor=new t(1,1,.1);this.contactColor=new t(1,.1,.1);this.pairColor=new t(1,1,.1);this.bvhNodeColor=new t(.4,.4,.4);this.aabbColor=new t(1,.1,.1);this.kinematicShapeColor=new t(1,.5,.1);this.staticShapeColor=new t(.7,.7,.7);this.sleepingShapeColor2=new t(.2,.8,.5);this.sleepingShapeColor1=new t(.3,.3,.8);this.sleepyShapeColor2=new t(.6,.8,.3);this.sleepyShapeColor1=new t(.5,.25,.6);this.shapeColor2=new t(1,.8,.1);this.shapeColor1=new t(.7,.2,.4)}function Hb(){this.p=new Fb;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.bk=Array(5);this.rh=Array(5);this.dk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.bk[b]=Array(e);this.rh[b]=Array(e);this.dk[b]=Array(e);for(e=0;8>e;){var d=e++,c=.7853981633974475*b,f=.7853981633974475*d;this.bk[b][d]=new t(Math.sin(c)*Math.cos(f),Math.cos(c),-Math.sin(c)*Math.sin(f));this.rh[b][d]=new t;this.dk[b][d]=new t}}this.jj=Array(8);this.Sl=Array(8);this.ae=Array(8);this.Fe=Array(8);this.Af=Array(8);for(a=0;8>a;)b=a++,this.jj[b]=new t(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.Sl[b]=new t(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.ae[b]=new t,this.Fe[b]=new t,this.Af[b]=new t;this.style=new Re}function wd(){this.position=new t;this.normal=new t;this.shape=null;this.fraction=1;this.position.O();this.normal.O();this.hit=!1}function Mc(){}function Xc(){}function ed(){}function pf(){this.u=new Ga;this.Bl=null}function ue(){this.wi=new Ed;this.gj=new za;this.Vf=new t;this.O=new t;this.Ul=this.ij=null}function Se(){this.wi=new Ed;this.gj=new t;this.end=new t;this.ij=null}function ra(a,b){null==a&&(a=2);switch(a){case 1:this.cc=new Cb;break;case 2:this.cc=new fc}this.wh=new Fd(this.cc);null==b&&(b=new t(0,-9.80665,0));this.lk=new t(b.x,b.y,b.z);this.hi=this.Kh=this.mi=this.jf=null;this.Mj=this.zk=this.pg=this.Vi=0;this.Bk=10;this.Ak=5;this.Oj=new Se;this.Mi=new ue;this.ek=new pf;this.lg=new Dk;this.Qe=Array(F.islandInitialConstraintArraySize);this.dh=Array(F.islandInitialRigidBodyArraySize);this.Mh=new kj;this.Ga=new Fb;this.Jl=0}function kj(){this.invDt=this.dt=0;this.dtRatio=1}function Dk(){this.xf=Array(F.islandInitialRigidBodyArraySize);this.yf=Array(F.islandInitialConstraintArraySize);this.ph=Array(F.islandInitialConstraintArraySize);this.oh=Array(F.islandInitialConstraintArraySize);this.hh=this.ih=this.wf=this.vf=0}function Fd(a){this.cc=a;this.Jm=new Sd;this.ji=0}function Cc(){this.Mc=this.Ud=this.M=this.ia=null}function pc(){this.ia=this.M=null;this.qb=new Cc;this.rb=new Cc;this.xh=this.D=this.C=this.vc=this.uc=null;this.Li=new bk;this.Km=new nd;this.Qj=this.Hj=!1;this.Ja=new zc;this.Ll=new ij(this.Ja);this.Ke=new md(this.Ja);this.ug=!1}function ha(a,b,e,d){null==d&&(d=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=d;ha.numCreations++}function Fb(){this.b=Array(256);this.c=0;this.kb=Array(256);this.pb=0;this.zf=Array(256);this.Uf=0;this.Td=Array(256);this.$d=0}function Ba(){}function M(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){null==v&&(v=1);null==r&&(r=0);null==p&&(p=0);null==q&&(q=0);null==n&&(n=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==c&&(c=0);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;M.numCreations++}function O(a,b,e,d,c,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==c&&(c=1);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;O.numCreations++}function fd(){}function lc(){}function Rb(){this.Oa=Array(4);this.cb=Array(4);this.lb=Array(4);this.fj=Array(3);this.fj[0]=new t(1,0,0);this.fj[1]=new t(0,1,0);this.fj[2]=new t(0,0,1);this.Nn=new t;this.On=new t;this.Fn=new t;this.En=new t;this.Mn=new za;for(var a=0;4>a;){var b=a++;this.Oa[b]=new t;this.cb[b]=new t;this.lb[b]=new t}this.dir=new t;this.closest=new t;this.closestPoint1=new t;this.closestPoint2=new t;this.Fg=new lj}function F(){}function za(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function t(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;t.numCreations++}function Ek(){this.ql=new t}function Yc(){this.ud=new t;this.cb=new t;this.lb=new t}function od(){this.id=++od.Cc;this.ia=this.M=null;this.Lj=new t;this.Jk=this.Ej=0;this.cj=!1;this.yb=Array(3);this.we=Array(3);this.Ie=Array(3);this.ai=new t;this.ii=Array(3);this.ii[0]=1;this.ii[1]=2;this.ii[2]=0}function lj(){this.yb=Array(F.maxEPAVertices);this.ei=new t;this.Ae=0;this.Fc=this.Vc=null;this.ah=0;this.Re=this.ve=null}function Te(){this.qh=!1}function Nd(a){this.qh=a}function xd(a){this.qh=a}function ee(){this.qh=!1}function Gd(){this.qh=!1}function gd(a){this.qh=a}function bk(){}function mj(){this.position1=new t;this.position2=new t;this.id=this.depth=0}function nd(){this.numPoints=0;this.normal=new t;this.points=Array(F.maxManifoldPoints);this.incremental=!1;for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.points[e]=new mj}}function Sd(){this.Hb=Array(8);for(var a=0;6>a;){var b=a++;this.Hb[b]=Array(8)}a=new ee;this.Hb[0][0]=new Te;this.Hb[0][1]=new xd(!1);this.Hb[0][2]=a;this.Hb[0][3]=a;this.Hb[0][4]=new Nd(!1);this.Hb[0][5]=a;this.Hb[1][0]=new xd(!0);this.Hb[1][1]=a;this.Hb[1][2]=a;this.Hb[1][3]=a;this.Hb[1][4]=a;this.Hb[1][5]=a;this.Hb[2][0]=a;this.Hb[2][1]=a;this.Hb[2][2]=a;this.Hb[2][3]=a;this.Hb[2][4]=a;this.Hb[2][5]=a;this.Hb[3][0]=a;this.Hb[3][1]=a;this.Hb[3][2]=a;this.Hb[3][3]=a;this.Hb[3][4]=a;this.Hb[3][5]=a;this.Hb[4][0]=new Nd(!0);this.Hb[4][1]=a;this.Hb[4][2]=a;this.Hb[4][3]=a;this.Hb[4][4]=new Gd;this.Hb[4][5]=a;this.Hb[5][0]=a;this.Hb[5][1]=a;this.Hb[5][2]=a;this.Hb[5][3]=a;this.Hb[5][4]=a;this.Hb[5][5]=a}function yd(a){mb.call(this,0);this.ec=this.$a=a;this.Be()}function Ed(){this.position=new t;this.normal=new t;this.fraction=0}function Bc(){}function ad(a,b){mb.call(this,2);this.$a=a;this.Gb=b;this.Be()}function pd(a){mb.call(this,5);this.Ae=a.length;this.yb=Array(this.Ae);this.tg=Array(this.Ae);for(var b=0,e=this.Ae;b<e;){var d=b++;this.yb[d]=a[d];this.tg[d]=new t}this.Ml=!0;this.Be()}function bd(a,b){mb.call(this,3);this.$a=a;this.Gb=b;this.ak=a/Math.sqrt(a*a+4*b*b);this.Sj=2*b/Math.sqrt(a*a+4*b*b);this.Be()}function hd(a,b){mb.call(this,4);this.$a=a;this.Gb=b;this.ec=this.$a;this.Be()}function id(a){mb.call(this,1);this.Le=a.x;this.Me=a.y;this.Ne=a.z;this.mk=this.Le;this.qk=this.pk=this.nk=0;this.rk=this.Me;this.uk=this.tk=this.sk=0;this.vk=this.Ne;this.Be()}function Ga(){this.la=this.ka=this.ja=this.oa=this.na=this.ma=0}function Fk(){this.Ob=null;this.Nj=0;this.oi=new nj;this.Xe=this.Tf=this.Rc=null;this.ai=Array(1024)}function nj(){this.Gl=0;this.yj=!1}function oj(a,b){qc.call(this,a,b);this.Qd=null;this.Zg=!1}function fe(){this.Kf=this.Lf=this.M=null;this.F=Array(2);this.La=0;this.Ea=null;this.N=0;this.Na=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function fc(){ib.call(this);this.Gj=!0;this.ge=new Fk;this.Ye=Array(1024);this.uf=0}function Cb(){ib.call(this);this.Gj=!1}function Kc(){this.rg=this.qg=null}function qc(a,b){this.userData=a;this.sc=b;this.M=this.ia=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function Hd(){}function xc(){}function Cf(){mb.call(this,-1);this.min=new t;this.max=new t}function De(){mb.call(this,-1)}function mb(a){Ob.call(this,a);this.ec=F.defaultGJKMargin;this.Ml=!1}function Ob(a){this.mc=a;this.nf=0}function ib(){this.ki=0;this.Yd=this.Pe=this.te=null;this.Gj=!1;this.$i=0;this.bh=null;this.Fl=0;this.Dj=new De;this.u=new Cf;this.Mf=new za;this.O=new t;this.wi=new Ed}function cc(){}function qd(a){this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,qd)}function sb(a,b){function e(){}e.prototype=a;a=new e;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}Math.R=!0;qd.R=!0;qd.Pa=function(a){return a instanceof Error?a:new qd(a)};qd.Jb=Error;qd.prototype=sb(Error.prototype,{qa:qd});cc.R=!0;cc.Hc=function(a){if(a instanceof Array&&null==a.xl)return Array;var b=a.qa;if(null!=b)return b;a=cc.Kb(a);return null!=a?cc.qc(a):null};cc.sb=function(a,b){if(null==a)return!1;if(a==b)return!0;var e=a.Yn;if(null!=e)for(var d=0,c=e.length;d<c;){var f=d++,f=e[f];if(f==b||cc.sb(f,b))return!0}return cc.sb(a.Jb,b)};cc.ab=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.xl:!1;case ll:return"boolean"==typeof a;case ml:return!0;case nl:return"number"==typeof a;case ol:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||cc.sb(cc.Hc(a),b))return!0}else{if("object"==typeof b&&cc.lc(b)&&a instanceof b)return!0}else return!1;return b==pl&&null!=a.R||b==ql&&null!=a.Xn?!0:a.xl==b}};cc.kc=function(a,b){if(cc.ab(a,b))return a;throw new qd("Cannot cast "+a+" to "+b);};cc.Kb=function(a){a=cc.rc.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};cc.lc=function(a){return null!=cc.Kb(a)};cc.qc=function(a){return kl[a]};ib.R=!0;ib.prototype={Ph:function(){return null},Qh:function(){},sd:function(){},Kb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},si:function(){},Pa:function(){return this.Yd},sb:function(){return this.Gj},ab:function(){return this.$i},Sd:function(){},rf:function(){},eh:function(){},qa:ib};Ob.R=!0;Ob.prototype={Be:function(){},Lb:function(){},li:function(){return!1},ab:function(){return this.mc},Pa:function(){return this.nf},Sd:function(a,b,e,d){var c,f,h,l;c=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;c-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.li(e.o*c+e.i*f+e.l*a,e.f*c+e.m*f+e.g*a,e.h*c+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,d)){var g,k;b=d.position;c=b.x;f=b.y;h=b.z;b=d.normal;l=b.x;g=b.y;k=b.z;var m,n;m=e.o*c+e.f*f+e.h*h;n=e.i*c+e.m*f+e.j*h;h=e.l*c+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;c=m+e.v;f=n+e.A;h+=e.B;e=d.position;e.x=c;e.y=f;e.z=h;d=d.normal;d.x=b;d.y=a;d.z=l;return!0}return!1},qa:Ob};mb.R=!0;mb.Jb=Ob;mb.prototype=sb(Ob.prototype,{fn:function(){return this.ec},Jn:function(a){0>a&&(a=0);this.ec=a},Ld:function(){},Sd:function(a,b,e,d){return this.Ml?Rb.Pa.Sd(this,e,a,b,d):Ob.prototype.Sd.call(this,a,b,e,d)},qa:mb});De.R=!0;De.Jb=mb;De.prototype=sb(mb.prototype,{za:function(a,b,e){this.Xm=a;var d,c,f;d=e.x;c=e.y;f=e.z;var h;e=b.o*d+b.i*c+b.l*f;h=b.f*d+b.m*c+b.g*f;b=b.h*d+b.j*c+b.s*f;d=this.nl=new t;d.x=e;d.y=h;d.z=b;this.ec=a.ec},Ld:function(a,b){this.Xm.Ld(a,b);var e=this.nl;if(0<a.x*e.x+a.y*e.y+a.z*e.z){a=this.nl;var e=b.y+a.y,d=b.z+a.z;b.x+=a.x;b.y=e;b.z=d}},qa:De});Cf.R=!0;Cf.Jb=mb;Cf.prototype=sb(mb.prototype,{Ld:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z},qa:Cf});xc.R=!0;xc.prototype={td:function(){},qa:xc};Hd.R=!0;qc.R=!0;qc.prototype={sb:function(){return this.sc},Pa:function(){var a=new Ga;a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I;return a},ab:function(a){a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I},qa:qc};Kc.R=!0;Kc.prototype={Pa:function(){return this.qg},ab:function(){return this.rg},sb:function(){return this.M},qa:Kc};Cb.R=!0;Cb.Jb=ib;Cb.prototype=sb(ib.prototype,{Ph:function(a,b){a=new qc(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ia=this.Pe);this.Pe=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;return a},Qh:function(a){this.ki--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ia);a.M=null;a.ia=null;a.userData=null},sd:function(a,b){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;for(a=this.te;null!=a;){for(var b=a.M,e=a.M;null!=e;){var d=e.M;this.$i++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var c=this.bh;null!=c?(this.bh=c.M,c.M=null):c=new Kc;null!=this.Yd&&(c.M=this.Yd);this.Yd=c;c.qg=a;c.rg=e}e=d}a=b}},Sd:function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.te;null!=l;){var g=l.M,k=d,m=c,n=a,q=f,p=h,r=b,v=k<q?k:q,aa=m<p?m:p,w=n<r?n:r,A=m>p?m:p,u=n>r?n:r,D=l.J,t=l.K,z=l.L,E=l.G,x=l.H,yb=l.I;if(D>(k>q?k:q)||E<v||t>A||x<aa||z>u||yb<w)n=!1;else{var q=q-k,p=p-m,N=r-n,r=0>q?-q:q,v=0>p?-p:p,A=0>N?-N:N,aa=.5*(E-D),w=.5*(x-t),u=.5*(yb-z),k=k-.5*(E+D),m=m-.5*(x+t),n=n-.5*(yb+z),z=m*N-n*p;0<(0>z?-z:z)-(w*A+u*v)?n=!0:(n=n*q-k*N,n=0<(0>n?-n:n)-(u*r+aa*A));n?n=!0:(n=k*p-m*q,n=0<(0>n?-n:n)-(aa*v+w*r));n=n?!1:!0}n&&e.td(l);l=g}},rf:function(a,b,e,d){for(var c=this.te;null!=c;){var f=c.M,h=this.u.min;h.x=c.J;h.y=c.K;h.z=c.L;h=this.u.max;h.x=c.G;h.y=c.H;h.z=c.I;this.Dj.za(a,b,e);h=Rb.Pa;0==h.kj(this.Dj,this.u,b,this.Mf,null,!1)&&0>=h.distance&&d.td(c);c=f}},eh:function(a,b){for(var e=this.te;null!=e;){var d=e.M;a.ma<e.G&&a.ja>e.J&&a.na<e.H&&a.ka>e.K&&a.oa<e.I&&a.la>e.L&&b.td(e);e=d}},qa:Cb});fc.R=!0;fc.Jb=ib;fc.prototype=sb(ib.prototype,{fh:function(a,b){this.$i++;var e=0==a.N,d=0==b.N;a==b?e||(this.fh(a.F[0],b),this.fh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&d?(a=a.Na,b=b.Na,e=this.bh,null!=e?(this.bh=e.M,e.M=null):e=new Kc,null!=this.Yd&&(e.M=this.Yd),this.Yd=e,e.qg=a,e.rg=b):d||a.N>b.N?(this.fh(a.F[0],b),this.fh(a.F[1],b)):(this.fh(b.F[0],a),this.fh(b.F[1],a)))},rl:function(a,b,e,d,c,f,h,l){var g=a.J,k=a.K,m=a.L,n=a.G,q=a.H,p=a.I,r;if(g>(b>c?b:c)||n<(b<c?b:c)||k>(e>f?e:f)||q<(e<f?e:f)||m>(d>h?d:h)||p<(d<h?d:h))r=!1;else{var v=c-b,aa=f-e,w=h-d;r=0>v?-v:v;var A=0>aa?-aa:aa,u=0>w?-w:w,D=.5*(n-g),t=.5*(q-k),z=.5*(p-m),g=b-.5*(n+g),k=e-.5*(q+k),m=d-.5*(p+m),p=k*w-m*aa;0<(0>p?-p:p)-(t*u+z*A)?u=!0:(w=m*v-g*w,u=0<(0>w?-w:w)-(z*r+D*u));u?r=!0:(v=g*aa-k*v,r=0<(0>v?-v:v)-(D*A+t*r));r=r?!1:!0}r&&(0==a.N?l.td(a.Na):(this.rl(a.F[0],b,e,d,c,f,h,l),this.rl(a.F[1],b,e,d,c,f,h,l)))},Vk:function(a,b,e,d,c){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.Dj.za(b,e,d);f=Rb.Pa;0==f.kj(this.Dj,this.u,e,this.Mf,null,!1)&&0>=f.distance&&(0==a.N?c.td(a.Na):(this.Vk(a.F[0],b,e,d,c),this.Vk(a.F[1],b,e,d,c)))},Qk:function(a,b,e){a.J<b.ja&&a.G>b.ma&&a.K<b.ka&&a.H>b.na&&a.L<b.la&&a.I>b.oa&&(0==a.N?e.td(a.Na):(this.Qk(a.F[0],b,e),this.Qk(a.F[1],b,e)))},Ph:function(a,b){a=new oj(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ia=this.Pe);this.Pe=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.ge;var e=b.Rc;null!=e?(b.Rc=e.M,e.M=null):e=new fe;var d=e;d.Na=a;a.Qd=d;d.J=a.J;d.K=a.K;d.L=a.L;d.G=a.G;d.H=a.H;d.I=a.I;b.Nj++;null==b.Tf?b.Tf=d:(b.Xe.Kf=d,d.Lf=b.Xe);b.Xe=d;if(null==d.Na||d.Na.Qd!=d||null!=d.F[0]||null!=d.F[1]||0!=d.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==b.Ob)b.Ob=d;else{for(var c=b.Ob;0<c.N&&(e=b.oi.Dl(c,d),-1!=e);)c=c.F[e];var f=c.Ea,e=b.Rc;null!=e?(b.Rc=e.M,e.M=null):e=new fe;if(null==f)b.Ob=e;else{var h=c.La;f.F[h]=e;e.Ea=f;e.La=h}f=c.La;e.F[f]=c;c.Ea=e;c.La=f;c=c.La^1;e.F[c]=d;d.Ea=e;for(d.La=c;null!=e;){if(b.oi.yj&&!(2>e.N)){var d=e.Ea,f=e.F[0],h=e.F[1],l=f.N-h.N,c=e.La;1<l?(h=f.F[0],l=f.F[1],h.N>l.N?(f.F[1]=e,e.Ea=f,e.La=1,e.F[0]=l,l.Ea=e,l.La=0):(f.F[0]=e,e.Ea=f,e.La=0,e.F[0]=h,h.Ea=e,h.La=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].N,l=f.F[1].N,f.N=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].N,l=e.F[1].N,e.N=(h>l?h:l)+1,null!=d?(d.F[c]=f,f.Ea=d,f.La=c):(b.Ob=f,f.Ea=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.N>l.N?(h.F[1]=e,e.Ea=h,e.La=1,e.F[1]=l,l.Ea=e,l.La=1):(h.F[0]=e,e.Ea=h,e.La=0,e.F[1]=f,f.Ea=e,f.La=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].N,l=h.F[1].N,h.N=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].N,l=e.F[1].N,e.N=(f>l?f:l)+1,null!=d?(d.F[c]=h,h.Ea=d,h.La=c):(b.Ob=h,h.Ea=null),e=h)}d=e.F[0].N;c=e.F[1].N;e.N=(d>c?d:c)+1;d=e.F[0];c=e.F[1];e.J=d.J<c.J?d.J:c.J;e.K=d.K<c.K?d.K:c.K;e.L=d.L<c.L?d.L:c.L;e.G=d.G>c.G?d.G:c.G;e.H=d.H>c.H?d.H:c.H;e.I=d.I>c.I?d.I:c.I;e=e.Ea}}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){b=Array(this.uf<<1);e=0;for(d=this.uf;e<d;)c=e++,b[c]=this.Ye[c],this.Ye[c]=null;this.Ye=b}this.Ye[this.uf++]=a}return a},Qh:function(a){this.ki--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ia);a.M=null;a.ia=null;b=this.ge;e=a.Qd;b.Nj--;var d=e.Lf,c=e.Kf;null!=d&&(d.Kf=c);null!=c&&(c.Lf=d);e==b.Tf&&(b.Tf=b.Tf.Kf);e==b.Xe&&(b.Xe=b.Xe.Lf);e.Kf=null;e.Lf=null;if(null==e.Na||e.Na.Qd!=e||null!=e.F[0]||null!=e.F[1]||0!=e.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(b.Ob==e)b.Ob=null;else{var d=e.Ea,c=d.F[e.La^1],f=d.Ea;if(null==f){c.Ea=null;c.La=0;b.Ob=c;if(null!=d.Na&&null!=d.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.La=0;d.Ea=null;d.N=0;d.Na=null;d.M=b.Rc;b.Rc=d}else{var h=d.La;f.F[h]=c;c.Ea=f;c.La=h;if(null!=d.Na&&null!=d.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.La=0;d.Ea=null;d.N=0;d.Na=null;d.M=b.Rc;b.Rc=d;for(d=f;null!=d;){if(b.oi.yj&&!(2>d.N)){var c=d.Ea,h=d.F[0],l=d.F[1],g=h.N-l.N,f=d.La;1<g?(l=h.F[0],g=h.F[1],l.N>g.N?(h.F[1]=d,d.Ea=h,d.La=1,d.F[0]=g,g.Ea=d,g.La=0):(h.F[0]=d,d.Ea=h,d.La=0,d.F[0]=l,l.Ea=d,l.La=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].N,g=h.F[1].N,h.N=(l>g?l:g)+1,l=d.F[0],g=d.F[1],d.J=l.J<g.J?l.J:g.J,d.K=l.K<g.K?l.K:g.K,d.L=l.L<g.L?l.L:g.L,d.G=l.G>g.G?l.G:g.G,d.H=l.H>g.H?l.H:g.H,d.I=l.I>g.I?l.I:g.I,l=d.F[0].N,g=d.F[1].N,d.N=(l>g?l:g)+1,null!=c?(c.F[f]=h,h.Ea=c,h.La=f):(b.Ob=h,h.Ea=null),d=h):-1>g&&(h=l.F[0],g=l.F[1],h.N>g.N?(l.F[1]=d,d.Ea=l,d.La=1,d.F[1]=g,g.Ea=d,g.La=1):(l.F[0]=d,d.Ea=l,d.La=0,d.F[1]=h,h.Ea=d,h.La=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].N,g=l.F[1].N,l.N=(h>g?h:g)+1,h=d.F[0],g=d.F[1],d.J=h.J<g.J?h.J:g.J,d.K=h.K<g.K?h.K:g.K,d.L=h.L<g.L?h.L:g.L,d.G=h.G>g.G?h.G:g.G,d.H=h.H>g.H?h.H:g.H,d.I=h.I>g.I?h.I:g.I,h=d.F[0].N,g=d.F[1].N,d.N=(h>g?h:g)+1,null!=c?(c.F[f]=l,l.Ea=c,l.La=f):(b.Ob=l,l.Ea=null),d=l)}c=d.F[0].N;f=d.F[1].N;d.N=(c>f?c:f)+1;c=d.F[0];f=d.F[1];d.J=c.J<f.J?c.J:f.J;d.K=c.K<f.K?c.K:f.K;d.L=c.L<f.L?c.L:f.L;d.G=c.G>f.G?c.G:f.G;d.H=c.H>f.H?c.H:f.H;d.I=c.I>f.I?c.I:f.I;d=d.Ea}}}a.Qd=null;if(null!=e.Na&&null!=e.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");e.F[0]=null;e.F[1]=null;e.La=0;e.Ea=null;e.N=0;e.Na=null;e.M=b.Rc;b.Rc=e;a.userData=null;a.M=null;a.ia=null;a.Zg&&(a.Zg=!1)},sd:function(a,b,e){if(!(a.J<=b.ma&&a.G>=b.ja&&a.K<=b.na&&a.H>=b.ka&&a.L<=b.oa&&a.I>=b.la)){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var d;b=e.x;d=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<d?0:d;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>d?0:d;a.I+=0>e?0:e}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){e=Array(this.uf<<1);b=0;for(d=this.uf;b<d;){var c=b++;e[c]=this.Ye[c];this.Ye[c]=null}this.Ye=e}this.Ye[this.uf++]=a}}},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;if(!(2>this.ki)){for(var b=this.uf/this.ki<F.bvhIncrementalCollisionThreshold,e=0,d=this.uf;e<d;){var c=e++,f=this.Ye[c];if(f.Zg){var h=this.ge,l=f.Qd;h.Nj--;var g=l.Lf,k=l.Kf;null!=g&&(g.Kf=k);null!=k&&(k.Lf=g);l==h.Tf&&(h.Tf=h.Tf.Kf);l==h.Xe&&(h.Xe=h.Xe.Lf);l.Kf=null;l.Lf=null;if(null==l.Na||l.Na.Qd!=l||null!=l.F[0]||null!=l.F[1]||0!=l.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(h.Ob==l)h.Ob=null;else{var m=l.Ea,n=m.F[l.La^1],q=m.Ea;if(null==q){n.Ea=null;n.La=0;h.Ob=n;if(null!=m.Na&&null!=m.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.La=0;m.F[0]=null;m.F[1]=null;m.La=0;m.Ea=null;m.N=0;m.Na=null;m.M=h.Rc;h.Rc=m}else{n.Ea=q;var p=m.La;q.F[p]=n;n.Ea=q;n.La=p;if(null!=m.Na&&null!=m.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.La=0;m.F[0]=null;m.F[1]=null;m.La=0;m.Ea=null;m.N=0;m.Na=null;m.M=h.Rc;h.Rc=m;for(var r=q;null!=r;){if(h.oi.yj&&!(2>r.N)){var v=r.Ea,aa=r.F[0],w=r.F[1],A=aa.N-w.N,u=r.La;if(1<A){var D=aa.F[0],t=aa.F[1];if(D.N>t.N){aa.F[1]=r;r.Ea=aa;r.La=1;r.F[0]=t;t.Ea=r;t.La=0;var z=aa.F[0],E=aa.F[1];aa.J=z.J<E.J?z.J:E.J;aa.K=z.K<E.K?z.K:E.K;aa.L=z.L<E.L?z.L:E.L;aa.G=z.G>E.G?z.G:E.G;aa.H=z.H>E.H?z.H:E.H;aa.I=z.I>E.I?z.I:E.I;var x=aa.F[0].N,yb=aa.F[1].N;aa.N=(x>yb?x:yb)+1;var N=r.F[0],G=r.F[1];r.J=N.J<G.J?N.J:G.J;r.K=N.K<G.K?N.K:G.K;r.L=N.L<G.L?N.L:G.L;r.G=N.G>G.G?N.G:G.G;r.H=N.H>G.H?N.H:G.H;r.I=N.I>G.I?N.I:G.I;var al=r.F[0].N,Hl=r.F[1].N;r.N=(al>Hl?al:Hl)+1}else{aa.F[0]=r;r.Ea=aa;r.La=0;r.F[0]=D;D.Ea=r;D.La=0;var C=aa.F[0],ga=aa.F[1];aa.J=C.J<ga.J?C.J:ga.J;aa.K=C.K<ga.K?C.K:ga.K;aa.L=C.L<ga.L?C.L:ga.L;aa.G=C.G>ga.G?C.G:ga.G;aa.H=C.H>ga.H?C.H:ga.H;aa.I=C.I>ga.I?C.I:ga.I;var O=aa.F[0].N,Vb=aa.F[1].N;aa.N=(O>Vb?O:Vb)+1;var L=r.F[0],ka=r.F[1];r.J=L.J<ka.J?L.J:ka.J;r.K=L.K<ka.K?L.K:ka.K;r.L=L.L<ka.L?L.L:ka.L;r.G=L.G>ka.G?L.G:ka.G;r.H=L.H>ka.H?L.H:ka.H;r.I=L.I>ka.I?L.I:ka.I;var Oa=r.F[0].N,U=r.F[1].N;r.N=(Oa>U?Oa:U)+1}null!=v?(v.F[u]=aa,aa.Ea=v,aa.La=u):(h.Ob=aa,aa.Ea=null);r=aa}else if(-1>A){var R=w.F[0],Wb=w.F[1];if(R.N>Wb.N){w.F[1]=r;r.Ea=w;r.La=1;r.F[1]=Wb;Wb.Ea=r;Wb.La=1;var Ma=w.F[0],Ra=w.F[1];w.J=Ma.J<Ra.J?Ma.J:Ra.J;w.K=Ma.K<Ra.K?Ma.K:Ra.K;w.L=Ma.L<Ra.L?Ma.L:Ra.L;w.G=Ma.G>Ra.G?Ma.G:Ra.G;w.H=Ma.H>Ra.H?Ma.H:Ra.H;w.I=Ma.I>Ra.I?Ma.I:Ra.I;var M=w.F[0].N,Pa=w.F[1].N;w.N=(M>Pa?M:Pa)+1;var Aa=r.F[0],zb=r.F[1];r.J=Aa.J<zb.J?Aa.J:zb.J;r.K=Aa.K<zb.K?Aa.K:zb.K;r.L=Aa.L<zb.L?Aa.L:zb.L;r.G=Aa.G>zb.G?Aa.G:zb.G;r.H=Aa.H>zb.H?Aa.H:zb.H;r.I=Aa.I>zb.I?Aa.I:zb.I;var J=r.F[0].N,Qa=r.F[1].N;r.N=(J>Qa?J:Qa)+1}else{w.F[0]=r;r.Ea=w;r.La=0;r.F[1]=R;R.Ea=r;R.La=1;var ba=w.F[0],Q=w.F[1];w.J=ba.J<Q.J?ba.J:Q.J;w.K=ba.K<Q.K?ba.K:Q.K;w.L=ba.L<Q.L?ba.L:Q.L;w.G=ba.G>Q.G?ba.G:Q.G;w.H=ba.H>Q.H?ba.H:Q.H;w.I=ba.I>Q.I?ba.I:Q.I;var P=w.F[0].N,wa=w.F[1].N;w.N=(P>wa?P:wa)+1;var ta=r.F[0],W=r.F[1];r.J=ta.J<W.J?ta.J:W.J;r.K=ta.K<W.K?ta.K:W.K;r.L=ta.L<W.L?ta.L:W.L;r.G=ta.G>W.G?ta.G:W.G;r.H=ta.H>W.H?ta.H:W.H;r.I=ta.I>W.I?ta.I:W.I;var oa=r.F[0].N,y=r.F[1].N;r.N=(oa>y?oa:y)+1}null!=v?(v.F[u]=w,w.Ea=v,w.La=u):(h.Ob=w,w.Ea=null);r=w}}var Ha=r.F[0].N,ca=r.F[1].N;r.N=(Ha>ca?Ha:ca)+1;var Ca=r.F[0],xa=r.F[1];r.J=Ca.J<xa.J?Ca.J:xa.J;r.K=Ca.K<xa.K?Ca.K:xa.K;r.L=Ca.L<xa.L?Ca.L:xa.L;r.G=Ca.G>xa.G?Ca.G:xa.G;r.H=Ca.H>xa.H?Ca.H:xa.H;r.I=Ca.I>xa.I?Ca.I:xa.I;r=r.Ea}}}f.Qd=null;if(null!=l.Na&&null!=l.Na.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");l.M=null;l.La=0;l.F[0]=null;l.F[1]=null;l.La=0;l.Ea=null;l.N=0;l.Na=null;l.M=h.Rc;h.Rc=l;var Da=this.ge,Sa=Da.Rc;null!=Sa?(Da.Rc=Sa.M,Sa.M=null):Sa=new fe;var la=Sa;la.Na=f;f.Qd=la;la.J=f.J;la.K=f.K;la.L=f.L;la.G=f.G;la.H=f.H;la.I=f.I;Da.Nj++;null==Da.Tf?Da.Tf=la:(Da.Xe.Kf=la,la.Lf=Da.Xe);Da.Xe=la;if(null==la.Na||la.Na.Qd!=la||null!=la.F[0]||null!=la.F[1]||0!=la.N)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==Da.Ob)Da.Ob=la;else{for(var Z=Da.Ob;0<Z.N;){var Ea=Da.oi.Dl(Z,la);if(-1==Ea)break;else Z=Z.F[Ea]}var qa=Z.Ea,va=Da.Rc;null!=va?(Da.Rc=va.M,va.M=null):va=new fe;var I=va;if(null==qa)Da.Ob=I;else{var Ka=Z.La;qa.F[Ka]=I;I.Ea=qa;I.La=Ka}var Xa=Z.La;I.F[Xa]=Z;Z.Ea=I;Z.La=Xa;var S=Z.La^1;I.F[S]=la;la.Ea=I;for(la.La=S;null!=I;){if(Da.oi.yj&&!(2>I.N)){var Ya=I.Ea,T=I.F[0],K=I.F[1],ia=T.N-K.N,fb=I.La;if(1<ia){var da=T.F[0],Ic=T.F[1];if(da.N>Ic.N){T.F[1]=I;I.Ea=T;I.La=1;I.F[0]=Ic;Ic.Ea=I;Ic.La=0;var sa=T.F[0],eb=T.F[1];T.J=sa.J<eb.J?sa.J:eb.J;T.K=sa.K<eb.K?sa.K:eb.K;T.L=sa.L<eb.L?sa.L:eb.L;T.G=sa.G>eb.G?sa.G:eb.G;T.H=sa.H>eb.H?sa.H:eb.H;T.I=sa.I>eb.I?sa.I:eb.I;var jb=T.F[0].N,Za=T.F[1].N;T.N=(jb>Za?jb:Za)+1;var ma=I.F[0],na=I.F[1];I.J=ma.J<na.J?ma.J:na.J;I.K=ma.K<na.K?ma.K:na.K;I.L=ma.L<na.L?ma.L:na.L;I.G=ma.G>na.G?ma.G:na.G;I.H=ma.H>na.H?ma.H:na.H;I.I=ma.I>na.I?ma.I:na.I;var Ia=I.F[0].N,Fa=I.F[1].N;I.N=(Ia>Fa?Ia:Fa)+1}else{T.F[0]=I;I.Ea=T;I.La=0;I.F[0]=da;da.Ea=I;da.La=0;var ob=T.F[0],fa=T.F[1];T.J=ob.J<fa.J?ob.J:fa.J;T.K=ob.K<fa.K?ob.K:fa.K;T.L=ob.L<fa.L?ob.L:fa.L;T.G=ob.G>fa.G?ob.G:fa.G;T.H=ob.H>fa.H?ob.H:fa.H;T.I=ob.I>fa.I?ob.I:fa.I;var ea=T.F[0].N,ja=T.F[1].N;T.N=(ea>ja?ea:ja)+1;var bb=I.F[0],ya=I.F[1];I.J=bb.J<ya.J?bb.J:ya.J;I.K=bb.K<ya.K?bb.K:ya.K;I.L=bb.L<ya.L?bb.L:ya.L;I.G=bb.G>ya.G?bb.G:ya.G;I.H=bb.H>ya.H?bb.H:ya.H;I.I=bb.I>ya.I?bb.I:ya.I;var tb=I.F[0].N,Ua=I.F[1].N;I.N=(tb>Ua?tb:Ua)+1}null!=Ya?(Ya.F[fb]=T,T.Ea=Ya,T.La=fb):(Da.Ob=T,T.Ea=null);I=T}else if(-1>ia){var qb=K.F[0],rb=K.F[1];if(qb.N>rb.N){K.F[1]=I;I.Ea=K;I.La=1;I.F[1]=rb;rb.Ea=I;rb.La=1;var ub=K.F[0],Va=K.F[1];K.J=ub.J<Va.J?ub.J:Va.J;K.K=ub.K<Va.K?ub.K:Va.K;K.L=ub.L<Va.L?ub.L:Va.L;K.G=ub.G>Va.G?ub.G:Va.G;K.H=ub.H>Va.H?ub.H:Va.H;K.I=ub.I>Va.I?ub.I:Va.I;var Db=K.F[0].N,mc=K.F[1].N;K.N=(Db>mc?Db:mc)+1;var $a=I.F[0],ua=I.F[1];I.J=$a.J<ua.J?$a.J:ua.J;I.K=$a.K<ua.K?$a.K:ua.K;I.L=$a.L<ua.L?$a.L:ua.L;I.G=$a.G>ua.G?$a.G:ua.G;I.H=$a.H>ua.H?$a.H:ua.H;I.I=$a.I>ua.I?$a.I:ua.I;var Gb=I.F[0].N,H=I.F[1].N;I.N=(Gb>H?Gb:H)+1}else{K.F[0]=I;I.Ea=K;I.La=0;I.F[1]=qb;qb.Ea=I;qb.La=1;var pb=K.F[0],cb=K.F[1];K.J=pb.J<cb.J?pb.J:cb.J;K.K=pb.K<cb.K?pb.K:cb.K;K.L=pb.L<cb.L?pb.L:cb.L;K.G=pb.G>cb.G?pb.G:cb.G;K.H=pb.H>cb.H?pb.H:cb.H;K.I=pb.I>cb.I?pb.I:cb.I;var rc=K.F[0].N,ab=K.F[1].N;K.N=(rc>ab?rc:ab)+1;var gb=I.F[0],B=I.F[1];I.J=gb.J<B.J?gb.J:B.J;I.K=gb.K<B.K?gb.K:B.K;I.L=gb.L<B.L?gb.L:B.L;I.G=gb.G>B.G?gb.G:B.G;I.H=gb.H>B.H?gb.H:B.H;I.I=gb.I>B.I?gb.I:B.I;var Bb=I.F[0].N,Xd=I.F[1].N;I.N=(Bb>Xd?Bb:Xd)+1}null!=Ya?(Ya.F[fb]=K,K.Ea=Ya,K.La=fb):(Da.Ob=K,K.Ea=null);I=K}}var Tc=I.F[0].N,Eb=I.F[1].N;I.N=(Tc>Eb?Tc:Eb)+1;var Na=I.F[0],nb=I.F[1];I.J=Na.J<nb.J?Na.J:nb.J;I.K=Na.K<nb.K?Na.K:nb.K;I.L=Na.L<nb.L?Na.L:nb.L;I.G=Na.G>nb.G?Na.G:nb.G;I.H=Na.H>nb.H?Na.H:nb.H;I.I=Na.I>nb.I?Na.I:nb.I;I=I.Ea}}b&&this.fh(this.ge.Ob,f.Qd);f.Zg=!1}this.Ye[c]=null}b||this.fh(this.ge.Ob,this.ge.Ob);this.uf=0}},Sd:function(a,b,e){null!=this.ge.Ob&&this.rl(this.ge.Ob,a.x,a.y,a.z,b.x,b.y,b.z,e)},rf:function(a,b,e,d){null!=this.ge.Ob&&this.Vk(this.ge.Ob,a,b,e,d)},eh:function(a,b){null!=this.ge.Ob&&this.Qk(this.ge.Ob,a,b)},vn:function(){return this.ge.Pm()},qa:fc});fe.R=!0;fe.prototype={qa:fe};oj.R=!0;oj.Jb=qc;oj.prototype=sb(qc.prototype,{qa:oj});nj.R=!0;nj.prototype={Dl:function(a,b){switch(this.Gl){case 0:var e,d,c;e=b.J+b.G;d=b.K+b.H;c=b.L+b.I;var f=a.F[0],h=a.F[1],l,g;b=f.J+f.G;a=f.K+f.H;f=f.L+f.I;l=h.J+h.G;g=h.K+h.H;h=h.L+h.I;b-=e;a-=d;f-=c;l-=e;g-=d;h-=c;return b*b+a*a+f*f<l*l+g*g+h*h?0:1;case 1:f=a.F[0];e=a.F[1];d=a.H-a.K;c=a.I-a.L;var h=2*((a.G-a.J)*(d+c)+d*c),k,m;d=a.J<b.J?a.J:b.J;k=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;c=a.G>b.G?a.G:b.G;m=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;a=m-k;l=g-l;d=2*((c-d)*(a+l)+a*l);a=2*d;var n=2*(d-h),h=n;d=f.J<b.J?f.J:b.J;k=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;c=f.G>b.G?f.G:b.G;m=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.N?(f=m-k,l=g-l,h+=2*((c-d)*(f+l)+f*l)):(k=m-k,l=g-l,g=f.H-f.K,m=f.I-f.L,h+=2*((c-d)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m));f=n;d=e.J<b.J?e.J:b.J;k=e.K<b.K?e.K:b.K;l=e.L<b.L?e.L:b.L;c=e.G>b.G?e.G:b.G;m=e.H>b.H?e.H:b.H;g=e.I>b.I?e.I:b.I;0==e.N?(e=m-k,b=g-l,f+=2*((c-d)*(e+b)+e*b)):(b=m-k,l=g-l,g=e.H-e.K,n=e.I-e.L,f+=2*((c-d)*(b+l)+b*l)-2*((e.G-e.J)*(g+n)+g*n));return a<h?a<f?-1:1:h<f?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Gl),-1}},qa:nj};Fk.R=!0;Fk.prototype={Pm:function(){return this.Yk(this.Ob)},Yk:function(a){if(null==a||0==a.N)return 0;var b=a.F[0].N-a.F[1].N;0>b&&(b=-b);return b+this.Yk(a.F[0])+this.Yk(a.F[1])},qa:Fk};Ga.R=!0;Ga.prototype={za:function(a,b){this.ma=a.x;this.na=a.y;this.oa=a.z;this.ja=b.x;this.ka=b.y;this.la=b.z;return this},Hc:function(){var a=new t;a.x=this.ma;a.y=this.na;a.z=this.oa;return a},ad:function(a){a.x=this.ma;a.y=this.na;a.z=this.oa},Pd:function(a){this.ma=a.x;this.na=a.y;this.oa=a.z;return this},zc:function(){var a=new t;a.x=this.ja;a.y=this.ka;a.z=this.la;return a},Cc:function(a){a.x=this.ja;a.y=this.ka;a.z=this.la},cd:function(a){this.ja=a.x;this.ka=a.y;this.la=a.z;return this},sb:function(){var a=new t,b,e,d;b=this.ma+this.ja;e=this.na+this.ka;d=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},Kb:function(a){var b,e,d;b=this.ma+this.ja;e=this.na+this.ka;d=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*d},kc:function(){var a=new t,b,e,d;b=this.ja-this.ma;e=this.ka-this.na;d=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},lc:function(a){var b,e,d;b=this.ja-this.ma;e=this.ka-this.na;d=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*d},Pa:function(a){this.ma=this.ma<a.ma?this.ma:a.ma;this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.ja=this.ja>a.ja?this.ja:a.ja;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;return this},ab:function(a){var b=new Ga;b.ma=this.ma<a.ma?this.ma:a.ma;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.ja=this.ja>a.ja?this.ja:a.ja;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;return b},bd:function(a){return this.ma<a.ja&&this.ja>a.ma&&this.na<a.ka&&this.ka>a.na&&this.oa<a.la?this.la>a.oa:!1},qc:function(a){var b=new Ga;b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;return b},rc:function(a,b){b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la},Zd:function(a){this.ma=a.ma;this.na=a.na;this.oa=a.oa;this.ja=a.ja;this.ka=a.ka;this.la=a.la;return this},clone:function(){var a=new Ga;a.ma=this.ma;a.na=this.na;a.oa=this.oa;a.ja=this.ja;a.ka=this.ka;a.la=this.la;return a},qa:Ga};id.R=!0;id.Jb=mb;id.prototype=sb(mb.prototype,{gn:function(){var a=new t;a.x=this.Le;a.y=this.Me;a.z=this.Ne;return a},hn:function(a){a.x=this.Le;a.y=this.Me;a.z=this.Ne},Be:function(){this.nf=8*this.Le*this.Me*this.Ne;var a,b,e;a=this.Le*this.Le;b=this.Me*this.Me;e=this.Ne*this.Ne;this.cg=.3333333333333333*(b+e);this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(e+a);this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(a+b)},Lb:function(a,b){var e,d,c,f,h;f=b.o*this.mk+b.f*this.nk+b.h*this.pk;h=b.i*this.mk+b.m*this.nk+b.j*this.pk;e=b.l*this.mk+b.g*this.nk+b.s*this.pk;var l,g;l=b.o*this.qk+b.f*this.rk+b.h*this.sk;g=b.i*this.qk+b.m*this.rk+b.j*this.sk;d=b.l*this.qk+b.g*this.rk+b.s*this.sk;var k,m;k=b.o*this.tk+b.f*this.uk+b.h*this.vk;m=b.i*this.tk+b.m*this.uk+b.j*this.vk;c=b.l*this.tk+b.g*this.uk+b.s*this.vk;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>d?-d:d)+(0>c?-c:c);a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-e;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+e},Ld:function(a,b){var e,d,c;c=d=e=this.ec;e=e<this.Le?e:this.Le;d=d<this.Me?d:this.Me;c=c<this.Ne?c:this.Ne;e=this.Le-e;d=this.Me-d;c=this.Ne-c;b.x=0<a.x?e:-e;b.y=0<a.y?d:-d;b.z=0<a.z?c:-c},li:function(a,b,e,d,c,f,h){var l=this.Le,g=this.Me,k=this.Ne;d-=a;c-=b;f-=e;var m=0,n=0,q=0,p=1,r=1,v=1;if(-1E-6<d&&1E-6>d){if(a<=-l||a>=l)return!1}else{var aa=1/d,w=(-l-a)*aa,l=(l-a)*aa;w>l&&(aa=w,w=l,l=aa);0<w&&(m=w);1>l&&(p=l)}if(-1E-6<c&&1E-6>c){if(b<=-g||b>=g)return!1}else w=1/c,l=(-g-b)*w,g=(g-b)*w,l>g&&(w=l,l=g,g=w),0<l&&(n=l),1>g&&(r=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(q=g),1>k&&(v=k);if(1<=m||1<=n||1<=q||0>=p||0>=r||0>=v)return!1;k=m;m=0;n>k&&(k=n,m=1);q>k&&(k=q,m=2);r<p&&(p=r);v<p&&(p=v);if(k>p||!k)return!1;switch(m){case 0:h.normal.za(0<d?-1:1,0,0);break;case 1:h.normal.za(0,0<c?-1:1,0);break;case 2:h.normal.za(0,0,0<f?-1:1)}h.position.za(a+k*d,b+k*c,e+k*f);h.fraction=k;return!0},qa:id});hd.R=!0;hd.Jb=mb;hd.prototype=sb(mb.prototype,{Sh:function(){return this.$a},mj:function(){return this.Gb},Be:function(){var a=this.$a*this.$a,b=this.Gb*this.Gb,e=6.28318530717958*a*this.Gb,d=3.14159265358979*a*this.$a*4/3,c=(this.nf=e+d)?1/this.nf:0;this.cg=b=c*(e*(.25*a+b/3)+d*(.4*a+this.Gb*this.$a*.75+b));this.fg=this.eg=this.dg=0;this.gg=c*(e*a*.5+d*a*.4);this.jg=this.ig=this.hg=0;this.kg=b},Lb:function(a,b){var e,d,c;c=d=e=this.$a;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Gb;h=(0>h?-h:h)*this.Gb;l=(0>l?-l:l)*this.Gb;e+=f;d+=h;c+=l;a.ma=b.v-e;a.na=b.A-d;a.oa=b.B-c;a.ja=b.v+e;a.ka=b.A+d;a.la=b.B+c},Ld:function(a,b){0<a.y?b.za(0,this.Gb,0):b.za(0,-this.Gb,0)},li:function(a,b,e,d,c,f,h){var l=this.Gb,g=d-a,k=f-e,m,n=g*g+k*k,q=a*g+e*k;m=a*a+e*e-this.$a*this.$a;var p=q*q-n*m;if(0>p)return!1;if(0<n){if(p=Math.sqrt(p),m=(-q-p)/n,1<=m||0>=(-q+p)/n)return!1}else{if(0<=m)return!1;m=0}n=b+(c-b)*m;if(n>-l&&n<l)return 0<m?(f=m,q=h.normal.za(a+g*f,0,e+k*f),b=Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),0<b&&(b=1/b),c=q.y*b,d=q.z*b,q.x=q.x*b,q.y=c,q.z=d,h.position.za(a+f*g,n,e+f*k),h.fraction=f,!0):!1;var g=0>n?-l:l,r;r=a-0;l=b-g;k=e-0;a=d-a;b=c-b;e=f-e;n=a*a+b*b+e*e;q=r*a+l*b+k*e;m=r*r+l*l+k*k-this.$a*this.$a;p=q*q-n*m;if(0>p)return!1;f=(-q-Math.sqrt(p))/n;if(0>f||1<f)return!1;a=r+a*f;n=l+b*f;e=k+e*f;q=a*a+n*n+e*e;0<q&&(q=1/Math.sqrt(q));b=h.position;b.x=a+0;b.y=n+g;b.z=e+0;g=h.normal;g.x=a*q;g.y=n*q;g.z=e*q;h.fraction=f;return!0},qa:hd});bd.R=!0;bd.Jb=mb;bd.prototype=sb(mb.prototype,{Sh:function(){return this.$a},mj:function(){return this.Gb},Be:function(){var a=this.$a*this.$a,b=this.Gb*this.Gb*4;this.nf=3.14159265358979*a*this.Gb*2/3;this.cg=.05*(3*a+2*b);this.fg=this.eg=this.dg=0;this.gg=.3*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+2*b)},Lb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.$a;h*=this.$a;l*=this.$a;e*=this.Gb;d*=this.Gb;c*=this.Gb;var g,k,m,n,q,p;g=-e-f;k=-d-h;m=-c-l;n=-e+f;q=-d+h;p=-c+l;l=g>n?g:n;h=k>q?k:q;f=m>p?m:p;g=g<n?g:n;k=k<q?k:q;m=m<p?m:p;a.ma=b.v+(g<e?g:e);a.na=b.A+(k<d?k:d);a.oa=b.B+(m<c?m:c);a.ja=b.v+(l>e?l:e);a.ka=b.A+(h>d?h:d);a.la=b.B+(f>c?f:c)},Ld:function(a,b){var e=a.x,d=a.y,c=a.z;0<d&&d*d>this.ak*this.ak*(e*e+d*d+c*c)?(b.za(0,this.Gb-this.ec/this.ak,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,d=e*e+a*a,c=2*this.Gb,c=(c-this.ec)/c*this.$a-this.ec/this.Sj,0>c&&(c=0),d=0<d?c/Math.sqrt(d):0,c=this.Gb-this.ec,0>c&&(c=0),b.x=e*d,b.y=-c,b.z=a*d)},li:function(a,b,e,d,c,f,h){var l=this.Gb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,m=(l-b)*m;if(n>m)var q=n,n=m,m=q;0<n&&(g=n);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var q=this.Sj*this.Sj,m=q*(d*d+c*c+f*f)-c*c,n=q*(a*d+b*c+e*f)-b*c,q=q*(a*a+b*b+e*e)-b*b,p=n*n-m*q;if(m){if(0>p)return!1;p=Math.sqrt(p);if(0>m)if(0<c){if(q=0,n=(-n+p)/m,0>=n)return!1}else{if(q=(-n-p)/m,n=1,1<=q)return!1}else if(q=(-n-p)/m,n=(-n+p)/m,1<=q||0>=n)return!1}else if(m=-q/(2*n),0<n){if(q=0,n=m,0>=m)return!1}else if(q=m,n=1,1<=m)return!1;b+=l;if(n<=g||k<=q)return!1;if(q<g){l=g;if(!l)return!1;h.normal.za(0,0<c?-1:1,0)}else{l=q;if(!l)return!1;g=h.normal.za(a+d*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;k=this.Sj;n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;h.normal.y+=this.ak}h.position.za(a+l*d,b+l*c,e+l*f);h.fraction=l;return!0},qa:bd});pd.R=!0;pd.Jb=mb;pd.prototype=sb(mb.prototype,{zn:function(){return this.yb},Be:function(){this.cg=this.nf=1;this.fg=this.eg=this.dg=0;this.gg=1;this.jg=this.ig=this.hg=0;this.kg=1;for(var a=this.yb[0].x,b=this.yb[0].y,e=this.yb[0].z,d=this.yb[0].x,c=this.yb[0].y,f=this.yb[0].z,h=1,l=this.Ae;h<l;){var g=h++,k=this.yb[g].x,m=this.yb[g].y,g=this.yb[g].z;k<a?a=k:k>d&&(d=k);m<b?b=m:m>c&&(c=m);g<e?e=g:g>f&&(f=g)}h=d-a;l=c-b;k=f-e;this.nf=h*l*k;a=.25*((a+d)*(a+d)+(b+c)*(b+c)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.cg=.3333333333333333*(l+k)+a;this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(k+h)+a;this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(h+l)+a},Lb:function(a,b){var e,d,c,f,h,l,g,k,m;m=k=g=this.ec;var n,q,p;e=this.yb[0];n=e.x;q=e.y;p=e.z;d=b.o*n+b.f*q+b.h*p;e=b.i*n+b.m*q+b.j*p;c=b.l*n+b.g*q+b.s*p;n=d+b.v;q=e+b.A;p=c+b.B;e=n;d=q;c=p;f=n;h=q;l=p;for(var r=1,v=this.Ae;r<v;){n=r++;p=this.yb[n];n=p.x;q=p.y;p=p.z;var aa,w;aa=b.o*n+b.f*q+b.h*p;w=b.i*n+b.m*q+b.j*p;p=b.l*n+b.g*q+b.s*p;n=aa;q=w;n+=b.v;q+=b.A;p+=b.B;e=e<n?e:n;d=d<q?d:q;c=c<p?c:p;f=f>n?f:n;h=h>q?h:q;l=l>p?l:p}a.ma=e-g;a.na=d-k;a.oa=c-m;a.ja=f+g;a.ka=h+k;a.la=l+m},Ld:function(a,b){for(var e=this.yb[0],e=e.x*a.x+e.y*a.y+e.z*a.z,d=0,c=1,f=this.Ae;c<f;){var h=c++,l=this.yb[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,d=h)}a=this.yb[d];b.x=a.x;b.y=a.y;b.z=a.z},qa:pd});ad.R=!0;ad.Jb=mb;ad.prototype=sb(mb.prototype,{Sh:function(){return this.$a},mj:function(){return this.Gb},Be:function(){var a=this.$a*this.$a,b=this.Gb*this.Gb*4;this.nf=3.14159265358979*a*this.Gb*2;this.cg=.08333333333333333*(3*a+b);this.fg=this.eg=this.dg=0;this.gg=.5*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+b)},Lb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;e=0>e?-e:e;d=0>d?-d:d;c=0>c?-c:c;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.$a;h*=this.$a;l*=this.$a;e*=this.Gb;d*=this.Gb;c*=this.Gb;f+=e;h+=d;l+=c;a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-l;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+l},Ld:function(a,b){var e=a.x,d=a.z,c=e*e+d*d,f=this.$a-this.ec;0>f&&(f=0);c=0<c?f/Math.sqrt(c):0;f=this.Gb-this.ec;0>f&&(f=0);b.x=e*c;b.y=0<a.y?f:-f;b.z=d*c},li:function(a,b,e,d,c,f,h){var l=this.Gb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,l=(l-b)*m;n>l&&(m=n,n=l,l=m);0<n&&(g=n);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=d*d+f*f,n=a*d+e*f,m=a*a+e*e-this.$a*this.$a,q=n*n-l*m;if(0>q)return!1;if(0<l){if(q=Math.sqrt(q),m=(-n-q)/l,l=(-n+q)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.za(0,0<c?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.za(a+d*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);n=k.y*l;m=k.z*l;k.x=k.x*l;k.y=n;k.z=m}h.position.za(a+g*d,b+g*c,e+g*f);h.fraction=g;return!0},qa:ad});Bc.R=!0;Ed.R=!0;Ed.prototype={qa:Ed};yd.R=!0;yd.Jb=mb;yd.prototype=sb(mb.prototype,{Sh:function(){return this.$a},Be:function(){this.nf=4.188790204786386*this.$a*this.$a*this.$a;this.cg=.4*this.$a*this.$a;this.fg=this.eg=this.dg=0;this.gg=.4*this.$a*this.$a;this.jg=this.ig=this.hg=0;this.kg=.4*this.$a*this.$a},Lb:function(a,b){var e,d,c;c=d=e=this.$a;a.ma=b.v-e;a.na=b.A-d;a.oa=b.B-c;a.ja=b.v+e;a.ka=b.A+d;a.la=b.B+c},Ld:function(a,b){b.O()},li:function(a,b,e,d,c,f,h){var l;d-=a;c-=b;l=f-e;f=d*d+c*c+l*l;var g=a*d+b*c+e*l,k=g*g-f*(a*a+b*b+e*e-this.$a*this.$a);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=d*f;b+=c*f;e+=l*f;d=a*a+b*b+e*e;0<d&&(d=1/Math.sqrt(d));c=h.position;c.x=a;c.y=b;c.z=e;c=h.normal;c.x=a*d;c.y=b*d;c.z=e*d;h.fraction=f;return!0},qa:yd});Sd.R=!0;Sd.prototype={Pa:function(a,b){return this.Hb[a][b]},qa:Sd};nd.R=!0;nd.prototype={cm:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var d=b++;this.points[d].depth>a&&(a=this.points[d].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.O();e.position2.O();e.depth=0;e.id=0}this.normal.O()},qa:nd};mj.R=!0;mj.prototype={qa:mj};bk.R=!0;bk.prototype={Je:function(){null!=this.gi&&this.gi.clear()},qa:bk};gd.R=!0;gd.prototype={xi:function(a,b,e,d){var c=a.normal;c.x=b;c.y=e;c.z=d;this.qh&&(a=a.normal,b=-a.y,e=-a.z,a.x=-a.x,a.y=b,a.z=e)},ri:function(a,b,e,d,c,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.qh?(l=a.position1,l.x=c,l.y=f,l.z=h,c=a.position2,c.x=b,c.y=e,c.z=d):(l=a.position1,l.x=b,l.y=e,l.z=d,b=a.position2,b.x=c,b.y=f,b.z=h)},Rh:function(){},Yl:function(a,b,e,d,c,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.O();g.position2.O();g.depth=0;g.id=0}a.normal.O();this.qh?this.Rh(a,e,b,c,d,f):this.Rh(a,b,e,d,c,f)},qa:gd};Gd.R=!0;Gd.Jb=gd;Gd.prototype=sb(gd.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k,m;f=d.f;h=d.m;l=d.g;g=c.f;k=c.m;m=c.g;var n=b.Gb,q=e.Gb;b=b.$a;e=e.$a;var p,r,v,aa,w,A;p=d.v+f*-n;r=d.A+h*-n;v=d.B+l*-n;f=d.v+f*n;aa=d.A+h*n;w=d.B+l*n;h=c.v+g*-q;l=c.A+k*-q;d=c.B+m*-q;g=c.v+g*q;k=c.A+k*q;A=c.B+m*q;var u,D,t;u=p-h;D=r-l;t=v-d;f-=p;aa-=r;c=w-v;m=g-h;w=k-l;g=A-d;k=-(u*f+D*aa+t*c);u=u*m+D*w+t*g;D=n*n*4;t=f*m+aa*w+c*g;A=q*q*4;D||A?D?A?((q=D*A-t*t)?(n=t*u+A*k,n=0>n?0:n>q?1:n/q):n=0,q=n*t+u,0>q?(q=0,n=k,n=0>n?0:n>D?1:n/D):q>A?(q=1,n=t+k,n=0>n?0:n>D?1:n/D):q/=A):(q=0,n=k,n=0>n?0:n>D?1:n/D):(n=0,q=u,q=0>q?0:q>A?1:q/A):q=n=0;p+=f*n;r+=aa*n;v+=c*n;h+=m*q;l+=w*q;d+=g*q;aa=p-h;f=r-l;q=v-d;n=aa*aa+f*f+q*q;n>=(b+e)*(b+e)||(n=Math.sqrt(n),0<n?(aa*=1/n,f*=1/n,q*=1/n):(aa=1,q=f=0),this.xi(a,aa,f,q),this.ri(a,p+aa*-b,r+f*-b,v+q*-b,h+aa*e,l+f*e,d+q*e,b+e-n,0))},qa:Gd});ee.R=!0;ee.Jb=gd;ee.prototype=sb(gd.prototype,{Rh:function(a,b,e,d,c,f){var h=Rb.Pa;d=h.kj(b,e,d,c,F.enableGJKCaching?f:null,!0);a.incremental=!0;if(d!=lc.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+d);else if(!(h.distance>b.ec+e.ec)){var l,g,k;f=h.closestPoint1;d=f.x;c=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,n,q;m=d-l;n=c-g;q=f-k;if(m*m+n*n+q*q){0>h.distance&&(m=-m,n=-n,q=-q);var p=m*m+n*n+q*q;0<p&&(p=1/Math.sqrt(p));m*=p;n*=p;q*=p;this.xi(a,m,n,q);d+=m*-b.ec;c+=n*-b.ec;f+=q*-b.ec;l+=m*e.ec;g+=n*e.ec;k+=q*e.ec;this.ri(a,d,c,f,l,g,k,b.ec+e.ec-h.distance,0)}}},qa:ee});xd.R=!0;xd.Jb=gd;xd.prototype=sb(gd.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k;f=e.Le;h=e.Me;e=e.Ne;l=-f;g=-h;k=-e;b=b.$a;var m,n,q;m=d.v-c.v;n=d.A-c.A;q=d.B-c.B;var p,r;p=c.o*m+c.i*n+c.l*q;r=c.f*m+c.m*n+c.g*q;m=c.h*m+c.j*n+c.s*q;if(l<p&&f>p&&g<r&&h>r&&k<m&&e>m){var v;n=f-(0>p?-p:p);v=h-(0>r?-r:r);var aa=e-(0>m?-m:m),w,A;n<v?n<aa?(l=0<p?1:-1,w=k=g=0,q=A=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),A=w=1,q=0,n=aa):v<aa?(0<r?(l=0,g=1):(l=0,g=-1),k=0,w=1,A=0,q=1,n=v):(0<m?(g=l=0,k=1):(g=l=0,k=-1),A=w=1,q=0,n=aa);p=l*f+w*p;h=g*h+A*r;m=k*e+q*m;e=c.o*p+c.f*h+c.h*m;r=c.i*p+c.m*h+c.j*m;h=c.l*p+c.g*h+c.s*m;m=c.o*l+c.f*g+c.h*k;p=c.i*l+c.m*g+c.j*k;f=c.l*l+c.g*g+c.s*k;this.xi(a,m,p,f);this.ri(a,d.v+m*-b,d.A+p*-b,d.B+f*-b,c.v+e,c.A+r,c.B+h,n,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=p<f?p:f,n=r<h?r:h,q=m<e?m:e,f=f>l?f:l,n=n>g?n:g,q=q>k?q:k,p-=f,l=r-n,g=m-q,e=p*p+l*l+g*g,e>=b*b||(e=Math.sqrt(e),r=c.o*f+c.f*n+c.h*q,h=c.i*f+c.m*n+c.j*q,m=c.l*f+c.g*n+c.s*q,k=c.o*p+c.f*l+c.h*g,f=c.i*p+c.m*l+c.j*g,p=c.l*p+c.g*l+c.s*g,g=k*k+f*f+p*p,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,p*=g,this.xi(a,l,f,p),this.ri(a,d.v+l*-b,d.A+f*-b,d.B+p*-b,c.v+r,c.A+h,c.B+m,b-e,0))},qa:xd});Nd.R=!0;Nd.Jb=gd;Nd.prototype=sb(gd.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f=e.Gb;b=b.$a;e=e.$a;var h,l,g;h=c.f;l=c.m;g=c.g;var k,m;k=d.v;m=d.A;d=d.B;var n,q,p,r;n=c.v+h*-f;q=c.A+l*-f;p=c.B+g*-f;h=c.v+h*f;l=c.A+l*f;r=c.B+g*f;c=h-n;g=l-q;l=r-p;f=f*f*4;h=(k-n)*c+(m-q)*g+(d-p)*l;h=0>h?0:h>f?1:h/f;f=n+c*h;q+=g*h;p+=l*h;l=k-f;g=m-q;n=d-p;c=l*l+g*g+n*n;c>=(b+e)*(b+e)||(c=Math.sqrt(c),0<c?(l*=1/c,g*=1/c,n*=1/c):(l=1,n=g=0),this.xi(a,l,g,n),this.ri(a,k+l*-b,m+g*-b,d+n*-b,f+l*e,q+g*e,p+n*e,b+e-c,0))},qa:Nd});Te.R=!0;Te.Jb=gd;Te.prototype=sb(gd.prototype,{Rh:function(a,b,e,d,c){a.incremental=!1;var f,h,l;f=d.v-c.v;h=d.A-c.A;l=d.B-c.B;b=b.$a;e=e.$a;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.xi(a,f,h,l),this.ri(a,d.v+f*-b,d.A+h*-b,d.B+l*-b,c.v+f*e,c.A+h*e,c.B+l*e,b+e-g,0))},qa:Te});lj.R=!0;lj.prototype={Sn:function(){for(var a=this.Vc;null!=a;){for(var b=a.M,e=0;3>e;){var d=e++;a.yb[d].dj=null;a.yb[d].pi=null;if(-1==a.Ie[d])return this.Bc=2,!1;if(null==a.we[d])return this.Bc=3,!1}a=b}return!0},am:function(a,b,e){if(b.Jk!=a){b.Jk=a;var d=b.ai;d.x=e.x;d.y=e.y;d.z=e.z;var c=b.yb[0].ud,f=d.y-c.y,h=d.z-c.z;d.x=d.x-c.x;d.y=f;d.z=h;d=b.ai;c=b.Lj;b.cj=0<d.x*c.x+d.y*c.y+d.z*c.z;if(b.cj){for(d=0;3>d;)if(c=d++,f=b.we[c],null!=f){h=f.ai;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.yb[0].ud,g=h.y-l.y,k=h.z-l.z;h.x=h.x-l.x;h.y=g;h.z=k;h=f.ai;l=f.Lj;f.cj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.cj?this.am(a,f,e):(h=b.yb[c],h.pi=b.yb[b.ii[c]],h.dj=f)}for(a=0;3>a;)e=a++,d=b.we[e],null!=d&&(c=b.Ie[e],d.we[c]=null,d.Ie[c]=-1,b.we[e]=null,b.Ie[e]=-1);this.ah--;a=b.ia;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ia=a);b==this.Vc&&(this.Vc=this.Vc.M);b==this.Fc&&(this.Fc=this.Fc.ia);b.M=null;b.ia=null;b.$j();b.M=this.ve;this.ve=b}else this.Bc=6}},Vg:function(a,b,e,d){this.Bc=0;this.Ae=4;this.yb[0]=a;this.yb[1]=b;this.yb[2]=e;this.yb[3]=d;var c=this.ei,f=a.ud;c.x=f.x;c.y=f.y;c.z=f.z;var f=b.ud,h=c.y+f.y,l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=e.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=d.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=.25*c.y;h=.25*c.z;c.x=.25*c.x;c.y=f;c.z=h;c=this.ve;null!=c?(this.ve=c.M,c.M=null):c=new od;f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new od;h=this.ve;null!=h?(this.ve=h.M,h.M=null):h=new od;l=this.ve;null!=l?(this.ve=l.M,l.M=null):l=new od;c.za(a,b,e,this.ei,!0)||(this.Bc=1);f.za(a,b,d,this.ei,!0)||(this.Bc=1);h.za(a,e,d,this.ei,!0)||(this.Bc=1);l.za(b,e,d,this.ei,!0)||(this.Bc=1);c.Ig(f)||(this.Bc=1);c.Ig(h)||(this.Bc=1);c.Ig(l)||(this.Bc=1);f.Ig(h)||(this.Bc=1);f.Ig(l)||(this.Bc=1);h.Ig(l)||(this.Bc=1);this.ah++;null==this.Vc?this.Vc=c:(this.Fc.M=c,c.ia=this.Fc);this.Fc=c;this.ah++;null==this.Vc?this.Vc=f:(this.Fc.M=f,f.ia=this.Fc);this.Fc=f;this.ah++;null==this.Vc?this.Vc=h:(this.Fc.M=h,h.ia=this.Fc);this.Fc=h;this.ah++;null==this.Vc?this.Vc=l:(this.Fc.M=l,l.ia=this.Fc);this.Fc=l;return!this.Bc},Hm:function(a,b){this.yb[this.Ae++]=a;var e=b.yb[0];this.am(this.Ae,b,a.ud);if(0!=this.Bc)return!1;b=e;for(var d=null,c=null;;){if(null==b.pi)return this.Bc=4,!1;if(null==b.dj)return this.Bc=5,!1;var f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new od;null==c&&(c=f);f.za(b,b.pi,a,this.ei,!1)||(this.Bc=1);if(0!=this.Bc)return!1;this.ah++;null==this.Vc?this.Vc=f:(this.Fc.M=f,f.ia=this.Fc);this.Fc=f;f.Ig(b.dj)||(this.Bc=1);null==d||f.Ig(d)||(this.Bc=1);d=f;b=b.pi;if(b==e)break}d.Ig(c)||(this.Bc=1);return 0==this.Bc?this.Sn():!1},qa:lj};od.R=!0;od.prototype={za:function(a,b,e,d,c){null==c&&(c=!1);var f,h,l,g,k,m,n,q,p,r,v,aa,w=a.ud;f=w.x;h=w.y;l=w.z;var A=b.ud;g=A.x;k=A.y;m=A.z;var u=e.ud;n=u.x;q=u.y;p=u.z;r=d.x;v=d.y;aa=d.z;var D,t,z,E,x,yb,N,G,al;D=g-f;t=k-h;z=m-l;E=n-f;x=q-h;yb=p-l;N=f-r;G=h-v;al=l-aa;var F,C,ga;F=t*yb-z*x;C=z*E-D*yb;ga=D*x-t*E;var O=!1;if(0>N*F+G*C+al*ga)if(c){var Vb=b;b=e;e=Vb;F*=-1;C*=-1;ga*=-1}else O=!0;this.yb[0]=a;this.yb[1]=b;this.yb[2]=e;var L=this.Lj;L.x=F;L.y=C;L.z=ga;var ka=a.ud,Oa=b.ud,U=e.ud,R=this.ai,M,Ma,Ra,vc,Pa,Aa,zb,J,Qa,ba,Q,P,wa,ta,W,oa,y,Ha;M=ka.x;Ma=ka.y;Ra=ka.z;vc=Oa.x;Pa=Oa.y;Aa=Oa.z;zb=U.x;J=U.y;Qa=U.z;ba=vc-M;Q=Pa-Ma;P=Aa-Ra;wa=zb-vc;ta=J-Pa;W=Qa-Aa;oa=M-zb;y=Ma-J;Ha=Ra-Qa;var ca,Ca,xa;ca=Q*W-P*ta;Ca=P*wa-ba*W;xa=ba*ta-Q*wa;var Da=M*(Q*xa-P*Ca)+Ma*(P*ca-ba*xa)+Ra*(ba*Ca-Q*ca),Sa=vc*(ta*xa-W*Ca)+Pa*(W*ca-wa*xa)+Aa*(wa*Ca-ta*ca),la=zb*(y*xa-Ha*Ca)+J*(Ha*ca-oa*xa)+Qa*(oa*Ca-y*ca),Z=-1,Ea,qa,va;va=qa=Ea=0;if(0>Da){var I,Ka,Xa,S,Ya,T;I=ka.x;Ka=ka.y;Xa=ka.z;S=Oa.x;Ya=Oa.y;T=Oa.z;var K,ia,fb;K=S-I;ia=Ya-Ka;fb=T-Xa;var da=K*I+ia*Ka+fb*Xa,da=-da/(K*K+ia*ia+fb*fb);if(0>da)R.x=I,R.y=Ka,R.z=Xa;else if(1<da)R.x=S,R.y=Ya,R.z=T;else{var Ic,sa,eb;Ic=I+K*da;sa=Ka+ia*da;eb=Xa+fb*da;R.x=Ic;R.y=sa;R.z=eb}Z=R.x*R.x+R.y*R.y+R.z*R.z;Ea=R.x;qa=R.y;va=R.z}if(0>Sa){var jb,Za,ma,na,Ia,Fa;jb=Oa.x;Za=Oa.y;ma=Oa.z;na=U.x;Ia=U.y;Fa=U.z;var ob,fa,ea;ob=na-jb;fa=Ia-Za;ea=Fa-ma;var ja=ob*jb+fa*Za+ea*ma,ja=-ja/(ob*ob+fa*fa+ea*ea);if(0>ja)R.x=jb,R.y=Za,R.z=ma;else if(1<ja)R.x=na,R.y=Ia,R.z=Fa;else{var bb,ya,tb;bb=jb+ob*ja;ya=Za+fa*ja;tb=ma+ea*ja;R.x=bb;R.y=ya;R.z=tb}var Ua=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||Ua<Z)Z=Ua,Ea=R.x,qa=R.y,va=R.z}if(0>la){var qb,rb,ub,Va,Db,mc;qb=ka.x;rb=ka.y;ub=ka.z;Va=U.x;Db=U.y;mc=U.z;var $a,ua,Gb;$a=Va-qb;ua=Db-rb;Gb=mc-ub;var H=$a*qb+ua*rb+Gb*ub,H=-H/($a*$a+ua*ua+Gb*Gb);if(0>H)R.x=qb,R.y=rb,R.z=ub;else if(1<H)R.x=Va,R.y=Db,R.z=mc;else{var pb,cb,rc;pb=qb+$a*H;cb=rb+ua*H;rc=ub+Gb*H;R.x=pb;R.y=cb;R.z=rc}var ab=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||ab<Z)Z=ab,Ea=R.x,qa=R.y,va=R.z}if(0<Z)R.x=Ea,R.y=qa,R.z=va;else{var gb=ca*ca+Ca*Ca+xa*xa;0<gb&&(gb=1/Math.sqrt(gb));ca*=gb;Ca*=gb;xa*=gb;var B=ca*ca+Ca*Ca+xa*xa,B=(M*ca+Ma*Ca+Ra*xa)/B;Ea=ca*B;qa=Ca*B;va=xa*B;R.x=Ea;R.y=qa;R.z=va}var Bb=this.ai;this.Ej=Bb.x*Bb.x+Bb.y*Bb.y+Bb.z*Bb.z;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=-1;this.Ie[1]=-1;this.Ie[2]=-1;return!O},Ig:function(a){for(var b=0,e=0;3>e;)for(var d=e++,c=0;3>c;){var f=c++,h=this.ii[d];this.yb[d]==a.yb[this.ii[f]]&&this.yb[h]==a.yb[f]&&(this.we[d]=a,this.Ie[d]=f,a.we[f]=this,a.Ie[f]=d,++b)}return 1!=b?!1:!0},$j:function(){this.ia=this.M=null;this.Jk=0;this.cj=!1;this.Ej=0;this.yb[0]=null;this.yb[1]=null;this.yb[2]=null;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=0;this.Ie[1]=0;this.Ie[2]=0},qa:od};Yc.R=!0;Yc.prototype={za:function(a,b,e){var d=this.ud;d.x=a.x;d.y=a.y;d.z=a.z;a=this.cb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.lb;b.x=e.x;b.y=e.y;b.z=e.z;this.dj=this.pi=this.M=null;return this},$j:function(){this.dj=this.pi=this.M=null},qa:Yc};Ek.R=!0;Ek.prototype={clear:function(){this.ql.O()},qa:Ek};t.R=!0;t.prototype={za:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},O:function(){this.z=this.y=this.x=0;return this},bd:function(a){return new t(this.x+a.x,this.y+a.y,this.z+a.z)},Pa:function(a,b){return new t(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},me:function(a){return new t(this.x-a.x,this.y-a.y,this.z-a.z)},ee:function(a){return new t(this.x*a,this.y*a,this.z*a)},He:function(a,b,e){return new t(this.x*a,this.y*b,this.z*e)},Pd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},sb:function(a){return new t(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},cd:function(a){var b=this.y+a.y,e=this.z+a.z;this.x+=a.x;this.y=b;this.z=e;return this},ab:function(a,b){var e=this.y+a.y*b,d=this.z+a.z*b;this.x+=a.x*b;this.y=e;this.z=d;return this},Ge:function(a){var b=this.y-a.y,e=this.z-a.z;this.x=this.x-a.x;this.y=b;this.z=e;return this},fe:function(a){var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Bf:function(a,b,e){b=this.y*b;e=this.z*e;this.x=this.x*a;this.y=b;this.z=e;return this},Kb:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},kc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},qc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},zc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;a=new t;a.x=b;a.y=e;a.z=d;return a},lc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},rc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Cc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;this.x=b;this.y=e;this.z=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},be:function(){return this.x*this.x+this.y*this.y+this.z*this.z},de:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new t(this.x*a,this.y*a,this.z*a)},ce:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Hc:function(){return new t(-this.x,-this.y,-this.z)},ad:function(){var a=-this.y,b=-this.z;this.x=-this.x;this.y=a;this.z=b;return this},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new t(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"},qa:t};za.R=!0;za.prototype={Mf:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},sb:function(){var a=new t;a.x=this.v;a.y=this.A;a.z=this.B;return a},Kb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},zc:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Hc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},kc:function(){var a=new O;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},lc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Cc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},qc:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+d*this.l;m=b*this.f+e*this.m+d*this.g;b=b*this.h+e*this.j+d*this.s;e=c*this.o+f*this.i+h*this.l;d=c*this.f+f*this.m+h*this.g;c=c*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=d;this.j=c;this.l=f;this.g=h;this.s=l},Pa:function(){var a=new ha,b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},ab:function(a){var b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},rc:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.o=1-g-d;this.f=k-c;this.h=b+h;this.i=k+c;this.m=1-a-d;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new za;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},Zd:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this},qa:za};F.R=!0;Rb.R=!0;Rb.ad=function(){return Rb.Pa};Rb.prototype={kj:function(a,b,e,d,c,f){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var h=this.Oa,l=this.cb,g=this.lb,k=this.closest,m=this.dir;null!=c?(null==c.gi&&(c.gi=new Ek),this.Bn(c.gi)):m.O();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var n,q,p;n=d.v-e.v;q=d.A-e.A;p=d.B-e.B;m.x=n;m.y=q;m.z=p;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.za(1,0,0)}this.ya=0;this.pf(!1);this.qf(!1);var r=this.Oa[this.ya],v=this.cb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.lb[this.ya],w=r.y-aa.y,A=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=A;this.ya=1;for(var u=0;40>u;){var D=0;switch(this.ya){case 1:var t=h[0];k.x=t.x;k.y=t.y;k.z=t.z;D=1;break;case 2:var z,E,x,yb,N,G,F=h[0];z=F.x;E=F.y;x=F.z;var C=h[1];yb=C.x;N=C.y;G=C.z;var O,ga,L;O=yb-z;ga=N-E;L=G-x;var Vb=O*z+ga*E+L*x,Vb=-Vb/(O*O+ga*ga+L*L);if(0>Vb){var M=k;M.x=z;M.y=E;M.z=x;D=1}else if(1<Vb){var ka=k;ka.x=yb;ka.y=N;ka.z=G;D=2}else{var Oa,U,R;Oa=z+O*Vb;U=E+ga*Vb;R=x+L*Vb;var Wb=k;Wb.x=Oa;Wb.y=U;Wb.z=R;D=3}break;case 3:var Ma=h[0],Ra=h[1],vc=h[2],Pa,Aa,zb,J,Qa,ba,Q,P,wa,ta,W,oa,y,Ha,ca,Ca,xa,Da,Sa=Ma;Pa=Sa.x;Aa=Sa.y;zb=Sa.z;var la=Ra;J=la.x;Qa=la.y;ba=la.z;var Z=vc;Q=Z.x;P=Z.y;wa=Z.z;ta=J-Pa;W=Qa-Aa;oa=ba-zb;y=Q-J;Ha=P-Qa;ca=wa-ba;Ca=Pa-Q;xa=Aa-P;Da=zb-wa;var Ea,qa,va;Ea=W*ca-oa*Ha;qa=oa*y-ta*ca;va=ta*Ha-W*y;var I=Pa*(W*va-oa*qa)+Aa*(oa*Ea-ta*va)+zb*(ta*qa-W*Ea),Ka=J*(Ha*va-ca*qa)+Qa*(ca*Ea-y*va)+ba*(y*qa-Ha*Ea),Xa=Q*(xa*va-Da*qa)+P*(Da*Ea-Ca*va)+wa*(Ca*qa-xa*Ea),S=-1,Ya,T,K,ia=0;K=T=Ya=0;if(0>I){var fb,da,Ic,sa,eb,jb,Za=Ma;fb=Za.x;da=Za.y;Ic=Za.z;var ma=Ra;sa=ma.x;eb=ma.y;jb=ma.z;var na,Ia,Fa;na=sa-fb;Ia=eb-da;Fa=jb-Ic;var ob=na*fb+Ia*da+Fa*Ic,ob=-ob/(na*na+Ia*Ia+Fa*Fa),fa;if(0>ob){var ea=k;ea.x=fb;ea.y=da;ea.z=Ic;fa=1}else if(1<ob){var ja=k;ja.x=sa;ja.y=eb;ja.z=jb;fa=2}else{var bb,ya,tb;bb=fb+na*ob;ya=da+Ia*ob;tb=Ic+Fa*ob;var Ua=k;Ua.x=bb;Ua.y=ya;Ua.z=tb;fa=3}var qb=k.x*k.x+k.y*k.y+k.z*k.z,ia=fa,S=qb,rb=k;Ya=rb.x;T=rb.y;K=rb.z}if(0>Ka){var ub,Va,Db,mc,$a,ua,Gb=Ra;ub=Gb.x;Va=Gb.y;Db=Gb.z;var H=vc;mc=H.x;$a=H.y;ua=H.z;var pb,cb,rc;pb=mc-ub;cb=$a-Va;rc=ua-Db;var ab=pb*ub+cb*Va+rc*Db,ab=-ab/(pb*pb+cb*cb+rc*rc),gb;if(0>ab){var B=k;B.x=ub;B.y=Va;B.z=Db;gb=1}else if(1<ab){var Bb=k;Bb.x=mc;Bb.y=$a;Bb.z=ua;gb=2}else{var Xd,Tc,Eb;Xd=ub+pb*ab;Tc=Va+cb*ab;Eb=Db+rc*ab;var Na=k;Na.x=Xd;Na.y=Tc;Na.z=Eb;gb=3}var nb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||nb<S){var ia=gb<<1,S=nb,wb=k;Ya=wb.x;T=wb.y;K=wb.z}}if(0>Xa){var xb,db,Y,La,kb,Ta,hb=Ma;xb=hb.x;db=hb.y;Y=hb.z;var Ja=vc;La=Ja.x;kb=Ja.y;Ta=Ja.z;var Ib,bl,X;Ib=La-xb;bl=kb-db;X=Ta-Y;var Ab=Ib*xb+bl*db+X*Y,Ab=-Ab/(Ib*Ib+bl*bl+X*X),Dc;if(0>Ab){var Pc=k;Pc.x=xb;Pc.y=db;Pc.z=Y;Dc=1}else if(1<Ab){var uh=k;uh.x=La;uh.y=kb;uh.z=Ta;Dc=2}else{var gc,Nc,ha;gc=xb+Ib*Ab;Nc=db+bl*Ab;ha=Y+X*Ab;var sl=k;sl.x=gc;sl.y=Nc;sl.z=ha;Dc=3}var yc=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||yc<S){var ia=Dc&1|(Dc&2)<<1,S=yc,ra=k;Ya=ra.x;T=ra.y;K=ra.z}}if(0<S){var jc=k;jc.x=Ya;jc.y=T;jc.z=K;D=ia}else{var uc=Ea*Ea+qa*qa+va*va;0<uc&&(uc=1/Math.sqrt(uc));Ea*=uc;qa*=uc;va*=uc;var kc=Ea*Ea+qa*qa+va*va,kc=(Pa*Ea+Aa*qa+zb*va)/kc;Ya=Ea*kc;T=qa*kc;K=va*kc;var ac=k;ac.x=Ya;ac.y=T;ac.z=K;D=7}break;case 4:var Xb=h[0],Yb=h[1],Sb=h[2],hc=h[3],Tb,Pb,Zb,ic,Jb,$b,lb,Ba,pa,Ga,sc,nc,jd,rd,za,tc,wc,mb,Uf,sb,Zc,Gc,Lb,Ue,vb,Id,Og,tl=Xb;Tb=tl.x;Pb=tl.y;Zb=tl.z;var Wa=Yb;ic=Wa.x;Jb=Wa.y;$b=Wa.z;var ib=Sb;lb=ib.x;Ba=ib.y;pa=ib.z;var Ac=hc;Ga=Ac.x;sc=Ac.y;nc=Ac.z;jd=ic-Tb;rd=Jb-Pb;za=$b-Zb;tc=lb-Tb;wc=Ba-Pb;mb=pa-Zb;Uf=Ga-Tb;sb=sc-Pb;Zc=nc-Zb;Gc=lb-ic;Lb=Ba-Jb;Ue=pa-$b;vb=Ga-ic;Id=sc-Jb;Og=nc-$b;var Hb,Kb,Gk,Qb,Qc,Il,Nb,ec,bc,Fb,fc,Rb;Hb=rd*mb-za*wc;Kb=za*tc-jd*mb;Gk=jd*wc-rd*tc;Qb=wc*Zc-mb*sb;Qc=mb*Uf-tc*Zc;Il=tc*sb-wc*Uf;Nb=sb*za-Zc*rd;ec=Zc*jd-Uf*za;bc=Uf*rd-sb*jd;Fb=Id*Ue-Og*Lb;fc=Og*Gc-vb*Ue;Rb=vb*Lb-Id*Gc;var dc=0<jd*Fb+rd*fc+za*Rb?1:-1,Ec=Tb*Hb+Pb*Kb+Zb*Gk,Fc=Tb*Qb+Pb*Qc+Zb*Il,cc=Tb*Nb+Pb*ec+Zb*bc,zc=ic*Fb+Jb*fc+$b*Rb,tg=-1,Ub,Mb,pj,Cb=0;pj=Mb=Ub=0;if(0>Ec*dc){var sd,Uc,Vf,pc,lc,Jc,Df,hl,vh,cl,oc,td,Pg,Qg,ug,wh,Jd,ul,xh=Xb;sd=xh.x;Uc=xh.y;Vf=xh.z;var gd=Yb;pc=gd.x;lc=gd.y;Jc=gd.z;var ck=Sb;Df=ck.x;hl=ck.y;vh=ck.z;cl=pc-sd;oc=lc-Uc;td=Jc-Vf;Pg=Df-pc;Qg=hl-lc;ug=vh-Jc;wh=sd-Df;Jd=Uc-hl;ul=Vf-vh;var Lc,kd,ld;Lc=oc*ug-td*Qg;kd=td*Pg-cl*ug;ld=cl*Qg-oc*Pg;var Oc=sd*(oc*ld-td*kd)+Uc*(td*Lc-cl*ld)+Vf*(cl*kd-oc*Lc),Rl=pc*(Qg*ld-ug*kd)+lc*(ug*Lc-Pg*ld)+Jc*(Pg*kd-Qg*Lc),Vc=Df*(Jd*ld-ul*kd)+hl*(ul*Lc-wh*ld)+vh*(wh*kd-Jd*Lc),Wc=-1,$c,ud,cd,Sc=0;cd=ud=$c=0;if(0>Oc){var Ee,Ve,We,Kd,qj,ve,we=Xb;Ee=we.x;Ve=we.y;We=we.z;var Cc=Yb;Kd=Cc.x;qj=Cc.y;ve=Cc.z;var dl,el,fl;dl=Kd-Ee;el=qj-Ve;fl=ve-We;var vg=dl*Ee+el*Ve+fl*We,vg=-vg/(dl*dl+el*el+fl*fl),Bc;if(0>vg){var qc=k;qc.x=Ee;qc.y=Ve;qc.z=We;Bc=1}else if(1<vg){var yh=k;yh.x=Kd;yh.y=qj;yh.z=ve;Bc=2}else{var Ob,Fe,dk;Ob=Ee+dl*vg;Fe=Ve+el*vg;dk=We+fl*vg;var Hc=k;Hc.x=Ob;Hc.y=Fe;Hc.z=dk;Bc=3}var md=k.x*k.x+k.y*k.y+k.z*k.z,Sc=Bc,Wc=md,Xc=k;$c=Xc.x;ud=Xc.y;cd=Xc.z}if(0>Rl){var Kc,xc,Xe,fd,ek,zh,Ah=Yb;Kc=Ah.x;xc=Ah.y;Xe=Ah.z;var Bh=Sb;fd=Bh.x;ek=Bh.y;zh=Bh.z;var Ye,Ze,$e;Ye=fd-Kc;Ze=ek-xc;$e=zh-Xe;var $d=Ye*Kc+Ze*xc+$e*Xe,$d=-$d/(Ye*Ye+Ze*Ze+$e*$e),rj;if(0>$d){var vl=k;vl.x=Kc;vl.y=xc;vl.z=Xe;rj=1}else if(1<$d){var wl=k;wl.x=fd;wl.y=ek;wl.z=zh;rj=2}else{var ad,Ef,Ff;ad=Kc+Ye*$d;Ef=xc+Ze*$d;Ff=Xe+$e*$d;var Gf=k;Gf.x=ad;Gf.y=Ef;Gf.z=Ff;rj=3}var Jl=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||Jl<Wc){var Sc=rj<<1,Wc=Jl,bd=k;$c=bd.x;ud=bd.y;cd=bd.z}}if(0>Vc){var Wf,Xf,af,Yf,Hf,xe,bf=Xb;Wf=bf.x;Xf=bf.y;af=bf.z;var Zf=Sb;Yf=Zf.x;Hf=Zf.y;xe=Zf.z;var $f,ag,bg;$f=Yf-Wf;ag=Hf-Xf;bg=xe-af;var Ge=$f*Wf+ag*Xf+bg*af,Ge=-Ge/($f*$f+ag*ag+bg*bg),He;if(0>Ge){var cf=k;cf.x=Wf;cf.y=Xf;cf.z=af;He=1}else if(1<Ge){var cg=k;cg.x=Yf;cg.y=Hf;cg.z=xe;He=2}else{var qf,Ie,rf;qf=Wf+$f*Ge;Ie=Xf+ag*Ge;rf=af+bg*Ge;var dg=k;dg.x=qf;dg.y=Ie;dg.z=rf;He=3}var hd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||hd<Wc){var Sc=He&1|(He&2)<<1,Wc=hd,id=k;$c=id.x;ud=id.y;cd=id.z}}var xl;if(0<Wc){var yl=k;yl.x=$c;yl.y=ud;yl.z=cd;xl=Sc}else{var df=Lc*Lc+kd*kd+ld*ld;0<df&&(df=1/Math.sqrt(df));Lc*=df;kd*=df;ld*=df;var sf=Lc*Lc+kd*kd+ld*ld,sf=(sd*Lc+Uc*kd+Vf*ld)/sf;$c=Lc*sf;ud=kd*sf;cd=ld*sf;var If=k;If.x=$c;If.y=ud;If.z=cd;xl=7}var Sl=k.x*k.x+k.y*k.y+k.z*k.z,Cb=xl,tg=Sl,Jf=k;Ub=Jf.x;Mb=Jf.y;pj=Jf.z}if(0>Fc*dc){var ge,ye,Kf,Rc,eg,zd,Ad,Bd,il,fg,gg,ae,he,ie,be,tf,ef,ff,gf=Xb;ge=gf.x;ye=gf.y;Kf=gf.z;var Lf=Sb;Rc=Lf.x;eg=Lf.y;zd=Lf.z;var zl=hc;Ad=zl.x;Bd=zl.y;il=zl.z;fg=Rc-ge;gg=eg-ye;ae=zd-Kf;he=Ad-Rc;ie=Bd-eg;be=il-zd;tf=ge-Ad;ef=ye-Bd;ff=Kf-il;var Td,Ld,Md;Td=gg*be-ae*ie;Ld=ae*he-fg*be;Md=fg*ie-gg*he;var Tl=ge*(gg*Md-ae*Ld)+ye*(ae*Td-fg*Md)+Kf*(fg*Ld-gg*Td),Mf=Rc*(ie*Md-be*Ld)+eg*(be*Td-he*Md)+zd*(he*Ld-ie*Td),Yd=Ad*(ef*Md-ff*Ld)+Bd*(ff*Td-tf*Md)+il*(tf*Ld-ef*Td),vd=-1,Cd,hg,Ch,ig=0;Ch=hg=Cd=0;if(0>Tl){var Zd,ce,ze,hf,jg,jf,kf=Xb;Zd=kf.x;ce=kf.y;ze=kf.z;var lf=Sb;hf=lf.x;jg=lf.y;jf=lf.z;var Ae,uf,kg;Ae=hf-Zd;uf=jg-ce;kg=jf-ze;var vf=Ae*Zd+uf*ce+kg*ze,vf=-vf/(Ae*Ae+uf*uf+kg*kg),wg;if(0>vf){var lg=k;lg.x=Zd;lg.y=ce;lg.z=ze;wg=1}else if(1<vf){var mf=k;mf.x=hf;mf.y=jg;mf.z=jf;wg=2}else{var wf,Je,xg;wf=Zd+Ae*vf;Je=ce+uf*vf;xg=ze+kg*vf;var yg=k;yg.x=wf;yg.y=Je;yg.z=xg;wg=3}var od=k.x*k.x+k.y*k.y+k.z*k.z,ig=wg,vd=od,mg=k;Cd=mg.x;hg=mg.y;Ch=mg.z}if(0>Mf){var xf,yf,Be,zg,Al,ng,og=Sb;xf=og.x;yf=og.y;Be=og.z;var pg=hc;zg=pg.x;Al=pg.y;ng=pg.z;var Nf,Ke,nf;Nf=zg-xf;Ke=Al-yf;nf=ng-Be;var zf=Nf*xf+Ke*yf+nf*Be,zf=-zf/(Nf*Nf+Ke*Ke+nf*nf),dd;if(0>zf){var wd=k;wd.x=xf;wd.y=yf;wd.z=Be;dd=1}else if(1<zf){var Fd=k;Fd.x=zg;Fd.y=Al;Fd.z=ng;dd=2}else{var nd,Rg,yd;nd=xf+Nf*zf;Rg=yf+Ke*zf;yd=Be+nf*zf;var pd=k;pd.x=nd;pd.y=Rg;pd.z=yd;dd=3}var Qd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>vd||Qd<vd){var ig=dd<<1,vd=Qd,Mc=k;Cd=Mc.x;hg=Mc.y;Ch=Mc.z}}if(0>Yd){var Yc,qd,Dh,qe,re,Eh,Fh=Xb;Yc=Fh.x;qd=Fh.y;Dh=Fh.z;var Gh=hc;qe=Gh.x;re=Gh.y;Eh=Gh.z;var Hh,Ih,Jh;Hh=qe-Yc;Ih=re-qd;Jh=Eh-Dh;var Ag=Hh*Yc+Ih*qd+Jh*Dh,Ag=-Ag/(Hh*Hh+Ih*Ih+Jh*Jh),Kh;if(0>Ag){var Lh=k;Lh.x=Yc;Lh.y=qd;Lh.z=Dh;Kh=1}else if(1<Ag){var Mh=k;Mh.x=qe;Mh.y=re;Mh.z=Eh;Kh=2}else{var sj,Sg,tj;sj=Yc+Hh*Ag;Sg=qd+Ih*Ag;tj=Dh+Jh*Ag;var se=k;se.x=sj;se.y=Sg;se.z=tj;Kh=3}var Ce=k.x*k.x+k.y*k.y+k.z*k.z;if(0>vd||Ce<vd){var ig=Kh&1|(Kh&2)<<1,vd=Ce,Wd=k;Cd=Wd.x;hg=Wd.y;Ch=Wd.z}}var Dd;if(0<vd){var te=k;te.x=Cd;te.y=hg;te.z=Ch;Dd=ig}else{var Tg=Td*Td+Ld*Ld+Md*Md;0<Tg&&(Tg=1/Math.sqrt(Tg));Td*=Tg;Ld*=Tg;Md*=Tg;var uj=Td*Td+Ld*Ld+Md*Md,uj=(ge*Td+ye*Ld+Kf*Md)/uj;Cd=Td*uj;hg=Ld*uj;Ch=Md*uj;var Ed=k;Ed.x=Cd;Ed.y=hg;Ed.z=Ch;Dd=7}var Sd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>tg||Sd<tg){var Cb=Dd&1|(Dd&6)<<1,tg=Sd,Nd=k;Ub=Nd.x;Mb=Nd.y;pj=Nd.z}}if(0>cc*dc){var qg,Bg,Nh,xd,vj,Ug,Vg,Wg,Oh,Xg,Yg,Zg,$g,ah,Cg,Ph,Qh,Rh,Sh=Xb;qg=Sh.x;Bg=Sh.y;Nh=Sh.z;var Th=Yb;xd=Th.x;vj=Th.y;Ug=Th.z;var fe=hc;Vg=fe.x;Wg=fe.y;Oh=fe.z;Xg=xd-qg;Yg=vj-Bg;Zg=Ug-Nh;$g=Vg-xd;ah=Wg-vj;Cg=Oh-Ug;Ph=qg-Vg;Qh=Bg-Wg;Rh=Nh-Oh;var je,ke,le;je=Yg*Cg-Zg*ah;ke=Zg*$g-Xg*Cg;le=Xg*ah-Yg*$g;var pe=qg*(Yg*le-Zg*ke)+Bg*(Zg*je-Xg*le)+Nh*(Xg*ke-Yg*je),Qe=xd*(ah*le-Cg*ke)+vj*(Cg*je-$g*le)+Ug*($g*ke-ah*je),Le=Vg*(Qh*le-Rh*ke)+Wg*(Rh*je-Ph*le)+Oh*(Ph*ke-Qh*je),Od=-1,Ud,Uh,Vh,ed=0;Vh=Uh=Ud=0;if(0>pe){var Af,Of,Pf,Dg,wj,Wh,Xh=Xb;Af=Xh.x;Of=Xh.y;Pf=Xh.z;var Yh=Yb;Dg=Yh.x;wj=Yh.y;Wh=Yh.z;var Zh,$h,ai;Zh=Dg-Af;$h=wj-Of;ai=Wh-Pf;var Eg=Zh*Af+$h*Of+ai*Pf,Eg=-Eg/(Zh*Zh+$h*$h+ai*ai),xj;if(0>Eg){var bi=k;bi.x=Af;bi.y=Of;bi.z=Pf;xj=1}else if(1<Eg){var ci=k;ci.x=Dg;ci.y=wj;ci.z=Wh;xj=2}else{var yj,bh,fk;yj=Af+Zh*Eg;bh=Of+$h*Eg;fk=Pf+ai*Eg;var gk=k;gk.x=yj;gk.y=bh;gk.z=fk;xj=3}var Te=k.x*k.x+k.y*k.y+k.z*k.z,ed=xj,Od=Te,ee=k;Ud=ee.x;Uh=ee.y;Vh=ee.z}if(0>Qe){var zj,Aj,di,Gd,hk,ei,fi=Yb;zj=fi.x;Aj=fi.y;di=fi.z;var gi=hc;Gd=gi.x;hk=gi.y;ei=gi.z;var hi,ii,ji;hi=Gd-zj;ii=hk-Aj;ji=ei-di;var Fg=hi*zj+ii*Aj+ji*di,Fg=-Fg/(hi*hi+ii*ii+ji*ji),Bj;if(0>Fg){var ki=k;ki.x=zj;ki.y=Aj;ki.z=di;Bj=1}else if(1<Fg){var li=k;li.x=Gd;li.y=hk;li.z=ei;Bj=2}else{var Cj,ch,ik;Cj=zj+hi*Fg;ch=Aj+ii*Fg;ik=di+ji*Fg;var jk=k;jk.x=Cj;jk.y=ch;jk.z=ik;Bj=3}var Hd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||Hd<Od){var ed=Bj<<1,Od=Hd,Hk=k;Ud=Hk.x;Uh=Hk.y;Vh=Hk.z}}if(0>Le){var Dj,Ej,mi,Ik,kk,ni,oi=Xb;Dj=oi.x;Ej=oi.y;mi=oi.z;var pi=hc;Ik=pi.x;kk=pi.y;ni=pi.z;var qi,ri,si;qi=Ik-Dj;ri=kk-Ej;si=ni-mi;var Gg=qi*Dj+ri*Ej+si*mi,Gg=-Gg/(qi*qi+ri*ri+si*si),ti;if(0>Gg){var ui=k;ui.x=Dj;ui.y=Ej;ui.z=mi;ti=1}else if(1<Gg){var vi=k;vi.x=Ik;vi.y=kk;vi.z=ni;ti=2}else{var Fj,dh,Gj;Fj=Dj+qi*Gg;dh=Ej+ri*Gg;Gj=mi+si*Gg;var lk=k;lk.x=Fj;lk.y=dh;lk.z=Gj;ti=3}var Jk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||Jk<Od){var ed=ti&1|(ti&2)<<1,Od=Jk,Kk=k;Ud=Kk.x;Uh=Kk.y;Vh=Kk.z}}var mk;if(0<Od){var Lk=k;Lk.x=Ud;Lk.y=Uh;Lk.z=Vh;mk=ed}else{var eh=je*je+ke*ke+le*le;0<eh&&(eh=1/Math.sqrt(eh));je*=eh;ke*=eh;le*=eh;var Hj=je*je+ke*ke+le*le,Hj=(qg*je+Bg*ke+Nh*le)/Hj;Ud=je*Hj;Uh=ke*Hj;Vh=le*Hj;var nk=k;nk.x=Ud;nk.y=Uh;nk.z=Vh;mk=7}var ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>tg||ok<tg){var Cb=mk&3|(mk&4)<<1,tg=ok,pk=k;Ub=pk.x;Mb=pk.y;pj=pk.z}}if(0>zc*dc){var rg,Hg,wi,qk,Ij,fh,gh,hh,xi,ih,jh,kh,lh,mh,Ig,yi,zi,Ai,Bi=Yb;rg=Bi.x;Hg=Bi.y;wi=Bi.z;var Ci=Sb;qk=Ci.x;Ij=Ci.y;fh=Ci.z;var rk=hc;gh=rk.x;hh=rk.y;xi=rk.z;ih=qk-rg;jh=Ij-Hg;kh=fh-wi;lh=gh-qk;mh=hh-Ij;Ig=xi-fh;yi=rg-gh;zi=Hg-hh;Ai=wi-xi;var me,ne,oe;me=jh*Ig-kh*mh;ne=kh*lh-ih*Ig;oe=ih*mh-jh*lh;var Ne=rg*(jh*oe-kh*ne)+Hg*(kh*me-ih*oe)+wi*(ih*ne-jh*me),Oe=qk*(mh*oe-Ig*ne)+Ij*(Ig*me-lh*oe)+fh*(lh*ne-mh*me),Me=gh*(zi*oe-Ai*ne)+hh*(Ai*me-yi*oe)+xi*(yi*ne-zi*me),Pd=-1,Vd,Di,Ei,Mk=0;Ei=Di=Vd=0;if(0>Ne){var Bf,Qf,Rf,Jg,Jj,Fi,Gi=Yb;Bf=Gi.x;Qf=Gi.y;Rf=Gi.z;var Hi=Sb;Jg=Hi.x;Jj=Hi.y;Fi=Hi.z;var Ii,Ji,Ki;Ii=Jg-Bf;Ji=Jj-Qf;Ki=Fi-Rf;var Kg=Ii*Bf+Ji*Qf+Ki*Rf,Kg=-Kg/(Ii*Ii+Ji*Ji+Ki*Ki),Kj;if(0>Kg){var Li=k;Li.x=Bf;Li.y=Qf;Li.z=Rf;Kj=1}else if(1<Kg){var Mi=k;Mi.x=Jg;Mi.y=Jj;Mi.z=Fi;Kj=2}else{var Lj,nh,sk;Lj=Bf+Ii*Kg;nh=Qf+Ji*Kg;sk=Rf+Ki*Kg;var tk=k;tk.x=Lj;tk.y=nh;tk.z=sk;Kj=3}var Pe=k.x*k.x+k.y*k.y+k.z*k.z,Mk=Kj,Pd=Pe,Nk=k;Vd=Nk.x;Di=Nk.y;Ei=Nk.z}if(0>Oe){var Mj,Nj,Ni,Rd,uk,Oi,Pi=Sb;Mj=Pi.x;Nj=Pi.y;Ni=Pi.z;var Qi=hc;Rd=Qi.x;uk=Qi.y;Oi=Qi.z;var Ri,Si,Ti;Ri=Rd-Mj;Si=uk-Nj;Ti=Oi-Ni;var Lg=Ri*Mj+Si*Nj+Ti*Ni,Lg=-Lg/(Ri*Ri+Si*Si+Ti*Ti),Oj;if(0>Lg){var Ui=k;Ui.x=Mj;Ui.y=Nj;Ui.z=Ni;Oj=1}else if(1<Lg){var Vi=k;Vi.x=Rd;Vi.y=uk;Vi.z=Oi;Oj=2}else{var Pj,oh,vk;Pj=Mj+Ri*Lg;oh=Nj+Si*Lg;vk=Ni+Ti*Lg;var wk=k;wk.x=Pj;wk.y=oh;wk.z=vk;Oj=3}var Ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Ok<Pd){var Mk=Oj<<1,Pd=Ok,Pk=k;Vd=Pk.x;Di=Pk.y;Ei=Pk.z}}if(0>Me){var Qj,Rj,Wi,Qk,xk,Xi,Yi=Yb;Qj=Yi.x;Rj=Yi.y;Wi=Yi.z;var Zi=hc;Qk=Zi.x;xk=Zi.y;Xi=Zi.z;var $i,aj,bj;$i=Qk-Qj;aj=xk-Rj;bj=Xi-Wi;var Mg=$i*Qj+aj*Rj+bj*Wi,Mg=-Mg/($i*$i+aj*aj+bj*bj),cj;if(0>Mg){var dj=k;dj.x=Qj;dj.y=Rj;dj.z=Wi;cj=1}else if(1<Mg){var ej=k;ej.x=Qk;ej.y=xk;ej.z=Xi;cj=2}else{var Sj,ph,Tj;Sj=Qj+$i*Mg;ph=Rj+aj*Mg;Tj=Wi+bj*Mg;var yk=k;yk.x=Sj;yk.y=ph;yk.z=Tj;cj=3}var Rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Rk<Pd){var Mk=cj&1|(cj&2)<<1,Pd=Rk,Sk=k;Vd=Sk.x;Di=Sk.y;Ei=Sk.z}}var Tk;if(0<Pd){var Uk=k;Uk.x=Vd;Uk.y=Di;Uk.z=Ei;Tk=Mk}else{var qh=me*me+ne*ne+oe*oe;0<qh&&(qh=1/Math.sqrt(qh));me*=qh;ne*=qh;oe*=qh;var Uj=me*me+ne*ne+oe*oe,Uj=(rg*me+Hg*ne+wi*oe)/Uj;Vd=me*Uj;Di=ne*Uj;Ei=oe*Uj;var zk=k;zk.x=Vd;zk.y=Di;zk.z=Ei;Tk=7}var Vk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>tg||Vk<tg){var Cb=Tk<<1,tg=Vk,Ak=k;Ub=Ak.x;Mb=Ak.y;pj=Ak.z}}if(0<tg){var rh=k;rh.x=Ub;rh.y=Mb;rh.z=pj;D=Cb}else k.O(),D=15}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.ya){case 1:this.Dn();break;case 2:this.ml();break;case 3:this.tl()}if(4==this.ya){var Vj=this.Ym(a,b,e,d,h,l,g);if(0!=Vj)return this.distance=0,Vj;this.distance=-this.depth;return 0}this.distance=0;return 1}this.ym(D);m.x=k.x;m.y=k.y;m.z=k.z;var sh=m,Re=-sh.y,pf=-sh.z;sh.x=-sh.x;sh.y=Re;sh.z=pf;this.pf(!1);this.qf(!1);var Wj=this.Oa[this.ya],Xj=this.cb[this.ya];Wj.x=Xj.x;Wj.y=Xj.y;Wj.z=Xj.z;var de=Wj,th=this.lb[this.ya],ue=de.y-th.y,Se=de.z-th.z;de.x=de.x-th.x;de.y=ue;de.z=Se;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var Yj=h[this.ya];if(1E-8>Yj.x*m.x+Yj.y*m.y+Yj.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.im(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=c&&null!=c.gi&&this.In(c.gi),0;this.ya++;++u}return 2},Vl:function(a,b,e,d,c,f,h){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var l=this.Oa,g=this.closest,k=this.dir,m,n,q;m=d.v-e.v;n=d.A-e.A;q=d.B-e.B;k.x=m;k.y=n;k.z=q;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.za(1,0,0);this.ya=0;if(null!=this.hj)this.pf(!0);else{var p=this.cb[this.ya];p.x=this.pc.v;p.y=this.pc.A;p.z=this.pc.B}this.qf(!0);var r=this.Oa[this.ya],v=this.cb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.lb[this.ya],w=r.y-aa.y,A=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=A;this.ya=1;var u=0,D=0,t=this.Fn,z=this.En;t.O();z.x=f.x;z.y=f.y;z.z=f.z;var E=z.y-c.y,x=z.z-c.z;z.x=z.x-c.x;z.y=E;for(z.z=x;40>u;){var yb=0;switch(this.ya){case 1:var N=l[0];g.x=N.x;g.y=N.y;g.z=N.z;yb=1;break;case 2:var G,F,C,O,ga,L,Vb=l[0];G=Vb.x;F=Vb.y;C=Vb.z;var M=l[1];O=M.x;ga=M.y;L=M.z;var ka,Oa,U;ka=O-G;Oa=ga-F;U=L-C;var R=ka*G+Oa*F+U*C,R=-R/(ka*ka+Oa*Oa+U*U);if(0>R){var Wb=g;Wb.x=G;Wb.y=F;Wb.z=C;yb=1}else if(1<R){var Ma=g;Ma.x=O;Ma.y=ga;Ma.z=L;yb=2}else{var Ra,vc,Pa;Ra=G+ka*R;vc=F+Oa*R;Pa=C+U*R;var Aa=g;Aa.x=Ra;Aa.y=vc;Aa.z=Pa;yb=3}break;case 3:var zb=l[0],J=l[1],Qa=l[2],ba,Q,P,wa,ta,W,oa,y,Ha,ca,Ca,xa,Da,Sa,la,Z,Ea,qa,va=zb;ba=va.x;Q=va.y;P=va.z;var I=J;wa=I.x;ta=I.y;W=I.z;var Ka=Qa;oa=Ka.x;y=Ka.y;Ha=Ka.z;ca=wa-ba;Ca=ta-Q;xa=W-P;Da=oa-wa;Sa=y-ta;la=Ha-W;Z=ba-oa;Ea=Q-y;qa=P-Ha;var Xa,S,Ya;Xa=Ca*la-xa*Sa;S=xa*Da-ca*la;Ya=ca*Sa-Ca*Da;var T=ba*(Ca*Ya-xa*S)+Q*(xa*Xa-ca*Ya)+P*(ca*S-Ca*Xa),K=wa*(Sa*Ya-la*S)+ta*(la*Xa-Da*Ya)+W*(Da*S-Sa*Xa),ia=oa*(Ea*Ya-qa*S)+y*(qa*Xa-Z*Ya)+Ha*(Z*S-Ea*Xa),fb=-1,da,Ic,sa,eb=0;sa=Ic=da=0;if(0>T){var jb,Za,ma,na,Ia,Fa,ob=zb;jb=ob.x;Za=ob.y;ma=ob.z;var fa=J;na=fa.x;Ia=fa.y;Fa=fa.z;var ea,ja,bb;ea=na-jb;ja=Ia-Za;bb=Fa-ma;var ya=ea*jb+ja*Za+bb*ma,ya=-ya/(ea*ea+ja*ja+bb*bb),tb;if(0>ya){var Ua=g;Ua.x=jb;Ua.y=Za;Ua.z=ma;tb=1}else if(1<ya){var qb=g;qb.x=na;qb.y=Ia;qb.z=Fa;tb=2}else{var rb,ub,Va;rb=jb+ea*ya;ub=Za+ja*ya;Va=ma+bb*ya;var Db=g;Db.x=rb;Db.y=ub;Db.z=Va;tb=3}var mc=g.x*g.x+g.y*g.y+g.z*g.z,eb=tb,fb=mc,$a=g;da=$a.x;Ic=$a.y;sa=$a.z}if(0>K){var ua,Gb,H,pb,cb,rc,ab=J;ua=ab.x;Gb=ab.y;H=ab.z;var gb=Qa;pb=gb.x;cb=gb.y;rc=gb.z;var B,Bb,Xd;B=pb-ua;Bb=cb-Gb;Xd=rc-H;var Tc=B*ua+Bb*Gb+Xd*H,Tc=-Tc/(B*B+Bb*Bb+Xd*Xd),Eb;if(0>Tc){var Na=g;Na.x=ua;Na.y=Gb;Na.z=H;Eb=1}else if(1<Tc){var nb=g;nb.x=pb;nb.y=cb;nb.z=rc;Eb=2}else{var wb,xb,db;wb=ua+B*Tc;xb=Gb+Bb*Tc;db=H+Xd*Tc;var Y=g;Y.x=wb;Y.y=xb;Y.z=db;Eb=3}var La=g.x*g.x+g.y*g.y+g.z*g.z;if(0>fb||La<fb){var eb=Eb<<1,fb=La,kb=g;da=kb.x;Ic=kb.y;sa=kb.z}}if(0>ia){var Ta,hb,Ja,Ib,ha,X,Ab=zb;Ta=Ab.x;hb=Ab.y;Ja=Ab.z;var Dc=Qa;Ib=Dc.x;ha=Dc.y;X=Dc.z;var Pc,uh,gc;Pc=Ib-Ta;uh=ha-hb;gc=X-Ja;var Nc=Pc*Ta+uh*hb+gc*Ja,Nc=-Nc/(Pc*Pc+uh*uh+gc*gc),ra;if(0>Nc){var Ba=g;Ba.x=Ta;Ba.y=hb;Ba.z=Ja;ra=1}else if(1<Nc){var yc=g;yc.x=Ib;yc.y=ha;yc.z=X;ra=2}else{var pa,jc,uc;pa=Ta+Pc*Nc;jc=hb+uh*Nc;uc=Ja+gc*Nc;var kc=g;kc.x=pa;kc.y=jc;kc.z=uc;ra=3}var ac=g.x*g.x+g.y*g.y+g.z*g.z;if(0>fb||ac<fb){var eb=ra&1|(ra&2)<<1,fb=ac,Xb=g;da=Xb.x;Ic=Xb.y;sa=Xb.z}}if(0<fb){var Yb=g;Yb.x=da;Yb.y=Ic;Yb.z=sa;yb=eb}else{var Sb=Xa*Xa+S*S+Ya*Ya;0<Sb&&(Sb=1/Math.sqrt(Sb));Xa*=Sb;S*=Sb;Ya*=Sb;var hc=Xa*Xa+S*S+Ya*Ya,hc=(ba*Xa+Q*S+P*Ya)/hc;da=Xa*hc;Ic=S*hc;sa=Ya*hc;var Tb=g;Tb.x=da;Tb.y=Ic;Tb.z=sa;yb=7}break;case 4:var Pb=l[0],Zb=l[1],ic=l[2],Jb=l[3],$b,lb,za,Ga,mb,sc,nc,jd,rd,sb,tc,wc,Lb,Uf,vb,Zc,Gc,Wa,Ue,ib,Id,Og,Hb,Kb,Qb,Ac,Nb,ec=Pb;$b=ec.x;lb=ec.y;za=ec.z;var Gk=Zb;Ga=Gk.x;mb=Gk.y;sc=Gk.z;var bc=ic;nc=bc.x;jd=bc.y;rd=bc.z;var Qc=Jb;sb=Qc.x;tc=Qc.y;wc=Qc.z;Lb=Ga-$b;Uf=mb-lb;vb=sc-za;Zc=nc-$b;Gc=jd-lb;Wa=rd-za;Ue=sb-$b;ib=tc-lb;Id=wc-za;Og=nc-Ga;Hb=jd-mb;Kb=rd-sc;Qb=sb-Ga;Ac=tc-mb;Nb=wc-sc;var Fb,fc,dc,Ub,Mb,Rb,Cb,Ec,Fc,pc,lc,cc;Fb=Uf*Wa-vb*Gc;fc=vb*Zc-Lb*Wa;dc=Lb*Gc-Uf*Zc;Ub=Gc*Id-Wa*ib;Mb=Wa*Ue-Zc*Id;Rb=Zc*ib-Gc*Ue;Cb=ib*vb-Id*Uf;Ec=Id*Lb-Ue*vb;Fc=Ue*Uf-ib*Lb;pc=Ac*Kb-Nb*Hb;lc=Nb*Og-Qb*Kb;cc=Qb*Hb-Ac*Og;var oc=0<Lb*pc+Uf*lc+vb*cc?1:-1,zc=$b*Fb+lb*fc+za*dc,Jc=$b*Ub+lb*Mb+za*Rb,pj=$b*Cb+lb*Ec+za*Fc,gd=Ga*pc+mb*lc+sc*cc,sd=-1,Uc,Vf,Bc,Cc=0;Bc=Vf=Uc=0;if(0>zc*oc){var qc,Df,Kc,vh,xc,Hc,td,Pg,Qg,ug,wh,Jd,Ob,xh,Oc,ck,Lc,kd,ld=Pb;qc=ld.x;Df=ld.y;Kc=ld.z;var Xc=Zb;vh=Xc.x;xc=Xc.y;Hc=Xc.z;var md=ic;td=md.x;Pg=md.y;Qg=md.z;ug=vh-qc;wh=xc-Df;Jd=Hc-Kc;Ob=td-vh;xh=Pg-xc;Oc=Qg-Hc;ck=qc-td;Lc=Df-Pg;kd=Kc-Qg;var Vc,Wc,$c;Vc=wh*Oc-Jd*xh;Wc=Jd*Ob-ug*Oc;$c=ug*xh-wh*Ob;var ud=qc*(wh*$c-Jd*Wc)+Df*(Jd*Vc-ug*$c)+Kc*(ug*Wc-wh*Vc),cd=vh*(xh*$c-Oc*Wc)+xc*(Oc*Vc-Ob*$c)+Hc*(Ob*Wc-xh*Vc),Sc=td*(Lc*$c-kd*Wc)+Pg*(kd*Vc-ck*$c)+Qg*(ck*Wc-Lc*Vc),Ee=-1,Ve,We,Kd,qj=0;Kd=We=Ve=0;if(0>ud){var ve,we,Rc,fd,bd,id,vg=Pb;ve=vg.x;we=vg.y;Rc=vg.z;var dd=Zb;fd=dd.x;bd=dd.y;id=dd.z;var Yc,yh,ad;Yc=fd-ve;yh=bd-we;ad=id-Rc;var Fe=Yc*ve+yh*we+ad*Rc,Fe=-Fe/(Yc*Yc+yh*yh+ad*ad),dk;if(0>Fe){var hd=g;hd.x=ve;hd.y=we;hd.z=Rc;dk=1}else if(1<Fe){var qd=g;qd.x=fd;qd.y=bd;qd.z=id;dk=2}else{var wd,Fd,pd;wd=ve+Yc*Fe;Fd=we+yh*Fe;pd=Rc+ad*Fe;var Xe=g;Xe.x=wd;Xe.y=Fd;Xe.z=pd;dk=3}var Dd=g.x*g.x+g.y*g.y+g.z*g.z,qj=dk,Ee=Dd,ek=g;Ve=ek.x;We=ek.y;Kd=ek.z}if(0>cd){var zh,Ah,Bh,Ye,Ze,$e,$d=Zb;zh=$d.x;Ah=$d.y;Bh=$d.z;var rj=ic;Ye=rj.x;Ze=rj.y;$e=rj.z;var Mc,nd,od;Mc=Ye-zh;nd=Ze-Ah;od=$e-Bh;var Ef=Mc*zh+nd*Ah+od*Bh,Ef=-Ef/(Mc*Mc+nd*nd+od*od),Ff;if(0>Ef){var Gf=g;Gf.x=zh;Gf.y=Ah;Gf.z=Bh;Ff=1}else if(1<Ef){var xd=g;xd.x=Ye;xd.y=Ze;xd.z=$e;Ff=2}else{var yd,Wf,Xf;yd=zh+Mc*Ef;Wf=Ah+nd*Ef;Xf=Bh+od*Ef;var af=g;af.x=yd;af.y=Wf;af.z=Xf;Ff=3}var Yf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||Yf<Ee){var qj=Ff<<1,Ee=Yf,Hf=g;Ve=Hf.x;We=Hf.y;Kd=Hf.z}}if(0>Sc){var xe,bf,Zf,$f,ag,bg,Ge=Pb;xe=Ge.x;bf=Ge.y;Zf=Ge.z;var He=ic;$f=He.x;ag=He.y;bg=He.z;var cf,cg,qf;cf=$f-xe;cg=ag-bf;qf=bg-Zf;var Ie=cf*xe+cg*bf+qf*Zf,Ie=-Ie/(cf*cf+cg*cg+qf*qf),rf;if(0>Ie){var dg=g;dg.x=xe;dg.y=bf;dg.z=Zf;rf=1}else if(1<Ie){var Qd=g;Qd.x=$f;Qd.y=ag;Qd.z=bg;rf=2}else{var qe,re,se;qe=xe+cf*Ie;re=bf+cg*Ie;se=Zf+qf*Ie;var df=g;df.x=qe;df.y=re;df.z=se;rf=3}var sf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||sf<Ee){var qj=rf&1|(rf&2)<<1,Ee=sf,If=g;Ve=If.x;We=If.y;Kd=If.z}}var Wd;if(0<Ee){var Jf=g;Jf.x=Ve;Jf.y=We;Jf.z=Kd;Wd=qj}else{var ge=Vc*Vc+Wc*Wc+$c*$c;0<ge&&(ge=1/Math.sqrt(ge));Vc*=ge;Wc*=ge;$c*=ge;var ye=Vc*Vc+Wc*Wc+$c*$c,ye=(qc*Vc+Df*Wc+Kc*$c)/ye;Ve=Vc*ye;We=Wc*ye;Kd=$c*ye;var Kf=g;Kf.x=Ve;Kf.y=We;Kf.z=Kd;Wd=7}var te=g.x*g.x+g.y*g.y+g.z*g.z,Cc=Wd,sd=te,eg=g;Uc=eg.x;Vf=eg.y;Bc=eg.z}if(0>Jc*oc){var zd,Ad,Bd,ed,fg,gg,ae,he,ie,be,tf,ef,ff,gf,Lf,Ed,Td,Ld,Md=Pb;zd=Md.x;Ad=Md.y;Bd=Md.z;var Nd=ic;ed=Nd.x;fg=Nd.y;gg=Nd.z;var Mf=Jb;ae=Mf.x;he=Mf.y;ie=Mf.z;be=ed-zd;tf=fg-Ad;ef=gg-Bd;ff=ae-ed;gf=he-fg;Lf=ie-gg;Ed=zd-ae;Td=Ad-he;Ld=Bd-ie;var Yd,vd,Cd;Yd=tf*Lf-ef*gf;vd=ef*ff-be*Lf;Cd=be*gf-tf*ff;var hg=zd*(tf*Cd-ef*vd)+Ad*(ef*Yd-be*Cd)+Bd*(be*vd-tf*Yd),fe=ed*(gf*Cd-Lf*vd)+fg*(Lf*Yd-ff*Cd)+gg*(ff*vd-gf*Yd),ig=ae*(Td*Cd-Ld*vd)+he*(Ld*Yd-Ed*Cd)+ie*(Ed*vd-Td*Yd),Zd=-1,ce,ze,hf,jg=0;hf=ze=ce=0;if(0>hg){var jf,kf,lf,Ae,uf,kg,vf=Pb;jf=vf.x;kf=vf.y;lf=vf.z;var wg=ic;Ae=wg.x;uf=wg.y;kg=wg.z;var lg,mf,wf;lg=Ae-jf;mf=uf-kf;wf=kg-lf;var Je=lg*jf+mf*kf+wf*lf,Je=-Je/(lg*lg+mf*mf+wf*wf),xg;if(0>Je){var yg=g;yg.x=jf;yg.y=kf;yg.z=lf;xg=1}else if(1<Je){var Ce=g;Ce.x=Ae;Ce.y=uf;Ce.z=kg;xg=2}else{var mg,xf,yf;mg=jf+lg*Je;xf=kf+mf*Je;yf=lf+wf*Je;var Be=g;Be.x=mg;Be.y=xf;Be.z=yf;xg=3}var zg=g.x*g.x+g.y*g.y+g.z*g.z,jg=xg,Zd=zg,Sd=g;ce=Sd.x;ze=Sd.y;hf=Sd.z}if(0>fe){var ng,og,pg,Nf,Ke,nf,zf=ic;ng=zf.x;og=zf.y;pg=zf.z;var ee=Jb;Nf=ee.x;Ke=ee.y;nf=ee.z;var Gd,Rd,Hd;Gd=Nf-ng;Rd=Ke-og;Hd=nf-pg;var Rg=Gd*ng+Rd*og+Hd*pg,Rg=-Rg/(Gd*Gd+Rd*Rd+Hd*Hd),pe;if(0>Rg){var Qe=g;Qe.x=ng;Qe.y=og;Qe.z=pg;pe=1}else if(1<Rg){var Te=g;Te.x=Nf;Te.y=Ke;Te.z=nf;pe=2}else{var Ne,Oe,Pe;Ne=ng+Gd*Rg;Oe=og+Rd*Rg;Pe=pg+Hd*Rg;var Dh=g;Dh.x=Ne;Dh.y=Oe;Dh.z=Pe;pe=3}var Re=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zd||Re<Zd){var jg=pe<<1,Zd=Re,pf=g;ce=pf.x;ze=pf.y;hf=pf.z}}if(0>ig){var Eh,Fh,Gh,Hh,Ih,Jh,Ag=Pb;Eh=Ag.x;Fh=Ag.y;Gh=Ag.z;var Kh=Jb;Hh=Kh.x;Ih=Kh.y;Jh=Kh.z;var Lh,Mh,sj;Lh=Hh-Eh;Mh=Ih-Fh;sj=Jh-Gh;var Sg=Lh*Eh+Mh*Fh+sj*Gh,Sg=-Sg/(Lh*Lh+Mh*Mh+sj*sj),tj;if(0>Sg){var ue=g;ue.x=Eh;ue.y=Fh;ue.z=Gh;tj=1}else if(1<Sg){var Se=g;Se.x=Hh;Se.y=Ih;Se.z=Jh;tj=2}else{var kj,mj,oj;kj=Eh+Lh*Sg;mj=Fh+Mh*Sg;oj=Gh+sj*Sg;var Tg=g;Tg.x=kj;Tg.y=mj;Tg.z=oj;tj=3}var uj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zd||uj<Zd){var jg=tj&1|(tj&2)<<1,Zd=uj,Cf=g;ce=Cf.x;ze=Cf.y;hf=Cf.z}}var De;if(0<Zd){var Ng=g;Ng.x=ce;Ng.y=ze;Ng.z=hf;De=jg}else{var qg=Yd*Yd+vd*vd+Cd*Cd;0<qg&&(qg=1/Math.sqrt(qg));Yd*=qg;vd*=qg;Cd*=qg;var Bg=Yd*Yd+vd*vd+Cd*Cd,Bg=(zd*Yd+Ad*vd+Bd*Cd)/Bg;ce=Yd*Bg;ze=vd*Bg;hf=Cd*Bg;var Nh=g;Nh.x=ce;Nh.y=ze;Nh.z=hf;De=7}var Zj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>sd||Zj<sd){var Cc=De&1|(De&6)<<1,sd=Zj,vj=g;Uc=vj.x;Vf=vj.y;Bc=vj.z}}if(0>pj*oc){var Ug,Vg,Wg,Oh,Xg,Yg,Zg,$g,ah,Cg,Ph,Qh,Rh,Sh,Th,Sf,je,ke,le=Pb;Ug=le.x;Vg=le.y;Wg=le.z;var of=Zb;Oh=of.x;Xg=of.y;Yg=of.z;var Tf=Jb;Zg=Tf.x;$g=Tf.y;ah=Tf.z;Cg=Oh-Ug;Ph=Xg-Vg;Qh=Yg-Wg;Rh=Zg-Oh;Sh=$g-Xg;Th=ah-Yg;Sf=Ug-Zg;je=Vg-$g;ke=Wg-ah;var Le,Od,Ud;Le=Ph*Th-Qh*Sh;Od=Qh*Rh-Cg*Th;Ud=Cg*Sh-Ph*Rh;var Uh=Ug*(Ph*Ud-Qh*Od)+Vg*(Qh*Le-Cg*Ud)+Wg*(Cg*Od-Ph*Le),Vh=Oh*(Sh*Ud-Th*Od)+Xg*(Th*Le-Rh*Ud)+Yg*(Rh*Od-Sh*Le),Bk=Zg*(je*Ud-ke*Od)+$g*(ke*Le-Sf*Ud)+ah*(Sf*Od-je*Le),Af=-1,Of,Pf,Dg,wj=0;Dg=Pf=Of=0;if(0>Uh){var Wh,Xh,Yh,Zh,$h,ai,Eg=Pb;Wh=Eg.x;Xh=Eg.y;Yh=Eg.z;var xj=Zb;Zh=xj.x;$h=xj.y;ai=xj.z;var bi,ci,yj;bi=Zh-Wh;ci=$h-Xh;yj=ai-Yh;var bh=bi*Wh+ci*Xh+yj*Yh,bh=-bh/(bi*bi+ci*ci+yj*yj),fk;if(0>bh){var gk=g;gk.x=Wh;gk.y=Xh;gk.z=Yh;fk=1}else if(1<bh){var sg=g;sg.x=Zh;sg.y=$h;sg.z=ai;fk=2}else{var ak,zj,Aj;ak=Wh+bi*bh;zj=Xh+ci*bh;Aj=Yh+yj*bh;var di=g;di.x=ak;di.y=zj;di.z=Aj;fk=3}var Ck=g.x*g.x+g.y*g.y+g.z*g.z,wj=fk,Af=Ck,hk=g;Of=hk.x;Pf=hk.y;Dg=hk.z}if(0>Vh){var ei,fi,gi,hi,ii,ji,Fg=Zb;ei=Fg.x;fi=Fg.y;gi=Fg.z;var Bj=Jb;hi=Bj.x;ii=Bj.y;ji=Bj.z;var ki,li,Cj;ki=hi-ei;li=ii-fi;Cj=ji-gi;var ch=ki*ei+li*fi+Cj*gi,ch=-ch/(ki*ki+li*li+Cj*Cj),ik;if(0>ch){var jk=g;jk.x=ei;jk.y=fi;jk.z=gi;ik=1}else if(1<ch){var gj=g;gj.x=hi;gj.y=ii;gj.z=ji;ik=2}else{var Hk,Dj,Ej;Hk=ei+ki*ch;Dj=fi+li*ch;Ej=gi+Cj*ch;var mi=g;mi.x=Hk;mi.y=Dj;mi.z=Ej;ik=3}var Ik=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Ik<Af){var wj=ik<<1,Af=Ik,kk=g;Of=kk.x;Pf=kk.y;Dg=kk.z}}if(0>Bk){var ni,oi,pi,qi,ri,si,Gg=Pb;ni=Gg.x;oi=Gg.y;pi=Gg.z;var ti=Jb;qi=ti.x;ri=ti.y;si=ti.z;var ui,vi,Fj;ui=qi-ni;vi=ri-oi;Fj=si-pi;var dh=ui*ni+vi*oi+Fj*pi,dh=-dh/(ui*ui+vi*vi+Fj*Fj),Gj;if(0>dh){var lk=g;lk.x=ni;lk.y=oi;lk.z=pi;Gj=1}else if(1<dh){var Jk=g;Jk.x=qi;Jk.y=ri;Jk.z=si;Gj=2}else{var Kk,mk,Lk;Kk=ni+ui*dh;mk=oi+vi*dh;Lk=pi+Fj*dh;var eh=g;eh.x=Kk;eh.y=mk;eh.z=Lk;Gj=3}var Hj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Hj<Af){var wj=Gj&1|(Gj&2)<<1,Af=Hj,nk=g;Of=nk.x;Pf=nk.y;Dg=nk.z}}var ok;if(0<Af){var pk=g;pk.x=Of;pk.y=Pf;pk.z=Dg;ok=wj}else{var rg=Le*Le+Od*Od+Ud*Ud;0<rg&&(rg=1/Math.sqrt(rg));Le*=rg;Od*=rg;Ud*=rg;var Hg=Le*Le+Od*Od+Ud*Ud,Hg=(Ug*Le+Vg*Od+Wg*Ud)/Hg;Of=Le*Hg;Pf=Od*Hg;Dg=Ud*Hg;var wi=g;wi.x=Of;wi.y=Pf;wi.z=Dg;ok=7}var qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>sd||qk<sd){var Cc=ok&3|(ok&4)<<1,sd=qk,Ij=g;Uc=Ij.x;Vf=Ij.y;Bc=Ij.z}}if(0>gd*oc){var fh,gh,hh,xi,ih,jh,kh,lh,mh,Ig,yi,zi,Ai,Bi,Ci,rk,me,ne,oe=Zb;fh=oe.x;gh=oe.y;hh=oe.z;var hj=ic;xi=hj.x;ih=hj.y;jh=hj.z;var ij=Jb;kh=ij.x;lh=ij.y;mh=ij.z;Ig=xi-fh;yi=ih-gh;zi=jh-hh;Ai=kh-xi;Bi=lh-ih;Ci=mh-jh;rk=fh-kh;me=gh-lh;ne=hh-mh;var Me,Pd,Vd;Me=yi*Ci-zi*Bi;Pd=zi*Ai-Ig*Ci;Vd=Ig*Bi-yi*Ai;var Di=fh*(yi*Vd-zi*Pd)+gh*(zi*Me-Ig*Vd)+hh*(Ig*Pd-yi*Me),Ei=xi*(Bi*Vd-Ci*Pd)+ih*(Ci*Me-Ai*Vd)+jh*(Ai*Pd-Bi*Me),Mk=kh*(me*Vd-ne*Pd)+lh*(ne*Me-rk*Vd)+mh*(rk*Pd-me*Me),Bf=-1,Qf,Rf,Jg,Jj=0;Jg=Rf=Qf=0;if(0>Di){var Fi,Gi,Hi,Ii,Ji,Ki,Kg=Zb;Fi=Kg.x;Gi=Kg.y;Hi=Kg.z;var Kj=ic;Ii=Kj.x;Ji=Kj.y;Ki=Kj.z;var Li,Mi,Lj;Li=Ii-Fi;Mi=Ji-Gi;Lj=Ki-Hi;var nh=Li*Fi+Mi*Gi+Lj*Hi,nh=-nh/(Li*Li+Mi*Mi+Lj*Lj),sk;if(0>nh){var tk=g;tk.x=Fi;tk.y=Gi;tk.z=Hi;sk=1}else if(1<nh){var jj=g;jj.x=Ii;jj.y=Ji;jj.z=Ki;sk=2}else{var Nk,Mj,Nj;Nk=Fi+Li*nh;Mj=Gi+Mi*nh;Nj=Hi+Lj*nh;var Ni=g;Ni.x=Nk;Ni.y=Mj;Ni.z=Nj;sk=3}var Dk=g.x*g.x+g.y*g.y+g.z*g.z,Jj=sk,Bf=Dk,uk=g;Qf=uk.x;Rf=uk.y;Jg=uk.z}if(0>Ei){var Oi,Pi,Qi,Ri,Si,Ti,Lg=ic;Oi=Lg.x;Pi=Lg.y;Qi=Lg.z;var Oj=Jb;Ri=Oj.x;Si=Oj.y;Ti=Oj.z;var Ui,Vi,Pj;Ui=Ri-Oi;Vi=Si-Pi;Pj=Ti-Qi;var oh=Ui*Oi+Vi*Pi+Pj*Qi,oh=-oh/(Ui*Ui+Vi*Vi+Pj*Pj),vk;if(0>oh){var wk=g;wk.x=Oi;wk.y=Pi;wk.z=Qi;vk=1}else if(1<oh){var Ok=g;Ok.x=Ri;Ok.y=Si;Ok.z=Ti;vk=2}else{var Pk,Qj,Rj;Pk=Oi+Ui*oh;Qj=Pi+Vi*oh;Rj=Qi+Pj*oh;var Wi=g;Wi.x=Pk;Wi.y=Qj;Wi.z=Rj;vk=3}var Qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Qk<Bf){var Jj=vk<<1,Bf=Qk,xk=g;Qf=xk.x;Rf=xk.y;Jg=xk.z}}if(0>Mk){var Xi,Yi,Zi,$i,aj,bj,Mg=Zb;Xi=Mg.x;Yi=Mg.y;Zi=Mg.z;var cj=Jb;$i=cj.x;aj=cj.y;bj=cj.z;var dj,ej,Sj;dj=$i-Xi;ej=aj-Yi;Sj=bj-Zi;var ph=dj*Xi+ej*Yi+Sj*Zi,ph=-ph/(dj*dj+ej*ej+Sj*Sj),Tj;if(0>ph){var yk=g;yk.x=Xi;yk.y=Yi;yk.z=Zi;Tj=1}else if(1<ph){var Rk=g;Rk.x=$i;Rk.y=aj;Rk.z=bj;Tj=2}else{var Sk,Tk,Uk;Sk=Xi+dj*ph;Tk=Yi+ej*ph;Uk=Zi+Sj*ph;var qh=g;qh.x=Sk;qh.y=Tk;qh.z=Uk;Tj=3}var Uj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Uj<Bf){var Jj=Tj&1|(Tj&2)<<1,Bf=Uj,zk=g;Qf=zk.x;Rf=zk.y;Jg=zk.z}}var Vk;if(0<Bf){var Ak=g;Ak.x=Qf;Ak.y=Rf;Ak.z=Jg;Vk=Jj}else{var rh=Me*Me+Pd*Pd+Vd*Vd;0<rh&&(rh=1/Math.sqrt(rh));Me*=rh;Pd*=rh;Vd*=rh;var Vj=Me*Me+Pd*Pd+Vd*Vd,Vj=(fh*Me+gh*Pd+hh*Vd)/Vj;Qf=Me*Vj;Rf=Pd*Vj;Jg=Vd*Vj;var sh=g;sh.x=Qf;sh.y=Rf;sh.z=Jg;Vk=7}var bk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>sd||bk<sd){var Cc=Vk<<1,sd=bk,lj=g;Uc=lj.x;Vf=lj.y;Bc=lj.z}}if(0<sd){var Wj=g;Wj.x=Uc;Wj.y=Vf;Wj.z=Bc;yb=Cc}else g.O(),yb=15}this.ym(yb);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!D||4==this.ya){h.fraction=D;break}this.im();h.fraction=D;var Xj=h.normal;Xj.x=k.x;Xj.y=k.y;Xj.z=k.z;var de=Xj,th=Math.sqrt(de.x*de.x+de.y*de.y+de.z*de.z);0<th&&(th=1/th);var Ek=de.y*th,Fk=de.z*th;de.x=de.x*th;de.y=Ek;de.z=Fk;var Yj=h.position,nj=this.closestPoint1;Yj.x=nj.x;Yj.y=nj.y;Yj.z=nj.z;var Wk=Yj,kl=Wk.y+c.y*D,ll=Wk.z+c.z*D;Wk.x+=c.x*D;Wk.y=kl;Wk.z=ll;return!0}k.x=g.x;k.y=g.y;k.z=g.z;var Xk=k,ml=-Xk.y,nl=-Xk.z;Xk.x=-Xk.x;Xk.y=ml;Xk.z=nl;if(null!=this.hj)this.pf(!0);else{var Bl=this.cb[this.ya];Bl.x=this.pc.v;Bl.y=this.pc.A;Bl.z=this.pc.B}this.qf(!0);var jl=this.Oa[this.ya],Cl=this.cb[this.ya];jl.x=Cl.x;jl.y=Cl.y;jl.z=Cl.z;var Yk=jl,Dl=this.lb[this.ya],ol=Yk.y-Dl.y,pl=Yk.z-Dl.z;Yk.x=Yk.x-Dl.x;Yk.y=ol;Yk.z=pl;var Zk=l[this.ya],ql=Zk.y-t.y,Ul=Zk.z-t.z;Zk.x=Zk.x-t.x;Zk.y=ql;Zk.z=Ul;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var El=l[this.ya],fj=k,Kl=El.x*fj.x+El.y*fj.y+El.z*fj.z;if(0>Kl){if(0<=z.x*fj.x+z.y*fj.y+z.z*fj.z)break;var gl=Kl/(z.x*fj.x+z.y*fj.y+z.z*fj.z),D=D+gl;if(1<=D)break;var Vl=t.y+z.y*gl,Wl=t.z+z.z*gl;t.x=t.x+z.x*gl;t.y=Vl;t.z=Wl;for(var Ll=0,Xl=this.ya+1;Ll<Xl;){var Yl=Ll++,$k=l[Yl],Fl=-gl,Zl=$k.y+z.y*Fl,$l=$k.z+z.z*Fl;$k.x=$k.x+z.x*Fl;$k.y=Zl;$k.z=$l}}for(var Ml=!1,Nl=0,am=this.ya;Nl<am;){var Gl=Nl++,Ol=l[Gl].x-l[this.ya].x,Pl=l[Gl].y-l[this.ya].y,Ql=l[Gl].z-l[this.ya].z;if(1E-8>Ol*Ol+Pl*Pl+Ql*Ql){Ml=!0;break}}Ml||this.ya++;++u}return!1},im:function(){switch(this.ya){case 1:var a=this.closestPoint1,b=this.cb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,d=this.lb[0];e.x=d.x;e.y=d.y;e.z=d.z;break;case 2:var c,f,h,l=this.closest;c=l.x;f=l.y;h=l.z;var g,k,m,n,q,p,r,v,aa,w,A,u,D,t,z,E,x,yb,N=this.Oa[0];g=N.x;k=N.y;m=N.z;var G=this.cb[0];n=G.x;q=G.y;p=G.z;var F=this.lb[0];r=F.x;v=F.y;aa=F.z;var C=this.Oa[1];w=C.x;A=C.y;u=C.z;var O=this.cb[1];D=O.x;t=O.y;z=O.z;var ga=this.lb[1];E=ga.x;x=ga.y;yb=ga.z;var L,Vb,M;L=w-g;Vb=A-k;M=u-m;var ka=L*L+Vb*Vb+M*M;ka&&(ka=1/ka);var Oa=((c-g)*L+(f-k)*Vb+(h-m)*M)*ka,U,R,Wb,Ma,Ra,vc,Pa,Aa,zb;U=D-n;R=t-q;Wb=z-p;Ma=n+U*Oa;Ra=q+R*Oa;vc=p+Wb*Oa;U=E-r;R=x-v;Wb=yb-aa;Pa=r+U*Oa;Aa=v+R*Oa;zb=aa+Wb*Oa;var J=this.closestPoint1;J.x=Ma;J.y=Ra;J.z=vc;var Qa=this.closestPoint2;Qa.x=Pa;Qa.y=Aa;Qa.z=zb;break;case 3:var ba,Q,P,wa=this.closest;ba=wa.x;Q=wa.y;P=wa.z;var ta,W,oa,y,Ha,ca,Ca,xa,Da,Sa,la,Z,Ea,qa,va,I,Ka,Xa,S,Ya,T,K,ia,fb,da,Ic,sa,eb=this.Oa[0];ta=eb.x;W=eb.y;oa=eb.z;var jb=this.cb[0];y=jb.x;Ha=jb.y;ca=jb.z;var Za=this.lb[0];Ca=Za.x;xa=Za.y;Da=Za.z;var ma=this.Oa[1];Sa=ma.x;la=ma.y;Z=ma.z;var na=this.cb[1];Ea=na.x;qa=na.y;va=na.z;var Ia=this.lb[1];I=Ia.x;Ka=Ia.y;Xa=Ia.z;var Fa=this.Oa[2];S=Fa.x;Ya=Fa.y;T=Fa.z;var ob=this.cb[2];K=ob.x;ia=ob.y;fb=ob.z;var fa=this.lb[2];da=fa.x;Ic=fa.y;sa=fa.z;var ea,ja,bb,ya,tb,Ua,qb,rb,ub;ea=Sa-ta;ja=la-W;bb=Z-oa;ya=S-ta;tb=Ya-W;Ua=T-oa;qb=ba-ta;rb=Q-W;ub=P-oa;var Va=ea*ea+ja*ja+bb*bb,Db=ea*ya+ja*tb+bb*Ua,mc=ya*ya+tb*tb+Ua*Ua,$a=ea*qb+ja*rb+bb*ub,ua=ya*qb+tb*rb+Ua*ub,Gb=Va*mc-Db*Db;Gb&&(Gb=1/Gb);var H=($a*mc-ua*Db)*Gb,pb=(-$a*Db+ua*Va)*Gb,cb,rc,ab,gb,B,Bb,Xd,Tc,Eb;cb=Ea-y;rc=qa-Ha;ab=va-ca;gb=y+cb*H;B=Ha+rc*H;Bb=ca+ab*H;cb=K-y;rc=ia-Ha;ab=fb-ca;gb+=cb*pb;B+=rc*pb;Bb+=ab*pb;cb=I-Ca;rc=Ka-xa;ab=Xa-Da;Xd=Ca+cb*H;Tc=xa+rc*H;Eb=Da+ab*H;cb=da-Ca;rc=Ic-xa;ab=sa-Da;Xd+=cb*pb;Tc+=rc*pb;Eb+=ab*pb;var Na=this.closestPoint1;Na.x=gb;Na.y=B;Na.z=Bb;var nb=this.closestPoint2;nb.x=Xd;nb.y=Tc;nb.z=Eb;break;default:throw Error("!?");}},Bn:function(a){var b=this.dir;a=a.ql;b.x=a.x;b.y=a.y;b.z=a.z},In:function(a){a=a.ql;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;var b=-a.y,e=-a.z;a.x=-a.x;a.y=b;a.z=e},ym:function(a){this.ya=a;this.ya=(this.ya&5)+(this.ya>>1&5);this.ya=(this.ya&3)+(this.ya>>2&3);switch(a){case 2:a=this.Oa[0];var b=this.Oa[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[0];b=this.cb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[0];b=this.lb[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.Oa[0];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[0];b=this.cb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[0];b=this.lb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.Oa[1];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[1];b=this.cb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[1];b=this.lb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.Oa[0];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[0];b=this.cb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[0];b=this.lb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.Oa[0];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[0];b=this.cb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[0];b=this.lb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.Oa[1];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[1];b=this.cb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[1];b=this.lb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.Oa[0];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[0];b=this.cb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[0];b=this.lb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.Oa[2];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[2];b=this.cb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[2];b=this.lb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.Oa[0];b=this.Oa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[0];b=this.cb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[0];b=this.lb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.Oa[1];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[1];b=this.cb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[1];b=this.lb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.Oa[1];b=this.Oa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.cb[1];b=this.cb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.lb[1];b=this.lb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.Oa[0],b=this.Oa[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.cb[0],b=this.cb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.lb[0],b=this.lb[3],a.x=b.x,a.y=b.y,a.z=b.z}},pf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;e=this.pc.o*c+this.pc.i*f+this.pc.l*h;l=this.pc.f*c+this.pc.m*f+this.pc.g*h;b=this.pc.h*c+this.pc.j*f+this.pc.s*h;d=this.dir;d.x=e;d.y=l;d.z=b;this.hj.Ld(this.dir,this.cb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.cb[this.ya],b=this.dir,e=this.hj.ec,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.cb[this.ya];b=a.x;e=a.y;d=a.z;l=this.pc.o*b+this.pc.f*e+this.pc.h*d;a=this.pc.i*b+this.pc.m*e+this.pc.j*d;e=this.pc.l*b+this.pc.g*e+this.pc.s*d;b=l+this.pc.v;a+=this.pc.A;e+=this.pc.B;l=this.cb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},qf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;b=this.Gc.o*c+this.Gc.i*f+this.Gc.l*h;e=this.Gc.f*c+this.Gc.m*f+this.Gc.g*h;l=this.Gc.h*c+this.Gc.j*f+this.Gc.s*h;d=this.dir;d.x=-b;d.y=-e;d.z=-l;this.Sk.Ld(this.dir,this.lb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.lb[this.ya],b=this.dir,e=this.Sk.ec,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.lb[this.ya];b=a.x;e=a.y;d=a.z;l=this.Gc.o*b+this.Gc.f*e+this.Gc.h*d;a=this.Gc.i*b+this.Gc.m*e+this.Gc.j*d;e=this.Gc.l*b+this.Gc.g*e+this.Gc.s*d;b=l+this.Gc.v;a+=this.Gc.A;e+=this.Gc.B;l=this.lb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},Dn:function(){for(var a=0;3>a;){var b=a++,e=this.dir,b=this.fj[b];e.x=b.x;e.y=b.y;e.z=b.z;this.pf(!1);this.qf(!1);e=this.Oa[this.ya];b=this.cb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;var b=this.lb[this.ya],d=e.y-b.y,c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.ya++;this.ml();if(4==this.ya)break;this.ya--;e=this.dir;b=-e.y;d=-e.z;e.x=-e.x;e.y=b;e.z=d;this.pf(!1);this.qf(!1);e=this.Oa[this.ya];b=this.cb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;b=this.lb[this.ya];d=e.y-b.y;c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.ya++;this.ml();if(4==this.ya)break;this.ya--}},ml:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var d,c,f,h,l,g;f=this.Oa[0];d=f.x;c=f.y;f=f.z;g=this.Oa[1];h=g.x;l=g.y;g=g.z;d-=h;c-=l;f-=g;for(l=0;3>l;){g=l++;var k,m;g=this.fj[g];h=g.x;k=g.y;m=g.z;g=c*m-f*k;m=f*h-d*m;h=d*k-c*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.pf(!1);this.qf(!1);g=this.Oa[this.ya];h=this.cb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.lb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.tl();if(4==this.ya)break;this.ya--;g=this.dir;h=-g.y;k=-g.z;g.x=-g.x;g.y=h;g.z=k;this.pf(!1);this.qf(!1);g=this.Oa[this.ya];h=this.cb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.lb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.tl();if(4==this.ya)break;this.ya--}d=this.dir;d.x=a;d.y=b;d.z=e},tl:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var d,c,f,h,l,g,k,m,n;f=this.Oa[0];d=f.x;c=f.y;f=f.z;m=this.Oa[1];h=m.x;l=m.y;g=m.z;n=this.Oa[2];k=n.x;m=n.y;n=n.z;h-=d;l-=c;g-=f;d=k-d;c=m-c;m=n-f;f=l*m-g*c;m=g*d-h*m;c=h*c-l*d;h=this.dir;h.x=f;h.y=m;h.z=c;this.pf(!1);this.qf(!1);c=this.Oa[this.ya];f=this.cb[this.ya];c.x=f.x;c.y=f.y;c.z=f.z;f=this.lb[this.ya];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.ya++;if(this.jm())break;this.ya--;c=this.dir;f=-c.y;h=-c.z;c.x=-c.x;c.y=f;c.z=h;this.pf(!1);this.qf(!1);c=this.Oa[this.ya];f=this.cb[this.ya];c.x=f.x;c.y=f.y;c.z=f.z;f=this.lb[this.ya];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.ya++;if(this.jm())break;this.ya--;break}c=this.dir;c.x=a;c.y=b;c.z=e},jm:function(){var a=this.Oa[2].x-this.Oa[0].x,b=this.Oa[2].y-this.Oa[0].y,e=this.Oa[2].z-this.Oa[0].z,d=this.Oa[3].x-this.Oa[0].x,c=this.Oa[3].y-this.Oa[0].y,f=this.Oa[3].z-this.Oa[0].z,a=(this.Oa[1].x-this.Oa[0].x)*(b*f-e*c)-(this.Oa[1].y-this.Oa[0].y)*(a*f-e*d)+(this.Oa[1].z-this.Oa[0].z)*(a*c-b*d);return 1E-12<a?!0:-1E-12>a},Ym:function(a,b,e,d,c,f,h){for(var l=this.Fg;0<l.ah;){var g=l.Vc;l.ah--;var k=g.ia,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ia=k);g==l.Vc&&(l.Vc=l.Vc.M);g==l.Fc&&(l.Fc=l.Fc.ia);g.M=null;g.ia=null;g.$j();g.M=l.ve;l.ve=g}if(null!=l.Vc)throw Error("assertion error: _triangleList == null is false");if(null!=l.Fc)throw Error("assertion error: _triangleListLast == null is false");for(;0<l.Ae;){var n=l.yb[--l.Ae];n.$j();n.M=l.Re;l.Re=n}var q=this.Fg,p=this.Fg,r=p.Re;null!=r?(p.Re=r.M,r.M=null):r=new Yc;var v=r.za(c[0],f[0],h[0]),aa=this.Fg,w=aa.Re;null!=w?(aa.Re=w.M,w.M=null):w=new Yc;var A=w.za(c[1],f[1],h[1]),u=this.Fg,D=u.Re;null!=D?(u.Re=D.M,D.M=null):D=new Yc;var t=D.za(c[2],f[2],h[2]),z=this.Fg,E=z.Re;null!=E?(z.Re=E.M,E.M=null):E=new Yc;if(!q.Vg(v,A,t,E.za(c[3],f[3],h[3])))return lc.EPA_FAILED_TO_INIT;this.ya=0;for(var x=this.Oa[0],yb=this.cb[0],N=this.lb[0],G=0;40>G;){for(var F=this.Fg.Vc,C=1/0,O=null;null!=F;){var ga=F.M;F.Ej<C&&(C=F.Ej,O=F);F=ga}var L=O,M=this.dir,rl=L.Lj;M.x=rl.x;M.y=rl.y;M.z=rl.z;var ka=M,Oa=Math.sqrt(ka.x*ka.x+ka.y*ka.y+ka.z*ka.z);0<Oa&&(Oa=1/Oa);var U=ka.y*Oa,R=ka.z*Oa;ka.x=ka.x*Oa;ka.y=U;ka.z=R;this.pf(!1);this.qf(!1);var Wb=this.Oa[this.ya],Ma=this.cb[this.ya];Wb.x=Ma.x;Wb.y=Ma.y;Wb.z=Ma.z;var Ra=Wb,vc=this.lb[this.ya],Pa=Ra.y-vc.y,Aa=Ra.z-vc.z;Ra.x=Ra.x-vc.x;Ra.y=Pa;Ra.z=Aa;var zb=L.yb[0],J=L.yb[1],Qa=L.yb[2],ba=zb.ud,Q=this.dir,P=this.dir;if(1E-6>x.x*P.x+x.y*P.y+x.z*P.z-(ba.x*Q.x+ba.y*Q.y+ba.z*Q.z)||39==G){var wa=this.closest,ta=this.dir;wa.x=ta.x;wa.y=ta.y;wa.z=ta.z;var W=wa,oa=this.dir,y=zb.ud,Ha=this.dir,ca=(oa.x*y.x+oa.y*y.y+oa.z*y.z)/(Ha.x*Ha.x+Ha.y*Ha.y+Ha.z*Ha.z),Ca=W.y*ca,xa=W.z*ca;W.x=W.x*ca;W.y=Ca;W.z=xa;var Da,Sa,la,Z=this.closest;Da=Z.x;Sa=Z.y;la=Z.z;var Ea,qa,va,I,Ka,Xa,S,Ya,T,K,ia,fb,da,Ic,sa,eb,jb,Za,ma,na,Ia,Fa,ob,fa,ea,ja,bb,ya=zb.ud;Ea=ya.x;qa=ya.y;va=ya.z;var tb=zb.cb;I=tb.x;Ka=tb.y;Xa=tb.z;var Ua=zb.lb;S=Ua.x;Ya=Ua.y;T=Ua.z;var qb=J.ud;K=qb.x;ia=qb.y;fb=qb.z;var rb=J.cb;da=rb.x;Ic=rb.y;sa=rb.z;var ub=J.lb;eb=ub.x;jb=ub.y;Za=ub.z;var Va=Qa.ud;ma=Va.x;na=Va.y;Ia=Va.z;var Db=Qa.cb;Fa=Db.x;ob=Db.y;fa=Db.z;var mc=Qa.lb;ea=mc.x;ja=mc.y;bb=mc.z;var $a,ua,Gb,H,pb,cb,rc,ab,gb;$a=K-Ea;ua=ia-qa;Gb=fb-va;H=ma-Ea;pb=na-qa;cb=Ia-va;rc=Da-Ea;ab=Sa-qa;gb=la-va;var B=$a*$a+ua*ua+Gb*Gb,Bb=$a*H+ua*pb+Gb*cb,Xd=H*H+pb*pb+cb*cb,Tc=$a*rc+ua*ab+Gb*gb,Eb=H*rc+pb*ab+cb*gb,Na=B*Xd-Bb*Bb;Na&&(Na=1/Na);var nb=(Tc*Xd-Eb*Bb)*Na,wb=(-Tc*Bb+Eb*B)*Na,xb,db,Y,La,kb,Ta,hb,Ja,Ib;xb=da-I;db=Ic-Ka;Y=sa-Xa;La=I+xb*nb;kb=Ka+db*nb;Ta=Xa+Y*nb;xb=Fa-I;db=ob-Ka;Y=fa-Xa;La+=xb*wb;kb+=db*wb;Ta+=Y*wb;xb=eb-S;db=jb-Ya;Y=Za-T;hb=S+xb*nb;Ja=Ya+db*nb;Ib=T+Y*nb;xb=ea-S;db=ja-Ya;Y=bb-T;hb+=xb*wb;Ja+=db*wb;Ib+=Y*wb;var ha=this.closestPoint1;ha.x=La;ha.y=kb;ha.z=Ta;var X=this.closestPoint2;X.x=hb;X.y=Ja;X.z=Ib;var Ab=this.closest;this.depth=Math.sqrt(Ab.x*Ab.x+Ab.y*Ab.y+Ab.z*Ab.z);return lc.SUCCEEDED}var Dc=this.Fg,Pc=Dc.Re;null!=Pc?(Dc.Re=Pc.M,Pc.M=null):Pc=new Yc;var ra=Pc.za(x,yb,N);if(!this.Fg.Hm(ra,L))return lc.EPA_FAILED_TO_ADD_VERTEX;++G}return lc.EPA_DID_NOT_CONVERGE},Pa:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!0)},ab:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!1)},rf:function(a,b,e,d,c,f,h){return this.Vl(a,b,e,d,c,f,h)},Sd:function(a,b,e,d,c){var f=this.Mn;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.Nn,l=this.On;h.x=d.x;h.y=d.y;h.z=d.z;d=h.y-e.y;var g=h.z-e.z;h.x=h.x-e.x;h.y=d;h.z=g;l.O();return this.Vl(null,a,f,b,h,l,c)},qa:Rb};lc.R=!0;fd.R=!0;fd.bd=function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-d;g=h-c;k=b-a;var m;m=-(l*d+g*c+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=d,e.y=c,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=d+l*m;e.y=c+g*m;e.z=a+k*m;return 3};fd.cd=function(a,b,e,d){var c,f,h,l,g,k,m,n,q,p,r,v,aa,w,A,u,D,t;c=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;n=e.y;q=e.z;p=l-c;r=g-f;v=k-h;aa=m-l;w=n-g;A=q-k;u=c-m;D=f-n;t=h-q;var z,E,x;z=r*A-v*w;E=v*aa-p*A;x=p*w-r*aa;var yb=-1,N,G,F,C=0;F=G=N=0;if(0>c*(r*x-v*E)+f*(v*z-p*x)+h*(p*E-r*z)){var L;p=a.x;yb=a.y;N=a.z;r=b.x;v=b.y;L=b.z;var ga;ga=r-p;F=v-yb;G=L-N;C=-(ga*p+F*yb+G*N)/(ga*ga+F*F+G*G);0>C?(d.x=p,d.y=yb,d.z=N,G=1):1<C?(d.x=r,d.y=v,d.z=L,G=2):(p+=ga*C,yb+=F*C,N+=G*C,d.x=p,d.y=yb,d.z=N,G=3);N=d.x*d.x+d.y*d.y+d.z*d.z;C=G;yb=N;N=d.x;G=d.y;F=d.z}0>l*(w*x-A*E)+g*(A*z-aa*x)+k*(aa*E-w*z)&&(aa=b.x,l=b.y,b=b.z,A=e.x,p=e.y,r=e.z,v=A-aa,w=p-l,g=r-b,k=-(v*aa+w*l+g*b)/(v*v+w*w+g*g),0>k?(d.x=aa,d.y=l,d.z=b,b=1):1<k?(d.x=A,d.y=p,d.z=r,b=2):(aa+=v*k,l+=w*k,b+=g*k,d.x=aa,d.y=l,d.z=b,b=3),l=d.x*d.x+d.y*d.y+d.z*d.z,0>yb||l<yb)&&(C=b<<1,yb=l,N=d.x,G=d.y,F=d.z);0>m*(D*x-t*E)+n*(t*z-u*x)+q*(u*E-D*z)&&(n=a.x,m=a.y,a=a.z,u=e.x,D=e.y,b=e.z,l=u-n,t=D-m,e=b-a,q=-(l*n+t*m+e*a)/(l*l+t*t+e*e),0>q?(d.x=n,d.y=m,d.z=a,e=1):1<q?(d.x=u,d.y=D,d.z=b,e=2):(n+=l*q,m+=t*q,e=a+e*q,d.x=n,d.y=m,d.z=e,e=3),a=d.x*d.x+d.y*d.y+d.z*d.z,0>yb||a<yb)&&(C=e&1|(e&2)<<1,yb=a,N=d.x,G=d.y,F=d.z);if(0<yb)return d.x=N,d.y=G,d.z=F,C;e=z*z+E*E+x*x;0<e&&(e=1/Math.sqrt(e));z*=e;E*=e;x*=e;c=(c*z+f*E+h*x)/(z*z+E*E+x*x);N=z*c;G=E*c;F=x*c;d.x=N;d.y=G;d.z=F;return 7};fd.Pd=function(a,b,e,d,c){var f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,V,z,E,x,yb,N,G,F,C,L,ga;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;n=e.x;q=e.y;p=e.z;r=d.x;v=d.y;t=d.z;w=g-f;A=k-h;u=m-l;D=n-f;V=q-h;z=p-l;E=r-f;x=v-h;yb=t-l;N=n-g;G=q-k;F=p-m;C=r-g;L=v-k;ga=t-m;var O,M,ha,ka,Oa,U,R,Wb,Ma,Ra,vc,Pa;O=A*z-u*V;M=u*D-w*z;ha=w*V-A*D;ka=V*yb-z*x;Oa=z*E-D*yb;U=D*x-V*E;R=x*u-yb*A;Wb=yb*w-E*u;Ma=E*A-x*w;Ra=L*F-ga*G;vc=ga*N-C*F;Pa=C*G-L*N;var Aa=0<w*Ra+A*vc+u*Pa?1:-1,zb=f*O+h*M+l*ha,J=f*ka+h*Oa+l*U,Qa=f*R+h*Wb+l*Ma,ba=g*Ra+k*vc+m*Pa,Q=-1,P,wa,ta,W=0;ta=wa=P=0;if(0>zb*Aa){var oa,y,Ha,ca,Ca,xa,Da,Sa,la,Z,Ea,qa,va,I,Ka,Xa,S,Ya;oa=a.x;y=a.y;Ha=a.z;ca=b.x;Ca=b.y;xa=b.z;Da=e.x;Sa=e.y;la=e.z;Z=ca-oa;Ea=Ca-y;qa=xa-Ha;va=Da-ca;I=Sa-Ca;Ka=la-xa;Xa=oa-Da;S=y-Sa;Ya=Ha-la;var T,K,ia;T=Ea*Ka-qa*I;K=qa*va-Z*Ka;ia=Z*I-Ea*va;var fb=oa*(Ea*ia-qa*K)+y*(qa*T-Z*ia)+Ha*(Z*K-Ea*T),da=ca*(I*ia-Ka*K)+Ca*(Ka*T-va*ia)+xa*(va*K-I*T),Ic=Da*(S*ia-Ya*K)+Sa*(Ya*T-Xa*ia)+la*(Xa*K-S*T),sa=-1,eb,jb,Za,ma=0;Za=jb=eb=0;if(0>fb){var na,Ia,Fa,ob,fa,ea;na=a.x;Ia=a.y;Fa=a.z;ob=b.x;fa=b.y;ea=b.z;var ja,bb,ya;ja=ob-na;bb=fa-Ia;ya=ea-Fa;var tb=ja*na+bb*Ia+ya*Fa,tb=-tb/(ja*ja+bb*bb+ya*ya),Ua;if(0>tb)c.x=na,c.y=Ia,c.z=Fa,Ua=1;else if(1<tb)c.x=ob,c.y=fa,c.z=ea,Ua=2;else{var qb,rb,ub;qb=na+ja*tb;rb=Ia+bb*tb;ub=Fa+ya*tb;c.x=qb;c.y=rb;c.z=ub;Ua=3}var Va=c.x*c.x+c.y*c.y+c.z*c.z,ma=Ua,sa=Va;eb=c.x;jb=c.y;Za=c.z}if(0>da){var Db,mc,$a,ua,Gb,H;Db=b.x;mc=b.y;$a=b.z;ua=e.x;Gb=e.y;H=e.z;var pb,cb,rc;pb=ua-Db;cb=Gb-mc;rc=H-$a;var ab=pb*Db+cb*mc+rc*$a,ab=-ab/(pb*pb+cb*cb+rc*rc),gb;if(0>ab)c.x=Db,c.y=mc,c.z=$a,gb=1;else if(1<ab)c.x=ua,c.y=Gb,c.z=H,gb=2;else{var B,Bb,Xd;B=Db+pb*ab;Bb=mc+cb*ab;Xd=$a+rc*ab;c.x=B;c.y=Bb;c.z=Xd;gb=3}var Tc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||Tc<sa)ma=gb<<1,sa=Tc,eb=c.x,jb=c.y,Za=c.z}if(0>Ic){var Eb,Na,nb,wb,xb,db;Eb=a.x;Na=a.y;nb=a.z;wb=e.x;xb=e.y;db=e.z;var Y,La,kb;Y=wb-Eb;La=xb-Na;kb=db-nb;var Ta=Y*Eb+La*Na+kb*nb,Ta=-Ta/(Y*Y+La*La+kb*kb),hb;if(0>Ta)c.x=Eb,c.y=Na,c.z=nb,hb=1;else if(1<Ta)c.x=wb,c.y=xb,c.z=db,hb=2;else{var Ja,Ib,ra;Ja=Eb+Y*Ta;Ib=Na+La*Ta;ra=nb+kb*Ta;c.x=Ja;c.y=Ib;c.z=ra;hb=3}var X=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||X<sa)ma=hb&1|(hb&2)<<1,sa=X,eb=c.x,jb=c.y,Za=c.z}var Ab;if(0<sa)c.x=eb,c.y=jb,c.z=Za,Ab=ma;else{var Dc=T*T+K*K+ia*ia;0<Dc&&(Dc=1/Math.sqrt(Dc));T*=Dc;K*=Dc;ia*=Dc;var Pc=T*T+K*K+ia*ia,Pc=(oa*T+y*K+Ha*ia)/Pc;eb=T*Pc;jb=K*Pc;Za=ia*Pc;c.x=eb;c.y=jb;c.z=Za;Ab=7}var Ba=c.x*c.x+c.y*c.y+c.z*c.z,W=Ab,Q=Ba;P=c.x;wa=c.y;ta=c.z}if(0>J*Aa){var gc,Nc,za,pa,yc,Ga,jc,uc,kc,ac,Xb,Yb,Sb,hc,Tb,Pb,Zb,ic;gc=a.x;Nc=a.y;za=a.z;pa=e.x;yc=e.y;Ga=e.z;jc=d.x;uc=d.y;kc=d.z;ac=pa-gc;Xb=yc-Nc;Yb=Ga-za;Sb=jc-pa;hc=uc-yc;Tb=kc-Ga;Pb=gc-jc;Zb=Nc-uc;ic=za-kc;var Jb,$b,lb;Jb=Xb*Tb-Yb*hc;$b=Yb*Sb-ac*Tb;lb=ac*hc-Xb*Sb;var mb=gc*(Xb*lb-Yb*$b)+Nc*(Yb*Jb-ac*lb)+za*(ac*$b-Xb*Jb),sb=pa*(hc*lb-Tb*$b)+yc*(Tb*Jb-Sb*lb)+Ga*(Sb*$b-hc*Jb),Lb=jc*(Zb*lb-ic*$b)+uc*(ic*Jb-Pb*lb)+kc*(Pb*$b-Zb*Jb),sc=-1,nc,jd,rd,vb=0;rd=jd=nc=0;if(0>mb){var tc,wc,Wa,ib,Hb,Zc;tc=a.x;wc=a.y;Wa=a.z;ib=e.x;Hb=e.y;Zc=e.z;var Gc,Kb,Ue;Gc=ib-tc;Kb=Hb-wc;Ue=Zc-Wa;var Qb=Gc*tc+Kb*wc+Ue*Wa,Qb=-Qb/(Gc*Gc+Kb*Kb+Ue*Ue),Id;if(0>Qb)c.x=tc,c.y=wc,c.z=Wa,Id=1;else if(1<Qb)c.x=ib,c.y=Hb,c.z=Zc,Id=2;else{var Og,Nb,ec;Og=tc+Gc*Qb;Nb=wc+Kb*Qb;ec=Wa+Ue*Qb;c.x=Og;c.y=Nb;c.z=ec;Id=3}var bc=c.x*c.x+c.y*c.y+c.z*c.z,vb=Id,sc=bc;nc=c.x;jd=c.y;rd=c.z}if(0>sb){var Ac,Fb,fc,dc,Ub,Qc;Ac=e.x;Fb=e.y;fc=e.z;dc=d.x;Ub=d.y;Qc=d.z;var Mb,Rb,Cb;Mb=dc-Ac;Rb=Ub-Fb;Cb=Qc-fc;var oc=Mb*Ac+Rb*Fb+Cb*fc,oc=-oc/(Mb*Mb+Rb*Rb+Cb*Cb),pc;if(0>oc)c.x=Ac,c.y=Fb,c.z=fc,pc=1;else if(1<oc)c.x=dc,c.y=Ub,c.z=Qc,pc=2;else{var lc,cc,Ec;lc=Ac+Mb*oc;cc=Fb+Rb*oc;Ec=fc+Cb*oc;c.x=lc;c.y=cc;c.z=Ec;pc=3}var Fc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sc||Fc<sc)vb=pc<<1,sc=Fc,nc=c.x,jd=c.y,rd=c.z}if(0>Lb){var Bc,zc,Jc,Cc,qc,Kc;Bc=a.x;zc=a.y;Jc=a.z;Cc=d.x;qc=d.y;Kc=d.z;var xc,Ob,sd;xc=Cc-Bc;Ob=qc-zc;sd=Kc-Jc;var Uc=xc*Bc+Ob*zc+sd*Jc,Uc=-Uc/(xc*xc+Ob*Ob+sd*sd),Hc;if(0>Uc)c.x=Bc,c.y=zc,c.z=Jc,Hc=1;else if(1<Uc)c.x=Cc,c.y=qc,c.z=Kc,Hc=2;else{var Oc,gd,Rc;Oc=Bc+xc*Uc;gd=zc+Ob*Uc;Rc=Jc+sd*Uc;c.x=Oc;c.y=gd;c.z=Rc;Hc=3}var Df=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sc||Df<sc)vb=Hc&1|(Hc&2)<<1,sc=Df,nc=c.x,jd=c.y,rd=c.z}var Xc;if(0<sc)c.x=nc,c.y=jd,c.z=rd,Xc=vb;else{var Yc=Jb*Jb+$b*$b+lb*lb;0<Yc&&(Yc=1/Math.sqrt(Yc));Jb*=Yc;$b*=Yc;lb*=Yc;var ad=Jb*Jb+$b*$b+lb*lb,ad=(gc*Jb+Nc*$b+za*lb)/ad;nc=Jb*ad;jd=$b*ad;rd=lb*ad;c.x=nc;c.y=jd;c.z=rd;Xc=7}var md=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||md<Q)W=Xc&1|(Xc&6)<<1,Q=md,P=c.x,wa=c.y,ta=c.z}if(0>Qa*Aa){var td,fd,bd,id,dd,Jd,Mc,nd,od,hd,Lc,kd,ld,qd,wd,Vc,Wc,$c;td=a.x;fd=a.y;bd=a.z;id=b.x;dd=b.y;Jd=b.z;Mc=d.x;nd=d.y;od=d.z;hd=id-td;Lc=dd-fd;kd=Jd-bd;ld=Mc-id;qd=nd-dd;wd=od-Jd;Vc=td-Mc;Wc=fd-nd;$c=bd-od;var ud,cd,Sc;ud=Lc*wd-kd*qd;cd=kd*ld-hd*wd;Sc=hd*qd-Lc*ld;var Ee=td*(Lc*Sc-kd*cd)+fd*(kd*ud-hd*Sc)+bd*(hd*cd-Lc*ud),Ve=id*(qd*Sc-wd*cd)+dd*(wd*ud-ld*Sc)+Jd*(ld*cd-qd*ud),We=Mc*(Wc*Sc-$c*cd)+nd*($c*ud-Vc*Sc)+od*(Vc*cd-Wc*ud),Kd=-1,ed,ve,we,Fd=0;we=ve=ed=0;if(0>Ee){var xd,Gd,pd,Qd,Rd,Wd;xd=a.x;Gd=a.y;pd=a.z;Qd=b.x;Rd=b.y;Wd=b.z;var Ed,Nd,Fe;Ed=Qd-xd;Nd=Rd-Gd;Fe=Wd-pd;var yd=Ed*xd+Nd*Gd+Fe*pd,yd=-yd/(Ed*Ed+Nd*Nd+Fe*Fe),Hd;if(0>yd)c.x=xd,c.y=Gd,c.z=pd,Hd=1;else if(1<yd)c.x=Qd,c.y=Rd,c.z=Wd,Hd=2;else{var qe,re,se;qe=xd+Ed*yd;re=Gd+Nd*yd;se=pd+Fe*yd;c.x=qe;c.y=re;c.z=se;Hd=3}var Ce=c.x*c.x+c.y*c.y+c.z*c.z,Fd=Hd,Kd=Ce;ed=c.x;ve=c.y;we=c.z}if(0>Ve){var Xe,Dd,Sd,ee,pe,te;Xe=b.x;Dd=b.y;Sd=b.z;ee=d.x;pe=d.y;te=d.z;var Ye,Ze,$e;Ye=ee-Xe;Ze=pe-Dd;$e=te-Sd;var $d=Ye*Xe+Ze*Dd+$e*Sd,$d=-$d/(Ye*Ye+Ze*Ze+$e*$e),fe;if(0>$d)c.x=Xe,c.y=Dd,c.z=Sd,fe=1;else if(1<$d)c.x=ee,c.y=pe,c.z=te,fe=2;else{var Qe,Te,pf;Qe=Xe+Ye*$d;Te=Dd+Ze*$d;pf=Sd+$e*$d;c.x=Qe;c.y=Te;c.z=pf;fe=3}var Ef=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Kd||Ef<Kd)Fd=fe<<1,Kd=Ef,ed=c.x,ve=c.y,we=c.z}if(0>We){var Ff,Gf,ue,Se,Wf,Xf;Ff=a.x;Gf=a.y;ue=a.z;Se=d.x;Wf=d.y;Xf=d.z;var af,Yf,Hf;af=Se-Ff;Yf=Wf-Gf;Hf=Xf-ue;var xe=af*Ff+Yf*Gf+Hf*ue,xe=-xe/(af*af+Yf*Yf+Hf*Hf),bf;if(0>xe)c.x=Ff,c.y=Gf,c.z=ue,bf=1;else if(1<xe)c.x=Se,c.y=Wf,c.z=Xf,bf=2;else{var Zf,$f,ag;Zf=Ff+af*xe;$f=Gf+Yf*xe;ag=ue+Hf*xe;c.x=Zf;c.y=$f;c.z=ag;bf=3}var bg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Kd||bg<Kd)Fd=bf&1|(bf&2)<<1,Kd=bg,ed=c.x,ve=c.y,we=c.z}var Ge;if(0<Kd)c.x=ed,c.y=ve,c.z=we,Ge=Fd;else{var He=ud*ud+cd*cd+Sc*Sc;0<He&&(He=1/Math.sqrt(He));ud*=He;cd*=He;Sc*=He;var cf=ud*ud+cd*cd+Sc*Sc,cf=(td*ud+fd*cd+bd*Sc)/cf;ed=ud*cf;ve=cd*cf;we=Sc*cf;c.x=ed;c.y=ve;c.z=we;Ge=7}var cg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||cg<Q)W=Ge&3|(Ge&4)<<1,Q=cg,P=c.x,wa=c.y,ta=c.z}if(0>ba*Aa){var qf,Ie,rf,dg,Ne,Oe,Pe,Re,df,sf,If,De,Jf,ge,ye,Kf,Cf,eg;qf=b.x;Ie=b.y;rf=b.z;dg=e.x;Ne=e.y;Oe=e.z;Pe=d.x;Re=d.y;df=d.z;sf=dg-qf;If=Ne-Ie;De=Oe-rf;Jf=Pe-dg;ge=Re-Ne;ye=df-Oe;Kf=qf-Pe;Cf=Ie-Re;eg=rf-df;var zd,Ad,Bd;zd=If*ye-De*ge;Ad=De*Jf-sf*ye;Bd=sf*ge-If*Jf;var Ng=qf*(If*Bd-De*Ad)+Ie*(De*zd-sf*Bd)+rf*(sf*Ad-If*zd),fg=dg*(ge*Bd-ye*Ad)+Ne*(ye*zd-Jf*Bd)+Oe*(Jf*Ad-ge*zd),gg=Pe*(Cf*Bd-eg*Ad)+Re*(eg*zd-Kf*Bd)+df*(Kf*Ad-Cf*zd),ae=-1,he,ie,be,tf=0;be=ie=he=0;if(0>Ng){var ef,ff,gf,Lf,Sf,Td;ef=b.x;ff=b.y;gf=b.z;Lf=e.x;Sf=e.y;Td=e.z;var Ld,Md,of;Ld=Lf-ef;Md=Sf-ff;of=Td-gf;var Mf=Ld*ef+Md*ff+of*gf,Mf=-Mf/(Ld*Ld+Md*Md+of*of),Yd;if(0>Mf)c.x=ef,c.y=ff,c.z=gf,Yd=1;else if(1<Mf)c.x=Lf,c.y=Sf,c.z=Td,Yd=2;else{var vd,Cd,hg;vd=ef+Ld*Mf;Cd=ff+Md*Mf;hg=gf+of*Mf;c.x=vd;c.y=Cd;c.z=hg;Yd=3}var Ch=c.x*c.x+c.y*c.y+c.z*c.z,tf=Yd,ae=Ch;he=c.x;ie=c.y;be=c.z}if(0>fg){var ig,Zd,ce,ze,hf,jg;ig=e.x;Zd=e.y;ce=e.z;ze=d.x;hf=d.y;jg=d.z;var jf,kf,lf;jf=ze-ig;kf=hf-Zd;lf=jg-ce;var Ae=jf*ig+kf*Zd+lf*ce,Ae=-Ae/(jf*jf+kf*kf+lf*lf),uf;if(0>Ae)c.x=ig,c.y=Zd,c.z=ce,uf=1;else if(1<Ae)c.x=ze,c.y=hf,c.z=jg,uf=2;else{var kg,vf,wg;kg=ig+jf*Ae;vf=Zd+kf*Ae;wg=ce+lf*Ae;c.x=kg;c.y=vf;c.z=wg;uf=3}var lg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>ae||lg<ae)tf=uf<<1,ae=lg,he=c.x,ie=c.y,be=c.z}if(0>gg){var mf,wf,Je,xg,yg,Tf;mf=b.x;wf=b.y;Je=b.z;xg=d.x;yg=d.y;Tf=d.z;var mg,xf,yf;mg=xg-mf;xf=yg-wf;yf=Tf-Je;var Be=mg*mf+xf*wf+yf*Je,Be=-Be/(mg*mg+xf*xf+yf*yf),zg;if(0>Be)c.x=mf,c.y=wf,c.z=Je,zg=1;else if(1<Be)c.x=xg,c.y=yg,c.z=Tf,zg=2;else{var sg,ng,og;sg=mf+mg*Be;ng=wf+xf*Be;og=Je+yf*Be;c.x=sg;c.y=ng;c.z=og;zg=3}var pg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>ae||pg<ae)tf=zg&1|(zg&2)<<1,ae=pg,he=c.x,ie=c.y,be=c.z}var Nf;if(0<ae)c.x=he,c.y=ie,c.z=be,Nf=tf;else{var Ke=zd*zd+Ad*Ad+Bd*Bd;0<Ke&&(Ke=1/Math.sqrt(Ke));zd*=Ke;Ad*=Ke;Bd*=Ke;var nf=zd*zd+Ad*Ad+Bd*Bd,nf=(qf*zd+Ie*Ad+rf*Bd)/nf;he=zd*nf;ie=Ad*nf;be=Bd*nf;c.x=he;c.y=ie;c.z=be;Nf=7}var zf=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||zf<Q)W=Nf<<1,Q=zf,P=c.x,wa=c.y,ta=c.z}if(0<Q)return c.x=P,c.y=wa,c.z=ta,W;c.O();return 15};O.R=!0;O.prototype={za:function(a,b,e,d,c,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Mf:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},zc:function(a){return new O(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},Kg:function(a){return new O(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},Bf:function(a){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},de:function(a){return new O(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Cc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e10+a.e10,c=this.e11+a.e11,f=this.e12+a.e12,h=this.e20+a.e20,l=this.e21+a.e21,g=this.e22+a.e22;this.e00+=a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Lg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e10-a.e10,c=this.e11-a.e11,f=this.e12-a.e12,h=this.e20-a.e20,l=this.e21-a.e21,g=this.e22-a.e22;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Jg:function(a){var b=this.e01*a,e=this.e02*a,d=this.e10*a,c=this.e11*a,f=this.e12*a,h=this.e20*a,l=this.e21*a,g=this.e22*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},ee:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,c=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Ge:function(a,b,e){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},bd:function(a,b,e){return new O(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},fe:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22)},Hc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d)},He:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e10*b,h=this.e11*b;b=this.e12*b;var l=this.e20*e,g=this.e21*e;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},cd:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e10*a,h=this.e11*b,l=this.e12*e,g=this.e20*a;b=this.e21*b;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},me:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;h=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;e=a*this.e02+l*this.e12+g*this.e22;c=k*this.e00+m*this.e10+n*this.e20;f=k*this.e01+m*this.e11+n*this.e21;k=k*this.e02+m*this.e12+n*this.e22;m=q*this.e00+b*this.e10+h*this.e20;n=q*this.e01+b*this.e11+h*this.e21;q=q*this.e02+b*this.e12+h*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=k;this.e20=m;this.e21=n;this.e22=q;return this},ad:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e10*a+this.e11*k+this.e12*q,f=this.e10*l+this.e11*m+this.e12*b,h=this.e10*g+this.e11*n+this.e12*p,r=this.e20*a+this.e21*k+this.e22*q,l=this.e20*l+this.e21*m+this.e22*b,g=this.e20*g+this.e21*n+this.e22*p;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=h;this.e20=r;this.e21=l;this.e22=g;return this},bi:function(){return new O(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},ci:function(){var a=this.e10,b=this.e20,e=this.e01,d=this.e11,c=this.e21,f=this.e02,h=this.e12,l=this.e22;this.e00=this.e00;this.e01=a;this.e02=b;this.e10=e;this.e11=d;this.e12=c;this.e20=f;this.e21=h;this.e22=l;return this},Pd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Ng:function(){return this.e00+this.e11+this.e22},be:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);return new O(a*k,-d*k,h*k,-b*k,c*k,-l*k,e*k,-f*k,g*k)},ce:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);this.e00=a*k;this.e01=-d*k;this.e02=h*k;this.e10=-b*k;this.e11=c*k;this.e12=-l*k;this.e20=e*k;this.e21=-f*k;this.e22=g*k;return this},Mg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new O(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},sb:function(a){var b=a.x,e=a.y,d=a.z,c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h,d=d*l,k=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;this.e00=1-g-d;this.e01=k-c;this.e02=b+h;this.e10=k+c;this.e11=1-a-d;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},xj:function(){var a=new ha,b=this.e00,e=this.e11,d=this.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},ab:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),d=Math.sin(a.z),c=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*d;this.e02=e;this.e10=c*d+a*b*e;this.e11=c*a-b*e*d;this.e12=-f*b;this.e20=b*d-c*a*e;this.e21=a*b+c*e*d;this.e22=c*f;return this},di:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,1.570796326794895,.5*a)):new t(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},qc:function(a){return 0==a?new t(this.e00,this.e01,this.e02):1==a?new t(this.e10,this.e11,this.e12):2==a?new t(this.e20,this.e21,this.e22):null},kc:function(a){return 0==a?new t(this.e00,this.e10,this.e20):1==a?new t(this.e01,this.e11,this.e21):2==a?new t(this.e02,this.e12,this.e22):null},rc:function(a,b){0==a?b.za(this.e00,this.e01,this.e02):1==a?b.za(this.e10,this.e11,this.e12):2==a?b.za(this.e20,this.e21,this.e22):b.O()},lc:function(a,b){0==a?b.za(this.e00,this.e10,this.e20):1==a?b.za(this.e01,this.e11,this.e21):2==a?b.za(this.e02,this.e12,this.e22):b.O()},Kb:function(a,b,e){var d=a.y,c=a.z,f=b.x,h=b.y;b=b.z;var l=e.x,g=e.y;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},Pa:function(a,b,e){var d=b.x,c=e.x,f=a.y,h=b.y,l=e.y,g=a.z;b=b.z;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"},qa:O};M.R=!0;M.prototype={za:function(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Mf:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},kc:function(a){return new M(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},Bf:function(a){return new M(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},Ge:function(a){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},Pd:function(a){return new M(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},lc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e03+a.e03,c=this.e10+a.e10,f=this.e11+a.e11,h=this.e12+a.e12,l=this.e13+a.e13,g=this.e20+a.e20,k=this.e21+a.e21,m=this.e22+a.e22,n=this.e23+a.e23,q=this.e30+a.e30,p=this.e31+a.e31,r=this.e32+a.e32,v=this.e33+a.e33;this.e00+=a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Jg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e03-a.e03,c=this.e10-a.e10,f=this.e11-a.e11,h=this.e12-a.e12,l=this.e13-a.e13,g=this.e20-a.e20,k=this.e21-a.e21,m=this.e22-a.e22,n=this.e23-a.e23,q=this.e30-a.e30,p=this.e31-a.e31,r=this.e32-a.e32,v=this.e33-a.e33;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},He:function(a){var b=this.e01*a,e=this.e02*a,d=this.e03*a,c=this.e10*a,f=this.e11*a,h=this.e12*a,l=this.e13*a,g=this.e20*a,k=this.e21*a,m=this.e22*a,n=this.e23*a,q=this.e30*a,p=this.e31*a,r=this.e32*a,v=this.e33*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},be:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,d=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,n=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,q=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,p=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,r=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,v=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},fe:function(a,b,e){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},zc:function(a,b,e){return new M(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},de:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,k*this.e03+m*this.e13+n*this.e23,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22,q*this.e03+b*this.e13+d*this.e23,this.e30,this.e31,this.e32,this.e33)},qc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e03,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e13,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d,this.e23,this.e30*a+this.e31*k+this.e32*q,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*n+this.e32*d,this.e33)},ci:function(a,b,e){return new M(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},Pa:function(a,b,e){return new M(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},me:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e03*a,h=this.e10*b,l=this.e11*b,g=this.e12*b;b=this.e13*b;var k=this.e20*e,m=this.e21*e,n=this.e22*e;e=this.e23*e;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Cc:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e03,h=this.e10*a,l=this.e11*b,g=this.e12*e,k=this.e13,m=this.e20*a,n=this.e21*b,q=this.e22*e,p=this.e23,r=this.e30*a;b=this.e31*b;e=this.e32*e;var v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=b;this.e32=e;this.e33=v;return this},ee:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c,p=d*e*h+b*c,r=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;b=a*this.e02+l*this.e12+g*this.e22;e=a*this.e03+l*this.e13+g*this.e23;var c=k*this.e00+m*this.e10+n*this.e20,f=k*this.e01+m*this.e11+n*this.e21,h=k*this.e02+m*this.e12+n*this.e22,k=k*this.e03+m*this.e13+n*this.e23,m=q*this.e00+p*this.e10+r*this.e20,n=q*this.e01+p*this.e11+r*this.e21,v=q*this.e02+p*this.e12+r*this.e22,q=q*this.e03+p*this.e13+r*this.e23,p=this.e30,r=this.e31,t=this.e32,w=this.e33;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=b;this.e03=e;this.e10=c;this.e11=f;this.e12=h;this.e13=k;this.e20=m;this.e21=n;this.e22=v;this.e23=q;this.e30=p;this.e31=r;this.e32=t;this.e33=w;return this},rc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e03,f=this.e10*a+this.e11*k+this.e12*q,h=this.e10*l+this.e11*m+this.e12*b,r=this.e10*g+this.e11*n+this.e12*p,v=this.e13,t=this.e20*a+this.e21*k+this.e22*q,w=this.e20*l+this.e21*m+this.e22*b,A=this.e20*g+this.e21*n+this.e22*p,u=this.e23,D=this.e30*a+this.e31*k+this.e32*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*n+this.e32*p,n=this.e33;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e03=c;this.e10=f;this.e11=h;this.e12=r;this.e13=v;this.e20=t;this.e21=w;this.e22=A;this.e23=u;this.e30=D;this.e31=l;this.e32=g;this.e33=n;return this},di:function(a,b,e){var d=this.e01+a*this.e31,c=this.e02+a*this.e32,f=this.e03+a*this.e33,h=this.e10+b*this.e30,l=this.e11+b*this.e31,g=this.e12+b*this.e32;b=this.e13+b*this.e33;var k=this.e20+e*this.e30,m=this.e21+e*this.e31,n=this.e22+e*this.e32;e=this.e23+e*this.e33;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00+=a*this.e30;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},ab:function(a,b,e){var d=this.e01,c=this.e02,f=this.e00*a+this.e01*b+this.e02*e+this.e03,h=this.e10,l=this.e11,g=this.e12,k=this.e10*a+this.e11*b+this.e12*e+this.e13,m=this.e20,n=this.e21,q=this.e22,p=this.e20*a+this.e21*b+this.e22*e+this.e23,r=this.e30,v=this.e31,t=this.e32;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=v;this.e32=t;this.e33=a;return this},Mg:function(){return new M(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Ng:function(){var a=this.e10,b=this.e20,e=this.e30,d=this.e01,c=this.e11,f=this.e21,h=this.e31,l=this.e02,g=this.e12,k=this.e22,m=this.e32,n=this.e03,q=this.e13,p=this.e23,r=this.e33;this.e00=this.e00;this.e01=a;this.e02=b;this.e03=e;this.e10=d;this.e11=c;this.e12=f;this.e13=h;this.e20=l;this.e21=g;this.e22=k;this.e23=m;this.e30=n;this.e31=q;this.e32=p;this.e33=r;return this},Hc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,d=this.e21*this.e32-this.e22*this.e31,c=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*c+this.e13*d)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*c-this.e11*e+this.e13*a)-this.e03*(this.e10*d-this.e11*b+this.e12*a)},Lg:function(){return this.e00+this.e11+this.e22+this.e33},bd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,A=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);return new M(q*b,-t*b,l*b,-A*b,-p*b,n*b,-k*b,f*b,r*b,-g*b,m*b,-e*b,-v*b,h*b,-w*b,a*b)},cd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,A=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);this.e00=q*b;this.e01=-t*b;this.e02=l*b;this.e03=-A*b;this.e10=-p*b;this.e11=n*b;this.e12=-k*b;this.e13=f*b;this.e20=r*b;this.e21=-g*b;this.e22=m*b;this.e23=-e*b;this.e30=-v*b;this.e31=h*b;this.e32=-w*b;this.e33=a*b;return this},Kb:function(a,b,e,d,c,f,h,l,g){d=a-d;c=b-c;f=e-f;var k=1/Math.sqrt(d*d+c*c+f*f);d*=k;c*=k;f*=k;var m=l*f-g*c;g=g*d-h*f;h=h*c-l*d;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=c*h-f*g;var k=f*m-d*h,n=d*g-c*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=n;this.e13=-(l*a+k*b+n*e);this.e20=d;this.e21=c;this.e22=f;this.e23=-(d*a+c*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},ce:function(a,b,e,d){a=1/Math.tan(.5*a);d/=e-d;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},bi:function(a,b,e,d){d=1/(e-d);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e33=this.e32=this.e31=this.e30=0;return this},Kg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},ad:function(a){var b=a.e01,e=a.e02,d=a.e10,c=a.e11,f=a.e12,h=a.e20,l=a.e21,g=a.e22;this.e00=a.e00;this.e01=b;this.e02=e;this.e03=0;this.e10=d;this.e11=c;this.e12=f;this.e13=0;this.e20=h;this.e21=l;this.e22=g;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},sb:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new M(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"},qa:M};Ba.R=!0;Ba.abs=function(a){return 0<a?a:-a};Ba.sin=function(a){return Math.sin(a)};Ba.cos=function(a){return Math.cos(a)};Ba.tan=function(a){return Math.tan(a)};Ba.asin=function(a){return Math.asin(a)};Ba.acos=function(a){return Math.acos(a)};Ba.atan=function(a){return Math.atan(a)};Ba.fe=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};Ba.ee=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};Ba.atan2=function(a,b){return Math.atan2(a,b)};Ba.sqrt=function(a){return Math.sqrt(a)};Ba.zc=function(a,b,e){return a<b?b:a>e?e:a};Ba.be=function(){return Math.random()};Ba.ce=function(a,b){return a+Math.random()*(b-a)};Ba.de=function(a,b){return new t(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};Fb.R=!0;Fb.prototype={zc:function(){return 0==this.c?new t:this.b[--this.c]},lc:function(){return 0==this.pb?new O:this.kb[--this.pb]},qc:function(){return 0==this.Uf?new M:this.zf[--this.Uf]},rc:function(){return 0==this.$d?new ha:this.Td[--this.$d]},Pa:function(a,b,e,d){if(null!=a){a.O();if(this.c==this.b.length){for(var c=Array(this.c<<1),f=0,h=this.c;f<h;){var l=f++;c[l]=this.b[l];this.b[l]=null}this.b=c}this.b[this.c++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.pb==this.kb.length){a=Array(this.pb<<1);c=0;for(f=this.pb;c<f;)h=c++,a[h]=this.kb[h],this.kb[h]=null;this.kb=a}this.kb[this.pb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.Uf==this.zf.length){b=Array(this.Uf<<1);a=0;for(c=this.Uf;a<c;)f=a++,b[f]=this.zf[f],this.zf[f]=null;this.zf=b}this.zf[this.Uf++]=e}if(null!=d){d.x=0;d.y=0;d.z=0;d.w=1;if(this.$d==this.Td.length){e=Array(this.$d<<1);b=0;for(a=this.$d;b<a;)c=b++,e[c]=this.Td[c],this.Td[c]=null;this.Td=e}this.Td[this.$d++]=d}},kc:function(a){a.O();if(this.c==this.b.length){for(var b=Array(this.c<<1),e=0,d=this.c;e<d;){var c=e++;b[c]=this.b[c];this.b[c]=null}this.b=b}this.b[this.c++]=a},ab:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.pb==this.kb.length){for(var b=Array(this.pb<<1),e=0,d=this.pb;e<d;){var c=e++;b[c]=this.kb[c];this.kb[c]=null}this.kb=b}this.kb[this.pb++]=a},sb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.Uf==this.zf.length){for(var b=Array(this.Uf<<1),e=0,d=this.Uf;e<d;){var c=e++;b[c]=this.zf[c];this.zf[c]=null}this.zf=b}this.zf[this.Uf++]=a},Kb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.$d==this.Td.length){for(var b=Array(this.$d<<1),e=0,d=this.$d;e<d;){var c=e++;b[c]=this.Td[c];this.Td[c]=null}this.Td=b}this.Td[this.$d++]=a},qa:Fb};ha.R=!0;ha.prototype={Mf:function(){this.z=this.y=this.x=0;this.w=1;return this},za:function(a,b,e,d){this.x=a;this.y=b;this.z=e;this.w=d;return this},Pa:function(a){return new ha(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Cc:function(a){return new ha(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},rc:function(a){return new ha(this.x*a,this.y*a,this.z*a,this.w*a)},ab:function(a){var b=this.y+a.y,e=this.z+a.z,d=this.w+a.w;this.x+=a.x;this.y=b;this.z=e;this.w=d;return this},Hc:function(a){var b=this.y-a.y,e=this.z-a.z,d=this.w-a.w;this.x=this.x-a.x;this.y=b;this.z=e;this.w=d;return this},zc:function(a){var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},kc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},sb:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},qc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new ha(this.x*a,this.y*a,this.z*a,this.w*a)},lc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},ad:function(a,b){var e=a.x,d=a.y;a=a.z;var c=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*c+d*f+a*b)));if(!this.w)return c=e*e,f=d*d,b=a*a,c<f?c<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-d*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+c),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h),this;h=.5/this.w;this.x=(d*b-a*f)*h;this.y=(a*c-e*b)*h;this.z=(e*f-d*c)*h;return this},bd:function(a,b){var e,d,c,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,d=-a.y,c=-a.z,a=-a.w):(e=a.x,d=a.y,c=a.z,a=a.w);if(.999999<f)return e=new ha(this.x+(e-this.x)*b,this.y+(d-this.y)*b,this.z+(c-this.z)*b,this.w+(a-this.w)*b),d=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<d&&(d=1/d),c=e.y*d,a=e.z*d,f=e.w*d,e.x=e.x*d,e.y=c,e.z=a,e.w=f,e;b*=Math.acos(f);e-=this.x*f;d-=this.y*f;c-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+d*d+c*c+a*a),h=Math.sin(b);b=Math.cos(b);return new ha(this.x*b+e*f*h,this.y*b+d*f*h,this.z*b+c*f*h,this.w*b+a*f*h)},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new ha(this.x,this.y,this.z,this.w)},Kb:function(a){var b=a.e00,e=a.e11,d=a.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},cd:function(){var a=new O,b=this.x,e=this.y,d=this.z,c=this.w,f=2*b,h=2*e,l=2*d,g=b*f,k=e*h,d=d*l,m=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;a.e00=1-k-d;a.e01=m-c;a.e02=b+h;a.e10=m+c;a.e11=1-g-d;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"},qa:ha};pc.R=!0;pc.prototype={Um:function(){if(null!=this.xh){var a=this.Km;this.xh.Yl(a,this.uc.Ib,this.vc.Ib,this.uc.a,this.vc.a,this.Li);(this.ug=0<a.numPoints)?(this.Ja.Im(a.normal),this.Ke.Ec=a.cm()>F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?F.alternativeContactPositionCorrectionAlgorithm:F.defaultContactPositionCorrectionAlgorithm,a.incremental?this.Ll.An(a,this.C.a,this.D.a):this.Ll.Pn(a,this.C.a,this.D.a)):this.Ja.Je()}},Ck:function(){var a=this.uc.Cj,b=this.vc.Cj;a==b&&(b=null);null!=a&&a.$e(this);null!=b&&b.$e(this)},kc:function(){return this.uc},lc:function(){return this.vc},Zj:function(){return this.ug},ab:function(){return this.Ja},Pa:function(){return this.Ke},Kb:function(){return this.ia},sb:function(){return this.M},qa:pc};Cc.R=!0;Cc.prototype={Pa:function(){return this.Ud},sb:function(){return this.Mc},Kb:function(){return this.ia},ab:function(){return this.M},qa:Cc};Fd.R=!0;Fd.prototype={an:function(){for(var a=this.cc.Yd;null!=a;){for(var b=a.M;;){var e;if(a.qg.sc==a.rg.sc)throw Error("assertion error: pp._p1._id != pp._p2._id is false");a.qg.sc<a.rg.sc?(e=a.qg.userData,a=a.rg.userData):(e=a.rg.userData,a=a.qg.userData);if(!this.Kn(e,a))break;var d=e.Vb,c=a.Vb,f;f=d.se<c.se?d.Mb:c.Mb;for(var d=e.sc,c=a.sc,h=!1;null!=f;){var l=f.M;f=f.Ud;if(f.uc.sc==d&&f.vc.sc==c){h=f.Hj=!0;break}f=l}h||(d=this.bg,null!=d?(this.bg=d.M,d.M=null):d=new pc,null==this.vd?this.vd=d:(this.qe.M=d,d.ia=this.qe),this.qe=d,d.Hj=!0,c=this.Jm.Hb[e.Ib.mc][a.Ib.mc],d.uc=e,d.vc=a,d.C=e.Vb,d.D=a.Vb,d.ug=!1,null==d.C.Mb?d.C.Mb=d.qb:(d.C.dc.M=d.qb,d.qb.ia=d.C.dc),d.C.dc=d.qb,null==d.D.Mb?d.D.Mb=d.rb:(d.D.dc.M=d.rb,d.rb.ia=d.D.dc),d.D.dc=d.rb,d.C.se++,d.D.se++,d.qb.Mc=d.D,d.rb.Mc=d.C,d.qb.Ud=d,d.rb.Ud=d,d.xh=c,d=d.Ke,d.uc=e,d.vc=a,d.C=d.uc.Vb,d.D=d.vc.Vb,d.aj=d.C.a,d.bj=d.D.a,this.ji++);break}a=b}},bn:function(){for(var a=this.cc.Gj,b=this.vd;null!=b;){for(var e=b.M;;){if(b.Hj){b.Hj=!1;b.Qj=!1;break}if(!a){var d=b.ia,c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ia);b.M=null;b.ia=null;d=b.qb.ia;c=b.qb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.qb==b.C.Mb&&(b.C.Mb=b.C.Mb.M);b.qb==b.C.dc&&(b.C.dc=b.C.dc.ia);b.qb.M=null;b.qb.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.D.Mb&&(b.D.Mb=b.D.Mb.M);b.rb==b.D.dc&&(b.D.dc=b.D.dc.ia);b.rb.M=null;b.rb.ia=null;b.C.se--;b.D.se--;b.qb.Mc=null;b.rb.Mc=null;b.qb.Ud=null;b.rb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ja.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}var c=b.uc,d=b.vc,f=c.Vb,h=d.Vb,h=!h.Fb&&1!=h.mc;if((f.Fb||1==f.mc)&&!h){b.Qj=!0;break}f=c.u;h=d.u;c=c.Na;d=d.Na;if(!(c.J<d.G&&c.G>d.J&&c.K<d.H&&c.H>d.K&&c.L<d.I&&c.I>d.L)){d=b.ia;c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ia);b.M=null;b.ia=null;d=b.qb.ia;c=b.qb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.qb==b.C.Mb&&(b.C.Mb=b.C.Mb.M);b.qb==b.C.dc&&(b.C.dc=b.C.dc.ia);b.qb.M=null;b.qb.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.D.Mb&&(b.D.Mb=b.D.Mb.M);b.rb==b.D.dc&&(b.D.dc=b.D.dc.ia);b.rb.M=null;b.rb.ia=null;b.C.se--;b.D.se--;b.qb.Mc=null;b.rb.Mc=null;b.qb.Ud=null;b.rb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ja.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}b.Qj=!(f.ma<h.ja&&f.ja>h.ma&&f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa);break}b=e}},Kn:function(a,b){var e=a.Vb,d=b.Vb;if(e==d||0!=e.mc&&0!=d.mc||!(a.Aj&b.Bj&&b.Aj&a.Bj))return!1;e.$g<d.$g?(a=e.re,e=d):a=d.re;for(;null!=a;){if(a.Mc==e&&!a.wk.gk)return!1;a=a.M}return!0},Ok:function(){this.cc.si();this.an();this.bn()},Ck:function(){for(var a=this.vd;null!=a;){var b=a.M;a.ug&&a.Ck();a=b}},ab:function(){return this.ji},Pa:function(){return this.vd},qa:Fd};Dk.R=!0;Dk.prototype={Je:function(){for(;0<this.vf;)this.xf[--this.vf]=null;for(;0<this.wf;)this.yf[--this.wf]=null;for(;0<this.ih;)this.ph[--this.ih]=null;for(;0<this.hh;)this.oh[--this.hh]=null},fk:function(a){if(this.vf==this.xf.length){for(var b=Array(this.vf<<1),e=0,d=this.vf;e<d;){var c=e++;b[c]=this.xf[c];this.xf[c]=null}this.xf=b}a.Cf=!0;this.xf[this.vf++]=a},yl:function(a,b){if(this.wf==this.yf.length){for(var e=Array(this.wf<<1),d=0,c=this.wf;d<c;){var f=d++;e[f]=this.yf[f];this.yf[f]=null}this.yf=e}a.Cf=!0;this.yf[this.wf++]=a;if(b==ec.SPLIT_IMPULSE){if(this.ih==this.ph.length){e=Array(this.ih<<1);d=0;for(c=this.ih;d<c;)f=d++,e[f]=this.ph[f],this.ph[f]=null;this.ph=e}this.ph[this.ih++]=a}if(b==ec.NGS){if(this.hh==this.oh.length){b=Array(this.hh<<1);e=0;for(d=this.hh;e<d;)c=e++,b[c]=this.oh[c],this.oh[c]=null;this.oh=b}this.oh[this.hh++]=a}},Tm:function(a,b){a=a.dt;var e=b.pa,d=b.a;e.v=d.v;e.A=d.A;e.B=d.B;e.o=d.o;e.f=d.f;e.h=d.h;e.i=d.i;e.m=d.m;e.j=d.j;e.l=d.l;e.g=d.g;e.s=d.s;b.hk&&b.eb*b.eb+b.fb*b.fb+b.gb*b.gb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&b.mb*b.mb+b.nb*b.nb+b.ob*b.ob<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?(b.xb+=a,b.xb>F.sleepingTimeThreshold&&(b.Fb=!0,b.xb=0)):b.xb=0;if(!b.Fb){if(0==b.mc){var e=a*b.Il,d=e*e,e=1/(1+e+d*(.5+.16666666666666666*e+.041666666666666664*d)),d=a*b.Al,c=d*d,d=1/(1+d+c*(.5+.16666666666666666*d+.041666666666666664*c)),f,h,l,c=this.dm*b.Ug;f=this.em*b.Ug;h=this.fm*b.Ug;c+=b.yh*b.Za;f+=b.zh*b.Za;h+=b.Ah*b.Za;var g,k;g=b.Z*b.kf+b.$*b.lf+b.aa*b.mf;k=b.ba*b.kf+b.ca*b.lf+b.da*b.mf;l=b.ea*b.kf+b.fa*b.lf+b.ga*b.mf;b.eb+=c*a;b.fb+=f*a;b.gb+=h*a;b.eb*=e;b.fb*=e;b.gb*=e;b.mb+=g*a;b.nb+=k*a;b.ob+=l*a;b.mb*=d;b.nb*=d;b.ob*=d}b.Hl(a);for(a=b.Ac;null!=a;){e=a.M;d=a.pa;f=a.ha;var c=b.pa,m,n,q,p,r;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;d=a.a;f=a.ha;c=b.a;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;a.Ib.Lb(a.u,a.pa);d=a.u.ma;c=a.u.na;f=a.u.oa;h=a.u.ja;l=a.u.ka;g=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=d<a.u.ma?d:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=f<a.u.oa?f:a.u.oa;a.u.ja=h>a.u.ja?h:a.u.ja;a.u.ka=l>a.u.ka?l:a.u.ka;a.u.la=g>a.u.la?g:a.u.la;null!=a.Na&&(d=a.a.v-a.pa.v,c=a.a.A-a.pa.A,f=a.a.B-a.pa.B,h=a.nc,h.x=d,h.y=c,h.z=f,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=e}}},Sm:function(a,b,e){for(var d=a.dt,c=!0,f=0,h=this.vf;f<h;){var l=f++,g=this.xf[l],k=g.pa,m=g.a;k.v=m.v;k.A=m.A;k.B=m.B;k.o=m.o;k.f=m.f;k.h=m.h;k.i=m.i;k.m=m.m;k.j=m.j;k.l=m.l;k.g=m.g;k.s=m.s;g.Fb=!1;g.hk&&g.eb*g.eb+g.fb*g.fb+g.gb*g.gb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&g.mb*g.mb+g.nb*g.nb+g.ob*g.ob<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?g.xb+=d:g.xb=0;g.xb<F.sleepingTimeThreshold&&(c=!1);if(0==g.mc){var n=d*g.Il,q=n*n,p=1/(1+n+q*(.5+.16666666666666666*n+.041666666666666664*q)),r=d*g.Al,v=r*r,t=1/(1+r+v*(.5+.16666666666666666*r+.041666666666666664*v)),w,A,u,D,V,z;w=this.dm*g.Ug;A=this.em*g.Ug;u=this.fm*g.Ug;w+=g.yh*g.Za;A+=g.zh*g.Za;u+=g.Ah*g.Za;var E,x,yb;E=g.Z*g.kf+g.$*g.lf+g.aa*g.mf;x=g.ba*g.kf+g.ca*g.lf+g.da*g.mf;yb=g.ea*g.kf+g.fa*g.lf+g.ga*g.mf;D=E;V=x;z=yb;g.eb+=w*d;g.fb+=A*d;g.gb+=u*d;g.eb*=p;g.fb*=p;g.gb*=p;g.mb+=D*d;g.nb+=V*d;g.ob+=z*d;g.mb*=t;g.nb*=t;g.ob*=t}}if(c)for(var N=0,G=this.vf;N<G;){var C=N++,L=this.xf[C];L.Fb=!0;L.xb=0}else{for(var O=0,ga=this.wf;O<ga;){var M=O++;this.yf[M].jh(a)}for(var Vb=0,ha=this.wf;Vb<ha;){var ka=Vb++;this.yf[ka].sh(a)}for(var Oa=0;Oa<b;){Oa++;for(var U=0,R=this.wf;U<R;){var Wb=U++;this.yf[Wb].nh()}}for(var Ma=0,Ra=this.wf;Ma<Ra;){var vc=Ma++;this.yf[vc].vi(a)}for(var Pa=0,Aa=this.vf;Pa<Aa;){var zb=Pa++;this.xf[zb].Hl(d)}for(var J=0,Qa=this.ih;J<Qa;){var ba=J++;this.ph[ba].Gg(a)}for(var Q=0;Q<e;){Q++;for(var P=0,wa=this.ih;P<wa;){var ta=P++;this.ph[ta].mh()}}for(var W=0,oa=this.vf;W<oa;){var y=W++;this.xf[y].Qm()}for(var Ha=0,ca=this.hh;Ha<ca;){var Ca=Ha++;this.oh[Ca].Gg(a)}for(var xa=0;xa<e;){xa++;for(var Da=0,Sa=this.hh;Da<Sa;){var la=Da++;this.oh[la].lh(a)}}for(var Z=0,Ea=this.wf;Z<Ea;){var qa=Z++;this.yf[qa].$e()}for(var va=0,I=this.vf;va<I;)for(var Ka=va++,Xa=this.xf[Ka],S=Xa.Ac;null!=S;){var Ya=S.M,T=S.pa,K=S.ha,ia=Xa.pa,fb,da,Ic,sa,eb,jb,Za,ma,na;fb=ia.o*K.o+ia.f*K.i+ia.h*K.l;da=ia.o*K.f+ia.f*K.m+ia.h*K.g;Ic=ia.o*K.h+ia.f*K.j+ia.h*K.s;sa=ia.i*K.o+ia.m*K.i+ia.j*K.l;eb=ia.i*K.f+ia.m*K.m+ia.j*K.g;jb=ia.i*K.h+ia.m*K.j+ia.j*K.s;Za=ia.l*K.o+ia.g*K.i+ia.s*K.l;ma=ia.l*K.f+ia.g*K.m+ia.s*K.g;na=ia.l*K.h+ia.g*K.j+ia.s*K.s;T.o=fb;T.f=da;T.h=Ic;T.i=sa;T.m=eb;T.j=jb;T.l=Za;T.g=ma;T.s=na;var Ia,Fa,ob;Ia=ia.o*K.v+ia.f*K.A+ia.h*K.B;Fa=ia.i*K.v+ia.m*K.A+ia.j*K.B;ob=ia.l*K.v+ia.g*K.A+ia.s*K.B;T.v=Ia;T.A=Fa;T.B=ob;T.v+=ia.v;T.A+=ia.A;T.B+=ia.B;var fa=S.a,ea=S.ha,ja=Xa.a,bb,ya,tb,Ua,qb,rb,ub,Va,Db;bb=ja.o*ea.o+ja.f*ea.i+ja.h*ea.l;ya=ja.o*ea.f+ja.f*ea.m+ja.h*ea.g;tb=ja.o*ea.h+ja.f*ea.j+ja.h*ea.s;Ua=ja.i*ea.o+ja.m*ea.i+ja.j*ea.l;qb=ja.i*ea.f+ja.m*ea.m+ja.j*ea.g;rb=ja.i*ea.h+ja.m*ea.j+ja.j*ea.s;ub=ja.l*ea.o+ja.g*ea.i+ja.s*ea.l;Va=ja.l*ea.f+ja.g*ea.m+ja.s*ea.g;Db=ja.l*ea.h+ja.g*ea.j+ja.s*ea.s;fa.o=bb;fa.f=ya;fa.h=tb;fa.i=Ua;fa.m=qb;fa.j=rb;fa.l=ub;fa.g=Va;fa.s=Db;var mc,$a,ua;mc=ja.o*ea.v+ja.f*ea.A+ja.h*ea.B;$a=ja.i*ea.v+ja.m*ea.A+ja.j*ea.B;ua=ja.l*ea.v+ja.g*ea.A+ja.s*ea.B;fa.v=mc;fa.A=$a;fa.B=ua;fa.v+=ja.v;fa.A+=ja.A;fa.B+=ja.B;var Gb,H,pb,cb,rc,ab;S.Ib.Lb(S.u,S.pa);Gb=S.u.ma;H=S.u.na;pb=S.u.oa;cb=S.u.ja;rc=S.u.ka;ab=S.u.la;S.Ib.Lb(S.u,S.a);S.u.ma=Gb<S.u.ma?Gb:S.u.ma;S.u.na=H<S.u.na?H:S.u.na;S.u.oa=pb<S.u.oa?pb:S.u.oa;S.u.ja=cb>S.u.ja?cb:S.u.ja;S.u.ka=rc>S.u.ka?rc:S.u.ka;S.u.la=ab>S.u.la?ab:S.u.la;if(null!=S.Na){var gb,B,Bb;gb=S.a.v-S.pa.v;B=S.a.A-S.pa.A;Bb=S.a.B-S.pa.B;var ra=S.nc;ra.x=gb;ra.y=B;ra.z=Bb;S.Vb.jc.cc.sd(S.Na,S.u,S.nc)}S=Ya}}},qa:Dk};kj.R=!0;kj.prototype={qa:kj};ra.R=!0;ra.prototype={Ok:function(){var a=(new Date).getTime()/1E3;this.wh.Ok();Rc.broadPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a);for(var a=(new Date).getTime()/1E3,b=this.wh.vd;null!=b;){var e=b.M;b.Qj||b.Um();b=e}Rc.narrowPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a)},Rm:function(){var a=(new Date).getTime()/1E3;if(F.disableSleeping)for(var b=this.jf;null!=b;){var e=b.M;b.Fb=!1;b.xb=0;b=e}if(this.dh.length<this.Vi){for(b=this.dh.length<<1;b<this.Vi;)b<<=1;this.dh=Array(b)}this.Mj=0;b=this.lg;e=this.lk;b.dm=e.x;b.em=e.y;b.fm=e.z;b=this.jf;for(this.hf=0;null!=b;){for(e=b.M;!b.Cf&&!b.Fb&&1!=b.mc;){if(0==b.se&&0==b.$g){this.lg.Tm(this.Mh,b);this.Mj++;break}this.Wm(b);this.lg.Sm(this.Mh,this.Bk,this.Ak);this.lg.Je();this.Mj++;break}b=e}this.wh.Ck();for(b=this.jf;null!=b;)e=b.M,b.Cf=!1,b=e;for(b=this.jf;null!=b;)e=b.M,b.yh=0,b.zh=0,b.Ah=0,b.kf=0,b.lf=0,b.mf=0,b=e;for(;0<this.hf;)this.Qe[--this.hf].Cf=!1,this.Qe[this.hf]=null;Rc.dynamicsTime=1E3*((new Date).getTime()/1E3-a)},Wm:function(a){var b=1;this.lg.fk(a);for(this.dh[0]=a;0<b;)if(a=this.dh[--b],this.dh[b]=null,1!=a.mc){for(var e=a.Mb;null!=e;){var d=e.M,c=e.Ud.Ke,f=e.Ud.Ke.Rj;if(c.Zj()&&!f.Cf){if(this.Qe.length==this.hf){for(var h=Array(this.hf<<1),l=0,g=this.hf;l<g;){var k=l++;h[k]=this.Qe[k];this.Qe[k]=null}this.Qe=h}this.Qe[this.hf++]=f;this.lg.yl(f,c.Ec);e=e.Mc;e.Cf||(this.lg.fk(e),this.dh[b++]=e)}e=d}for(d=a.re;null!=d;){a=d.M;e=d.wk;c=e.Rj;if(!c.Cf){if(this.Qe.length==this.hf){f=Array(this.hf<<1);h=0;for(l=this.hf;h<l;)g=h++,f[g]=this.Qe[g],this.Qe[g]=null;this.Qe=f}this.Qe[this.hf++]=c;this.lg.yl(c,e.Ec);d=d.Mc;d.Cf||(this.lg.fk(d),this.dh[b++]=d)}d=a}}},Lm:function(a,b){a.drawBvh&&this.kk(a,b.Ob,0,a.style.bvhNodeColor)},kk:function(a,b,e,d){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var c=this.Ga,f=0==c.c?new t:c.b[--c.c],c=this.Ga,c=0==c.c?new t:c.b[--c.c];f.x=b.J;f.y=b.K;f.z=b.L;c.x=b.G;c.y=b.H;c.z=b.I;a.Pk(f,c,d);var h=this.Ga;if(null!=f){f.O();if(h.c==h.b.length){for(var l=Array(h.c<<1),g=0,k=h.c;g<k;){var m=g++;l[m]=h.b[m];h.b[m]=null}h.b=l}h.b[h.c++]=f}f=this.Ga;if(null!=c){c.O();if(f.c==f.b.length){h=Array(f.c<<1);l=0;for(g=f.c;l<g;)k=l++,h[k]=f.b[k],f.b[k]=null;f.b=h}f.b[f.c++]=c}}this.kk(a,b.F[0],e+1,d);this.kk(a,b.F[1],e+1,d)}},Om:function(a){for(var b=a.style,e=this.jf;null!=e;){var d=e.M,c=null,f=0==e.mc;f||(c=2==e.mc?b.kinematicShapeColor:b.staticShapeColor);for(var h=e.Ac;null!=h;){var l=h.M;f&&(c=h.sc&1?e.Fb?b.sleepingShapeColor2:e.xb>F.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Fb?b.sleepingShapeColor1:e.xb>F.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var g=h.Ib,k=h.a;switch(g.mc){case 0:a.zm(k,g.$a,c);break;case 1:var m=g,n=this.Ga,q=0==n.c?new t:n.b[--n.c],p=q;p.x=m.Le;p.y=m.Me;p.z=m.Ne;a.Pl(k,q,c);var r=this.Ga;if(null!=q){q.O();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var A=aa++;v[A]=r.b[A];r.b[A]=null}r.b=v}r.b[r.c++]=q}break;case 2:var u=g;a.Wl(k,u.$a,u.Gb,c);break;case 3:var D=g;a.Tl(k,D.$a,D.Gb,c);break;case 4:var V=g;a.Rl(k,V.$a,V.Gb,c);break;case 5:var z=g,E=z.Ae,x=this.Ga,yb=0==x.c?new t:x.b[--x.c],N=this.Ga,G=0==N.c?new t:N.b[--N.c],C=this.Ga,L=0==C.c?new t:C.b[--C.c],M=this.Ga,ga=0==M.c?new t:M.b[--M.c],ha=this.Ga,Vb=0==ha.c?new t:ha.b[--ha.c],ra=this.Ga,ka=0==ra.c?new t:ra.b[--ra.c],Oa=this.Ga,U=0==Oa.pb?new O:Oa.kb[--Oa.pb],R=this.Ga,Wb=0==R.c?new t:R.b[--R.c],Ma=U;Ma.e00=k.o;Ma.e01=k.f;Ma.e02=k.h;Ma.e10=k.i;Ma.e11=k.m;Ma.e12=k.j;Ma.e20=k.l;Ma.e21=k.g;Ma.e22=k.s;var Ra=Wb;Ra.x=k.v;Ra.y=k.A;Ra.z=k.B;for(var vc=0,Pa=E;vc<Pa;){var Aa=vc++,zb=z.tg[Aa],J=z.yb[Aa];zb.x=J.x;zb.y=J.y;zb.z=J.z;var Qa=zb,ba=Qa.x*U.e10+Qa.y*U.e11+Qa.z*U.e12,Q=Qa.x*U.e20+Qa.y*U.e21+Qa.z*U.e22;Qa.x=Qa.x*U.e00+Qa.y*U.e01+Qa.z*U.e02;Qa.y=ba;Qa.z=Q;var P=Qa,wa=P.y+Wb.y,ta=P.z+Wb.z;P.x=P.x+Wb.x;P.y=wa;P.z=ta}if(30<E)for(var W=0,oa=E;W<oa;){var y=W++,Ha=z.tg[y];yb.x=Ha.x;yb.y=Ha.y;yb.z=Ha.z;var ca=z.tg[(y+1)%E];G.x=ca.x;G.y=ca.y;G.z=ca.z}else if(this.fi.wireframe||10<E)for(var Ca=0,xa=E;Ca<xa;){var Da=Ca++,Sa=z.tg[Da];yb.x=Sa.x;yb.y=Sa.y;yb.z=Sa.z;for(var la=0,Z=Da;la<Z;){var Ea=la++,qa=z.tg[Ea];G.x=qa.x;G.y=qa.y;G.z=qa.z}}else for(var va=0,I=E;va<I;){var Ka=va++,Xa=z.tg[Ka];yb.x=Xa.x;yb.y=Xa.y;yb.z=Xa.z;for(var S=0,Ya=Ka;S<Ya;){var T=S++,K=z.tg[T];G.x=K.x;G.y=K.y;G.z=K.z;for(var ia=0,fb=T;ia<fb;){var da=ia++,Ic=z.tg[da];L.x=Ic.x;L.y=Ic.y;L.z=Ic.z;ga.x=G.x;ga.y=G.y;ga.z=G.z;var sa=ga,eb=sa.y-yb.y,jb=sa.z-yb.z;sa.x=sa.x-yb.x;sa.y=eb;sa.z=jb;Vb.x=L.x;Vb.y=L.y;Vb.z=L.z;var Za=Vb,ma=Za.y-yb.y,na=Za.z-yb.z;Za.x=Za.x-yb.x;Za.y=ma;Za.z=na;ka.x=ga.x;ka.y=ga.y;ka.z=ga.z;var Ia=ka,Fa=Ia.z*Vb.x-Ia.x*Vb.z,ob=Ia.x*Vb.y-Ia.y*Vb.x;Ia.x=Ia.y*Vb.z-Ia.z*Vb.y;Ia.y=Fa;Ia.z=ob;var fa=Ia,ea=Math.sqrt(fa.x*fa.x+fa.y*fa.y+fa.z*fa.z);0<ea&&(ea=1/ea);var ja=fa.y*ea,bb=fa.z*ea;fa.x=fa.x*ea;fa.y=ja;fa.z=bb;var ya=-ka.y,tb=-ka.z;ka.x=-ka.x;ka.y=ya;ka.z=tb}}}var Ua=this.Ga;if(null!=yb){yb.O();if(Ua.c==Ua.b.length){for(var qb=Array(Ua.c<<1),rb=0,ub=Ua.c;rb<ub;){var Va=rb++;qb[Va]=Ua.b[Va];Ua.b[Va]=null}Ua.b=qb}Ua.b[Ua.c++]=yb}var Db=this.Ga;if(null!=G){G.O();if(Db.c==Db.b.length){for(var mc=Array(Db.c<<1),$a=0,ua=Db.c;$a<ua;){var Gb=$a++;mc[Gb]=Db.b[Gb];Db.b[Gb]=null}Db.b=mc}Db.b[Db.c++]=G}var H=this.Ga;if(null!=L){L.O();if(H.c==H.b.length){for(var pb=Array(H.c<<1),cb=0,rc=H.c;cb<rc;){var ab=cb++;pb[ab]=H.b[ab];H.b[ab]=null}H.b=pb}H.b[H.c++]=L}var gb=this.Ga;if(null!=ga){ga.O();if(gb.c==gb.b.length){for(var B=Array(gb.c<<1),Bb=0,za=gb.c;Bb<za;){var Tc=Bb++;B[Tc]=gb.b[Tc];gb.b[Tc]=null}gb.b=B}gb.b[gb.c++]=ga}var Eb=this.Ga;if(null!=Vb){Vb.O();if(Eb.c==Eb.b.length){for(var Na=Array(Eb.c<<1),nb=0,wb=Eb.c;nb<wb;){var xb=nb++;Na[xb]=Eb.b[xb];Eb.b[xb]=null}Eb.b=Na}Eb.b[Eb.c++]=Vb}var db=this.Ga;if(null!=ka){ka.O();if(db.c==db.b.length){for(var Y=Array(db.c<<1),La=0,kb=db.c;La<kb;){var Ta=La++;Y[Ta]=db.b[Ta];db.b[Ta]=null}db.b=Y}db.b[db.c++]=ka}var hb=this.Ga;if(null!=U){U.e00=1;U.e01=0;U.e02=0;U.e10=0;U.e11=1;U.e12=0;U.e20=0;U.e21=0;U.e22=1;if(hb.pb==hb.kb.length){for(var Ja=Array(hb.pb<<1),Ib=0,Ba=hb.pb;Ib<Ba;){var X=Ib++;Ja[X]=hb.kb[X];hb.kb[X]=null}hb.kb=Ja}hb.kb[hb.pb++]=U}var Ab=this.Ga;if(null!=Wb){Wb.O();if(Ab.c==Ab.b.length){for(var Dc=Array(Ab.c<<1),Pc=0,pa=Ab.c;Pc<pa;){var gc=Pc++;Dc[gc]=Ab.b[gc];Ab.b[gc]=null}Ab.b=Dc}Ab.b[Ab.c++]=Wb}}}if(a.drawAabbs){var Nc=h.u,Ga=b.aabbColor,mb=this.Ga,yc=0==mb.c?new t:mb.b[--mb.c],vb=this.Ga,jc=0==vb.c?new t:vb.b[--vb.c],uc=yc;uc.x=Nc.ma;uc.y=Nc.na;uc.z=Nc.oa;var kc=jc;kc.x=Nc.ja;kc.y=Nc.ka;kc.z=Nc.la;a.Pk(yc,jc,Ga);var ac=this.Ga;if(null!=yc){yc.O();if(ac.c==ac.b.length){for(var Xb=Array(ac.c<<1),Yb=0,Sb=ac.c;Yb<Sb;){var hc=Yb++;Xb[hc]=ac.b[hc];ac.b[hc]=null}ac.b=Xb}ac.b[ac.c++]=yc}var Tb=this.Ga;if(null!=jc){jc.O();if(Tb.c==Tb.b.length){for(var Pb=Array(Tb.c<<1),Zb=0,ic=Tb.c;Zb<ic;){var Jb=Zb++;Pb[Jb]=Tb.b[Jb];Tb.b[Jb]=null}Tb.b=Pb}Tb.b[Tb.c++]=jc}}h=l}e=d}},Mm:function(a){if(a.drawPairs||a.drawContacts)for(var b=this.wh.vd;null!=b;){var e=b.M;if(a.drawPairs){var d=this.Ga,c=0==d.c?new t:d.b[--d.c],f=this.Ga,h=0==f.c?new t:f.b[--f.c],l=c;l.x=b.uc.a.v;l.y=b.uc.a.A;l.z=b.uc.a.B;var g=h;g.x=b.vc.a.v;g.y=b.vc.a.A;g.z=b.vc.a.B;var k=this.Ga;if(null!=c){c.O();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=c}var r=this.Ga;if(null!=h){h.O();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var A=aa++;v[A]=r.b[A];r.b[A]=null}r.b=v}r.b[r.c++]=h}}if(a.drawContacts)for(var u=b.Ke,D=b.Ke.Ja.tc,V=0,z=b.Ke.Ja.Xd;V<z;){var E=V++,x=D[E],yb=a.style,N=this.Ga,G=0==N.c?new t:N.b[--N.c],F=this.Ga,C=0==F.c?new t:F.b[--F.c],L=this.Ga,ga=0==L.c?new t:L.b[--L.c],O=this.Ga,M=0==O.c?new t:O.b[--O.c],ha=this.Ga,ka=0==ha.c?new t:ha.b[--ha.c],Oa=G;Oa.x=x.Fd;Oa.y=x.Gd;Oa.z=x.Hd;var U=C;U.x=x.Id;U.y=x.Jd;U.z=x.Kd;var R=ga;R.x=u.Ja.mg;R.y=u.Ja.ng;R.z=u.Ja.og;var Wb=M;Wb.x=u.Ja.Xi;Wb.y=u.Ja.Yi;Wb.z=u.Ja.Zi;var Ma=ka;Ma.x=u.Ja.Gi;Ma.y=u.Ja.Hi;Ma.z=u.Ja.Ii;C.x=G.x;C.y=G.y;C.z=G.z;var Ra=C,vc=yb.contactNormalLength,Pa=Ra.y+ga.y*vc,Aa=Ra.z+ga.z*vc;Ra.x=Ra.x+ga.x*vc;Ra.y=Pa;Ra.z=Aa;if(a.drawContactBases){C.x=G.x;C.y=G.y;C.z=G.z;var zb=C,J=yb.contactTangentLength,Qa=zb.y+M.y*J,ba=zb.z+M.z*J;zb.x=zb.x+M.x*J;zb.y=Qa;zb.z=ba;C.x=G.x;C.y=G.y;C.z=G.z;var Q=C,P=yb.contactBinormalLength,wa=Q.y+ka.y*P,ta=Q.z+ka.z*P;Q.x=Q.x+ka.x*P;Q.y=wa;Q.z=ta}var W=this.Ga;if(null!=G){G.O();if(W.c==W.b.length){for(var oa=Array(W.c<<1),y=0,Ha=W.c;y<Ha;){var ca=y++;oa[ca]=W.b[ca];W.b[ca]=null}W.b=oa}W.b[W.c++]=G}var Ca=this.Ga;if(null!=C){C.O();if(Ca.c==Ca.b.length){for(var xa=Array(Ca.c<<1),Da=0,Sa=Ca.c;Da<Sa;){var la=Da++;xa[la]=Ca.b[la];Ca.b[la]=null}Ca.b=xa}Ca.b[Ca.c++]=C}var Z=this.Ga;if(null!=ga){ga.O();if(Z.c==Z.b.length){for(var Ea=Array(Z.c<<1),qa=0,va=Z.c;qa<va;){var I=qa++;Ea[I]=Z.b[I];Z.b[I]=null}Z.b=Ea}Z.b[Z.c++]=ga}var Ka=this.Ga;if(null!=M){M.O();if(Ka.c==Ka.b.length){for(var Xa=Array(Ka.c<<1),S=0,Ya=Ka.c;S<Ya;){var T=S++;Xa[T]=Ka.b[T];Ka.b[T]=null}Ka.b=Xa}Ka.b[Ka.c++]=M}var K=this.Ga;if(null!=ka){ka.O();if(K.c==K.b.length){for(var ia=Array(K.c<<1),fb=0,da=K.c;fb<da;){var ra=fb++;ia[ra]=K.b[ra];K.b[ra]=null}K.b=ia}K.b[K.c++]=ka}}b=e}if(a.drawJoints)for(var sa=this.Kh;null!=sa;){var eb=sa.M,jb=this.Ga,Za=0==jb.c?new t:jb.b[--jb.c],ma=this.Ga,na=0==ma.c?new t:ma.b[--ma.c],Ia=Za;Ia.x=sa.C.a.v;Ia.y=sa.C.a.A;Ia.z=sa.C.a.B;var Fa=na;Fa.x=sa.D.a.v;Fa.y=sa.D.a.A;Fa.z=sa.D.a.B;var ob=this.Ga,fa=0==ob.c?new t:ob.b[--ob.c],ea=this.Ga,ja=0==ea.c?new t:ea.b[--ea.c],bb=this.Ga,ya=0==bb.c?new t:bb.b[--bb.c],tb=this.Ga,Ua=0==tb.c?new t:tb.b[--tb.c],qb=this.Ga,rb=0==qb.c?new t:qb.b[--qb.c],ub=this.Ga,Va=0==ub.c?new t:ub.b[--ub.c],Db=this.Ga,mc=0==Db.c?new t:Db.b[--Db.c],$a=this.Ga,ua=0==$a.c?new t:$a.b[--$a.c],Gb=fa;Gb.x=sa.Df;Gb.y=sa.Ef;Gb.z=sa.Ff;var H=ja;H.x=sa.Gf;H.y=sa.Hf;H.z=sa.If;var pb=ya;pb.x=sa.ub;pb.y=sa.vb;pb.z=sa.wb;var cb=Ua;cb.x=sa.xe;cb.y=sa.ye;cb.z=sa.ze;var rc=rb;rc.x=sa.th;rc.y=sa.uh;rc.z=sa.vh;var ab=Va;ab.x=sa.Xb;ab.y=sa.Yb;ab.z=sa.Zb;var gb=mc;gb.x=sa.ne;gb.y=sa.oe;gb.z=sa.pe;var B=ua;B.x=sa.Rg;B.y=sa.Sg;B.z=sa.Tg;if(a.drawJointLimits)switch(sa.mc){case 1:var Bb=sa.Lh;this.Ni(a,fa,Ua,rb,mc,a.style.jointRotationalConstraintRadius,Bb.lowerLimit,Bb.upperLimit,a.style.jointLineColor);break;case 2:var za=sa,Tc=a.style.jointLineColor,Eb=za.Dk,Na=za.Kk;this.Ni(a,ja,Ua,rb,mc,a.style.jointRotationalConstraintRadius,Eb.lowerLimit,Eb.upperLimit,Tc);this.El(a,fa,ya,Na.lowerLimit,Na.upperLimit,Tc);break;case 3:var nb=sa.Lh;this.El(a,fa,ya,nb.lowerLimit,nb.upperLimit,a.style.jointLineColor);break;case 4:var wb=sa,xb=a.style.jointRotationalConstraintRadius,db=a.style.jointLineColor,Y=wb.xk,La=wb.yk;this.Ni(a,fa,Ua,rb,Ua,xb,wb.yi-Y.upperLimit,wb.yi-Y.lowerLimit,db);this.Ni(a,ja,Va,mc,Va,xb,La.lowerLimit-wb.zi,La.upperLimit-wb.zi,db);break;case 5:var kb=sa,Ta=a.style.jointRotationalConstraintRadius,hb=a.style.jointLineColor,Ja=kb.Mk;this.Ni(a,ja,mc,ua,mc,Ta,Ja.lowerLimit-kb.ej,Ja.upperLimit-kb.ej,hb);this.Nm(a,fa,ya,Ua,rb,kb.Jj,kb.Kj,Ta,hb);var Ib=this.Ga,Ba=0==Ib.c?new t:Ib.b[--Ib.c];Ba.x=ja.x;Ba.y=ja.y;Ba.z=ja.z;var X=Ba,Ab=X.y+Va.y*Ta,Dc=X.z+Va.z*Ta;X.x=X.x+Va.x*Ta;X.y=Ab;X.z=Dc;var Pc=X,pa=this.Ga;if(null!=Pc){Pc.O();if(pa.c==pa.b.length){for(var gc=Array(pa.c<<1),Ga=0,mb=pa.c;Ga<mb;){var vb=Ga++;gc[vb]=pa.b[vb];pa.b[vb]=null}pa.b=gc}pa.b[pa.c++]=Pc}}var yc=this.Ga;if(null!=Za){Za.O();if(yc.c==yc.b.length){for(var Wa=Array(yc.c<<1),jc=0,uc=yc.c;jc<uc;){var kc=jc++;Wa[kc]=yc.b[kc];yc.b[kc]=null}yc.b=Wa}yc.b[yc.c++]=Za}var ac=this.Ga;if(null!=na){na.O();if(ac.c==ac.b.length){for(var Xb=Array(ac.c<<1),Yb=0,Sb=ac.c;Yb<Sb;){var hc=Yb++;Xb[hc]=ac.b[hc];ac.b[hc]=null}ac.b=Xb}ac.b[ac.c++]=na}var Tb=this.Ga;if(null!=fa){fa.O();if(Tb.c==Tb.b.length){for(var Pb=Array(Tb.c<<1),Zb=0,ic=Tb.c;Zb<ic;){var Jb=Zb++;Pb[Jb]=Tb.b[Jb];Tb.b[Jb]=null}Tb.b=Pb}Tb.b[Tb.c++]=fa}var $b=this.Ga;if(null!=ja){ja.O();if($b.c==$b.b.length){for(var lb=Array($b.c<<1),sb=0,Lb=$b.c;sb<Lb;){var ib=sb++;lb[ib]=$b.b[ib];$b.b[ib]=null}$b.b=lb}$b.b[$b.c++]=ja}var sc=this.Ga;if(null!=ya){ya.O();if(sc.c==sc.b.length){for(var nc=Array(sc.c<<1),jd=0,rd=sc.c;jd<rd;){var Kb=jd++;nc[Kb]=sc.b[Kb];sc.b[Kb]=null}sc.b=nc}sc.b[sc.c++]=ya}var tc=this.Ga;if(null!=Ua){Ua.O();if(tc.c==tc.b.length){for(var wc=Array(tc.c<<1),Qb=0,Hb=tc.c;Qb<Hb;){var Nb=Qb++;wc[Nb]=tc.b[Nb];tc.b[Nb]=null}tc.b=wc}tc.b[tc.c++]=Ua}var Zc=this.Ga;if(null!=rb){rb.O();if(Zc.c==Zc.b.length){for(var Gc=Array(Zc.c<<1),ec=0,Fb=Zc.c;ec<Fb;){var fc=ec++;Gc[fc]=Zc.b[fc];Zc.b[fc]=null}Zc.b=Gc}Zc.b[Zc.c++]=rb}var Id=this.Ga;if(null!=Va){Va.O();if(Id.c==Id.b.length){for(var Mb=Array(Id.c<<1),oc=0,Rb=Id.c;oc<Rb;){var bc=oc++;Mb[bc]=Id.b[bc];Id.b[bc]=null}Id.b=Mb}Id.b[Id.c++]=Va}var Ac=this.Ga;if(null!=mc){mc.O();if(Ac.c==Ac.b.length){for(var Cb=Array(Ac.c<<1),dc=0,Ub=Ac.c;dc<Ub;){var pc=dc++;Cb[pc]=Ac.b[pc];Ac.b[pc]=null}Ac.b=Cb}Ac.b[Ac.c++]=mc}var Qc=this.Ga;if(null!=ua){ua.O();if(Qc.c==Qc.b.length){for(var Bc=Array(Qc.c<<1),zc=0,lc=Qc.c;zc<lc;){var cc=zc++;Bc[cc]=Qc.b[cc];Qc.b[cc]=null}Qc.b=Bc}Qc.b[Qc.c++]=ua}sa=eb}},Ni:function(a,b,e,d,c,f,h,l,g){if(h!=l){var k=this.Ga,k=0==k.c?new t:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;var m=k.y+c.y*f,n=k.z+c.z*f;k.x+=c.x*f;k.y=m;k.z=n;c=this.Ga;if(null!=k){k.O();if(c.c==c.b.length){for(var m=Array(c.c<<1),n=0,q=c.c;n<q;){var p=n++;m[p]=c.b[p];c.b[p]=null}c.b=m}c.b[c.c++]=k}}h>l?a.ellipse(b,e,d,f,f,g):a.arc(b,e,d,f,f,h,l,!0,g)},El:function(a,b,e,d,c){if(d<c){a=this.Ga;a=0==a.c?new t:a.b[--a.c];a.x=b.x;a.y=b.y;a.z=b.z;var f=a.y+e.y*d,h=a.z+e.z*d;a.x+=e.x*d;a.y=f;a.z=h;d=this.Ga;d=0==d.c?new t:d.b[--d.c];d.x=b.x;d.y=b.y;d.z=b.z;b=d.y+e.y*c;f=d.z+e.z*c;d.x+=e.x*c;d.y=b;d.z=f;e=this.Ga;if(null!=a){a.O();if(e.c==e.b.length){c=Array(e.c<<1);b=0;for(f=e.c;b<f;)h=b++,c[h]=e.b[h],e.b[h]=null;e.b=c}e.b[e.c++]=a}a=this.Ga;if(null!=d){d.O();if(a.c==a.b.length){e=Array(a.c<<1);c=0;for(b=a.c;c<b;)f=c++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=d}}},Nm:function(a,b,e,d,c,f,h,l){var g=0;a=this.Ga;var k=0==a.c?new t:a.b[--a.c];a=this.Ga;var m=0==a.$d?new ha:a.Td[--a.$d];a=this.Ga;var n=0==a.pb?new O:a.kb[--a.pb];a=this.Ga;a=0==a.c?new t:a.b[--a.c];for(var q=0;17>q;){q++;var p=Math.cos(g)*f,r=Math.sin(g)*h,v=Math.sqrt(p*p+r*r),aa=Math.sin(.5*v),w=Math.cos(.5*v),A=k.O(),u=A.y+d.y*p,D=A.z+d.z*p;A.x=A.x+d.x*p;A.y=u;A.z=D;p=A;A=p.y+c.y*r;u=p.z+c.z*r;p.x=p.x+c.x*r;p.y=A;p.z=u;r=1/v*aa;v=k.y*r;aa=k.z*r;k.x=k.x*r;k.y=v;k.z=aa;m.x=k.x;m.y=k.y;m.z=k.z;m.w=w;var V=m.x,D=m.y,p=m.z,v=m.w,z=2*V,u=2*D,aa=2*p,w=V*z,r=D*u,p=p*aa,A=V*u,D=D*aa,V=V*aa,z=v*z,u=v*u,v=v*aa;n.e00=1-r-p;n.e01=A-v;n.e02=V+u;n.e10=A+v;n.e11=1-w-p;n.e12=D-z;n.e20=V-u;n.e21=D+z;n.e22=1-w-r;w=this.Ga;w=0==w.c?new t:w.b[--w.c];r=w.y+e.y*l;v=w.z+e.z*l;w.x=w.x+e.x*l;w.y=r;w.z=v;r=w.x*n.e10+w.y*n.e11+w.z*n.e12;v=w.x*n.e20+w.y*n.e21+w.z*n.e22;w.x=w.x*n.e00+w.y*n.e01+w.z*n.e02;w.y=r;w.z=v;r=w;v=r.y+b.y;aa=r.z+b.z;r.x=r.x+b.x;r.y=v;r.z=aa;r=this.Ga;if(null!=a){a.O();if(r.c==r.b.length){v=Array(r.c<<1);aa=0;for(p=r.c;aa<p;)A=aa++,v[A]=r.b[A],r.b[A]=null;r.b=v}r.b[r.c++]=a}a=w;g+=.39269908169872375}b=this.Ga;if(null!=k){k.O();if(b.c==b.b.length){e=Array(b.c<<1);d=0;for(c=b.c;d<c;)f=d++,e[f]=b.b[f],b.b[f]=null;b.b=e}b.b[b.c++]=k}k=this.Ga;if(null!=m){m.x=0;m.y=0;m.z=0;m.w=1;if(k.$d==k.Td.length){b=Array(k.$d<<1);e=0;for(d=k.$d;e<d;)c=e++,b[c]=k.Td[c],k.Td[c]=null;k.Td=b}k.Td[k.$d++]=m}m=this.Ga;if(null!=n){n.e00=1;n.e01=0;n.e02=0;n.e10=0;n.e11=1;n.e12=0;n.e20=0;n.e21=0;n.e22=1;if(m.pb==m.kb.length){k=Array(m.pb<<1);b=0;for(e=m.pb;b<e;)d=b++,k[d]=m.kb[d],m.kb[d]=null;m.kb=k}m.kb[m.pb++]=n}n=this.Ga;if(null!=a){a.O();if(n.c==n.b.length){m=Array(n.c<<1);k=0;for(b=n.c;k<b;)e=k++,m[e]=n.b[e],n.b[e]=null;n.b=m}n.b[n.c++]=a}},be:function(a){0<this.Mh.dt&&(this.Mh.dtRatio=a/this.Mh.dt);this.Mh.dt=a;this.Mh.invDt=1/a;a=(new Date).getTime()/1E3;this.Ok();this.Rm();Rc.totalTime=1E3*((new Date).getTime()/1E3-a)},ab:function(a){if(null!=a.jc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.jf?this.jf=a:(this.mi.M=a,a.ia=this.mi);this.mi=a;a.jc=this;for(a=a.Ac;null!=a;){var b=a.M;a.Na=this.cc.Ph(a,a.u);a.sc=this.Jl++;this.pg++;a=b}this.Vi++},ce:function(a){if(a.jc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.jf&&(this.jf=this.jf.M);a==this.mi&&(this.mi=this.mi.ia);a.M=null;a.ia=null;a.jc=null;for(a=a.Ac;null!=a;){b=a.M;this.cc.Qh(a.Na);a.Na=null;a.sc=-1;for(var d=a.Vb.Mb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Mc;d.Fb=!1;d.xb=0;var d=this.wh,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ia);c.M=null;c.ia=null;f=c.qb.ia;h=c.qb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.qb==c.C.Mb&&(c.C.Mb=c.C.Mb.M);c.qb==c.C.dc&&(c.C.dc=c.C.dc.ia);c.qb.M=null;c.qb.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.D.Mb&&(c.D.Mb=c.D.Mb.M);c.rb==c.D.dc&&(c.D.dc=c.D.dc.ia);c.rb.M=null;c.rb.ia=null;c.C.se--;c.D.se--;c.qb.Mc=null;c.rb.Mc=null;c.qb.Ud=null;c.rb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ja.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}this.pg--;a=b}this.Vi--},Pa:function(a){if(null!=a.jc)throw Error("A joint cannot belong to multiple worlds.");null==this.Kh?this.Kh=a:(this.hi.M=a,a.ia=this.hi);this.hi=a;a.jc=this;a.qb.Mc=a.D;a.rb.Mc=a.C;null==a.C.re?a.C.re=a.qb:(a.C.Oe.M=a.qb,a.qb.ia=a.C.Oe);a.C.Oe=a.qb;null==a.D.re?a.D.re=a.rb:(a.D.Oe.M=a.rb,a.rb.ia=a.D.Oe);a.D.Oe=a.rb;a.C.$g++;a.D.$g++;var b=a.C;b.Fb=!1;b.xb=0;b=a.D;b.Fb=!1;b.xb=0;a.ed();this.zk++},sl:function(a){if(a.jc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Kh&&(this.Kh=this.Kh.M);a==this.hi&&(this.hi=this.hi.ia);a.M=null;a.ia=null;a.jc=null;b=a.qb.ia;e=a.qb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.qb==a.C.re&&(a.C.re=a.C.re.M);a.qb==a.C.Oe&&(a.C.Oe=a.C.Oe.ia);a.qb.M=null;a.qb.ia=null;b=a.rb.ia;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.rb==a.D.re&&(a.D.re=a.D.re.M);a.rb==a.D.Oe&&(a.D.Oe=a.D.Oe.ia);a.rb.M=null;a.rb.ia=null;a.qb.Mc=null;a.rb.Mc=null;a.C.$g--;a.D.$g--;b=a.C;b.Fb=!1;b.xb=0;a=a.D;a.Fb=!1;a.xb=0;this.zk--},de:function(a){this.fi=a},lc:function(){return this.fi},sb:function(){null!=this.fi&&(cc.ab(this.cc,fc)&&this.Lm(this.fi,cc.kc(this.cc,fc).ge),this.Om(this.fi),this.Mm(this.fi))},Sd:function(a,b,e){var d=this.Oj.gj;d.x=a.x;d.y=a.y;d.z=a.z;d=this.Oj.end;d.x=b.x;d.y=b.y;d.z=b.z;this.Oj.ij=e;this.cc.Sd(a,b,this.Oj)},rf:function(a,b,e,d){this.Mi.Ul=a;var c=this.Mi.gj;c.v=b.v;c.A=b.A;c.B=b.B;c.o=b.o;c.f=b.f;c.h=b.h;c.i=b.i;c.m=b.m;c.j=b.j;c.l=b.l;c.g=b.g;c.s=b.s;c=this.Mi.Vf;c.x=e.x;c.y=e.y;c.z=e.z;this.Mi.ij=d;this.cc.rf(a,b,e,this.Mi)},eh:function(a,b){this.ek.u.Zd(a);this.ek.Bl=b;this.cc.eh(a,this.ek)},cd:function(){return this.jf},rc:function(){return this.Kh},Kb:function(){return this.cc},kc:function(){return this.wh},ad:function(){return this.Vi},Cc:function(){return this.zk},Pd:function(){return this.pg},zc:function(){return this.Mj},bd:function(){return this.Bk},me:function(a){this.Bk=a},Hc:function(){return this.Ak},fe:function(a){this.Ak=a},qc:function(){return this.lk},ee:function(a){var b=this.lk;b.x=a.x;b.y=a.y;b.z=a.z},qa:ra};Se.R=!0;Se.Jb=xc;Se.prototype=sb(xc.prototype,{td:function(a){a=a.userData;a.Ib.Sd(this.gj,this.end,a.a,this.wi)&&this.ij.td(a,this.wi)},qa:Se});ue.R=!0;ue.Jb=xc;ue.prototype=sb(xc.prototype,{td:function(a){a=a.userData;cc.ab(a.Ib,mb)&&Rb.Pa.rf(this.Ul,a.Ib,this.gj,a.a,this.Vf,this.O,this.wi)&&this.ij.td(a,this.wi)},qa:ue});pf.R=!0;pf.Jb=xc;pf.prototype=sb(xc.prototype,{td:function(a){a=a.userData;var b=a.u;b.ma<this.u.ja&&b.ja>this.u.ma&&b.na<this.u.ka&&b.ka>this.u.na&&b.oa<this.u.la&&b.la>this.u.oa&&this.Bl.td(a)},qa:pf});ed.R=!0;ed.prototype={td:function(){},qa:ed};Xc.R=!0;Xc.prototype={Pa:function(){},sb:function(){},$e:function(){},ab:function(){},qa:Xc};Mc.R=!0;Mc.prototype={td:function(){},qa:Mc};wd.R=!0;wd.Jb=Mc;wd.prototype=sb(Mc.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.O();this.normal.O();this.hit=!1},td:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}},qa:wd});Hb.R=!0;Hb.prototype={Pk:function(a,b){var e=this.p,d=(0==e.c?new t:e.b[--e.c]).za(a.x,a.y,a.z),e=this.p,c=(0==e.c?new t:e.b[--e.c]).za(a.x,a.y,b.z),e=this.p,f=(0==e.c?new t:e.b[--e.c]).za(a.x,b.y,a.z),e=this.p,h=(0==e.c?new t:e.b[--e.c]).za(a.x,b.y,b.z),e=this.p,l=(0==e.c?new t:e.b[--e.c]).za(b.x,a.y,a.z),e=this.p,e=(0==e.c?new t:e.b[--e.c]).za(b.x,a.y,b.z),g=this.p;a=(0==g.c?new t:g.b[--g.c]).za(b.x,b.y,a.z);g=this.p;b=(0==g.c?new t:g.b[--g.c]).za(b.x,b.y,b.z);g=this.p;if(null!=d){d.O();if(g.c==g.b.length){for(var k=Array(g.c<<1),m=0,n=g.c;m<n;){var q=m++;k[q]=g.b[q];g.b[q]=null}g.b=k}g.b[g.c++]=d}d=this.p;if(null!=c){c.O();if(d.c==d.b.length){g=Array(d.c<<1);k=0;for(m=d.c;k<m;)n=k++,g[n]=d.b[n],d.b[n]=null;d.b=g}d.b[d.c++]=c}c=this.p;if(null!=f){f.O();if(c.c==c.b.length){d=Array(c.c<<1);g=0;for(k=c.c;g<k;)m=g++,d[m]=c.b[m],c.b[m]=null;c.b=d}c.b[c.c++]=f}f=this.p;if(null!=h){h.O();if(f.c==f.b.length){c=Array(f.c<<1);d=0;for(g=f.c;d<g;)k=d++,c[k]=f.b[k],f.b[k]=null;f.b=c}f.b[f.c++]=h}h=this.p;if(null!=l){l.O();if(h.c==h.b.length){f=Array(h.c<<1);c=0;for(d=h.c;c<d;)g=c++,f[g]=h.b[g],h.b[g]=null;h.b=f}h.b[h.c++]=l}l=this.p;if(null!=e){e.O();if(l.c==l.b.length){h=Array(l.c<<1);f=0;for(c=l.c;f<c;)d=f++,h[d]=l.b[d],l.b[d]=null;l.b=h}l.b[l.c++]=e}e=this.p;if(null!=a){a.O();if(e.c==e.b.length){l=Array(e.c<<1);h=0;for(f=e.c;h<f;)c=h++,l[c]=e.b[c],e.b[c]=null;e.b=l}e.b[e.c++]=a}a=this.p;if(null!=b){b.O();if(a.c==a.b.length){e=Array(a.c<<1);l=0;for(h=a.c;l<h;)f=l++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=b}},ellipse:function(a,b,e,d,c,f){this.arc(a,b,e,d,c,0,6.28318530717958,!1,f)},arc:function(a,b,e,d,c,f,h){var l=this.p,l=0==l.c?new t:l.b[--l.c];l.x=b.x;l.y=b.y;l.z=b.z;b=l.y*d;var g=l.z*d;l.x=l.x*d;l.y=b;l.z=g;b=l;d=this.p;d=0==d.c?new t:d.b[--d.c];d.x=e.x;d.y=e.y;d.z=e.z;e=d.y*c;l=d.z*c;d.x=d.x*c;d.y=e;d.z=l;e=d;c=h-f;0>c&&(c=-c);(l=c/.5235987755982984+.5|0)||(l=1);c=f;f=(h-f)/l;h=this.p;h=0==h.c?new t:h.b[--h.c];h.x=a.x;h.y=a.y;h.z=a.z;d=Math.cos(c);var g=h.y+b.y*d,k=h.z+b.z*d;h.x+=b.x*d;h.y=g;h.z=k;d=Math.sin(c);g=h.y+e.y*d;k=h.z+e.z*d;h.x+=e.x*d;h.y=g;h.z=k;for(d=0;d<l;){d++;c+=f;g=this.p;g=0==g.c?new t:g.b[--g.c];g.x=a.x;g.y=a.y;g.z=a.z;var k=Math.cos(c),m=g.y+b.y*k,n=g.z+b.z*k;g.x=g.x+b.x*k;g.y=m;g.z=n;k=Math.sin(c);m=g.y+e.y*k;n=g.z+e.z*k;g.x=g.x+e.x*k;g.y=m;g.z=n;k=this.p;if(null!=h){h.O();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=h}h=g}a=this.p;if(null!=h){h.O();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(d=a.c;f<d;)l=f++,c[l]=a.b[l],a.b[l]=null;a.b=c}a.b[a.c++]=h}a=this.p;if(null!=b){b.O();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(h=a.c;f<h;)d=f++,c[d]=a.b[d],a.b[d]=null;a.b=c}a.b[a.c++]=b}b=this.p;if(null!=e){e.O();if(b.c==b.b.length){a=Array(b.c<<1);c=0;for(f=b.c;c<f;)h=c++,a[h]=b.b[h],b.b[h]=null;b.b=a}b.b[b.c++]=e}},Tl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.pb?new O:q.kb[--q.pb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var A=this.p,u=0==A.c?new t:A.b[--A.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,z=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=z;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=u.x;x.y=u.y;x.z=u.z;var yb=-b,N=x.y+f.y*yb,G=x.z+f.z*yb;x.x+=f.x*yb;x.y=N;x.z=G;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ga=0==L.c?new t:L.b[--L.c];ga.x=u.x;ga.y=u.y;ga.z=u.z;var M=ga.y+f.y*b,Vb=ga.z+f.z*b;ga.x+=f.x*b;ga.y=M;ga.z=Vb;var ha=ga.y+0*k.y,ka=ga.z+0*k.z;ga.x+=0*k.x;ga.y=ha;ga.z=ka;var Oa=this.p,U=0==Oa.c?new t:Oa.b[--Oa.c];U.x=u.x;U.y=u.y;U.z=u.z;var R=U.y+0*f.y,Wb=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=Wb;var Ma=-b,Ra=U.y+k.y*Ma,vc=U.z+k.z*Ma;U.x+=k.x*Ma;U.y=Ra;U.z=vc;var Pa=this.p,Aa=0==Pa.c?new t:Pa.b[--Pa.c];Aa.x=u.x;Aa.y=u.y;Aa.z=u.z;var zb=Aa.y+0*f.y,J=Aa.z+0*f.z;Aa.x+=0*f.x;Aa.y=zb;Aa.z=J;var Qa=Aa.y+k.y*b,ba=Aa.z+k.z*b;Aa.x+=k.x*b;Aa.y=Qa;Aa.z=ba;this.ellipse(u,f,k,b,b,d);var Q=this.p;if(null!=x){x.O();if(Q.c==Q.b.length){for(var P=Array(Q.c<<1),wa=0,ta=Q.c;wa<ta;){var W=wa++;P[W]=Q.b[W];Q.b[W]=null}Q.b=P}Q.b[Q.c++]=x}var oa=this.p;if(null!=ga){ga.O();if(oa.c==oa.b.length){for(var y=Array(oa.c<<1),Ha=0,ca=oa.c;Ha<ca;){var Ca=Ha++;y[Ca]=oa.b[Ca];oa.b[Ca]=null}oa.b=y}oa.b[oa.c++]=ga}var xa=this.p;if(null!=U){U.O();if(xa.c==xa.b.length){for(var Da=Array(xa.c<<1),Sa=0,la=xa.c;Sa<la;){var Z=Sa++;Da[Z]=xa.b[Z];xa.b[Z]=null}xa.b=Da}xa.b[xa.c++]=U}var Ea=this.p;if(null!=Aa){Aa.O();if(Ea.c==Ea.b.length){for(var qa=Array(Ea.c<<1),va=0,I=Ea.c;va<I;){var Ka=va++;qa[Ka]=Ea.b[Ka];Ea.b[Ka]=null}Ea.b=qa}Ea.b[Ea.c++]=Aa}}else{for(var Xa=1/Math.sqrt(b*b+4*e*e),S=2*e*Xa,Ya=b*Xa,T=0;8>T;){var K=T++,ia=this.Af[K],fb=this.jj[K];ia.x=fb.x;ia.y=fb.y;ia.z=fb.z;var da=ia,ra=da.y*S,sa=da.z*S;da.x=da.x*S;da.y=ra;da.z=sa;da.y+=Ya;var eb=this.Af[K],jb=eb.x*p.e10+eb.y*p.e11+eb.z*p.e12,Za=eb.x*p.e20+eb.y*p.e21+eb.z*p.e22;eb.x=eb.x*p.e00+eb.y*p.e01+eb.z*p.e02;eb.y=jb;eb.z=Za;var ma=this.ae[K],na=this.Sl[K];ma.x=na.x;ma.y=na.y;ma.z=na.z;var Ia=ma,Fa=Ia.y*S,ob=Ia.z*S;Ia.x=Ia.x*S;Ia.y=Fa;Ia.z=ob;Ia.y+=Ya;var fa=this.ae[K],ea=fa.x*p.e10+fa.y*p.e11+fa.z*p.e12,ja=fa.x*p.e20+fa.y*p.e21+fa.z*p.e22;fa.x=fa.x*p.e00+fa.y*p.e01+fa.z*p.e02;fa.y=ea;fa.z=ja;var bb=this.Fe[K],ya=this.jj[K];bb.x=ya.x;bb.y=ya.y;bb.z=ya.z;var tb=bb,Ua=tb.x*p.e10+tb.y*p.e11+tb.z*p.e12,qb=tb.x*p.e20+tb.y*p.e21+tb.z*p.e22;tb.x=tb.x*p.e00+tb.y*p.e01+tb.z*p.e02;tb.y=Ua;tb.z=qb;var rb=tb,ub=rb.y*b,Va=rb.z*b;rb.x=rb.x*b;rb.y=ub;rb.z=Va;var Db=rb,mc=Db.y+n.y,$a=Db.z+n.z;Db.x=Db.x+n.x;Db.y=mc;Db.z=$a;var ua=this.Fe[K],Gb=-e,H=ua.y+l.y*Gb,pb=ua.z+l.z*Gb;ua.x=ua.x+l.x*Gb;ua.y=H;ua.z=pb}for(var cb=0;8>cb;){var rc=cb++,ab=this.ae[rc],gb=this.p,B=0==gb.c?new t:gb.b[--gb.c];B.x=l.x;B.y=l.y;B.z=l.z;var Bb=B,pa=-Bb.y,Ba=-Bb.z;Bb.x=-Bb.x;Bb.y=pa;Bb.z=Ba;var ab=Bb,Eb=this.p;if(null!=ab){ab.O();if(Eb.c==Eb.b.length){for(var Na=Array(Eb.c<<1),nb=0,wb=Eb.c;nb<wb;){var xb=nb++;Na[xb]=Eb.b[xb];Eb.b[xb]=null}Eb.b=Na}Eb.b[Eb.c++]=ab}}}var db=this.p;if(null!=v){v.O();if(db.c==db.b.length){for(var Y=Array(db.c<<1),La=0,kb=db.c;La<kb;){var Ta=La++;Y[Ta]=db.b[Ta];db.b[Ta]=null}db.b=Y}db.b[db.c++]=v}var hb=this.p;if(null!=u){u.O();if(hb.c==hb.b.length){for(var Ja=Array(hb.c<<1),Ib=0,za=hb.c;Ib<za;){var X=Ib++;Ja[X]=hb.b[X];hb.b[X]=null}hb.b=Ja}hb.b[hb.c++]=u}var Ab=this.p;if(null!=n){n.O();if(Ab.c==Ab.b.length){for(var Dc=Array(Ab.c<<1),Ga=0,mb=Ab.c;Ga<mb;){var gc=Ga++;Dc[gc]=Ab.b[gc];Ab.b[gc]=null}Ab.b=Dc}Ab.b[Ab.c++]=n}var Nc=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Nc.pb==Nc.kb.length){for(var vb=Array(Nc.pb<<1),Wa=0,yc=Nc.pb;Wa<yc;){var sb=Wa++;vb[sb]=Nc.kb[sb];Nc.kb[sb]=null}Nc.kb=vb}Nc.kb[Nc.pb++]=p}var jc=this.p;if(null!=f){f.O();if(jc.c==jc.b.length){for(var uc=Array(jc.c<<1),kc=0,ac=jc.c;kc<ac;){var Xb=kc++;uc[Xb]=jc.b[Xb];jc.b[Xb]=null}jc.b=uc}jc.b[jc.c++]=f}var Yb=this.p;if(null!=l){l.O();if(Yb.c==Yb.b.length){for(var Sb=Array(Yb.c<<1),hc=0,Tb=Yb.c;hc<Tb;){var Pb=hc++;Sb[Pb]=Yb.b[Pb];Yb.b[Pb]=null}Yb.b=Sb}Yb.b[Yb.c++]=l}var Zb=this.p;if(null!=k){k.O();if(Zb.c==Zb.b.length){for(var ic=Array(Zb.c<<1),Jb=0,$b=Zb.c;Jb<$b;){var lb=Jb++;ic[lb]=Zb.b[lb];Zb.b[lb]=null}Zb.b=ic}Zb.b[Zb.c++]=k}},Wl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.pb?new O:q.kb[--q.pb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var A=this.p,u=0==A.c?new t:A.b[--A.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,z=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=z;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=v.x;x.y=v.y;x.z=v.z;var yb=-b,N=x.y+f.y*yb,G=x.z+f.z*yb;x.x+=f.x*yb;x.y=N;x.z=G;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ga=0==L.c?new t:L.b[--L.c];ga.x=v.x;ga.y=v.y;ga.z=v.z;var M=ga.y+f.y*b,Vb=ga.z+f.z*b;ga.x+=f.x*b;ga.y=M;ga.z=Vb;var ha=ga.y+0*k.y,ka=ga.z+0*k.z;ga.x+=0*k.x;ga.y=ha;ga.z=ka;var Oa=this.p,U=0==Oa.c?new t:Oa.b[--Oa.c];U.x=v.x;U.y=v.y;U.z=v.z;var R=U.y+0*f.y,Wb=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=Wb;var Ma=-b,Ra=U.y+k.y*Ma,vc=U.z+k.z*Ma;U.x+=k.x*Ma;U.y=Ra;U.z=vc;var Pa=this.p,Aa=0==Pa.c?new t:Pa.b[--Pa.c];Aa.x=v.x;Aa.y=v.y;Aa.z=v.z;var zb=Aa.y+0*f.y,J=Aa.z+0*f.z;Aa.x+=0*f.x;Aa.y=zb;Aa.z=J;var Qa=Aa.y+k.y*b,ba=Aa.z+k.z*b;Aa.x+=k.x*b;Aa.y=Qa;Aa.z=ba;var Q=this.p,P=0==Q.c?new t:Q.b[--Q.c];P.x=u.x;P.y=u.y;P.z=u.z;var wa=-b,ta=P.y+f.y*wa,W=P.z+f.z*wa;P.x+=f.x*wa;P.y=ta;P.z=W;var oa=P.y+0*k.y,y=P.z+0*k.z;P.x+=0*k.x;P.y=oa;P.z=y;var Ha=this.p,ca=0==Ha.c?new t:Ha.b[--Ha.c];ca.x=u.x;ca.y=u.y;ca.z=u.z;var Ca=ca.y+f.y*b,xa=ca.z+f.z*b;ca.x+=f.x*b;ca.y=Ca;ca.z=xa;var Da=ca.y+0*k.y,Sa=ca.z+0*k.z;ca.x+=0*k.x;ca.y=Da;ca.z=Sa;var la=this.p,Z=0==la.c?new t:la.b[--la.c];Z.x=u.x;Z.y=u.y;Z.z=u.z;var Ea=Z.y+0*f.y,qa=Z.z+0*f.z;Z.x+=0*f.x;Z.y=Ea;Z.z=qa;var va=-b,I=Z.y+k.y*va,Ka=Z.z+k.z*va;Z.x+=k.x*va;Z.y=I;Z.z=Ka;var Xa=this.p,S=0==Xa.c?new t:Xa.b[--Xa.c];S.x=u.x;S.y=u.y;S.z=u.z;var Ya=S.y+0*f.y,T=S.z+0*f.z;S.x+=0*f.x;S.y=Ya;S.z=T;var K=S.y+k.y*b,ia=S.z+k.z*b;S.x+=k.x*b;S.y=K;S.z=ia;this.ellipse(v,f,k,b,b,d);this.ellipse(u,f,k,b,b,d);var fb=this.p;if(null!=x){x.O();if(fb.c==fb.b.length){for(var da=Array(fb.c<<1),ra=0,sa=fb.c;ra<sa;){var eb=ra++;da[eb]=fb.b[eb];fb.b[eb]=null}fb.b=da}fb.b[fb.c++]=x}var jb=this.p;if(null!=ga){ga.O();if(jb.c==jb.b.length){for(var Za=Array(jb.c<<1),ma=0,na=jb.c;ma<na;){var Ia=ma++;Za[Ia]=jb.b[Ia];jb.b[Ia]=null}jb.b=Za}jb.b[jb.c++]=ga}var Fa=this.p;if(null!=U){U.O();if(Fa.c==Fa.b.length){for(var ob=Array(Fa.c<<1),fa=0,ea=Fa.c;fa<ea;){var ja=fa++;ob[ja]=Fa.b[ja];Fa.b[ja]=null}Fa.b=ob}Fa.b[Fa.c++]=U}var bb=this.p;if(null!=Aa){Aa.O();if(bb.c==bb.b.length){for(var ya=Array(bb.c<<1),tb=0,Ua=bb.c;tb<Ua;){var qb=tb++;ya[qb]=bb.b[qb];bb.b[qb]=null}bb.b=ya}bb.b[bb.c++]=Aa}var rb=this.p;if(null!=P){P.O();if(rb.c==rb.b.length){for(var ub=Array(rb.c<<1),Va=0,Db=rb.c;Va<Db;){var mc=Va++;ub[mc]=rb.b[mc];rb.b[mc]=null}rb.b=ub}rb.b[rb.c++]=P}var $a=this.p;if(null!=ca){ca.O();if($a.c==$a.b.length){for(var ua=Array($a.c<<1),Gb=0,H=$a.c;Gb<H;){var pb=Gb++;ua[pb]=$a.b[pb];$a.b[pb]=null}$a.b=ua}$a.b[$a.c++]=ca}var cb=this.p;if(null!=Z){Z.O();if(cb.c==cb.b.length){for(var rc=Array(cb.c<<1),ab=0,gb=cb.c;ab<gb;){var B=ab++;rc[B]=cb.b[B];cb.b[B]=null}cb.b=rc}cb.b[cb.c++]=Z}var Bb=this.p;if(null!=S){S.O();if(Bb.c==Bb.b.length){for(var pa=Array(Bb.c<<1),Ba=0,Eb=Bb.c;Ba<Eb;){var Na=Ba++;pa[Na]=Bb.b[Na];Bb.b[Na]=null}Bb.b=pa}Bb.b[Bb.c++]=S}}else{for(var nb=0;8>nb;){var wb=nb++,xb=this.Af[wb],db=this.jj[wb];xb.x=db.x;xb.y=db.y;xb.z=db.z;var Y=xb,La=Y.x*p.e10+Y.y*p.e11+Y.z*p.e12,kb=Y.x*p.e20+Y.y*p.e21+Y.z*p.e22;Y.x=Y.x*p.e00+Y.y*p.e01+Y.z*p.e02;Y.y=La;Y.z=kb;var Ta=this.ae[wb],hb=this.Af[wb];Ta.x=hb.x;Ta.y=hb.y;Ta.z=hb.z;var Ja=Ta,Ib=Ja.y*b,za=Ja.z*b;Ja.x=Ja.x*b;Ja.y=Ib;Ja.z=za;var X=Ja,Ab=X.y+n.y,Ga=X.z+n.z;X.x=X.x+n.x;X.y=Ab;X.z=Ga;var Pc=this.Fe[wb],vb=this.ae[wb];Pc.x=vb.x;Pc.y=vb.y;Pc.z=vb.z;var gc=this.ae[wb],mb=gc.y+l.y*e,sb=gc.z+l.z*e;gc.x=gc.x+l.x*e;gc.y=mb;gc.z=sb;var Wa=this.Fe[wb],yc=-e,Lb=Wa.y+l.y*yc,jc=Wa.z+l.z*yc;Wa.x=Wa.x+l.x*yc;Wa.y=Lb;Wa.z=jc}for(var uc=0;8>uc;){var kc=uc++,ac=v,Xb=this.ae[kc],Yb=this.ae[(kc+1)%8],Sb=l,ac=u,Xb=this.Fe[(kc+1)%8],Yb=this.Fe[kc],hc=this.p,Tb=0==hc.c?new t:hc.b[--hc.c];Tb.x=l.x;Tb.y=l.y;Tb.z=l.z;var Pb=Tb,Zb=-Pb.y,ic=-Pb.z;Pb.x=-Pb.x;Pb.y=Zb;Pb.z=ic;var Sb=Pb,Jb=this.p;if(null!=Sb){Sb.O();if(Jb.c==Jb.b.length){for(var $b=Array(Jb.c<<1),lb=0,ib=Jb.c;lb<ib;){var Kb=lb++;$b[Kb]=Jb.b[Kb];Jb.b[Kb]=null}Jb.b=$b}Jb.b[Jb.c++]=Sb}var ac=this.ae[kc],Xb=this.Fe[kc],Yb=this.Fe[(kc+1)%8],Qb=this.ae[(kc+1)%8],Sb=this.Af[kc],sc=this.Af[(kc+1)%8];this.rect(ac,Xb,Yb,Qb,Sb,Sb,sc,sc,d)}}var nc=this.p;if(null!=v){v.O();if(nc.c==nc.b.length){for(var jd=Array(nc.c<<1),rd=0,Hb=nc.c;rd<Hb;){var tc=rd++;jd[tc]=nc.b[tc];nc.b[tc]=null}nc.b=jd}nc.b[nc.c++]=v}var wc=this.p;if(null!=u){u.O();if(wc.c==wc.b.length){for(var Nb=Array(wc.c<<1),fc=0,ec=wc.c;fc<ec;){var Zc=fc++;Nb[Zc]=wc.b[Zc];wc.b[Zc]=null}wc.b=Nb}wc.b[wc.c++]=u}var Gc=this.p;if(null!=n){n.O();if(Gc.c==Gc.b.length){for(var Mb=Array(Gc.c<<1),oc=0,bc=Gc.c;oc<bc;){var Fb=oc++;Mb[Fb]=Gc.b[Fb];Gc.b[Fb]=null}Gc.b=Mb}Gc.b[Gc.c++]=n}var Cb=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Cb.pb==Cb.kb.length){for(var Rb=Array(Cb.pb<<1),dc=0,pc=Cb.pb;dc<pc;){var Ac=dc++;Rb[Ac]=Cb.kb[Ac];Cb.kb[Ac]=null}Cb.kb=Rb}Cb.kb[Cb.pb++]=p}var Ub=this.p;if(null!=f){f.O();if(Ub.c==Ub.b.length){for(var Bc=Array(Ub.c<<1),cc=0,zc=Ub.c;cc<zc;){var Qc=cc++;Bc[Qc]=Ub.b[Qc];Ub.b[Qc]=null}Ub.b=Bc}Ub.b[Ub.c++]=f}var lc=this.p;if(null!=l){l.O();if(lc.c==lc.b.length){for(var Ec=Array(lc.c<<1),Fc=0,Jc=lc.c;Fc<Jc;){var xc=Fc++;Ec[xc]=lc.b[xc];lc.b[xc]=null}lc.b=Ec}lc.b[lc.c++]=l}var Ob=this.p;if(null!=k){k.O();if(Ob.c==Ob.b.length){for(var Hc=Array(Ob.c<<1),Cc=0,qc=Ob.c;Cc<qc;){var Kc=Cc++;Hc[Kc]=Ob.b[Kc];Ob.b[Kc]=null}Ob.b=Hc}Ob.b[Ob.c++]=k}},Rl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.pb?new O:q.kb[--q.pb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);for(var r=this.rh,v=this.dk,aa=0;5>aa;)for(var w=aa++,A=0,u=this.rh[w].length;A<u;){var D=A++,V=v[w][D],z=this.bk[w][D];V.x=z.x;V.y=z.y;V.z=z.z;var E=V,x=E.x*p.e10+E.y*p.e11+E.z*p.e12,yb=E.x*p.e20+E.y*p.e21+E.z*p.e22;E.x=E.x*p.e00+E.y*p.e01+E.z*p.e02;E.y=x;E.z=yb}for(var N=0;4>N;){var G=N++;if(!G)for(var F=0;3>F;)for(var C=F++,L=0,M=this.rh[C].length;L<M;){var ra=L++,Vb=r[C][ra],ha=v[C][ra];Vb.x=ha.x;Vb.y=ha.y;Vb.z=ha.z;var ka=Vb,Oa=ka.y*b,U=ka.z*b;ka.x=ka.x*b;ka.y=Oa;ka.z=U;var R=ka,Wb=R.y+n.y,Ma=R.z+n.z;R.x=R.x+n.x;R.y=Wb;R.z=Ma;var Ra=R,vc=Ra.y+l.y*e,Pa=Ra.z+l.z*e;Ra.x=Ra.x+l.x*e;Ra.y=vc;Ra.z=Pa}if(2==G)for(var Aa=2;5>Aa;)for(var zb=Aa++,J=0,Qa=this.rh[zb].length;J<Qa;){var ba=J++,Q=r[zb][ba],P=v[zb][ba];Q.x=P.x;Q.y=P.y;Q.z=P.z;var wa=Q,ta=wa.y*b,W=wa.z*b;wa.x=wa.x*b;wa.y=ta;wa.z=W;var oa=wa,y=oa.y+n.y,Ha=oa.z+n.z;oa.x=oa.x+n.x;oa.y=y;oa.z=Ha;var ca=oa,Ca=-e,xa=ca.y+l.y*Ca,Da=ca.z+l.z*Ca;ca.x=ca.x+l.x*Ca;ca.y=xa;ca.z=Da}for(var Sa=0;8>Sa;){var la=Sa++,Z,Ea,qa,va,I,Ka,Xa,S;G?3==G?this.wireframe?(Z=r[4][0],Ea=r[G][(la+1)%8],qa=r[G][la]):(Z=r[4][0],Ea=r[G][(la+1)%8],qa=r[G][la],I=v[4][0],Ka=v[G][(la+1)%8],Xa=v[G][la]):this.wireframe?(Z=r[G][la],Ea=r[G][(la+1)%8],qa=r[G+1][la]):(Z=r[G][la],Ea=r[G][(la+1)%8],qa=r[G+1][la],va=r[G+1][(la+1)%8],I=v[G][la],Ka=v[G][(la+1)%8],Xa=v[G+1][la],S=v[G+1][(la+1)%8],this.rect(Z,qa,va,Ea,I,Xa,S,Ka,d)):this.wireframe?(Z=r[0][0],Ea=r[1][la]):(Z=r[0][0],Ea=r[1][la],qa=r[1][(la+1)%8],I=v[0][0],Ka=v[1][la],Xa=v[1][(la+1)%8])}}var Ya=this.p,T=0==Ya.c?new t:Ya.b[--Ya.c];T.x=n.x;T.y=n.y;T.z=n.z;var K=T.y+l.y*e,ia=T.z+l.z*e;T.x+=l.x*e;T.y=K;T.z=ia;var fb=this.p,da=0==fb.c?new t:fb.b[--fb.c];da.x=n.x;da.y=n.y;da.z=n.z;var pa=-e,sa=da.y+l.y*pa,eb=da.z+l.z*pa;da.x+=l.x*pa;da.y=sa;da.z=eb;if(this.wireframe){var jb=this.p,Za=0==jb.c?new t:jb.b[--jb.c];Za.x=T.x;Za.y=T.y;Za.z=T.z;var ma=-b,na=Za.y+f.y*ma,Ia=Za.z+f.z*ma;Za.x+=f.x*ma;Za.y=na;Za.z=Ia;var Fa=Za.y+0*k.y,ob=Za.z+0*k.z;Za.x+=0*k.x;Za.y=Fa;Za.z=ob;var fa=this.p,ea=0==fa.c?new t:fa.b[--fa.c];ea.x=T.x;ea.y=T.y;ea.z=T.z;var ja=ea.y+f.y*b,bb=ea.z+f.z*b;ea.x+=f.x*b;ea.y=ja;ea.z=bb;var ya=ea.y+0*k.y,tb=ea.z+0*k.z;ea.x+=0*k.x;ea.y=ya;ea.z=tb;var Ua=this.p,qb=0==Ua.c?new t:Ua.b[--Ua.c];qb.x=T.x;qb.y=T.y;qb.z=T.z;var rb=qb.y+0*f.y,ub=qb.z+0*f.z;qb.x+=0*f.x;qb.y=rb;qb.z=ub;var Va=-b,Db=qb.y+k.y*Va,mc=qb.z+k.z*Va;qb.x+=k.x*Va;qb.y=Db;qb.z=mc;var $a=this.p,ua=0==$a.c?new t:$a.b[--$a.c];ua.x=T.x;ua.y=T.y;ua.z=T.z;var Gb=ua.y+0*f.y,H=ua.z+0*f.z;ua.x+=0*f.x;ua.y=Gb;ua.z=H;var pb=ua.y+k.y*b,cb=ua.z+k.z*b;ua.x+=k.x*b;ua.y=pb;ua.z=cb;var rc=this.p,ab=0==rc.c?new t:rc.b[--rc.c];ab.x=da.x;ab.y=da.y;ab.z=da.z;var gb=-b,B=ab.y+f.y*gb,Bb=ab.z+f.z*gb;ab.x+=f.x*gb;ab.y=B;ab.z=Bb;var Ba=ab.y+0*k.y,za=ab.z+0*k.z;ab.x+=0*k.x;ab.y=Ba;ab.z=za;var Eb=this.p,Na=0==Eb.c?new t:Eb.b[--Eb.c];Na.x=da.x;Na.y=da.y;Na.z=da.z;var nb=Na.y+f.y*b,wb=Na.z+f.z*b;Na.x+=f.x*b;Na.y=nb;Na.z=wb;var xb=Na.y+0*k.y,db=Na.z+0*k.z;Na.x+=0*k.x;Na.y=xb;Na.z=db;var Y=this.p,La=0==Y.c?new t:Y.b[--Y.c];La.x=da.x;La.y=da.y;La.z=da.z;var kb=La.y+0*f.y,Ta=La.z+0*f.z;La.x+=0*f.x;La.y=kb;La.z=Ta;var hb=-b,Ja=La.y+k.y*hb,Ib=La.z+k.z*hb;La.x+=k.x*hb;La.y=Ja;La.z=Ib;var Ga=this.p,X=0==Ga.c?new t:Ga.b[--Ga.c];X.x=da.x;X.y=da.y;X.z=da.z;var Ab=X.y+0*f.y,Dc=X.z+0*f.z;X.x+=0*f.x;X.y=Ab;X.z=Dc;var vb=X.y+k.y*b,Wa=X.z+k.z*b;X.x+=k.x*b;X.y=vb;X.z=Wa;this.ellipse(T,f,k,b,b,d);this.ellipse(da,f,k,b,b,d);var gc=this.p;if(null!=Za){Za.O();if(gc.c==gc.b.length){for(var mb=Array(gc.c<<1),sb=0,Lb=gc.c;sb<Lb;){var yc=sb++;mb[yc]=gc.b[yc];gc.b[yc]=null}gc.b=mb}gc.b[gc.c++]=Za}var ib=this.p;if(null!=ea){ea.O();if(ib.c==ib.b.length){for(var jc=Array(ib.c<<1),uc=0,kc=ib.c;uc<kc;){var ac=uc++;jc[ac]=ib.b[ac];ib.b[ac]=null}ib.b=jc}ib.b[ib.c++]=ea}var Xb=this.p;if(null!=qb){qb.O();if(Xb.c==Xb.b.length){for(var Yb=Array(Xb.c<<1),Sb=0,hc=Xb.c;Sb<hc;){var Tb=Sb++;Yb[Tb]=Xb.b[Tb];Xb.b[Tb]=null}Xb.b=Yb}Xb.b[Xb.c++]=qb}var Pb=this.p;if(null!=ua){ua.O();if(Pb.c==Pb.b.length){for(var Zb=Array(Pb.c<<1),ic=0,Jb=Pb.c;ic<Jb;){var $b=ic++;Zb[$b]=Pb.b[$b];Pb.b[$b]=null}Pb.b=Zb}Pb.b[Pb.c++]=ua}var lb=this.p;if(null!=ab){ab.O();if(lb.c==lb.b.length){for(var Kb=Array(lb.c<<1),Cb=0,Qb=lb.c;Cb<Qb;){var sc=Cb++;Kb[sc]=lb.b[sc];lb.b[sc]=null}lb.b=Kb}lb.b[lb.c++]=ab}var nc=this.p;if(null!=Na){Na.O();if(nc.c==nc.b.length){for(var jd=Array(nc.c<<1),rd=0,Ub=nc.c;rd<Ub;){var tc=rd++;jd[tc]=nc.b[tc];nc.b[tc]=null}nc.b=jd}nc.b[nc.c++]=Na}var wc=this.p;if(null!=La){La.O();if(wc.c==wc.b.length){for(var Hb=Array(wc.c<<1),Nb=0,fc=wc.c;Nb<fc;){var Fb=Nb++;Hb[Fb]=wc.b[Fb];wc.b[Fb]=null}wc.b=Hb}wc.b[wc.c++]=La}var Gc=this.p;if(null!=X){X.O();if(Gc.c==Gc.b.length){for(var lc=Array(Gc.c<<1),Mb=0,oc=Gc.c;Mb<oc;){var ec=Mb++;lc[ec]=Gc.b[ec];Gc.b[ec]=null}Gc.b=lc}Gc.b[Gc.c++]=X}}else{for(var bc=0;8>bc;){var Rb=bc++,dc=this.Af[Rb],pc=this.jj[Rb];dc.x=pc.x;dc.y=pc.y;dc.z=pc.z;var Ac=dc,Ob=Ac.x*p.e10+Ac.y*p.e11+Ac.z*p.e12,Bc=Ac.x*p.e20+Ac.y*p.e21+Ac.z*p.e22;Ac.x=Ac.x*p.e00+Ac.y*p.e01+Ac.z*p.e02;Ac.y=Ob;Ac.z=Bc;var cc=this.ae[Rb],zc=this.Af[Rb];cc.x=zc.x;cc.y=zc.y;cc.z=zc.z;var Qc=cc,Ec=Qc.y*b,Fc=Qc.z*b;Qc.x=Qc.x*b;Qc.y=Ec;Qc.z=Fc;var xc=Qc,Jc=xc.y+n.y,Kc=xc.z+n.z;xc.x=xc.x+n.x;xc.y=Jc;xc.z=Kc;var Hc=this.Fe[Rb],Cc=this.ae[Rb];Hc.x=Cc.x;Hc.y=Cc.y;Hc.z=Cc.z;var qc=this.ae[Rb],Yc=qc.y+l.y*e,ad=qc.z+l.z*e;qc.x=qc.x+l.x*e;qc.y=Yc;qc.z=ad;var Oc=this.Fe[Rb],Xc=-e,fd=Oc.y+l.y*Xc,gd=Oc.z+l.z*Xc;Oc.x=Oc.x+l.x*Xc;Oc.y=fd;Oc.z=gd}for(var bd=0;8>bd;){var Rc=bd++,ed=this.Af[Rc],sd=this.Af[(Rc+1)%8];this.rect(this.ae[Rc],this.Fe[Rc],this.Fe[(Rc+1)%8],this.ae[(Rc+1)%8],ed,ed,sd,sd,d)}}var Uc=this.p;if(null!=T){T.O();if(Uc.c==Uc.b.length){for(var hd=Array(Uc.c<<1),id=0,qd=Uc.c;id<qd;){var dd=id++;hd[dd]=Uc.b[dd];Uc.b[dd]=null}Uc.b=hd}Uc.b[Uc.c++]=T}var Mc=this.p;if(null!=da){da.O();if(Mc.c==Mc.b.length){for(var nd=Array(Mc.c<<1),od=0,yd=Mc.c;od<yd;){var md=od++;nd[md]=Mc.b[md];Mc.b[md]=null}Mc.b=nd}Mc.b[Mc.c++]=da}var td=this.p;if(null!=n){n.O();if(td.c==td.b.length){for(var wd=Array(td.c<<1),xd=0,Gd=td.c;xd<Gd;){var pd=xd++;wd[pd]=td.b[pd];td.b[pd]=null}td.b=wd}td.b[td.c++]=n}var Jd=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Jd.pb==Jd.kb.length){for(var Ed=Array(Jd.pb<<1),Fd=0,Nd=Jd.pb;Fd<Nd;){var Dd=Fd++;Ed[Dd]=Jd.kb[Dd];Jd.kb[Dd]=null}Jd.kb=Ed}Jd.kb[Jd.pb++]=p}var Lc=this.p;if(null!=f){f.O();if(Lc.c==Lc.b.length){for(var kd=Array(Lc.c<<1),ld=0,Sd=Lc.c;ld<Sd;){var Hd=ld++;kd[Hd]=Lc.b[Hd];Lc.b[Hd]=null}Lc.b=kd}Lc.b[Lc.c++]=f}var Vc=this.p;if(null!=l){l.O();if(Vc.c==Vc.b.length){for(var Wc=Array(Vc.c<<1),$c=0,ud=Vc.c;$c<ud;){var cd=$c++;Wc[cd]=Vc.b[cd];Vc.b[cd]=null}Vc.b=Wc}Vc.b[Vc.c++]=l}var Sc=this.p;if(null!=k){k.O();if(Sc.c==Sc.b.length){for(var Qd=Array(Sc.c<<1),Rd=0,Wd=Sc.c;Rd<Wd;){var Kd=Rd++;Qd[Kd]=Sc.b[Kd];Sc.b[Kd]=null}Sc.b=Qd}Sc.b[Sc.c++]=k}},zm:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],d=this.p,d=0==d.pb?new O:d.kb[--d.pb];c.x=a.v;c.y=a.A;c.z=a.B;d.e00=a.o;d.e01=a.f;d.e02=a.h;d.e10=a.i;d.e11=a.m;d.e12=a.j;d.e20=a.l;d.e21=a.g;d.e22=a.s;a=this.rh;for(var f=this.dk,h=0;5>h;)for(var l=h++,g=0,k=this.rh[l].length;g<k;){var m=g++,n=f[l][m],q=this.bk[l][m];n.x=q.x;n.y=q.y;n.z=q.z;var q=n.x*d.e10+n.y*d.e11+n.z*d.e12,p=n.x*d.e20+n.y*d.e21+n.z*d.e22;n.x=n.x*d.e00+n.y*d.e01+n.z*d.e02;n.y=q;n.z=p;n=a[l][m];m=f[l][m];n.x=m.x;n.y=m.y;n.z=m.z;m=n;n=m.y*b;q=m.z*b;m.x=m.x*b;m.y=n;m.z=q;n=m.y+c.y;q=m.z+c.z;m.x=m.x+c.x;m.y=n;m.z=q}for(b=0;4>b;)for(h=b++,l=0;8>l;){var r=l++,v;h&&3!=h&&!this.wireframe&&(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],n=a[h+1][(r+1)%8],q=f[h][r],p=f[h][(r+1)%8],v=f[h+1][r],r=f[h+1][(r+1)%8],this.rect(g,m,n,k,q,v,r,p,e))}e=this.p;if(null!=c){c.O();if(e.c==e.b.length){a=Array(e.c<<1);f=0;for(b=e.c;f<b;)h=f++,a[h]=e.b[h],e.b[h]=null;e.b=a}e.b[e.c++]=c}c=this.p;if(null!=d){d.e00=1;d.e01=0;d.e02=0;d.e10=0;d.e11=1;d.e12=0;d.e20=0;d.e21=0;d.e22=1;if(c.pb==c.kb.length){e=Array(c.pb<<1);a=0;for(f=c.pb;a<f;)b=a++,e[b]=c.kb[b],c.kb[b]=null;c.kb=e}c.kb[c.pb++]=d}},Pl:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],f=this.p,h=0==f.c?new t:f.b[--f.c],l=this.p,g=0==l.c?new t:l.b[--l.c],k=this.p,m=0==k.c?new t:k.b[--k.c],n=this.p,q=0==n.pb?new O:n.kb[--n.pb];m.x=a.v;m.y=a.A;m.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;c.za(q.e00,q.e10,q.e20);h.za(q.e01,q.e11,q.e21);g.za(q.e02,q.e12,q.e22);var p=b.x,r=b.y,v=b.z,aa=this.p,w=0==aa.c?new t:aa.b[--aa.c];w.x=m.x;w.y=m.y;w.z=m.z;var A=-p,u=w.y+c.y*A,D=w.z+c.z*A;w.x+=c.x*A;w.y=u;w.z=D;var V=-r,z=w.y+h.y*V,E=w.z+h.z*V;w.x+=h.x*V;w.y=z;w.z=E;var x=-v,yb=w.y+g.y*x,N=w.z+g.z*x;w.x+=g.x*x;w.y=yb;w.z=N;var G=this.p,F=0==G.c?new t:G.b[--G.c];F.x=m.x;F.y=m.y;F.z=m.z;var C=-p,L=F.y+c.y*C,M=F.z+c.z*C;F.x+=c.x*C;F.y=L;F.z=M;var ha=-r,Vb=F.y+h.y*ha,ra=F.z+h.z*ha;F.x+=h.x*ha;F.y=Vb;F.z=ra;var ka=F.y+g.y*v,Oa=F.z+g.z*v;F.x+=g.x*v;F.y=ka;F.z=Oa;var U=this.p,R=0==U.c?new t:U.b[--U.c];R.x=m.x;R.y=m.y;R.z=m.z;var Wb=-p,Ma=R.y+c.y*Wb,Ra=R.z+c.z*Wb;R.x+=c.x*Wb;R.y=Ma;R.z=Ra;var vc=R.y+h.y*r,Pa=R.z+h.z*r;R.x+=h.x*r;R.y=vc;R.z=Pa;var Aa=-v,zb=R.y+g.y*Aa,J=R.z+g.z*Aa;R.x+=g.x*Aa;R.y=zb;R.z=J;var Qa=this.p,ba=0==Qa.c?new t:Qa.b[--Qa.c];ba.x=m.x;ba.y=m.y;ba.z=m.z;var Q=-p,P=ba.y+c.y*Q,wa=ba.z+c.z*Q;ba.x+=c.x*Q;ba.y=P;ba.z=wa;var ta=ba.y+h.y*r,W=ba.z+h.z*r;ba.x+=h.x*r;ba.y=ta;ba.z=W;var oa=ba.y+g.y*v,y=ba.z+g.z*v;ba.x+=g.x*v;ba.y=oa;ba.z=y;var Ha=this.p,ca=0==Ha.c?new t:Ha.b[--Ha.c];ca.x=m.x;ca.y=m.y;ca.z=m.z;var Ca=ca.y+c.y*p,xa=ca.z+c.z*p;ca.x+=c.x*p;ca.y=Ca;ca.z=xa;var Da=-r,Sa=ca.y+h.y*Da,la=ca.z+h.z*Da;ca.x+=h.x*Da;ca.y=Sa;ca.z=la;var Z=-v,Ea=ca.y+g.y*Z,qa=ca.z+g.z*Z;ca.x+=g.x*Z;ca.y=Ea;ca.z=qa;var va=this.p,I=0==va.c?new t:va.b[--va.c];I.x=m.x;I.y=m.y;I.z=m.z;var Ka=I.y+c.y*p,Xa=I.z+c.z*p;I.x+=c.x*p;I.y=Ka;I.z=Xa;var S=-r,Ya=I.y+h.y*S,T=I.z+h.z*S;I.x+=h.x*S;I.y=Ya;I.z=T;var K=I.y+g.y*v,ia=I.z+g.z*v;I.x+=g.x*v;I.y=K;I.z=ia;var fb=this.p,da=0==fb.c?new t:fb.b[--fb.c];da.x=m.x;da.y=m.y;da.z=m.z;var pa=da.y+c.y*p,sa=da.z+c.z*p;da.x+=c.x*p;da.y=pa;da.z=sa;var eb=da.y+h.y*r,jb=da.z+h.z*r;da.x+=h.x*r;da.y=eb;da.z=jb;var Za=-v,ma=da.y+g.y*Za,na=da.z+g.z*Za;da.x+=g.x*Za;da.y=ma;da.z=na;var Ia=this.p,Fa=0==Ia.c?new t:Ia.b[--Ia.c];Fa.x=m.x;Fa.y=m.y;Fa.z=m.z;var ob=Fa.y+c.y*p,fa=Fa.z+c.z*p;Fa.x+=c.x*p;Fa.y=ob;Fa.z=fa;var ea=Fa.y+h.y*r,ja=Fa.z+h.z*r;Fa.x+=h.x*r;Fa.y=ea;Fa.z=ja;var bb=Fa.y+g.y*v,ya=Fa.z+g.z*v;Fa.x+=g.x*v;Fa.y=bb;Fa.z=ya;if(!this.wireframe){var tb=this.p,Ua=0==tb.c?new t:tb.b[--tb.c];Ua.x=c.x;Ua.y=c.y;Ua.z=c.z;var qb=-Ua.y,rb=-Ua.z;Ua.x=-Ua.x;Ua.y=qb;Ua.z=rb;var ub=this.p,Va=0==ub.c?new t:ub.b[--ub.c];Va.x=h.x;Va.y=h.y;Va.z=h.z;var Db=-Va.y,mc=-Va.z;Va.x=-Va.x;Va.y=Db;Va.z=mc;var $a=this.p,ua=0==$a.c?new t:$a.b[--$a.c];ua.x=g.x;ua.y=g.y;ua.z=g.z;var Gb=-ua.y,H=-ua.z;ua.x=-ua.x;ua.y=Gb;ua.z=H;this.rect(w,F,ba,R,Ua,Ua,Ua,Ua,e);this.rect(ca,da,Fa,I,c,c,c,c,e);this.rect(w,ca,I,F,Va,Va,Va,Va,e);this.rect(R,ba,Fa,da,h,h,h,h,e);this.rect(w,R,da,ca,ua,ua,ua,ua,e);this.rect(F,I,Fa,ba,g,g,g,g,e);var pb=this.p;if(null!=Ua){Ua.O();if(pb.c==pb.b.length){for(var cb=Array(pb.c<<1),rc=0,ab=pb.c;rc<ab;){var gb=rc++;cb[gb]=pb.b[gb];pb.b[gb]=null}pb.b=cb}pb.b[pb.c++]=Ua}var B=this.p;if(null!=Va){Va.O();if(B.c==B.b.length){for(var Bb=Array(B.c<<1),Ba=0,za=B.c;Ba<za;){var Eb=Ba++;Bb[Eb]=B.b[Eb];B.b[Eb]=null}B.b=Bb}B.b[B.c++]=Va}var Na=this.p;if(null!=ua){ua.O();if(Na.c==Na.b.length){for(var nb=Array(Na.c<<1),wb=0,xb=Na.c;wb<xb;){var db=wb++;nb[db]=Na.b[db];Na.b[db]=null}Na.b=nb}Na.b[Na.c++]=ua}}var Y=this.p;if(null!=w){w.O();if(Y.c==Y.b.length){for(var La=Array(Y.c<<1),kb=0,Ta=Y.c;kb<Ta;){var hb=kb++;La[hb]=Y.b[hb];Y.b[hb]=null}Y.b=La}Y.b[Y.c++]=w}var Ja=this.p;if(null!=F){F.O();if(Ja.c==Ja.b.length){for(var Ib=Array(Ja.c<<1),Ga=0,X=Ja.c;Ga<X;){var Ab=Ga++;Ib[Ab]=Ja.b[Ab];Ja.b[Ab]=null}Ja.b=Ib}Ja.b[Ja.c++]=F}var Dc=this.p;if(null!=R){R.O();if(Dc.c==Dc.b.length){for(var vb=Array(Dc.c<<1),mb=0,gc=Dc.c;mb<gc;){var Wa=mb++;vb[Wa]=Dc.b[Wa];Dc.b[Wa]=null}Dc.b=vb}Dc.b[Dc.c++]=R}var ib=this.p;if(null!=ba){ba.O();if(ib.c==ib.b.length){for(var sb=Array(ib.c<<1),yc=0,Lb=ib.c;yc<Lb;){var jc=yc++;sb[jc]=ib.b[jc];ib.b[jc]=null}ib.b=sb}ib.b[ib.c++]=ba}var uc=this.p;if(null!=ca){ca.O();if(uc.c==uc.b.length){for(var kc=Array(uc.c<<1),ac=0,Xb=uc.c;ac<Xb;){var Yb=ac++;kc[Yb]=uc.b[Yb];uc.b[Yb]=null}uc.b=kc}uc.b[uc.c++]=ca}var Sb=this.p;if(null!=I){I.O();if(Sb.c==Sb.b.length){for(var hc=Array(Sb.c<<1),Tb=0,Pb=Sb.c;Tb<Pb;){var Zb=Tb++;hc[Zb]=Sb.b[Zb];Sb.b[Zb]=null}Sb.b=hc}Sb.b[Sb.c++]=I}var ic=this.p;if(null!=da){da.O();if(ic.c==ic.b.length){for(var Jb=Array(ic.c<<1),$b=0,lb=ic.c;$b<lb;){var Kb=$b++;Jb[Kb]=ic.b[Kb];ic.b[Kb]=null}ic.b=Jb}ic.b[ic.c++]=da}var Cb=this.p;if(null!=Fa){Fa.O();if(Cb.c==Cb.b.length){for(var Rb=Array(Cb.c<<1),sc=0,nc=Cb.c;sc<nc;){var Qb=sc++;Rb[Qb]=Cb.b[Qb];Cb.b[Qb]=null}Cb.b=Rb}Cb.b[Cb.c++]=Fa}var Hb=this.p;if(null!=m){m.O();if(Hb.c==Hb.b.length){for(var Ub=Array(Hb.c<<1),tc=0,wc=Hb.c;tc<wc;){var Nb=tc++;Ub[Nb]=Hb.b[Nb];Hb.b[Nb]=null}Hb.b=Ub}Hb.b[Hb.c++]=m}var Fb=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(Fb.pb==Fb.kb.length){for(var ec=Array(Fb.pb<<1),fc=0,lc=Fb.pb;fc<lc;){var dc=fc++;ec[dc]=Fb.kb[dc];Fb.kb[dc]=null}Fb.kb=ec}Fb.kb[Fb.pb++]=q}var Mb=this.p;if(null!=c){c.O();if(Mb.c==Mb.b.length){for(var oc=Array(Mb.c<<1),bc=0,pc=Mb.c;bc<pc;){var cc=bc++;oc[cc]=Mb.b[cc];Mb.b[cc]=null}Mb.b=oc}Mb.b[Mb.c++]=c}var Ob=this.p;if(null!=h){h.O();if(Ob.c==Ob.b.length){for(var zc=Array(Ob.c<<1),Ac=0,Bc=Ob.c;Ac<Bc;){var xc=Ac++;zc[xc]=Ob.b[xc];Ob.b[xc]=null}Ob.b=zc}Ob.b[Ob.c++]=h}var qc=this.p;if(null!=g){g.O();if(qc.c==qc.b.length){for(var Ec=Array(qc.c<<1),Fc=0,Hc=qc.c;Fc<Hc;){var Cc=Fc++;Ec[Cc]=qc.b[Cc];qc.b[Cc]=null}qc.b=Ec}qc.b[qc.c++]=g}},rect:function(){},ab:function(){},sb:function(){},Pa:function(){},qa:Hb};Re.R=!0;Re.prototype={qa:Re};Rc.R=!0;Kb.R=!0;Kb.prototype={jh:function(){},sh:function(){},nh:function(){},vi:function(){},Gg:function(){},mh:function(){},lh:function(){},$e:function(){},qa:Kb};ec.R=!0;md.R=!0;md.prototype={Vd:function(a,b){b.Ce=this.C;b.De=this.D;var e,d,c,f,h,l,g,k,m;e=this.Ja.mg;d=this.Ja.ng;c=this.Ja.og;f=this.Ja.Xi;h=this.Ja.Yi;l=this.Ja.Zi;g=this.Ja.Gi;k=this.Ja.Hi;m=this.Ja.Ii;for(var n=Math.sqrt(this.uc.Fj*this.vc.Fj),q=Math.sqrt(this.uc.Pj*this.vc.Pj),p=this.Ja.Xd,r=b.Ka=0;r<p;){var v=r++,v=this.Ja.tc[v];if(0>v.Dc)v.Jf=!0,v=v.Wd,v.Xc=0,v.yc=0,v.xc=0,v.tb=0,v.Ue=0,v.Ve=0,v.We=0;else{v.Jf=!1;var t=b.rows[b.Ka++];t.friction=n;t.Ma=0;var w=t.Eg;w.va=e;w.wa=d;w.xa=c;w.Ba=e;w.Ca=d;w.Da=c;w.S=v.Db*c-v.Eb*d;w.T=v.Eb*e-v.Cb*c;w.U=v.Cb*d-v.Db*e;w.W=v.ac*c-v.bc*d;w.X=v.bc*e-v.$b*c;w.Y=v.$b*d-v.ac*e;w=t.vj;w.va=f;w.wa=h;w.xa=l;w.Ba=f;w.Ca=h;w.Da=l;w.S=v.Db*l-v.Eb*h;w.T=v.Eb*f-v.Cb*l;w.U=v.Cb*h-v.Db*f;w.W=v.ac*l-v.bc*h;w.X=v.bc*f-v.$b*l;w.Y=v.$b*h-v.ac*f;w=t.uj;w.va=g;w.wa=k;w.xa=m;w.Ba=g;w.Ca=k;w.Da=m;w.S=v.Db*m-v.Eb*k;w.T=v.Eb*g-v.Cb*m;w.U=v.Cb*k-v.Db*g;w.W=v.ac*m-v.bc*k;w.X=v.bc*g-v.$b*m;w.Y=v.$b*k-v.ac*g;w=t.Eg;w=w.va*this.C.eb+w.wa*this.C.fb+w.xa*this.C.gb+(w.S*this.C.mb+w.T*this.C.nb+w.U*this.C.ob)-(w.Ba*this.D.eb+w.Ca*this.D.fb+w.Da*this.D.gb+(w.W*this.D.mb+w.X*this.D.nb+w.Y*this.D.ob));t.Fa=w<-F.contactEnableBounceThreshold&&!v.Se?-w*q:0;this.Ec==ec.BAUMGARTE&&v.Dc>F.linearSlop&&(w=(v.Dc-F.linearSlop)*F.velocityBaumgarte*a.invDt,t.Fa<w&&(t.Fa=w));v.Se||(w=v.Wd,w.Xc=0,w.yc=0,w.xc=0,w.tb=0,w.Ue=0,w.Ve=0,w.We=0);t.ua=v.Wd}}},dd:function(a){a.Ce=this.C;a.De=this.D;var b,e,d;b=this.Ja.mg;e=this.Ja.ng;d=this.Ja.og;for(var c=this.Ja.Xd,f=a.Ka=0;f<c;){var h=f++,h=this.Ja.tc[h];if(!h.Jf){var l=a.rows[a.Ka++],g=l.Eg;g.va=b;g.wa=e;g.xa=d;g.Ba=b;g.Ca=e;g.Da=d;g.S=h.Db*d-h.Eb*e;g.T=h.Eb*b-h.Cb*d;g.U=h.Cb*e-h.Db*b;g.W=h.ac*d-h.bc*e;g.X=h.bc*b-h.$b*d;g.Y=h.$b*e-h.ac*b;l.Fa=h.Dc-F.linearSlop;0>l.Fa&&(l.Fa=0);l.ua=h.Wd}}},Ik:function(){this.Ja.Kl(this.aj,this.bj)},ab:function(){return this.uc},sb:function(){return this.vc},Pa:function(){return this.Ja},Zj:function(){for(var a=0,b=this.Ja.Xd;a<b;){var e=a++;if(0<=this.Ja.tc[e].Dc)return!0}return!1},qa:md};jj.R=!0;jj.prototype={Zd:function(a){this.Xc=a.Xc;this.yc=a.yc;this.xc=a.xc;this.Ue=a.Ue;this.Ve=a.Ve;this.We=a.We},qa:jj};zc.R=!0;zc.prototype={Je:function(){for(var a=0,b=this.Xd;a<b;){var e=a++,e=this.tc[e];e.bf=0;e.cf=0;e.df=0;e.ef=0;e.ff=0;e.gf=0;e.Cb=0;e.Db=0;e.Eb=0;e.$b=0;e.ac=0;e.bc=0;e.Fd=0;e.Gd=0;e.Hd=0;e.Id=0;e.Jd=0;e.Kd=0;e.Dc=0;var d=e.Wd;d.Xc=0;d.yc=0;d.xc=0;d.tb=0;d.Ue=0;d.Ve=0;d.We=0;e.Se=!1;e.Jf=!1;e.sc=-1}this.Xd=0},Im:function(a){this.mg=a.x;this.ng=a.y;this.og=a.z;var b=a.x,e=a.y;a=a.z;var d=b*b,c=e*e,f=a*a,h;d<c?d<f?(f=1/Math.sqrt(c+f),d=0,c=-a*f,f*=e,h=e*f-a*c,a=-b*f,b*=c):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d):c<f?(f=1/Math.sqrt(d+f),d=a*f,c=0,f*=-b,h=e*f,a=a*d-b*f,b=-e*d):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d);this.Xi=d;this.Yi=c;this.Zi=f;this.Gi=h;this.Hi=a;this.Ii=b},Kl:function(a,b){for(var e=0,d=this.Xd;e<d;){var c=e++,c=this.tc[c],f,h,l;f=a.o*c.bf+a.f*c.cf+a.h*c.df;h=a.i*c.bf+a.m*c.cf+a.j*c.df;l=a.l*c.bf+a.g*c.cf+a.s*c.df;c.Cb=f;c.Db=h;c.Eb=l;f=b.o*c.ef+b.f*c.ff+b.h*c.gf;h=b.i*c.ef+b.m*c.ff+b.j*c.gf;l=b.l*c.ef+b.g*c.ff+b.s*c.gf;c.$b=f;c.ac=h;c.bc=l;c.Fd=c.Cb+a.v;c.Gd=c.Db+a.A;c.Hd=c.Eb+a.B;c.Id=c.$b+b.v;c.Jd=c.ac+b.A;c.Kd=c.bc+b.B;c.Dc=-((c.Fd-c.Id)*this.mg+(c.Gd-c.Jd)*this.ng+(c.Hd-c.Kd)*this.og)}},sb:function(){var a=new t;a.x=this.mg;a.y=this.ng;a.z=this.og;return a},Kb:function(a){a.x=this.mg;a.y=this.ng;a.z=this.og},qc:function(){var a=new t;a.x=this.Xi;a.y=this.Yi;a.z=this.Zi;return a},rc:function(a){a.x=this.Xi;a.y=this.Yi;a.z=this.Zi},Pa:function(){var a=new t;a.x=this.Gi;a.y=this.Hi;a.z=this.Ii;return a},ab:function(a){a.x=this.Gi;a.y=this.Hi;a.z=this.Ii},lc:function(){return this.tc},kc:function(){return this.Xd},qa:zc};bc.R=!0;bc.prototype={Kb:function(){var a=new t;a.x=this.Fd;a.y=this.Gd;a.z=this.Hd;return a},kc:function(a){a.x=this.Fd;a.y=this.Gd;a.z=this.Hd},lc:function(){var a=new t;a.x=this.Id;a.y=this.Jd;a.z=this.Kd;return a},qc:function(a){a.x=this.Id;a.y=this.Jd;a.z=this.Kd},ab:function(){return this.Dc},zc:function(){return this.Se},sb:function(){return this.Wd.Xc},rc:function(){return this.Wd.yc},Pa:function(){return this.Wd.xc},Cc:function(){return!this.Jf},qa:bc};ij.R=!0;ij.prototype={Gn:function(){for(var a=this.Ja.Xd;0<=--a;){var b=this.Ja.tc[a],e,d;e=b.Fd-b.Id;d=b.Gd-b.Jd;var b=b.Hd-b.Kd,c=this.Ja.mg*e+this.Ja.ng*d+this.Ja.og*b;c>F.contactPersistenceThreshold?this.xm(a):(e+=this.Ja.mg*-c,d+=this.Ja.ng*-c,b+=this.Ja.og*-c,e*e+d*d+b*b>F.contactPersistenceThreshold*F.contactPersistenceThreshold&&this.xm(a))}},xm:function(a){var b=--this.Ja.Xd;if(a!=b){var e=this.Ja.tc[a];this.Ja.tc[a]=this.Ja.tc[b];this.Ja.tc[b]=e}a=this.Ja.tc[b];a.bf=0;a.cf=0;a.df=0;a.ef=0;a.ff=0;a.gf=0;a.Cb=0;a.Db=0;a.Eb=0;a.$b=0;a.ac=0;a.bc=0;a.Fd=0;a.Gd=0;a.Hd=0;a.Id=0;a.Jd=0;a.Kd=0;a.Dc=0;b=a.Wd;b.Xc=0;b.yc=0;b.xc=0;b.tb=0;b.Ue=0;b.Ve=0;b.We=0;a.Se=!1;a.Jf=!1;a.sc=-1},Vm:function(a,b,e){var d=this.Ja.Xd;if(d==F.maxManifoldPoints){var d=this.Ja.tc[this.$m(a,b,e)],c=a.position1;d.Fd=c.x;d.Gd=c.y;d.Hd=c.z;c=a.position2;d.Id=c.x;d.Jd=c.y;d.Kd=c.z;d.Cb=d.Fd-b.v;d.Db=d.Gd-b.A;d.Eb=d.Hd-b.B;d.$b=d.Id-e.v;d.ac=d.Jd-e.A;d.bc=d.Kd-e.B;var f,c=b.o*d.Cb+b.i*d.Db+b.l*d.Eb;f=b.f*d.Cb+b.m*d.Db+b.g*d.Eb;b=b.h*d.Cb+b.j*d.Db+b.s*d.Eb;d.bf=c;d.cf=f;d.df=b;b=e.o*d.$b+e.i*d.ac+e.l*d.bc;c=e.f*d.$b+e.m*d.ac+e.g*d.bc;e=e.h*d.$b+e.j*d.ac+e.s*d.bc;d.ef=b;d.ff=c;d.gf=e;d.Dc=a.depth;e=d.Wd;e.Xc=0;e.yc=0;e.xc=0;e.tb=0;e.Ue=0;e.Ve=0;e.We=0;d.sc=a.id;d.Se=!1;d.Jf=!1}else d=this.Ja.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Cb=d.Fd-b.v,d.Db=d.Gd-b.A,d.Eb=d.Hd-b.B,d.$b=d.Id-e.v,d.ac=d.Jd-e.A,d.bc=d.Kd-e.B,c=b.o*d.Cb+b.i*d.Db+b.l*d.Eb,f=b.f*d.Cb+b.m*d.Db+b.g*d.Eb,b=b.h*d.Cb+b.j*d.Db+b.s*d.Eb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.$b+e.i*d.ac+e.l*d.bc,c=e.f*d.$b+e.m*d.ac+e.g*d.bc,e=e.h*d.$b+e.j*d.ac+e.s*d.bc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth,e=d.Wd,e.Xc=0,e.yc=0,e.xc=0,e.tb=0,e.Ue=0,e.Ve=0,e.We=0,d.sc=a.id,d.Se=!1,d.Jf=!1,this.Ja.Xd++},$m:function(a,b){var e=this.Ja.tc[0],d=this.Ja.tc[1],c=this.Ja.tc[2],f=this.Ja.tc[3],h=e.Dc,l=0;d.Dc>h&&(h=d.Dc,l=1);c.Dc>h&&(h=c.Dc,l=2);f.Dc>h&&(h=f.Dc,l=3);var g,k,m,n=a.position1;g=n.x;k=n.y;m=n.z;g-=b.v;k-=b.A;m-=b.B;var q=d.Cb,p=d.Db,r=d.Eb,v=c.Cb,t=c.Db,w=c.Eb,A=f.Cb,u=f.Db,D=f.Eb,V,z,E,x,F,N,G,C,L,M,O,ha,Vb,ra,ka,Oa,U,R;V=v-q;z=t-p;E=w-r;x=g-A;F=k-u;N=m-D;G=A-q;C=u-p;L=D-r;M=g-v;O=k-t;ha=m-w;Vb=g-q;ra=k-p;ka=m-r;Oa=A-v;U=u-t;R=D-w;var Wb,Ma,Ra,vc,Pa,Aa,zb,J,Qa;Wb=z*N-E*F;Ma=E*x-V*N;Ra=V*F-z*x;vc=C*ha-L*O;Pa=L*M-G*ha;Aa=G*O-C*M;zb=ra*R-ka*U;J=ka*Oa-Vb*R;Qa=Vb*U-ra*Oa;var ba=Wb*Wb+Ma*Ma+Ra*Ra,Q=vc*vc+Pa*Pa+Aa*Aa,P=zb*zb+J*J+Qa*Qa,wa=ba>Q?ba>P?ba:P:Q>P?Q:P,ta=e.Cb,W=e.Db,oa=e.Eb,y=c.Cb,Ha=c.Db,ca=c.Eb,Ca=f.Cb,xa=f.Db,Da=f.Eb,Sa,la,Z,Ea,qa,va,I,Ka,Xa,S,Ya,T,K,ia,fb,da,pa,sa;Sa=y-ta;la=Ha-W;Z=ca-oa;Ea=g-Ca;qa=k-xa;va=m-Da;I=Ca-ta;Ka=xa-W;Xa=Da-oa;S=g-y;Ya=k-Ha;T=m-ca;K=g-ta;ia=k-W;fb=m-oa;da=Ca-y;pa=xa-Ha;sa=Da-ca;var eb,jb,Za,ma,na,Ia,Fa,ob,fa;eb=la*va-Z*qa;jb=Z*Ea-Sa*va;Za=Sa*qa-la*Ea;ma=Ka*T-Xa*Ya;na=Xa*S-I*T;Ia=I*Ya-Ka*S;Fa=ia*sa-fb*pa;ob=fb*da-K*sa;fa=K*pa-ia*da;var ea=eb*eb+jb*jb+Za*Za,ja=ma*ma+na*na+Ia*Ia,bb=Fa*Fa+ob*ob+fa*fa,ya=ea>ja?ea>bb?ea:bb:ja>bb?ja:bb,tb=e.Cb,Ua=e.Db,qb=e.Eb,rb=d.Cb,ub=d.Db,Va=d.Eb,Db=f.Cb,mc=f.Db,$a=f.Eb,ua,Gb,H,pb,cb,Ba,ab,gb,B,Bb,za,Ga,Eb,Na,nb,wb,xb,db;ua=rb-tb;Gb=ub-Ua;H=Va-qb;pb=g-Db;cb=k-mc;Ba=m-$a;ab=Db-tb;gb=mc-Ua;B=$a-qb;Bb=g-rb;za=k-ub;Ga=m-Va;Eb=g-tb;Na=k-Ua;nb=m-qb;wb=Db-rb;xb=mc-ub;db=$a-Va;var Y,La,kb,Ta,hb,Ja,Ib,ib,X;Y=Gb*Ba-H*cb;La=H*pb-ua*Ba;kb=ua*cb-Gb*pb;Ta=gb*Ga-B*za;hb=B*Bb-ab*Ga;Ja=ab*za-gb*Bb;Ib=Na*db-nb*xb;ib=nb*wb-Eb*db;X=Eb*xb-Na*wb;var Ab=Y*Y+La*La+kb*kb,vb=Ta*Ta+hb*hb+Ja*Ja,Wa=Ib*Ib+ib*ib+X*X,mb=Ab>vb?Ab>Wa?Ab:Wa:vb>Wa?vb:Wa,gc=e.Cb,sb=e.Db,Cb=e.Eb,Hb=d.Cb,yc=d.Db,Kb=d.Eb,jc=c.Cb,uc=c.Db,kc=c.Eb,ac,Xb,Yb,Sb,hc,Tb,Pb,Zb,ic,Jb,$b,lb,Fb,Lb,Mb,sc,nc,Qb;ac=Hb-gc;Xb=yc-sb;Yb=Kb-Cb;Sb=g-jc;hc=k-uc;Tb=m-kc;Pb=jc-gc;Zb=uc-sb;ic=kc-Cb;Jb=g-Hb;$b=k-yc;lb=m-Kb;Fb=g-gc;Lb=k-sb;Mb=m-Cb;sc=jc-Hb;nc=uc-yc;Qb=kc-Kb;var Rb,Ub,tc,wc,Nb,Ob,dc,ec,fc;Rb=Xb*Tb-Yb*hc;Ub=Yb*Sb-ac*Tb;tc=ac*hc-Xb*Sb;wc=Zb*lb-ic*$b;Nb=ic*Jb-Pb*lb;Ob=Pb*$b-Zb*Jb;dc=Lb*Qb-Mb*nc;ec=Mb*sc-Fb*Qb;fc=Fb*nc-Lb*sc;var lc=Rb*Rb+Ub*Ub+tc*tc,oc=wc*wc+Nb*Nb+Ob*Ob,bc=dc*dc+ec*ec+fc*fc,qc=lc>oc?lc>bc?lc:bc:oc>bc?oc:bc,cc=wa,pc=0;if(ya>cc&&1!=l||!l)cc=ya,pc=1;mb>cc&&2!=l&&(cc=mb,pc=2);qc>cc&&3!=l&&(cc=qc,pc=3);return pc},cn:function(a,b,e){for(var d=F.contactPersistenceThreshold*F.contactPersistenceThreshold,c=-1,f=0,h=this.Ja.Xd;f<h;){var l=f++,g=this.Ja.tc[l],k,m,n,q,p,r;p=a.position1;k=p.x;m=p.y;n=p.z;r=a.position2;q=r.x;p=r.y;r=r.z;k-=b.v;m-=b.A;n-=b.B;q-=e.v;p-=e.A;r-=e.B;k=g.Cb-k;m=g.Db-m;n=g.Eb-n;q=g.$b-q;p=g.ac-p;g=g.bc-r;r=k*k+m*m+n*n;g=q*q+p*p+g*g;g=r<g?r:g;g<d&&(d=g,c=l)}return c},Pn:function(a,b,e){this.ol=this.Ja.Xd;for(var d=0,c=this.ol;d<c;){var f=d++,h=this.pl[f],f=this.Ja.tc[f];h.bf=f.bf;h.cf=f.cf;h.df=f.df;h.ef=f.ef;h.ff=f.ff;h.gf=f.gf;h.Cb=f.Cb;h.Db=f.Db;h.Eb=f.Eb;h.$b=f.$b;h.ac=f.ac;h.bc=f.bc;h.Fd=f.Fd;h.Gd=f.Gd;h.Hd=f.Hd;h.Id=f.Id;h.Jd=f.Jd;h.Kd=f.Kd;h.Dc=f.Dc;h.Wd.Zd(f.Wd);h.sc=f.sc;h.Se=f.Se;h.Jf=!1}d=a.numPoints;this.Ja.Xd=d;for(c=0;c<d;){var f=c++,h=this.Ja.tc[f],f=a.points[f],l=f.position1;h.Fd=l.x;h.Gd=l.y;h.Hd=l.z;l=f.position2;h.Id=l.x;h.Jd=l.y;h.Kd=l.z;h.Cb=h.Fd-b.v;h.Db=h.Gd-b.A;h.Eb=h.Hd-b.B;h.$b=h.Id-e.v;h.ac=h.Jd-e.A;h.bc=h.Kd-e.B;var g,k,l=b.o*h.Cb+b.i*h.Db+b.l*h.Eb;g=b.f*h.Cb+b.m*h.Db+b.g*h.Eb;k=b.h*h.Cb+b.j*h.Db+b.s*h.Eb;h.bf=l;h.cf=g;h.df=k;l=e.o*h.$b+e.i*h.ac+e.l*h.bc;g=e.f*h.$b+e.m*h.ac+e.g*h.bc;k=e.h*h.$b+e.j*h.ac+e.s*h.bc;h.ef=l;h.ff=g;h.gf=k;h.Dc=f.depth;l=h.Wd;l.Xc=0;l.yc=0;l.xc=0;l.tb=0;l.Ue=0;l.Ve=0;l.We=0;h.sc=f.id;h.Se=!1;h.Jf=!1;f=0;for(l=this.ol;f<l;)if(g=f++,g=this.pl[g],h.sc==g.sc){h.Wd.Zd(g.Wd);h.Se=!0;break}}},An:function(a,b,e){this.Ja.Kl(b,e);for(var d=0,c=this.Ja.Xd;d<c;){var f=d++;this.Ja.tc[f].Se=!0}if(1!=a.numPoints)throw Error("assertion error: result.numPoints == 1 is false");a=a.points[0];d=this.cn(a,b,e);-1==d?this.Vm(a,b,e):(d=this.Ja.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Cb=d.Fd-b.v,d.Db=d.Gd-b.A,d.Eb=d.Hd-b.B,d.$b=d.Id-e.v,d.ac=d.Jd-e.A,d.bc=d.Kd-e.B,c=b.o*d.Cb+b.i*d.Db+b.l*d.Eb,f=b.f*d.Cb+b.m*d.Db+b.g*d.Eb,b=b.h*d.Cb+b.j*d.Db+b.s*d.Eb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.$b+e.i*d.ac+e.l*d.bc,c=e.f*d.$b+e.m*d.ac+e.g*d.bc,e=e.h*d.$b+e.j*d.ac+e.s*d.bc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth);this.Gn()},qa:ij};dd.R=!0;dd.prototype={Am:function(){this.wc=0;if(0!=this.va||0!=this.wa||0!=this.xa||0!=this.Ba||0!=this.Ca||0!=this.Da)this.wc|=1;if(0!=this.S||0!=this.T||0!=this.U||0!=this.W||0!=this.X||0!=this.Y)this.wc|=2},qa:dd};Sf.R=!0;Sf.prototype={qa:Sf};hj.R=!0;hj.prototype={qa:hj};Oe.R=!0;Oe.prototype={qa:Oe};gj.R=!0;gj.prototype={qa:gj};L.R=!0;L.prototype={ed:function(){var a=this.C.a,b=this.D.a,e,d,c;e=a.o*this.Pi+a.f*this.Qi+a.h*this.Ri;d=a.i*this.Pi+a.m*this.Qi+a.j*this.Ri;c=a.l*this.Pi+a.g*this.Qi+a.s*this.Ri;this.Pb=e;this.Qb=d;this.Rb=c;e=b.o*this.Si+b.f*this.Ti+b.h*this.Ui;d=b.i*this.Si+b.m*this.Ti+b.j*this.Ui;c=b.l*this.Si+b.g*this.Ti+b.s*this.Ui;this.Sb=e;this.Tb=d;this.Ub=c;this.Df=this.Pb+a.v;this.Ef=this.Qb+a.A;this.Ff=this.Rb+a.B;this.Gf=this.Sb+b.v;this.Hf=this.Tb+b.A;this.If=this.Ub+b.B;e=a.o*this.ra+a.f*this.sa+a.h*this.ta;d=a.i*this.ra+a.m*this.sa+a.j*this.ta;c=a.l*this.ra+a.g*this.sa+a.s*this.ta;this.ub=e;this.vb=d;this.wb=c;e=a.o*this.zb+a.f*this.Ab+a.h*this.Bb;d=a.i*this.zb+a.m*this.Ab+a.j*this.Bb;c=a.l*this.zb+a.g*this.Ab+a.s*this.Bb;this.xe=e;this.ye=d;this.ze=c;e=a.o*this.fc+a.f*this.gc+a.h*this.hc;d=a.i*this.fc+a.m*this.gc+a.j*this.hc;a=a.l*this.fc+a.g*this.gc+a.s*this.hc;this.th=e;this.uh=d;this.vh=a;a=b.o*this.hb+b.f*this.ib+b.h*this.jb;e=b.i*this.hb+b.m*this.ib+b.j*this.jb;d=b.l*this.hb+b.g*this.ib+b.s*this.jb;this.Xb=a;this.Yb=e;this.Zb=d;a=b.o*this.Wg+b.f*this.Xg+b.h*this.Yg;e=b.i*this.Wg+b.m*this.Xg+b.j*this.Yg;d=b.l*this.Wg+b.g*this.Xg+b.s*this.Yg;this.ne=a;this.oe=e;this.pe=d;a=b.o*this.Ic+b.f*this.Jc+b.h*this.Kc;e=b.i*this.Ic+b.m*this.Jc+b.j*this.Kc;b=b.l*this.Ic+b.g*this.Jc+b.s*this.Kc;this.Rg=a;this.Sg=e;this.Tg=b},Vd:function(a,b){b.Ce=this.C;b.De=this.D;b.Ka=0},dd:function(a){a.Ce=this.C;a.De=this.D;a.Ka=0},Cl:function(){var a=this.Ai*this.Ai+this.Bi*this.Bi+this.Ci*this.Ci,b=this.Di*this.Di+this.Ei*this.Ei+this.Fi*this.Fi;0<this.Ji&&a>this.Ji*this.Ji?this.jc.sl(this):0<this.Ki&&b>this.Ki*this.Ki&&this.jc.sl(this)},me:function(){return this.C},Ge:function(){return this.D},Jg:function(){return this.mc},ab:function(){var a=new t;a.x=this.Df;a.y=this.Ef;a.z=this.Ff;return a},Kb:function(){var a=new t;a.x=this.Gf;a.y=this.Hf;a.z=this.If;return a},sb:function(a){a.x=this.Df;a.y=this.Ef;a.z=this.Ff},kc:function(a){a.x=this.Gf;a.y=this.Hf;a.z=this.If},be:function(){var a=new t;a.x=this.Pi;a.y=this.Qi;a.z=this.Ri;return a},de:function(){var a=new t;a.x=this.Si;a.y=this.Ti;a.z=this.Ui;return a},ce:function(a){a.x=this.Pi;a.y=this.Qi;a.z=this.Ri},ee:function(a){a.x=this.Si;a.y=this.Ti;a.z=this.Ui},Cc:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.ub;e=this.xe;d=this.th;c=this.vb;f=this.ye;h=this.uh;l=this.wb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},ad:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.Xb;e=this.ne;d=this.Rg;c=this.Yb;f=this.oe;h=this.Sg;l=this.Zb;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Hc:function(a){var b,e,d,c,f,h,l,g,k;b=this.ub;e=this.xe;d=this.th;c=this.vb;f=this.ye;h=this.uh;l=this.wb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},bd:function(a){var b,e,d,c,f,h,l,g,k;b=this.Xb;e=this.ne;d=this.Rg;c=this.Yb;f=this.oe;h=this.Sg;l=this.Zb;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Pa:function(){return this.gk},Kg:function(a){this.gk=a},cd:function(){return this.Ji},Lg:function(a){this.Ji=a},Pd:function(){return this.Ki},Mg:function(a){this.Ki=a},fe:function(){return this.Ec},Ng:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Ec=a},lc:function(){var a=new t;a.x=this.Ai;a.y=this.Bi;a.z=this.Ci;return a},qc:function(a){a.x=this.Ai;a.y=this.Bi;a.z=this.Ci},rc:function(){var a=new t;a.x=this.Di;a.y=this.Ei;a.z=this.Fi;return a},zc:function(a){a.x=this.Di;a.y=this.Ei;a.z=this.Fi},Bf:function(){return this.ia},He:function(){return this.M},qa:L};Wa.R=!0;Wa.Jb=L;Wa.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorY*d,d=this.angularErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,A;l=-this.Rb;g=this.Qb;k=this.Rb;m=-this.Pb;n=-this.Qb;q=this.Pb;p=-this.Ub;r=this.Tb;v=this.Ub;t=-this.Sb;w=-this.Tb;A=this.Sb;var u,D=1/(this.C.Za+this.D.Za),V=this.V.Yc,z=this.V.Zc,E=this.V.$c,x=(this.C.Z*V+this.C.$*z+this.C.aa*E)*V+(this.C.ba*V+this.C.ca*z+this.C.da*E)*z+(this.C.ea*V+this.C.fa*z+this.C.ga*E)*E;u=(this.D.Z*V+this.D.$*z+this.D.aa*E)*V+(this.D.ba*V+this.D.ca*z+this.D.da*E)*z+(this.D.ea*V+this.D.fa*z+this.D.ga*E)*E;if(0<x){var C=V*this.Pb+z*this.Qb+E*this.Rb,C=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-C*C;0<C&&(x=0<this.C.Za?1/(1/x+this.C.Lc*C):0)}0<u&&(V=V*this.Sb+z*this.Tb+E*this.Ub,V=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-V*V,0<V&&(u=0<this.D.Za?1/(1/u+this.D.Lc*V):0));x=x+u?1/(x+u):0;if(0>=this.Lk.frequency||!e){u=this.Nb[0];V=a.rows[a.Ka++];z=V.Aa;z.va=0;z.wa=0;z.xa=0;z.Ba=0;z.Ca=0;z.Da=0;z.S=0;z.T=0;z.U=0;z.W=0;z.X=0;z.Y=0;V.Fa=0;V.Ma=0;V.Ia=0;V.Ha=0;V.motorSpeed=0;V.bb=0;V.ua=null;V.ua=u;u=V;var V=this.Vf,C=this.Kk,E=this.Lk,N,z=F.linearSlop;if(e)E=0,N=1;else{if(0<E.frequency){var z=0,G=6.28318530717958*E.frequency,L=E.dampingRatio;L<F.minSpringDamperDampingRatio&&(L=F.minSpringDamperDampingRatio);N=b.dt;L=2*L*G;G*=G;E.useSymplecticEuler?(E=1/(N*L),N=G/L):(E=1/(N*(N*G+L)),N=G/(N*G+L))}else E=0,N=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<C.motorForce?(u.motorSpeed=C.motorSpeed,u.bb=C.motorForce*b.dt):(u.motorSpeed=0,u.bb=0)}var L=C.lowerLimit,M=C.upperLimit;L>M?V=G=C=0:L==M?(C=-1/0,G=1/0,V-=L):V<L?(C=-1/0,G=0,V=V-L+z,0<V&&(V=0)):V>M?(C=0,G=1/0,V=V-M-z,0>V&&(V=0)):V=G=C=0;u.Ia=C;u.Ha=G;u.Ma=E*(D?1/D:0);u.Fa=V*N;u=u.Aa;u.va=this.V.Yc;u.wa=this.V.Zc;u.xa=this.V.$c;u.Ba=this.V.Yc;u.Ca=this.V.Zc;u.Da=this.V.$c;u.S=-0;u.T=-l;u.U=-g;u.W=-0;u.X=-p;u.Y=-r}u=this.Nb[1];l=a.rows[a.Ka++];g=l.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.S=0;g.T=0;g.U=0;g.W=0;g.X=0;g.Y=0;l.Fa=0;l.Ma=0;l.Ia=0;l.Ha=0;l.motorSpeed=0;l.bb=0;l.ua=u;u=l;u.Fa=c;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=this.V.Md;u.wa=this.V.Nd;u.xa=this.V.Od;u.Ba=this.V.Md;u.Ca=this.V.Nd;u.Da=this.V.Od;u.S=-k;u.T=-0;u.U=-m;u.W=-v;u.X=-0;u.Y=-t;c=this.Nb[2];u=a.rows[a.Ka++];k=u.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.S=0;k.T=0;k.U=0;k.W=0;k.X=0;k.Y=0;u.Fa=0;u.Ma=0;u.Ia=0;u.Ha=0;u.motorSpeed=0;u.bb=0;u.ua=c;u.Fa=f;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=this.V.je;u.wa=this.V.ke;u.xa=this.V.le;u.Ba=this.V.je;u.Ca=this.V.ke;u.Da=this.V.le;u.S=-n;u.T=-q;u.U=-0;u.W=-w;u.X=-A;u.Y=-0;if(0>=this.Ek.frequency||!e)f=this.Nb[3],n=a.rows[a.Ka++],q=n.Aa,q.va=0,q.wa=0,q.xa=0,q.Ba=0,q.Ca=0,q.Da=0,q.S=0,q.T=0,q.U=0,q.W=0,q.X=0,q.Y=0,n.Fa=0,n.Ma=0,n.Ia=0,n.Ha=0,n.motorSpeed=0,n.bb=0,n.ua=f,u=n,f=this.angle,q=this.Dk,w=this.Ek,n=F.angularSlop,e?(e=0,w=1):(0<w.frequency?(n=0,e=6.28318530717958*w.frequency,c=w.dampingRatio,c<F.minSpringDamperDampingRatio&&(c=F.minSpringDamperDampingRatio),A=b.dt,c=2*c*e,k=e*e,w.useSymplecticEuler?(e=1/(A*c),w=k/c):(e=1/(A*(A*k+c)),w=k/(A*k+c))):(e=0,w=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<q.motorTorque?(u.motorSpeed=q.motorSpeed,u.bb=q.motorTorque*b.dt):(u.motorSpeed=0,u.bb=0)),b=q.lowerLimit,q=q.upperLimit,A=.5*(b+q),f=((f-A+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+A,b>q?b=c=A=0:b==q?(A=-1/0,c=1/0,b=f-b):f<b?(A=-1/0,c=0,b=f-b+n,0<b&&(b=0)):f>q?(A=0,c=1/0,b=f-q-n,0>b&&(b=0)):b=c=A=0,u.Ia=A,u.Ha=c,u.Ma=e*(x?1/x:0),u.Fa=b*w,u=u.Aa,u.S=this.V.Yc,u.T=this.V.Zc,u.U=this.V.$c,u.W=this.V.Yc,u.X=this.V.Zc,u.Y=this.V.$c;b=this.Nb[4];x=a.rows[a.Ka++];e=x.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.S=0;e.T=0;e.U=0;e.W=0;e.X=0;e.Y=0;x.Fa=0;x.Ma=0;x.Ia=0;x.Ha=0;x.motorSpeed=0;x.bb=0;x.ua=b;u=x;u.Fa=h;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.S=this.V.Md;u.T=this.V.Nd;u.U=this.V.Od;u.W=this.V.Md;u.X=this.V.Nd;u.Y=this.V.Od;h=this.Nb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.S=0;b.T=0;b.U=0;b.W=0;b.X=0;b.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=h;u=a;u.Fa=d;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.S=this.V.je;u.T=this.V.ke;u.U=this.V.le;u.W=this.V.je;u.X=this.V.ke;u.Y=this.V.le},ed:function(){L.prototype.ed.call(this);var a=this.V,b=a.P.C.Za,e=a.P.D.Za,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,V,z,E,x,F,C,G,M,O,ha,ga,ra,Vb=a.P.ub*a.P.Xb+a.P.vb*a.P.Yb+a.P.wb*a.P.Zb;if(-1.000001<Vb&&-.999999>Vb){var pa,ka,Oa,U=a.P.ub,R=a.P.vb,Wb=a.P.wb,Ma=U*U,Ra=R*R,vc=Wb*Wb,Pa;Ma<Ra?Ma<vc?(Pa=1/Math.sqrt(Ra+vc),pa=0,ka=Wb*Pa,Oa=-R*Pa):(Pa=1/Math.sqrt(Ma+Ra),pa=R*Pa,ka=-U*Pa,Oa=0):Ra<vc?(Pa=1/Math.sqrt(vc+Ma),pa=-Wb*Pa,ka=0,Oa=U*Pa):(Pa=1/Math.sqrt(Ma+Ra),pa=R*Pa,ka=-U*Pa,Oa=0);d=pa;c=ka;f=Oa;h=0}else{var Aa,zb,J;Aa=a.P.vb*a.P.Zb-a.P.wb*a.P.Yb;zb=a.P.wb*a.P.Xb-a.P.ub*a.P.Zb;J=a.P.ub*a.P.Yb-a.P.vb*a.P.Xb;var Qa=Math.sqrt(.5*(1+Vb)),Vb=.5/Qa;Aa*=Vb;zb*=Vb;J*=Vb;d=Aa;c=zb;f=J;h=Qa}var ba,Q,P,wa,ta,W,oa,y;P=Q=ba=0;wa=1;ta=d;W=c;oa=f;y=h;var Ha=ba*ta+Q*W+P*oa+wa*y;0>Ha&&(Ha=-Ha,ta=-ta,W=-W,oa=-oa,y=-y);if(.999999<Ha){var ca,Ca,xa,Da;ca=ta-ba;Ca=W-Q;xa=oa-P;Da=y-wa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ca;oa=P+b/(b+e)*xa;y=wa+b/(b+e)*Da;var Sa=ta*ta+W*W+oa*oa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=oa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ha);ta+=ba*-Ha;W+=Q*-Ha;oa+=P*-Ha;y+=wa*-Ha;var Z=ta*ta+W*W+oa*oa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;oa*=Z;y*=Z;var Ea=Math.sin(la),qa=Math.cos(la);ba*=qa;Q*=qa;P*=qa;wa*=qa;l=ba+ta*Ea;g=Q+W*Ea;k=P+oa*Ea;m=wa+y*Ea}var va=l,I=g,Ka=k,Xa=m,S=2*va,Ya=2*I,T=2*Ka,K=va*S,ia=I*Ya,fb=Ka*T,da=va*Ya,Ba=I*T,sa=va*T,eb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-fb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-fb;t=Ba-eb;w=sa-jb;A=Ba+eb;u=1-K-ia;var ma,na;ma=n*a.P.ub+q*a.P.vb+p*a.P.wb;na=r*a.P.ub+v*a.P.vb+t*a.P.wb;D=w*a.P.ub+A*a.P.vb+u*a.P.wb;G=a.Yc;M=a.Zc;O=a.$c;ha=a.Md;ga=a.Nd;ra=a.Od;var Ia=G*ma+M*na+O*D;if(-1.000001<Ia&&-.999999>Ia){var Fa,ob,fa,ea=G*G,ja=M*M,bb=O*O,ya;ea<ja?ea<bb?(ya=1/Math.sqrt(ja+bb),Fa=0,ob=O*ya,fa=-M*ya):(ya=1/Math.sqrt(ea+ja),Fa=M*ya,ob=-G*ya,fa=0):ja<bb?(ya=1/Math.sqrt(bb+ea),Fa=-O*ya,ob=0,fa=G*ya):(ya=1/Math.sqrt(ea+ja),Fa=M*ya,ob=-G*ya,fa=0);l=Fa;g=ob;k=fa;m=0}else{var tb,Ua,qb;tb=M*D-O*na;Ua=O*ma-G*D;qb=G*na-M*ma;var rb=Math.sqrt(.5*(1+Ia)),Ia=.5/rb;tb*=Ia;Ua*=Ia;qb*=Ia;l=tb;g=Ua;k=qb;m=rb}var ub=l,Va=g,Db=k,mc=m,$a=2*ub,ua=2*Va,Gb=2*Db,H=ub*$a,pb=Va*ua,cb=Db*Gb,za=ub*ua,ab=Va*Gb,gb=ub*Gb,B=mc*$a,Bb=mc*ua,Ga=mc*Gb;n=1-pb-cb;q=za-Ga;p=gb+Bb;r=za+Ga;v=1-H-cb;t=ab-B;w=gb-Bb;A=ab+B;u=1-H-pb;var ib,Eb,Na;ib=n*ha+q*ga+p*ra;Eb=r*ha+v*ga+t*ra;Na=w*ha+A*ga+u*ra;V=ib;z=Eb;E=Na;x=na*E-D*z;F=D*V-ma*E;C=ma*z-na*V;if(1E-6<x*x+F*F+C*C){var nb=x*x+F*F+C*C;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;F*=nb;C*=nb}else{var wb=ma*ma,xb=na*na,db=D*D,Y;wb<xb?wb<db?(Y=1/Math.sqrt(xb+db),x=0,F=D*Y,C=-na*Y):(Y=1/Math.sqrt(wb+xb),x=na*Y,F=-ma*Y,C=0):xb<db?(Y=1/Math.sqrt(db+wb),x=-D*Y,F=0,C=ma*Y):(Y=1/Math.sqrt(wb+xb),x=na*Y,F=-ma*Y,C=0)}V=F*D-C*na;z=C*ma-x*D;E=x*na-F*ma;a.Yc=ma;a.Zc=na;a.$c=D;a.Md=V;a.Nd=z;a.Od=E;a.je=x;a.ke=F;a.le=C;var La,kb,Ta;La=this.vb*this.Zb-this.wb*this.Yb;kb=this.wb*this.Xb-this.ub*this.Zb;Ta=this.ub*this.Yb-this.vb*this.Xb;var hb=this.ub*this.Xb+this.vb*this.Yb+this.wb*this.Zb,Ja=-1>=hb?3.14159265358979:1<=hb?0:Math.acos(hb),Ib=La*La+kb*kb+Ta*Ta;0<Ib&&(Ib=1/Math.sqrt(Ib));La*=Ib;kb*=Ib;Ta*=Ib;La*=Ja;kb*=Ja;Ta*=Ja;this.angularErrorY=La*this.V.Md+kb*this.V.Nd+Ta*this.V.Od;this.angularErrorZ=La*this.V.je+kb*this.V.ke+Ta*this.V.le;var vb,X,Ab;vb=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Ab=this.xe*this.oe-this.ye*this.ne;hb=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=hb?3.14159265358979:1<=hb?0:Math.acos(hb);0>vb*this.V.Yc+X*this.V.Zc+Ab*this.V.$c&&(this.angle=-this.angle);var Wa,mb,sb;Wa=this.Gf-this.Df;mb=this.Hf-this.Ef;sb=this.If-this.Ff;this.Vf=Wa*this.V.Yc+mb*this.V.Zc+sb*this.V.$c;this.linearErrorY=Wa*this.V.Md+mb*this.V.Nd+sb*this.V.Od;this.linearErrorZ=Wa*this.V.je+mb*this.V.ke+sb*this.V.le},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Xb;a.y=this.Yb;a.z=this.Zb;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Xb;a.y=this.Yb;a.z=this.Zb},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.hb;a.y=this.ib;a.z=this.jb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.hb;a.y=this.ib;a.z=this.jb},un:function(){return this.Lk},mn:function(){return this.Ek},tn:function(){return this.Kk},ln:function(){return this.Dk},Xk:function(){return this.angle},$k:function(){return this.Vf},qa:Wa});Fc.R=!0;Fc.prototype={Vg:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var d=this.rigidBody1,c,f,h;c=e.x;f=e.y;h=e.z;c-=d.a.v;f-=d.a.A;h-=d.a.B;a=d.a.o*c+d.a.i*f+d.a.l*h;b=d.a.f*c+d.a.m*f+d.a.g*h;d=d.a.h*c+d.a.j*f+d.a.s*h;c=this.localAnchor1;c.x=a;c.y=b;c.z=d;b=this.rigidBody2;d=e.x;c=e.y;f=e.z;d-=b.a.v;c-=b.a.A;f-=b.a.B;e=b.a.o*d+b.a.i*c+b.a.l*f;a=b.a.f*d+b.a.m*c+b.a.g*f;b=b.a.h*d+b.a.j*c+b.a.s*f;d=this.localAnchor2;d.x=e;d.y=a;d.z=b},qa:Fc};te.R=!0;te.Jb=Fc;te.prototype=sb(Fc.prototype,{za:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},qa:te});Qe.R=!0;Qe.prototype={qa:Qe};Ck.R=!0;Ck.prototype={qa:Ck};Oc.R=!0;Oc.prototype={Pa:function(){return this.wk},sb:function(){return this.Mc},Kb:function(){return this.ia},ab:function(){return this.M},qa:Oc};oc.R=!0;Nb.R=!0;Nb.Jb=L;Nb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorX*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,A,u;g=-this.Rb;k=this.Qb;m=this.Rb;n=-this.Pb;q=-this.Qb;p=this.Pb;r=-this.Ub;v=this.Tb;t=this.Ub;w=-this.Sb;A=-this.Tb;u=this.Sb;var D,V;V=1/(this.C.Za+this.D.Za);if(0>=this.ue.frequency||!e){D=this.Nb[0];var z=a.rows[a.Ka++],E=z.Aa;E.va=0;E.wa=0;E.xa=0;E.Ba=0;E.Ca=0;E.Da=0;E.S=0;E.T=0;E.U=0;E.W=0;E.X=0;E.Y=0;z.Fa=0;z.Ma=0;z.Ia=0;z.Ha=0;z.motorSpeed=0;z.bb=0;z.ua=D;D=z;var z=this.Vf,x=this.Lh,C=this.ue,E=F.linearSlop;if(e)C=0,e=1;else{if(0<C.frequency){var E=0,N=6.28318530717958*C.frequency,G=C.dampingRatio;G<F.minSpringDamperDampingRatio&&(G=F.minSpringDamperDampingRatio);e=b.dt;G=2*G*N;N*=N;C.useSymplecticEuler?(C=1/(e*G),e=N/G):(C=1/(e*(e*N+G)),e=N/(e*N+G))}else C=0,e=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<x.motorForce?(D.motorSpeed=x.motorSpeed,D.bb=x.motorForce*b.dt):(D.motorSpeed=0,D.bb=0)}b=x.lowerLimit;N=x.upperLimit;b>N?b=G=x=0:b==N?(x=-1/0,G=1/0,b=z-b):z<b?(x=-1/0,G=0,b=z-b+E,0<b&&(b=0)):z>N?(x=0,G=1/0,b=z-N-E,0>b&&(b=0)):b=G=x=0;D.Ia=x;D.Ha=G;D.Ma=C*(V?1/V:0);D.Fa=b*e;V=D.Aa;V.va=this.V.Yc;V.wa=this.V.Zc;V.xa=this.V.$c;V.Ba=this.V.Yc;V.Ca=this.V.Zc;V.Da=this.V.$c;V.S=-0;V.T=-g;V.U=-k;V.W=-0;V.X=-r;V.Y=-v}g=this.Nb[1];k=a.rows[a.Ka++];r=k.Aa;r.va=0;r.wa=0;r.xa=0;r.Ba=0;r.Ca=0;r.Da=0;r.S=0;r.T=0;r.U=0;r.W=0;r.X=0;r.Y=0;k.Fa=0;k.Ma=0;k.Ia=0;k.Ha=0;k.motorSpeed=0;k.bb=0;k.ua=g;D=k;D.Fa=c;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.va=this.V.Md;V.wa=this.V.Nd;V.xa=this.V.Od;V.Ba=this.V.Md;V.Ca=this.V.Nd;V.Da=this.V.Od;V.S=-m;V.T=-0;V.U=-n;V.W=-t;V.X=-0;V.Y=-w;c=this.Nb[2];m=a.rows[a.Ka++];n=m.Aa;n.va=0;n.wa=0;n.xa=0;n.Ba=0;n.Ca=0;n.Da=0;n.S=0;n.T=0;n.U=0;n.W=0;n.X=0;n.Y=0;m.Fa=0;m.Ma=0;m.Ia=0;m.Ha=0;m.motorSpeed=0;m.bb=0;m.ua=c;D=m;D.Fa=f;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.va=this.V.je;V.wa=this.V.ke;V.xa=this.V.le;V.Ba=this.V.je;V.Ca=this.V.ke;V.Da=this.V.le;V.S=-q;V.T=-p;V.U=-0;V.W=-A;V.X=-u;V.Y=-0;f=this.Nb[3];q=a.rows[a.Ka++];p=q.Aa;p.va=0;p.wa=0;p.xa=0;p.Ba=0;p.Ca=0;p.Da=0;p.S=0;p.T=0;p.U=0;p.W=0;p.X=0;p.Y=0;q.Fa=0;q.Ma=0;q.Ia=0;q.Ha=0;q.motorSpeed=0;q.bb=0;q.ua=f;D=q;D.Fa=h;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.S=1;V.T=0;V.U=0;V.W=1;V.X=0;V.Y=0;h=this.Nb[4];f=a.rows[a.Ka++];q=f.Aa;q.va=0;q.wa=0;q.xa=0;q.Ba=0;q.Ca=0;q.Da=0;q.S=0;q.T=0;q.U=0;q.W=0;q.X=0;q.Y=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.bb=0;f.ua=h;D=f;D.Fa=l;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.S=0;V.T=1;V.U=0;V.W=0;V.X=1;V.Y=0;l=this.Nb[5];a=a.rows[a.Ka++];h=a.Aa;h.va=0;h.wa=0;h.xa=0;h.Ba=0;h.Ca=0;h.Da=0;h.S=0;h.T=0;h.U=0;h.W=0;h.X=0;h.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=l;D=a;D.Fa=d;D.Ma=0;D.Ia=-1/0;D.Ha=1/0;V=D.Aa;V.S=0;V.T=0;V.U=1;V.W=0;V.X=0;V.Y=1},ed:function(){L.prototype.ed.call(this);var a=this.V,b=a.P.C.Za,e=a.P.D.Za,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,F,z,E,x,C,N,G,M,O,ha,ga,ra,Vb=a.P.ub*a.P.Xb+a.P.vb*a.P.Yb+a.P.wb*a.P.Zb;if(-1.000001<Vb&&-.999999>Vb){var pa,ka,Oa,U=a.P.ub,R=a.P.vb,Wb=a.P.wb,Ma=U*U,Ra=R*R,Ba=Wb*Wb,Pa;Ma<Ra?Ma<Ba?(Pa=1/Math.sqrt(Ra+Ba),pa=0,ka=Wb*Pa,Oa=-R*Pa):(Pa=1/Math.sqrt(Ma+Ra),pa=R*Pa,ka=-U*Pa,Oa=0):Ra<Ba?(Pa=1/Math.sqrt(Ba+Ma),pa=-Wb*Pa,ka=0,Oa=U*Pa):(Pa=1/Math.sqrt(Ma+Ra),pa=R*Pa,ka=-U*Pa,Oa=0);d=pa;c=ka;f=Oa;h=0}else{var Aa,zb,J;Aa=a.P.vb*a.P.Zb-a.P.wb*a.P.Yb;zb=a.P.wb*a.P.Xb-a.P.ub*a.P.Zb;J=a.P.ub*a.P.Yb-a.P.vb*a.P.Xb;var Qa=Math.sqrt(.5*(1+Vb)),Vb=.5/Qa;Aa*=Vb;zb*=Vb;J*=Vb;d=Aa;c=zb;f=J;h=Qa}var ba,Q,P,wa,ta,W,oa,y;P=Q=ba=0;wa=1;ta=d;W=c;oa=f;y=h;var Ha=ba*ta+Q*W+P*oa+wa*y;0>Ha&&(Ha=-Ha,ta=-ta,W=-W,oa=-oa,y=-y);if(.999999<Ha){var ca,Ca,xa,Da;ca=ta-ba;Ca=W-Q;xa=oa-P;Da=y-wa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ca;oa=P+b/(b+e)*xa;y=wa+b/(b+e)*Da;var Sa=ta*ta+W*W+oa*oa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=oa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ha);ta+=ba*-Ha;W+=Q*-Ha;oa+=P*-Ha;y+=wa*-Ha;var Z=ta*ta+W*W+oa*oa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;oa*=Z;y*=Z;var Ea=Math.sin(la),qa=Math.cos(la);ba*=qa;Q*=qa;P*=qa;wa*=qa;l=ba+ta*Ea;g=Q+W*Ea;k=P+oa*Ea;m=wa+y*Ea}var va=l,I=g,Ka=k,Xa=m,S=2*va,Ya=2*I,T=2*Ka,K=va*S,ia=I*Ya,fb=Ka*T,da=va*Ya,za=I*T,sa=va*T,eb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-fb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-fb;t=za-eb;w=sa-jb;A=za+eb;u=1-K-ia;var ma,na;ma=n*a.P.ub+q*a.P.vb+p*a.P.wb;na=r*a.P.ub+v*a.P.vb+t*a.P.wb;D=w*a.P.ub+A*a.P.vb+u*a.P.wb;G=a.Yc;M=a.Zc;O=a.$c;ha=a.Md;ga=a.Nd;ra=a.Od;var Ia=G*ma+M*na+O*D;if(-1.000001<Ia&&-.999999>Ia){var Fa,ob,fa,ea=G*G,ja=M*M,bb=O*O,ya;ea<ja?ea<bb?(ya=1/Math.sqrt(ja+bb),Fa=0,ob=O*ya,fa=-M*ya):(ya=1/Math.sqrt(ea+ja),Fa=M*ya,ob=-G*ya,fa=0):ja<bb?(ya=1/Math.sqrt(bb+ea),Fa=-O*ya,ob=0,fa=G*ya):(ya=1/Math.sqrt(ea+ja),Fa=M*ya,ob=-G*ya,fa=0);l=Fa;g=ob;k=fa;m=0}else{var tb,Ua,qb;tb=M*D-O*na;Ua=O*ma-G*D;qb=G*na-M*ma;var rb=Math.sqrt(.5*(1+Ia)),Ia=.5/rb;tb*=Ia;Ua*=Ia;qb*=Ia;l=tb;g=Ua;k=qb;m=rb}var ub=l,Va=g,Db=k,Ga=m,$a=2*ub,ua=2*Va,Gb=2*Db,H=ub*$a,pb=Va*ua,cb=Db*Gb,ib=ub*ua,ab=Va*Gb,gb=ub*Gb,B=Ga*$a,Bb=Ga*ua,Wa=Ga*Gb;n=1-pb-cb;q=ib-Wa;p=gb+Bb;r=ib+Wa;v=1-H-cb;t=ab-B;w=gb-Bb;A=ab+B;u=1-H-pb;var vb,Eb,Na;vb=n*ha+q*ga+p*ra;Eb=r*ha+v*ga+t*ra;Na=w*ha+A*ga+u*ra;F=vb;z=Eb;E=Na;x=na*E-D*z;C=D*F-ma*E;N=ma*z-na*F;if(1E-6<x*x+C*C+N*N){var nb=x*x+C*C+N*N;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;C*=nb;N*=nb}else{var wb=ma*ma,xb=na*na,db=D*D,Y;wb<xb?wb<db?(Y=1/Math.sqrt(xb+db),x=0,C=D*Y,N=-na*Y):(Y=1/Math.sqrt(wb+xb),x=na*Y,C=-ma*Y,N=0):xb<db?(Y=1/Math.sqrt(db+wb),x=-D*Y,C=0,N=ma*Y):(Y=1/Math.sqrt(wb+xb),x=na*Y,C=-ma*Y,N=0)}F=C*D-N*na;z=N*ma-x*D;E=x*na-C*ma;a.Yc=ma;a.Zc=na;a.$c=D;a.Md=F;a.Nd=z;a.Od=E;a.je=x;a.ke=C;a.le=N;var La,kb,Ta,hb,Ja,Ib,mb,X,Ab,sb,Cb,Hb,gc,Kb,Fb,Lb,Mb,Qb;La=this.ub;kb=this.xe;Ta=this.th;hb=this.vb;Ja=this.ye;Ib=this.uh;mb=this.wb;X=this.ze;Ab=this.vh;sb=this.Xb;Cb=this.ne;Hb=this.Rg;gc=this.Yb;Kb=this.oe;Fb=this.Sg;Lb=this.Zb;Mb=this.pe;Qb=this.Tg;var jc,uc,kc,ac,Xb,Yb,Sb,hc;jc=sb*La+Cb*kb+Hb*Ta;uc=sb*hb+Cb*Ja+Hb*Ib;kc=sb*mb+Cb*X+Hb*Ab;ac=gc*La+Kb*kb+Fb*Ta;Xb=gc*hb+Kb*Ja+Fb*Ib;Yb=gc*mb+Kb*X+Fb*Ab;Sb=Lb*La+Mb*kb+Qb*Ta;hc=Lb*hb+Mb*Ja+Qb*Ib;var Tb,Pb,Zb,ic,Jb=Lb*mb+Mb*X+Qb*Ab,$b=jc+Xb+Jb,lb;0<$b?(lb=Math.sqrt($b+1),ic=.5*lb,lb=.5/lb,Tb=(hc-Yb)*lb,Pb=(kc-Sb)*lb,Zb=(ac-uc)*lb):jc>Xb?jc>Jb?(lb=Math.sqrt(jc-Xb-Jb+1),Tb=.5*lb,lb=.5/lb,Pb=(uc+ac)*lb,Zb=(kc+Sb)*lb,ic=(hc-Yb)*lb):(lb=Math.sqrt(Jb-jc-Xb+1),Zb=.5*lb,lb=.5/lb,Tb=(kc+Sb)*lb,Pb=(Yb+hc)*lb,ic=(ac-uc)*lb):Xb>Jb?(lb=Math.sqrt(Xb-Jb-jc+1),Pb=.5*lb,lb=.5/lb,Tb=(uc+ac)*lb,Zb=(Yb+hc)*lb,ic=(kc-Sb)*lb):(lb=Math.sqrt(Jb-jc-Xb+1),Zb=.5*lb,lb=.5/lb,Tb=(kc+Sb)*lb,Pb=(Yb+hc)*lb,ic=(ac-uc)*lb);var Rb=ic,Ub=2*(-1>=Rb?3.14159265358979:1<=Rb?0:Math.acos(Rb));this.angularErrorX=Tb;this.angularErrorY=Pb;this.angularErrorZ=Zb;var Nb=this.angularErrorX*this.angularErrorX+this.angularErrorY*this.angularErrorY+this.angularErrorZ*this.angularErrorZ;0<Nb&&(Nb=1/Math.sqrt(Nb));this.angularErrorX*=Nb;this.angularErrorY*=Nb;this.angularErrorZ*=Nb;this.angularErrorX*=Ub;this.angularErrorY*=Ub;this.angularErrorZ*=Ub;var sc,nc,Ob;sc=this.Gf-this.Df;nc=this.Hf-this.Ef;Ob=this.If-this.Ff;this.Vf=sc*this.V.Yc+nc*this.V.Zc+Ob*this.V.$c;this.linearErrorY=sc*this.V.Md+nc*this.V.Nd+Ob*this.V.Od;this.linearErrorZ=sc*this.V.je+nc*this.V.ke+Ob*this.V.le},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Xb;a.y=this.Yb;a.z=this.Zb;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Xb;a.y=this.Yb;a.z=this.Zb},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.hb;a.y=this.ib;a.z=this.jb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.hb;a.y=this.ib;a.z=this.jb},nj:function(){return this.ue},Zk:function(){return this.Lh},$k:function(){return this.Vf},qa:Nb});Dd.R=!0;Dd.Jb=Fc;Dd.prototype=sb(Fc.prototype,{za:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},qa:Dd});Lb.R=!0;Lb.Jb=L;Lb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,A;l=-this.Rb;g=this.Qb;k=this.Rb;m=-this.Pb;n=-this.Qb;q=this.Pb;p=-this.Ub;r=this.Tb;v=this.Ub;t=-this.Sb;w=-this.Tb;A=this.Sb;var u=this.swingAxisX,D=this.swingAxisY,C=this.swingAxisZ,d=(this.C.Z*u+this.C.$*D+this.C.aa*C)*u+(this.C.ba*u+this.C.ca*D+this.C.da*C)*D+(this.C.ea*u+this.C.fa*D+this.C.ga*C)*C,z=(this.D.Z*u+this.D.$*D+this.D.aa*C)*u+(this.D.ba*u+this.D.ca*D+this.D.da*C)*D+(this.D.ea*u+this.D.fa*D+this.D.ga*C)*C;if(0<d){var E=u*this.Pb+D*this.Qb+C*this.Rb,E=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-E*E;0<E&&(d=0<this.C.Za?1/(1/d+this.C.Lc*E):0)}0<z&&(u=u*this.Sb+D*this.Tb+C*this.Ub,u=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-u*u,0<u&&(z=0<this.D.Za?1/(1/z+this.D.Lc*u):0));z=d+z?1/(d+z):0;D=this.Xb;C=this.Yb;E=this.Zb;d=(this.C.Z*D+this.C.$*C+this.C.aa*E)*D+(this.C.ba*D+this.C.ca*C+this.C.da*E)*C+(this.C.ea*D+this.C.fa*C+this.C.ga*E)*E;u=(this.D.Z*D+this.D.$*C+this.D.aa*E)*D+(this.D.ba*D+this.D.ca*C+this.D.da*E)*C+(this.D.ea*D+this.D.fa*C+this.D.ga*E)*E;if(0<d){var x=D*this.Pb+C*this.Qb+E*this.Rb,x=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-x*x;0<x&&(d=0<this.C.Za?1/(1/d+this.C.Lc*x):0)}0<u&&(D=D*this.Sb+C*this.Tb+E*this.Ub,D=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-D*D,0<D&&(u=0<this.D.Za?1/(1/u+this.D.Lc*D):0));d=d+u?1/(d+u):0;u=this.Nb[0];D=a.rows[a.Ka++];C=D.Aa;C.va=0;C.wa=0;C.xa=0;C.Ba=0;C.Ca=0;C.Da=0;C.S=0;C.T=0;C.U=0;C.W=0;C.X=0;C.Y=0;D.Fa=0;D.Ma=0;D.Ia=0;D.Ha=0;D.motorSpeed=0;D.bb=0;D.ua=u;u=D;u.Fa=c;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=1;u.wa=0;u.xa=0;u.Ba=1;u.Ca=0;u.Da=0;u.S=-0;u.T=-l;u.U=-g;u.W=-0;u.X=-p;u.Y=-r;u=this.Nb[1];c=a.rows[a.Ka++];l=c.Aa;l.va=0;l.wa=0;l.xa=0;l.Ba=0;l.Ca=0;l.Da=0;l.S=0;l.T=0;l.U=0;l.W=0;l.X=0;l.Y=0;c.Fa=0;c.Ma=0;c.Ia=0;c.Ha=0;c.motorSpeed=0;c.bb=0;c.ua=u;u=c;u.Fa=f;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=0;u.wa=1;u.xa=0;u.Ba=0;u.Ca=1;u.Da=0;u.S=-k;u.T=-0;u.U=-m;u.W=-v;u.X=-0;u.Y=-t;u=this.Nb[2];f=a.rows[a.Ka++];k=f.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.S=0;k.T=0;k.U=0;k.W=0;k.X=0;k.Y=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.bb=0;f.ua=u;u=f;u.Fa=h;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=0;u.wa=0;u.xa=1;u.Ba=0;u.Ca=0;u.Da=1;u.S=-n;u.T=-q;u.U=-0;u.W=-w;u.X=-A;u.Y=-0;0<this.swingError&&(0>=this.Hk.frequency||!e)&&(u=this.Nb[3],h=a.rows[a.Ka++],n=h.Aa,n.va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.S=0,n.T=0,n.U=0,n.W=0,n.X=0,n.Y=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.bb=0,h.ua=u,u=h,h=this.swingError,w=this.Wk,q=this.Hk,n=F.angularSlop,e?(q=0,A=1):(0<q.frequency?(n=0,k=6.28318530717958*q.frequency,f=q.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),A=b.dt,f=2*f*k,k*=k,q.useSymplecticEuler?(q=1/(A*f),A=k/f):(q=1/(A*(A*k+f)),A=k/(A*k+f))):(q=0,A=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<w.motorTorque?(u.motorSpeed=w.motorSpeed,u.bb=w.motorTorque*b.dt):(u.motorSpeed=0,u.bb=0)),f=w.lowerLimit,w=w.upperLimit,k=.5*(f+w),h=((h-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,h+=k,f>w?h=m=k=0:f==w?(k=-1/0,m=1/0,h-=f):h<f?(k=-1/0,m=0,h=h-f+n,0<h&&(h=0)):h>w?(k=0,m=1/0,h=h-w-n,0>h&&(h=0)):h=m=k=0,u.Ia=k,u.Ha=m,u.Ma=q*(z?1/z:0),u.Fa=h*A,u=u.Aa,u.S=this.swingAxisX,u.T=this.swingAxisY,u.U=this.swingAxisZ,u.W=this.swingAxisX,u.X=this.swingAxisY,u.Y=this.swingAxisZ);if(0>=this.Nk.frequency||!e)z=this.Nb[4],a=a.rows[a.Ka++],u=a.Aa,u.va=0,u.wa=0,u.xa=0,u.Ba=0,u.Ca=0,u.Da=0,u.S=0,u.T=0,u.U=0,u.W=0,u.X=0,u.Y=0,a.Fa=0,a.Ma=0,a.Ia=0,a.Ha=0,a.motorSpeed=0,a.bb=0,a.ua=z,u=a,a=this.ej,h=this.Mk,n=this.Nk,z=F.angularSlop,e?(e=0,n=1):(0<n.frequency?(z=0,e=6.28318530717958*n.frequency,w=n.dampingRatio,w<F.minSpringDamperDampingRatio&&(w=F.minSpringDamperDampingRatio),q=b.dt,w=2*w*e,A=e*e,n.useSymplecticEuler?(e=1/(q*w),n=A/w):(e=1/(q*(q*A+w)),n=A/(q*A+w))):(e=0,n=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<h.motorTorque?(u.motorSpeed=h.motorSpeed,u.bb=h.motorTorque*b.dt):(u.motorSpeed=0,u.bb=0)),b=h.lowerLimit,h=h.upperLimit,q=.5*(b+h),a=((a-q+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,a+=q,b>h?b=w=q=0:b==h?(q=-1/0,w=1/0,b=a-b):a<b?(q=-1/0,w=0,b=a-b+z,0<b&&(b=0)):a>h?(q=0,w=1/0,b=a-h-z,0>b&&(b=0)):b=w=q=0,u.Ia=q,u.Ha=w,u.Ma=e*(d?1/d:0),u.Fa=b*n,u=u.Aa,u.S=this.twistAxisX,u.T=this.twistAxisY,u.U=this.twistAxisZ,u.W=this.twistAxisX,u.X=this.twistAxisY,u.Y=this.twistAxisZ},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f;a=this.ub;b=this.vb;e=this.wb;d=this.Xb;c=this.Yb;f=this.Zb;var h,l,g,k,m,n,q,p,r;h=this.ub;l=this.xe;g=this.th;k=this.vb;m=this.ye;n=this.uh;q=this.wb;p=this.ze;r=this.vh;var v,t,w,A,u,D,C,z;D=a*d+b*c+e*f;-1.000001<D&&-.999999>D?(u=a*a,d=b*b,c=e*e,u<d?u<c?(d=1/Math.sqrt(d+c),u=0,e*=d,a=-b*d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0):d<c?(d=1/Math.sqrt(c+u),u=-e*d,e=0,a*=d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0),v=u,t=e,w=a,A=0):(u=Math.sqrt(.5*(1+D)),D=.5/u,v=(b*f-e*c)*D,t=(e*d-a*f)*D,w=(a*c-b*d)*D,A=u);D=v;f=t;u=w;a=A;c=2*D;e=2*f;b=2*u;C=D*c;z=f*e;d=u*b;u=D*e;f*=b;D*=b;var E=a*c,x=a*e;c=a*b;a=1-z-d;b=u-c;e=D+x;u+=c;d=1-C-d;c=f-E;D-=x;f+=E;C=1-C-z;this.Wi=2*(-1>=A?3.14159265358979:1<=A?0:Math.acos(A));A=v;z=w;w=a*this.ne+u*this.oe+D*this.pe;E=b*this.ne+d*this.oe+f*this.pe;v=e*this.ne+c*this.oe+C*this.pe;this.ej=Math.atan2(this.th*w+this.uh*E+this.vh*v,this.xe*w+this.ye*E+this.ze*v);this.twistAxisX=this.ub+this.Xb;this.twistAxisY=this.vb+this.Yb;this.twistAxisZ=this.wb+this.Zb;v=this.twistAxisX*this.twistAxisX+this.twistAxisY*this.twistAxisY+this.twistAxisZ*this.twistAxisZ;0<v&&(v=1/Math.sqrt(v));this.twistAxisX*=v;this.twistAxisY*=v;this.twistAxisZ*=v;w=Math.sqrt(A*A+t*t+z*z);0<w&&(w=1/w);A*=w*this.Wi;t*=w*this.Wi;z*=w*this.Wi;v=l*A+m*t+p*z;t=g*A+n*t+r*z;w=this.Jj;A=this.Kj;w=1/(w*w);z=1/(A*A);(A=v*v*w+t*t*z)?(E=Math.sqrt(1/A),A=v*E,E*=t,x=A*w,z*=E,w=1/Math.sqrt(x*x+z*z),x*=w,z*=w,v=(v-A)*x+(t-E)*z,0<v?(this.swingError=v,this.swingAxisX=0,this.swingAxisY=x,this.swingAxisZ=z,h=h*this.swingAxisX+l*this.swingAxisY+g*this.swingAxisZ,k=k*this.swingAxisX+m*this.swingAxisY+n*this.swingAxisZ,q=q*this.swingAxisX+p*this.swingAxisY+r*this.swingAxisZ,this.swingAxisX=h,this.swingAxisY=k,this.swingAxisZ=q,q=a*this.swingAxisX+b*this.swingAxisY+e*this.swingAxisZ,p=u*this.swingAxisX+d*this.swingAxisY+c*this.swingAxisZ,r=D*this.swingAxisX+f*this.swingAxisY+C*this.swingAxisZ,this.swingAxisX=q,this.swingAxisY=p,this.swingAxisZ=r,this.swingConstraintAxisX=this.swingAxisX,this.swingConstraintAxisY=this.swingAxisY,this.swingConstraintAxisZ=this.swingAxisZ):this.swingError=0):this.swingError=this.swingAxisZ=this.swingAxisY=this.swingAxisX=0;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Xb;a.y=this.Yb;a.z=this.Zb;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Xb;a.y=this.Yb;a.z=this.Zb},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.hb;a.y=this.ib;a.z=this.jb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.hb;a.y=this.ib;a.z=this.jb},yn:function(){return this.Nk},xn:function(){return this.Mk},sn:function(){return this.Hk},qn:function(){var a=new t;a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ;return a},rn:function(a){a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ},pn:function(){return this.Wi},wn:function(){return this.ej},qa:Lb});Wd.R=!0;Wd.Jb=Fc;Wd.prototype=sb(Fc.prototype,{za:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;var g;e=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;h=this.localTwistAxis1;h.x=e;h.y=g;h.z=f;g=d.x;f=d.y;h=d.z;d=b.a.o*g+b.a.i*f+b.a.l*h;e=b.a.f*g+b.a.m*f+b.a.g*h;b=b.a.h*g+b.a.j*f+b.a.s*h;g=this.localTwistAxis2;g.x=d;g.y=e;g.z=b;d=c.x;e=c.y;g=c.z;c=a.a.o*d+a.a.i*e+a.a.l*g;b=a.a.f*d+a.a.m*e+a.a.g*g;a=a.a.h*d+a.a.j*e+a.a.s*g;d=this.localSwingAxis1;d.x=c;d.y=b;d.z=a;return this},qa:Wd});Qb.R=!0;Qb.Jb=L;Qb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,A,u;g=-this.Rb;k=this.Qb;m=this.Rb;n=-this.Pb;q=-this.Qb;p=this.Pb;r=-this.Ub;v=this.Tb;t=this.Ub;w=-this.Sb;A=-this.Tb;u=this.Sb;var D=this.V.Yc,C=this.V.Zc,z=this.V.$c,E=(this.C.Z*D+this.C.$*C+this.C.aa*z)*D+(this.C.ba*D+this.C.ca*C+this.C.da*z)*C+(this.C.ea*D+this.C.fa*C+this.C.ga*z)*z,x=(this.D.Z*D+this.D.$*C+this.D.aa*z)*D+(this.D.ba*D+this.D.ca*C+this.D.da*z)*C+(this.D.ea*D+this.D.fa*C+this.D.ga*z)*z;if(0<E){var L=D*this.Pb+C*this.Qb+z*this.Rb,L=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-L*L;0<L&&(E=0<this.C.Za?1/(1/E+this.C.Lc*L):0)}0<x&&(D=D*this.Sb+C*this.Tb+z*this.Ub,D=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-D*D,0<D&&(x=0<this.D.Za?1/(1/x+this.D.Lc*D):0));E=E+x?1/(E+x):0;x=this.Nb[0];D=a.rows[a.Ka++];C=D.Aa;C.va=0;C.wa=0;C.xa=0;C.Ba=0;C.Ca=0;C.Da=0;C.S=0;C.T=0;C.U=0;C.W=0;C.X=0;C.Y=0;D.Fa=0;D.Ma=0;D.Ia=0;D.Ha=0;D.motorSpeed=0;D.bb=0;D.ua=x;x=D;x.Fa=c;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.va=1;x.wa=0;x.xa=0;x.Ba=1;x.Ca=0;x.Da=0;x.S=-0;x.T=-g;x.U=-k;x.W=-0;x.X=-r;x.Y=-v;x=this.Nb[1];c=a.rows[a.Ka++];g=c.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.S=0;g.T=0;g.U=0;g.W=0;g.X=0;g.Y=0;c.Fa=0;c.Ma=0;c.Ia=0;c.Ha=0;c.motorSpeed=0;c.bb=0;c.ua=x;x=c;x.Fa=f;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.va=0;x.wa=1;x.xa=0;x.Ba=0;x.Ca=1;x.Da=0;x.S=-m;x.T=-0;x.U=-n;x.W=-t;x.X=-0;x.Y=-w;f=this.Nb[2];x=a.rows[a.Ka++];m=x.Aa;m.va=0;m.wa=0;m.xa=0;m.Ba=0;m.Ca=0;m.Da=0;m.S=0;m.T=0;m.U=0;m.W=0;m.X=0;m.Y=0;x.Fa=0;x.Ma=0;x.Ia=0;x.Ha=0;x.motorSpeed=0;x.bb=0;x.ua=f;x.Fa=h;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.va=0;x.wa=0;x.xa=1;x.Ba=0;x.Ca=0;x.Da=1;x.S=-q;x.T=-p;x.U=-0;x.W=-A;x.X=-u;x.Y=-0;if(0>=this.ue.frequency||!e)h=this.Nb[3],q=a.rows[a.Ka++],p=q.Aa,p.va=0,p.wa=0,p.xa=0,p.Ba=0,p.Ca=0,p.Da=0,p.S=0,p.T=0,p.U=0,p.W=0,p.X=0,p.Y=0,q.Fa=0,q.Ma=0,q.Ia=0,q.Ha=0,q.motorSpeed=0,q.bb=0,q.ua=h,x=q,h=this.angle,p=this.Lh,A=this.ue,q=F.angularSlop,e?(e=0,A=1):(0<A.frequency?(q=0,e=6.28318530717958*A.frequency,f=A.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),u=b.dt,f=2*f*e,m=e*e,A.useSymplecticEuler?(e=1/(u*f),A=m/f):(e=1/(u*(u*m+f)),A=m/(u*m+f))):(e=0,A=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<p.motorTorque?(x.motorSpeed=p.motorSpeed,x.bb=p.motorTorque*b.dt):(x.motorSpeed=0,x.bb=0)),b=p.lowerLimit,p=p.upperLimit,u=.5*(b+p),h=((h-u+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+u,b>p?b=f=u=0:b==p?(u=-1/0,f=1/0,b=h-b):h<b?(u=-1/0,f=0,b=h-b+q,0<b&&(b=0)):h>p?(u=0,f=1/0,b=h-p-q,0>b&&(b=0)):b=f=u=0,x.Ia=u,x.Ha=f,x.Ma=e*(E?1/E:0),x.Fa=b*A,x=x.Aa,x.S=this.V.Yc,x.T=this.V.Zc,x.U=this.V.$c,x.W=this.V.Yc,x.X=this.V.Zc,x.Y=this.V.$c;b=this.Nb[4];E=a.rows[a.Ka++];e=E.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.S=0;e.T=0;e.U=0;e.W=0;e.X=0;e.Y=0;E.Fa=0;E.Ma=0;E.Ia=0;E.Ha=0;E.motorSpeed=0;E.bb=0;E.ua=b;x=E;x.Fa=l;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.S=this.V.Md;x.T=this.V.Nd;x.U=this.V.Od;x.W=this.V.Md;x.X=this.V.Nd;x.Y=this.V.Od;l=this.Nb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.S=0;b.T=0;b.U=0;b.W=0;b.X=0;b.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=l;x=a;x.Fa=d;x.Ma=0;x.Ia=-1/0;x.Ha=1/0;x=x.Aa;x.S=this.V.je;x.T=this.V.ke;x.U=this.V.le;x.W=this.V.je;x.X=this.V.ke;x.Y=this.V.le},ed:function(){L.prototype.ed.call(this);var a=this.V,b=a.P.C.Za,e=a.P.D.Za,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u,D,C,z,E,x,F,N,G,M,O,ha,ga,ra,pa=a.P.ub*a.P.Xb+a.P.vb*a.P.Yb+a.P.wb*a.P.Zb;if(-1.000001<pa&&-.999999>pa){var Ba,ka,Oa,U=a.P.ub,R=a.P.vb,Wb=a.P.wb,Ma=U*U,Ra=R*R,Ga=Wb*Wb,Pa;Ma<Ra?Ma<Ga?(Pa=1/Math.sqrt(Ra+Ga),Ba=0,ka=Wb*Pa,Oa=-R*Pa):(Pa=1/Math.sqrt(Ma+Ra),Ba=R*Pa,ka=-U*Pa,Oa=0):Ra<Ga?(Pa=1/Math.sqrt(Ga+Ma),Ba=-Wb*Pa,ka=0,Oa=U*Pa):(Pa=1/Math.sqrt(Ma+Ra),Ba=R*Pa,ka=-U*Pa,Oa=0);d=Ba;c=ka;f=Oa;h=0}else{var Aa,zb,J;Aa=a.P.vb*a.P.Zb-a.P.wb*a.P.Yb;zb=a.P.wb*a.P.Xb-a.P.ub*a.P.Zb;J=a.P.ub*a.P.Yb-a.P.vb*a.P.Xb;var Qa=Math.sqrt(.5*(1+pa)),pa=.5/Qa;Aa*=pa;zb*=pa;J*=pa;d=Aa;c=zb;f=J;h=Qa}var ba,Q,P,wa,ta,W,oa,y;P=Q=ba=0;wa=1;ta=d;W=c;oa=f;y=h;var Ha=ba*ta+Q*W+P*oa+wa*y;0>Ha&&(Ha=-Ha,ta=-ta,W=-W,oa=-oa,y=-y);if(.999999<Ha){var ca,Ca,xa,Da;ca=ta-ba;Ca=W-Q;xa=oa-P;Da=y-wa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ca;oa=P+b/(b+e)*xa;y=wa+b/(b+e)*Da;var Sa=ta*ta+W*W+oa*oa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=oa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ha);ta+=ba*-Ha;W+=Q*-Ha;oa+=P*-Ha;y+=wa*-Ha;var Z=ta*ta+W*W+oa*oa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;oa*=Z;y*=Z;var Ea=Math.sin(la),qa=Math.cos(la);ba*=qa;Q*=qa;P*=qa;wa*=qa;l=ba+ta*Ea;g=Q+W*Ea;k=P+oa*Ea;m=wa+y*Ea}var va=l,I=g,Ka=k,Xa=m,S=2*va,Ya=2*I,T=2*Ka,K=va*S,ia=I*Ya,fb=Ka*T,da=va*Ya,za=I*T,sa=va*T,eb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-fb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-fb;t=za-eb;w=sa-jb;A=za+eb;u=1-K-ia;var ma,na;ma=n*a.P.ub+q*a.P.vb+p*a.P.wb;na=r*a.P.ub+v*a.P.vb+t*a.P.wb;D=w*a.P.ub+A*a.P.vb+u*a.P.wb;G=a.Yc;M=a.Zc;O=a.$c;ha=a.Md;ga=a.Nd;ra=a.Od;var Ia=G*ma+M*na+O*D;if(-1.000001<Ia&&-.999999>Ia){var Fa,ob,fa,ea=G*G,ja=M*M,bb=O*O,ya;ea<ja?ea<bb?(ya=1/Math.sqrt(ja+bb),Fa=0,ob=O*ya,fa=-M*ya):(ya=1/Math.sqrt(ea+ja),Fa=M*ya,ob=-G*ya,fa=0):ja<bb?(ya=1/Math.sqrt(bb+ea),Fa=-O*ya,ob=0,fa=G*ya):(ya=1/Math.sqrt(ea+ja),Fa=M*ya,ob=-G*ya,fa=0);l=Fa;g=ob;k=fa;m=0}else{var tb,Ua,qb;tb=M*D-O*na;Ua=O*ma-G*D;qb=G*na-M*ma;var rb=Math.sqrt(.5*(1+Ia)),Ia=.5/rb;tb*=Ia;Ua*=Ia;qb*=Ia;l=tb;g=Ua;k=qb;m=rb}var ub=l,Va=g,Db=k,ib=m,$a=2*ub,ua=2*Va,Gb=2*Db,H=ub*$a,pb=Va*ua,cb=Db*Gb,Wa=ub*ua,ab=Va*Gb,gb=ub*Gb,B=ib*$a,Bb=ib*ua,mb=ib*Gb;n=1-pb-cb;q=Wa-mb;p=gb+Bb;r=Wa+mb;v=1-H-cb;t=ab-B;w=gb-Bb;A=ab+B;u=1-H-pb;var vb,Eb,Na;vb=n*ha+q*ga+p*ra;Eb=r*ha+v*ga+t*ra;Na=w*ha+A*ga+u*ra;C=vb;z=Eb;E=Na;x=na*E-D*z;F=D*C-ma*E;N=ma*z-na*C;if(1E-6<x*x+F*F+N*N){var nb=x*x+F*F+N*N;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;F*=nb;N*=nb}else{var wb=ma*ma,xb=na*na,db=D*D,Y;wb<xb?wb<db?(Y=1/Math.sqrt(xb+db),x=0,F=D*Y,N=-na*Y):(Y=1/Math.sqrt(wb+xb),x=na*Y,F=-ma*Y,N=0):xb<db?(Y=1/Math.sqrt(db+wb),x=-D*Y,F=0,N=ma*Y):(Y=1/Math.sqrt(wb+xb),x=na*Y,F=-ma*Y,N=0)}C=F*D-N*na;z=N*ma-x*D;E=x*na-F*ma;a.Yc=ma;a.Zc=na;a.$c=D;a.Md=C;a.Nd=z;a.Od=E;a.je=x;a.ke=F;a.le=N;var La,kb,Ta;La=this.vb*this.Zb-this.wb*this.Yb;kb=this.wb*this.Xb-this.ub*this.Zb;Ta=this.ub*this.Yb-this.vb*this.Xb;var hb=this.ub*this.Xb+this.vb*this.Yb+this.wb*this.Zb,Ja=-1>=hb?3.14159265358979:1<=hb?0:Math.acos(hb),Ib=La*La+kb*kb+Ta*Ta;0<Ib&&(Ib=1/Math.sqrt(Ib));La*=Ib;kb*=Ib;Ta*=Ib;La*=Ja;kb*=Ja;Ta*=Ja;this.angularErrorY=La*this.V.Md+kb*this.V.Nd+Ta*this.V.Od;this.angularErrorZ=La*this.V.je+kb*this.V.ke+Ta*this.V.le;var sb,X,Ab;sb=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Ab=this.xe*this.oe-this.ye*this.ne;hb=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=hb?3.14159265358979:1<=hb?0:Math.acos(hb);0>sb*this.V.Yc+X*this.V.Zc+Ab*this.V.$c&&(this.angle=-this.angle);this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Xb;a.y=this.Yb;a.z=this.Zb;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Xb;a.y=this.Yb;a.z=this.Zb},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.hb;a.y=this.ib;a.z=this.jb;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.hb;a.y=this.ib;a.z=this.jb},nj:function(){return this.ue},Zk:function(){return this.Lh},Xk:function(){return this.angle},qa:Qb});Ce.R=!0;Ce.Jb=Fc;Ce.prototype=sb(Fc.prototype,{za:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},qa:Ce});Jc.R=!0;Jc.prototype={Pa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},ab:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new Jc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a},qa:Jc};se.R=!0;se.Jb=L;se.prototype=sb(L.prototype,{Rd:function(a,b,e){if(!(0<this.ue.frequency&&e)){var d,c,f;d=this.Gf-this.Df;c=this.Hf-this.Ef;f=this.If-this.Ff;var h;if(0<this.ue.frequency){h=6.28318530717958*this.ue.frequency;e=this.ue.dampingRatio;e<F.minSpringDamperDampingRatio&&(e=F.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.ue.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.Za+this.D.Za}else h=0,b=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;var g,k,m,n,q,p,r,v,t,w;g=-this.Rb;k=this.Qb;m=this.Rb;n=-this.Pb;e=-this.Qb;l=this.Pb;q=-this.Ub;p=this.Tb;r=this.Ub;v=-this.Sb;t=-this.Tb;w=this.Sb;var A=this.Nb[0],u=a.rows[a.Ka++],D=u.Aa;D.va=0;D.wa=0;D.xa=0;D.Ba=0;D.Ca=0;D.Da=0;D.S=0;D.T=0;D.U=0;D.W=0;D.X=0;D.Y=0;u.Fa=0;u.Ma=0;u.Ia=0;u.Ha=0;u.motorSpeed=0;u.bb=0;u.ua=A;A=u;A.Fa=d*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=1;d.wa=0;d.xa=0;d.Ba=1;d.Ca=0;d.Da=0;d.S=-0;d.T=-g;d.U=-k;d.W=-0;d.X=-q;d.Y=-p;d=this.Nb[1];g=a.rows[a.Ka++];k=g.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.S=0;k.T=0;k.U=0;k.W=0;k.X=0;k.Y=0;g.Fa=0;g.Ma=0;g.Ia=0;g.Ha=0;g.motorSpeed=0;g.bb=0;g.ua=d;A=g;A.Fa=c*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=0;d.wa=1;d.xa=0;d.Ba=0;d.Ca=1;d.Da=0;d.S=-m;d.T=-0;d.U=-n;d.W=-r;d.X=-0;d.Y=-v;c=this.Nb[2];a=a.rows[a.Ka++];d=a.Aa;d.va=0;d.wa=0;d.xa=0;d.Ba=0;d.Ca=0;d.Da=0;d.S=0;d.T=0;d.U=0;d.W=0;d.X=0;d.Y=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.bb=0;a.ua=c;A=a;A.Fa=f*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=0;d.wa=0;d.xa=1;d.Ba=0;d.Ca=0;d.Da=1;d.S=-e;d.T=-l;d.U=-0;d.W=-t;d.X=-w;d.Y=-0}},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},nj:function(){return this.ue},qa:se});re.R=!0;re.Jb=Fc;re.prototype=sb(Fc.prototype,{za:function(a,b,e){this.Vg(a,b,e);return this},qa:re});Mb.R=!0;Mb.prototype={Pa:function(a,b){this.frequency=a;this.dampingRatio=b;return this},ab:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new Mb;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a},qa:Mb};Hc.R=!0;Hc.prototype={Pa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},ab:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new Hc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a},qa:Hc};vb.R=!0;vb.Jb=L;vb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.zl*d,g,k,m,n,q,p,r,v,t,w,A,u,D,C,z,E,x,L;g=0;k=-this.Rb;m=this.Qb;n=this.Rb;q=0;p=-this.Pb;r=-this.Qb;v=this.Pb;w=t=0;A=-this.Ub;u=this.Tb;D=this.Ub;C=0;z=-this.Sb;E=-this.Tb;x=this.Sb;L=0;g=-g;k=-k;m=-m;n=-n;q=-q;p=-p;r=-r;v=-v;t=-t;w=-w;A=-A;u=-u;D=-D;C=-C;z=-z;E=-E;x=-x;L=-L;var N=this.Wf,G=this.Xf,M=this.Yf,O=(this.C.Z*N+this.C.$*G+this.C.aa*M)*N+(this.C.ba*N+this.C.ca*G+this.C.da*M)*G+(this.C.ea*N+this.C.fa*G+this.C.ga*M)*M,ha=(this.D.Z*N+this.D.$*G+this.D.aa*M)*N+(this.D.ba*N+this.D.ca*G+this.D.da*M)*G+(this.D.ea*N+this.D.fa*G+this.D.ga*M)*M;if(0<O){var ga=N*this.Pb+G*this.Qb+M*this.Rb,ra=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-ga*ga;0<ra&&(O=0<this.C.Za?1/(1/O+this.C.Lc*ra):0)}if(0<ha){var pa=N*this.Sb+G*this.Tb+M*this.Ub,Ba=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-pa*pa;0<Ba&&(ha=0<this.D.Za?1/(1/ha+this.D.Lc*Ba):0)}var ka=O+ha?1/(O+ha):0,Oa=this.Zf,U=this.$f,R=this.ag,Ga=(this.C.Z*Oa+this.C.$*U+this.C.aa*R)*Oa+(this.C.ba*Oa+this.C.ca*U+this.C.da*R)*U+(this.C.ea*Oa+this.C.fa*U+this.C.ga*R)*R,Ma=(this.D.Z*Oa+this.D.$*U+this.D.aa*R)*Oa+(this.D.ba*Oa+this.D.ca*U+this.D.da*R)*U+(this.D.ea*Oa+this.D.fa*U+this.D.ga*R)*R;if(0<Ga){var Ra=Oa*this.Pb+U*this.Qb+R*this.Rb,za=this.Pb*this.Pb+this.Qb*this.Qb+this.Rb*this.Rb-Ra*Ra;0<za&&(Ga=0<this.C.Za?1/(1/Ga+this.C.Lc*za):0)}if(0<Ma){var Pa=Oa*this.Sb+U*this.Tb+R*this.Ub,Aa=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-Pa*Pa;0<Aa&&(Ma=0<this.D.Za?1/(1/Ma+this.D.Lc*Aa):0)}var zb=Ga+Ma?1/(Ga+Ma):0,J=this.Nb[0],Qa=a.rows[a.Ka++],ba=Qa.Aa;ba.va=0;ba.wa=0;ba.xa=0;ba.Ba=0;ba.Ca=0;ba.Da=0;ba.S=0;ba.T=0;ba.U=0;ba.W=0;ba.X=0;ba.Y=0;Qa.Fa=0;Qa.Ma=0;Qa.Ia=0;Qa.Ha=0;Qa.motorSpeed=0;Qa.bb=0;Qa.ua=J;var Q=Qa;Q.Fa=c;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;var P=Q.Aa;P.va=1;P.wa=0;P.xa=0;P.Ba=1;P.Ca=0;P.Da=0;P.S=g;P.T=k;P.U=m;P.W=w;P.X=A;P.Y=u;var wa=this.Nb[1],ta=a.rows[a.Ka++],W=ta.Aa;W.va=0;W.wa=0;W.xa=0;W.Ba=0;W.Ca=0;W.Da=0;W.S=0;W.T=0;W.U=0;W.W=0;W.X=0;W.Y=0;ta.Fa=0;ta.Ma=0;ta.Ia=0;ta.Ha=0;ta.motorSpeed=0;ta.bb=0;ta.ua=wa;Q=ta;Q.Fa=f;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;P=Q.Aa;P.va=0;P.wa=1;P.xa=0;P.Ba=0;P.Ca=1;P.Da=0;P.S=n;P.T=q;P.U=p;P.W=D;P.X=C;P.Y=z;var oa=this.Nb[2],y=a.rows[a.Ka++],Ha=y.Aa;Ha.va=0;Ha.wa=0;Ha.xa=0;Ha.Ba=0;Ha.Ca=0;Ha.Da=0;Ha.S=0;Ha.T=0;Ha.U=0;Ha.W=0;Ha.X=0;Ha.Y=0;y.Fa=0;y.Ma=0;y.Ia=0;y.Ha=0;y.motorSpeed=0;y.bb=0;y.ua=oa;Q=y;Q.Fa=h;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;P=Q.Aa;P.va=0;P.wa=0;P.xa=1;P.Ba=0;P.Ca=0;P.Da=1;P.S=r;P.T=v;P.U=t;P.W=E;P.X=x;P.Y=L;if(!this.Bm&&(0>=this.Fk.frequency||!e)){var ca=this.Nb[3],Ca=a.rows[a.Ka++],xa=Ca.Aa;xa.va=0;xa.wa=0;xa.xa=0;xa.Ba=0;xa.Ca=0;xa.Da=0;xa.S=0;xa.T=0;xa.U=0;xa.W=0;xa.X=0;xa.Y=0;Ca.Fa=0;Ca.Ma=0;Ca.Ia=0;Ca.Ha=0;Ca.motorSpeed=0;Ca.bb=0;Ca.ua=ca;var Q=Ca,Da=this.yi,Sa=this.xk,la=this.Fk,Z,Ea,qa=F.angularSlop;if(e)Z=0,Ea=1;else{if(0<la.frequency){var qa=0,va=6.28318530717958*la.frequency,I=la.dampingRatio;I<F.minSpringDamperDampingRatio&&(I=F.minSpringDamperDampingRatio);var Ka=b.dt,Xa=2*I*va,S=va*va;la.useSymplecticEuler?(Z=1/(Ka*Xa),Ea=S/Xa):(Z=1/(Ka*(Ka*S+Xa)),Ea=S/(Ka*S+Xa))}else Z=0,Ea=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Sa.motorTorque?(Q.motorSpeed=Sa.motorSpeed,Q.bb=Sa.motorTorque*b.dt):(Q.motorSpeed=0,Q.bb=0)}var Ya=Sa.lowerLimit,T=Sa.upperLimit,K=.5*(Ya+T),Da=Da-K,Da=((Da+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Da=Da+K,ia,fb,da;Ya>T?da=fb=ia=0:Ya==T?(ia=-1/0,fb=1/0,da=Da-Ya):Da<Ya?(ia=-1/0,fb=0,da=Da-Ya+qa,0<da&&(da=0)):Da>T?(ia=0,fb=1/0,da=Da-T-qa,0>da&&(da=0)):da=fb=ia=0;var ib=ka?1/ka:0;Q.Ia=ia;Q.Ha=fb;Q.Ma=Z*ib;Q.Fa=da*Ea;P=Q.Aa;P.S=this.Wf;P.T=this.Xf;P.U=this.Yf;P.W=this.Wf;P.X=this.Xf;P.Y=this.Yf}if(!this.Cm){var sa=this.Nb[4],eb=a.rows[a.Ka++],jb=eb.Aa;jb.va=0;jb.wa=0;jb.xa=0;jb.Ba=0;jb.Ca=0;jb.Da=0;jb.S=0;jb.T=0;jb.U=0;jb.W=0;jb.X=0;jb.Y=0;eb.Fa=0;eb.Ma=0;eb.Ia=0;eb.Ha=0;eb.motorSpeed=0;eb.bb=0;eb.ua=sa;Q=eb;Q.Fa=l;Q.Ma=0;Q.Ia=-1/0;Q.Ha=1/0;P=Q.Aa;P.S=this.Og;P.T=this.Pg;P.U=this.Qg;P.W=this.Og;P.X=this.Pg;P.Y=this.Qg}if(!this.Dm&&(0>=this.Gk.frequency||!e)){var Za=this.Nb[5],ma=a.rows[a.Ka++],na=ma.Aa;na.va=0;na.wa=0;na.xa=0;na.Ba=0;na.Ca=0;na.Da=0;na.S=0;na.T=0;na.U=0;na.W=0;na.X=0;na.Y=0;ma.Fa=0;ma.Ma=0;ma.Ia=0;ma.Ha=0;ma.motorSpeed=0;ma.bb=0;ma.ua=Za;var Q=ma,Ia=this.zi,Fa=this.yk,ob=this.Gk,fa,ea,ja=F.angularSlop;if(e)fa=0,ea=1;else{if(0<ob.frequency){var ja=0,bb=6.28318530717958*ob.frequency,ya=ob.dampingRatio;ya<F.minSpringDamperDampingRatio&&(ya=F.minSpringDamperDampingRatio);var tb=b.dt,Ua=2*ya*bb,qb=bb*bb;ob.useSymplecticEuler?(fa=1/(tb*Ua),ea=qb/Ua):(fa=1/(tb*(tb*qb+Ua)),ea=qb/(tb*qb+Ua))}else fa=0,ea=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Fa.motorTorque?(Q.motorSpeed=Fa.motorSpeed,Q.bb=Fa.motorTorque*b.dt):(Q.motorSpeed=0,Q.bb=0)}var rb=Fa.lowerLimit,ub=Fa.upperLimit,Va=.5*(rb+ub),Ia=Ia-Va,Ia=((Ia+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Ia=Ia+Va,Db,Wa,$a;rb>ub?$a=Wa=Db=0:rb==ub?(Db=-1/0,Wa=1/0,$a=Ia-rb):Ia<rb?(Db=-1/0,Wa=0,$a=Ia-rb+ja,0<$a&&($a=0)):Ia>ub?(Db=0,Wa=1/0,$a=Ia-ub-ja,0>$a&&($a=0)):$a=Wa=Db=0;var ua=zb?1/zb:0;Q.Ia=Db;Q.Ha=Wa;Q.Ma=fa*ua;Q.Fa=$a*ea;P=Q.Aa;P.S=this.Zf;P.T=this.$f;P.U=this.ag;P.W=this.Zf;P.X=this.$f;P.Y=this.ag}},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f,h,l,g;a=this.ub;b=this.vb;e=this.wb;h=this.Rg;l=this.Sg;g=this.Tg;d=l*e-g*b;c=g*a-h*e;f=h*b-l*a;this.Wf=c*g-f*l;this.Xf=f*h-d*g;this.Yf=d*l-c*h;this.Og=d;this.Pg=c;this.Qg=f;this.Zf=b*f-e*c;this.$f=e*d-a*f;this.ag=a*c-b*d;a=this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf;0<a&&(a=1/Math.sqrt(a));this.Wf*=a;this.Xf*=a;this.Yf*=a;a=this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg;0<a&&(a=1/Math.sqrt(a));this.Og*=a;this.Pg*=a;this.Qg*=a;a=this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag;0<a&&(a=1/Math.sqrt(a));this.Zf*=a;this.$f*=a;this.ag*=a;this.Bm=!(this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf);this.Cm=!(this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg);this.Dm=!(this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag);var k,m,n,q,p,r,v,t,w;k=this.ub;a=this.xe;b=this.th;m=this.vb;e=this.ye;d=this.uh;n=this.wb;c=this.ze;f=this.vh;q=this.Xb;p=this.ne;h=this.Rg;r=this.Yb;v=this.oe;l=this.Sg;t=this.Zb;w=this.pe;g=this.Tg;var A,u,D;A=k*h+m*l+n*g;u=a*p+e*v+c*w;D=b*p+d*v+f*w;-1>=A?(e=Math.atan2(D,u),a=.5*e,b=-1.570796326794895,e=.5*-e):1<=A?(e=Math.atan2(D,u),a=.5*e,b=1.570796326794895,e*=.5):(A=Math.asin(A),k=Math.atan2(-(k*p+m*v+n*w),k*q+m*r+n*t),a=Math.atan2(-(a*h+e*l+c*g),b*h+d*l+f*g),b=A,e=k);this.yi=a;this.zl=b;this.zi=e;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.ub;a.y=this.vb;a.z=this.wb;return a},xg:function(){var a=new t;a.x=this.Rg;a.y=this.Sg;a.z=this.Tg;return a},wg:function(a){a.x=this.ub;a.y=this.vb;a.z=this.wb},yg:function(a){a.x=this.Rg;a.y=this.Sg;a.z=this.Tg},zg:function(){var a=new t;a.x=this.ra;a.y=this.sa;a.z=this.ta;return a},Bg:function(){var a=new t;a.x=this.Ic;a.y=this.Jc;a.z=this.Kc;return a},Ag:function(a){a.x=this.ra;a.y=this.sa;a.z=this.ta},Cg:function(a){a.x=this.Ic;a.y=this.Jc;a.z=this.Kc},nn:function(){return this.Fk},on:function(){return this.Gk},jn:function(){return this.xk},kn:function(){return this.yk},dn:function(){return this.yi},en:function(){return this.zi},qa:vb});qe.R=!0;qe.Jb=Fc;qe.prototype=sb(Fc.prototype,{za:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;d=a.a.o*f+a.a.i*h+a.a.l*l;e=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;f=this.localAxis1;f.x=d;f.y=e;f.z=a;d=c.x;e=c.y;f=c.z;c=b.a.o*d+b.a.i*e+b.a.l*f;a=b.a.f*d+b.a.m*e+b.a.g*f;b=b.a.h*d+b.a.j*e+b.a.s*f;d=this.localAxis2;d.x=c;d.y=a;d.z=b;return this},qa:qe});pe.R=!0;of.R=!0;of.prototype={qa:of};Pe.R=!0;Pe.prototype={qa:Pe};ak.R=!0;ak.prototype={za:function(a){this.Nc=a.Nc;for(var b=0,e=this.Nc;b<e;){var d=b++;this.gh[d]=a.gh[d];this.kh[d]=a.kh[d]}this.ie=a.ie;b=0;for(e=this.ie;b<e;)d=b++,this.Dg[d]=a.Dg[d]},Tk:function(a,b,e,d,c,f,h){for(var l=0,g=this.ie;l<g;){var k=l++,k=this.Dg[k],m=a.rows[k];this.Rk[k]=m.Fa*f-e[k]-m.Ma*d[k]}l=b.Oi;g=0;for(k=this.Nc;g<k;){var n=g++,m=this.gh[n],n=this.kh[n],q=a.rows[m],n=(0>n?q.Ia:0<n?q.Ha:0)-d[m];if(c[m]=n)for(var q=0,p=this.ie;q<p;){var r=q++,v=r=this.Dg[r],t=this.Rk;t[v]-=l[m][r]*n}}g=this.Dg;k=this.ie;for(n=m=0;n<k;)q=n++,m|=1<<g[q];b.zj[m]||(b.Zm(m,g,k),b.zj[m]=!0);g=b.ik[m];b=!0;k=0;for(m=this.ie;k<m;){for(var n=k++,q=this.Dg[n],p=a.rows[q],v=r=d[q],t=0,w=this.ie;t<w;)var A=t++,v=v+this.Rk[this.Dg[A]]*g[n][A];if(v<p.Ia-F.directMlcpSolverEps||v>p.Ha+F.directMlcpSolverEps){b=!1;break}c[q]=v-r}if(h)return!0;if(!b)return!1;h=0;for(g=this.Nc;h<g;){n=h++;k=this.gh[n];m=a.rows[k];n=this.kh[n];q=d[k]+c[k];p=e[k];r=0;for(v=a.Ka;r<v;)t=r++,p+=l[k][t]*c[t];k=m.Fa*f-p-m.Ma*q;if(0>n&&k>F.directMlcpSolverEps||0<n&&k<-F.directMlcpSolverEps){b=!1;break}}return b},qa:ak};sg.R=!0;sg.prototype={qa:sg};Bk.R=!0;Bk.prototype={Oh:function(a,b){if(b==a.Ka)null==this.Nh[this.Ze]&&(this.Nh[this.Ze]=new ak(this.Cn)),this.Nh[this.Ze++].za(this.Te);else{var e=a.rows[b],d=e.Ia>-1/0,c=e.Ha<1/0;0==e.Ia&&0==e.Ha?(c=this.Te,c.gh[c.Nc]=b,c.kh[c.Nc]=0,c.Nc++,this.Oh(a,b+1),this.Te.Nc--):(e=this.Te,e.Dg[e.ie]=b,e.ie++,this.Oh(a,b+1),this.Te.ie--,d&&(d=this.Te,d.gh[d.Nc]=b,d.kh[d.Nc]=-1,d.Nc++,this.Oh(a,b+1),this.Te.Nc--),c&&(c=this.Te,c.gh[c.Nc]=b,c.kh[c.Nc]=1,c.Nc++,this.Oh(a,b+1),this.Te.Nc--))}},qa:Bk};Rd.R=!0;Rd.prototype={qa:Rd};Ec.R=!0;Ec.Jb=Kb;Ec.prototype=sb(Kb.prototype,{jh:function(a){this.P.ed();this.P.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;this.$h.Uk(this.info,this.Wb);a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.ie=0;a.Oh(this.info,0);a=this.ul;for(var b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b},sh:function(a){var b=this.P.Ec==ec.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ua;e.ua=0;e.Wc=0;e.tb=0}else{a=0;for(e=this.info.Ka;a<e;){var d=a++,c=this.info.rows[d],f=c.ua,h=f.ua*b;h<c.Ia?h=c.Ia:h>c.Ha&&(h=c.Ha);f.ua=h;0<c.bb?(h=f.Wc*b,c=c.bb,h<-c?h=-c:h>c&&(h=c),f.Wc=h):f.Wc=0;this.sf[d]=f.ua+f.Wc}var b=this.sf,e=a=!1,l,g,k,m,n,q,p,r,d=this.C.eb,f=this.C.fb,c=this.C.gb,h=this.D.eb;l=this.D.fb;g=this.D.gb;k=this.C.mb;m=this.C.nb;n=this.C.ob;q=this.D.mb;p=this.D.nb;r=this.D.ob;for(var v=0,t=this.info.Ka;v<t;){var w=v++,A=this.info.rows[w].Aa,u=this.Wb[w],w=b[w];A.wc&1&&(d+=u.md*w,f+=u.nd*w,c+=u.od*w,h+=u.pd*-w,l+=u.qd*-w,g+=u.rd*-w,a=!0);A.wc&2&&(k+=u.fd*w,m+=u.gd*w,n+=u.hd*w,q+=u.jd*-w,p+=u.kd*-w,r+=u.ld*-w,e=!0)}a&&(this.C.eb=d,this.C.fb=f,this.C.gb=c,this.D.eb=h,this.D.fb=l,this.D.gb=g);e&&(this.C.mb=k,this.C.nb=m,this.C.ob=n,this.D.mb=q,this.D.nb=p,this.D.ob=r)}},nh:function(){var a=this.info.Ka,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.mb;g=this.C.nb;k=this.C.ob;m=this.D.mb;n=this.D.nb;q=this.D.ob;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.ua,v=v.Aa,w=0,w=w+(b*v.va+e*v.wa+d*v.xa),w=w-(c*v.Ba+f*v.Ca+h*v.Da),w=w+(l*v.S+g*v.T+k*v.U),w=w-(m*v.W+n*v.X+q*v.Y);this.Hg[r]=w;this.Th[r]=t.ua;this.lj[r]=0}b=this.$h.Oi;for(e=0;e<a;)if(d=e++,h=this.info.rows[d],c=h.ua,l=this.Wb[d],0<h.bb)for(f=c.Wc,h=f+l.tf*(-h.motorSpeed-this.Hg[d]),l=c.Wc,h<-l?h=-l:h>l&&(h=l),c.Wc=h,c=h-f,this.lj[d]=c,f=0,h=a;f<h;)g=l=f++,k=this.Hg,k[g]+=c*b[d][l];e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ul.oc[b],this.Ee.Nh[b].Tk(this.info,this.$h,this.Hg,this.Th,this.sf,1,!1)){for(e=0;e<a;)c=e++,d=this.sf[c],this.info.rows[c].ua.ua+=d,f=this.lj,f[c]+=d;a=this.lj;d=e=!1;c=this.C.eb;f=this.C.fb;h=this.C.gb;l=this.D.eb;g=this.D.fb;k=this.D.gb;m=this.C.mb;n=this.C.nb;q=this.C.ob;p=this.D.mb;r=this.D.nb;t=this.D.ob;v=0;for(w=this.info.Ka;v<w;){var A=v++,u=this.info.rows[A].Aa,D=this.Wb[A],A=a[A];u.wc&1&&(c+=D.md*A,f+=D.nd*A,h+=D.od*A,l+=D.pd*-A,g+=D.qd*-A,k+=D.rd*-A,e=!0);u.wc&2&&(m+=D.fd*A,n+=D.gd*A,q+=D.hd*A,p+=D.jd*-A,r+=D.kd*-A,t+=D.ld*-A,d=!0)}e&&(this.C.eb=c,this.C.fb=f,this.C.gb=h,this.D.eb=l,this.D.fb=g,this.D.gb=k);d&&(this.C.mb=m,this.C.nb=n,this.C.ob=q,this.D.mb=p,this.D.nb=r,this.D.ob=t);a=this.ul;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ua,m=m.Aa;m.wc&1?(b+=m.va*k.ua,e+=m.wa*k.ua,d+=m.xa*k.ua):m.wc&2&&(c+=m.S*k.ua,f+=m.T*k.ua,h+=m.U*k.ua)}this.P.Ai=b*a.invDt;this.P.Bi=e*a.invDt;this.P.Ci=d*a.invDt;this.P.Di=c*a.invDt;this.P.Ei=f*a.invDt;this.P.Fi=h*a.invDt},Gg:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.$h.Uk(this.info,this.Wb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.ie=0;a.Oh(this.info,0);for(var a=this.ui,b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b;a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ua.tb=0},mh:function(){var a=this.info.Ka,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.Sc;e=this.C.Tc;d=this.C.Uc;c=this.D.Sc;f=this.D.Tc;h=this.D.Uc;l=this.C.Oc;g=this.C.Pc;k=this.C.Qc;m=this.D.Oc;n=this.D.Pc;q=this.D.Qc;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.ua,v=v.Aa,w=0,w=w+(b*v.va+e*v.wa+d*v.xa),w=w-(c*v.Ba+f*v.Ca+h*v.Da),w=w+(l*v.S+g*v.T+k*v.U),w=w-(m*v.W+n*v.X+q*v.Y);this.Hg[r]=w;this.Th[r]=t.tb}e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ui.oc[b],this.Ee.Nh[b].Tk(this.info,this.$h,this.Hg,this.Th,this.sf,F.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)d=e++,this.info.rows[d].ua.tb+=this.sf[d];a=this.sf;d=e=!1;c=this.C.Sc;f=this.C.Tc;h=this.C.Uc;l=this.D.Sc;g=this.D.Tc;k=this.D.Uc;m=this.C.Oc;n=this.C.Pc;q=this.C.Qc;p=this.D.Oc;r=this.D.Pc;t=this.D.Qc;v=0;for(w=this.info.Ka;v<w;){var A=v++,u=this.info.rows[A].Aa,D=this.Wb[A],A=a[A];u.wc&1&&(c+=D.md*A,f+=D.nd*A,h+=D.od*A,l+=D.pd*-A,g+=D.qd*-A,k+=D.rd*-A,e=!0);u.wc&2&&(m+=D.fd*A,n+=D.gd*A,q+=D.hd*A,p+=D.jd*-A,r+=D.kd*-A,t+=D.ld*-A,d=!0)}e&&(this.C.Sc=c,this.C.Tc=f,this.C.Uc=h,this.D.Sc=l,this.D.Tc=g,this.D.Uc=k);d&&(this.C.Oc=m,this.C.Pc=n,this.C.Qc=q,this.D.Oc=p,this.D.Pc=r,this.D.Qc=t);a=this.ui;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},lh:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.$h.Uk(this.info,this.Wb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.ie=0;a.Oh(this.info,0);for(var e=this.ui,d=this.Ee.Ze,c=0,f=0,h=0,l=e.n;h<l;){var g=h++,k=e.oc[g];k<d?(e.af[c]=k,++c):(e.af[d+f]=k,++f)}var m=e.oc;e.oc=e.af;e.af=m;for(var n=this.info.Ka,q=0;q<n;){var p=q++,r=this.info.rows[p].ua;this.Hg[p]=0;this.Th[p]=r.tb}for(var v=!1,t=0,w=this.Ee.Ze;t<w;){var A=t++,u=this.ui.oc[A];if(this.Ee.Nh[u].Tk(this.info,this.$h,this.Hg,this.Th,this.sf,F.positionNgsBaumgarte,!1)){for(var D=0,C=n;D<C;){var z=D++;this.info.rows[z].ua.tb+=this.sf[z]}for(var E=this.sf,x=!1,L=!1,N,G,M,O,ha,ga,ra,pa,Ba,ka,Oa,U,R=U=Oa=ka=Ba=pa=ra=ga=ha=O=M=G=N=0,Ga=this.info.Ka;R<Ga;){var Ma=R++,Ra=this.info.rows[Ma].Aa,za=this.Wb[Ma],Pa=E[Ma];Ra.wc&1&&(N+=za.md*Pa,G+=za.nd*Pa,M+=za.od*Pa,O+=za.pd*-Pa,ha+=za.qd*-Pa,ga+=za.rd*-Pa,x=!0);Ra.wc&2&&(ra+=za.fd*Pa,pa+=za.gd*Pa,Ba+=za.hd*Pa,ka+=za.jd*-Pa,Oa+=za.kd*-Pa,U+=za.ld*-Pa,L=!0)}if(x){var Aa=this.C;Aa.a.v+=N;Aa.a.A+=G;Aa.a.B+=M;var zb=this.D;zb.a.v+=O;zb.a.A+=ha;zb.a.B+=ga}if(L){var J=this.C,Qa=Math.sqrt(ra*ra+pa*pa+Ba*Ba),ba=.5*Qa,Q,P;if(.5>ba){var wa=ba*ba;Q=.5*(1-.16666666666666666*wa+wa*wa*.008333333333333333);P=1-.5*wa+wa*wa*.041666666666666664}else Q=Math.sin(ba)/Qa,P=Math.cos(ba);var ta,W,oa;ta=ra*Q;W=pa*Q;oa=Ba*Q;var y,Ha,ca,Ca;y=ta;Ha=W;ca=oa;Ca=P;var xa,Da,Sa,la,Z=J.a.o,Ea=J.a.m,qa=J.a.s,va=Z+Ea+qa,I;0<va?(I=Math.sqrt(va+1),la=.5*I,I=.5/I,xa=(J.a.g-J.a.j)*I,Da=(J.a.h-J.a.l)*I,Sa=(J.a.i-J.a.f)*I):Z>Ea?Z>qa?(I=Math.sqrt(Z-Ea-qa+1),xa=.5*I,I=.5/I,Da=(J.a.f+J.a.i)*I,Sa=(J.a.h+J.a.l)*I,la=(J.a.g-J.a.j)*I):(I=Math.sqrt(qa-Z-Ea+1),Sa=.5*I,I=.5/I,xa=(J.a.h+J.a.l)*I,Da=(J.a.j+J.a.g)*I,la=(J.a.i-J.a.f)*I):Ea>qa?(I=Math.sqrt(Ea-qa-Z+1),Da=.5*I,I=.5/I,xa=(J.a.f+J.a.i)*I,Sa=(J.a.j+J.a.g)*I,la=(J.a.h-J.a.l)*I):(I=Math.sqrt(qa-Z-Ea+1),Sa=.5*I,I=.5/I,xa=(J.a.h+J.a.l)*I,Da=(J.a.j+J.a.g)*I,la=(J.a.i-J.a.f)*I);xa=Ca*xa+y*la+Ha*Sa-ca*Da;Da=Ca*Da-y*Sa+Ha*la+ca*xa;Sa=Ca*Sa+y*Da-Ha*xa+ca*la;la=Ca*la-y*xa-Ha*Da-ca*Sa;var Ka=xa*xa+Da*Da+Sa*Sa+la*la;1E-32<Ka&&(Ka=1/Math.sqrt(Ka));xa*=Ka;Da*=Ka;Sa*=Ka;la*=Ka;var Xa=xa,S=Da,Ya=Sa,T=la,K=2*Xa,ia=2*S,fb=2*Ya,da=Xa*K,Wa=S*ia,sa=Ya*fb,eb=Xa*ia,jb=S*fb,Za=Xa*fb,ma=T*K,na=T*ia,Ia=T*fb;J.a.o=1-Wa-sa;J.a.f=eb-Ia;J.a.h=Za+na;J.a.i=eb+Ia;J.a.m=1-da-sa;J.a.j=jb-ma;J.a.l=Za-na;J.a.g=jb+ma;J.a.s=1-da-Wa;var Fa,ob,fa,ea,ja,bb,ya,tb,Ua;Fa=J.a.o*J.Qa+J.a.f*J.Ta+J.a.h*J.Wa;ob=J.a.o*J.Ra+J.a.f*J.Ua+J.a.h*J.Xa;fa=J.a.o*J.Sa+J.a.f*J.Va+J.a.h*J.Ya;ea=J.a.i*J.Qa+J.a.m*J.Ta+J.a.j*J.Wa;ja=J.a.i*J.Ra+J.a.m*J.Ua+J.a.j*J.Xa;bb=J.a.i*J.Sa+J.a.m*J.Va+J.a.j*J.Ya;ya=J.a.l*J.Qa+J.a.g*J.Ta+J.a.s*J.Wa;tb=J.a.l*J.Ra+J.a.g*J.Ua+J.a.s*J.Xa;Ua=J.a.l*J.Sa+J.a.g*J.Va+J.a.s*J.Ya;J.Z=Fa;J.$=ob;J.aa=fa;J.ba=ea;J.ca=ja;J.da=bb;J.ea=ya;J.fa=tb;J.ga=Ua;var qb,rb,ub,Va,Db,ib,$a,ua,Gb;qb=J.Z*J.a.o+J.$*J.a.f+J.aa*J.a.h;rb=J.Z*J.a.i+J.$*J.a.m+J.aa*J.a.j;ub=J.Z*J.a.l+J.$*J.a.g+J.aa*J.a.s;Va=J.ba*J.a.o+J.ca*J.a.f+J.da*J.a.h;Db=J.ba*J.a.i+J.ca*J.a.m+J.da*J.a.j;ib=J.ba*J.a.l+J.ca*J.a.g+J.da*J.a.s;$a=J.ea*J.a.o+J.fa*J.a.f+J.ga*J.a.h;ua=J.ea*J.a.i+J.fa*J.a.m+J.ga*J.a.j;Gb=J.ea*J.a.l+J.fa*J.a.g+J.ga*J.a.s;J.Z=qb;J.$=rb;J.aa=ub;J.ba=Va;J.ca=Db;J.da=ib;J.ea=$a;J.fa=ua;J.ga=Gb;var H=this.D,pb=Math.sqrt(ka*ka+Oa*Oa+U*U),cb=.5*pb,mb,ab;if(.5>cb){var gb=cb*cb;mb=.5*(1-.16666666666666666*gb+gb*gb*.008333333333333333);ab=1-.5*gb+gb*gb*.041666666666666664}else mb=Math.sin(cb)/pb,ab=Math.cos(cb);var B,Bb,vb;B=ka*mb;Bb=Oa*mb;vb=U*mb;var sb,Eb,Na,nb;sb=B;Eb=Bb;Na=vb;nb=ab;var wb,xb,db,Y,La=H.a.o,kb=H.a.m,Ta=H.a.s,hb=La+kb+Ta,Ja;0<hb?(Ja=Math.sqrt(hb+1),Y=.5*Ja,Ja=.5/Ja,wb=(H.a.g-H.a.j)*Ja,xb=(H.a.h-H.a.l)*Ja,db=(H.a.i-H.a.f)*Ja):La>kb?La>Ta?(Ja=Math.sqrt(La-kb-Ta+1),wb=.5*Ja,Ja=.5/Ja,xb=(H.a.f+H.a.i)*Ja,db=(H.a.h+H.a.l)*Ja,Y=(H.a.g-H.a.j)*Ja):(Ja=Math.sqrt(Ta-La-kb+1),db=.5*Ja,Ja=.5/Ja,wb=(H.a.h+H.a.l)*Ja,xb=(H.a.j+H.a.g)*Ja,Y=(H.a.i-H.a.f)*Ja):kb>Ta?(Ja=Math.sqrt(kb-Ta-La+1),xb=.5*Ja,Ja=.5/Ja,wb=(H.a.f+H.a.i)*Ja,db=(H.a.j+H.a.g)*Ja,Y=(H.a.h-H.a.l)*Ja):(Ja=Math.sqrt(Ta-La-kb+1),db=.5*Ja,Ja=.5/Ja,wb=(H.a.h+H.a.l)*Ja,xb=(H.a.j+H.a.g)*Ja,Y=(H.a.i-H.a.f)*Ja);wb=nb*wb+sb*Y+Eb*db-Na*xb;xb=nb*xb-sb*db+Eb*Y+Na*wb;db=nb*db+sb*xb-Eb*wb+Na*Y;Y=nb*Y-sb*wb-Eb*xb-Na*db;var Ib=wb*wb+xb*xb+db*db+Y*Y;1E-32<Ib&&(Ib=1/Math.sqrt(Ib));wb*=Ib;xb*=Ib;db*=Ib;Y*=Ib;var Cb=wb,X=xb,Ab=db,Hb=Y,Kb=2*Cb,Fb=2*X,gc=2*Ab,Lb=Cb*Kb,Mb=X*Fb,Qb=Ab*gc,Nb=Cb*Fb,Rb=X*gc,jc=Cb*gc,Ob=Hb*Kb,kc=Hb*Fb,ac=Hb*gc;H.a.o=1-Mb-Qb;H.a.f=Nb-ac;H.a.h=jc+kc;H.a.i=Nb+ac;H.a.m=1-Lb-Qb;H.a.j=Rb-Ob;H.a.l=jc-kc;H.a.g=Rb+Ob;H.a.s=1-Lb-Mb;var Xb,Yb,Sb,hc,Tb,Pb,Zb,ic,Jb;Xb=H.a.o*H.Qa+H.a.f*H.Ta+H.a.h*H.Wa;Yb=H.a.o*H.Ra+H.a.f*H.Ua+H.a.h*H.Xa;Sb=H.a.o*H.Sa+H.a.f*H.Va+H.a.h*H.Ya;hc=H.a.i*H.Qa+H.a.m*H.Ta+H.a.j*H.Wa;Tb=H.a.i*H.Ra+H.a.m*H.Ua+H.a.j*H.Xa;Pb=H.a.i*H.Sa+H.a.m*H.Va+H.a.j*H.Ya;Zb=H.a.l*H.Qa+H.a.g*H.Ta+H.a.s*H.Wa;ic=H.a.l*H.Ra+H.a.g*H.Ua+H.a.s*H.Xa;Jb=H.a.l*H.Sa+H.a.g*H.Va+H.a.s*H.Ya;H.Z=Xb;H.$=Yb;H.aa=Sb;H.ba=hc;H.ca=Tb;H.da=Pb;H.ea=Zb;H.fa=ic;H.ga=Jb;var $b,lb,Ub,cc,dc,sc,nc,ec,fc;$b=H.Z*H.a.o+H.$*H.a.f+H.aa*H.a.h;lb=H.Z*H.a.i+H.$*H.a.m+H.aa*H.a.j;Ub=H.Z*H.a.l+H.$*H.a.g+H.aa*H.a.s;cc=H.ba*H.a.o+H.ca*H.a.f+H.da*H.a.h;dc=H.ba*H.a.i+H.ca*H.a.m+H.da*H.a.j;sc=H.ba*H.a.l+H.ca*H.a.g+H.da*H.a.s;nc=H.ea*H.a.o+H.fa*H.a.f+H.ga*H.a.h;ec=H.ea*H.a.i+H.fa*H.a.m+H.ga*H.a.j;fc=H.ea*H.a.l+H.fa*H.a.g+H.ga*H.a.s;H.Z=$b;H.$=lb;H.aa=Ub;H.ba=cc;H.ca=dc;H.da=sc;H.ea=nc;H.fa=ec;H.ga=fc}for(var bc=this.ui,tc=0;bc.oc[tc]!=u;)++tc;for(;0<tc;){var lc=bc.oc[tc];bc.oc[tc]=bc.oc[tc-1];bc.oc[tc-1]=lc;--tc}v=!0;break}}v||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},$e:function(){this.P.ed();this.P.Cl()},qa:Ec});Tf.R=!0;Tf.prototype={Zm:function(a,b,e){for(var d=0;d<e;)for(var c=d++,f=b[c],h=0,l=e;h<l;){var g=h++;this.ck[c][g]=this.Za[f][b[g]]}d=this.ck;a=this.ik[a];var k;switch(e){case 4:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[5];k=a[5];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=c[5]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=c[5]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=c[5]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=c[5]*g[4];g=d[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=c[5]*g[4];c=d[5];b=a[5];e=1/c[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[5];g=d[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=d[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=d[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=d[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;c=d[h];b=a[h];l=1/c[h];b[h]=l;g=0;for(k=h;g<k;){var m=g++;b[m]*=l}g=h+1;for(k=e;g<k;)m=g++,c[m]*=l;for(var m=0,n=h;m<n;){var q=m++,g=d[q];k=a[q];for(var p=0,q=q+1;p<q;){var r=p++;k[r]-=b[r]*g[h]}k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}m=h+1;for(n=e;m<n;){k=m++;g=d[k];k=a[k];p=0;for(q=h;p<q;)r=p++,k[r]-=b[r]*g[h];k[h]=-l*g[h];k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}}for(d=1;d<e;)for(c=d++,b=a[c],f=0,h=c;f<h;)l=f++,a[l][c]=b[l]}},Uk:function(a,b){var e=this.Za,d=this.Oi,c=a.Ka,f=a.Ce,h=a.De,l=f.Za,g=h.Za,k,m,n,q,p,r,v,t,w,A,u,D,C,z,E,x;k=f.Z;m=f.$;n=f.aa;q=f.ba;p=f.ca;r=f.da;v=f.ea;t=f.fa;f=f.ga;w=h.Z;A=h.$;u=h.aa;D=h.ba;C=h.ca;z=h.da;E=h.ea;x=h.fa;for(var h=h.ga,F=0;F<c;){var N=F++,G=a.rows[N].Aa,N=b[N];G.Am();G.wc&1?(N.md=G.va*l,N.nd=G.wa*l,N.od=G.xa*l,N.pd=G.Ba*g,N.qd=G.Ca*g,N.rd=G.Da*g):(N.md=0,N.nd=0,N.od=0,N.pd=0,N.qd=0,N.rd=0);if(G.wc&2){var L,M,O;L=k*G.S+m*G.T+n*G.U;M=q*G.S+p*G.T+r*G.U;O=v*G.S+t*G.T+f*G.U;N.fd=L;N.gd=M;N.hd=O;L=w*G.W+A*G.X+u*G.Y;M=D*G.W+C*G.X+z*G.Y;G=E*G.W+x*G.X+h*G.Y;N.jd=L;N.kd=M;N.ld=G}else N.fd=0,N.gd=0,N.hd=0,N.jd=0,N.kd=0,N.ld=0}for(l=0;l<c;)for(g=l++,k=a.rows[g].Aa,m=g,n=c;m<n;)q=m++,p=b[q],r=k.va*p.md+k.wa*p.nd+k.xa*p.od+(k.S*p.fd+k.T*p.gd+k.U*p.hd)+(k.Ba*p.pd+k.Ca*p.qd+k.Da*p.rd)+(k.W*p.jd+k.X*p.kd+k.Y*p.ld),g==q?(e[g][q]=r+a.rows[g].Ma,d[g][q]=r,p.mass=r+a.rows[g].Ma,p.tf=r,0!=p.mass&&(p.mass=1/p.mass),p.tf&&(p.tf=1/p.tf)):(e[g][q]=r,e[q][g]=r,d[g][q]=r,d[q][g]=r);a=0;for(b=this.Ij;a<b;)e=a++,this.zj[e]=!1},qa:Tf};Ub.R=!0;Ub.Jb=Kb;Ub.prototype=sb(Kb.prototype,{jh:function(a){this.ti.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.Za;var b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.info.rows[z],z=this.Wb[z],x=E.Eg;z.Uh=x.va*a;z.Vh=x.wa*a;z.Wh=x.xa*a;z.Xh=x.Ba*b;z.Yh=x.Ca*b;z.Zh=x.Da*b;var F,N,G;F=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;z.Nf=F;z.Of=N;z.Pf=G;F=n*x.W+q*x.X+p*x.Y;N=r*x.W+v*x.X+t*x.Y;G=w*x.W+A*x.X+u*x.Y;z.Qf=F;z.Rf=N;z.Sf=G;z.he=a+b+(z.Nf*x.S+z.Of*x.T+z.Pf*x.U)+(z.Qf*x.W+z.Rf*x.X+z.Sf*x.Y);0!=z.he&&(z.he=1/z.he);x=E.vj;E=E.uj;z.gl=x.va*a;z.hl=x.wa*a;z.il=x.xa*a;z.jl=x.Ba*b;z.kl=x.Ca*b;z.ll=x.Da*b;z.al=E.va*a;z.bl=E.wa*a;z.cl=E.xa*a;z.dl=E.Ba*b;z.el=E.Ca*b;z.fl=E.Da*b;F=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;z.oj=F;z.pj=N;z.qj=G;F=n*x.W+q*x.X+p*x.Y;N=r*x.W+v*x.X+t*x.Y;G=w*x.W+A*x.X+u*x.Y;z.rj=F;z.sj=N;z.tj=G;F=e*E.S+d*E.T+c*E.U;N=f*E.S+h*E.T+l*E.U;G=g*E.S+k*E.T+m*E.U;z.Tj=F;z.Uj=N;z.Vj=G;F=n*E.W+q*E.X+p*E.Y;N=r*E.W+v*E.X+t*E.Y;G=w*E.W+A*E.X+u*E.Y;z.Wj=F;z.Xj=N;z.Yj=G;x=a+b+(z.oj*x.S+z.pj*x.T+z.qj*x.U)+(z.rj*x.W+z.sj*x.X+z.tj*x.Y);N=F=z.oj*E.S+z.pj*E.T+z.qj*E.U+(z.rj*E.W+z.sj*E.X+z.tj*E.Y);E=a+b+(z.Tj*E.S+z.Uj*E.T+z.Vj*E.U)+(z.Wj*E.W+z.Xj*E.X+z.Yj*E.Y);(G=x*E-F*N)&&(G=1/G);z.om=E*G;z.pm=-F*G;z.qm=-N*G;z.rm=x*G}},sh:function(a){var b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.mb;g=this.C.nb;k=this.C.ob;m=this.D.mb;n=this.D.nb;q=this.D.ob;for(var p=0,r=this.info.Ka;p<r;){var v=p++,t=this.info.rows[v],w=t.ua,v=this.Wb[v],A=t.vj,u=t.uj,t=w.Xc,A=w.Ue*A.va+w.Ve*A.wa+w.We*A.xa,u=w.Ue*u.va+w.Ve*u.wa+w.We*u.xa;w.yc=A;w.xc=u;w.Xc*=a.dtRatio;w.yc*=a.dtRatio;w.xc*=a.dtRatio;b+=v.Uh*t;e+=v.Vh*t;d+=v.Wh*t;b+=v.gl*A;e+=v.hl*A;d+=v.il*A;b+=v.al*u;e+=v.bl*u;d+=v.cl*u;c+=v.Xh*-t;f+=v.Yh*-t;h+=v.Zh*-t;c+=v.jl*-A;f+=v.kl*-A;h+=v.ll*-A;c+=v.dl*-u;f+=v.el*-u;h+=v.fl*-u;l+=v.Nf*t;g+=v.Of*t;k+=v.Pf*t;l+=v.oj*A;g+=v.pj*A;k+=v.qj*A;l+=v.Tj*u;g+=v.Uj*u;k+=v.Vj*u;m+=v.Qf*-t;n+=v.Rf*-t;q+=v.Sf*-t;m+=v.rj*-A;n+=v.sj*-A;q+=v.tj*-A;m+=v.Wj*-u;n+=v.Xj*-u;q+=v.Yj*-u}this.C.eb=b;this.C.fb=e;this.C.gb=d;this.D.eb=c;this.D.fb=f;this.D.gb=h;this.C.mb=l;this.C.nb=g;this.C.ob=k;this.D.mb=m;this.D.nb=n;this.D.ob=q},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.eb;b=this.C.fb;e=this.C.gb;d=this.D.eb;c=this.D.fb;f=this.D.gb;h=this.C.mb;l=this.C.nb;g=this.C.ob;k=this.D.mb;m=this.D.nb;n=this.D.ob;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Wb[r],t=v.ua,w=0,A=v.vj,w=w+(a*A.va+b*A.wa+e*A.xa),w=w-(d*A.Ba+c*A.Ca+f*A.Da),w=w+(h*A.S+l*A.T+g*A.U),w=w-(k*A.W+m*A.X+n*A.Y),u=0,A=v.uj,u=u+(a*A.va+b*A.wa+e*A.xa),u=u-(d*A.Ba+c*A.Ca+f*A.Da),u=u+(h*A.S+l*A.T+g*A.U),u=u-(k*A.W+m*A.X+n*A.Y),A=-(w*r.om+u*r.pm),D=-(w*r.qm+u*r.rm),w=t.yc,u=t.xc;t.yc+=A;t.xc+=D;(v=v.friction*t.Xc)?(A=t.yc*t.yc+t.xc*t.xc,A>v*v&&(v/=Math.sqrt(A),t.yc*=v,t.xc*=v)):(t.yc=0,t.xc=0);A=t.yc-w;D=t.xc-u;a+=r.gl*A;b+=r.hl*A;e+=r.il*A;a+=r.al*D;b+=r.bl*D;e+=r.cl*D;d+=r.jl*-A;c+=r.kl*-A;f+=r.ll*-A;d+=r.dl*-D;c+=r.el*-D;f+=r.fl*-D;h+=r.oj*A;l+=r.pj*A;g+=r.qj*A;h+=r.Tj*D;l+=r.Uj*D;g+=r.Vj*D;k+=r.rj*-A;m+=r.sj*-A;n+=r.tj*-A;k+=r.Wj*-D;m+=r.Xj*-D;n+=r.Yj*-D}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.Wb[r],t=v.ua,w=0,u=v.Eg,w+=a*u.va+b*u.wa+e*u.xa,w-=d*u.Ba+c*u.Ca+f*u.Da,w+=h*u.S+l*u.T+g*u.U,w-=k*u.W+m*u.X+n*u.Y,v=(v.Fa-w)*r.he,w=t.Xc,t.Xc+=v,0>t.Xc&&(t.Xc=0),v=t.Xc-w,a+=r.Uh*v,b+=r.Vh*v,e+=r.Wh*v,d+=r.Xh*-v,c+=r.Yh*-v,f+=r.Zh*-v,h+=r.Nf*v,l+=r.Of*v,g+=r.Pf*v,k+=r.Qf*-v,m+=r.Rf*-v,n+=r.Sf*-v;this.C.eb=a;this.C.fb=b;this.C.gb=e;this.D.eb=d;this.D.fb=c;this.D.gb=f;this.C.mb=h;this.C.nb=l;this.C.ob=g;this.D.mb=k;this.D.nb=m;this.D.ob=n},Gg:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.Wb[z],z=this.info.rows[z].Eg;E.Uh=z.va*a;E.Vh=z.wa*a;E.Wh=z.xa*a;E.Xh=z.Ba*b;E.Yh=z.Ca*b;E.Zh=z.Da*b;var x,F,N;x=e*z.S+d*z.T+c*z.U;F=f*z.S+h*z.T+l*z.U;N=g*z.S+k*z.T+m*z.U;E.Nf=x;E.Of=F;E.Pf=N;x=n*z.W+q*z.X+p*z.Y;F=r*z.W+v*z.X+t*z.Y;N=w*z.W+A*z.X+u*z.Y;E.Qf=x;E.Rf=F;E.Sf=N;E.he=a+b+(E.Nf*z.S+E.Of*z.T+E.Pf*z.U)+(E.Qf*z.W+E.Rf*z.X+E.Sf*z.Y);0!=E.he&&(E.he=1/E.he)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ua.tb=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Sc;b=this.C.Tc;e=this.C.Uc;d=this.D.Sc;c=this.D.Tc;f=this.D.Uc;h=this.C.Oc;l=this.C.Pc;g=this.C.Qc;k=this.D.Oc;m=this.D.Pc;n=this.D.Qc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Wb[r],t=v.ua,w=v.Eg,A=0,A=A+(a*w.va+b*w.wa+e*w.xa),A=A-(d*w.Ba+c*w.Ca+f*w.Da),A=A+(h*w.S+l*w.T+g*w.U),A=A-(k*w.W+m*w.X+n*w.Y),v=(v.Fa-A)*r.he*F.positionSplitImpulseBaumgarte,w=t.tb;t.tb+=v;0>t.tb&&(t.tb=0);v=t.tb-w;a+=r.Uh*v;b+=r.Vh*v;e+=r.Wh*v;d+=r.Xh*-v;c+=r.Yh*-v;f+=r.Zh*-v;h+=r.Nf*v;l+=r.Of*v;g+=r.Pf*v;k+=r.Qf*-v;m+=r.Rf*-v;n+=r.Sf*-v}this.C.Sc=a;this.C.Tc=b;this.C.Uc=e;this.D.Sc=d;this.D.Tc=c;this.D.Uc=f;this.C.Oc=h;this.C.Pc=l;this.C.Qc=g;this.D.Oc=k;this.D.Pc=m;this.D.Qc=n},lh:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.Wb[z],x=this.info.rows[z].Eg;E.Uh=x.va*a;E.Vh=x.wa*a;E.Wh=x.xa*a;E.Xh=x.Ba*b;E.Yh=x.Ca*b;E.Zh=x.Da*b;var L,N,G;L=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;E.Nf=L;E.Of=N;E.Pf=G;var M,O,ha;M=n*x.W+q*x.X+p*x.Y;O=r*x.W+v*x.X+t*x.Y;ha=w*x.W+A*x.X+u*x.Y;E.Qf=M;E.Rf=O;E.Sf=ha;E.he=a+b+(E.Nf*x.S+E.Of*x.T+E.Pf*x.U)+(E.Qf*x.W+E.Rf*x.X+E.Sf*x.Y);0!=E.he&&(E.he=1/E.he)}for(var ga,ra,pa,Ba,ka,Oa,U,R,za,Ma,Ra,Ga,Pa=Ga=Ra=Ma=za=R=U=Oa=ka=Ba=pa=ra=ga=0,Aa=this.info.Ka;Pa<Aa;){var Wa=Pa++,J=this.info.rows[Wa],Qa=this.Wb[Wa],ba=J.ua,Q=J.Eg,P=0,P=P+(ga*Q.va+ra*Q.wa+pa*Q.xa),P=P-(Ba*Q.Ba+ka*Q.Ca+Oa*Q.Da),P=P+(U*Q.S+R*Q.T+za*Q.U),P=P-(Ma*Q.W+Ra*Q.X+Ga*Q.Y),wa=(J.Fa-P)*Qa.he*F.positionNgsBaumgarte,ta=ba.tb;ba.tb+=wa;0>ba.tb&&(ba.tb=0);wa=ba.tb-ta;ga+=Qa.Uh*wa;ra+=Qa.Vh*wa;pa+=Qa.Wh*wa;Ba+=Qa.Xh*-wa;ka+=Qa.Yh*-wa;Oa+=Qa.Zh*-wa;U+=Qa.Nf*wa;R+=Qa.Of*wa;za+=Qa.Pf*wa;Ma+=Qa.Qf*-wa;Ra+=Qa.Rf*-wa;Ga+=Qa.Sf*-wa}var W=this.C;W.a.v+=ga;W.a.A+=ra;W.a.B+=pa;var oa=this.D;oa.a.v+=Ba;oa.a.A+=ka;oa.a.B+=Oa;var y=this.C,Ha=Math.sqrt(U*U+R*R+za*za),ca=.5*Ha,Ca,xa;if(.5>ca){var Da=ca*ca;Ca=.5*(1-.16666666666666666*Da+Da*Da*.008333333333333333);xa=1-.5*Da+Da*Da*.041666666666666664}else Ca=Math.sin(ca)/Ha,xa=Math.cos(ca);var Sa,la;Sa=U*Ca;la=R*Ca;var Z,Ea;Z=za*Ca;Ea=xa;var qa,va,I,Ka,Xa=y.a.o,S=y.a.m,Ya=y.a.s,T=Xa+S+Ya,K;0<T?(K=Math.sqrt(T+1),Ka=.5*K,K=.5/K,qa=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,I=(y.a.i-y.a.f)*K):Xa>S?Xa>Ya?(K=Math.sqrt(Xa-S-Ya+1),qa=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,I=(y.a.h+y.a.l)*K,Ka=(y.a.g-y.a.j)*K):(K=Math.sqrt(Ya-Xa-S+1),I=.5*K,K=.5/K,qa=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K):S>Ya?(K=Math.sqrt(S-Ya-Xa+1),va=.5*K,K=.5/K,qa=(y.a.f+y.a.i)*K,I=(y.a.j+y.a.g)*K,Ka=(y.a.h-y.a.l)*K):(K=Math.sqrt(Ya-Xa-S+1),I=.5*K,K=.5/K,qa=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K);qa=Ea*qa+Sa*Ka+la*I-Z*va;va=Ea*va-Sa*I+la*Ka+Z*qa;I=Ea*I+Sa*va-la*qa+Z*Ka;Ka=Ea*Ka-Sa*qa-la*va-Z*I;var ia=qa*qa+va*va+I*I+Ka*Ka;1E-32<ia&&(ia=1/Math.sqrt(ia));qa*=ia;va*=ia;I*=ia;Ka*=ia;var fb=qa,da=va,ib=I,sa=Ka,eb=2*fb,jb=2*da,Za=2*ib,ma=fb*eb,na=da*jb,Ia=ib*Za,Fa=fb*jb,ob=da*Za,fa=fb*Za,ea=sa*eb,ja=sa*jb,bb=sa*Za;y.a.o=1-na-Ia;y.a.f=Fa-bb;y.a.h=fa+ja;y.a.i=Fa+bb;y.a.m=1-ma-Ia;y.a.j=ob-ea;y.a.l=fa-ja;y.a.g=ob+ea;y.a.s=1-ma-na;var ya,tb,Ua,qb,rb,ub,Va,mb,sb;ya=y.a.o*y.Qa+y.a.f*y.Ta+y.a.h*y.Wa;tb=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;Ua=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;qb=y.a.i*y.Qa+y.a.m*y.Ta+y.a.j*y.Wa;rb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;ub=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;Va=y.a.l*y.Qa+y.a.g*y.Ta+y.a.s*y.Wa;mb=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;sb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;y.Z=ya;y.$=tb;y.aa=Ua;y.ba=qb;y.ca=rb;y.da=ub;y.ea=Va;y.fa=mb;y.ga=sb;var $a,ua,vb,H,pb,cb,Cb,ab,gb;$a=y.Z*y.a.o+y.$*y.a.f+y.aa*y.a.h;ua=y.Z*y.a.i+y.$*y.a.m+y.aa*y.a.j;vb=y.Z*y.a.l+y.$*y.a.g+y.aa*y.a.s;H=y.ba*y.a.o+y.ca*y.a.f+y.da*y.a.h;pb=y.ba*y.a.i+y.ca*y.a.m+y.da*y.a.j;cb=y.ba*y.a.l+y.ca*y.a.g+y.da*y.a.s;Cb=y.ea*y.a.o+y.fa*y.a.f+y.ga*y.a.h;ab=y.ea*y.a.i+y.fa*y.a.m+y.ga*y.a.j;gb=y.ea*y.a.l+y.fa*y.a.g+y.ga*y.a.s;y.Z=$a;y.$=ua;y.aa=vb;y.ba=H;y.ca=pb;y.da=cb;y.ea=Cb;y.fa=ab;y.ga=gb;var B=this.D,Bb=Math.sqrt(Ma*Ma+Ra*Ra+Ga*Ga),Hb=.5*Bb,Fb,Eb;if(.5>Hb){var Na=Hb*Hb;Fb=.5*(1-.16666666666666666*Na+Na*Na*.008333333333333333);Eb=1-.5*Na+Na*Na*.041666666666666664}else Fb=Math.sin(Hb)/Bb,Eb=Math.cos(Hb);var nb,wb;nb=Ma*Fb;wb=Ra*Fb;var xb,db;xb=Ga*Fb;db=Eb;var Y,La,kb,Ta,hb=B.a.o,Ja=B.a.m,Ib=B.a.s,Kb=hb+Ja+Ib,X;0<Kb?(X=Math.sqrt(Kb+1),Ta=.5*X,X=.5/X,Y=(B.a.g-B.a.j)*X,La=(B.a.h-B.a.l)*X,kb=(B.a.i-B.a.f)*X):hb>Ja?hb>Ib?(X=Math.sqrt(hb-Ja-Ib+1),Y=.5*X,X=.5/X,La=(B.a.f+B.a.i)*X,kb=(B.a.h+B.a.l)*X,Ta=(B.a.g-B.a.j)*X):(X=Math.sqrt(Ib-hb-Ja+1),kb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,La=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X):Ja>Ib?(X=Math.sqrt(Ja-Ib-hb+1),La=.5*X,X=.5/X,Y=(B.a.f+B.a.i)*X,kb=(B.a.j+B.a.g)*X,Ta=(B.a.h-B.a.l)*X):(X=Math.sqrt(Ib-hb-Ja+1),kb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,La=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X);Y=db*Y+nb*Ta+wb*kb-xb*La;La=db*La-nb*kb+wb*Ta+xb*Y;kb=db*kb+nb*La-wb*Y+xb*Ta;Ta=db*Ta-nb*Y-wb*La-xb*kb;var Ab=Y*Y+La*La+kb*kb+Ta*Ta;1E-32<Ab&&(Ab=1/Math.sqrt(Ab));Y*=Ab;La*=Ab;kb*=Ab;Ta*=Ab;var Lb=Y,Mb=La,Qb=kb,gc=Ta,Nb=2*Lb,Rb=2*Mb,Ob=2*Qb,Ub=Lb*Nb,bc=Mb*Rb,jc=Qb*Ob,cc=Lb*Rb,kc=Mb*Ob,ac=Lb*Ob,Xb=gc*Nb,Yb=gc*Rb,Sb=gc*Ob;B.a.o=1-bc-jc;B.a.f=cc-Sb;B.a.h=ac+Yb;B.a.i=cc+Sb;B.a.m=1-Ub-jc;B.a.j=kc-Xb;B.a.l=ac-Yb;B.a.g=kc+Xb;B.a.s=1-Ub-bc;var hc,Tb,Pb,Zb,ic,Jb,$b,lb,dc;hc=B.a.o*B.Qa+B.a.f*B.Ta+B.a.h*B.Wa;Tb=B.a.o*B.Ra+B.a.f*B.Ua+B.a.h*B.Xa;Pb=B.a.o*B.Sa+B.a.f*B.Va+B.a.h*B.Ya;Zb=B.a.i*B.Qa+B.a.m*B.Ta+B.a.j*B.Wa;ic=B.a.i*B.Ra+B.a.m*B.Ua+B.a.j*B.Xa;Jb=B.a.i*B.Sa+B.a.m*B.Va+B.a.j*B.Ya;$b=B.a.l*B.Qa+B.a.g*B.Ta+B.a.s*B.Wa;lb=B.a.l*B.Ra+B.a.g*B.Ua+B.a.s*B.Xa;dc=B.a.l*B.Sa+B.a.g*B.Va+B.a.s*B.Ya;B.Z=hc;B.$=Tb;B.aa=Pb;B.ba=Zb;B.ca=ic;B.da=Jb;B.ea=$b;B.fa=lb;B.ga=dc;var ec,fc,sc,nc,lc,oc,pc,tc,qc;ec=B.Z*B.a.o+B.$*B.a.f+B.aa*B.a.h;fc=B.Z*B.a.i+B.$*B.a.m+B.aa*B.a.j;sc=B.Z*B.a.l+B.$*B.a.g+B.aa*B.a.s;nc=B.ba*B.a.o+B.ca*B.a.f+B.da*B.a.h;lc=B.ba*B.a.i+B.ca*B.a.m+B.da*B.a.j;oc=B.ba*B.a.l+B.ca*B.a.g+B.da*B.a.s;pc=B.ea*B.a.o+B.fa*B.a.f+B.ga*B.a.h;tc=B.ea*B.a.i+B.fa*B.a.m+B.ga*B.a.j;qc=B.ea*B.a.l+B.fa*B.a.g+B.ga*B.a.s;B.Z=ec;B.$=fc;B.aa=sc;B.ba=nc;B.ca=lc;B.da=oc;B.ea=pc;B.fa=tc;B.ga=qc},$e:function(){for(var a=0,b=this.info.Ka;a<b;){var e=a++,d=this.info.rows[e],e=d.ua,c=d.vj,d=d.uj,f,h,l;l=h=f=0;f+=c.va*e.yc;h+=c.wa*e.yc;l+=c.xa*e.yc;f+=d.va*e.xc;h+=d.wa*e.xc;l+=d.xa*e.xc;e.Ue=f;e.Ve=h;e.We=l}this.ti.Ik()},qa:Ub});dc.R=!0;dc.Jb=Kb;dc.prototype=sb(Kb.prototype,{jh:function(a){this.P.ed();this.P.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.Za;var b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.info.rows[z],z=this.Wb[z],x=E.Aa;x.Am();x.wc&1?(z.md=x.va*a,z.nd=x.wa*a,z.od=x.xa*a,z.pd=x.Ba*b,z.qd=x.Ca*b,z.rd=x.Da*b):(z.md=0,z.nd=0,z.od=0,z.pd=0,z.qd=0,z.rd=0);if(x.wc&2){var F,N,G;F=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;z.fd=F;z.gd=N;z.hd=G;F=n*x.W+q*x.X+p*x.Y;N=r*x.W+v*x.X+t*x.Y;G=w*x.W+A*x.X+u*x.Y;z.jd=F;z.kd=N;z.ld=G}else z.fd=0,z.gd=0,z.hd=0,z.jd=0,z.kd=0,z.ld=0;z.tf=z.md*x.va+z.nd*x.wa+z.od*x.xa+(z.pd*x.Ba+z.qd*x.Ca+z.rd*x.Da)+(z.fd*x.S+z.gd*x.T+z.hd*x.U)+(z.jd*x.W+z.kd*x.X+z.ld*x.Y);z.mass=z.tf+E.Ma;z.tf&&(z.tf=1/z.tf);0!=z.mass&&(z.mass=1/z.mass)}},sh:function(a){var b=this.P.Ec==ec.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ua;e.ua=0;e.Wc=0;e.tb=0}else{var d,c,f,h,l,g,k,m,n,q;a=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.mb;g=this.C.nb;k=this.C.ob;m=this.D.mb;n=this.D.nb;q=this.D.ob;for(var p=0,r=this.info.Ka;p<r;){var v=p++,t=this.Wb[v],v=this.info.rows[v].ua;v.ua*=b;v.Wc*=b;v=v.ua+v.Wc;a+=t.md*v;e+=t.nd*v;d+=t.od*v;c+=t.pd*-v;f+=t.qd*-v;h+=t.rd*-v;l+=t.fd*v;g+=t.gd*v;k+=t.hd*v;m+=t.jd*-v;n+=t.kd*-v;q+=t.ld*-v}this.C.eb=a;this.C.fb=e;this.C.gb=d;this.D.eb=c;this.D.fb=f;this.D.gb=h;this.C.mb=l;this.C.nb=g;this.C.ob=k;this.D.mb=m;this.D.nb=n;this.D.ob=q}},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.eb;b=this.C.fb;e=this.C.gb;d=this.D.eb;c=this.D.fb;f=this.D.gb;h=this.C.mb;l=this.C.nb;g=this.C.ob;k=this.D.mb;m=this.D.nb;n=this.D.ob;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Wb[r],t=v.ua,w=v.Aa;if(0!=v.bb){var A=0,A=A+(a*w.va+b*w.wa+e*w.xa),A=A-(d*w.Ba+c*w.Ca+f*w.Da),A=A+(h*w.S+l*w.T+g*w.U),A=A-(k*w.W+m*w.X+n*w.Y),A=(-v.motorSpeed-A)*r.tf,u=t.Wc;t.Wc+=A;t.Wc<-v.bb?t.Wc=-v.bb:t.Wc>v.bb&&(t.Wc=v.bb);A=t.Wc-u;w.wc&1&&(a+=r.md*A,b+=r.nd*A,e+=r.od*A,d+=r.pd*-A,c+=r.qd*-A,f+=r.rd*-A);w.wc&2&&(h+=r.fd*A,l+=r.gd*A,g+=r.hd*A,k+=r.jd*-A,m+=r.kd*-A,n+=r.ld*-A)}}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.Wb[r],t=v.ua,w=v.Aa,A=0,A+=a*w.va+b*w.wa+e*w.xa,A-=d*w.Ba+c*w.Ca+f*w.Da,A+=h*w.S+l*w.T+g*w.U,A-=k*w.W+m*w.X+n*w.Y,A=(v.Fa-A-t.ua*v.Ma)*r.mass,u=t.ua,t.ua+=A,t.ua<v.Ia?t.ua=v.Ia:t.ua>v.Ha&&(t.ua=v.Ha),A=t.ua-u,w.wc&1&&(a+=r.md*A,b+=r.nd*A,e+=r.od*A,d+=r.pd*-A,c+=r.qd*-A,f+=r.rd*-A),w.wc&2&&(h+=r.fd*A,l+=r.gd*A,g+=r.hd*A,k+=r.jd*-A,m+=r.kd*-A,n+=r.ld*-A);this.C.eb=a;this.C.fb=b;this.C.gb=e;this.D.eb=d;this.D.fb=c;this.D.gb=f;this.C.mb=h;this.C.nb=l;this.C.ob=g;this.D.mb=k;this.D.nb=m;this.D.ob=n},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ua,m=m.Aa;m.wc&1?(b+=m.va*k.ua,e+=m.wa*k.ua,d+=m.xa*k.ua):m.wc&2&&(c+=m.S*k.ua,f+=m.T*k.ua,h+=m.U*k.ua)}this.P.Ai=b*a.invDt;this.P.Bi=e*a.invDt;this.P.Ci=d*a.invDt;this.P.Di=c*a.invDt;this.P.Ei=f*a.invDt;this.P.Fi=h*a.invDt},Gg:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;v=this.D.ca;t=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,C=this.info.Ka;D<C;){var z=D++,E=this.Wb[z],z=this.info.rows[z].Aa;E.md=z.va*a;E.nd=z.wa*a;E.od=z.xa*a;E.pd=z.Ba*b;E.qd=z.Ca*b;E.rd=z.Da*b;var x,F,N;x=e*z.S+d*z.T+c*z.U;F=f*z.S+h*z.T+l*z.U;N=g*z.S+k*z.T+m*z.U;E.fd=x;E.gd=F;E.hd=N;x=n*z.W+q*z.X+p*z.Y;F=r*z.W+v*z.X+t*z.Y;N=w*z.W+A*z.X+u*z.Y;E.jd=x;E.kd=F;E.ld=N;E.mass=E.md*z.va+E.nd*z.wa+E.od*z.xa+(E.pd*z.Ba+E.qd*z.Ca+E.rd*z.Da)+(E.fd*z.S+E.gd*z.T+E.hd*z.U)+(E.jd*z.W+E.kd*z.X+E.ld*z.Y);E.mass&&(E.mass=1/E.mass)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ua.tb=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Sc;b=this.C.Tc;e=this.C.Uc;d=this.D.Sc;c=this.D.Tc;f=this.D.Uc;h=this.C.Oc;l=this.C.Pc;g=this.C.Qc;k=this.D.Oc;m=this.D.Pc;n=this.D.Qc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Wb[r],t=v.ua,w=v.Aa,A=0,A=A+(a*w.va+b*w.wa+e*w.xa),A=A-(d*w.Ba+c*w.Ca+f*w.Da),A=A+(h*w.S+l*w.T+g*w.U),A=A-(k*w.W+m*w.X+n*w.Y),w=(v.Fa*F.positionSplitImpulseBaumgarte-A)*r.mass,A=t.tb;t.tb+=w;t.tb<v.Ia?t.tb=v.Ia:t.tb>v.Ha&&(t.tb=v.Ha);w=t.tb-A;a+=r.md*w;b+=r.nd*w;e+=r.od*w;d+=r.pd*-w;c+=r.qd*-w;f+=r.rd*-w;h+=r.fd*w;l+=r.gd*w;g+=r.hd*w;k+=r.jd*-w;m+=r.kd*-w;n+=r.ld*-w}this.C.Sc=a;this.C.Tc=b;this.C.Uc=e;this.D.Sc=d;this.D.Tc=c;this.D.Uc=f;this.C.Oc=h;this.C.Pc=l;this.C.Qc=g;this.D.Oc=k;this.D.Pc=m;this.D.Qc=n},lh:function(){this.P.ed();this.P.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.Za,b=this.D.Za,e,d,c,f,h,l,g,k,m,n,q,p,r,t,C,w,A,u;e=this.C.Z;d=this.C.$;c=this.C.aa;f=this.C.ba;h=this.C.ca;l=this.C.da;g=this.C.ea;k=this.C.fa;m=this.C.ga;n=this.D.Z;q=this.D.$;p=this.D.aa;r=this.D.ba;t=this.D.ca;C=this.D.da;w=this.D.ea;A=this.D.fa;u=this.D.ga;for(var D=0,L=this.info.Ka;D<L;){var z=D++,E=this.Wb[z],x=this.info.rows[z].Aa;E.md=x.va*a;E.nd=x.wa*a;E.od=x.xa*a;E.pd=x.Ba*b;E.qd=x.Ca*b;E.rd=x.Da*b;var M,N,G;M=e*x.S+d*x.T+c*x.U;N=f*x.S+h*x.T+l*x.U;G=g*x.S+k*x.T+m*x.U;E.fd=M;E.gd=N;E.hd=G;var O,ha,ra;O=n*x.W+q*x.X+p*x.Y;ha=r*x.W+t*x.X+C*x.Y;ra=w*x.W+A*x.X+u*x.Y;E.jd=O;E.kd=ha;E.ld=ra;E.mass=E.md*x.va+E.nd*x.wa+E.od*x.xa+(E.pd*x.Ba+E.qd*x.Ca+E.rd*x.Da)+(E.fd*x.S+E.gd*x.T+E.hd*x.U)+(E.jd*x.W+E.kd*x.X+E.ld*x.Y);E.mass&&(E.mass=1/E.mass)}for(var ga,pa,za,Ba,ka,Oa,U,R,Ga,Ma,Ra,Wa,Pa=Wa=Ra=Ma=Ga=R=U=Oa=ka=Ba=za=pa=ga=0,Aa=this.info.Ka;Pa<Aa;){var ib=Pa++,J=this.info.rows[ib],Qa=this.Wb[ib],ba=J.ua,Q=J.Aa,P=0,P=P+(ga*Q.va+pa*Q.wa+za*Q.xa),P=P-(Ba*Q.Ba+ka*Q.Ca+Oa*Q.Da),P=P+(U*Q.S+R*Q.T+Ga*Q.U),P=P-(Ma*Q.W+Ra*Q.X+Wa*Q.Y),wa=(J.Fa*F.positionNgsBaumgarte-P)*Qa.mass,ta=ba.tb;ba.tb+=wa;ba.tb<J.Ia?ba.tb=J.Ia:ba.tb>J.Ha&&(ba.tb=J.Ha);wa=ba.tb-ta;ga+=Qa.md*wa;pa+=Qa.nd*wa;za+=Qa.od*wa;Ba+=Qa.pd*-wa;ka+=Qa.qd*-wa;Oa+=Qa.rd*-wa;U+=Qa.fd*wa;R+=Qa.gd*wa;Ga+=Qa.hd*wa;Ma+=Qa.jd*-wa;Ra+=Qa.kd*-wa;Wa+=Qa.ld*-wa}var W=this.C;W.a.v+=ga;W.a.A+=pa;W.a.B+=za;var oa=this.D;oa.a.v+=Ba;oa.a.A+=ka;oa.a.B+=Oa;var y=this.C,Ha=Math.sqrt(U*U+R*R+Ga*Ga),ca=.5*Ha,Ca,xa;if(.5>ca){var Da=ca*ca;Ca=.5*(1-.16666666666666666*Da+Da*Da*.008333333333333333);xa=1-.5*Da+Da*Da*.041666666666666664}else Ca=Math.sin(ca)/Ha,xa=Math.cos(ca);var Sa,la;Sa=U*Ca;la=R*Ca;var Z,Ea;Z=Ga*Ca;Ea=xa;var qa,va,I,Ka,Xa=y.a.o,S=y.a.m,Ya=y.a.s,T=Xa+S+Ya,K;0<T?(K=Math.sqrt(T+1),Ka=.5*K,K=.5/K,qa=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,I=(y.a.i-y.a.f)*K):Xa>S?Xa>Ya?(K=Math.sqrt(Xa-S-Ya+1),qa=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,I=(y.a.h+y.a.l)*K,Ka=(y.a.g-y.a.j)*K):(K=Math.sqrt(Ya-Xa-S+1),I=.5*K,K=.5/K,qa=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K):S>Ya?(K=Math.sqrt(S-Ya-Xa+1),va=.5*K,K=.5/K,qa=(y.a.f+y.a.i)*K,I=(y.a.j+y.a.g)*K,Ka=(y.a.h-y.a.l)*K):(K=Math.sqrt(Ya-Xa-S+1),I=.5*K,K=.5/K,qa=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K);qa=Ea*qa+Sa*Ka+la*I-Z*va;va=Ea*va-Sa*I+la*Ka+Z*qa;I=Ea*I+Sa*va-la*qa+Z*Ka;Ka=Ea*Ka-Sa*qa-la*va-Z*I;var ia=qa*qa+va*va+I*I+Ka*Ka;1E-32<ia&&(ia=1/Math.sqrt(ia));qa*=ia;va*=ia;I*=ia;Ka*=ia;var fb=qa,da=va,mb=I,sa=Ka,eb=2*fb,jb=2*da,Za=2*mb,ma=fb*eb,na=da*jb,Ia=mb*Za,Fa=fb*jb,ob=da*Za,fa=fb*Za,ea=sa*eb,ja=sa*jb,bb=sa*Za;y.a.o=1-na-Ia;y.a.f=Fa-bb;y.a.h=fa+ja;y.a.i=Fa+bb;y.a.m=1-ma-Ia;y.a.j=ob-ea;y.a.l=fa-ja;y.a.g=ob+ea;y.a.s=1-ma-na;var ya,tb,Ua,qb,rb,ub,Va,sb,vb;ya=y.a.o*y.Qa+y.a.f*y.Ta+y.a.h*y.Wa;tb=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;Ua=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;qb=y.a.i*y.Qa+y.a.m*y.Ta+y.a.j*y.Wa;rb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;ub=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;Va=y.a.l*y.Qa+y.a.g*y.Ta+y.a.s*y.Wa;sb=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;vb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;y.Z=ya;y.$=tb;y.aa=Ua;y.ba=qb;y.ca=rb;y.da=ub;y.ea=Va;y.fa=sb;y.ga=vb;var $a,ua,Gb,H,pb,cb,Hb,ab,gb;$a=y.Z*y.a.o+y.$*y.a.f+y.aa*y.a.h;ua=y.Z*y.a.i+y.$*y.a.m+y.aa*y.a.j;Gb=y.Z*y.a.l+y.$*y.a.g+y.aa*y.a.s;H=y.ba*y.a.o+y.ca*y.a.f+y.da*y.a.h;pb=y.ba*y.a.i+y.ca*y.a.m+y.da*y.a.j;cb=y.ba*y.a.l+y.ca*y.a.g+y.da*y.a.s;Hb=y.ea*y.a.o+y.fa*y.a.f+y.ga*y.a.h;ab=y.ea*y.a.i+y.fa*y.a.m+y.ga*y.a.j;gb=y.ea*y.a.l+y.fa*y.a.g+y.ga*y.a.s;y.Z=$a;y.$=ua;y.aa=Gb;y.ba=H;y.ca=pb;y.da=cb;y.ea=Hb;y.fa=ab;y.ga=gb;var B=this.D,Bb=Math.sqrt(Ma*Ma+Ra*Ra+Wa*Wa),Cb=.5*Bb,Fb,Eb;if(.5>Cb){var Na=Cb*Cb;Fb=.5*(1-.16666666666666666*Na+Na*Na*.008333333333333333);Eb=1-.5*Na+Na*Na*.041666666666666664}else Fb=Math.sin(Cb)/Bb,Eb=Math.cos(Cb);var nb,wb;nb=Ma*Fb;wb=Ra*Fb;var xb,db;xb=Wa*Fb;db=Eb;var Y,La,kb,Ta,hb=B.a.o,Ja=B.a.m,Ib=B.a.s,Lb=hb+Ja+Ib,X;0<Lb?(X=Math.sqrt(Lb+1),Ta=.5*X,X=.5/X,Y=(B.a.g-B.a.j)*X,La=(B.a.h-B.a.l)*X,kb=(B.a.i-B.a.f)*X):hb>Ja?hb>Ib?(X=Math.sqrt(hb-Ja-Ib+1),Y=.5*X,X=.5/X,La=(B.a.f+B.a.i)*X,kb=(B.a.h+B.a.l)*X,Ta=(B.a.g-B.a.j)*X):(X=Math.sqrt(Ib-hb-Ja+1),kb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,La=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X):Ja>Ib?(X=Math.sqrt(Ja-Ib-hb+1),La=.5*X,X=.5/X,Y=(B.a.f+B.a.i)*X,kb=(B.a.j+B.a.g)*X,Ta=(B.a.h-B.a.l)*X):(X=Math.sqrt(Ib-hb-Ja+1),kb=.5*X,X=.5/X,Y=(B.a.h+B.a.l)*X,La=(B.a.j+B.a.g)*X,Ta=(B.a.i-B.a.f)*X);Y=db*Y+nb*Ta+wb*kb-xb*La;La=db*La-nb*kb+wb*Ta+xb*Y;kb=db*kb+nb*La-wb*Y+xb*Ta;Ta=db*Ta-nb*Y-wb*La-xb*kb;var Ab=Y*Y+La*La+kb*kb+Ta*Ta;1E-32<Ab&&(Ab=1/Math.sqrt(Ab));Y*=Ab;La*=Ab;kb*=Ab;Ta*=Ab;var Kb=Y,Mb=La,Qb=kb,Nb=Ta,Rb=2*Kb,Ob=2*Mb,Ub=2*Qb,bc=Kb*Rb,cc=Mb*Ob,jc=Qb*Ub,dc=Kb*Ob,kc=Mb*Ub,ac=Kb*Ub,Xb=Nb*Rb,Yb=Nb*Ob,Sb=Nb*Ub;B.a.o=1-cc-jc;B.a.f=dc-Sb;B.a.h=ac+Yb;B.a.i=dc+Sb;B.a.m=1-bc-jc;B.a.j=kc-Xb;B.a.l=ac-Yb;B.a.g=kc+Xb;B.a.s=1-bc-cc;var hc,Tb,Pb,Zb,ic,Jb,$b,lb,ec;hc=B.a.o*B.Qa+B.a.f*B.Ta+B.a.h*B.Wa;Tb=B.a.o*B.Ra+B.a.f*B.Ua+B.a.h*B.Xa;Pb=B.a.o*B.Sa+B.a.f*B.Va+B.a.h*B.Ya;Zb=B.a.i*B.Qa+B.a.m*B.Ta+B.a.j*B.Wa;ic=B.a.i*B.Ra+B.a.m*B.Ua+B.a.j*B.Xa;Jb=B.a.i*B.Sa+B.a.m*B.Va+B.a.j*B.Ya;$b=B.a.l*B.Qa+B.a.g*B.Ta+B.a.s*B.Wa;lb=B.a.l*B.Ra+B.a.g*B.Ua+B.a.s*B.Xa;ec=B.a.l*B.Sa+B.a.g*B.Va+B.a.s*B.Ya;B.Z=hc;B.$=Tb;B.aa=Pb;B.ba=Zb;B.ca=ic;B.da=Jb;B.ea=$b;B.fa=lb;B.ga=ec;var fc,lc,sc,nc,oc,pc,qc,tc,wc;fc=B.Z*B.a.o+B.$*B.a.f+B.aa*B.a.h;lc=B.Z*B.a.i+B.$*B.a.m+B.aa*B.a.j;sc=B.Z*B.a.l+B.$*B.a.g+B.aa*B.a.s;nc=B.ba*B.a.o+B.ca*B.a.f+B.da*B.a.h;oc=B.ba*B.a.i+B.ca*B.a.m+B.da*B.a.j;pc=B.ba*B.a.l+B.ca*B.a.g+B.da*B.a.s;qc=B.ea*B.a.o+B.fa*B.a.f+B.ga*B.a.h;tc=B.ea*B.a.i+B.fa*B.a.m+B.ga*B.a.j;wc=B.ea*B.a.l+B.fa*B.a.g+B.ga*B.a.s;B.Z=fc;B.$=lc;B.aa=sc;B.ba=nc;B.ca=oc;B.da=pc;B.ea=qc;B.fa=tc;B.ga=wc},$e:function(){this.P.ed();this.P.Cl()},qa:dc});Ne.R=!0;Ne.prototype={qa:Ne};C.R=!0;C.prototype={Hl:function(a){switch(this.mc){case 1:this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=this.ob=this.nb=this.mb=this.gb=this.fb=this.eb=0;break;case 0:case 2:var b,e,d,c,f;b=this.eb*a;e=this.fb*a;d=this.gb*a;c=this.mb*a;f=this.nb*a;a=this.ob*a;var h=b*b+e*e+d*d,l=c*c+f*f+a*a;if(h||l){h>F.maxTranslationPerStep*F.maxTranslationPerStep&&(h=F.maxTranslationPerStep/Math.sqrt(h),this.eb*=h,this.fb*=h,this.gb*=h,b*=h,e*=h,d*=h);l>F.maxRotationPerStep*F.maxRotationPerStep&&(l=F.maxRotationPerStep/Math.sqrt(l),this.mb*=l,this.nb*=l,this.ob*=l,c*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(c*c+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));c*=b;f*=b;a*=b;b=e;e=this.a.o;d=this.a.m;var l=this.a.s,h=e+d+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+c*e+f*d-a*l;l=b*l-c*d+f*e+a*h;d=b*d+c*l-f*h+a*e;e=b*e-c*h-f*l-a*d;a=h*h+l*l+d*d+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;d*=a;b=e*a;var k=2*f;g=2*h;e=2*d;a=f*k;c=h*g;d*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-c-d;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-d;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-c;f=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;l=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=f;this.$=a;this.aa=c;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g;f=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;a=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;c=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;b=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;e=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;d=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;l=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;h=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=f;this.$=a;this.aa=c;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g}}},Qm:function(){var a=this.Oc*this.Oc+this.Pc*this.Pc+this.Qc*this.Qc;if(this.Sc*this.Sc+this.Tc*this.Tc+this.Uc*this.Uc||a)switch(this.mc){case 1:this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;break;case 0:case 2:var b,e,d,c,f;b=this.Sc;e=this.Tc;d=this.Uc;a=this.Oc;c=this.Pc;f=this.Qc;this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(a*a+c*c+f*f);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));a*=b;c*=b;f*=b;b=e;var h,l;e=this.a.o;d=this.a.m;l=this.a.s;h=e+d+l;var g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+a*e+c*d-f*l;l=b*l-a*d+c*e+f*h;d=b*d+a*l-c*h+f*e;e=b*e-a*h-c*l-f*d;c=h*h+l*l+d*d+e*e;1E-32<c&&(c=1/Math.sqrt(c));a=h*c;h=l*c;d*=c;b=e*c;var k=2*a;g=2*h;e=2*d;c=a*k;f=h*g;d*=e;l=a*g;h*=e;a*=e;k*=b;g*=b;b*=e;this.a.o=1-f-d;this.a.f=l-b;this.a.h=a+g;this.a.i=l+b;this.a.m=1-c-d;this.a.j=h-k;this.a.l=a-g;this.a.g=h+k;this.a.s=1-c-f;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;c=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;f=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;l=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=c;this.aa=f;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;c=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;f=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;b=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;e=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;d=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;l=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;h=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=c;this.aa=f;this.ba=b;this.ca=e;this.da=d;this.ea=l;this.fa=h;this.ga=g}},wj:function(){for(var a,b,e,d,c,f,h,l,g,k=g=l=h=f=c=d=e=b=a=0,m=this.Ac;null!=m;){var n=m.M,q=m.Ib;q.Be();var p=m.jk*q.nf,r,t,C,w,A,u,D,F;r=m.ha.o*q.cg+m.ha.f*q.fg+m.ha.h*q.ig;t=m.ha.o*q.dg+m.ha.f*q.gg+m.ha.h*q.jg;C=m.ha.o*q.eg+m.ha.f*q.hg+m.ha.h*q.kg;w=m.ha.i*q.cg+m.ha.m*q.fg+m.ha.j*q.ig;A=m.ha.i*q.dg+m.ha.m*q.gg+m.ha.j*q.jg;u=m.ha.i*q.eg+m.ha.m*q.hg+m.ha.j*q.kg;D=m.ha.l*q.cg+m.ha.g*q.fg+m.ha.s*q.ig;F=m.ha.l*q.dg+m.ha.g*q.gg+m.ha.s*q.jg;var q=m.ha.l*q.eg+m.ha.g*q.hg+m.ha.s*q.kg,z,E,x,L,N,G;z=r*m.ha.o+t*m.ha.f+C*m.ha.h;E=r*m.ha.i+t*m.ha.m+C*m.ha.j;C=r*m.ha.l+t*m.ha.g+C*m.ha.s;x=w*m.ha.o+A*m.ha.f+u*m.ha.h;L=w*m.ha.i+A*m.ha.m+u*m.ha.j;u=w*m.ha.l+A*m.ha.g+u*m.ha.s;N=D*m.ha.o+F*m.ha.f+q*m.ha.h;G=D*m.ha.i+F*m.ha.m+q*m.ha.j;q=D*m.ha.l+F*m.ha.g+q*m.ha.s;r=z;t=E;w=x;A=L;D=N;F=G;r*=p;t*=p;C*=p;w*=p;A*=p;u*=p;D*=p;F*=p;var q=q*p,M,O,ha;x=m.ha.v*m.ha.v;L=m.ha.A*m.ha.A;M=m.ha.B*m.ha.B;N=-m.ha.v*m.ha.A;G=-m.ha.A*m.ha.B;ha=-m.ha.B*m.ha.v;m=L+M;z=N;E=ha;M=x+M;O=G;x+=L;r+=m*p;t+=z*p;C+=E*p;w+=N*p;A+=M*p;u+=O*p;D+=ha*p;F+=G*p;q+=x*p;k+=p;a+=r;b+=t;e+=C;d+=w;c+=A;f+=u;h+=D;l+=F;g+=q;m=n}this.Lc=k;this.wd=a;this.xd=b;this.yd=e;this.zd=d;this.Ad=c;this.Bd=f;this.Cd=h;this.Dd=l;this.Ed=g;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Lc&&0<a&&0==this.mc){this.Za=1/this.Lc;a=this.Ad*this.Ed-this.Bd*this.Dd;b=this.zd*this.Ed-this.Bd*this.Cd;e=this.zd*this.Dd-this.Ad*this.Cd;d=this.xd*this.Ed-this.yd*this.Dd;c=this.wd*this.Ed-this.yd*this.Cd;f=this.wd*this.Dd-this.xd*this.Cd;h=this.xd*this.Bd-this.yd*this.Ad;l=this.wd*this.Bd-this.yd*this.zd;g=this.wd*this.Ad-this.xd*this.zd;k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Qa=a*k;this.Ra=-d*k;this.Sa=h*k;this.Ta=-b*k;this.Ua=c*k;this.Va=-l*k;this.Wa=e*k;this.Xa=-f*k;this.Ya=g*k;this.Bh=this.Qa;this.Ch=this.Ra;this.Dh=this.Sa;this.Eh=this.Ta;this.Fh=this.Ua;this.Gh=this.Va;this.Hh=this.Wa;this.Ih=this.Xa;this.Jh=this.Ya;this.Qa=this.Bh*this.ic.x;this.Ra=this.Ch*this.ic.x;this.Sa=this.Dh*this.ic.x;this.Ta=this.Eh*this.ic.y;this.Ua=this.Fh*this.ic.y;this.Va=this.Gh*this.ic.y;this.Wa=this.Hh*this.ic.z;this.Xa=this.Ih*this.ic.z;this.Ya=this.Jh*this.ic.z;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g}else this.ga=this.fa=this.ea=this.da=this.ca=this.ba=this.aa=this.$=this.Z=this.Jh=this.Ih=this.Hh=this.Gh=this.Fh=this.Eh=this.Dh=this.Ch=this.Bh=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Qa=this.Za=0,0==this.mc&&(this.mc=1);this.Fb=!1;this.xb=0},Xl:function(){var a=new t;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},Zl:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},sm:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.pa;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=b}this.Fb=!1;this.xb=0},vm:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.pa;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Ac;null!=b;){e=b.M;a=b.pa;var d=b.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;a=b.a;d=b.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;b.Ib.Lb(b.u,b.pa);a=b.u.ma;c=b.u.na;d=b.u.oa;f=b.u.ja;h=b.u.ka;l=b.u.la;b.Ib.Lb(b.u,b.a);b.u.ma=a<b.u.ma?a:b.u.ma;b.u.na=c<b.u.na?c:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.ja=f>b.u.ja?f:b.u.ja;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;null!=b.Na&&(a=b.a.v-b.pa.v,c=b.a.A-b.pa.A,d=b.a.B-b.pa.B,f=b.nc,f.x=a,f.y=c,f.z=d,b.Vb.jc.cc.sd(b.Na,b.u,b.nc));b=e}this.Fb=!1;this.xb=0},bm:function(){var a=new O;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},gm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},tm:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,d,c,f,h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.pa;c=a.ha;d=this.pa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=b}this.Fb=!1;this.xb=0},Wn:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.a.o=e*d;this.a.f=-e*f;this.a.h=c;this.a.i=b*f+d*a*c;this.a.m=b*d-a*c*f;this.a.j=-e*a;this.a.l=a*f-b*d*c;this.a.g=d*a+b*c*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;c=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;f=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;b=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=c;this.aa=f;this.ba=e;this.ca=d;this.da=b;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;c=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;f=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;e=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;d=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;b=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=c;this.aa=f;this.ba=e;this.ca=d;this.da=b;this.ea=h;this.fa=l;this.ga=g;a=this.pa;c=this.a;a.v=c.v;a.A=c.A;a.B=c.B;a.o=c.o;a.f=c.f;a.h=c.h;a.i=c.i;a.m=c.m;a.j=c.j;a.l=c.l;a.g=c.g;a.s=c.s;for(a=this.Ac;null!=a;){c=a.M;f=a.pa;d=a.ha;e=this.pa;var k,m,n,q,p;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;f=a.a;d=a.ha;e=this.a;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;a.Ib.Lb(a.u,a.pa);f=a.u.ma;e=a.u.na;d=a.u.oa;b=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=f<a.u.ma?f:a.u.ma;a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=b>a.u.ja?b:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(f=a.a.v-a.pa.v,e=a.a.A-a.pa.A,d=a.a.B-a.pa.B,b=a.nc,b.x=f,b.y=e,b.z=d,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=c}this.Fb=!1;this.xb=0},mm:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+d*this.a.l;m=b*this.a.f+e*this.a.m+d*this.a.g;b=b*this.a.h+e*this.a.j+d*this.a.s;e=c*this.a.o+f*this.a.i+h*this.a.l;d=c*this.a.f+f*this.a.m+h*this.a.g;c=c*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=d;this.a.j=c;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;g=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;m=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;k=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;b=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=l;this.$=g;this.aa=a;this.ba=m;this.ca=k;this.da=c;this.ea=f;this.fa=h;this.ga=b;l=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;g=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;a=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;m=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;k=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;c=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;f=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;h=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;b=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=l;this.$=g;this.aa=a;this.ba=m;this.ca=k;this.da=c;this.ea=f;this.fa=h;this.ga=b;l=this.pa;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Ac;null!=l;){g=l.M;a=l.pa;k=l.ha;m=this.pa;var n,q,p;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;a=l.a;k=l.ha;m=this.a;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;l.Ib.Lb(l.u,l.pa);a=l.u.ma;m=l.u.na;k=l.u.oa;c=l.u.ja;f=l.u.ka;h=l.u.la;l.Ib.Lb(l.u,l.a);l.u.ma=a<l.u.ma?a:l.u.ma;l.u.na=m<l.u.na?m:l.u.na;l.u.oa=k<l.u.oa?k:l.u.oa;l.u.ja=c>l.u.ja?c:l.u.ja;l.u.ka=f>l.u.ka?f:l.u.ka;l.u.la=h>l.u.la?h:l.u.la;null!=l.Na&&(a=l.a.v-l.pa.v,m=l.a.A-l.pa.A,k=l.a.B-l.pa.B,c=l.nc,c.x=a,c.y=m,c.z=k,l.Vb.jc.cc.sd(l.Na,l.u,l.nc));l=g}this.Fb=!1;this.xb=0},Hn:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);d=l*n;c=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=d*this.a.o+c*this.a.i+g*this.a.l;m=d*this.a.f+c*this.a.m+g*this.a.g;g=d*this.a.h+c*this.a.j+g*this.a.s;d=a*this.a.o+b*this.a.i+f*this.a.l;c=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=d;this.a.m=c;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;h=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;g=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;m=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=e;this.$=a;this.aa=b;this.ba=f;this.ca=h;this.da=g;this.ea=k;this.fa=m;this.ga=l;e=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;a=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;b=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;f=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;h=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;g=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;k=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;m=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;l=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=e;this.$=a;this.aa=b;this.ba=f;this.ca=h;this.da=g;this.ea=k;this.fa=m;this.ga=l;e=this.pa;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Ac;null!=e;){a=e.M;b=e.pa;h=e.ha;f=this.pa;var q,p,g=f.o*h.o+f.f*h.i+f.h*h.l,k=f.o*h.f+f.f*h.m+f.h*h.g,m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;b=e.a;h=e.ha;f=this.a;g=f.o*h.o+f.f*h.i+f.h*h.l;k=f.o*h.f+f.f*h.m+f.h*h.g;m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;e.Ib.Lb(e.u,e.pa);b=e.u.ma;f=e.u.na;h=e.u.oa;g=e.u.ja;k=e.u.ka;m=e.u.la;e.Ib.Lb(e.u,e.a);e.u.ma=b<e.u.ma?b:e.u.ma;e.u.na=f<e.u.na?f:e.u.na;e.u.oa=h<e.u.oa?h:e.u.oa;e.u.ja=g>e.u.ja?g:e.u.ja;e.u.ka=k>e.u.ka?k:e.u.ka;e.u.la=m>e.u.la?m:e.u.la;null!=e.Na&&(b=e.a.v-e.pa.v,f=e.a.A-e.pa.A,h=e.a.B-e.pa.B,g=e.nc,g.x=b,g.y=f,g.z=h,e.Vb.jc.cc.sd(e.Na,e.u,e.nc));e=a}this.Fb=!1;this.xb=0},Ol:function(){var a=new ha,b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},Ql:function(a){var b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},nm:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.a.o=1-g-d;this.a.f=k-c;this.a.h=b+h;this.a.i=k+c;this.a.m=1-a-d;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;g=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;l=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;k=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;e=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;b=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=g;this.aa=c;this.ba=l;this.ca=d;this.da=k;this.ea=h;this.fa=e;this.ga=b;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;g=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;c=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;l=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;d=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;k=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;e=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;b=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=g;this.aa=c;this.ba=l;this.ca=d;this.da=k;this.ea=h;this.fa=e;this.ga=b;a=this.pa;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Ac;null!=a;){g=a.M;c=a.pa;d=a.ha;var l=this.pa,m,n,q,p,k=l.o*d.o+l.f*d.i+l.h*d.l,h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;c=a.a;d=a.ha;l=this.a;k=l.o*d.o+l.f*d.i+l.h*d.l;h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;a.Ib.Lb(a.u,a.pa);c=a.u.ma;l=a.u.na;d=a.u.oa;k=a.u.ja;h=a.u.ka;e=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=c<a.u.ma?c:a.u.ma;a.u.na=l<a.u.na?l:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=k>a.u.ja?k:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=e>a.u.la?e:a.u.la;null!=a.Na&&(c=a.a.v-a.pa.v,l=a.a.A-a.pa.A,d=a.a.B-a.pa.B,k=a.nc,k.x=c,k.y=l,k.z=d,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=g}this.Fb=!1;this.xb=0},hm:function(){var a=this.a,b=new za;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},km:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},um:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,d,c,f,h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.pa;c=a.ha;d=this.pa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=b}this.Fb=!1;this.xb=0},He:function(){return this.Lc},ce:function(){var a=new O;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed;return a},de:function(a){a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Bf:function(){var a=new Ne;a.mass=this.Lc;var b=a.localInertia;b.e00=this.wd;b.e01=this.xd;b.e02=this.yd;b.e10=this.zd;b.e11=this.Ad;b.e12=this.Bd;b.e20=this.Cd;b.e21=this.Dd;b.e22=this.Ed;return a},Jg:function(a){a.mass=this.Lc;a=a.localInertia;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Un:function(a){this.Lc=a.mass;a=a.localInertia;this.wd=a.e00;this.xd=a.e01;this.yd=a.e02;this.zd=a.e10;this.Ad=a.e11;this.Bd=a.e12;this.Cd=a.e20;this.Dd=a.e21;this.Ed=a.e22;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Lc&&0<a&&0==this.mc){this.Za=1/this.Lc;a=this.Ad*this.Ed-this.Bd*this.Dd;var b=this.zd*this.Ed-this.Bd*this.Cd,e=this.zd*this.Dd-this.Ad*this.Cd,d=this.xd*this.Ed-this.yd*this.Dd,c=this.wd*this.Ed-this.yd*this.Cd,f=this.wd*this.Dd-this.xd*this.Cd,h=this.xd*this.Bd-this.yd*this.Ad,l=this.wd*this.Bd-this.yd*this.zd,g=this.wd*this.Ad-this.xd*this.zd,k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Qa=a*k;this.Ra=-d*k;this.Sa=h*k;this.Ta=-b*k;this.Ua=c*k;this.Va=-l*k;this.Wa=e*k;this.Xa=-f*k;this.Ya=g*k;this.Bh=this.Qa;this.Ch=this.Ra;this.Dh=this.Sa;this.Eh=this.Ta;this.Fh=this.Ua;this.Gh=this.Va;this.Hh=this.Wa;this.Ih=this.Xa;this.Jh=this.Ya;this.Qa=this.Bh*this.ic.x;this.Ra=this.Ch*this.ic.x;this.Sa=this.Dh*this.ic.x;this.Ta=this.Eh*this.ic.y;this.Ua=this.Fh*this.ic.y;this.Va=this.Gh*this.ic.y;this.Wa=this.Hh*this.ic.z;this.Xa=this.Ih*this.ic.z;this.Ya=this.Jh*this.ic.z;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g}else this.ga=this.fa=this.ea=this.da=this.ca=this.ba=this.aa=this.$=this.Z=this.Jh=this.Ih=this.Hh=this.Gh=this.Fh=this.Eh=this.Dh=this.Ch=this.Bh=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Qa=this.Za=0,0==this.mc&&(this.mc=1);this.Fb=!1;this.xb=0},Mg:function(){var a=this.ic;return new t(a.x,a.y,a.z)},Vn:function(a){var b=this.ic;b.x=a.x;b.y=a.y;b.z=a.z;this.Qa=this.Bh*this.ic.x;this.Ra=this.Ch*this.ic.x;this.Sa=this.Dh*this.ic.x;this.Ta=this.Eh*this.ic.y;this.Ua=this.Fh*this.ic.y;this.Va=this.Gh*this.ic.y;this.Wa=this.Hh*this.ic.z;this.Xa=this.Ih*this.ic.z;this.Ya=this.Jh*this.ic.z;var e,d,c,f,h,l,g;a=this.a.o*this.Qa+this.a.f*this.Ta+this.a.h*this.Wa;b=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.i*this.Qa+this.a.m*this.Ta+this.a.j*this.Wa;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.l*this.Qa+this.a.g*this.Ta+this.a.s*this.Wa;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;g=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;a=this.Z*this.a.o+this.$*this.a.f+this.aa*this.a.h;b=this.Z*this.a.i+this.$*this.a.m+this.aa*this.a.j;e=this.Z*this.a.l+this.$*this.a.g+this.aa*this.a.s;d=this.ba*this.a.o+this.ca*this.a.f+this.da*this.a.h;c=this.ba*this.a.i+this.ca*this.a.m+this.da*this.a.j;f=this.ba*this.a.l+this.ca*this.a.g+this.da*this.a.s;h=this.ea*this.a.o+this.fa*this.a.f+this.ga*this.a.h;l=this.ea*this.a.i+this.fa*this.a.m+this.ga*this.a.j;g=this.ea*this.a.l+this.fa*this.a.g+this.ga*this.a.s;this.Z=a;this.$=b;this.aa=e;this.ba=d;this.ca=c;this.da=f;this.ea=h;this.fa=l;this.ga=g;this.Fb=!1;this.xb=0},Pd:function(){var a=new t;a.x=this.eb;a.y=this.fb;a.z=this.gb;return a},be:function(a){a.x=this.eb;a.y=this.fb;a.z=this.gb},Tn:function(a){this.eb=a.x;this.fb=a.y;this.gb=a.z;this.Fb=!1;this.xb=0},Cc:function(){var a=new t;a.x=this.mb;a.y=this.nb;a.z=this.ob;return a},Hc:function(a){a.x=this.eb;a.y=this.fb;a.z=this.gb},Ln:function(a){this.mb=a.x;this.nb=a.y;this.ob=a.z;this.Fb=!1;this.xb=0},ab:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.eb+=b;this.fb+=e;this.gb+=a;this.Fb=!1;this.xb=0},Pa:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.mb+=b;this.nb+=e;this.ob+=a;this.Fb=!1;this.xb=0},qc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.eb+=e*this.Za;this.fb+=d*this.Za;this.gb+=a*this.Za;var c,f,h;c=b.x;f=b.y;h=b.z;c-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*d;a=h*e-c*a;c=c*d-f*e;e=this.Z*b+this.$*a+this.aa*c;d=this.ba*b+this.ca*a+this.da*c;b=this.ea*b+this.fa*a+this.ga*c;this.mb+=e;this.nb+=d;this.ob+=b;this.Fb=!1;this.xb=0},rc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.eb+=b*this.Za;this.fb+=e*this.Za;this.gb+=a*this.Za;this.Fb=!1;this.xb=0},Kb:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c;a=this.Z*b+this.$*e+this.aa*d;c=this.ba*b+this.ca*e+this.da*d;b=this.ea*b+this.fa*e+this.ga*d;this.mb+=a;this.nb+=c;this.ob+=b;this.Fb=!1;this.xb=0},kc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.yh+=e;this.zh+=d;this.Ah+=a;var c,f;c=b.x;f=b.y;b=b.z;c-=this.a.v;f-=this.a.A;b-=this.a.B;this.kf+=f*a-b*d;this.lf+=b*e-c*a;this.mf+=c*d-f*e;this.Fb=!1;this.xb=0},lc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.yh+=b;this.zh+=e;this.Ah+=a;this.Fb=!1;this.xb=0},zc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.kf+=b;this.lf+=e;this.mf+=a;this.Fb=!1;this.xb=0},bd:function(){return this.Ug},Rn:function(a){this.Ug=a;this.Fb=!1;this.xb=0},ee:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},fe:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;e-=this.a.v;d-=this.a.A;c-=this.a.B;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},me:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},Ge:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},ci:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d+this.a.v;e=c+this.a.A;a+=this.a.B;d=new t;d.x=b;d.y=e;d.z=a;return d},di:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;c=this.a.l*e+this.a.g*d+this.a.s*c;e=a+this.a.v;d=f+this.a.A;c+=this.a.B;b.x=e;b.y=d;b.z=c},xj:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},wl:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;e=this.a.l*e+this.a.g*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Nl:function(){return this.pg},Ng:function(){return this.Ac},Kg:function(){return this.se},ad:function(){return this.Mb},Lg:function(){return this.$g},cd:function(){return this.re},sb:function(a){null==this.Ac?this.Ac=a:(this.ni.M=a,a.ia=this.ni);this.ni=a;this.pg++;a.Vb=this;if(null!=this.jc){var b=this.jc;a.Na=b.cc.Ph(a,a.u);a.sc=b.Jl++;b.pg++}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=b}},wm:function(a){var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Ac&&(this.Ac=this.Ac.M);a==this.ni&&(this.ni=this.ni.ia);a.M=null;a.ia=null;this.pg--;a.Vb=null;if(null!=this.jc){b=this.jc;b.cc.Qh(a.Na);a.Na=null;a.sc=-1;for(var d=a.Vb.Mb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Mc;d.Fb=!1;d.xb=0;var d=b.wh,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ia);c.M=null;c.ia=null;f=c.qb.ia;h=c.qb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.qb==c.C.Mb&&(c.C.Mb=c.C.Mb.M);c.qb==c.C.dc&&(c.C.dc=c.C.dc.ia);c.qb.M=null;c.qb.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.D.Mb&&(c.D.Mb=c.D.Mb.M);c.rb==c.D.dc&&(c.D.dc=c.D.dc.ia);c.rb.M=null;c.rb.ia=null;c.C.se--;c.D.se--;c.qb.Mc=null;c.rb.Mc=null;c.qb.Ud=null;c.rb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ja.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}b.pg--}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,l,g,k,m,n,q,p,f=c.o*d.o+c.f*d.i+c.h*d.l,h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Ib.Lb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Ib.Lb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.Na&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Vb.jc.cc.sd(a.Na,a.u,a.nc));a=b}},lm:function(){return this.mc},Em:function(a){this.mc=a;this.wj()},Gm:function(){this.Fb=!1;this.xb=0},Fm:function(){this.Fb=!0;this.xb=0},bi:function(){return this.xb},Qn:function(a){this.hk=a;this.Fb=!1;this.xb=0},$l:function(){return this.ia},vl:function(){return this.M},qa:C};Zj.R=!0;Zj.prototype={qa:Zj};Qd.R=!0;pa.R=!0;pa.prototype={qc:function(){return this.Fj},me:function(a){this.Fj=a},Hc:function(){return this.Pj},He:function(a){this.Pj=a},zc:function(){var a=this.ha,b=new za;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Cc:function(a){var b=this.ha;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Pd:function(){var a=this.a,b=new za;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},be:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Ge:function(a){var b=this.ha;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Vb)for(a=this.Vb,a.wj(),b=a.Ac;null!=b;){var e=b.M,d=b.pa,c=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ha;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Ib.Lb(b.u,b.pa);d=b.u.ma;f=b.u.na;c=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Ib.Lb(b.u,b.a);b.u.ma=d<b.u.ma?d:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.Na&&(d=b.a.v-b.pa.v,f=b.a.A-b.pa.A,c=b.a.B-b.pa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Vb.jc.cc.sd(b.Na,b.u,b.nc));b=e}},lc:function(){return this.jk},fe:function(a){this.jk=a;if(null!=this.Vb){a=this.Vb;a.wj();for(var b=a.Ac;null!=b;){var e=b.M,d=b.pa,c=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ha;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Ib.Lb(b.u,b.pa);d=b.u.ma;f=b.u.na;c=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Ib.Lb(b.u,b.a);b.u.ma=d<b.u.ma?d:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.Na&&(d=b.a.v-b.pa.v,f=b.a.A-b.pa.A,c=b.a.B-b.pa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Vb.jc.cc.sd(b.Na,b.u,b.nc));b=e}}},Pa:function(){return this.u.clone()},ab:function(a){a.Zd(this.u)},rc:function(){return this.Ib},ad:function(){return this.Vb},sb:function(){return this.Aj},ce:function(a){this.Aj=a},Kb:function(){return this.Bj},de:function(a){this.Bj=a},kc:function(){return this.Cj},ee:function(a){this.Cj=a},cd:function(){return this.ia},bd:function(){return this.M},qa:pa};Ng.R=!0;Ng.prototype={qa:Ng};String.prototype.qa=String;String.R=!0;Array.R=!0;Date.prototype.qa=Date;Date.R=["Date"];var ol={},ml={},nl=Number,ll=Boolean,pl={},ql={};cc.rc={}.toString;Hd.Mg=1;Hd.Ng=2;Hd.BRUTE_FORCE=1;Hd.BVH=2;Bc.nm=0;Bc.Lg=1;Bc.xj=2;Bc.ci=3;Bc.bi=4;Bc.di=5;Bc.SPHERE=0;Bc.BOX=1;Bc.CYLINDER=2;Bc.CONE=3;Bc.CAPSULE=4;Bc.CONVEX_HULL=5;od.Cc=0;t.numCreations=0;F.defaultFriction=.2;F.defaultRestitution=.2;F.defaultDensity=1;F.defaultCollisionGroup=1;F.defaultCollisionMask=1;F.maxTranslationPerStep=20;F.maxRotationPerStep=3.14159265358979;F.bvhProxyPadding=.1;F.bvhIncrementalCollisionThreshold=.45;F.defaultGJKMargin=.05;F.enableGJKCaching=!0;F.maxEPAVertices=128;F.maxEPAPolyhedronFaces=128;F.contactEnableBounceThreshold=.5;F.velocityBaumgarte=.2;F.positionSplitImpulseBaumgarte=.4;F.positionNgsBaumgarte=1;F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;F.defaultContactPositionCorrectionAlgorithm=0;F.alternativeContactPositionCorrectionAlgorithm=1;F.contactPersistenceThreshold=.05;F.maxManifoldPoints=4;F.defaultJointConstraintSolverType=0;F.defaultJointPositionCorrectionAlgorithm=0;F.jointWarmStartingFactorForBaungarte=.8;F.jointWarmStartingFactor=.95;F.minSpringDamperDampingRatio=1E-6;F.minRagdollMaxSwingAngle=1E-6;F.maxJacobianRows=6;F.directMlcpSolverEps=1E-9;F.islandInitialRigidBodyArraySize=128;F.islandInitialConstraintArraySize=128;F.sleepingVelocityThreshold=.2;F.sleepingAngularVelocityThreshold=.5;F.sleepingTimeThreshold=1;F.disableSleeping=!1;F.linearSlop=.005;F.angularSlop=.017453292519943278;Rb.Pa=new Rb;lc.vm=0;lc.$l=1;lc.Zl=2;lc.Xl=257;lc.Ql=258;lc.Ol=259;lc.SUCCEEDED=0;lc.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;lc.GJK_DID_NOT_CONVERGE=2;lc.EPA_FAILED_TO_INIT=257;lc.EPA_FAILED_TO_ADD_VERTEX=258;lc.EPA_DID_NOT_CONVERGE=259;O.numCreations=0;M.numCreations=0;Ba.POSITIVE_INFINITY=1/0;Ba.NEGATIVE_INFINITY=-1/0;Ba.PI=3.14159265358979;Ba.TWO_PI=6.28318530717958;Ba.HALF_PI=1.570796326794895;Ba.TO_RADIANS=.017453292519943278;Ba.TO_DEGREES=57.29577951308238;ha.numCreations=0;Hb.Bf=8;Hb.Jg=4;Hb.He=8;Rc.broadPhaseCollisionTime=0;Rc.narrowPhaseCollisionTime=0;Rc.dynamicsTime=0;Rc.totalTime=0;ec.Kg=0;ec.tm=1;ec.hm=2;ec.BAUMGARTE=0;ec.SPLIT_IMPULSE=1;ec.NGS=2;dd.Ge=1;dd.me=2;oc.sm=0;oc.mm=1;oc.wl=2;oc.km=3;oc.wm=4;oc.lm=5;oc.SPHERICAL=0;oc.REVOLUTE=1;oc.CYLINDRICAL=2;oc.PRISMATIC=3;oc.UNIVERSAL=4;oc.RAGDOLL=5;pe.bm=0;pe.vl=1;pe.ITERATIVE=0;pe.DIRECT=1;Qd.Nl=0;Qd.um=1;Qd.gm=2;Qd.DYNAMIC=0;Qd.STATIC=1;Qd.KINEMATIC=2;window.OIMO={};window.OIMO.BroadPhase=ib;ib.prototype.createProxy=ib.prototype.Ph;ib.prototype.destroyProxy=ib.prototype.Qh;ib.prototype.moveProxy=ib.prototype.sd;ib.prototype.isOverlapping=ib.prototype.Kb;ib.prototype.collectPairs=ib.prototype.si;ib.prototype.getProxyPairList=ib.prototype.Pa;ib.prototype.isIncremental=ib.prototype.sb;ib.prototype.getTestCount=ib.prototype.ab;ib.prototype.rayCast=ib.prototype.Sd;ib.prototype.convexCast=ib.prototype.rf;ib.prototype.aabbTest=ib.prototype.eh;window.OIMO.Geometry=Ob;Ob.prototype.getType=Ob.prototype.ab;Ob.prototype.getVolume=Ob.prototype.Pa;Ob.prototype.rayCast=Ob.prototype.Sd;window.OIMO.ConvexGeometry=mb;mb.prototype.getGjkMergin=mb.prototype.fn;mb.prototype.setGjkMergin=mb.prototype.Jn;mb.prototype.computeLocalSupportingVertex=mb.prototype.Ld;mb.prototype.rayCast=mb.prototype.Sd;window.OIMO.BroadPhaseProxyCallback=xc;xc.prototype.process=xc.prototype.td;window.OIMO.BroadPhaseType=Hd;window.OIMO.Proxy=qc;qc.prototype.getId=qc.prototype.sb;qc.prototype.getFatAabb=qc.prototype.Pa;qc.prototype.getFatAabbTo=qc.prototype.ab;window.OIMO.ProxyPair=Kc;Kc.prototype.getProxy1=Kc.prototype.Pa;Kc.prototype.getProxy2=Kc.prototype.ab;Kc.prototype.getNext=Kc.prototype.sb;window.OIMO.BruteForceBroadPhase=Cb;Cb.prototype.createProxy=Cb.prototype.Ph;Cb.prototype.destroyProxy=Cb.prototype.Qh;Cb.prototype.moveProxy=Cb.prototype.sd;Cb.prototype.collectPairs=Cb.prototype.si;Cb.prototype.rayCast=Cb.prototype.Sd;Cb.prototype.convexCast=Cb.prototype.rf;Cb.prototype.aabbTest=Cb.prototype.eh;window.OIMO.BvhBroadPhase=fc;fc.prototype.createProxy=fc.prototype.Ph;fc.prototype.destroyProxy=fc.prototype.Qh;fc.prototype.moveProxy=fc.prototype.sd;fc.prototype.collectPairs=fc.prototype.si;fc.prototype.rayCast=fc.prototype.Sd;fc.prototype.convexCast=fc.prototype.rf;fc.prototype.aabbTest=fc.prototype.eh;fc.prototype.getTreeBalance=fc.prototype.vn;window.OIMO.Aabb=Ga;Ga.prototype.init=Ga.prototype.za;Ga.prototype.getMin=Ga.prototype.Hc;Ga.prototype.getMinTo=Ga.prototype.ad;Ga.prototype.setMin=Ga.prototype.Pd;Ga.prototype.getMax=Ga.prototype.zc;Ga.prototype.getMaxTo=Ga.prototype.Cc;Ga.prototype.setMax=Ga.prototype.cd;Ga.prototype.getCenter=Ga.prototype.sb;Ga.prototype.getCenterTo=Ga.prototype.Kb;Ga.prototype.getExtents=Ga.prototype.kc;Ga.prototype.getExtentsTo=Ga.prototype.lc;Ga.prototype.combine=Ga.prototype.Pa;Ga.prototype.combined=Ga.prototype.ab;Ga.prototype.overlap=Ga.prototype.bd;Ga.prototype.getIntersection=Ga.prototype.qc;Ga.prototype.getIntersectionTo=Ga.prototype.rc;Ga.prototype.copyFrom=Ga.prototype.Zd;Ga.prototype.clone=Ga.prototype.clone;window.OIMO.BoxGeometry=id;id.prototype.getHalfExtents=id.prototype.gn;id.prototype.getHalfExtentsTo=id.prototype.hn;id.prototype.computeLocalSupportingVertex=id.prototype.Ld;window.OIMO.CapsuleGeometry=hd;hd.prototype.getRadius=hd.prototype.Sh;hd.prototype.getHalfHeight=hd.prototype.mj;hd.prototype.computeLocalSupportingVertex=hd.prototype.Ld;window.OIMO.ConeGeometry=bd;bd.prototype.getRadius=bd.prototype.Sh;bd.prototype.getHalfHeight=bd.prototype.mj;bd.prototype.computeLocalSupportingVertex=bd.prototype.Ld;window.OIMO.ConvexHullGeometry=pd;pd.prototype.getVertices=pd.prototype.zn;pd.prototype.computeLocalSupportingVertex=pd.prototype.Ld;window.OIMO.CylinderGeometry=ad;ad.prototype.getRadius=ad.prototype.Sh;ad.prototype.getHalfHeight=ad.prototype.mj;ad.prototype.computeLocalSupportingVertex=ad.prototype.Ld;window.OIMO.GeometryType=Bc;window.OIMO.RayCastHit=Ed;window.OIMO.SphereGeometry=yd;yd.prototype.getRadius=yd.prototype.Sh;yd.prototype.computeLocalSupportingVertex=yd.prototype.Ld;window.OIMO.CollisionMatrix=Sd;Sd.prototype.getDetector=Sd.prototype.Pa;window.OIMO.DetectorResult=nd;nd.prototype.getMaxDepth=nd.prototype.cm;nd.prototype.clear=nd.prototype.clear;window.OIMO.DetectorResultPoint=mj;window.OIMO.Detector=gd;gd.prototype.detect=gd.prototype.Yl;window.OIMO.CapsuleCapsuleDetector=Gd;window.OIMO.GjkEpaDetector=ee;window.OIMO.SphereBoxDetector=xd;window.OIMO.SphereCapsuleDetector=Nd;window.OIMO.SphereSphereDetector=Te;window.OIMO.Vec3=t;t.prototype.init=t.prototype.za;t.prototype.zero=t.prototype.O;t.prototype.add=t.prototype.bd;t.prototype.addScaled=t.prototype.Pa;t.prototype.sub=t.prototype.me;t.prototype.scale=t.prototype.ee;t.prototype.scale3=t.prototype.He;t.prototype.dot=t.prototype.Pd;t.prototype.cross=t.prototype.sb;t.prototype.addEq=t.prototype.cd;t.prototype.addScaledEq=t.prototype.ab;t.prototype.subEq=t.prototype.Ge;t.prototype.scaleEq=t.prototype.fe;t.prototype.scale3Eq=t.prototype.Bf;t.prototype.crossEq=t.prototype.Kb;t.prototype.mulMat3=t.prototype.kc;t.prototype.mulMat4=t.prototype.qc;t.prototype.mulTransform=t.prototype.zc;t.prototype.mulMat3Eq=t.prototype.lc;t.prototype.mulMat4Eq=t.prototype.rc;t.prototype.mulTransformEq=t.prototype.Cc;t.prototype.length=t.prototype.length;t.prototype.lengthSq=t.prototype.be;t.prototype.normalized=t.prototype.de;t.prototype.normalize=t.prototype.ce;t.prototype.negate=t.prototype.Hc;t.prototype.negateEq=t.prototype.ad;t.prototype.copyFrom=t.prototype.Zd;t.prototype.clone=t.prototype.clone;t.prototype.toString=t.prototype.toString;window.OIMO.Transform=za;za.prototype.identity=za.prototype.Mf;za.prototype.getPosition=za.prototype.sb;za.prototype.getPositionTo=za.prototype.Kb;za.prototype.setPosition=za.prototype.zc;za.prototype.translate=za.prototype.Hc;za.prototype.getRotation=za.prototype.kc;za.prototype.getRotationTo=za.prototype.lc;za.prototype.setRotation=za.prototype.Cc;za.prototype.rotate=za.prototype.qc;za.prototype.getOrientation=za.prototype.Pa;za.prototype.getOrientationTo=za.prototype.ab;za.prototype.setOrientation=za.prototype.rc;za.prototype.clone=za.prototype.clone;za.prototype.copyFrom=za.prototype.Zd;window.OIMO.Setting=F;window.OIMO.GjkEpa=Rb;Rb.prototype.computeClosestPoints=Rb.prototype.Pa;Rb.prototype.computeDistance=Rb.prototype.ab;Rb.prototype.convexCast=Rb.prototype.rf;Rb.prototype.rayCast=Rb.prototype.Sd;Rb.getInstance=Rb.ad;window.OIMO.GjkEpaResultState=lc;window.OIMO.SimplexUtil=fd;fd.projectOrigin2=fd.bd;fd.projectOrigin3=fd.cd;fd.projectOrigin4=fd.Pd;window.OIMO.Mat3=O;O.prototype.init=O.prototype.za;O.prototype.identity=O.prototype.Mf;O.prototype.add=O.prototype.zc;O.prototype.sub=O.prototype.Kg;O.prototype.scale=O.prototype.Bf;O.prototype.mul=O.prototype.de;O.prototype.addEq=O.prototype.Cc;O.prototype.subEq=O.prototype.Lg;O.prototype.scaleEq=O.prototype.Jg;O.prototype.mulEq=O.prototype.ee;O.prototype.prependScale=O.prototype.Ge;O.prototype.appendScale=O.prototype.bd;O.prototype.prependRotation=O.prototype.fe;O.prototype.appendRotation=O.prototype.Hc;O.prototype.prependScaleEq=O.prototype.He;O.prototype.appendScaleEq=O.prototype.cd;O.prototype.prependRotationEq=O.prototype.me;O.prototype.appendRotationEq=O.prototype.ad;O.prototype.transpose=O.prototype.bi;O.prototype.transposeEq=O.prototype.ci;O.prototype.determinant=O.prototype.Pd;O.prototype.trace=O.prototype.Ng;O.prototype.inverse=O.prototype.be;O.prototype.inverseEq=O.prototype.ce;O.prototype.toArray=O.prototype.Mg;O.prototype.copyFrom=O.prototype.Zd;O.prototype.clone=O.prototype.clone;O.prototype.fromQuat=O.prototype.sb;O.prototype.toQuat=O.prototype.xj;O.prototype.fromEulerXyz=O.prototype.ab;O.prototype.toEulerXyz=O.prototype.di;O.prototype.getRow=O.prototype.qc;O.prototype.getCol=O.prototype.kc;O.prototype.getRowTo=O.prototype.rc;O.prototype.getColTo=O.prototype.lc;O.prototype.fromRows=O.prototype.Kb;O.prototype.fromCols=O.prototype.Pa;O.prototype.toString=O.prototype.toString;window.OIMO.Mat4=M;M.prototype.init=M.prototype.za;M.prototype.identity=M.prototype.Mf;M.prototype.add=M.prototype.kc;M.prototype.sub=M.prototype.Bf;M.prototype.scale=M.prototype.Ge;M.prototype.mul=M.prototype.Pd;M.prototype.addEq=M.prototype.lc;M.prototype.subEq=M.prototype.Jg;M.prototype.scaleEq=M.prototype.He;M.prototype.mulEq=M.prototype.be;M.prototype.prependScale=M.prototype.fe;M.prototype.appendScale=M.prototype.zc;M.prototype.prependRotation=M.prototype.de;M.prototype.appendRotation=M.prototype.qc;M.prototype.prependTranslation=M.prototype.ci;M.prototype.appendTranslation=M.prototype.Pa;M.prototype.prependScaleEq=M.prototype.me;M.prototype.appendScaleEq=M.prototype.Cc;M.prototype.prependRotationEq=M.prototype.ee;M.prototype.appendRotationEq=M.prototype.rc;M.prototype.prependTranslationEq=M.prototype.di;M.prototype.appendTranslationEq=M.prototype.ab;M.prototype.transpose=M.prototype.Mg;M.prototype.transposeEq=M.prototype.Ng;M.prototype.determinant=M.prototype.Hc;M.prototype.trace=M.prototype.Lg;M.prototype.inverse=M.prototype.bd;M.prototype.inverseEq=M.prototype.cd;M.prototype.lookAt=M.prototype.Kb;M.prototype.perspective=M.prototype.ce;M.prototype.ortho=M.prototype.bi;M.prototype.toArray=M.prototype.Kg;M.prototype.copyFrom=M.prototype.Zd;M.prototype.fromMat3=M.prototype.ad;M.prototype.fromTransform=M.prototype.sb;M.prototype.clone=M.prototype.clone;M.prototype.toString=M.prototype.toString;window.OIMO.MathUtil=Ba;Ba.abs=Ba.abs;Ba.sin=Ba.sin;Ba.cos=Ba.cos;Ba.tan=Ba.tan;Ba.asin=Ba.asin;Ba.acos=Ba.acos;Ba.atan=Ba.atan;Ba.safeAsin=Ba.fe;Ba.safeAcos=Ba.ee;Ba.atan2=Ba.atan2;Ba.sqrt=Ba.sqrt;Ba.clamp=Ba.zc;Ba.rand=Ba.be;Ba.randIn=Ba.ce;Ba.randVec3In=Ba.de;window.OIMO.Pool=Fb;Fb.prototype.vec3=Fb.prototype.zc;Fb.prototype.mat3=Fb.prototype.lc;Fb.prototype.mat4=Fb.prototype.qc;Fb.prototype.quat=Fb.prototype.rc;Fb.prototype.dispose=Fb.prototype.Pa;Fb.prototype.disposeVec3=Fb.prototype.kc;Fb.prototype.disposeMat3=Fb.prototype.ab;Fb.prototype.disposeMat4=Fb.prototype.sb;Fb.prototype.disposeQuat=Fb.prototype.Kb;window.OIMO.Quat=ha;ha.prototype.identity=ha.prototype.Mf;ha.prototype.init=ha.prototype.za;ha.prototype.add=ha.prototype.Pa;ha.prototype.sub=ha.prototype.Cc;ha.prototype.scale=ha.prototype.rc;ha.prototype.addEq=ha.prototype.ab;ha.prototype.subEq=ha.prototype.Hc;ha.prototype.scaleEq=ha.prototype.zc;ha.prototype.length=ha.prototype.length;ha.prototype.lengthSq=ha.prototype.kc;ha.prototype.dot=ha.prototype.sb;ha.prototype.normalized=ha.prototype.qc;ha.prototype.normalize=ha.prototype.lc;ha.prototype.setArc=ha.prototype.ad;ha.prototype.slerp=ha.prototype.bd;ha.prototype.copyFrom=ha.prototype.Zd;ha.prototype.clone=ha.prototype.clone;ha.prototype.fromMat3=ha.prototype.Kb;ha.prototype.toMat3=ha.prototype.cd;ha.prototype.toString=ha.prototype.toString;window.OIMO.Contact=pc;pc.prototype.getShape1=pc.prototype.kc;pc.prototype.getShape2=pc.prototype.lc;pc.prototype.isTouching=pc.prototype.Zj;pc.prototype.getManifold=pc.prototype.ab;pc.prototype.getContactConstraint=pc.prototype.Pa;pc.prototype.getPrev=pc.prototype.Kb;pc.prototype.getNext=pc.prototype.sb;window.OIMO.ContactLink=Cc;Cc.prototype.getContact=Cc.prototype.Pa;Cc.prototype.getOther=Cc.prototype.sb;Cc.prototype.getPrev=Cc.prototype.Kb;Cc.prototype.getNext=Cc.prototype.ab;window.OIMO.ContactManager=Fd;Fd.prototype.getNumContacts=Fd.prototype.ab;Fd.prototype.getContactList=Fd.prototype.Pa;window.OIMO.TimeStep=kj;window.OIMO.World=ra;ra.prototype.step=ra.prototype.be;ra.prototype.addRigidBody=ra.prototype.ab;ra.prototype.removeRigidBody=ra.prototype.ce;ra.prototype.addJoint=ra.prototype.Pa;ra.prototype.removeJoint=ra.prototype.sl;ra.prototype.setDebugDraw=ra.prototype.de;ra.prototype.getDebugDraw=ra.prototype.lc;ra.prototype.debugDraw=ra.prototype.sb;ra.prototype.rayCast=ra.prototype.Sd;ra.prototype.convexCast=ra.prototype.rf;ra.prototype.aabbTest=ra.prototype.eh;ra.prototype.getRigidBodyList=ra.prototype.cd;ra.prototype.getJointList=ra.prototype.rc;ra.prototype.getBroadPhase=ra.prototype.Kb;ra.prototype.getContactManager=ra.prototype.kc;ra.prototype.getNumRigidBodies=ra.prototype.ad;ra.prototype.getNumJoints=ra.prototype.Cc;ra.prototype.getNumShapes=ra.prototype.Pd;ra.prototype.getNumIslands=ra.prototype.zc;ra.prototype.getNumVelocityIterations=ra.prototype.bd;ra.prototype.setNumVelocityIterations=ra.prototype.me;ra.prototype.getNumPositionIterations=ra.prototype.Hc;ra.prototype.setNumPositionIterations=ra.prototype.fe;ra.prototype.getGravity=ra.prototype.qc;ra.prototype.setGravity=ra.prototype.ee;window.OIMO.AabbTestCallback=ed;ed.prototype.process=ed.prototype.td;window.OIMO.ContactCallback=Xc;Xc.prototype.beginContact=Xc.prototype.Pa;Xc.prototype.preSolve=Xc.prototype.sb;Xc.prototype.postSolve=Xc.prototype.$e;Xc.prototype.endContact=Xc.prototype.ab;window.OIMO.RayCastCallback=Mc;Mc.prototype.process=Mc.prototype.td;window.OIMO.RayCastClosest=wd;wd.prototype.clear=wd.prototype.clear;wd.prototype.process=wd.prototype.td;window.OIMO.DebugDraw=Hb;Hb.prototype.aabb=Hb.prototype.Pk;Hb.prototype.ellipse=Hb.prototype.ellipse;Hb.prototype.arc=Hb.prototype.arc;Hb.prototype.cone=Hb.prototype.Tl;Hb.prototype.cylinder=Hb.prototype.Wl;Hb.prototype.capsule=Hb.prototype.Rl;Hb.prototype.sphere=Hb.prototype.zm;Hb.prototype.box=Hb.prototype.Pl;Hb.prototype.rect=Hb.prototype.rect;Hb.prototype.point=Hb.prototype.ab;Hb.prototype.triangle=Hb.prototype.sb;Hb.prototype.line=Hb.prototype.Pa;window.OIMO.DebugDrawStyle=Re;window.OIMO.Performance=Rc;window.OIMO.ConstraintSolver=Kb;Kb.prototype.preSolveVelocity=Kb.prototype.jh;Kb.prototype.warmStart=Kb.prototype.sh;Kb.prototype.solveVelocity=Kb.prototype.nh;Kb.prototype.postSolveVelocity=Kb.prototype.vi;Kb.prototype.preSolvePosition=Kb.prototype.Gg;Kb.prototype.solvePositionSplitImpulse=Kb.prototype.mh;Kb.prototype.solvePositionNgs=Kb.prototype.lh;Kb.prototype.postSolve=Kb.prototype.$e;window.OIMO.PositionCorrectionAlgorithm=ec;window.OIMO.ContactConstraint=md;md.prototype.getShape1=md.prototype.ab;md.prototype.getShape2=md.prototype.sb;md.prototype.getManifold=md.prototype.Pa;md.prototype.isTouching=md.prototype.Zj;window.OIMO.Manifold=zc;zc.prototype.getNormal=zc.prototype.sb;zc.prototype.getNormalTo=zc.prototype.Kb;zc.prototype.getTangent=zc.prototype.qc;zc.prototype.getTangentTo=zc.prototype.rc;zc.prototype.getBinormal=zc.prototype.Pa;zc.prototype.getBinormalTo=zc.prototype.ab;zc.prototype.getPoints=zc.prototype.lc;zc.prototype.getNumPoints=zc.prototype.kc;window.OIMO.ManifoldPoint=bc;bc.prototype.getPosition1=bc.prototype.Kb;bc.prototype.getPosition1To=bc.prototype.kc;bc.prototype.getPosition2=bc.prototype.lc;bc.prototype.getPosition2To=bc.prototype.qc;bc.prototype.getDepth=bc.prototype.ab;bc.prototype.isWarmStarted=bc.prototype.zc;bc.prototype.getNormalImpulse=bc.prototype.sb;bc.prototype.getTangentImpulse=bc.prototype.rc;bc.prototype.getBinormalImpulse=bc.prototype.Pa;bc.prototype.isEnabled=bc.prototype.Cc;window.OIMO.Joint=L;L.prototype.getRigidBody1=L.prototype.me;L.prototype.getRigidBody2=L.prototype.Ge;L.prototype.getType=L.prototype.Jg;L.prototype.getAnchor1=L.prototype.ab;L.prototype.getAnchor2=L.prototype.Kb;L.prototype.getAnchor1To=L.prototype.sb;L.prototype.getAnchor2To=L.prototype.kc;L.prototype.getLocalAnchor1=L.prototype.be;L.prototype.getLocalAnchor2=L.prototype.de;L.prototype.getLocalAnchor1To=L.prototype.ce;L.prototype.getLocalAnchor2To=L.prototype.ee;L.prototype.getBasis1=L.prototype.Cc;L.prototype.getBasis2=L.prototype.ad;L.prototype.getBasis1To=L.prototype.Hc;L.prototype.getBasis2To=L.prototype.bd;L.prototype.getAllowCollision=L.prototype.Pa;L.prototype.setAllowCollision=L.prototype.Kg;L.prototype.getBreakForce=L.prototype.cd;L.prototype.setBreakForce=L.prototype.Lg;L.prototype.getBreakTorque=L.prototype.Pd;L.prototype.setBreakTorque=L.prototype.Mg;L.prototype.getPositionCorrectionAlgorithm=L.prototype.fe;L.prototype.setPositionCorrectionAlgorithm=L.prototype.Ng;L.prototype.getAppliedForce=L.prototype.lc;L.prototype.getAppliedForceTo=L.prototype.qc;L.prototype.getAppliedTorque=L.prototype.rc;L.prototype.getAppliedTorqueTo=L.prototype.zc;L.prototype.getPrev=L.prototype.Bf;L.prototype.getNext=L.prototype.He;window.OIMO.CylindricalJoint=Wa;Wa.prototype.getAxis1=Wa.prototype.vg;Wa.prototype.getAxis2=Wa.prototype.xg;Wa.prototype.getAxis1To=Wa.prototype.wg;Wa.prototype.getAxis2To=Wa.prototype.yg;Wa.prototype.getLocalAxis1=Wa.prototype.zg;Wa.prototype.getLocalAxis2=Wa.prototype.Bg;Wa.prototype.getLocalAxis1To=Wa.prototype.Ag;Wa.prototype.getLocalAxis2To=Wa.prototype.Cg;Wa.prototype.getTranslationalSpringDamper=Wa.prototype.un;Wa.prototype.getRotationalSpringDamper=Wa.prototype.mn;Wa.prototype.getTranslationalLimitMotor=Wa.prototype.tn;Wa.prototype.getRotationalLimitMotor=Wa.prototype.ln;Wa.prototype.getAngle=Wa.prototype.Xk;Wa.prototype.getTranslation=Wa.prototype.$k;window.OIMO.JointConfig=Fc;window.OIMO.CylindricalJointConfig=te;te.prototype.init=te.prototype.za;window.OIMO.JointLink=Oc;Oc.prototype.getContact=Oc.prototype.Pa;Oc.prototype.getOther=Oc.prototype.sb;Oc.prototype.getPrev=Oc.prototype.Kb;Oc.prototype.getNext=Oc.prototype.ab;window.OIMO.JointType=oc;window.OIMO.PrismaticJoint=Nb;Nb.prototype.getAxis1=Nb.prototype.vg;Nb.prototype.getAxis2=Nb.prototype.xg;Nb.prototype.getAxis1To=Nb.prototype.wg;Nb.prototype.getAxis2To=Nb.prototype.yg;Nb.prototype.getLocalAxis1=Nb.prototype.zg;Nb.prototype.getLocalAxis2=Nb.prototype.Bg;Nb.prototype.getLocalAxis1To=Nb.prototype.Ag;Nb.prototype.getLocalAxis2To=Nb.prototype.Cg;Nb.prototype.getSpringDamper=Nb.prototype.nj;Nb.prototype.getLimitMotor=Nb.prototype.Zk;Nb.prototype.getTranslation=Nb.prototype.$k;window.OIMO.PrismaticJointConfig=Dd;Dd.prototype.init=Dd.prototype.za;window.OIMO.RagdollJoint=Lb;Lb.prototype.getAxis1=Lb.prototype.vg;Lb.prototype.getAxis2=Lb.prototype.xg;Lb.prototype.getAxis1To=Lb.prototype.wg;Lb.prototype.getAxis2To=Lb.prototype.yg;Lb.prototype.getLocalAxis1=Lb.prototype.zg;Lb.prototype.getLocalAxis2=Lb.prototype.Bg;Lb.prototype.getLocalAxis1To=Lb.prototype.Ag;Lb.prototype.getLocalAxis2To=Lb.prototype.Cg;Lb.prototype.getTwistSpringDamper=Lb.prototype.yn;Lb.prototype.getTwistLimitMotor=Lb.prototype.xn;Lb.prototype.getSwingSpringDamper=Lb.prototype.sn;Lb.prototype.getSwingAxis=Lb.prototype.qn;Lb.prototype.getSwingAxisTo=Lb.prototype.rn;Lb.prototype.getSwingAngle=Lb.prototype.pn;Lb.prototype.getTwistAngle=Lb.prototype.wn;window.OIMO.RagdollJointConfig=Wd;Wd.prototype.init=Wd.prototype.za;window.OIMO.RevoluteJoint=Qb;Qb.prototype.getAxis1=Qb.prototype.vg;Qb.prototype.getAxis2=Qb.prototype.xg;Qb.prototype.getAxis1To=Qb.prototype.wg;Qb.prototype.getAxis2To=Qb.prototype.yg;Qb.prototype.getLocalAxis1=Qb.prototype.zg;Qb.prototype.getLocalAxis2=Qb.prototype.Bg;Qb.prototype.getLocalAxis1To=Qb.prototype.Ag;Qb.prototype.getLocalAxis2To=Qb.prototype.Cg;Qb.prototype.getSpringDamper=Qb.prototype.nj;Qb.prototype.getLimitMotor=Qb.prototype.Zk;Qb.prototype.getAngle=Qb.prototype.Xk;window.OIMO.RevoluteJointConfig=Ce;Ce.prototype.init=Ce.prototype.za;window.OIMO.RotationalLimitMotor=Jc;Jc.prototype.setLimits=Jc.prototype.Pa;Jc.prototype.setMotor=Jc.prototype.ab;Jc.prototype.clone=Jc.prototype.clone;window.OIMO.SphericalJoint=se;se.prototype.getSpringDamper=se.prototype.nj;window.OIMO.SphericalJointConfig=re;re.prototype.init=re.prototype.za;window.OIMO.SpringDamper=Mb;Mb.prototype.setSpring=Mb.prototype.Pa;Mb.prototype.setSymplecticEuler=Mb.prototype.ab;Mb.prototype.clone=Mb.prototype.clone;window.OIMO.TranslationalLimitMotor=Hc;Hc.prototype.setLimits=Hc.prototype.Pa;Hc.prototype.setMotor=Hc.prototype.ab;Hc.prototype.clone=Hc.prototype.clone;window.OIMO.UniversalJoint=vb;vb.prototype.getAxis1=vb.prototype.vg;vb.prototype.getAxis2=vb.prototype.xg;vb.prototype.getAxis1To=vb.prototype.wg;vb.prototype.getAxis2To=vb.prototype.yg;vb.prototype.getLocalAxis1=vb.prototype.zg;vb.prototype.getLocalAxis2=vb.prototype.Bg;vb.prototype.getLocalAxis1To=vb.prototype.Ag;vb.prototype.getLocalAxis2To=vb.prototype.Cg;vb.prototype.getSpringDamper1=vb.prototype.nn;vb.prototype.getSpringDamper2=vb.prototype.on;vb.prototype.getLimitMotor1=vb.prototype.jn;vb.prototype.getLimitMotor2=vb.prototype.kn;vb.prototype.getAngle1=vb.prototype.dn;vb.prototype.getAngle2=vb.prototype.en;window.OIMO.UniversalJointConfig=qe;qe.prototype.init=qe.prototype.za;window.OIMO.ConstraintSolverType=pe;window.OIMO.DirectJointConstraintSolver=Ec;Ec.prototype.preSolveVelocity=Ec.prototype.jh;Ec.prototype.warmStart=Ec.prototype.sh;Ec.prototype.solveVelocity=Ec.prototype.nh;Ec.prototype.postSolveVelocity=Ec.prototype.vi;Ec.prototype.preSolvePosition=Ec.prototype.Gg;Ec.prototype.solvePositionSplitImpulse=Ec.prototype.mh;Ec.prototype.solvePositionNgs=Ec.prototype.lh;Ec.prototype.postSolve=Ec.prototype.$e;window.OIMO.PgsContactConstraintSolver=Ub;Ub.prototype.preSolveVelocity=Ub.prototype.jh;Ub.prototype.warmStart=Ub.prototype.sh;Ub.prototype.solveVelocity=Ub.prototype.nh;Ub.prototype.preSolvePosition=Ub.prototype.Gg;Ub.prototype.solvePositionSplitImpulse=Ub.prototype.mh;Ub.prototype.solvePositionNgs=Ub.prototype.lh;Ub.prototype.postSolve=Ub.prototype.$e;window.OIMO.PgsJointConstraintSolver=dc;dc.prototype.preSolveVelocity=dc.prototype.jh;dc.prototype.warmStart=dc.prototype.sh;dc.prototype.solveVelocity=dc.prototype.nh;dc.prototype.postSolveVelocity=dc.prototype.vi;dc.prototype.preSolvePosition=dc.prototype.Gg;dc.prototype.solvePositionSplitImpulse=dc.prototype.mh;dc.prototype.solvePositionNgs=dc.prototype.lh;dc.prototype.postSolve=dc.prototype.$e;window.OIMO.MassData=Ne;window.OIMO.RigidBody=C;C.prototype.getPosition=C.prototype.Xl;C.prototype.getPositionTo=C.prototype.Zl;C.prototype.setPosition=C.prototype.sm;C.prototype.translate=C.prototype.vm;C.prototype.getRotation=C.prototype.bm;C.prototype.getRotationTo=C.prototype.gm;C.prototype.setRotation=C.prototype.tm;C.prototype.setRotationXyz=C.prototype.Wn;C.prototype.rotate=C.prototype.mm;C.prototype.rotateXyz=C.prototype.Hn;C.prototype.getOrientation=C.prototype.Ol;C.prototype.getOrientationTo=C.prototype.Ql;C.prototype.setOrientation=C.prototype.nm;C.prototype.getTransform=C.prototype.hm;C.prototype.getTransformTo=C.prototype.km;C.prototype.setTransform=C.prototype.um;C.prototype.getMass=C.prototype.He;C.prototype.getLocalInertia=C.prototype.ce;C.prototype.getLocalInertiaTo=C.prototype.de;C.prototype.getMassData=C.prototype.Bf;C.prototype.getMassDataTo=C.prototype.Jg;C.prototype.setMassData=C.prototype.Un;C.prototype.getRotationFactor=C.prototype.Mg;C.prototype.setRotationFactor=C.prototype.Vn;C.prototype.getLinearVelocity=C.prototype.Pd;C.prototype.getLinearVelocityTo=C.prototype.be;C.prototype.setLinearVelocity=C.prototype.Tn;C.prototype.getAngularVelocity=C.prototype.Cc;C.prototype.getAngularVelocityTo=C.prototype.Hc;C.prototype.setAngularVelocity=C.prototype.Ln;C.prototype.addLinearVelocity=C.prototype.ab;C.prototype.addAngularVelocity=C.prototype.Pa;C.prototype.applyImpulse=C.prototype.qc;C.prototype.applyLinearImpulse=C.prototype.rc;C.prototype.applyAngularImpulse=C.prototype.Kb;C.prototype.applyForce=C.prototype.kc;C.prototype.applyForceToCenter=C.prototype.lc;C.prototype.applyTorque=C.prototype.zc;C.prototype.getGravityScale=C.prototype.bd;C.prototype.setGravityScale=C.prototype.Rn;C.prototype.getLocalPoint=C.prototype.ee;C.prototype.getLocalPointTo=C.prototype.fe;C.prototype.getLocalVector=C.prototype.me;C.prototype.getLocalVectorTo=C.prototype.Ge;C.prototype.getWorldPoint=C.prototype.ci;C.prototype.getWorldPointTo=C.prototype.di;C.prototype.getWorldVector=C.prototype.xj;C.prototype.getWorldVectorTo=C.prototype.wl;C.prototype.getNumShapes=C.prototype.Nl;C.prototype.getShapeList=C.prototype.Ng;C.prototype.getNumContectLinks=C.prototype.Kg;C.prototype.getContactLinkList=C.prototype.ad;C.prototype.getNumJointLinks=C.prototype.Lg;C.prototype.getJointLinkList=C.prototype.cd;C.prototype.addShape=C.prototype.sb;C.prototype.removeShape=C.prototype.wm;C.prototype.getType=C.prototype.lm;C.prototype.setType=C.prototype.Em;C.prototype.wakeUp=C.prototype.Gm;C.prototype.sleep=C.prototype.Fm;C.prototype.getSleepTime=C.prototype.bi;C.prototype.setAutoSleep=C.prototype.Qn;C.prototype.getPrev=C.prototype.$l;C.prototype.getNext=C.prototype.vl;window.OIMO.RigidBodyConfig=Zj;window.OIMO.RigidBodyType=Qd;window.OIMO.Shape=pa;pa.prototype.getFriction=pa.prototype.qc;pa.prototype.setFriction=pa.prototype.me;pa.prototype.getRestitution=pa.prototype.Hc;pa.prototype.setRestitution=pa.prototype.He;pa.prototype.getLocalTransform=pa.prototype.zc;pa.prototype.getLocalTransformTo=pa.prototype.Cc;pa.prototype.getTransform=pa.prototype.Pd;pa.prototype.getTransformTo=pa.prototype.be;pa.prototype.setLocalTransform=pa.prototype.Ge;pa.prototype.getDensity=pa.prototype.lc;pa.prototype.setDensity=pa.prototype.fe;pa.prototype.getAabb=pa.prototype.Pa;pa.prototype.getAabbTo=pa.prototype.ab;pa.prototype.getGeometry=pa.prototype.rc;pa.prototype.getRigidBody=pa.prototype.ad;pa.prototype.getCollisionGroup=pa.prototype.sb;pa.prototype.setCollisionGroup=pa.prototype.ce;pa.prototype.getCollisionMask=pa.prototype.Kb;pa.prototype.setCollisionMask=pa.prototype.de;pa.prototype.getContactCallback=pa.prototype.kc;pa.prototype.setContactCallback=pa.prototype.ee;pa.prototype.getPrev=pa.prototype.cd;pa.prototype.getNext=pa.prototype.bd;window.OIMO.ShapeConfig=Ng})(window);
