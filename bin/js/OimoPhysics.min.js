/* OimoPhysics 1.1.2 (c) 2018 saharan, The MIT License */'use strict';(function(){function Ga(a){this.Cc=-1;this.ha=new Ja;this.pa=new Ja;this.a=new Ja;var b=a.position;this.ha.v=b.x;this.ha.A=b.y;this.ha.B=b.z;b=a.rotation;this.ha.o=b.e00;this.ha.f=b.e01;this.ha.h=b.e02;this.ha.i=b.e10;this.ha.m=b.e11;this.ha.j=b.e12;this.ha.l=b.e20;this.ha.g=b.e21;this.ha.s=b.e22;var b=this.pa,e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.hk=a.restitution;this.Xj=a.friction;this.Dk=a.density;this.Kb=a.geometry;this.Tj=a.collisionGroup;this.Uj=a.collisionMask;this.yd=a.contactCallback;this.u=new Sa;this.tb=null;this.rc=new u}function Pd(){}function D(a){this.Fi=this.Dc=this.ia=this.M=null;this.zg=0;this.kc=this.Ob=null;this.Ae=0;this.Ze=this.ze=null;this.kh=0;var b=a.linearVelocity;this.gb=b.x;this.hb=b.y;this.ib=b.z;b=a.angularVelocity;this.kb=b.x;this.lb=b.y;this.mb=b.z;this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0;this.pa=new Ja;this.a=new Ja;b=a.position;this.pa.v=b.x;this.pa.A=b.y;this.pa.B=b.z;b=a.rotation;this.pa.o=b.e00;this.pa.f=b.e01;this.pa.h=b.e02;this.pa.i=b.e10;this.pa.m=b.e11;this.pa.j=b.e12;this.pa.l=b.e20;this.pa.g=b.e21;this.pa.s=b.e22;var b=this.a,e=this.pa;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Lb=a.type;this.yb=0;this.Gb=!1;this.Bk=a.autoSleep;this.Y=this.X=this.W=this.V=this.U=this.T=this.S=this.R=this.P=this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Id=this.Hd=this.Gd=this.Fd=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.$a=this.Pc=0;this.$j=a.linearDamping;this.Qj=a.angularDamping;this.xf=this.wf=this.vf=this.Oh=this.Nh=this.Mh=0;this.N=new u(1,1,1);this.Nf=!1;this.eh=1;this.oc=null}function ql(){this.mass=0;this.localInertia=new P}function sc(a){Ib.call(this);this.$=a;this.info=new rl;this.ac=Array(F.maxJacobianRows);a=0;for(var b=this.ac.length;a<b;){var e=a++;this.ac[e]=new sl}}function ic(a){Ib.call(this);this.Ji=a;this.info=new Xl;this.ac=Array(F.maxManifoldPoints);a=0;for(var b=this.ac.length;a<b;){var e=a++;this.ac[e]=new Yl}}function tl(a){this.Ag=a;this.wk=Array(this.Ag);this.$a=Array(this.Ag);this.cj=Array(this.Ag);a=0;for(var b=this.Ag;a<b;){var e=a++;this.wk[e]=Array(this.Ag);this.$a[e]=Array(this.Ag);this.cj[e]=Array(this.Ag);for(var c=0,d=this.Ag;c<d;){var f=c++;this.wk[e][f]=0;this.$a[e][f]=0;this.cj[e][f]=0}}this.ak=1<<this.Ag;this.Sj=Array(this.ak);this.Ck=Array(this.ak);a=0;for(b=this.ak;a<b;){for(var c=e=a++,c=(c&85)+(c>>1&85),c=(c&51)+(c>>2&51),c=(c&15)+(c>>4&15),d=Array(c),f=0,h=c;f<h;){var l=f++;d[l]=Array(c);for(var g=0,k=c;g<k;){var m=g++;d[l][m]=0}}this.Sj[e]=!1;this.Ck[e]=d}}function uc(a){Ib.call(this);this.$=a;this.info=new rl;a=F.maxJacobianRows;this.ei=new tl(a);this.Se=new ul(a);this.ac=Array(a);for(var b=0,e=this.ac.length;b<e;){var c=b++;this.ac[c]=new sl}b=this.Se.Th.length;this.Ml=new dl(b);this.Ki=new dl(b);this.Qg=Array(a);this.Yh=Array(a);this.Cf=Array(a);this.Aj=Array(a);for(b=0;b<a;)e=b++,this.Qg[e]=0,this.Yh[e]=0,this.Cf[e]=0,this.Aj[e]=0}function dl(a){this.n=a;this.sc=Array(a);this.kf=Array(a);for(var b=0;b<a;){var e=b++;this.sc[e]=e}}function ul(a){this.On=a;this.jf=0;this.Th=Array(1<<a);this.cf=new Zl(a)}function Zl(a){this.size=a;this.Sc=0;this.uh=Array(a);this.zh=Array(a);this.ie=0;this.Mg=Array(a)}function vl(a){this.uh=Array(a);this.Mg=Array(a);this.zh=Array(a);this.il=Array(a);this.ie=this.Sc=0}function sl(){this.Ff=this.mass=this.pd=this.od=this.nd=this.md=this.ld=this.kd=this.vd=this.ud=this.td=this.sd=this.rd=this.qd=0}function Yl(){this.Bm=this.Am=this.zm=this.ym=this.he=this.rk=this.qk=this.pk=this.nk=this.mk=this.lk=this.xl=this.wl=this.vl=this.ul=this.tl=this.sl=this.Jj=this.Ij=this.Hj=this.Gj=this.Fj=this.Ej=this.Dl=this.Cl=this.Bl=this.Al=this.zl=this.yl=this.bg=this.ag=this.$f=this.Zf=this.Yf=this.Xf=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=0}function Ee(){}function rf(){jc.call(this);this.localAxis1=new u(1,0,0);this.localAxis2=new u(1,0,0);this.springDamper1=new Mb;this.springDamper2=new Mb;this.limitMotor1=new $b;this.limitMotor2=new $b}function $a(a){V.call(this,a,Sb.UNIVERSAL);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.Mc=b.x;this.Nc=b.y;this.Oc=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.Mc*this.Mc+this.Nc*this.Nc+this.Oc*this.Oc?(b=this.Mc*this.Mc+this.Nc*this.Nc+this.Oc*this.Oc,0<b&&(b=1/Math.sqrt(b)),this.Mc*=b,this.Nc*=b,this.Oc*=b):(this.Nc=this.Mc=0,this.Oc=1);var e=this.C.a,b=this.D.a,c,d,f,h,l,g,k,m,n,q,p,r,t;r=e.o*this.qa+e.f*this.ra+e.h*this.sa;t=e.i*this.qa+e.m*this.ra+e.j*this.sa;c=e.l*this.qa+e.g*this.ra+e.s*this.sa;var R,w;R=b.o*this.Mc+b.f*this.Nc+b.h*this.Oc;w=b.i*this.Mc+b.m*this.Nc+b.j*this.Oc;p=b.l*this.Mc+b.g*this.Nc+b.s*this.Oc;l=w*c-p*t;g=p*r-R*c;k=R*t-w*r;l*l+g*g+k*k||(l=r*r,g=t*t,k=c*c,l<g?l<k?(k=1/Math.sqrt(g+k),l=0,g=c*k,k*=-t):(k=1/Math.sqrt(l+g),l=t*k,g=-r*k,k=0):g<k?(k=1/Math.sqrt(k+l),l=-c*k,g=0,k*=r):(k=1/Math.sqrt(l+g),l=t*k,g=-r*k,k=0));d=t*k-c*g;f=c*l-r*k;h=r*g-t*l;m=g*p-k*w;n=k*R-l*p;q=l*w-g*R;var B,v;B=e.o*r+e.i*t+e.l*c;v=e.f*r+e.m*t+e.g*c;c=e.h*r+e.j*t+e.s*c;this.qa=B;this.ra=v;this.sa=c;c=e.o*l+e.i*g+e.l*k;r=e.f*l+e.m*g+e.g*k;t=e.h*l+e.j*g+e.s*k;this.Ab=c;this.Bb=r;this.Cb=t;c=e.o*d+e.i*f+e.l*h;r=e.f*d+e.m*f+e.g*h;e=e.h*d+e.j*f+e.s*h;this.lc=c;this.mc=r;this.nc=e;e=b.o*m+b.i*n+b.l*q;d=b.f*m+b.m*n+b.g*q;m=b.h*m+b.j*n+b.s*q;this.nb=e;this.ob=d;this.pb=m;e=b.o*l+b.i*g+b.l*k;m=b.f*l+b.m*g+b.g*k;l=b.h*l+b.j*g+b.s*k;this.gh=e;this.hh=m;this.ih=l;l=b.o*R+b.i*w+b.l*p;g=b.f*R+b.m*w+b.g*p;b=b.h*R+b.j*w+b.s*p;this.Mc=l;this.Nc=g;this.Oc=b;this.Oi=this.Pl=this.Ni=0;this.Km=this.Jm=this.Im=!1;this.Yk=a.springDamper1.clone();this.Zk=a.springDamper2.clone();this.Qk=a.limitMotor1.clone();this.Rk=a.limitMotor2.clone()}function yd(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function Mb(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function ag(){jc.call(this);this.springDamper=new Mb}function Qd(a){V.call(this,a,0);this.Ce=a.springDamper.clone()}function $b(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function Df(){jc.call(this);this.localAxis1=new u(1,0,0);this.localAxis2=new u(1,0,0);this.springDamper=new Mb;this.limitMotor=new $b}function Hb(a){V.call(this,a,1);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,c,d,f,h,l,g,k;c=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>c?(b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);l=e;e=d;var m=2*b;h=2*l;d=2*c;k=b*m;var n=l*h;f=c*d;c=b*h;g=l*d;l=b*d;var m=e*m,q=e*h;h=e*d;b=1-n-f;e=c-h;d=l+q;c+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,t=q*q;p<r?p<t?(p=1/Math.sqrt(r+t),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<t?(p=1/Math.sqrt(t+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;n=b*this.qa+e*this.ra+d*this.sa;m=c*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Ab+e*this.Bb+d*this.Cb;m=c*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.gh=n;this.hh=m;this.ih=q;b=b*this.lc+e*this.mc+d*this.nc;e=c*this.lc+f*this.mc+h*this.nc;d=l*this.lc+g*this.mc+k*this.nc;this.Mc=b;this.Nc=e;this.Oc=d;this.Fe=this.Ee=this.angle=0;this.da=new Ek(this);this.Ce=a.springDamper.clone();this.Rh=a.limitMotor.clone()}function Qf(){jc.call(this);this.localTwistAxis1=new u(1,0,0);this.localTwistAxis2=new u(1,0,0);this.localSwingAxis1=new u(0,1,0);this.twistSpringDamper=new Mb;this.swingSpringDamper=new Mb;this.twistLimitMotor=new $b;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function Za(a){V.call(this,a,Sb.RAGDOLL);var b=a.localTwistAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localSwingAxis1;this.Ab=b.x;this.Bb=b.y;this.Cb=b.z;b=a.localTwistAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;if(this.lc*this.lc+this.mc*this.mc+this.nc*this.nc)b=this.lc*this.lc+this.mc*this.mc+this.nc*this.nc,0<b&&(b=1/Math.sqrt(b)),this.lc*=b,this.mc*=b,this.nc*=b,this.Ab=this.mc*this.sa-this.nc*this.ra,this.Bb=this.nc*this.qa-this.lc*this.sa,this.Cb=this.lc*this.ra-this.mc*this.qa;else{var b=this.qa,e=this.ra,c=this.sa,d=b*b,f=e*e,h=c*c;d<f?d<h?(d=1/Math.sqrt(f+h),this.Ab=0,this.Bb=c*d,this.Cb=-e*d):(d=1/Math.sqrt(d+f),this.Ab=e*d,this.Bb=-b*d,this.Cb=0):f<h?(d=1/Math.sqrt(h+d),this.Ab=-c*d,this.Bb=0,this.Cb=b*d):(d=1/Math.sqrt(d+f),this.Ab=e*d,this.Bb=-b*d,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab}var l,g,k,m,d=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>d?(b=this.qa,e=this.ra,c=this.sa,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);k=e;var h=d,e=c,n=2*b;g=2*k;c=2*h;d=b*n;f=k*g;l=h*c;h=b*g;m=k*c;k=b*c;var n=e*n,q=e*g;g=e*c;b=1-f-l;e=h-g;c=k+q;h+=g;l=1-d-l;g=m-n;k-=q;m+=n;d=1-d-f;f=b*this.qa+e*this.ra+c*this.sa;n=h*this.qa+l*this.ra+g*this.sa;q=k*this.qa+m*this.ra+d*this.sa;this.nb=f;this.ob=n;this.pb=q;f=b*this.Ab+e*this.Bb+c*this.Cb;n=h*this.Ab+l*this.Bb+g*this.Cb;q=k*this.Ab+m*this.Bb+d*this.Cb;this.gh=f;this.hh=n;this.ih=q;b=b*this.lc+e*this.mc+c*this.nc;e=h*this.lc+l*this.mc+g*this.nc;c=k*this.lc+m*this.mc+d*this.nc;this.Mc=b;this.Nc=e;this.Oc=c;this.fl=a.twistSpringDamper.clone();this.el=a.twistLimitMotor.clone();this.$k=a.swingSpringDamper.clone();this.bk=a.maxSwingAngle1;this.ck=a.maxSwingAngle2;this.bk<F.minRagdollMaxSwingAngle&&(this.bk=F.minRagdollMaxSwingAngle);this.ck<F.minRagdollMaxSwingAngle&&(this.ck=F.minRagdollMaxSwingAngle);this.nl=new $b;this.nl.lowerLimit=-1;this.ii=this.hi=this.gi=this.le=this.ke=this.je=this.Nj=this.tj=this.kj=this.nl.upperLimit=0}function bg(){jc.call(this);this.localAxis1=new u(1,0,0);this.localAxis2=new u(1,0,0);this.limitMotor=new yd;this.springDamper=new Mb}function Vb(a){V.call(this,a,Sb.PRISMATIC);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,c,d,f,h,l,g,k;c=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>c?(b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);l=e;e=d;var m=2*b;h=2*l;d=2*c;k=b*m;var n=l*h;f=c*d;c=b*h;g=l*d;l=b*d;var m=e*m,q=e*h;h=e*d;b=1-n-f;e=c-h;d=l+q;c+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,t=q*q;p<r?p<t?(p=1/Math.sqrt(r+t),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<t?(p=1/Math.sqrt(t+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;n=b*this.qa+e*this.ra+d*this.sa;m=c*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Ab+e*this.Bb+d*this.Cb;m=c*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.gh=n;this.hh=m;this.ih=q;b=b*this.lc+e*this.mc+d*this.nc;e=c*this.lc+f*this.mc+h*this.nc;d=l*this.lc+g*this.mc+k*this.nc;this.Mc=b;this.Nc=e;this.Oc=d;this.da=new Ek(this);this.Fe=this.Ee=this.rh=this.Ef=this.Df=this.eg=0;this.Ce=a.springDamper.clone();this.Rh=a.limitMotor.clone()}function Sb(){}function Xc(a){this.Pk=a}function $l(){this.ub=this.ad=this.ta=0}function Ek(a){this.$=a;this.oe=this.ne=this.me=this.Sd=this.Rd=this.Qd=this.ed=this.dd=this.cd=0}function Fe(){jc.call(this);this.localAxis1=new u(1,0,0);this.localAxis2=new u(1,0,0);this.translationalLimitMotor=new yd;this.translationalSpringDamper=new Mb;this.rotationalLimitMotor=new $b;this.rotationalSpringDamper=new Mb}function jc(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new u;this.localAnchor2=new u;this.allowCollision=!1;this.solverType=F.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=F.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function sb(a){V.call(this,a,2);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,c,d,f,h,l,g,k;c=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-.999999999>c?(b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);l=e;e=d;var m=2*b;h=2*l;d=2*c;k=b*m;var n=l*h;f=c*d;c=b*h;g=l*d;l=b*d;var m=e*m,q=e*h;h=e*d;b=1-n-f;e=c-h;d=l+q;c+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,t=q*q;p<r?p<t?(p=1/Math.sqrt(r+t),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<t?(p=1/Math.sqrt(t+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.lc=this.ra*this.Cb-this.sa*this.Bb;this.mc=this.sa*this.Ab-this.qa*this.Cb;this.nc=this.qa*this.Bb-this.ra*this.Ab;n=b*this.qa+e*this.ra+d*this.sa;m=c*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Ab+e*this.Bb+d*this.Cb;m=c*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.gh=n;this.hh=m;this.ih=q;b=b*this.lc+e*this.mc+d*this.nc;e=c*this.lc+f*this.mc+h*this.nc;d=l*this.lc+g*this.mc+k*this.nc;this.Mc=b;this.Nc=e;this.Oc=d;this.Ef=this.Df=this.eg=this.Fe=this.Ee=this.angle=0;this.da=new Ek(this);this.dl=a.translationalSpringDamper.clone();this.cl=a.translationalLimitMotor.clone();this.Xk=a.rotationalSpringDamper.clone();this.Wk=a.rotationalLimitMotor.clone()}function V(a,b){this.rb=new Xc(this);this.sb=new Xc(this);this.Hc=F.defaultJointPositionCorrectionAlgorithm;this.Lb=b;this.oc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.Ak=a.allowCollision;this.Yi=a.breakForce;this.Zi=a.breakTorque;switch(a.solverType){case 0:this.jk=new sc(this);break;case 1:this.jk=new uc(this)}b=a.localAnchor1;this.dj=b.x;this.ej=b.y;this.fj=b.z;a=a.localAnchor2;this.gj=a.x;this.hj=a.y;this.ij=a.z;this.Oc=this.Nc=this.Mc=this.ih=this.hh=this.gh=this.pb=this.ob=this.nb=this.nc=this.mc=this.lc=this.Cb=this.Bb=this.Ab=this.sa=this.ra=this.qa=this.Tf=this.Sf=this.Rf=this.Qf=this.Pf=this.Of=this.Xb=this.Wb=this.Vb=this.Ub=this.Tb=this.Sb=0;this.Pb=Array(F.maxJacobianRows);a=0;for(b=F.maxJacobianRows;a<b;){var e=a++;this.Pb[e]=new $l}}function am(){this.Aa=new $d;this.fb=this.motorSpeed=this.Ha=this.Ia=this.Ma=this.Fa=0;this.ta=null}function rl(){this.Re=this.Qe=null;this.Ka=0;this.rows=Array(F.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new am}}function bm(){this.Ng=new $d;this.Lj=new $d;this.Kj=new $d;this.friction=this.Ma=this.Fa=0;this.ta=null}function Xl(){this.Re=this.Qe=null;this.Ka=0;this.rows=Array(F.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new bm}}function $d(){this.xc=this.ga=this.fa=this.ea=this.ca=this.ba=this.aa=this.Da=this.Ca=this.Ba=this.xa=this.wa=this.va=0}function el(a){this.Ja=a;this.Gl=0;this.Hl=Array(F.maxManifoldPoints);a=0;for(var b=F.maxManifoldPoints;a<b;){var e=a++;this.Hl[e]=new Wb}}function Wb(){this.Gc=this.Od=this.Nd=this.Md=this.Ld=this.Kd=this.Jd=this.gc=this.fc=this.ec=this.Fb=this.Eb=this.Db=this.sf=this.rf=this.qf=this.pf=this.nf=this.mf=0;this.ae=new wl;this.lf=this.Pe=!1;this.Cc=-1}function kc(){this.be=this.Xi=this.Wi=this.Vi=this.nj=this.mj=this.lj=this.yg=this.xg=this.wg=0;this.wc=Array(F.maxManifoldPoints);for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.wc[e]=new Wb}}function wl(){this.ff=this.ef=this.df=this.ub=this.yc=this.zc=this.bd=0}function zd(a){this.jk=new ic(this);this.Ja=a}function Xb(){}function Ib(){this.D=this.C=null;this.Nf=!1}function Ad(){}function xl(){this.basisColorZ=new u(0,0,1);this.basisColorY=new u(0,1,0);this.basisColorX=new u(1,0,0);this.basisLength=.5;this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new u(1,.1,.1);this.jointLineColor=new u(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new u(.2,.2,1);this.contactTangentColor=new u(.1,.8,.1);this.contactNormalColor=new u(1,.1,.1);this.disabledContactColor=new u(.5,.1,.1);this.newContactColor=new u(1,1,.1);this.contactColor4=new u(.8,.1,1);this.contactColor3=new u(.1,.8,.6);this.contactColor2=new u(1,.6,.1);this.contactColor=new u(1,.1,.1);this.pairColor=new u(1,1,.1);this.bvhNodeColor=new u(.4,.4,.4);this.aabbColor=new u(1,.1,.1);this.kinematicShapeColor=new u(1,.5,.1);this.staticShapeColor=new u(.7,.7,.7);this.sleepingShapeColor2=new u(.2,.8,.5);this.sleepingShapeColor1=new u(.3,.3,.8);this.sleepyShapeColor2=new u(.6,.8,.3);this.sleepyShapeColor1=new u(.5,.25,.6);this.shapeColor2=new u(1,.8,.1);this.shapeColor1=new u(.7,.2,.4)}function gf(){this.p=new Pb;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawBases=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.vk=Array(5);this.Fh=Array(5);this.xk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.vk[b]=Array(e);this.Fh[b]=Array(e);this.xk[b]=Array(e);for(e=0;8>e;){var c=e++,d=.7853981633974475*b,f=.7853981633974475*c;this.vk[b][c]=new u(Math.sin(d)*Math.cos(f),Math.cos(d),-Math.sin(d)*Math.sin(f));this.Fh[b][c]=new u;this.xk[b][c]=new u}}this.yj=Array(8);this.dm=Array(8);this.fe=Array(8);this.Xd=Array(8);this.Te=Array(8);for(a=0;8>a;)b=a++,this.yj[b]=new u(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.dm[b]=new u(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.fe[b]=new u,this.Xd[b]=new u,this.Te[b]=new u;this.style=new xl}function hf(){this.position=new u;this.normal=new u;this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1}function ej(){}function fl(){}function yl(){}function Wj(){this.u=new Sa;this.Ql=null}function gl(){this.Mi=new fj;this.vj=new Ja;this.eg=new u;this.Z=new u;this.em=this.xj=null}function hl(){this.Mi=new fj;this.vj=new u;this.end=new u;this.xj=null}function ab(a,b){null==a&&(a=2);switch(a){case 1:this.jc=new nc;break;case 2:this.jc=new gc}this.Kh=new Ge(this.jc);null==b&&(b=new u(0,-9.80665,0));this.Fk=new u(b.x,b.y,b.z);this.zi=this.Ph=this.Ei=this.uf=null;this.ek=this.Sk=this.zg=this.jj=0;this.Uk=10;this.Tk=5;this.gk=new hl;this.aj=new gl;this.yk=new Wj;this.vg=new zl;this.af=Array(F.islandInitialConstraintArraySize);this.ph=Array(F.islandInitialRigidBodyArraySize);this.Sh=new Al;this.Ga=new Pb;this.Xl=0}function Al(){this.invDt=this.dt=0;this.dtRatio=1}function zl(){this.Jf=Array(F.islandInitialRigidBodyArraySize);this.Kf=Array(F.islandInitialConstraintArraySize);this.Eh=Array(F.islandInitialConstraintArraySize);this.Dh=Array(F.islandInitialConstraintArraySize);this.vh=this.wh=this.If=this.Hf=0}function Ge(a){this.jc=a;this.Vm=new cg;this.Bi=0}function dd(){this.Qc=this.Zd=this.M=this.ia=null}function lc(){this.ia=this.M=null;this.rb=new dd;this.sb=new dd;this.Lh=this.D=this.C=this.$b=this.Zb=null;this.$i=new Bl;this.Wm=new ae;this.ik=this.Zj=!1;this.Ja=new kc;this.Zl=new el(this.Ja);this.Ye=new zd(this.Ja);this.Td=!1}function xa(a,b,e,c){null==c&&(c=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=c;xa.numCreations++}function Pb(){this.b=Array(256);this.c=0;this.bb=Array(256);this.eb=0;this.Lf=Array(256);this.dg=0;this.Wd=Array(256);this.ee=0}function Na(){}function L(a,b,e,c,d,f,h,l,g,k,m,n,q,p,r,t){null==t&&(t=1);null==r&&(r=0);null==p&&(p=0);null==q&&(q=0);null==n&&(n=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==d&&(d=0);null==c&&(c=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=t;L.numCreations++}function P(a,b,e,c,d,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==d&&(d=1);null==c&&(c=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;P.numCreations++}function be(){}function Mc(){}function dc(){this.Na=Array(4);this.jb=Array(4);this.qb=Array(4);this.uj=Array(3);this.uj[0]=new u(1,0,0);this.uj[1]=new u(0,1,0);this.uj[2]=new u(0,0,1);this.ao=new u;this.bo=new u;this.Tn=new u;this.Sn=new u;this.$n=new Ja;for(var a=0;4>a;){var b=a++;this.Na[b]=new u;this.jb[b]=new u;this.qb[b]=new u}this.dir=new u;this.closest=new u;this.closestPoint1=new u;this.closestPoint2=new u;this.Og=new il}function F(){}function Ja(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function u(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;u.numCreations++}function jl(){this.Il=new u}function ie(){this.xd=new u;this.jb=new u;this.qb=new u}function He(){this.id=++He.Mb;this.ia=this.M=null;this.dk=new u;this.bl=this.Wj=0;this.rj=!1;this.zb=Array(3);this.Ge=Array(3);this.We=Array(3);this.fi=new u;this.Ai=Array(3);this.Ai[0]=1;this.Ai[1]=2;this.Ai[2]=0}function il(){this.zb=Array(F.maxEPAVertices);this.mi=new u;this.Ne=0;this.Rc=this.jd=null;this.lh=0;this.bf=this.De=null}function Fk(){this.Sg=!1}function Rf(a){this.Sg=a}function Sg(a){this.Sg=a}function gj(){this.Sg=!1}function hj(){this.Sg=!1}function Bl(){}function Cl(){this.hc=this.Tc=this.Dj=this.w=0;this.Bc=Array(8);this.ic=Array(8);for(var a=0;8>a;){var b=a++;this.Bc[b]=new kl;this.ic[b]=new kl}}function kl(){this.Qa=this.Pa=this.Oa=this.y=this.x=0}function ij(){this.Sg=!1;this.Dg=new Cl}function Uc(a){this.Sg=a}function ll(){this.position1=new u;this.position2=new u;this.id=this.depth=0}function ae(){this.numPoints=0;this.normal=new u;this.points=Array(F.maxManifoldPoints);this.incremental=!1;for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.points[e]=new ll}}function cg(){this.Jb=Array(8);for(var a=0;6>a;){var b=a++;this.Jb[b]=Array(8)}a=new gj;this.Jb[0][0]=new Fk;this.Jb[0][1]=new Sg(!1);this.Jb[0][2]=a;this.Jb[0][3]=a;this.Jb[0][4]=new Rf(!1);this.Jb[0][5]=a;this.Jb[1][0]=new Sg(!0);this.Jb[1][1]=new ij;this.Jb[1][2]=a;this.Jb[1][3]=a;this.Jb[1][4]=a;this.Jb[1][5]=a;this.Jb[2][0]=a;this.Jb[2][1]=a;this.Jb[2][2]=a;this.Jb[2][3]=a;this.Jb[2][4]=a;this.Jb[2][5]=a;this.Jb[3][0]=a;this.Jb[3][1]=a;this.Jb[3][2]=a;this.Jb[3][3]=a;this.Jb[3][4]=a;this.Jb[3][5]=a;this.Jb[4][0]=new Rf(!0);this.Jb[4][1]=a;this.Jb[4][2]=a;this.Jb[4][3]=a;this.Jb[4][4]=new hj;this.Jb[4][5]=a;this.Jb[5][0]=a;this.Jb[5][1]=a;this.Jb[5][2]=a;this.Jb[5][3]=a;this.Jb[5][4]=a;this.Jb[5][5]=a}function Rd(a){wb.call(this,0);this.Rb=this.ab=a;this.Oe()}function fj(){this.position=new u;this.normal=new u;this.fraction=0}function Yc(){}function Sd(a,b){wb.call(this,2);this.ab=a;this.Ib=b;this.Oe()}function je(a){wb.call(this,5);this.Ne=a.length;this.zb=Array(this.Ne);this.Bg=Array(this.Ne);for(var b=0,e=this.Ne;b<e;){var c=b++;this.zb[c]=a[c];this.Bg[c]=new u}this.$l=!0;this.Oe()}function Td(a,b){wb.call(this,3);this.ab=a;this.Ib=b;this.uk=a/Math.sqrt(a*a+4*b*b);this.kk=2*b/Math.sqrt(a*a+4*b*b);this.Oe()}function ce(a,b){wb.call(this,4);this.ab=a;this.Ib=b;this.Rb=this.ab;this.Oe()}function ke(a){wb.call(this,1);this.Ke=a.x;this.Le=a.y;this.Me=a.z;this.Gk=a.x;this.Jk=this.Ik=this.Hk=0;this.Kk=a.y;this.Nk=this.Mk=this.Lk=0;this.Ok=a.z;this.Oe();a=a.x<a.y?a.z<a.x?a.z:a.x:a.z<a.y?a.z:a.y;this.Rb>.2*a&&(this.Rb=.2*a)}function Sa(){this.la=this.ka=this.ja=this.oa=this.na=this.ma=0}function ml(){this.Qb=null;this.fk=0;this.Gi=new Ql;this.gf=this.cg=this.Xc=null;this.fi=Array(1024)}function Ql(){this.Vl=0;this.Rj=!1}function Xj(a,b){Vc.call(this,a,b);this.Qh=null;this.jh=!1}function jj(){this.Uf=this.Vf=this.M=null;this.F=Array(2);this.La=0;this.Ea=null;this.O=0;this.tb=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function gc(){yb.call(this,2);this.Yj=!0;this.ge=new ml;this.hf=Array(1024);this.Gf=0}function nc(){yb.call(this,1);this.Yj=!1}function Ae(){this.nh=this.mh=null}function Vc(a,b){this.userData=a;this.Cc=b;this.M=this.ia=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function wh(){}function Nc(){}function nl(){wb.call(this,-1);this.min=new u;this.max=new u}function ol(){wb.call(this,-1)}function wb(a){ed.call(this,a);this.Rb=F.defaultGJKMargin;this.$l=!1}function ed(a){this.Lb=a;this.yf=0}function yb(a){this.Lb=a;this.Ci=0;this.ce=this.$e=this.Be=null;this.Yj=!1;this.oj=0;this.oh=null;this.Ul=0;this.Vj=new ol;this.u=new nl;this.Wf=new Ja;this.Z=new u;this.Mi=new fj}function gb(a,b){function e(){}e.prototype=a;a=new e;for(var c in b)a[c]=b[c];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}yb.prototype={Vh:function(){return null},Wh:function(){},wd:function(){},Mb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},Ii:function(){},ua:function(){return this.ce},Hb:function(){return this.Yj},cb:function(){return this.oj},Vd:function(){},Bf:function(){},qh:function(){}};ed.prototype={Oe:function(){},Nb:function(){},Di:function(){return!1},cb:function(){return this.Lb},ua:function(){return this.yf},Vd:function(a,b,e,c){var d,f,h,l;d=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;d-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.Di(e.o*d+e.i*f+e.l*a,e.f*d+e.m*f+e.g*a,e.h*d+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,c)){var g,k;b=c.position;d=b.x;f=b.y;h=b.z;b=c.normal;l=b.x;g=b.y;k=b.z;var m,n;m=e.o*d+e.f*f+e.h*h;n=e.i*d+e.m*f+e.j*h;h=e.l*d+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;d=m+e.v;f=n+e.A;h+=e.B;e=c.position;e.x=d;e.y=f;e.z=h;c=c.normal;c.x=b;c.y=a;c.z=l;return!0}return!1}};wb.ua=ed;wb.prototype=gb(ed.prototype,{sn:function(){return this.Rb},Xn:function(a){0>a&&(a=0);this.Rb=a},Pd:function(){},Vd:function(a,b,e,c){return this.$l?dc.cb.Vd(this,e,a,b,c):ed.prototype.Vd.call(this,a,b,e,c)}});ol.ua=wb;ol.prototype=gb(wb.prototype,{za:function(a,b,e){this.jn=a;var c,d,f;c=e.x;d=e.y;f=e.z;var h;e=b.o*c+b.i*d+b.l*f;h=b.f*c+b.m*d+b.g*f;b=b.h*c+b.j*d+b.s*f;c=this.Fl=new u;c.x=e;c.y=h;c.z=b;this.Rb=a.Rb},Pd:function(a,b){this.jn.Pd(a,b);var e=this.Fl;if(0<a.x*e.x+a.y*e.y+a.z*e.z){a=this.Fl;var e=b.y+a.y,c=b.z+a.z;b.x+=a.x;b.y=e;b.z=c}}});nl.ua=wb;nl.prototype=gb(wb.prototype,{Pd:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z}});Nc.prototype={process:function(){}};Vc.prototype={Hb:function(){return this.Cc},ua:function(){var a=new Sa;a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I;return a},cb:function(a){a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I}};Ae.prototype={ua:function(){return this.mh},cb:function(){return this.nh},Hb:function(){return this.M}};nc.ua=yb;nc.prototype=gb(yb.prototype,{Vh:function(a,b){a=new Vc(a,this.Ul++);this.Ci++;null==this.Be?this.Be=a:(this.$e.M=a,a.ia=this.$e);this.$e=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;return a},Wh:function(a){this.Ci--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Be&&(this.Be=this.Be.M);a==this.$e&&(this.$e=this.$e.ia);a.M=null;a.ia=null;a.userData=null},wd:function(a,b){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la},Ii:function(){var a=this.ce;if(null!=a){for(;a.mh=null,a.nh=null,a=a.M,null!=a;);this.ce.M=this.oh;this.oh=this.ce;this.ce=null}this.oj=0;for(a=this.Be;null!=a;){for(var b=a.M,e=a.M;null!=e;){var c=e.M;this.oj++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var d=this.oh;null!=d?(this.oh=d.M,d.M=null):d=new Ae;null!=this.ce&&(d.M=this.ce);this.ce=d;d.mh=a;d.nh=e}e=c}a=b}},Vd:function(a,b,e){var c,d,f,h;c=a.x;d=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.Be;null!=l;){var g=l.M,k=c,m=d,n=a,q=f,p=h,r=b,t=k<q?k:q,R=m<p?m:p,w=n<r?n:r,B=m>p?m:p,v=n>r?n:r,C=l.J,U=l.K,A=l.L,E=l.G,z=l.H,u=l.I;if(C>(k>q?k:q)||E<t||U>B||z<R||A>v||u<w)n=!1;else{var q=q-k,p=p-m,I=r-n,r=0>q?-q:q,t=0>p?-p:p,B=0>I?-I:I,R=.5*(E-C),w=.5*(z-U),v=.5*(u-A),k=k-.5*(E+C),m=m-.5*(z+U),n=n-.5*(u+A),A=m*I-n*p;0<(0>A?-A:A)-(w*B+v*t)?n=!0:(n=n*q-k*I,n=0<(0>n?-n:n)-(v*r+R*B));n?n=!0:(n=k*p-m*q,n=0<(0>n?-n:n)-(R*t+w*r));n=n?!1:!0}n&&e.process(l);l=g}},Bf:function(a,b,e,c){for(var d=this.Be;null!=d;){var f=d.M,h=this.u.min;h.x=d.J;h.y=d.K;h.z=d.L;h=this.u.max;h.x=d.G;h.y=d.H;h.z=d.I;this.Vj.za(a,b,e);h=dc.cb;0==h.zj(this.Vj,this.u,b,this.Wf,null,!1)&&0>=h.distance&&c.process(d);d=f}},qh:function(a,b){for(var e=this.Be;null!=e;){var c=e.M;a.ma<e.G&&a.ja>e.J&&a.na<e.H&&a.ka>e.K&&a.oa<e.I&&a.la>e.L&&b.process(e);e=c}}});gc.ua=yb;gc.prototype=gb(yb.prototype,{sh:function(a,b){this.oj++;var e=0==a.O,c=0==b.O;a==b?e||(this.sh(a.F[0],b),this.sh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&c?(a=a.tb,b=b.tb,e=this.oh,null!=e?(this.oh=e.M,e.M=null):e=new Ae,null!=this.ce&&(e.M=this.ce),this.ce=e,e.mh=a,e.nh=b):c||a.O>b.O?(this.sh(a.F[0],b),this.sh(a.F[1],b)):(this.sh(b.F[0],a),this.sh(b.F[1],a)))},Jl:function(a,b,e,c,d,f,h,l){var g=a.J,k=a.K,m=a.L,n=a.G,q=a.H,p=a.I,r;if(g>(b>d?b:d)||n<(b<d?b:d)||k>(e>f?e:f)||q<(e<f?e:f)||m>(c>h?c:h)||p<(c<h?c:h))r=!1;else{var t=d-b,R=f-e,w=h-c;r=0>t?-t:t;var B=0>R?-R:R,v=0>w?-w:w,C=.5*(n-g),U=.5*(q-k),A=.5*(p-m),g=b-.5*(n+g),k=e-.5*(q+k),m=c-.5*(p+m),p=k*w-m*R;0<(0>p?-p:p)-(U*v+A*B)?v=!0:(w=m*t-g*w,v=0<(0>w?-w:w)-(A*r+C*v));v?r=!0:(t=g*R-k*t,r=0<(0>t?-t:t)-(C*B+U*r));r=r?!1:!0}r&&(0==a.O?l.process(a.tb):(this.Jl(a.F[0],b,e,c,d,f,h,l),this.Jl(a.F[1],b,e,c,d,f,h,l)))},ml:function(a,b,e,c,d){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.Vj.za(b,e,c);f=dc.cb;0==f.zj(this.Vj,this.u,e,this.Wf,null,!1)&&0>=f.distance&&(0==a.O?d.process(a.tb):(this.ml(a.F[0],b,e,c,d),this.ml(a.F[1],b,e,c,d)))},hl:function(a,b,e){a.J<b.ja&&a.G>b.ma&&a.K<b.ka&&a.H>b.na&&a.L<b.la&&a.I>b.oa&&(0==a.O?e.process(a.tb):(this.hl(a.F[0],b,e),this.hl(a.F[1],b,e)))},Vh:function(a,b){a=new Xj(a,this.Ul++);this.Ci++;null==this.Be?this.Be=a:(this.$e.M=a,a.ia=this.$e);this.$e=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.ge;var e=b.Xc;null!=e?(b.Xc=e.M,e.M=null):e=new jj;var c=e;c.tb=a;a.Qh=c;c.J=a.J;c.K=a.K;c.L=a.L;c.G=a.G;c.H=a.H;c.I=a.I;b.fk++;null==b.cg?b.cg=c:(b.gf.Uf=c,c.Vf=b.gf);b.gf=c;if(null==b.Qb)b.Qb=c;else{for(var d=b.Qb;0<d.O&&(e=b.Gi.Sl(d,c),-1!=e);)d=d.F[e];var f=d.Ea,e=b.Xc;null!=e?(b.Xc=e.M,e.M=null):e=new jj;if(null==f)b.Qb=e;else{var h=d.La;f.F[h]=e;e.Ea=f;e.La=h}f=d.La;e.F[f]=d;d.Ea=e;d.La=f;d=d.La^1;e.F[d]=c;c.Ea=e;for(c.La=d;null!=e;){if(b.Gi.Rj&&!(2>e.O)){var c=e.Ea,f=e.F[0],h=e.F[1],l=f.O-h.O,d=e.La;1<l?(h=f.F[0],l=f.F[1],h.O>l.O?(f.F[1]=e,e.Ea=f,e.La=1,e.F[0]=l,l.Ea=e,l.La=0):(f.F[0]=e,e.Ea=f,e.La=0,e.F[0]=h,h.Ea=e,h.La=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].O,l=f.F[1].O,f.O=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].O,l=e.F[1].O,e.O=(h>l?h:l)+1,null!=c?(c.F[d]=f,f.Ea=c,f.La=d):(b.Qb=f,f.Ea=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.O>l.O?(h.F[1]=e,e.Ea=h,e.La=1,e.F[1]=l,l.Ea=e,l.La=1):(h.F[0]=e,e.Ea=h,e.La=0,e.F[1]=f,f.Ea=e,f.La=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].O,l=h.F[1].O,h.O=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].O,l=e.F[1].O,e.O=(f>l?f:l)+1,null!=c?(c.F[d]=h,h.Ea=c,h.La=d):(b.Qb=h,h.Ea=null),e=h)}c=e.F[0].O;d=e.F[1].O;e.O=(c>d?c:d)+1;c=e.F[0];d=e.F[1];e.J=c.J<d.J?c.J:d.J;e.K=c.K<d.K?c.K:d.K;e.L=c.L<d.L?c.L:d.L;e.G=c.G>d.G?c.G:d.G;e.H=c.H>d.H?c.H:d.H;e.I=c.I>d.I?c.I:d.I;e=e.Ea}}if(!a.jh){a.jh=!0;if(this.hf.length==this.Gf){b=Array(this.Gf<<1);e=0;for(c=this.Gf;e<c;)d=e++,b[d]=this.hf[d],this.hf[d]=null;this.hf=b}this.hf[this.Gf++]=a}return a},Wh:function(a){this.Ci--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Be&&(this.Be=this.Be.M);a==this.$e&&(this.$e=this.$e.ia);a.M=null;a.ia=null;b=this.ge;e=a.Qh;b.fk--;var c=e.Vf,d=e.Uf;null!=c&&(c.Uf=d);null!=d&&(d.Vf=c);e==b.cg&&(b.cg=b.cg.Uf);e==b.gf&&(b.gf=b.gf.Vf);e.Uf=null;e.Vf=null;if(b.Qb==e)b.Qb=null;else{var c=e.Ea,d=c.F[e.La^1],f=c.Ea;if(null==f)d.Ea=null,d.La=0,b.Qb=d,c.F[0]=null,c.F[1]=null,c.La=0,c.Ea=null,c.O=0,c.tb=null,c.M=b.Xc,b.Xc=c;else{var h=c.La;f.F[h]=d;d.Ea=f;d.La=h;c.F[0]=null;c.F[1]=null;c.La=0;c.Ea=null;c.O=0;c.tb=null;c.M=b.Xc;b.Xc=c;for(c=f;null!=c;){if(b.Gi.Rj&&!(2>c.O)){var d=c.Ea,h=c.F[0],l=c.F[1],g=h.O-l.O,f=c.La;1<g?(l=h.F[0],g=h.F[1],l.O>g.O?(h.F[1]=c,c.Ea=h,c.La=1,c.F[0]=g,g.Ea=c,g.La=0):(h.F[0]=c,c.Ea=h,c.La=0,c.F[0]=l,l.Ea=c,l.La=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].O,g=h.F[1].O,h.O=(l>g?l:g)+1,l=c.F[0],g=c.F[1],c.J=l.J<g.J?l.J:g.J,c.K=l.K<g.K?l.K:g.K,c.L=l.L<g.L?l.L:g.L,c.G=l.G>g.G?l.G:g.G,c.H=l.H>g.H?l.H:g.H,c.I=l.I>g.I?l.I:g.I,l=c.F[0].O,g=c.F[1].O,c.O=(l>g?l:g)+1,null!=d?(d.F[f]=h,h.Ea=d,h.La=f):(b.Qb=h,h.Ea=null),c=h):-1>g&&(h=l.F[0],g=l.F[1],h.O>g.O?(l.F[1]=c,c.Ea=l,c.La=1,c.F[1]=g,g.Ea=c,g.La=1):(l.F[0]=c,c.Ea=l,c.La=0,c.F[1]=h,h.Ea=c,h.La=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].O,g=l.F[1].O,l.O=(h>g?h:g)+1,h=c.F[0],g=c.F[1],c.J=h.J<g.J?h.J:g.J,c.K=h.K<g.K?h.K:g.K,c.L=h.L<g.L?h.L:g.L,c.G=h.G>g.G?h.G:g.G,c.H=h.H>g.H?h.H:g.H,c.I=h.I>g.I?h.I:g.I,h=c.F[0].O,g=c.F[1].O,c.O=(h>g?h:g)+1,null!=d?(d.F[f]=l,l.Ea=d,l.La=f):(b.Qb=l,l.Ea=null),c=l)}d=c.F[0].O;f=c.F[1].O;c.O=(d>f?d:f)+1;d=c.F[0];f=c.F[1];c.J=d.J<f.J?d.J:f.J;c.K=d.K<f.K?d.K:f.K;c.L=d.L<f.L?d.L:f.L;c.G=d.G>f.G?d.G:f.G;c.H=d.H>f.H?d.H:f.H;c.I=d.I>f.I?d.I:f.I;c=c.Ea}}}a.Qh=null;e.F[0]=null;e.F[1]=null;e.La=0;e.Ea=null;e.O=0;e.tb=null;e.M=b.Xc;b.Xc=e;a.userData=null;a.M=null;a.ia=null;a.jh&&(a.jh=!1)},wd:function(a,b,e){if(!(a.J<=b.ma&&a.G>=b.ja&&a.K<=b.na&&a.H>=b.ka&&a.L<=b.oa&&a.I>=b.la)){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var c;b=e.x;c=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<c?0:c;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>c?0:c;a.I+=0>e?0:e}if(!a.jh){a.jh=!0;if(this.hf.length==this.Gf){e=Array(this.Gf<<1);b=0;for(c=this.Gf;b<c;){var d=b++;e[d]=this.hf[d];this.hf[d]=null}this.hf=e}this.hf[this.Gf++]=a}}},Ii:function(){var a=this.ce;if(null!=a){for(;a.mh=null,a.nh=null,a=a.M,null!=a;);this.ce.M=this.oh;this.oh=this.ce;this.ce=null}this.oj=0;if(!(2>this.Ci)){for(var b=this.Gf/this.Ci<F.bvhIncrementalCollisionThreshold,e=0,c=this.Gf;e<c;){var d=e++,f=this.hf[d];if(f.jh){var h=this.ge,l=f.Qh;h.fk--;var g=l.Vf,k=l.Uf;null!=g&&(g.Uf=k);null!=k&&(k.Vf=g);l==h.cg&&(h.cg=h.cg.Uf);l==h.gf&&(h.gf=h.gf.Vf);l.Uf=null;l.Vf=null;if(h.Qb==l)h.Qb=null;else{var m=l.Ea,n=m.F[l.La^1],q=m.Ea;if(null==q)n.Ea=null,n.La=0,h.Qb=n,m.M=null,m.La=0,m.F[0]=null,m.F[1]=null,m.La=0,m.Ea=null,m.O=0,m.tb=null,m.M=h.Xc,h.Xc=m;else{n.Ea=q;var p=m.La;q.F[p]=n;n.Ea=q;n.La=p;m.M=null;m.La=0;m.F[0]=null;m.F[1]=null;m.La=0;m.Ea=null;m.O=0;m.tb=null;m.M=h.Xc;h.Xc=m;for(var r=q;null!=r;){if(h.Gi.Rj&&!(2>r.O)){var t=r.Ea,R=r.F[0],w=r.F[1],B=R.O-w.O,v=r.La;if(1<B){var C=R.F[0],U=R.F[1];if(C.O>U.O){R.F[1]=r;r.Ea=R;r.La=1;r.F[0]=U;U.Ea=r;U.La=0;var A=R.F[0],E=R.F[1];R.J=A.J<E.J?A.J:E.J;R.K=A.K<E.K?A.K:E.K;R.L=A.L<E.L?A.L:E.L;R.G=A.G>E.G?A.G:E.G;R.H=A.H>E.H?A.H:E.H;R.I=A.I>E.I?A.I:E.I;var z=R.F[0].O,u=R.F[1].O;R.O=(z>u?z:u)+1;var I=r.F[0],J=r.F[1];r.J=I.J<J.J?I.J:J.J;r.K=I.K<J.K?I.K:J.K;r.L=I.L<J.L?I.L:J.L;r.G=I.G>J.G?I.G:J.G;r.H=I.H>J.H?I.H:J.H;r.I=I.I>J.I?I.I:J.I;var Gb=r.F[0].O,Be=r.F[1].O;r.O=(Gb>Be?Gb:Be)+1}else{R.F[0]=r;r.Ea=R;r.La=0;r.F[0]=C;C.Ea=r;C.La=0;var D=R.F[0],da=R.F[1];R.J=D.J<da.J?D.J:da.J;R.K=D.K<da.K?D.K:da.K;R.L=D.L<da.L?D.L:da.L;R.G=D.G>da.G?D.G:da.G;R.H=D.H>da.H?D.H:da.H;R.I=D.I>da.I?D.I:da.I;var Rl=R.F[0].O,rd=R.F[1].O;R.O=(Rl>rd?Rl:rd)+1;var xb=r.F[0],Ka=r.F[1];r.J=xb.J<Ka.J?xb.J:Ka.J;r.K=xb.K<Ka.K?xb.K:Ka.K;r.L=xb.L<Ka.L?xb.L:Ka.L;r.G=xb.G>Ka.G?xb.G:Ka.G;r.H=xb.H>Ka.H?xb.H:Ka.H;r.I=xb.I>Ka.I?xb.I:Ka.I;var Da=r.F[0].O,ma=r.F[1].O;r.O=(Da>ma?Da:ma)+1}null!=t?(t.F[v]=R,R.Ea=t,R.La=v):(h.Qb=R,R.Ea=null);r=R}else if(-1>B){var Q=w.F[0],P=w.F[1];if(Q.O>P.O){w.F[1]=r;r.Ea=w;r.La=1;r.F[1]=P;P.Ea=r;P.La=1;var Ha=w.F[0],Ea=w.F[1];w.J=Ha.J<Ea.J?Ha.J:Ea.J;w.K=Ha.K<Ea.K?Ha.K:Ea.K;w.L=Ha.L<Ea.L?Ha.L:Ea.L;w.G=Ha.G>Ea.G?Ha.G:Ea.G;w.H=Ha.H>Ea.H?Ha.H:Ea.H;w.I=Ha.I>Ea.I?Ha.I:Ea.I;var Ua=w.F[0].O,ua=w.F[1].O;w.O=(Ua>ua?Ua:ua)+1;var oa=r.F[0],Wa=r.F[1];r.J=oa.J<Wa.J?oa.J:Wa.J;r.K=oa.K<Wa.K?oa.K:Wa.K;r.L=oa.L<Wa.L?oa.L:Wa.L;r.G=oa.G>Wa.G?oa.G:Wa.G;r.H=oa.H>Wa.H?oa.H:Wa.H;r.I=oa.I>Wa.I?oa.I:Wa.I;var G=r.F[0].O,Qa=r.F[1].O;r.O=(G>Qa?G:Qa)+1}else{w.F[0]=r;r.Ea=w;r.La=0;r.F[1]=Q;Q.Ea=r;Q.La=1;var X=w.F[0],M=w.F[1];w.J=X.J<M.J?X.J:M.J;w.K=X.K<M.K?X.K:M.K;w.L=X.L<M.L?X.L:M.L;w.G=X.G>M.G?X.G:M.G;w.H=X.H>M.H?X.H:M.H;w.I=X.I>M.I?X.I:M.I;var N=w.F[0].O,ca=w.F[1].O;w.O=(N>ca?N:ca)+1;var Y=r.F[0],S=r.F[1];r.J=Y.J<S.J?Y.J:S.J;r.K=Y.K<S.K?Y.K:S.K;r.L=Y.L<S.L?Y.L:S.L;r.G=Y.G>S.G?Y.G:S.G;r.H=Y.H>S.H?Y.H:S.H;r.I=Y.I>S.I?Y.I:S.I;var aa=r.F[0].O,y=r.F[1].O;r.O=(aa>y?aa:y)+1}null!=t?(t.F[v]=w,w.Ea=t,w.La=v):(h.Qb=w,w.Ea=null);r=w}}var fa=r.F[0].O,T=r.F[1].O;r.O=(fa>T?fa:T)+1;var pa=r.F[0],sa=r.F[1];r.J=pa.J<sa.J?pa.J:sa.J;r.K=pa.K<sa.K?pa.K:sa.K;r.L=pa.L<sa.L?pa.L:sa.L;r.G=pa.G>sa.G?pa.G:sa.G;r.H=pa.H>sa.H?pa.H:sa.H;r.I=pa.I>sa.I?pa.I:sa.I;r=r.Ea}}}f.Qh=null;l.M=null;l.La=0;l.F[0]=null;l.F[1]=null;l.La=0;l.Ea=null;l.O=0;l.tb=null;l.M=h.Xc;h.Xc=l;var va=this.ge,ra=va.Xc;null!=ra?(va.Xc=ra.M,ra.M=null):ra=new jj;var ka=ra;ka.tb=f;f.Qh=ka;ka.J=f.J;ka.K=f.K;ka.L=f.L;ka.G=f.G;ka.H=f.H;ka.I=f.I;va.fk++;null==va.cg?va.cg=ka:(va.gf.Uf=ka,ka.Vf=va.gf);va.gf=ka;if(null==va.Qb)va.Qb=ka;else{for(var Z=va.Qb;0<Z.O;){var na=va.Gi.Sl(Z,ka);if(-1==na)break;else Z=Z.F[na]}var Aa=Z.Ea,ya=va.Xc;null!=ya?(va.Xc=ya.M,ya.M=null):ya=new jj;var K=ya;if(null==Aa)va.Qb=K;else{var Ba=Z.La;Aa.F[Ba]=K;K.Ea=Aa;K.La=Ba}var ha=Z.La;K.F[ha]=Z;Z.Ea=K;Z.La=ha;var ba=Z.La^1;K.F[ba]=ka;ka.Ea=K;for(ka.La=ba;null!=K;){if(va.Gi.Rj&&!(2>K.O)){var Va=K.Ea,ga=K.F[0],O=K.F[1],za=ga.O-O.O,ob=K.La;if(1<za){var ja=ga.F[0],V=ga.F[1];if(ja.O>V.O){ga.F[1]=K;K.Ea=ga;K.La=1;K.F[0]=V;V.Ea=K;V.La=0;var L=ga.F[0],fb=ga.F[1];ga.J=L.J<fb.J?L.J:fb.J;ga.K=L.K<fb.K?L.K:fb.K;ga.L=L.L<fb.L?L.L:fb.L;ga.G=L.G>fb.G?L.G:fb.G;ga.H=L.H>fb.H?L.H:fb.H;ga.I=L.I>fb.I?L.I:fb.I;var Db=ga.F[0].O,ta=ga.F[1].O;ga.O=(Db>ta?Db:ta)+1;var wa=K.F[0],Fa=K.F[1];K.J=wa.J<Fa.J?wa.J:Fa.J;K.K=wa.K<Fa.K?wa.K:Fa.K;K.L=wa.L<Fa.L?wa.L:Fa.L;K.G=wa.G>Fa.G?wa.G:Fa.G;K.H=wa.H>Fa.H?wa.H:Fa.H;K.I=wa.I>Fa.I?wa.I:Fa.I;var eb=K.F[0].O,Ia=K.F[1].O;K.O=(eb>Ia?eb:Ia)+1}else{ga.F[0]=K;K.Ea=ga;K.La=0;K.F[0]=ja;ja.Ea=K;ja.La=0;var pb=ga.F[0],Oa=ga.F[1];ga.J=pb.J<Oa.J?pb.J:Oa.J;ga.K=pb.K<Oa.K?pb.K:Oa.K;ga.L=pb.L<Oa.L?pb.L:Oa.L;ga.G=pb.G>Oa.G?pb.G:Oa.G;ga.H=pb.H>Oa.H?pb.H:Oa.H;ga.I=pb.I>Oa.I?pb.I:Oa.I;var la=ga.F[0].O,Ca=ga.F[1].O;ga.O=(la>Ca?la:Ca)+1;var Xa=K.F[0],Ra=K.F[1];K.J=Xa.J<Ra.J?Xa.J:Ra.J;K.K=Xa.K<Ra.K?Xa.K:Ra.K;K.L=Xa.L<Ra.L?Xa.L:Ra.L;K.G=Xa.G>Ra.G?Xa.G:Ra.G;K.H=Xa.H>Ra.H?Xa.H:Ra.H;K.I=Xa.I>Ra.I?Xa.I:Ra.I;var hb=K.F[0].O,Jb=K.F[1].O;K.O=(hb>Jb?hb:Jb)+1}null!=Va?(Va.F[ob]=ga,ga.Ea=Va,ga.La=ob):(va.Qb=ga,ga.Ea=null);K=ga}else if(-1>za){var cb=O.F[0],ub=O.F[1];if(cb.O>ub.O){O.F[1]=K;K.Ea=O;K.La=1;K.F[1]=ub;ub.Ea=K;ub.La=1;var jb=O.F[0],mb=O.F[1];O.J=jb.J<mb.J?jb.J:mb.J;O.K=jb.K<mb.K?jb.K:mb.K;O.L=jb.L<mb.L?jb.L:mb.L;O.G=jb.G>mb.G?jb.G:mb.G;O.H=jb.H>mb.H?jb.H:mb.H;O.I=jb.I>mb.I?jb.I:mb.I;var Yb=O.F[0].O,pc=O.F[1].O;O.O=(Yb>pc?Yb:pc)+1;var Ya=K.F[0],La=K.F[1];K.J=Ya.J<La.J?Ya.J:La.J;K.K=Ya.K<La.K?Ya.K:La.K;K.L=Ya.L<La.L?Ya.L:La.L;K.G=Ya.G>La.G?Ya.G:La.G;K.H=Ya.H>La.H?Ya.H:La.H;K.I=Ya.I>La.I?Ya.I:La.I;var vb=K.F[0].O,H=K.F[1].O;K.O=(vb>H?vb:H)+1}else{O.F[0]=K;K.Ea=O;K.La=0;K.F[1]=cb;cb.Ea=K;cb.La=1;var db=O.F[0],kb=O.F[1];O.J=db.J<kb.J?db.J:kb.J;O.K=db.K<kb.K?db.K:kb.K;O.L=db.L<kb.L?db.L:kb.L;O.G=db.G>kb.G?db.G:kb.G;O.H=db.H>kb.H?db.H:kb.H;O.I=db.I>kb.I?db.I:kb.I;var zb=O.F[0].O,lb=O.F[1].O;O.O=(zb>lb?zb:lb)+1;var tb=K.F[0],x=K.F[1];K.J=tb.J<x.J?tb.J:x.J;K.K=tb.K<x.K?tb.K:x.K;K.L=tb.L<x.L?tb.L:x.L;K.G=tb.G>x.G?tb.G:x.G;K.H=tb.H>x.H?tb.H:x.H;K.I=tb.I>x.I?tb.I:x.I;var W=K.F[0].O,ea=K.F[1].O;K.O=(W>ea?W:ea)+1}null!=Va?(Va.F[ob]=O,O.Ea=Va,O.La=ob):(va.Qb=O,O.Ea=null);K=O}}var Bc=K.F[0].O,xc=K.F[1].O;K.O=(Bc>xc?Bc:xc)+1;var Pa=K.F[0],qb=K.F[1];K.J=Pa.J<qb.J?Pa.J:qb.J;K.K=Pa.K<qb.K?Pa.K:qb.K;K.L=Pa.L<qb.L?Pa.L:qb.L;K.G=Pa.G>qb.G?Pa.G:qb.G;K.H=Pa.H>qb.H?Pa.H:qb.H;K.I=Pa.I>qb.I?Pa.I:qb.I;K=K.Ea}}b&&this.sh(this.ge.Qb,f.Qh);f.jh=!1}this.hf[d]=null}b||this.sh(this.ge.Qb,this.ge.Qb);this.Gf=0}},Vd:function(a,b,e){null!=this.ge.Qb&&this.Jl(this.ge.Qb,a.x,a.y,a.z,b.x,b.y,b.z,e)},Bf:function(a,b,e,c){null!=this.ge.Qb&&this.ml(this.ge.Qb,a,b,e,c)},qh:function(a,b){null!=this.ge.Qb&&this.hl(this.ge.Qb,a,b)},Hn:function(){return this.ge.an()}});Xj.ua=Vc;Xj.prototype=gb(Vc.prototype,{});Ql.prototype={Sl:function(a,b){switch(this.Vl){case 0:var e,c,d;e=b.J+b.G;c=b.K+b.H;d=b.L+b.I;var f=a.F[0],h=a.F[1],l,g;b=f.J+f.G;a=f.K+f.H;f=f.L+f.I;l=h.J+h.G;g=h.K+h.H;h=h.L+h.I;b-=e;a-=c;f-=d;l-=e;g-=c;h-=d;return b*b+a*a+f*f<l*l+g*g+h*h?0:1;case 1:f=a.F[0];e=a.F[1];c=a.H-a.K;d=a.I-a.L;var h=2*((a.G-a.J)*(c+d)+c*d),k,m;c=a.J<b.J?a.J:b.J;k=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;d=a.G>b.G?a.G:b.G;m=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;a=m-k;l=g-l;c=2*((d-c)*(a+l)+a*l);a=2*c;var n=2*(c-h),h=n;c=f.J<b.J?f.J:b.J;k=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;d=f.G>b.G?f.G:b.G;m=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.O?(f=m-k,l=g-l,h+=2*((d-c)*(f+l)+f*l)):(k=m-k,l=g-l,g=f.H-f.K,m=f.I-f.L,h+=2*((d-c)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m));f=n;c=e.J<b.J?e.J:b.J;k=e.K<b.K?e.K:b.K;l=e.L<b.L?e.L:b.L;d=e.G>b.G?e.G:b.G;m=e.H>b.H?e.H:b.H;g=e.I>b.I?e.I:b.I;0==e.O?(e=m-k,b=g-l,f+=2*((d-c)*(e+b)+e*b)):(b=m-k,l=g-l,g=e.H-e.K,n=e.I-e.L,f+=2*((d-c)*(b+l)+b*l)-2*((e.G-e.J)*(g+n)+g*n));return a<h?a<f?-1:1:h<f?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Vl),-1}}};ml.prototype={an:function(){return this.pl(this.Qb)},pl:function(a){if(null==a||0==a.O)return 0;var b=a.F[0].O-a.F[1].O;0>b&&(b=-b);return b+this.pl(a.F[0])+this.pl(a.F[1])}};Sa.prototype={za:function(a,b){this.ma=a.x;this.na=a.y;this.oa=a.z;this.ja=b.x;this.ka=b.y;this.la=b.z;return this},Jc:function(){var a=new u;a.x=this.ma;a.y=this.na;a.z=this.oa;return a},Kc:function(a){a.x=this.ma;a.y=this.na;a.z=this.oa},Yd:function(a){this.ma=a.x;this.na=a.y;this.oa=a.z;return this},Ac:function(){var a=new u;a.x=this.ja;a.y=this.ka;a.z=this.la;return a},Ec:function(a){a.x=this.ja;a.y=this.ka;a.z=this.la},fd:function(a){this.ja=a.x;this.ka=a.y;this.la=a.z;return this},Hb:function(){var a=new u,b,e,c;b=this.ma+this.ja;e=this.na+this.ka;c=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*c;return a},Mb:function(a){var b,e,c;b=this.ma+this.ja;e=this.na+this.ka;c=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*c},pc:function(){var a=new u,b,e,c;b=this.ja-this.ma;e=this.ka-this.na;c=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*c;return a},qc:function(a){var b,e,c;b=this.ja-this.ma;e=this.ka-this.na;c=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*c},ua:function(a){this.ma=this.ma<a.ma?this.ma:a.ma;this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.ja=this.ja>a.ja?this.ja:a.ja;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;return this},cb:function(a){var b=new Sa;b.ma=this.ma<a.ma?this.ma:a.ma;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.ja=this.ja>a.ja?this.ja:a.ja;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;return b},Lc:function(a){return this.ma<a.ja&&this.ja>a.ma&&this.na<a.ka&&this.ka>a.na&&this.oa<a.la?this.la>a.oa:!1},uc:function(a){var b=new Sa;b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;return b},vc:function(a,b){b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la},de:function(a){this.ma=a.ma;this.na=a.na;this.oa=a.oa;this.ja=a.ja;this.ka=a.ka;this.la=a.la;return this},clone:function(){var a=new Sa;a.ma=this.ma;a.na=this.na;a.oa=this.oa;a.ja=this.ja;a.ka=this.ka;a.la=this.la;return a}};ke.ua=wb;ke.prototype=gb(wb.prototype,{tn:function(){var a=new u;a.x=this.Ke;a.y=this.Le;a.z=this.Me;return a},un:function(a){a.x=this.Ke;a.y=this.Le;a.z=this.Me},Oe:function(){this.yf=8*this.Ke*this.Le*this.Me;var a,b,e;a=this.Ke*this.Ke;b=this.Le*this.Le;e=this.Me*this.Me;this.mg=.3333333333333333*(b+e);this.pg=this.og=this.ng=0;this.qg=.3333333333333333*(e+a);this.tg=this.sg=this.rg=0;this.ug=.3333333333333333*(a+b)},Nb:function(a,b){var e,c,d,f,h;f=b.o*this.Gk+b.f*this.Hk+b.h*this.Ik;h=b.i*this.Gk+b.m*this.Hk+b.j*this.Ik;e=b.l*this.Gk+b.g*this.Hk+b.s*this.Ik;var l,g;l=b.o*this.Jk+b.f*this.Kk+b.h*this.Lk;g=b.i*this.Jk+b.m*this.Kk+b.j*this.Lk;c=b.l*this.Jk+b.g*this.Kk+b.s*this.Lk;var k,m;k=b.o*this.Mk+b.f*this.Nk+b.h*this.Ok;m=b.i*this.Mk+b.m*this.Nk+b.j*this.Ok;d=b.l*this.Mk+b.g*this.Nk+b.s*this.Ok;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>c?-c:c)+(0>d?-d:d);a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-e;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+e},Pd:function(a,b){var e,c,d;d=c=e=this.Rb;e=e<this.Ke?e:this.Ke;c=c<this.Le?c:this.Le;d=d<this.Me?d:this.Me;e=this.Ke-e;c=this.Le-c;d=this.Me-d;b.x=0<a.x?e:-e;b.y=0<a.y?c:-c;b.z=0<a.z?d:-d},Di:function(a,b,e,c,d,f,h){var l=this.Ke,g=this.Le,k=this.Me;c-=a;d-=b;f-=e;var m=0,n=0,q=0,p=1,r=1,t=1;if(-1E-6<c&&1E-6>c){if(a<=-l||a>=l)return!1}else{var R=1/c,w=(-l-a)*R,l=(l-a)*R;w>l&&(R=w,w=l,l=R);0<w&&(m=w);1>l&&(p=l)}if(-1E-6<d&&1E-6>d){if(b<=-g||b>=g)return!1}else w=1/d,l=(-g-b)*w,g=(g-b)*w,l>g&&(w=l,l=g,g=w),0<l&&(n=l),1>g&&(r=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(q=g),1>k&&(t=k);if(1<=m||1<=n||1<=q||0>=p||0>=r||0>=t)return!1;k=m;m=0;n>k&&(k=n,m=1);q>k&&(k=q,m=2);r<p&&(p=r);t<p&&(p=t);if(k>p||!k)return!1;switch(m){case 0:h.normal.za(0<c?-1:1,0,0);break;case 1:h.normal.za(0,0<d?-1:1,0);break;case 2:h.normal.za(0,0,0<f?-1:1)}h.position.za(a+k*c,b+k*d,e+k*f);h.fraction=k;return!0}});ce.ua=wb;ce.prototype=gb(wb.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var a=this.ab*this.ab,b=this.Ib*this.Ib,e=6.28318530717958*a*this.Ib,c=3.14159265358979*a*this.ab*4/3,d=(this.yf=e+c)?1/this.yf:0;this.mg=b=d*(e*(.25*a+b/3)+c*(.4*a+this.Ib*this.ab*.75+b));this.pg=this.og=this.ng=0;this.qg=d*(e*a*.5+c*a*.4);this.tg=this.sg=this.rg=0;this.ug=b},Nb:function(a,b){var e,c,d;d=c=e=this.ab;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Ib;h=(0>h?-h:h)*this.Ib;l=(0>l?-l:l)*this.Ib;e+=f;c+=h;d+=l;a.ma=b.v-e;a.na=b.A-c;a.oa=b.B-d;a.ja=b.v+e;a.ka=b.A+c;a.la=b.B+d},Pd:function(a,b){0<a.y?b.za(0,this.Ib,0):b.za(0,-this.Ib,0)},Di:function(a,b,e,c,d,f,h){var l=this.Ib,g=c-a,k=f-e,m,n=g*g+k*k,q=a*g+e*k;m=a*a+e*e-this.ab*this.ab;var p=q*q-n*m;if(0>p)return!1;if(0<n){if(p=Math.sqrt(p),m=(-q-p)/n,1<=m||0>=(-q+p)/n)return!1}else{if(0<=m)return!1;m=0}n=b+(d-b)*m;if(n>-l&&n<l)return 0<m?(f=m,q=h.normal.za(a+g*f,0,e+k*f),b=Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),0<b&&(b=1/b),d=q.y*b,c=q.z*b,q.x=q.x*b,q.y=d,q.z=c,h.position.za(a+f*g,n,e+f*k),h.fraction=f,!0):!1;var g=0>n?-l:l,r;r=a-0;l=b-g;k=e-0;a=c-a;b=d-b;e=f-e;n=a*a+b*b+e*e;q=r*a+l*b+k*e;m=r*r+l*l+k*k-this.ab*this.ab;p=q*q-n*m;if(0>p)return!1;f=(-q-Math.sqrt(p))/n;if(0>f||1<f)return!1;a=r+a*f;n=l+b*f;e=k+e*f;q=a*a+n*n+e*e;0<q&&(q=1/Math.sqrt(q));b=h.position;b.x=a+0;b.y=n+g;b.z=e+0;g=h.normal;g.x=a*q;g.y=n*q;g.z=e*q;h.fraction=f;return!0}});Td.ua=wb;Td.prototype=gb(wb.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var a=this.ab*this.ab,b=this.Ib*this.Ib*4;this.yf=3.14159265358979*a*this.Ib*2/3;this.mg=.05*(3*a+2*b);this.pg=this.og=this.ng=0;this.qg=.3*a;this.tg=this.sg=this.rg=0;this.ug=.08333333333333333*(3*a+2*b)},Nb:function(a,b){var e,c,d,f,h,l;e=b.f;c=b.m;d=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-c*c);l=Math.sqrt(1-d*d);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Ib;c*=this.Ib;d*=this.Ib;var g,k,m,n,q,p;g=-e-f;k=-c-h;m=-d-l;n=-e+f;q=-c+h;p=-d+l;l=g>n?g:n;h=k>q?k:q;f=m>p?m:p;g=g<n?g:n;k=k<q?k:q;m=m<p?m:p;a.ma=b.v+(g<e?g:e);a.na=b.A+(k<c?k:c);a.oa=b.B+(m<d?m:d);a.ja=b.v+(l>e?l:e);a.ka=b.A+(h>c?h:c);a.la=b.B+(f>d?f:d)},Pd:function(a,b){var e=a.x,c=a.y,d=a.z;0<c&&c*c>this.uk*this.uk*(e*e+c*c+d*d)?(b.za(0,this.Ib-this.Rb/this.uk,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,c=e*e+a*a,d=2*this.Ib,d=(d-this.Rb)/d*this.ab-this.Rb/this.kk,0>d&&(d=0),c=0<c?d/Math.sqrt(c):0,d=this.Ib-this.Rb,0>d&&(d=0),b.x=e*c,b.y=-d,b.z=a*c)},Di:function(a,b,e,c,d,f,h){var l=this.Ib;c-=a;d-=b;f-=e;var g=0,k=1;if(-1E-6<d&&1E-6>d){if(b<=-l||b>=l)return!1}else{var m=1/d,n=(-l-b)*m,m=(l-b)*m;if(n>m)var q=n,n=m,m=q;0<n&&(g=n);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var q=this.kk*this.kk,m=q*(c*c+d*d+f*f)-d*d,n=q*(a*c+b*d+e*f)-b*d,q=q*(a*a+b*b+e*e)-b*b,p=n*n-m*q;if(m){if(0>p)return!1;p=Math.sqrt(p);if(0>m)if(0<d){if(q=0,n=(-n+p)/m,0>=n)return!1}else{if(q=(-n-p)/m,n=1,1<=q)return!1}else if(q=(-n-p)/m,n=(-n+p)/m,1<=q||0>=n)return!1}else if(m=-q/(2*n),0<n){if(q=0,n=m,0>=m)return!1}else if(q=m,n=1,1<=m)return!1;b+=l;if(n<=g||k<=q)return!1;if(q<g){l=g;if(!l)return!1;h.normal.za(0,0<d?-1:1,0)}else{l=q;if(!l)return!1;g=h.normal.za(a+c*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;k=this.kk;n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;h.normal.y+=this.uk}h.position.za(a+l*c,b+l*d,e+l*f);h.fraction=l;return!0}});je.ua=wb;je.prototype=gb(wb.prototype,{Ln:function(){return this.zb},Oe:function(){this.mg=this.yf=1;this.pg=this.og=this.ng=0;this.qg=1;this.tg=this.sg=this.rg=0;this.ug=1;for(var a=this.zb[0].x,b=this.zb[0].y,e=this.zb[0].z,c=this.zb[0].x,d=this.zb[0].y,f=this.zb[0].z,h=1,l=this.Ne;h<l;){var g=h++,k=this.zb[g].x,m=this.zb[g].y,g=this.zb[g].z;k<a?a=k:k>c&&(c=k);m<b?b=m:m>d&&(d=m);g<e?e=g:g>f&&(f=g)}h=c-a;l=d-b;k=f-e;this.yf=h*l*k;a=.25*((a+c)*(a+c)+(b+d)*(b+d)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.mg=.3333333333333333*(l+k)+a;this.pg=this.og=this.ng=0;this.qg=.3333333333333333*(k+h)+a;this.tg=this.sg=this.rg=0;this.ug=.3333333333333333*(h+l)+a},Nb:function(a,b){var e,c,d,f,h,l,g,k,m;m=k=g=this.Rb;var n,q,p;e=this.zb[0];n=e.x;q=e.y;p=e.z;c=b.o*n+b.f*q+b.h*p;e=b.i*n+b.m*q+b.j*p;d=b.l*n+b.g*q+b.s*p;n=c+b.v;q=e+b.A;p=d+b.B;e=n;c=q;d=p;f=n;h=q;l=p;for(var r=1,t=this.Ne;r<t;){n=r++;p=this.zb[n];n=p.x;q=p.y;p=p.z;var R,w;R=b.o*n+b.f*q+b.h*p;w=b.i*n+b.m*q+b.j*p;p=b.l*n+b.g*q+b.s*p;n=R;q=w;n+=b.v;q+=b.A;p+=b.B;e=e<n?e:n;c=c<q?c:q;d=d<p?d:p;f=f>n?f:n;h=h>q?h:q;l=l>p?l:p}a.ma=e-g;a.na=c-k;a.oa=d-m;a.ja=f+g;a.ka=h+k;a.la=l+m},Pd:function(a,b){for(var e=this.zb[0],e=e.x*a.x+e.y*a.y+e.z*a.z,c=0,d=1,f=this.Ne;d<f;){var h=d++,l=this.zb[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,c=h)}a=this.zb[c];b.x=a.x;b.y=a.y;b.z=a.z}});Sd.ua=wb;Sd.prototype=gb(wb.prototype,{Xh:function(){return this.ab},Bj:function(){return this.Ib},Oe:function(){var a=this.ab*this.ab,b=this.Ib*this.Ib*4;this.yf=3.14159265358979*a*this.Ib*2;this.mg=.08333333333333333*(3*a+b);this.pg=this.og=this.ng=0;this.qg=.5*a;this.tg=this.sg=this.rg=0;this.ug=.08333333333333333*(3*a+b)},Nb:function(a,b){var e,c,d,f,h,l;e=b.f;c=b.m;d=b.g;e=0>e?-e:e;c=0>c?-c:c;d=0>d?-d:d;f=Math.sqrt(1-e*e);h=Math.sqrt(1-c*c);l=Math.sqrt(1-d*d);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Ib;c*=this.Ib;d*=this.Ib;f+=e;h+=c;l+=d;a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-l;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+l},Pd:function(a,b){var e=a.x,c=a.z,d=e*e+c*c,f=this.ab-this.Rb;0>f&&(f=0);d=0<d?f/Math.sqrt(d):0;f=this.Ib-this.Rb;0>f&&(f=0);b.x=e*d;b.y=0<a.y?f:-f;b.z=c*d},Di:function(a,b,e,c,d,f,h){var l=this.Ib;c-=a;d-=b;f-=e;var g=0,k=1;if(-1E-6<d&&1E-6>d){if(b<=-l||b>=l)return!1}else{var m=1/d,n=(-l-b)*m,l=(l-b)*m;n>l&&(m=n,n=l,l=m);0<n&&(g=n);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=c*c+f*f,n=a*c+e*f,m=a*a+e*e-this.ab*this.ab,q=n*n-l*m;if(0>q)return!1;if(0<l){if(q=Math.sqrt(q),m=(-n-q)/l,l=(-n+q)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.za(0,0<d?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.za(a+c*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);n=k.y*l;m=k.z*l;k.x=k.x*l;k.y=n;k.z=m}h.position.za(a+g*c,b+g*d,e+g*f);h.fraction=g;return!0}});Rd.ua=wb;Rd.prototype=gb(wb.prototype,{Xh:function(){return this.ab},Oe:function(){this.yf=4.188790204786386*this.ab*this.ab*this.ab;this.mg=.4*this.ab*this.ab;this.pg=this.og=this.ng=0;this.qg=.4*this.ab*this.ab;this.tg=this.sg=this.rg=0;this.ug=.4*this.ab*this.ab},Nb:function(a,b){var e,c,d;d=c=e=this.ab;a.ma=b.v-e;a.na=b.A-c;a.oa=b.B-d;a.ja=b.v+e;a.ka=b.A+c;a.la=b.B+d},Pd:function(a,b){b.Z()},Di:function(a,b,e,c,d,f,h){var l;c-=a;d-=b;l=f-e;f=c*c+d*d+l*l;var g=a*c+b*d+e*l,k=g*g-f*(a*a+b*b+e*e-this.ab*this.ab);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=c*f;b+=d*f;e+=l*f;c=a*a+b*b+e*e;0<c&&(c=1/Math.sqrt(c));d=h.position;d.x=a;d.y=b;d.z=e;d=h.normal;d.x=a*c;d.y=b*c;d.z=e*c;h.fraction=f;return!0}});cg.prototype={ua:function(a,b){return this.Jb[a][b]}};ae.prototype={mm:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var c=b++;this.points[c].depth>a&&(a=this.points[c].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.Z();e.position2.Z();e.depth=0;e.id=0}this.normal.Z()}};Uc.prototype={yh:function(a,b,e,c){var d=a.normal;d.x=b;d.y=e;d.z=c;this.Sg&&(a=a.normal,b=-a.y,e=-a.z,a.x=-a.x,a.y=b,a.z=e)},Cg:function(a,b,e,c,d,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.Sg?(l=a.position1,l.x=d,l.y=f,l.z=h,d=a.position2,d.x=b,d.y=e,d.z=c):(l=a.position1,l.x=b,l.y=e,l.z=c,b=a.position2,b.x=d,b.y=f,b.z=h)},th:function(){},hm:function(a,b,e,c,d,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.Z();g.position2.Z();g.depth=0;g.id=0}a.normal.Z();this.Sg?this.th(a,e,b,d,c,f):this.th(a,b,e,c,d,f)}};ij.ua=Uc;ij.prototype=gb(Uc.prototype,{th:function(a,b,e,c,d){var f=b,h=e;a.incremental=!1;var l,g,k,m,n,q,p,r,t;l=c.v;g=c.A;k=c.B;m=d.v;n=d.A;q=d.B;p=m-l;r=n-g;t=q-k;var R,w,B,v,C,U,A,E,z,u,I,J,Gb,Be,D,da,P,rd;R=c.o;w=c.i;B=c.l;v=c.f;C=c.m;U=c.g;A=c.h;E=c.j;z=c.s;u=d.o;I=d.i;J=d.l;Gb=d.f;Be=d.m;D=d.g;da=d.h;P=d.j;rd=d.s;var xb=f.Ke,Ka=f.Le,Da=f.Me,ma=h.Ke,Q=h.Le,L=h.Me,Ha,Ea,Ua,ua,oa,Wa,G,Qa,X,M,N,ca,Y,S,aa,y,fa,T;Ha=R*xb;Ea=w*xb;Ua=B*xb;ua=v*Ka;oa=C*Ka;Wa=U*Ka;G=A*Da;Qa=E*Da;X=z*Da;M=u*ma;N=I*ma;ca=J*ma;Y=Gb*Q;S=Be*Q;aa=D*Q;y=da*L;fa=P*L;T=rd*L;var pa=1/0,sa=-1,va=0,ra,ka,Z;Z=ka=ra=0;var na=xb,Aa=R*M+w*N+B*ca,ya=R*Y+w*S+B*aa,K=R*y+w*fa+B*T;0>Aa&&(Aa=-Aa);0>ya&&(ya=-ya);0>K&&(K=-K);var Ba=Aa+ya+K,ha=R*p+w*r+B*t,ba=na+Ba,Va=0>ha,ga=Va?-ha:ha;if(ga<ba){var O=ba-ga;O<pa&&(pa=O,sa=0,ra=R,ka=w,Z=B,va=Va?-1:1);var na=Ka,za=v*M+C*N+U*ca,ob=v*Y+C*S+U*aa,ja=v*y+C*fa+U*T;0>za&&(za=-za);0>ob&&(ob=-ob);0>ja&&(ja=-ja);var Ba=za+ob+ja,ha=v*p+C*r+U*t,V=na+Ba,Dc=0>ha,fb=Dc?-ha:ha;if(fb<V){var Db=V-fb;Db<pa&&(pa=Db,sa=1,ra=v,ka=C,Z=U,va=Dc?-1:1);var na=Da,ta=A*M+E*N+z*ca,wa=A*Y+E*S+z*aa,Fa=A*y+E*fa+z*T;0>ta&&(ta=-ta);0>wa&&(wa=-wa);0>Fa&&(Fa=-Fa);var Ba=ta+wa+Fa,ha=A*p+E*r+z*t,eb=na+Ba,Ia=0>ha,pb=Ia?-ha:ha;if(pb<eb){var Oa=eb-pb;Oa<pa&&(pa=Oa,sa=2,ra=A,ka=E,Z=z,va=Ia?-1:1);var pa=pa>F.linearSlop?pa-F.linearSlop:0,la=u*Ha+I*Ea+J*Ua,Ca=u*ua+I*oa+J*Wa,Xa=u*G+I*Qa+J*X;0>la&&(la=-la);0>Ca&&(Ca=-Ca);0>Xa&&(Xa=-Xa);var na=la+Ca+Xa,Ba=ma,ha=u*p+I*r+J*t,Ra=na+Ba,hb=0>ha,Jb=hb?-ha:ha;if(Jb<Ra){var cb=Ra-Jb;cb<pa&&(pa=cb,sa=3,ra=u,ka=I,Z=J,va=hb?-1:1);var ub=Gb*Ha+Be*Ea+D*Ua,jb=Gb*ua+Be*oa+D*Wa,mb=Gb*G+Be*Qa+D*X;0>ub&&(ub=-ub);0>jb&&(jb=-jb);0>mb&&(mb=-mb);var na=ub+jb+mb,Ba=Q,ha=Gb*p+Be*r+D*t,Yb=na+Ba,pc=0>ha,Ya=pc?-ha:ha;if(Ya<Yb){var La=Yb-Ya;La<pa&&(pa=La,sa=4,ra=Gb,ka=Be,Z=D,va=pc?-1:1);var vb=da*Ha+P*Ea+rd*Ua,H=da*ua+P*oa+rd*Wa,db=da*G+P*Qa+rd*X;0>vb&&(vb=-vb);0>H&&(H=-H);0>db&&(db=-db);var na=vb+H+db,Ba=L,ha=da*p+P*r+rd*t,kb=na+Ba,zb=0>ha,lb=zb?-ha:ha;if(lb<kb){var tb=kb-lb;tb<pa&&(pa=tb,sa=5,ra=da,ka=P,Z=rd,va=zb?-1:1);var pa=pa>F.linearSlop?pa-F.linearSlop:0,x,W,ea;x=w*J-B*I;W=B*u-R*J;ea=R*I-w*u;if(x||W||ea){var Bc=x*x+W*W+ea*ea;0<Bc&&(Bc=1/Math.sqrt(Bc));x*=Bc;W*=Bc;ea*=Bc;var xc=x*ua+W*oa+ea*Wa,Pa=x*G+W*Qa+ea*X;0>xc&&(xc=-xc);0>Pa&&(Pa=-Pa);var na=xc+Pa,qb=x*Y+W*S+ea*aa,nb=x*y+W*fa+ea*T;0>qb&&(qb=-qb);0>nb&&(nb=-nb);var Ba=qb+nb,ha=x*p+W*r+ea*t,Ab=na+Ba,Bb=0>ha,ia=Bb?-ha:ha;if(ia<Ab){var Ta=Ab-ia;Ta<pa&&(pa=Ta,sa=6,ra=x,ka=W,Z=ea,va=Bb?-1:1)}else return}x=w*D-B*Be;W=B*Gb-R*D;ea=R*Be-w*Gb;if(x||W||ea){var bb=x*x+W*W+ea*ea;0<bb&&(bb=1/Math.sqrt(bb));x*=bb;W*=bb;ea*=bb;var ib=x*ua+W*oa+ea*Wa,Cb=x*G+W*Qa+ea*X;0>ib&&(ib=-ib);0>Cb&&(Cb=-Cb);var na=ib+Cb,Ma=x*M+W*N+ea*ca,Eb=x*y+W*fa+ea*T;0>Ma&&(Ma=-Ma);0>Eb&&(Eb=-Eb);var Ba=Ma+Eb,ha=x*p+W*r+ea*t,le=na+Ba,qa=0>ha,Ac=qa?-ha:ha;if(Ac<le){var Kb=le-Ac;Kb<pa&&(pa=Kb,sa=7,ra=x,ka=W,Z=ea,va=qa?-1:1)}else return}x=w*rd-B*P;W=B*da-R*rd;ea=R*P-w*da;if(x||W||ea){var Qb=x*x+W*W+ea*ea;0<Qb&&(Qb=1/Math.sqrt(Qb));x*=Qb;W*=Qb;ea*=Qb;var Ve=x*ua+W*oa+ea*Wa,Ie=x*G+W*Qa+ea*X;0>Ve&&(Ve=-Ve);0>Ie&&(Ie=-Ie);var na=Ve+Ie,Yj=x*M+W*N+ea*ca,Zb=x*Y+W*S+ea*aa;0>Yj&&(Yj=-Yj);0>Zb&&(Zb=-Zb);var Ba=Yj+Zb,ha=x*p+W*r+ea*t,Sl=na+Ba,xh=0>ha,Tl=xh?-ha:ha;if(Tl<Sl){var xa=Sl-Tl;xa<pa&&(pa=xa,sa=8,ra=x,ka=W,Z=ea,va=xh?-1:1)}else return}x=C*J-U*I;W=U*u-v*J;ea=v*I-C*u;if(x||W||ea){var Tb=x*x+W*W+ea*ea;0<Tb&&(Tb=1/Math.sqrt(Tb));x*=Tb;W*=Tb;ea*=Tb;var fc=x*Ha+W*Ea+ea*Ua,ec=x*G+W*Qa+ea*X;0>fc&&(fc=-fc);0>ec&&(ec=-ec);var na=fc+ec,Nb=x*Y+W*S+ea*aa,bc=x*y+W*fa+ea*T;0>Nb&&(Nb=-Nb);0>bc&&(bc=-bc);var Ba=Nb+bc,ha=x*p+W*r+ea*t,Fb=na+Ba,mc=0>ha,ac=mc?-ha:ha;if(ac<Fb){var Ob=Fb-ac;Ob<pa&&(pa=Ob,sa=9,ra=x,ka=W,Z=ea,va=mc?-1:1)}else return}x=C*D-U*Be;W=U*Gb-v*D;ea=v*Be-C*Gb;if(x||W||ea){var cc=x*x+W*W+ea*ea;0<cc&&(cc=1/Math.sqrt(cc));x*=cc;W*=cc;ea*=cc;var Ub=x*Ha+W*Ea+ea*Ua,Lb=x*G+W*Qa+ea*X;0>Ub&&(Ub=-Ub);0>Lb&&(Lb=-Lb);var na=Ub+Lb,Rb=x*M+W*N+ea*ca,rb=x*y+W*fa+ea*T;0>Rb&&(Rb=-Rb);0>rb&&(rb=-rb);var Ba=Rb+rb,ha=x*p+W*r+ea*t,Na=na+Ba,qc=0>ha,ab=qc?-ha:ha;if(ab<Na){var $c=Na-ab;$c<pa&&(pa=$c,sa=10,ra=x,ka=W,Z=ea,va=qc?-1:1)}else return}x=C*rd-U*P;W=U*da-v*rd;ea=v*P-C*da;if(x||W||ea){var hc=x*x+W*W+ea*ea;0<hc&&(hc=1/Math.sqrt(hc));x*=hc;W*=hc;ea*=hc;var Ic=x*Ha+W*Ea+ea*Ua,oc=x*G+W*Qa+ea*X;0>Ic&&(Ic=-Ic);0>oc&&(oc=-oc);var na=Ic+oc,Ga=x*M+W*N+ea*ca,ad=x*Y+W*S+ea*aa;0>Ga&&(Ga=-Ga);0>ad&&(ad=-ad);var Ba=Ga+ad,ha=x*p+W*r+ea*t,rc=na+Ba,Ja=0>ha,Zc=Ja?-ha:ha;if(Zc<rc){var Sa=rc-Zc;Sa<pa&&(pa=Sa,sa=11,ra=x,ka=W,Z=ea,va=Ja?-1:1)}else return}x=E*J-z*I;W=z*u-A*J;ea=A*I-E*u;if(x||W||ea){var mg=x*x+W*W+ea*ea;0<mg&&(mg=1/Math.sqrt(mg));x*=mg;W*=mg;ea*=mg;var Ec=x*Ha+W*Ea+ea*Ua,Dl=x*ua+W*oa+ea*Wa;0>Ec&&(Ec=-Ec);0>Dl&&(Dl=-Dl);var na=Ec+Dl,wc=x*Y+W*S+ea*aa,gb=x*y+W*fa+ea*T;0>wc&&(wc=-wc);0>gb&&(gb=-gb);var Ba=wc+gb,ha=x*p+W*r+ea*t,wb=na+Ba,Ef=0>ha,jf=Ef?-ha:ha;if(jf<wb){var Bd=wb-jf;Bd<pa&&(pa=Bd,sa=12,ra=x,ka=W,Z=ea,va=Ef?-1:1)}else return}x=E*D-z*Be;W=z*Gb-A*D;ea=A*Be-E*Gb;if(x||W||ea){var Za=x*x+W*W+ea*ea;0<Za&&(Za=1/Math.sqrt(Za));x*=Za;W*=Za;ea*=Za;var Pc=x*Ha+W*Ea+ea*Ua,Zj=x*ua+W*oa+ea*Wa;0>Pc&&(Pc=-Pc);0>Zj&&(Zj=-Zj);var na=Pc+Zj,$a=x*M+W*N+ea*ca,Gc=x*y+W*fa+ea*T;0>$a&&($a=-$a);0>Gc&&(Gc=-Gc);var Ba=$a+Gc,ha=x*p+W*r+ea*t,sb=na+Ba,yh=0>ha,yb=yh?-ha:ha;if(yb<sb){var Ib=sb-yb;Ib<pa&&(pa=Ib,sa=13,ra=x,ka=W,Z=ea,va=yh?-1:1)}else return}x=E*rd-z*P;W=z*da-A*rd;ea=A*P-E*da;if(x||W||ea){var Qc=x*x+W*W+ea*ea;0<Qc&&(Qc=1/Math.sqrt(Qc));x*=Qc;W*=Qc;ea*=Qc;var Xb=x*Ha+W*Ea+ea*Ua,Hb=x*ua+W*oa+ea*Wa;0>Xb&&(Xb=-Xb);0>Hb&&(Hb=-Hb);var na=Xb+Hb,Ud=x*M+W*N+ea*ca,Vb=x*Y+W*S+ea*aa;0>Ud&&(Ud=-Ud);0>Vb&&(Vb=-Vb);var Ba=Ud+Vb,ha=x*p+W*r+ea*t,Wb=na+Ba,Pb=0>ha,dc=Pb?-ha:ha;if(dc<Wb){var Ul=Wb-dc;Ul<pa&&(pa=Ul,sa=14,ra=x,ka=W,Z=ea,va=Pb?-1:1)}else return}if(6<=sa){ra*=va;ka*=va;Z*=va;var sc=(sa-6)/3|0,eg=sa-6-3*sc,Wc,Rc,Fc,Oc,yc,tc,sd,Bg,Gk,Vd,nd,Fd;switch(sc){case 0:sd=R;Bg=w;Gk=B;var me=0<G*ra+Qa*ka+X*Z;0<ua*ra+oa*ka+Wa*Z?me?(Wc=ua+G,Rc=oa+Qa,Fc=Wa+X):(Wc=ua-G,Rc=oa-Qa,Fc=Wa-X):me?(Wc=G-ua,Rc=Qa-oa,Fc=X-Wa):(Wc=ua+G,Rc=oa+Qa,Fc=Wa+X,Wc=-Wc,Rc=-Rc,Fc=-Fc);break;case 1:sd=v;Bg=C;Gk=U;var Vl=0<G*ra+Qa*ka+X*Z;0<Ha*ra+Ea*ka+Ua*Z?Vl?(Wc=Ha+G,Rc=Ea+Qa,Fc=Ua+X):(Wc=Ha-G,Rc=Ea-Qa,Fc=Ua-X):Vl?(Wc=G-Ha,Rc=Qa-Ea,Fc=X-Ua):(Wc=Ha+G,Rc=Ea+Qa,Fc=Ua+X,Wc=-Wc,Rc=-Rc,Fc=-Fc);break;default:sd=A;Bg=E;Gk=z;var uc=0<ua*ra+oa*ka+Wa*Z;0<Ha*ra+Ea*ka+Ua*Z?uc?(Wc=Ha+ua,Rc=Ea+oa,Fc=Ua+Wa):(Wc=Ha-ua,Rc=Ea-oa,Fc=Ua-Wa):uc?(Wc=ua-Ha,Rc=oa-Ea,Fc=Wa-Ua):(Wc=Ha+ua,Rc=Ea+oa,Fc=Ua+Wa,Wc=-Wc,Rc=-Rc,Fc=-Fc)}Wc=l+Wc;Rc=g+Rc;Fc=k+Fc;switch(eg){case 0:Vd=u;nd=I;Fd=J;var qd=0<y*ra+fa*ka+T*Z;0<Y*ra+S*ka+aa*Z?qd?(Oc=Y+y,yc=S+fa,tc=aa+T):(Oc=Y-y,yc=S-fa,tc=aa-T):qd?(Oc=y-Y,yc=fa-S,tc=T-aa):(Oc=Y+y,yc=S+fa,tc=aa+T,Oc=-Oc,yc=-yc,tc=-tc);break;case 1:Vd=Gb;nd=Be;Fd=D;var ne=0<y*ra+fa*ka+T*Z;0<M*ra+N*ka+ca*Z?ne?(Oc=M+y,yc=N+fa,tc=ca+T):(Oc=M-y,yc=N-fa,tc=ca-T):ne?(Oc=y-M,yc=fa-N,tc=T-ca):(Oc=M+y,yc=N+fa,tc=ca+T,Oc=-Oc,yc=-yc,tc=-tc);break;default:Vd=da;nd=P;Fd=rd;var oe=0<Y*ra+S*ka+aa*Z;0<M*ra+N*ka+ca*Z?oe?(Oc=M+Y,yc=N+S,tc=ca+aa):(Oc=M-Y,yc=N-S,tc=ca-aa):oe?(Oc=Y-M,yc=S-N,tc=aa-ca):(Oc=M+Y,yc=N+S,tc=ca+aa,Oc=-Oc,yc=-yc,tc=-tc)}Oc=m-Oc;yc=n-yc;tc=q-tc;var pe,qe,td;pe=Wc-Oc;qe=Rc-yc;td=Fc-tc;var re=sd*Vd+Bg*nd+Gk*Fd,jc=sd*pe+Bg*qe+Gk*td,gc=Vd*pe+nd*qe+Fd*td,sf=1/(1-re*re),Sc=(re*gc-jc)*sf,ld=(gc-re*jc)*sf,od,kc,ic,bd,cd,fd;od=Wc+sd*Sc;kc=Rc+Bg*Sc;ic=Fc+Gk*Sc;bd=Oc+Vd*ld;cd=yc+nd*ld;fd=tc+Fd*ld;this.yh(a,-ra,-ka,-Z);this.Cg(a,od,kc,ic,bd,cd,fd,pa,4)}else{var Hc,Cc,zc,Wd;if(3<=sa){va=-va;p=-p;r=-r;t=-t;var kf=f,f=h,h=kf,Ff=xb,xb=ma,ma=Ff,Cd=Ka,Ka=Q,Q=Cd,Mb=Da,Da=L,L=Mb;Hc=l;Cc=g;zc=k;l=m;g=n;k=q;m=Hc;n=Cc;q=zc;Hc=R;Cc=w;zc=B;R=u;w=I;B=J;u=Hc;I=Cc;J=zc;Hc=v;Cc=C;zc=U;v=Gb;C=Be;U=D;Gb=Hc;Be=Cc;D=zc;Hc=A;Cc=E;zc=z;A=da;E=P;z=rd;da=Hc;P=Cc;rd=zc;Hc=Ha;Cc=Ea;zc=Ua;Ha=M;Ea=N;Ua=ca;M=Hc;N=Cc;ca=zc;Hc=ua;Cc=oa;zc=Wa;ua=Y;oa=S;Wa=aa;Y=Hc;S=Cc;aa=zc;Hc=G;Cc=Qa;zc=X;G=y;Qa=fa;X=T;y=Hc;fa=Cc;T=zc;sa-=3;Wd=!0}else Wd=!1;var Gd,Hd,se,ud,vd,wd,Id,te,de,Jd,Xd,Dd,ue,Je;switch(sa){case 0:Gd=Ha;Hd=Ea;se=Ua;ud=R;vd=w;wd=B;Id=v;te=C;de=U;Jd=A;Xd=E;Dd=z;ue=Ka;Je=Da;break;case 1:Gd=ua;Hd=oa;se=Wa;ud=v;vd=C;wd=U;Id=A;te=E;de=z;Jd=R;Xd=w;Dd=B;ue=Da;Je=xb;break;default:Gd=G,Hd=Qa,se=X,ud=A,vd=E,wd=z,Id=R,te=w,de=B,Jd=v,Xd=C,Dd=U,ue=xb,Je=Ka}if(0>va){Gd=-Gd;Hd=-Hd;se=-se;ud=-ud;vd=-vd;wd=-wd;Hc=Id;Cc=te;zc=de;Id=Jd;te=Xd;de=Dd;Jd=Hc;Xd=Cc;Dd=zc;var nc=ue;ue=Je;Je=nc}Gd+=l;Hd+=g;se+=k;var ve=1,Ke=0,Kd=ud*u+vd*I+wd*J;Kd<ve&&(ve=Kd,Ke=0);-Kd<ve&&(ve=-Kd,Ke=1);Kd=ud*Gb+vd*Be+wd*D;Kd<ve&&(ve=Kd,Ke=2);-Kd<ve&&(ve=-Kd,Ke=3);Kd=ud*da+vd*P+wd*rd;Kd<ve&&(ve=Kd,Ke=4);-Kd<ve&&(ve=-Kd,Ke=5);var gd,xd,pd,hd,id,jd,Jc,Kc,Lc,Tc,kd,md;switch(Ke){case 0:gd=M+Y;xd=N+S;pd=ca+aa;gd+=y;xd+=fa;pd+=T;hd=M-Y;id=N-S;jd=ca-aa;hd+=y;id+=fa;jd+=T;Jc=M-Y;Kc=N-S;Lc=ca-aa;Jc-=y;Kc-=fa;Lc-=T;Tc=M+Y;kd=N+S;md=ca+aa;Tc-=y;kd-=fa;md-=T;break;case 1:gd=Y-M;xd=S-N;pd=aa-ca;gd+=y;xd+=fa;pd+=T;hd=Y-M;id=S-N;jd=aa-ca;hd-=y;id-=fa;jd-=T;Jc=M+Y;Kc=N+S;Lc=ca+aa;Jc=-Jc;Kc=-Kc;Lc=-Lc;Jc-=y;Kc-=fa;Lc-=T;Tc=M+Y;kd=N+S;md=ca+aa;Tc=-Tc;kd=-kd;md=-md;Tc+=y;kd+=fa;md+=T;break;case 2:gd=M+Y;xd=N+S;pd=ca+aa;gd+=y;xd+=fa;pd+=T;hd=M+Y;id=N+S;jd=ca+aa;hd-=y;id-=fa;jd-=T;Jc=Y-M;Kc=S-N;Lc=aa-ca;Jc-=y;Kc-=fa;Lc-=T;Tc=Y-M;kd=S-N;md=aa-ca;Tc+=y;kd+=fa;md+=T;break;case 3:gd=M-Y;xd=N-S;pd=ca-aa;gd+=y;xd+=fa;pd+=T;hd=M+Y;id=N+S;jd=ca+aa;hd=-hd;id=-id;jd=-jd;hd+=y;id+=fa;jd+=T;Jc=M+Y;Kc=N+S;Lc=ca+aa;Jc=-Jc;Kc=-Kc;Lc=-Lc;Jc-=y;Kc-=fa;Lc-=T;Tc=M-Y;kd=N-S;md=ca-aa;Tc-=y;kd-=fa;md-=T;break;case 4:gd=M+Y;xd=N+S;pd=ca+aa;gd+=y;xd+=fa;pd+=T;hd=Y-M;id=S-N;jd=aa-ca;hd+=y;id+=fa;jd+=T;Jc=M+Y;Kc=N+S;Lc=ca+aa;Jc=-Jc;Kc=-Kc;Lc=-Lc;Jc+=y;Kc+=fa;Lc+=T;Tc=M-Y;kd=N-S;md=ca-aa;Tc+=y;kd+=fa;md+=T;break;default:gd=M+Y,xd=N+S,pd=ca+aa,gd-=y,xd-=fa,pd-=T,hd=M-Y,id=N-S,jd=ca-aa,hd-=y,id-=fa,jd-=T,Jc=M+Y,Kc=N+S,Lc=ca+aa,Jc=-Jc,Kc=-Kc,Lc=-Lc,Jc-=y,Kc-=fa,Lc-=T,Tc=Y-M,kd=S-N,md=aa-ca,Tc-=y,kd-=fa,md-=T}gd+=p;xd+=r;pd+=t;hd+=p;id+=r;jd+=t;Jc+=p;Kc+=r;Lc+=t;Tc+=p;kd+=r;md+=t;var Mc=this.Dg;Mc.w=ue;Mc.Dj=Je;Mc.Tc=0;Mc.hc=0;var lc=this.Dg,Le=lc.Bc[lc.Tc++];Le.x=gd*Id+xd*te+pd*de;Le.y=gd*Jd+xd*Xd+pd*Dd;Le.Oa=gd;Le.Pa=xd;Le.Qa=pd;var Sb=this.Dg,Me=Sb.Bc[Sb.Tc++];Me.x=hd*Id+id*te+jd*de;Me.y=hd*Jd+id*Xd+jd*Dd;Me.Oa=hd;Me.Pa=id;Me.Qa=jd;var Uc=this.Dg,tf=Uc.Bc[Uc.Tc++];tf.x=Jc*Id+Kc*te+Lc*de;tf.y=Jc*Jd+Kc*Xd+Lc*Dd;tf.Oa=Jc;tf.Pa=Kc;tf.Qa=Lc;var $b=this.Dg,We=$b.Bc[$b.Tc++];We.x=Tc*Id+kd*te+md*de;We.y=Tc*Jd+kd*Xd+md*Dd;We.Oa=Tc;We.Pa=kd;We.Qa=md;this.Dg.clip();this.Dg.reduce();var Ne,uf,lf;Wd?(Ne=ud,uf=vd,lf=wd):(Ne=-ud,uf=-vd,lf=-wd);this.yh(a,Ne,uf,lf);for(var Ce=0,mf=this.Dg.Tc;Ce<mf;){var vf=Ce++,wf=this.Dg.Bc[vf],Oe,Pe,ee;Oe=wf.Oa;Pe=wf.Pa;ee=wf.Qa;Oe+=l;Pe+=g;ee+=k;var fe=(Gd-Oe)*ud+(Hd-Pe)*vd+(se-ee)*wd,Qe,xf,Xe;Qe=Oe+ud*fe;xf=Pe+vd*fe;Xe=ee+wd*fe;fe>-F.contactPersistenceThreshold&&(Wd?this.Cg(a,Oe,Pe,ee,Qe,xf,Xe,fe,vf):this.Cg(a,Qe,xf,Xe,Oe,Pe,ee,fe,vf))}}}}}}}}}});Cl.prototype={clip:function(){for(var a=0,b=this.Tc;a<b;){var e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.w+c.x,f=this.w+e.x;if(0<d&&0<f)e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa;else if(0<d&&0>=f){var h=this.ic[this.hc++];h.x=c.x;h.y=c.y;h.Oa=c.Oa;h.Pa=c.Pa;h.Qa=c.Qa;d/=d-f;f=this.ic[this.hc++];f.x=c.x+(e.x-c.x)*d;f.y=c.y+(e.y-c.y)*d;f.Oa=c.Oa+(e.Oa-c.Oa)*d;f.Pa=c.Pa+(e.Pa-c.Pa)*d;f.Qa=c.Qa+(e.Qa-c.Qa)*d}else 0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d)}a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;a=this.hc=0;for(b=this.Tc;a<b;)e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.w-c.x,f=this.w-e.x,0<d&&0<f?(e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa):0<d&&0>=f?(h=this.ic[this.hc++],h.x=c.x,h.y=c.y,h.Oa=c.Oa,h.Pa=c.Pa,h.Qa=c.Qa,d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d):0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d);a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;a=this.hc=0;for(b=this.Tc;a<b;)e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.Dj+c.y,f=this.Dj+e.y,0<d&&0<f?(e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa):0<d&&0>=f?(h=this.ic[this.hc++],h.x=c.x,h.y=c.y,h.Oa=c.Oa,h.Pa=c.Pa,h.Qa=c.Qa,d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d):0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d);a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;a=this.hc=0;for(b=this.Tc;a<b;)e=a++,c=this.Bc[e],e=this.Bc[(e+1)%this.Tc],d=this.Dj-c.y,f=this.Dj-e.y,0<d&&0<f?(e=this.ic[this.hc++],e.x=c.x,e.y=c.y,e.Oa=c.Oa,e.Pa=c.Pa,e.Qa=c.Qa):0<d&&0>=f?(h=this.ic[this.hc++],h.x=c.x,h.y=c.y,h.Oa=c.Oa,h.Pa=c.Pa,h.Qa=c.Qa,d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d):0>=d&&0<f&&(d/=d-f,f=this.ic[this.hc++],f.x=c.x+(e.x-c.x)*d,f.y=c.y+(e.y-c.y)*d,f.Oa=c.Oa+(e.Oa-c.Oa)*d,f.Pa=c.Pa+(e.Pa-c.Pa)*d,f.Qa=c.Qa+(e.Qa-c.Qa)*d);a=this.Bc;this.Bc=this.ic;this.ic=a;this.Tc=this.hc;this.hc=0},reduce:function(){if(!(4>this.Tc)){for(var a=-1/0,b=1/0,e=-1/0,c=1/0,d=null,f=null,h=null,l=null,g=0,k=this.Tc;g<k;){var m=g++,m=this.Bc[m],n=1*m.x+1*m.y,q=-1*m.x+1*m.y;n>a&&(a=n,d=m);n<b&&(b=n,f=m);q>e&&(e=q,h=m);q<c&&(c=q,l=m)}a=this.ic[this.hc++];a.x=d.x;a.y=d.y;a.Oa=d.Oa;a.Pa=d.Pa;a.Qa=d.Qa;d=this.ic[this.hc++];d.x=h.x;d.y=h.y;d.Oa=h.Oa;d.Pa=h.Pa;d.Qa=h.Qa;h=this.ic[this.hc++];h.x=f.x;h.y=f.y;h.Oa=f.Oa;h.Pa=f.Pa;h.Qa=f.Qa;f=this.ic[this.hc++];f.x=l.x;f.y=l.y;f.Oa=l.Oa;f.Pa=l.Pa;f.Qa=l.Qa;l=this.Bc;this.Bc=this.ic;this.ic=l;this.Tc=this.hc;this.hc=0}}};Bl.prototype={Xe:function(){null!=this.oi&&this.oi.clear()}};hj.ua=Uc;hj.prototype=gb(Uc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f,h,l,g,k,m;f=c.f;h=c.m;l=c.g;g=d.f;k=d.m;m=d.g;var n=b.Ib,q=e.Ib;b=b.ab;e=e.ab;var p,r,t,R,w,B;p=c.v+f*-n;r=c.A+h*-n;t=c.B+l*-n;f=c.v+f*n;R=c.A+h*n;w=c.B+l*n;h=d.v+g*-q;l=d.A+k*-q;c=d.B+m*-q;g=d.v+g*q;k=d.A+k*q;B=d.B+m*q;var v,C,u;v=p-h;C=r-l;u=t-c;f-=p;R-=r;d=w-t;m=g-h;w=k-l;g=B-c;k=-(v*f+C*R+u*d);v=v*m+C*w+u*g;C=n*n*4;u=f*m+R*w+d*g;B=q*q*4;C||B?C?B?((q=C*B-u*u)?(n=u*v+B*k,n=0>n?0:n>q?1:n/q):n=0,q=n*u+v,0>q?(q=0,n=k,n=0>n?0:n>C?1:n/C):q>B?(q=1,n=u+k,n=0>n?0:n>C?1:n/C):q/=B):(q=0,n=k,n=0>n?0:n>C?1:n/C):(n=0,q=v,q=0>q?0:q>B?1:q/B):q=n=0;p+=f*n;r+=R*n;t+=d*n;h+=m*q;l+=w*q;c+=g*q;R=p-h;f=r-l;q=t-c;n=R*R+f*f+q*q;n>=(b+e)*(b+e)||(n=Math.sqrt(n),0<n?(R*=1/n,f*=1/n,q*=1/n):(R=1,q=f=0),this.yh(a,R,f,q),this.Cg(a,p+R*-b,r+f*-b,t+q*-b,h+R*e,l+f*e,c+q*e,b+e-n,0))}});gj.ua=Uc;gj.prototype=gb(Uc.prototype,{th:function(a,b,e,c,d,f){var h=dc.cb;c=h.zj(b,e,c,d,F.enableGJKCaching?f:null,!0);a.incremental=!0;if(c!=Mc.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+c);else if(!(h.distance>b.Rb+e.Rb)){var l,g,k;f=h.closestPoint1;c=f.x;d=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,n,q;m=c-l;n=d-g;q=f-k;if(m*m+n*n+q*q){0>h.distance&&(m=-m,n=-n,q=-q);var p=m*m+n*n+q*q;0<p&&(p=1/Math.sqrt(p));m*=p;n*=p;q*=p;this.yh(a,m,n,q);c+=m*-b.Rb;d+=n*-b.Rb;f+=q*-b.Rb;l+=m*e.Rb;g+=n*e.Rb;k+=q*e.Rb;this.Cg(a,c,d,f,l,g,k,b.Rb+e.Rb-h.distance,0)}}}});Sg.ua=Uc;Sg.prototype=gb(Uc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f,h,l,g,k;f=e.Ke;h=e.Le;e=e.Me;l=-f;g=-h;k=-e;b=b.ab;var m,n,q;m=c.v-d.v;n=c.A-d.A;q=c.B-d.B;var p,r;p=d.o*m+d.i*n+d.l*q;r=d.f*m+d.m*n+d.g*q;m=d.h*m+d.j*n+d.s*q;if(l<p&&f>p&&g<r&&h>r&&k<m&&e>m){var t;n=f-(0>p?-p:p);t=h-(0>r?-r:r);var R=e-(0>m?-m:m),w,B;n<t?n<R?(l=0<p?1:-1,w=k=g=0,q=B=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),B=w=1,q=0,n=R):t<R?(0<r?(l=0,g=1):(l=0,g=-1),k=0,w=1,B=0,q=1,n=t):(0<m?(g=l=0,k=1):(g=l=0,k=-1),B=w=1,q=0,n=R);p=l*f+w*p;h=g*h+B*r;m=k*e+q*m;e=d.o*p+d.f*h+d.h*m;r=d.i*p+d.m*h+d.j*m;h=d.l*p+d.g*h+d.s*m;m=d.o*l+d.f*g+d.h*k;p=d.i*l+d.m*g+d.j*k;f=d.l*l+d.g*g+d.s*k;this.yh(a,m,p,f);this.Cg(a,c.v+m*-b,c.A+p*-b,c.B+f*-b,d.v+e,d.A+r,d.B+h,n,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=p<f?p:f,n=r<h?r:h,q=m<e?m:e,f=f>l?f:l,n=n>g?n:g,q=q>k?q:k,p-=f,l=r-n,g=m-q,e=p*p+l*l+g*g,e>=b*b||(e=Math.sqrt(e),r=d.o*f+d.f*n+d.h*q,h=d.i*f+d.m*n+d.j*q,m=d.l*f+d.g*n+d.s*q,k=d.o*p+d.f*l+d.h*g,f=d.i*p+d.m*l+d.j*g,p=d.l*p+d.g*l+d.s*g,g=k*k+f*f+p*p,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,p*=g,this.yh(a,l,f,p),this.Cg(a,c.v+l*-b,c.A+f*-b,c.B+p*-b,d.v+r,d.A+h,d.B+m,b-e,0))}});Rf.ua=Uc;Rf.prototype=gb(Uc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f=e.Ib;b=b.ab;e=e.ab;var h,l,g;h=d.f;l=d.m;g=d.g;var k,m;k=c.v;m=c.A;c=c.B;var n,q,p,r;n=d.v+h*-f;q=d.A+l*-f;p=d.B+g*-f;h=d.v+h*f;l=d.A+l*f;r=d.B+g*f;d=h-n;g=l-q;l=r-p;f=f*f*4;h=(k-n)*d+(m-q)*g+(c-p)*l;h=0>h?0:h>f?1:h/f;f=n+d*h;q+=g*h;p+=l*h;l=k-f;g=m-q;n=c-p;d=l*l+g*g+n*n;d>=(b+e)*(b+e)||(d=Math.sqrt(d),0<d?(l*=1/d,g*=1/d,n*=1/d):(l=1,n=g=0),this.yh(a,l,g,n),this.Cg(a,k+l*-b,m+g*-b,c+n*-b,f+l*e,q+g*e,p+n*e,b+e-d,0))}});Fk.ua=Uc;Fk.prototype=gb(Uc.prototype,{th:function(a,b,e,c,d){a.incremental=!1;var f,h,l;f=c.v-d.v;h=c.A-d.A;l=c.B-d.B;b=b.ab;e=e.ab;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.yh(a,f,h,l),this.Cg(a,c.v+f*-b,c.A+h*-b,c.B+l*-b,d.v+f*e,d.A+h*e,d.B+l*e,b+e-g,0))}});il.prototype={ho:function(){for(var a=this.jd;null!=a;){for(var b=a.M,e=0;3>e;){var c=e++;a.zb[c].sj=null;a.zb[c].Hi=null;if(-1==a.We[c])return this.Fc=2,!1;if(null==a.Ge[c])return this.Fc=3,!1}a=b}return!0},km:function(a,b,e){if(b.bl!=a){b.bl=a;var c=b.fi;c.x=e.x;c.y=e.y;c.z=e.z;var d=b.zb[0].xd,f=c.y-d.y,h=c.z-d.z;c.x=c.x-d.x;c.y=f;c.z=h;c=b.fi;d=b.dk;b.rj=0<c.x*d.x+c.y*d.y+c.z*d.z;if(b.rj){for(c=0;3>c;)if(d=c++,f=b.Ge[d],null!=f){h=f.fi;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.zb[0].xd,g=h.y-l.y,k=h.z-l.z;h.x=h.x-l.x;h.y=g;h.z=k;h=f.fi;l=f.dk;f.rj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.rj?this.km(a,f,e):(h=b.zb[d],h.Hi=b.zb[b.Ai[d]],h.sj=f)}for(a=0;3>a;)e=a++,c=b.Ge[e],null!=c&&(d=b.We[e],c.Ge[d]=null,c.We[d]=-1,b.Ge[e]=null,b.We[e]=-1);this.lh--;a=b.ia;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ia=a);b==this.jd&&(this.jd=this.jd.M);b==this.Rc&&(this.Rc=this.Rc.ia);b.M=null;b.ia=null;b.tk();b.M=this.De;this.De=b}else this.Fc=6}},fh:function(a,b,e,c){this.Fc=0;this.Ne=4;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;this.zb[3]=c;var d=this.mi,f=a.xd;d.x=f.x;d.y=f.y;d.z=f.z;var f=b.xd,h=d.y+f.y,l=d.z+f.z;d.x+=f.x;d.y=h;d.z=l;f=e.xd;h=d.y+f.y;l=d.z+f.z;d.x+=f.x;d.y=h;d.z=l;f=c.xd;h=d.y+f.y;l=d.z+f.z;d.x+=f.x;d.y=h;d.z=l;f=.25*d.y;h=.25*d.z;d.x=.25*d.x;d.y=f;d.z=h;d=this.De;null!=d?(this.De=d.M,d.M=null):d=new He;f=this.De;null!=f?(this.De=f.M,f.M=null):f=new He;h=this.De;null!=h?(this.De=h.M,h.M=null):h=new He;l=this.De;null!=l?(this.De=l.M,l.M=null):l=new He;d.za(a,b,e,this.mi,!0)||(this.Fc=1);f.za(a,b,c,this.mi,!0)||(this.Fc=1);h.za(a,e,c,this.mi,!0)||(this.Fc=1);l.za(b,e,c,this.mi,!0)||(this.Fc=1);d.Rg(f)||(this.Fc=1);d.Rg(h)||(this.Fc=1);d.Rg(l)||(this.Fc=1);f.Rg(h)||(this.Fc=1);f.Rg(l)||(this.Fc=1);h.Rg(l)||(this.Fc=1);this.lh++;null==this.jd?this.jd=d:(this.Rc.M=d,d.ia=this.Rc);this.Rc=d;this.lh++;null==this.jd?this.jd=f:(this.Rc.M=f,f.ia=this.Rc);this.Rc=f;this.lh++;null==this.jd?this.jd=h:(this.Rc.M=h,h.ia=this.Rc);this.Rc=h;this.lh++;null==this.jd?this.jd=l:(this.Rc.M=l,l.ia=this.Rc);this.Rc=l;return!this.Fc},Tm:function(a,b){this.zb[this.Ne++]=a;var e=b.zb[0];this.km(this.Ne,b,a.xd);if(0!=this.Fc)return!1;b=e;for(var c=null,d=null;;){if(null==b.Hi)return this.Fc=4,!1;if(null==b.sj)return this.Fc=5,!1;var f=this.De;null!=f?(this.De=f.M,f.M=null):f=new He;null==d&&(d=f);f.za(b,b.Hi,a,this.mi,!1)||(this.Fc=1);if(0!=this.Fc)return!1;this.lh++;null==this.jd?this.jd=f:(this.Rc.M=f,f.ia=this.Rc);this.Rc=f;f.Rg(b.sj)||(this.Fc=1);null==c||f.Rg(c)||(this.Fc=1);c=f;b=b.Hi;if(b==e)break}c.Rg(d)||(this.Fc=1);return 0==this.Fc?this.ho():!1}};He.prototype={za:function(a,b,e,c,d){null==d&&(d=!1);var f,h,l,g,k,m,n,q,p,r,t,R,w=a.xd;f=w.x;h=w.y;l=w.z;var B=b.xd;g=B.x;k=B.y;m=B.z;var v=e.xd;n=v.x;q=v.y;p=v.z;r=c.x;t=c.y;R=c.z;var C,u,A,E,z,vc,I,J,Gb;C=g-f;u=k-h;A=m-l;E=n-f;z=q-h;vc=p-l;I=f-r;J=h-t;Gb=l-R;var D,F,da;D=u*vc-A*z;F=A*E-C*vc;da=C*z-u*E;var P=!1;if(0>I*D+J*F+Gb*da)if(d){var rd=b;b=e;e=rd;D*=-1;F*=-1;da*=-1}else P=!0;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;var xb=this.dk;xb.x=D;xb.y=F;xb.z=da;var Ka=a.xd,Da=b.xd,ma=e.xd,Q=this.fi,L,Ha,Ea,Ua,ua,oa,Wa,G,Qa,X,M,N,ca,Y,S,aa,y,fa;L=Ka.x;Ha=Ka.y;Ea=Ka.z;Ua=Da.x;ua=Da.y;oa=Da.z;Wa=ma.x;G=ma.y;Qa=ma.z;X=Ua-L;M=ua-Ha;N=oa-Ea;ca=Wa-Ua;Y=G-ua;S=Qa-oa;aa=L-Wa;y=Ha-G;fa=Ea-Qa;var T,pa,sa;T=M*S-N*Y;pa=N*ca-X*S;sa=X*Y-M*ca;var va=L*(M*sa-N*pa)+Ha*(N*T-X*sa)+Ea*(X*pa-M*T),ra=Ua*(Y*sa-S*pa)+ua*(S*T-ca*sa)+oa*(ca*pa-Y*T),ka=Wa*(y*sa-fa*pa)+G*(fa*T-aa*sa)+Qa*(aa*pa-y*T),Z=-1,na,Aa,ya;ya=Aa=na=0;if(0>va){var K,Ba,ha,ba,Va,ga;K=Ka.x;Ba=Ka.y;ha=Ka.z;ba=Da.x;Va=Da.y;ga=Da.z;var O,za,ob;O=ba-K;za=Va-Ba;ob=ga-ha;var ja=O*K+za*Ba+ob*ha,ja=-ja/(O*O+za*za+ob*ob);if(0>ja)Q.x=K,Q.y=Ba,Q.z=ha;else if(1<ja)Q.x=ba,Q.y=Va,Q.z=ga;else{var V,Dc,fb;V=K+O*ja;Dc=Ba+za*ja;fb=ha+ob*ja;Q.x=V;Q.y=Dc;Q.z=fb}Z=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;na=Q.x;Aa=Q.y;ya=Q.z}if(0>ra){var Db,ta,wa,Fa,eb,Ia;Db=Da.x;ta=Da.y;wa=Da.z;Fa=ma.x;eb=ma.y;Ia=ma.z;var pb,Oa,la;pb=Fa-Db;Oa=eb-ta;la=Ia-wa;var Ca=pb*Db+Oa*ta+la*wa,Ca=-Ca/(pb*pb+Oa*Oa+la*la);if(0>Ca)Q.x=Db,Q.y=ta,Q.z=wa;else if(1<Ca)Q.x=Fa,Q.y=eb,Q.z=Ia;else{var Xa,Ra,hb;Xa=Db+pb*Ca;Ra=ta+Oa*Ca;hb=wa+la*Ca;Q.x=Xa;Q.y=Ra;Q.z=hb}var Jb=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;if(0>Z||Jb<Z)Z=Jb,na=Q.x,Aa=Q.y,ya=Q.z}if(0>ka){var cb,ub,jb,mb,Yb,pc;cb=Ka.x;ub=Ka.y;jb=Ka.z;mb=ma.x;Yb=ma.y;pc=ma.z;var Ya,La,vb;Ya=mb-cb;La=Yb-ub;vb=pc-jb;var H=Ya*cb+La*ub+vb*jb,H=-H/(Ya*Ya+La*La+vb*vb);if(0>H)Q.x=cb,Q.y=ub,Q.z=jb;else if(1<H)Q.x=mb,Q.y=Yb,Q.z=pc;else{var db,kb,zb;db=cb+Ya*H;kb=ub+La*H;zb=jb+vb*H;Q.x=db;Q.y=kb;Q.z=zb}var lb=Q.x*Q.x+Q.y*Q.y+Q.z*Q.z;if(0>Z||lb<Z)Z=lb,na=Q.x,Aa=Q.y,ya=Q.z}if(0<Z)Q.x=na,Q.y=Aa,Q.z=ya;else{var tb=T*T+pa*pa+sa*sa;0<tb&&(tb=1/Math.sqrt(tb));T*=tb;pa*=tb;sa*=tb;var x=T*T+pa*pa+sa*sa,x=(L*T+Ha*pa+Ea*sa)/x;na=T*x;Aa=pa*x;ya=sa*x;Q.x=na;Q.y=Aa;Q.z=ya}var W=this.fi;this.Wj=W.x*W.x+W.y*W.y+W.z*W.z;this.Ge[0]=null;this.Ge[1]=null;this.Ge[2]=null;this.We[0]=-1;this.We[1]=-1;this.We[2]=-1;return!P},Rg:function(a){for(var b=0,e=0;3>e;)for(var c=e++,d=0;3>d;){var f=d++,h=this.Ai[c];this.zb[c]==a.zb[this.Ai[f]]&&this.zb[h]==a.zb[f]&&(this.Ge[c]=a,this.We[c]=f,a.Ge[f]=this,a.We[f]=c,++b)}return 1!=b?!1:!0},tk:function(){this.ia=this.M=null;this.bl=0;this.rj=!1;this.Wj=0;this.zb[0]=null;this.zb[1]=null;this.zb[2]=null;this.Ge[0]=null;this.Ge[1]=null;this.Ge[2]=null;this.We[0]=0;this.We[1]=0;this.We[2]=0}};ie.prototype={za:function(a,b,e){var c=this.xd;c.x=a.x;c.y=a.y;c.z=a.z;a=this.jb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.qb;b.x=e.x;b.y=e.y;b.z=e.z;this.sj=this.Hi=this.M=null;return this},tk:function(){this.sj=this.Hi=this.M=null}};jl.prototype={clear:function(){this.Il.Z()}};u.prototype={za:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},Z:function(){this.z=this.y=this.x=0;return this},Lc:function(a){return new u(this.x+a.x,this.y+a.y,this.z+a.z)},ua:function(a,b){return new u(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},ue:function(a){return new u(this.x-a.x,this.y-a.y,this.z-a.z)},se:function(a){return new u(this.x*a,this.y*a,this.z*a)},Ve:function(a,b,e){return new u(this.x*a,this.y*b,this.z*e)},Yd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Hb:function(a){return new u(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},fd:function(a){var b=this.y+a.y,e=this.z+a.z;this.x+=a.x;this.y=b;this.z=e;return this},cb:function(a,b){var e=this.y+a.y*b,c=this.z+a.z*b;this.x+=a.x*b;this.y=e;this.z=c;return this},Ue:function(a){var b=this.y-a.y,e=this.z-a.z;this.x=this.x-a.x;this.y=b;this.z=e;return this},te:function(a){var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Mf:function(a,b,e){b=this.y*b;e=this.z*e;this.x=this.x*a;this.y=b;this.z=e;return this},Mb:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},pc:function(a){return new u(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},uc:function(a){return new u(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},Ac:function(a){var b,e,c;b=this.x;e=this.y;c=this.z;var d,f;d=a.o*b+a.f*e+a.h*c;f=a.i*b+a.m*e+a.j*c;c=a.l*b+a.g*e+a.s*c;b=d+a.v;e=f+a.A;c+=a.B;a=new u;a.x=b;a.y=e;a.z=c;return a},qc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},vc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Ec:function(a){var b,e,c;b=this.x;e=this.y;c=this.z;var d,f;d=a.o*b+a.f*e+a.h*c;f=a.i*b+a.m*e+a.j*c;c=a.l*b+a.g*e+a.s*c;b=d+a.v;e=f+a.A;c+=a.B;this.x=b;this.y=e;this.z=c;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pe:function(){return this.x*this.x+this.y*this.y+this.z*this.z},re:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new u(this.x*a,this.y*a,this.z*a)},qe:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Jc:function(){return new u(-this.x,-this.y,-this.z)},Kc:function(){var a=-this.y,b=-this.z;this.x=-this.x;this.y=a;this.z=b;return this},de:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new u(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"}};Ja.prototype={Wf:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},Hb:function(){var a=new u;a.x=this.v;a.y=this.A;a.z=this.B;return a},Mb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},Ec:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Lc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},pc:function(){var a=new P;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},qc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Jc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},Kc:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;a=Math.sin(b);var d=Math.sin(e),f=Math.sin(c);b=Math.cos(b);e=Math.cos(e);c=Math.cos(c);this.o=e*c;this.f=-e*f;this.h=d;this.i=b*f+c*a*d;this.m=b*c-a*d*f;this.j=-e*a;this.l=a*f-b*c*d;this.g=c*a+b*d*f;this.s=b*e},uc:function(a){var b,e,c,d,f,h,l,g,k;b=a.e00;e=a.e01;c=a.e02;d=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+c*this.l;m=b*this.f+e*this.m+c*this.g;b=b*this.h+e*this.j+c*this.s;e=d*this.o+f*this.i+h*this.l;c=d*this.f+f*this.m+h*this.g;d=d*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=c;this.j=d;this.l=f;this.g=h;this.s=l},vc:function(a){var b,e,c,d,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);c=l*n;d=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=c*this.o+d*this.i+g*this.l;m=c*this.f+d*this.m+g*this.g;g=c*this.h+d*this.j+g*this.s;c=a*this.o+b*this.i+f*this.l;d=a*this.f+b*this.m+f*this.g;a=a*this.h+b*this.j+f*this.s;b=e*this.o+h*this.i+l*this.l;f=e*this.f+h*this.m+l*this.g;e=e*this.h+h*this.j+l*this.s;this.o=k;this.f=m;this.h=g;this.i=c;this.m=d;this.j=a;this.l=b;this.g=f;this.s=e},ua:function(){var a=new xa,b,e,c,d;b=this.o;e=this.m;c=this.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,c=(this.i-this.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,c=(this.h+this.l)*f,d=(this.g-this.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,c=(this.j+this.g)*f,d=(this.h-this.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f);a.x=b;a.y=e;a.z=c;a.w=d;return a},cb:function(a){var b,e,c,d;b=this.o;e=this.m;c=this.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,c=(this.i-this.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,c=(this.h+this.l)*f,d=(this.g-this.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,c=(this.j+this.g)*f,d=(this.h-this.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,d=(this.i-this.f)*f);a.x=b;a.y=e;a.z=c;a.w=d},Ac:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;var d=a.w,f=2*b,h=2*e,l=2*c;a=b*f;var g=e*h;c*=l;var k=b*h;e*=l;b*=l;f*=d;h*=d;d*=l;this.o=1-g-c;this.f=k-d;this.h=b+h;this.i=k+d;this.m=1-a-c;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new Ja;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},de:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this}};dc.pc=function(){return dc.cb};dc.prototype={zj:function(a,b,e,c,d,f){this.wj=a;this.jl=b;this.tc=e;this.Ic=c;var h=this.Na,l=this.jb,g=this.qb,k=this.closest,m=this.dir;null!=d?(null==d.oi&&(d.oi=new jl),this.Nn(d.oi)):m.Z();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var n,q,p;n=c.v-e.v;q=c.A-e.A;p=c.B-e.B;m.x=n;m.y=q;m.z=p;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.za(1,0,0)}this.ya=0;this.zf(!1);this.Af(!1);var r=this.Na[this.ya],t=this.jb[this.ya];r.x=t.x;r.y=t.y;r.z=t.z;var R=this.qb[this.ya],w=r.y-R.y,B=r.z-R.z;r.x=r.x-R.x;r.y=w;r.z=B;this.ya=1;for(var v=0;40>v;){var C=0;switch(this.ya){case 1:var u=h[0];k.x=u.x;k.y=u.y;k.z=u.z;C=1;break;case 2:var A,E,z,vc,I,J,Gb=h[0];A=Gb.x;E=Gb.y;z=Gb.z;var D=h[1];vc=D.x;I=D.y;J=D.z;var F,da,P;F=vc-A;da=I-E;P=J-z;var L=F*A+da*E+P*z,L=-L/(F*F+da*da+P*P);if(0>L){var xb=k;xb.x=A;xb.y=E;xb.z=z;C=1}else if(1<L){var Ka=k;Ka.x=vc;Ka.y=I;Ka.z=J;C=2}else{var Da,ma,Q;Da=A+F*L;ma=E+da*L;Q=z+P*L;var V=k;V.x=Da;V.y=ma;V.z=Q;C=3}break;case 3:var Ha=h[0],Ea=h[1],Ua=h[2],ua,oa,Wa,G,Qa,X,M,N,ca,Y,S,aa,y,fa,T,pa,sa,va,ra=Ha;ua=ra.x;oa=ra.y;Wa=ra.z;var ka=Ea;G=ka.x;Qa=ka.y;X=ka.z;var Z=Ua;M=Z.x;N=Z.y;ca=Z.z;Y=G-ua;S=Qa-oa;aa=X-Wa;y=M-G;fa=N-Qa;T=ca-X;pa=ua-M;sa=oa-N;va=Wa-ca;var na,Aa,ya;na=S*T-aa*fa;Aa=aa*y-Y*T;ya=Y*fa-S*y;var K=ua*(S*ya-aa*Aa)+oa*(aa*na-Y*ya)+Wa*(Y*Aa-S*na),Ba=G*(fa*ya-T*Aa)+Qa*(T*na-y*ya)+X*(y*Aa-fa*na),ha=M*(sa*ya-va*Aa)+N*(va*na-pa*ya)+ca*(pa*Aa-sa*na),ba=-1,Va,ga,O,za=0;O=ga=Va=0;if(0>K){var ob,ja,dg,Dc,fb,Db,ta=Ha;ob=ta.x;ja=ta.y;dg=ta.z;var wa=Ea;Dc=wa.x;fb=wa.y;Db=wa.z;var Fa,eb,Ia;Fa=Dc-ob;eb=fb-ja;Ia=Db-dg;var pb=Fa*ob+eb*ja+Ia*dg,pb=-pb/(Fa*Fa+eb*eb+Ia*Ia),Oa;if(0>pb){var la=k;la.x=ob;la.y=ja;la.z=dg;Oa=1}else if(1<pb){var Ca=k;Ca.x=Dc;Ca.y=fb;Ca.z=Db;Oa=2}else{var Xa,Ra,hb;Xa=ob+Fa*pb;Ra=ja+eb*pb;hb=dg+Ia*pb;var Jb=k;Jb.x=Xa;Jb.y=Ra;Jb.z=hb;Oa=3}var cb=k.x*k.x+k.y*k.y+k.z*k.z,za=Oa,ba=cb,ub=k;Va=ub.x;ga=ub.y;O=ub.z}if(0>Ba){var jb,mb,Yb,pc,Ya,La,vb=Ea;jb=vb.x;mb=vb.y;Yb=vb.z;var H=Ua;pc=H.x;Ya=H.y;La=H.z;var db,kb,zb;db=pc-jb;kb=Ya-mb;zb=La-Yb;var lb=db*jb+kb*mb+zb*Yb,lb=-lb/(db*db+kb*kb+zb*zb),tb;if(0>lb){var x=k;x.x=jb;x.y=mb;x.z=Yb;tb=1}else if(1<lb){var W=k;W.x=pc;W.y=Ya;W.z=La;tb=2}else{var ea,Bc,xc;ea=jb+db*lb;Bc=mb+kb*lb;xc=Yb+zb*lb;var Pa=k;Pa.x=ea;Pa.y=Bc;Pa.z=xc;tb=3}var qb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ba||qb<ba){var za=tb<<1,ba=qb,nb=k;Va=nb.x;ga=nb.y;O=nb.z}}if(0>ha){var Ab,Bb,ia,Ta,bb,ib,Cb=Ha;Ab=Cb.x;Bb=Cb.y;ia=Cb.z;var Ma=Ua;Ta=Ma.x;bb=Ma.y;ib=Ma.z;var Eb,le,qa;Eb=Ta-Ab;le=bb-Bb;qa=ib-ia;var Ac=Eb*Ab+le*Bb+qa*ia,Ac=-Ac/(Eb*Eb+le*le+qa*qa),Kb;if(0>Ac){var Qb=k;Qb.x=Ab;Qb.y=Bb;Qb.z=ia;Kb=1}else if(1<Ac){var Ve=k;Ve.x=Ta;Ve.y=bb;Ve.z=ib;Kb=2}else{var Ie,Yj,Zb;Ie=Ab+Eb*Ac;Yj=Bb+le*Ac;Zb=ia+qa*Ac;var xa=k;xa.x=Ie;xa.y=Yj;xa.z=Zb;Kb=3}var xh=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ba||xh<ba){var za=Kb&1|(Kb&2)<<1,ba=xh,Na=k;Va=Na.x;ga=Na.y;O=Na.z}}if(0<ba){var ab=k;ab.x=Va;ab.y=ga;ab.z=O;C=za}else{var Tb=na*na+Aa*Aa+ya*ya;0<Tb&&(Tb=1/Math.sqrt(Tb));na*=Tb;Aa*=Tb;ya*=Tb;var fc=na*na+Aa*Aa+ya*ya,fc=(ua*na+oa*Aa+Wa*ya)/fc;Va=na*fc;ga=Aa*fc;O=ya*fc;var ec=k;ec.x=Va;ec.y=ga;ec.z=O;C=7}break;case 4:var Nb=h[0],bc=h[1],Fb=h[2],mc=h[3],ac,Ob,cc,Ub,Lb,Rb,rb,Ga,qc,Ja,$c,hc,Ic,oc,Sa,ad,rc,gb,Zc,Za,mg,Ec,wb,wc,$a,sb,Ef,jf=Nb;ac=jf.x;Ob=jf.y;cc=jf.z;var Bd=bc;Ub=Bd.x;Lb=Bd.y;Rb=Bd.z;var yb=Fb;rb=yb.x;Ga=yb.y;qc=yb.z;var Pc=mc;Ja=Pc.x;$c=Pc.y;hc=Pc.z;Ic=Ub-ac;oc=Lb-Ob;Sa=Rb-cc;ad=rb-ac;rc=Ga-Ob;gb=qc-cc;Zc=Ja-ac;Za=$c-Ob;mg=hc-cc;Ec=rb-Ub;wb=Ga-Lb;wc=qc-Rb;$a=Ja-Ub;sb=$c-Lb;Ef=hc-Rb;var Zj,Xb,Gc,Ib,yh,Hb,Vb,Qc,Wb,Pb,Ud,dc;Zj=oc*gb-Sa*rc;Xb=Sa*ad-Ic*gb;Gc=Ic*rc-oc*ad;Ib=rc*mg-gb*Za;yh=gb*Zc-ad*mg;Hb=ad*Za-rc*Zc;Vb=Za*Sa-mg*oc;Qc=mg*Ic-Zc*Sa;Wb=Zc*oc-Za*Ic;Pb=sb*wc-Ef*wb;Ud=Ef*Ec-$a*wc;dc=$a*wb-sb*Ec;var sc=0<Ic*Pb+oc*Ud+Sa*dc?1:-1,uc=ac*Zj+Ob*Xb+cc*Gc,jc=ac*Ib+Ob*yh+cc*Hb,gc=ac*Vb+Ob*Qc+cc*Wb,Mc=Ub*Pb+Lb*Ud+Rb*dc,eg=-1,Wc,Rc,Fc,Oc=0;Fc=Rc=Wc=0;if(0>uc*sc){var yc,tc,sd,Bg,kc,Vd,nd,Fd,me,ic,Mb,qd,ne,oe,pe,qe,td,re,nc=Nb;yc=nc.x;tc=nc.y;sd=nc.z;var lc=bc;Bg=lc.x;kc=lc.y;Vd=lc.z;var sf=Fb;nd=sf.x;Fd=sf.y;me=sf.z;ic=Bg-yc;Mb=kc-tc;qd=Vd-sd;ne=nd-Bg;oe=Fd-kc;pe=me-Vd;qe=yc-nd;td=tc-Fd;re=sd-me;var Sc,ld,od;Sc=Mb*pe-qd*oe;ld=qd*ne-ic*pe;od=ic*oe-Mb*ne;var Sb=yc*(Mb*od-qd*ld)+tc*(qd*Sc-ic*od)+sd*(ic*ld-Mb*Sc),Uc=Bg*(oe*od-pe*ld)+kc*(pe*Sc-ne*od)+Vd*(ne*ld-oe*Sc),bd=nd*(td*od-re*ld)+Fd*(re*Sc-qe*od)+me*(qe*ld-td*Sc),cd=-1,fd,Hc,Cc,zc=0;Cc=Hc=fd=0;if(0>Sb){var Wd,kf,Ff,Cd,$b,Gd,Hd=Nb;Wd=Hd.x;kf=Hd.y;Ff=Hd.z;var se=bc;Cd=se.x;$b=se.y;Gd=se.z;var ud,vd,wd;ud=Cd-Wd;vd=$b-kf;wd=Gd-Ff;var Id=ud*Wd+vd*kf+wd*Ff,Id=-Id/(ud*ud+vd*vd+wd*wd),te;if(0>Id){var de=k;de.x=Wd;de.y=kf;de.z=Ff;te=1}else if(1<Id){var Jd=k;Jd.x=Cd;Jd.y=$b;Jd.z=Gd;te=2}else{var Xd,Dd,ue;Xd=Wd+ud*Id;Dd=kf+vd*Id;ue=Ff+wd*Id;var Je=k;Je.x=Xd;Je.y=Dd;Je.z=ue;te=3}var Yc=k.x*k.x+k.y*k.y+k.z*k.z,zc=te,cd=Yc,ve=k;fd=ve.x;Hc=ve.y;Cc=ve.z}if(0>Uc){var Ke,Kd,gd,xd,pd,hd,id=bc;Ke=id.x;Kd=id.y;gd=id.z;var jd=Fb;xd=jd.x;pd=jd.y;hd=jd.z;var Jc,Kc,Lc;Jc=xd-Ke;Kc=pd-Kd;Lc=hd-gd;var Tc=Jc*Ke+Kc*Kd+Lc*gd,Tc=-Tc/(Jc*Jc+Kc*Kc+Lc*Lc),kd;if(0>Tc){var md=k;md.x=Ke;md.y=Kd;md.z=gd;kd=1}else if(1<Tc){var Xc=k;Xc.x=xd;Xc.y=pd;Xc.z=hd;kd=2}else{var dd,Le,Wl;dd=Ke+Jc*Tc;Le=Kd+Kc*Tc;Wl=gd+Lc*Tc;var Me=k;Me.x=dd;Me.y=Le;Me.z=Wl;kd=3}var Vc=k.x*k.x+k.y*k.y+k.z*k.z;if(0>cd||Vc<cd){var zc=kd<<1,cd=Vc,tf=k;fd=tf.x;Hc=tf.y;Cc=tf.z}}if(0>bd){var ed,We,Ne,uf,lf,Ce,mf=Nb;ed=mf.x;We=mf.y;Ne=mf.z;var vf=Fb;uf=vf.x;lf=vf.y;Ce=vf.z;var wf,Oe,Pe;wf=uf-ed;Oe=lf-We;Pe=Ce-Ne;var ee=wf*ed+Oe*We+Pe*Ne,ee=-ee/(wf*wf+Oe*Oe+Pe*Pe),fe;if(0>ee){var Qe=k;Qe.x=ed;Qe.y=We;Qe.z=Ne;fe=1}else if(1<ee){var xf=k;xf.x=uf;xf.y=lf;xf.z=Ce;fe=2}else{var Xe,yf,kj;Xe=ed+wf*ee;yf=We+Oe*ee;kj=Ne+Pe*ee;var Gl=k;Gl.x=Xe;Gl.y=yf;Gl.z=kj;fe=3}var yd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>cd||yd<cd){var zc=fe&1|(fe&2)<<1,cd=yd,zd=k;fd=zd.x;Hc=zd.y;Cc=zd.z}}var Hl;if(0<cd){var Il=k;Il.x=fd;Il.y=Hc;Il.z=Cc;Hl=zc}else{var Gf=Sc*Sc+ld*ld+od*od;0<Gf&&(Gf=1/Math.sqrt(Gf));Sc*=Gf;ld*=Gf;od*=Gf;var lj=Sc*Sc+ld*ld+od*od,lj=(yc*Sc+tc*ld+sd*od)/lj;fd=Sc*lj;Hc=ld*lj;Cc=od*lj;var ak=k;ak.x=fd;ak.y=Hc;ak.z=Cc;Hl=7}var cm=k.x*k.x+k.y*k.y+k.z*k.z,Oc=Hl,eg=cm,bk=k;Wc=bk.x;Rc=bk.y;Fc=bk.z}if(0>jc*sc){var Ye,nf,zh,be,ng,Ld,Md,Nd,El,og,pg,Re,Ze,$e,Se,Sf,Hf,If,Jf=Nb;Ye=Jf.x;nf=Jf.y;zh=Jf.z;var fg=Fb;be=fg.x;ng=fg.y;Ld=fg.z;var Jl=mc;Md=Jl.x;Nd=Jl.y;El=Jl.z;og=be-Ye;pg=ng-nf;Re=Ld-zh;Ze=Md-be;$e=Nd-ng;Se=El-Ld;Sf=Ye-Md;Hf=nf-Nd;If=zh-El;var we,Yd,Zd;we=pg*Se-Re*$e;Yd=Re*Ze-og*Se;Zd=og*$e-pg*Ze;var dm=Ye*(pg*Zd-Re*Yd)+nf*(Re*we-og*Zd)+zh*(og*Yd-pg*we),gg=be*($e*Zd-Se*Yd)+ng*(Se*we-Ze*Zd)+Ld*(Ze*Yd-$e*we),ze=Md*(Hf*Zd-If*Yd)+Nd*(If*we-Sf*Zd)+El*(Sf*Yd-Hf*we),Ed=-1,Od,qg,Ah,rg=0;Ah=qg=Od=0;if(0>dm){var De,Te,of,Kf,sg,Lf,Mf=Nb;De=Mf.x;Te=Mf.y;of=Mf.z;var Nf=Fb;Kf=Nf.x;sg=Nf.y;Lf=Nf.z;var pf,Tf,tg;pf=Kf-De;Tf=sg-Te;tg=Lf-of;var Uf=pf*De+Tf*Te+tg*of,Uf=-Uf/(pf*pf+Tf*Tf+tg*tg),mj;if(0>Uf){var ug=k;ug.x=De;ug.y=Te;ug.z=of;mj=1}else if(1<Uf){var Of=k;Of.x=Kf;Of.y=sg;Of.z=Lf;mj=2}else{var Vf,zf,Cg;Vf=De+pf*Uf;zf=Te+Tf*Uf;Cg=of+tg*Uf;var Dg=k;Dg.x=Vf;Dg.y=zf;Dg.z=Cg;mj=3}var Ae=k.x*k.x+k.y*k.y+k.z*k.z,rg=mj,Ed=Ae,vg=k;Od=vg.x;qg=vg.y;Ah=vg.z}if(0>gg){var Wf,Xf,qf,Eg,Nc,wg,xg=Fb;Wf=xg.x;Xf=xg.y;qf=xg.z;var yg=mc;Eg=yg.x;Nc=yg.y;wg=yg.z;var hg,Af,Pf;hg=Eg-Wf;Af=Nc-Xf;Pf=wg-qf;var Yf=hg*Wf+Af*Xf+Pf*qf,Yf=-Yf/(hg*hg+Af*Af+Pf*Pf),Ad;if(0>Yf){var Sd=k;Sd.x=Wf;Sd.y=Xf;Sd.z=qf;Ad=1}else if(1<Yf){var Td=k;Td.x=Eg;Td.y=Nc;Td.z=wg;Ad=2}else{var ce,Tg,ke;ce=Wf+hg*Yf;Tg=Xf+Af*Yf;ke=qf+Pf*Yf;var He=k;He.x=ce;He.y=Tg;He.z=ke;Ad=3}var Pd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Ed||Pd<Ed){var rg=Ad<<1,Ed=Pd,$d=k;Od=$d.x;qg=$d.y;Ah=$d.z}}if(0>ze){var nj,oj,Bh,hf,Ge,Ch,Dh=Nb;nj=Dh.x;oj=Dh.y;Bh=Dh.z;var Eh=mc;hf=Eh.x;Ge=Eh.y;Ch=Eh.z;var Fh,Gh,Hh;Fh=hf-nj;Gh=Ge-oj;Hh=Ch-Bh;var Fg=Fh*nj+Gh*oj+Hh*Bh,Fg=-Fg/(Fh*Fh+Gh*Gh+Hh*Hh),Ih;if(0>Fg){var Jh=k;Jh.x=nj;Jh.y=oj;Jh.z=Bh;Ih=1}else if(1<Fg){var Kh=k;Kh.x=hf;Kh.y=Ge;Kh.z=Ch;Ih=2}else{var pj,Ug,qj;pj=nj+Fh*Fg;Ug=oj+Gh*Fg;qj=Bh+Hh*Fg;var ae=k;ae.x=pj;ae.y=Ug;ae.z=qj;Ih=3}var Rd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Ed||Rd<Ed){var rg=Ih&1|(Ih&2)<<1,Ed=Rd,je=k;Od=je.x;qg=je.y;Ah=je.z}}var ck;if(0<Ed){var ie=k;ie.x=Od;ie.y=qg;ie.z=Ah;ck=rg}else{var Vg=we*we+Yd*Yd+Zd*Zd;0<Vg&&(Vg=1/Math.sqrt(Vg));we*=Vg;Yd*=Vg;Zd*=Vg;var rj=we*we+Yd*Yd+Zd*Zd,rj=(Ye*we+nf*Yd+zh*Zd)/rj;Od=we*rj;qg=Yd*rj;Ah=Zd*rj;var dk=k;dk.x=Od;dk.y=qg;dk.z=Ah;ck=7}var ek=k.x*k.x+k.y*k.y+k.z*k.z;if(0>eg||ek<eg){var Oc=ck&1|(ck&6)<<1,eg=ek,fk=k;Wc=fk.x;Rc=fk.y;Fc=fk.z}}if(0>gc*sc){var zg,Gg,Lh,gk,sj,Wg,Xg,Yg,Mh,Zg,$g,ah,bh,ch,Hg,Nh,Oh,Ph,Qh=Nb;zg=Qh.x;Gg=Qh.y;Lh=Qh.z;var Rh=bc;gk=Rh.x;sj=Rh.y;Wg=Rh.z;var hk=mc;Xg=hk.x;Yg=hk.y;Mh=hk.z;Zg=gk-zg;$g=sj-Gg;ah=Wg-Lh;bh=Xg-gk;ch=Yg-sj;Hg=Mh-Wg;Nh=zg-Xg;Oh=Gg-Yg;Ph=Lh-Mh;var af,bf,cf;af=$g*Hg-ah*ch;bf=ah*bh-Zg*Hg;cf=Zg*ch-$g*bh;var Ee=zg*($g*cf-ah*bf)+Gg*(ah*af-Zg*cf)+Lh*(Zg*bf-$g*af),rf=gk*(ch*cf-Hg*bf)+sj*(Hg*af-bh*cf)+Wg*(bh*bf-ch*af),Bf=Xg*(Oh*cf-Ph*bf)+Yg*(Ph*af-Nh*cf)+Mh*(Nh*bf-Oh*af),ge=-1,xe,Sh,Th,Hk=0;Th=Sh=xe=0;if(0>Ee){var Zf,ig,jg,Ig,tj,Uh,Vh=Nb;Zf=Vh.x;ig=Vh.y;jg=Vh.z;var Wh=bc;Ig=Wh.x;tj=Wh.y;Uh=Wh.z;var Xh,Yh,Zh;Xh=Ig-Zf;Yh=tj-ig;Zh=Uh-jg;var Jg=Xh*Zf+Yh*ig+Zh*jg,Jg=-Jg/(Xh*Xh+Yh*Yh+Zh*Zh),uj;if(0>Jg){var $h=k;$h.x=Zf;$h.y=ig;$h.z=jg;uj=1}else if(1<Jg){var ai=k;ai.x=Ig;ai.y=tj;ai.z=Uh;uj=2}else{var vj,dh,ik;vj=Zf+Xh*Jg;dh=ig+Yh*Jg;ik=jg+Zh*Jg;var jk=k;jk.x=vj;jk.y=dh;jk.z=ik;uj=3}var ag=k.x*k.x+k.y*k.y+k.z*k.z,Hk=uj,ge=ag,Ik=k;xe=Ik.x;Sh=Ik.y;Th=Ik.z}if(0>rf){var wj,xj,bi,Qd,kk,ci,di=bc;wj=di.x;xj=di.y;bi=di.z;var ei=mc;Qd=ei.x;kk=ei.y;ci=ei.z;var fi,gi,hi;fi=Qd-wj;gi=kk-xj;hi=ci-bi;var Kg=fi*wj+gi*xj+hi*bi,Kg=-Kg/(fi*fi+gi*gi+hi*hi),yj;if(0>Kg){var ii=k;ii.x=wj;ii.y=xj;ii.z=bi;yj=1}else if(1<Kg){var ji=k;ji.x=Qd;ji.y=kk;ji.z=ci;yj=2}else{var zj,eh,lk;zj=wj+fi*Kg;eh=xj+gi*Kg;lk=bi+hi*Kg;var mk=k;mk.x=zj;mk.y=eh;mk.z=lk;yj=3}var Jk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ge||Jk<ge){var Hk=yj<<1,ge=Jk,Kk=k;xe=Kk.x;Sh=Kk.y;Th=Kk.z}}if(0>Bf){var Aj,Bj,ki,Lk,nk,li,mi=Nb;Aj=mi.x;Bj=mi.y;ki=mi.z;var ni=mc;Lk=ni.x;nk=ni.y;li=ni.z;var oi,pi,qi;oi=Lk-Aj;pi=nk-Bj;qi=li-ki;var Lg=oi*Aj+pi*Bj+qi*ki,Lg=-Lg/(oi*oi+pi*pi+qi*qi),ri;if(0>Lg){var si=k;si.x=Aj;si.y=Bj;si.z=ki;ri=1}else if(1<Lg){var ti=k;ti.x=Lk;ti.y=nk;ti.z=li;ri=2}else{var Cj,fh,Dj;Cj=Aj+oi*Lg;fh=Bj+pi*Lg;Dj=ki+qi*Lg;var ok=k;ok.x=Cj;ok.y=fh;ok.z=Dj;ri=3}var Mk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ge||Mk<ge){var Hk=ri&1|(ri&2)<<1,ge=Mk,Nk=k;xe=Nk.x;Sh=Nk.y;Th=Nk.z}}var pk;if(0<ge){var Ok=k;Ok.x=xe;Ok.y=Sh;Ok.z=Th;pk=Hk}else{var gh=af*af+bf*bf+cf*cf;0<gh&&(gh=1/Math.sqrt(gh));af*=gh;bf*=gh;cf*=gh;var Ej=af*af+bf*bf+cf*cf,Ej=(zg*af+Gg*bf+Lh*cf)/Ej;xe=af*Ej;Sh=bf*Ej;Th=cf*Ej;var qk=k;qk.x=xe;qk.y=Sh;qk.z=Th;pk=7}var rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>eg||rk<eg){var Oc=pk&3|(pk&4)<<1,eg=rk,sk=k;Wc=sk.x;Rc=sk.y;Fc=sk.z}}if(0>Mc*sc){var Ag,Mg,ui,tk,Fj,hh,ih,jh,vi,kh,lh,mh,nh,oh,Ng,wi,xi,yi,zi=bc;Ag=zi.x;Mg=zi.y;ui=zi.z;var Ai=Fb;tk=Ai.x;Fj=Ai.y;hh=Ai.z;var uk=mc;ih=uk.x;jh=uk.y;vi=uk.z;kh=tk-Ag;lh=Fj-Mg;mh=hh-ui;nh=ih-tk;oh=jh-Fj;Ng=vi-hh;wi=Ag-ih;xi=Mg-jh;yi=ui-vi;var df,ef,ff;df=lh*Ng-mh*oh;ef=mh*nh-kh*Ng;ff=kh*oh-lh*nh;var Df=Ag*(lh*ff-mh*ef)+Mg*(mh*df-kh*ff)+ui*(kh*ef-lh*df),Qf=tk*(oh*ff-Ng*ef)+Fj*(Ng*df-nh*ff)+hh*(nh*ef-oh*df),Cf=ih*(xi*ff-yi*ef)+jh*(yi*df-wi*ff)+vi*(wi*ef-xi*df),he=-1,ye,Bi,Ci,Pk=0;Ci=Bi=ye=0;if(0>Df){var $f,kg,lg,Og,Gj,Di,Ei=bc;$f=Ei.x;kg=Ei.y;lg=Ei.z;var Fi=Fb;Og=Fi.x;Gj=Fi.y;Di=Fi.z;var Gi,Hi,Ii;Gi=Og-$f;Hi=Gj-kg;Ii=Di-lg;var Pg=Gi*$f+Hi*kg+Ii*lg,Pg=-Pg/(Gi*Gi+Hi*Hi+Ii*Ii),Hj;if(0>Pg){var Ji=k;Ji.x=$f;Ji.y=kg;Ji.z=lg;Hj=1}else if(1<Pg){var Ki=k;Ki.x=Og;Ki.y=Gj;Ki.z=Di;Hj=2}else{var Ij,ph,vk;Ij=$f+Gi*Pg;ph=kg+Hi*Pg;vk=lg+Ii*Pg;var wk=k;wk.x=Ij;wk.y=ph;wk.z=vk;Hj=3}var bg=k.x*k.x+k.y*k.y+k.z*k.z,Pk=Hj,he=bg,Qk=k;ye=Qk.x;Bi=Qk.y;Ci=Qk.z}if(0>Qf){var Jj,Kj,Li,Fe,xk,Mi,Ni=Fb;Jj=Ni.x;Kj=Ni.y;Li=Ni.z;var Oi=mc;Fe=Oi.x;xk=Oi.y;Mi=Oi.z;var Pi,Qi,Ri;Pi=Fe-Jj;Qi=xk-Kj;Ri=Mi-Li;var Qg=Pi*Jj+Qi*Kj+Ri*Li,Qg=-Qg/(Pi*Pi+Qi*Qi+Ri*Ri),Lj;if(0>Qg){var Si=k;Si.x=Jj;Si.y=Kj;Si.z=Li;Lj=1}else if(1<Qg){var Ti=k;Ti.x=Fe;Ti.y=xk;Ti.z=Mi;Lj=2}else{var Mj,qh,yk;Mj=Jj+Pi*Qg;qh=Kj+Qi*Qg;yk=Li+Ri*Qg;var zk=k;zk.x=Mj;zk.y=qh;zk.z=yk;Lj=3}var Rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>he||Rk<he){var Pk=Lj<<1,he=Rk,Sk=k;ye=Sk.x;Bi=Sk.y;Ci=Sk.z}}if(0>Cf){var Nj,Oj,Ui,Tk,Ak,Vi,Wi=bc;Nj=Wi.x;Oj=Wi.y;Ui=Wi.z;var Xi=mc;Tk=Xi.x;Ak=Xi.y;Vi=Xi.z;var Yi,Zi,$i;Yi=Tk-Nj;Zi=Ak-Oj;$i=Vi-Ui;var Rg=Yi*Nj+Zi*Oj+$i*Ui,Rg=-Rg/(Yi*Yi+Zi*Zi+$i*$i),aj;if(0>Rg){var bj=k;bj.x=Nj;bj.y=Oj;bj.z=Ui;aj=1}else if(1<Rg){var cj=k;cj.x=Tk;cj.y=Ak;cj.z=Vi;aj=2}else{var Pj,rh,Qj;Pj=Nj+Yi*Rg;rh=Oj+Zi*Rg;Qj=Ui+$i*Rg;var Bk=k;Bk.x=Pj;Bk.y=rh;Bk.z=Qj;aj=3}var Uk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>he||Uk<he){var Pk=aj&1|(aj&2)<<1,he=Uk,Vk=k;ye=Vk.x;Bi=Vk.y;Ci=Vk.z}}var Wk;if(0<he){var Xk=k;Xk.x=ye;Xk.y=Bi;Xk.z=Ci;Wk=Pk}else{var sh=df*df+ef*ef+ff*ff;0<sh&&(sh=1/Math.sqrt(sh));df*=sh;ef*=sh;ff*=sh;var Rj=df*df+ef*ef+ff*ff,Rj=(Ag*df+Mg*ef+ui*ff)/Rj;ye=df*Rj;Bi=ef*Rj;Ci=ff*Rj;var Ck=k;Ck.x=ye;Ck.y=Bi;Ck.z=Ci;Wk=7}var Yk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>eg||Yk<eg){var Oc=Wk<<1,eg=Yk,Dk=k;Wc=Dk.x;Rc=Dk.y;Fc=Dk.z}}if(0<eg){var th=k;th.x=Wc;th.y=Rc;th.z=Fc;C=Oc}else k.Z(),C=15}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.ya){case 1:this.Pn();break;case 2:this.El();break;case 3:this.Ll()}if(4==this.ya){var Sj=this.kn(a,b,e,c,h,l,g);if(0!=Sj)return this.distance=0,Sj;this.distance=-this.depth;return 0}this.distance=0;return 1}this.Gm(C);m.x=k.x;m.y=k.y;m.z=k.z;var uh=m,gf=-uh.y,cg=-uh.z;uh.x=-uh.x;uh.y=gf;uh.z=cg;this.zf(!1);this.Af(!1);var Tj=this.Na[this.ya],Uj=this.jb[this.ya];Tj.x=Uj.x;Tj.y=Uj.y;Tj.z=Uj.z;var Ue=Tj,vh=this.qb[this.ya],Rf=Ue.y-vh.y,Sg=Ue.z-vh.z;Ue.x=Ue.x-vh.x;Ue.y=Rf;Ue.z=Sg;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var Vj=h[this.ya];if(1E-8>Vj.x*m.x+Vj.y*m.y+Vj.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.sm(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=d&&null!=d.oi&&this.Wn(d.oi),0;this.ya++;++v}return 2},fm:function(a,b,e,c,d,f,h){this.wj=a;this.jl=b;this.tc=e;this.Ic=c;var l=this.Na,g=this.closest,k=this.dir,m,n,q;m=c.v-e.v;n=c.A-e.A;q=c.B-e.B;k.x=m;k.y=n;k.z=q;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.za(1,0,0);this.ya=0;if(null!=this.wj)this.zf(!0);else{var p=this.jb[this.ya];p.x=this.tc.v;p.y=this.tc.A;p.z=this.tc.B}this.Af(!0);var r=this.Na[this.ya],t=this.jb[this.ya];r.x=t.x;r.y=t.y;r.z=t.z;var R=this.qb[this.ya],w=r.y-R.y,B=r.z-R.z;r.x=r.x-R.x;r.y=w;r.z=B;this.ya=1;var v=0,C=0,u=this.Tn,A=this.Sn;u.Z();A.x=f.x;A.y=f.y;A.z=f.z;var E=A.y-d.y,z=A.z-d.z;A.x=A.x-d.x;A.y=E;for(A.z=z;40>v;){var vc=0;switch(this.ya){case 1:var I=l[0];g.x=I.x;g.y=I.y;g.z=I.z;vc=1;break;case 2:var J,Gb,F,D,da,P,L=l[0];J=L.x;Gb=L.y;F=L.z;var xb=l[1];D=xb.x;da=xb.y;P=xb.z;var Ka,Da,ma;Ka=D-J;Da=da-Gb;ma=P-F;var Q=Ka*J+Da*Gb+ma*F,Q=-Q/(Ka*Ka+Da*Da+ma*ma);if(0>Q){var V=g;V.x=J;V.y=Gb;V.z=F;vc=1}else if(1<Q){var Ha=g;Ha.x=D;Ha.y=da;Ha.z=P;vc=2}else{var Ea,Ua,ua;Ea=J+Ka*Q;Ua=Gb+Da*Q;ua=F+ma*Q;var oa=g;oa.x=Ea;oa.y=Ua;oa.z=ua;vc=3}break;case 3:var Wa=l[0],G=l[1],Qa=l[2],X,M,N,ca,Y,S,aa,y,fa,T,pa,sa,va,ra,ka,Z,na,Aa,ya=Wa;X=ya.x;M=ya.y;N=ya.z;var K=G;ca=K.x;Y=K.y;S=K.z;var Ba=Qa;aa=Ba.x;y=Ba.y;fa=Ba.z;T=ca-X;pa=Y-M;sa=S-N;va=aa-ca;ra=y-Y;ka=fa-S;Z=X-aa;na=M-y;Aa=N-fa;var ha,ba,Va;ha=pa*ka-sa*ra;ba=sa*va-T*ka;Va=T*ra-pa*va;var ga=X*(pa*Va-sa*ba)+M*(sa*ha-T*Va)+N*(T*ba-pa*ha),O=ca*(ra*Va-ka*ba)+Y*(ka*ha-va*Va)+S*(va*ba-ra*ha),za=aa*(na*Va-Aa*ba)+y*(Aa*ha-Z*Va)+fa*(Z*ba-na*ha),ob=-1,ja,dg,Dc,fb=0;Dc=dg=ja=0;if(0>ga){var Db,ta,wa,Fa,eb,Ia,pb=Wa;Db=pb.x;ta=pb.y;wa=pb.z;var Oa=G;Fa=Oa.x;eb=Oa.y;Ia=Oa.z;var la,Ca,Xa;la=Fa-Db;Ca=eb-ta;Xa=Ia-wa;var Ra=la*Db+Ca*ta+Xa*wa,Ra=-Ra/(la*la+Ca*Ca+Xa*Xa),hb;if(0>Ra){var Jb=g;Jb.x=Db;Jb.y=ta;Jb.z=wa;hb=1}else if(1<Ra){var cb=g;cb.x=Fa;cb.y=eb;cb.z=Ia;hb=2}else{var ub,jb,mb;ub=Db+la*Ra;jb=ta+Ca*Ra;mb=wa+Xa*Ra;var Yb=g;Yb.x=ub;Yb.y=jb;Yb.z=mb;hb=3}var pc=g.x*g.x+g.y*g.y+g.z*g.z,fb=hb,ob=pc,Ya=g;ja=Ya.x;dg=Ya.y;Dc=Ya.z}if(0>O){var La,vb,H,db,kb,zb,lb=G;La=lb.x;vb=lb.y;H=lb.z;var tb=Qa;db=tb.x;kb=tb.y;zb=tb.z;var x,W,ea;x=db-La;W=kb-vb;ea=zb-H;var Bc=x*La+W*vb+ea*H,Bc=-Bc/(x*x+W*W+ea*ea),xc;if(0>Bc){var Pa=g;Pa.x=La;Pa.y=vb;Pa.z=H;xc=1}else if(1<Bc){var qb=g;qb.x=db;qb.y=kb;qb.z=zb;xc=2}else{var nb,Ab,Bb;nb=La+x*Bc;Ab=vb+W*Bc;Bb=H+ea*Bc;var ia=g;ia.x=nb;ia.y=Ab;ia.z=Bb;xc=3}var Ta=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ob||Ta<ob){var fb=xc<<1,ob=Ta,bb=g;ja=bb.x;dg=bb.y;Dc=bb.z}}if(0>za){var ib,Cb,Ma,Eb,le,qa,Ac=Wa;ib=Ac.x;Cb=Ac.y;Ma=Ac.z;var Kb=Qa;Eb=Kb.x;le=Kb.y;qa=Kb.z;var Qb,Ve,Ie;Qb=Eb-ib;Ve=le-Cb;Ie=qa-Ma;var xa=Qb*ib+Ve*Cb+Ie*Ma,xa=-xa/(Qb*Qb+Ve*Ve+Ie*Ie),Zb;if(0>xa){var Na=g;Na.x=ib;Na.y=Cb;Na.z=Ma;Zb=1}else if(1<xa){var xh=g;xh.x=Eb;xh.y=le;xh.z=qa;Zb=2}else{var ab,Ga,Tb;ab=ib+Qb*xa;Ga=Cb+Ve*xa;Tb=Ma+Ie*xa;var fc=g;fc.x=ab;fc.y=Ga;fc.z=Tb;Zb=3}var ec=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ob||ec<ob){var fb=Zb&1|(Zb&2)<<1,ob=ec,Nb=g;ja=Nb.x;dg=Nb.y;Dc=Nb.z}}if(0<ob){var bc=g;bc.x=ja;bc.y=dg;bc.z=Dc;vc=fb}else{var Fb=ha*ha+ba*ba+Va*Va;0<Fb&&(Fb=1/Math.sqrt(Fb));ha*=Fb;ba*=Fb;Va*=Fb;var mc=ha*ha+ba*ba+Va*Va,mc=(X*ha+M*ba+N*Va)/mc;ja=ha*mc;dg=ba*mc;Dc=Va*mc;var ac=g;ac.x=ja;ac.y=dg;ac.z=Dc;vc=7}break;case 4:var Ob=l[0],cc=l[1],Ub=l[2],Lb=l[3],Rb,rb,Sa,qc,Ja,$c,hc,Ic,oc,gb,ad,rc,Za,Zc,wb,$a,Ec,sb,wc,yb,Xb,Ef,jf,Bd,Ib,Pc,Hb,Vb=Ob;Rb=Vb.x;rb=Vb.y;Sa=Vb.z;var Gc=cc;qc=Gc.x;Ja=Gc.y;$c=Gc.z;var Wb=Ub;hc=Wb.x;Ic=Wb.y;oc=Wb.z;var yh=Lb;gb=yh.x;ad=yh.y;rc=yh.z;Za=qc-Rb;Zc=Ja-rb;wb=$c-Sa;$a=hc-Rb;Ec=Ic-rb;sb=oc-Sa;wc=gb-Rb;yb=ad-rb;Xb=rc-Sa;Ef=hc-qc;jf=Ic-Ja;Bd=oc-$c;Ib=gb-qc;Pc=ad-Ja;Hb=rc-$c;var Pb,sc,Qc,dc,ic,Ud,kc,Mb,uc,jc,gc,Mc;Pb=Zc*sb-wb*Ec;sc=wb*$a-Za*sb;Qc=Za*Ec-Zc*$a;dc=Ec*Xb-sb*yb;ic=sb*wc-$a*Xb;Ud=$a*yb-Ec*wc;kc=yb*wb-Xb*Zc;Mb=Xb*Za-wc*wb;uc=wc*Zc-yb*Za;jc=Pc*Bd-Hb*jf;gc=Hb*Ef-Ib*Bd;Mc=Ib*jf-Pc*Ef;var nc=0<Za*jc+Zc*gc+wb*Mc?1:-1,Wc=Rb*Pb+rb*sc+Sa*Qc,Rc=Rb*dc+rb*ic+Sa*Ud,Fc=Rb*kc+rb*Mb+Sa*uc,Oc=qc*jc+Ja*gc+$c*Mc,yc=-1,tc,sd,lc,$b=0;lc=sd=tc=0;if(0>Wc*nc){var Vd,nd,Fd,me,Sb,Uc,qd,ne,oe,pe,qe,td,re,ed,Yc,sf,Sc,ld,od=Ob;Vd=od.x;nd=od.y;Fd=od.z;var Xc=cc;me=Xc.x;Sb=Xc.y;Uc=Xc.z;var zd=Ub;qd=zd.x;ne=zd.y;oe=zd.z;pe=me-Vd;qe=Sb-nd;td=Uc-Fd;re=qd-me;ed=ne-Sb;Yc=oe-Uc;sf=Vd-qd;Sc=nd-ne;ld=Fd-oe;var bd,cd,fd;bd=qe*Yc-td*ed;cd=td*re-pe*Yc;fd=pe*ed-qe*re;var Hc=Vd*(qe*fd-td*cd)+nd*(td*bd-pe*fd)+Fd*(pe*cd-qe*bd),Cc=me*(ed*fd-Yc*cd)+Sb*(Yc*bd-re*fd)+Uc*(re*cd-ed*bd),zc=qd*(Sc*fd-ld*cd)+ne*(ld*bd-sf*fd)+oe*(sf*cd-Sc*bd),Wd=-1,kf,Ff,Cd,dd=0;Cd=Ff=kf=0;if(0>Hc){var Gd,Hd,se,ud,vd,wd,Id=Ob;Gd=Id.x;Hd=Id.y;se=Id.z;var te=cc;ud=te.x;vd=te.y;wd=te.z;var de,Jd,Xd;de=ud-Gd;Jd=vd-Hd;Xd=wd-se;var Dd=de*Gd+Jd*Hd+Xd*se,Dd=-Dd/(de*de+Jd*Jd+Xd*Xd),ue;if(0>Dd){var Je=g;Je.x=Gd;Je.y=Hd;Je.z=se;ue=1}else if(1<Dd){var be=g;be.x=ud;be.y=vd;be.z=wd;ue=2}else{var ve,Ke,Kd;ve=Gd+de*Dd;Ke=Hd+Jd*Dd;Kd=se+Xd*Dd;var gd=g;gd.x=ve;gd.y=Ke;gd.z=Kd;ue=3}var xd=g.x*g.x+g.y*g.y+g.z*g.z,dd=ue,Wd=xd,pd=g;kf=pd.x;Ff=pd.y;Cd=pd.z}if(0>Cc){var hd,id,jd,Jc,Kc,Lc,Tc=cc;hd=Tc.x;id=Tc.y;jd=Tc.z;var kd=Ub;Jc=kd.x;Kc=kd.y;Lc=kd.z;var md,Vc,yd;md=Jc-hd;Vc=Kc-id;yd=Lc-jd;var Le=md*hd+Vc*id+yd*jd,Le=-Le/(md*md+Vc*Vc+yd*yd),Ad;if(0>Le){var Me=g;Me.x=hd;Me.y=id;Me.z=jd;Ad=1}else if(1<Le){var Nc=g;Nc.x=Jc;Nc.y=Kc;Nc.z=Lc;Ad=2}else{var tf,Sd,We;tf=hd+md*Le;Sd=id+Vc*Le;We=jd+yd*Le;var Ne=g;Ne.x=tf;Ne.y=Sd;Ne.z=We;Ad=3}var uf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Wd||uf<Wd){var dd=Ad<<1,Wd=uf,lf=g;kf=lf.x;Ff=lf.y;Cd=lf.z}}if(0>zc){var Ce,mf,vf,wf,Oe,Pe,ee=Ob;Ce=ee.x;mf=ee.y;vf=ee.z;var fe=Ub;wf=fe.x;Oe=fe.y;Pe=fe.z;var Qe,xf,Xe;Qe=wf-Ce;xf=Oe-mf;Xe=Pe-vf;var yf=Qe*Ce+xf*mf+Xe*vf,yf=-yf/(Qe*Qe+xf*xf+Xe*Xe),kj;if(0>yf){var Td=g;Td.x=Ce;Td.y=mf;Td.z=vf;kj=1}else if(1<yf){var He=g;He.x=wf;He.y=Oe;He.z=Pe;kj=2}else{var ce,ke,Ae;ce=Ce+Qe*yf;ke=mf+xf*yf;Ae=vf+Xe*yf;var Gf=g;Gf.x=ce;Gf.y=ke;Gf.z=Ae;kj=3}var lj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Wd||lj<Wd){var dd=kj&1|(kj&2)<<1,Wd=lj,ak=g;kf=ak.x;Ff=ak.y;Cd=ak.z}}var $d;if(0<Wd){var bk=g;bk.x=kf;bk.y=Ff;bk.z=Cd;$d=dd}else{var Ye=bd*bd+cd*cd+fd*fd;0<Ye&&(Ye=1/Math.sqrt(Ye));bd*=Ye;cd*=Ye;fd*=Ye;var nf=bd*bd+cd*cd+fd*fd,nf=(Vd*bd+nd*cd+Fd*fd)/nf;kf=bd*nf;Ff=cd*nf;Cd=fd*nf;var zh=g;zh.x=kf;zh.y=Ff;zh.z=Cd;$d=7}var hf=g.x*g.x+g.y*g.y+g.z*g.z,$b=$d,yc=hf,ng=g;tc=ng.x;sd=ng.y;lc=ng.z}if(0>Rc*nc){var Ld,Md,Nd,Ge,og,pg,Re,Ze,$e,Se,Sf,Hf,If,Jf,fg,ae,we,Yd,Zd=Ob;Ld=Zd.x;Md=Zd.y;Nd=Zd.z;var je=Ub;Ge=je.x;og=je.y;pg=je.z;var gg=Lb;Re=gg.x;Ze=gg.y;$e=gg.z;Se=Ge-Ld;Sf=og-Md;Hf=pg-Nd;If=Re-Ge;Jf=Ze-og;fg=$e-pg;ae=Ld-Re;we=Md-Ze;Yd=Nd-$e;var ze,Ed,Od;ze=Sf*fg-Hf*Jf;Ed=Hf*If-Se*fg;Od=Se*Jf-Sf*If;var qg=Ld*(Sf*Od-Hf*Ed)+Md*(Hf*ze-Se*Od)+Nd*(Se*Ed-Sf*ze),Ah=Ge*(Jf*Od-fg*Ed)+og*(fg*ze-If*Od)+pg*(If*Ed-Jf*ze),rg=Re*(we*Od-Yd*Ed)+Ze*(Yd*ze-ae*Od)+$e*(ae*Ed-we*ze),De=-1,Te,of,Kf,sg=0;Kf=of=Te=0;if(0>qg){var Lf,Mf,Nf,pf,Tf,tg,Uf=Ob;Lf=Uf.x;Mf=Uf.y;Nf=Uf.z;var mj=Ub;pf=mj.x;Tf=mj.y;tg=mj.z;var ug,Of,Vf;ug=pf-Lf;Of=Tf-Mf;Vf=tg-Nf;var zf=ug*Lf+Of*Mf+Vf*Nf,zf=-zf/(ug*ug+Of*Of+Vf*Vf),Cg;if(0>zf){var Dg=g;Dg.x=Lf;Dg.y=Mf;Dg.z=Nf;Cg=1}else if(1<zf){var Pd=g;Pd.x=pf;Pd.y=Tf;Pd.z=tg;Cg=2}else{var vg,Wf,Xf;vg=Lf+ug*zf;Wf=Mf+Of*zf;Xf=Nf+Vf*zf;var qf=g;qf.x=vg;qf.y=Wf;qf.z=Xf;Cg=3}var Eg=g.x*g.x+g.y*g.y+g.z*g.z,sg=Cg,De=Eg,ie=g;Te=ie.x;of=ie.y;Kf=ie.z}if(0>Ah){var wg,xg,yg,hg,Af,Pf,Yf=Ub;wg=Yf.x;xg=Yf.y;yg=Yf.z;var Rd=Lb;hg=Rd.x;Af=Rd.y;Pf=Rd.z;var Qd,Fe,Ee;Qd=hg-wg;Fe=Af-xg;Ee=Pf-yg;var Tg=Qd*wg+Fe*xg+Ee*yg,Tg=-Tg/(Qd*Qd+Fe*Fe+Ee*Ee),rf;if(0>Tg){var ag=g;ag.x=wg;ag.y=xg;ag.z=yg;rf=1}else if(1<Tg){var Df=g;Df.x=hg;Df.y=Af;Df.z=Pf;rf=2}else{var Qf,nj,oj;Qf=wg+Qd*Tg;nj=xg+Fe*Tg;oj=yg+Ee*Tg;var Bh=g;Bh.x=Qf;Bh.y=nj;Bh.z=oj;rf=3}var bg=g.x*g.x+g.y*g.y+g.z*g.z;if(0>De||bg<De){var sg=rf<<1,De=bg,gf=g;Te=gf.x;of=gf.y;Kf=gf.z}}if(0>rg){var Ch,Dh,Eh,Fh,Gh,Hh,Fg=Ob;Ch=Fg.x;Dh=Fg.y;Eh=Fg.z;var Ih=Lb;Fh=Ih.x;Gh=Ih.y;Hh=Ih.z;var Jh,Kh,pj;Jh=Fh-Ch;Kh=Gh-Dh;pj=Hh-Eh;var Ug=Jh*Ch+Kh*Dh+pj*Eh,Ug=-Ug/(Jh*Jh+Kh*Kh+pj*pj),qj;if(0>Ug){var cg=g;cg.x=Ch;cg.y=Dh;cg.z=Eh;qj=1}else if(1<Ug){var Rf=g;Rf.x=Fh;Rf.y=Gh;Rf.z=Hh;qj=2}else{var Sg,ck,ij;Sg=Ch+Jh*Ug;ck=Dh+Kh*Ug;ij=Eh+pj*Ug;var Vg=g;Vg.x=Sg;Vg.y=ck;Vg.z=ij;qj=3}var rj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>De||rj<De){var sg=qj&1|(qj&2)<<1,De=rj,dk=g;Te=dk.x;of=dk.y;Kf=dk.z}}var ek;if(0<De){var fk=g;fk.x=Te;fk.y=of;fk.z=Kf;ek=sg}else{var zg=ze*ze+Ed*Ed+Od*Od;0<zg&&(zg=1/Math.sqrt(zg));ze*=zg;Ed*=zg;Od*=zg;var Gg=ze*ze+Ed*Ed+Od*Od,Gg=(Ld*ze+Md*Ed+Nd*Od)/Gg;Te=ze*Gg;of=Ed*Gg;Kf=Od*Gg;var Lh=g;Lh.x=Te;Lh.y=of;Lh.z=Kf;ek=7}var gk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>yc||gk<yc){var $b=ek&1|(ek&6)<<1,yc=gk,sj=g;tc=sj.x;sd=sj.y;lc=sj.z}}if(0>Fc*nc){var Wg,Xg,Yg,Mh,Zg,$g,ah,bh,ch,Hg,Nh,Oh,Ph,Qh,Rh,hk,af,bf,cf=Ob;Wg=cf.x;Xg=cf.y;Yg=cf.z;var wh=cc;Mh=wh.x;Zg=wh.y;$g=wh.z;var ej=Lb;ah=ej.x;bh=ej.y;ch=ej.z;Hg=Mh-Wg;Nh=Zg-Xg;Oh=$g-Yg;Ph=ah-Mh;Qh=bh-Zg;Rh=ch-$g;hk=Wg-ah;af=Xg-bh;bf=Yg-ch;var Bf,ge,xe;Bf=Nh*Rh-Oh*Qh;ge=Oh*Ph-Hg*Rh;xe=Hg*Qh-Nh*Ph;var Sh=Wg*(Nh*xe-Oh*ge)+Xg*(Oh*Bf-Hg*xe)+Yg*(Hg*ge-Nh*Bf),Th=Mh*(Qh*xe-Rh*ge)+Zg*(Rh*Bf-Ph*xe)+$g*(Ph*ge-Qh*Bf),Hk=ah*(af*xe-bf*ge)+bh*(bf*Bf-hk*xe)+ch*(hk*ge-af*Bf),Zf=-1,ig,jg,Ig,tj=0;Ig=jg=ig=0;if(0>Sh){var Uh,Vh,Wh,Xh,Yh,Zh,Jg=Ob;Uh=Jg.x;Vh=Jg.y;Wh=Jg.z;var uj=cc;Xh=uj.x;Yh=uj.y;Zh=uj.z;var $h,ai,vj;$h=Xh-Uh;ai=Yh-Vh;vj=Zh-Wh;var dh=$h*Uh+ai*Vh+vj*Wh,dh=-dh/($h*$h+ai*ai+vj*vj),ik;if(0>dh){var jk=g;jk.x=Uh;jk.y=Vh;jk.z=Wh;ik=1}else if(1<dh){var fj=g;fj.x=Xh;fj.y=Yh;fj.z=Zh;ik=2}else{var Ik,wj,xj;Ik=Uh+$h*dh;wj=Vh+ai*dh;xj=Wh+vj*dh;var bi=g;bi.x=Ik;bi.y=wj;bi.z=xj;ik=3}var Fk=g.x*g.x+g.y*g.y+g.z*g.z,tj=ik,Zf=Fk,kk=g;ig=kk.x;jg=kk.y;Ig=kk.z}if(0>Th){var ci,di,ei,fi,gi,hi,Kg=cc;ci=Kg.x;di=Kg.y;ei=Kg.z;var yj=Lb;fi=yj.x;gi=yj.y;hi=yj.z;var ii,ji,zj;ii=fi-ci;ji=gi-di;zj=hi-ei;var eh=ii*ci+ji*di+zj*ei,eh=-eh/(ii*ii+ji*ji+zj*zj),lk;if(0>eh){var mk=g;mk.x=ci;mk.y=di;mk.z=ei;lk=1}else if(1<eh){var Jk=g;Jk.x=fi;Jk.y=gi;Jk.z=hi;lk=2}else{var Kk,Aj,Bj;Kk=ci+ii*eh;Aj=di+ji*eh;Bj=ei+zj*eh;var ki=g;ki.x=Kk;ki.y=Aj;ki.z=Bj;lk=3}var Lk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zf||Lk<Zf){var tj=lk<<1,Zf=Lk,nk=g;ig=nk.x;jg=nk.y;Ig=nk.z}}if(0>Hk){var li,mi,ni,oi,pi,qi,Lg=Ob;li=Lg.x;mi=Lg.y;ni=Lg.z;var ri=Lb;oi=ri.x;pi=ri.y;qi=ri.z;var si,ti,Cj;si=oi-li;ti=pi-mi;Cj=qi-ni;var fh=si*li+ti*mi+Cj*ni,fh=-fh/(si*si+ti*ti+Cj*Cj),Dj;if(0>fh){var ok=g;ok.x=li;ok.y=mi;ok.z=ni;Dj=1}else if(1<fh){var Mk=g;Mk.x=oi;Mk.y=pi;Mk.z=qi;Dj=2}else{var Nk,pk,Ok;Nk=li+si*fh;pk=mi+ti*fh;Ok=ni+Cj*fh;var gh=g;gh.x=Nk;gh.y=pk;gh.z=Ok;Dj=3}var Ej=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zf||Ej<Zf){var tj=Dj&1|(Dj&2)<<1,Zf=Ej,qk=g;ig=qk.x;jg=qk.y;Ig=qk.z}}var rk;if(0<Zf){var sk=g;sk.x=ig;sk.y=jg;sk.z=Ig;rk=tj}else{var Ag=Bf*Bf+ge*ge+xe*xe;0<Ag&&(Ag=1/Math.sqrt(Ag));Bf*=Ag;ge*=Ag;xe*=Ag;var Mg=Bf*Bf+ge*ge+xe*xe,Mg=(Wg*Bf+Xg*ge+Yg*xe)/Mg;ig=Bf*Mg;jg=ge*Mg;Ig=xe*Mg;var ui=g;ui.x=ig;ui.y=jg;ui.z=Ig;rk=7}var tk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>yc||tk<yc){var $b=rk&3|(rk&4)<<1,yc=tk,Fj=g;tc=Fj.x;sd=Fj.y;lc=Fj.z}}if(0>Oc*nc){var hh,ih,jh,vi,kh,lh,mh,nh,oh,Ng,wi,xi,yi,zi,Ai,uk,df,ef,ff=cc;hh=ff.x;ih=ff.y;jh=ff.z;var gj=Ub;vi=gj.x;kh=gj.y;lh=gj.z;var hj=Lb;mh=hj.x;nh=hj.y;oh=hj.z;Ng=vi-hh;wi=kh-ih;xi=lh-jh;yi=mh-vi;zi=nh-kh;Ai=oh-lh;uk=hh-mh;df=ih-nh;ef=jh-oh;var Cf,he,ye;Cf=wi*Ai-xi*zi;he=xi*yi-Ng*Ai;ye=Ng*zi-wi*yi;var Bi=hh*(wi*ye-xi*he)+ih*(xi*Cf-Ng*ye)+jh*(Ng*he-wi*Cf),Ci=vi*(zi*ye-Ai*he)+kh*(Ai*Cf-yi*ye)+lh*(yi*he-zi*Cf),Pk=mh*(df*ye-ef*he)+nh*(ef*Cf-uk*ye)+oh*(uk*he-df*Cf),$f=-1,kg,lg,Og,Gj=0;Og=lg=kg=0;if(0>Bi){var Di,Ei,Fi,Gi,Hi,Ii,Pg=cc;Di=Pg.x;Ei=Pg.y;Fi=Pg.z;var Hj=Ub;Gi=Hj.x;Hi=Hj.y;Ii=Hj.z;var Ji,Ki,Ij;Ji=Gi-Di;Ki=Hi-Ei;Ij=Ii-Fi;var ph=Ji*Di+Ki*Ei+Ij*Fi,ph=-ph/(Ji*Ji+Ki*Ki+Ij*Ij),vk;if(0>ph){var wk=g;wk.x=Di;wk.y=Ei;wk.z=Fi;vk=1}else if(1<ph){var jj=g;jj.x=Gi;jj.y=Hi;jj.z=Ii;vk=2}else{var Qk,Jj,Kj;Qk=Di+Ji*ph;Jj=Ei+Ki*ph;Kj=Fi+Ij*ph;var Li=g;Li.x=Qk;Li.y=Jj;Li.z=Kj;vk=3}var dl=g.x*g.x+g.y*g.y+g.z*g.z,Gj=vk,$f=dl,xk=g;kg=xk.x;lg=xk.y;Og=xk.z}if(0>Ci){var Mi,Ni,Oi,Pi,Qi,Ri,Qg=Ub;Mi=Qg.x;Ni=Qg.y;Oi=Qg.z;var Lj=Lb;Pi=Lj.x;Qi=Lj.y;Ri=Lj.z;var Si,Ti,Mj;Si=Pi-Mi;Ti=Qi-Ni;Mj=Ri-Oi;var qh=Si*Mi+Ti*Ni+Mj*Oi,qh=-qh/(Si*Si+Ti*Ti+Mj*Mj),yk;if(0>qh){var zk=g;zk.x=Mi;zk.y=Ni;zk.z=Oi;yk=1}else if(1<qh){var Rk=g;Rk.x=Pi;Rk.y=Qi;Rk.z=Ri;yk=2}else{var Sk,Nj,Oj;Sk=Mi+Si*qh;Nj=Ni+Ti*qh;Oj=Oi+Mj*qh;var Ui=g;Ui.x=Sk;Ui.y=Nj;Ui.z=Oj;yk=3}var Tk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>$f||Tk<$f){var Gj=yk<<1,$f=Tk,Ak=g;kg=Ak.x;lg=Ak.y;Og=Ak.z}}if(0>Pk){var Vi,Wi,Xi,Yi,Zi,$i,Rg=cc;Vi=Rg.x;Wi=Rg.y;Xi=Rg.z;var aj=Lb;Yi=aj.x;Zi=aj.y;$i=aj.z;var bj,cj,Pj;bj=Yi-Vi;cj=Zi-Wi;Pj=$i-Xi;var rh=bj*Vi+cj*Wi+Pj*Xi,rh=-rh/(bj*bj+cj*cj+Pj*Pj),Qj;if(0>rh){var Bk=g;Bk.x=Vi;Bk.y=Wi;Bk.z=Xi;Qj=1}else if(1<rh){var Uk=g;Uk.x=Yi;Uk.y=Zi;Uk.z=$i;Qj=2}else{var Vk,Wk,Xk;Vk=Vi+bj*rh;Wk=Wi+cj*rh;Xk=Xi+Pj*rh;var sh=g;sh.x=Vk;sh.y=Wk;sh.z=Xk;Qj=3}var Rj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>$f||Rj<$f){var Gj=Qj&1|(Qj&2)<<1,$f=Rj,Ck=g;kg=Ck.x;lg=Ck.y;Og=Ck.z}}var Yk;if(0<$f){var Dk=g;Dk.x=kg;Dk.y=lg;Dk.z=Og;Yk=Gj}else{var th=Cf*Cf+he*he+ye*ye;0<th&&(th=1/Math.sqrt(th));Cf*=th;he*=th;ye*=th;var Sj=Cf*Cf+he*he+ye*ye,Sj=(hh*Cf+ih*he+jh*ye)/Sj;kg=Cf*Sj;lg=he*Sj;Og=ye*Sj;var uh=g;uh.x=kg;uh.y=lg;uh.z=Og;Yk=7}var Ek=g.x*g.x+g.y*g.y+g.z*g.z;if(0>yc||Ek<yc){var $b=Yk<<1,yc=Ek,Wj=g;tc=Wj.x;sd=Wj.y;lc=Wj.z}}if(0<yc){var Tj=g;Tj.x=tc;Tj.y=sd;Tj.z=lc;vc=$b}else g.Z(),vc=15}this.Gm(vc);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!C||4==this.ya){h.fraction=C;break}this.sm();h.fraction=C;var Uj=h.normal;Uj.x=k.x;Uj.y=k.y;Uj.z=k.z;var Ue=Uj,vh=Math.sqrt(Ue.x*Ue.x+Ue.y*Ue.y+Ue.z*Ue.z);0<vh&&(vh=1/vh);var gl=Ue.y*vh,hl=Ue.z*vh;Ue.x=Ue.x*vh;Ue.y=gl;Ue.z=hl;var Vj=h.position,Xj=this.closestPoint1;Vj.x=Xj.x;Vj.y=Xj.y;Vj.z=Xj.z;var Zk=Vj,nl=Zk.y+d.y*C,ol=Zk.z+d.z*C;Zk.x+=d.x*C;Zk.y=nl;Zk.z=ol;return!0}k.x=g.x;k.y=g.y;k.z=g.z;var $k=k,ql=-$k.y,rl=-$k.z;$k.x=-$k.x;$k.y=ql;$k.z=rl;if(null!=this.wj)this.zf(!0);else{var Kl=this.jb[this.ya];Kl.x=this.tc.v;Kl.y=this.tc.A;Kl.z=this.tc.B}this.Af(!0);var Fl=this.Na[this.ya],Ll=this.jb[this.ya];Fl.x=Ll.x;Fl.y=Ll.y;Fl.z=Ll.z;var al=Fl,Ml=this.qb[this.ya],sl=al.y-Ml.y,tl=al.z-Ml.z;al.x=al.x-Ml.x;al.y=sl;al.z=tl;var bl=l[this.ya],ul=bl.y-u.y,vl=bl.z-u.z;bl.x=bl.x-u.x;bl.y=ul;bl.z=vl;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var Nl=l[this.ya],dj=k,el=Nl.x*dj.x+Nl.y*dj.y+Nl.z*dj.z;if(0>el){if(0<=A.x*dj.x+A.y*dj.y+A.z*dj.z)break;var pl=el/(A.x*dj.x+A.y*dj.y+A.z*dj.z),C=C+pl;if(1<=C)break;var wl=u.y+A.y*pl,xl=u.z+A.z*pl;u.x=u.x+A.x*pl;u.y=wl;u.z=xl;for(var fl=0,yl=this.ya+1;fl<yl;){var zl=fl++,cl=l[zl],Ol=-pl,Al=cl.y+A.y*Ol,Bl=cl.z+A.z*Ol;cl.x=cl.x+A.x*Ol;cl.y=Al;cl.z=Bl}}for(var il=!1,jl=0,Cl=this.ya;jl<Cl;){var Pl=jl++,kl=l[Pl].x-l[this.ya].x,ll=l[Pl].y-l[this.ya].y,ml=l[Pl].z-l[this.ya].z;if(1E-8>kl*kl+ll*ll+ml*ml){il=!0;break}}il||this.ya++;++v}return!1},sm:function(){switch(this.ya){case 1:var a=this.closestPoint1,b=this.jb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,c=this.qb[0];e.x=c.x;e.y=c.y;e.z=c.z;break;case 2:var d,f,h,l=this.closest;d=l.x;f=l.y;h=l.z;var g,k,m,n,q,p,r,t,R,w,B,v,C,u,A,E,z,vc,I=this.Na[0];g=I.x;k=I.y;m=I.z;var J=this.jb[0];n=J.x;q=J.y;p=J.z;var Gb=this.qb[0];r=Gb.x;t=Gb.y;R=Gb.z;var F=this.Na[1];w=F.x;B=F.y;v=F.z;var D=this.jb[1];C=D.x;u=D.y;A=D.z;var da=this.qb[1];E=da.x;z=da.y;vc=da.z;var P,L,xb;P=w-g;L=B-k;xb=v-m;var Ka=P*P+L*L+xb*xb;Ka&&(Ka=1/Ka);var Da=((d-g)*P+(f-k)*L+(h-m)*xb)*Ka,ma,Q,V,Ha,Ea,Ua,ua,oa,Wa;ma=C-n;Q=u-q;V=A-p;Ha=n+ma*Da;Ea=q+Q*Da;Ua=p+V*Da;ma=E-r;Q=z-t;V=vc-R;ua=r+ma*Da;oa=t+Q*Da;Wa=R+V*Da;var G=this.closestPoint1;G.x=Ha;G.y=Ea;G.z=Ua;var Qa=this.closestPoint2;Qa.x=ua;Qa.y=oa;Qa.z=Wa;break;case 3:var X,M,N,ca=this.closest;X=ca.x;M=ca.y;N=ca.z;var Y,S,aa,y,fa,T,pa,sa,va,ra,ka,Z,na,Aa,ya,K,Ba,ha,ba,Va,ga,O,za,ob,ja,xa,Dc,fb=this.Na[0];Y=fb.x;S=fb.y;aa=fb.z;var Db=this.jb[0];y=Db.x;fa=Db.y;T=Db.z;var ta=this.qb[0];pa=ta.x;sa=ta.y;va=ta.z;var wa=this.Na[1];ra=wa.x;ka=wa.y;Z=wa.z;var Fa=this.jb[1];na=Fa.x;Aa=Fa.y;ya=Fa.z;var eb=this.qb[1];K=eb.x;Ba=eb.y;ha=eb.z;var Ia=this.Na[2];ba=Ia.x;Va=Ia.y;ga=Ia.z;var pb=this.jb[2];O=pb.x;za=pb.y;ob=pb.z;var Oa=this.qb[2];ja=Oa.x;xa=Oa.y;Dc=Oa.z;var la,Ca,Xa,Ra,hb,Jb,cb,ub,jb;la=ra-Y;Ca=ka-S;Xa=Z-aa;Ra=ba-Y;hb=Va-S;Jb=ga-aa;cb=X-Y;ub=M-S;jb=N-aa;var mb=la*la+Ca*Ca+Xa*Xa,Yb=la*Ra+Ca*hb+Xa*Jb,pc=Ra*Ra+hb*hb+Jb*Jb,Ya=la*cb+Ca*ub+Xa*jb,La=Ra*cb+hb*ub+Jb*jb,vb=mb*pc-Yb*Yb;vb&&(vb=1/vb);var H=(Ya*pc-La*Yb)*vb,db=(-Ya*Yb+La*mb)*vb,kb,zb,lb,tb,x,W,ea,Bc,xc;kb=na-y;zb=Aa-fa;lb=ya-T;tb=y+kb*H;x=fa+zb*H;W=T+lb*H;kb=O-y;zb=za-fa;lb=ob-T;tb+=kb*db;x+=zb*db;W+=lb*db;kb=K-pa;zb=Ba-sa;lb=ha-va;ea=pa+kb*H;Bc=sa+zb*H;xc=va+lb*H;kb=ja-pa;zb=xa-sa;lb=Dc-va;ea+=kb*db;Bc+=zb*db;xc+=lb*db;var Pa=this.closestPoint1;Pa.x=tb;Pa.y=x;Pa.z=W;var qb=this.closestPoint2;qb.x=ea;qb.y=Bc;qb.z=xc;break;default:throw Error("!?");}},Nn:function(a){var b=this.dir;a=a.Il;b.x=a.x;b.y=a.y;b.z=a.z},Wn:function(a){a=a.Il;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;var b=-a.y,e=-a.z;a.x=-a.x;a.y=b;a.z=e},Gm:function(a){this.ya=a;this.ya=(this.ya&5)+(this.ya>>1&5);this.ya=(this.ya&3)+(this.ya>>2&3);switch(a){case 2:a=this.Na[0];var b=this.Na[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.Na[1];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.Na[0];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.Na[0];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.Na[2];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[2];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[2];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.Na[0],b=this.Na[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.jb[0],b=this.jb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.qb[0],b=this.qb[3],a.x=b.x,a.y=b.y,a.z=b.z}},zf:function(a){var b,e,c,d,f,h;h=this.dir;d=h.x;f=h.y;h=h.z;var l;e=this.tc.o*d+this.tc.i*f+this.tc.l*h;l=this.tc.f*d+this.tc.m*f+this.tc.g*h;b=this.tc.h*d+this.tc.j*f+this.tc.s*h;c=this.dir;c.x=e;c.y=l;c.z=b;this.wj.Pd(this.dir,this.jb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.jb[this.ya],b=this.dir,e=this.wj.Rb,l=a.y+b.y*e,c=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=c);a=this.jb[this.ya];b=a.x;e=a.y;c=a.z;l=this.tc.o*b+this.tc.f*e+this.tc.h*c;a=this.tc.i*b+this.tc.m*e+this.tc.j*c;e=this.tc.l*b+this.tc.g*e+this.tc.s*c;b=l+this.tc.v;a+=this.tc.A;e+=this.tc.B;l=this.jb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=d;a.y=f;a.z=h},Af:function(a){var b,e,c,d,f,h;h=this.dir;d=h.x;f=h.y;h=h.z;var l;b=this.Ic.o*d+this.Ic.i*f+this.Ic.l*h;e=this.Ic.f*d+this.Ic.m*f+this.Ic.g*h;l=this.Ic.h*d+this.Ic.j*f+this.Ic.s*h;c=this.dir;c.x=-b;c.y=-e;c.z=-l;this.jl.Pd(this.dir,this.qb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.qb[this.ya],b=this.dir,e=this.jl.Rb,l=a.y+b.y*e,c=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=c);a=this.qb[this.ya];b=a.x;e=a.y;c=a.z;l=this.Ic.o*b+this.Ic.f*e+this.Ic.h*c;a=this.Ic.i*b+this.Ic.m*e+this.Ic.j*c;e=this.Ic.l*b+this.Ic.g*e+this.Ic.s*c;b=l+this.Ic.v;a+=this.Ic.A;e+=this.Ic.B;l=this.qb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=d;a.y=f;a.z=h},Pn:function(){for(var a=0;3>a;){var b=a++,e=this.dir,b=this.uj[b];e.x=b.x;e.y=b.y;e.z=b.z;this.zf(!1);this.Af(!1);e=this.Na[this.ya];b=this.jb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;var b=this.qb[this.ya],c=e.y-b.y,d=e.z-b.z;e.x=e.x-b.x;e.y=c;e.z=d;this.ya++;this.El();if(4==this.ya)break;this.ya--;e=this.dir;b=-e.y;c=-e.z;e.x=-e.x;e.y=b;e.z=c;this.zf(!1);this.Af(!1);e=this.Na[this.ya];b=this.jb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;b=this.qb[this.ya];c=e.y-b.y;d=e.z-b.z;e.x=e.x-b.x;e.y=c;e.z=d;this.ya++;this.El();if(4==this.ya)break;this.ya--}},El:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var c,d,f,h,l,g;f=this.Na[0];c=f.x;d=f.y;f=f.z;g=this.Na[1];h=g.x;l=g.y;g=g.z;c-=h;d-=l;f-=g;for(l=0;3>l;){g=l++;var k,m;g=this.uj[g];h=g.x;k=g.y;m=g.z;g=d*m-f*k;m=f*h-c*m;h=c*k-d*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.zf(!1);this.Af(!1);g=this.Na[this.ya];h=this.jb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.qb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.Ll();if(4==this.ya)break;this.ya--;g=this.dir;h=-g.y;k=-g.z;g.x=-g.x;g.y=h;g.z=k;this.zf(!1);this.Af(!1);g=this.Na[this.ya];h=this.jb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.qb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.Ll();if(4==this.ya)break;this.ya--}c=this.dir;c.x=a;c.y=b;c.z=e},Ll:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var c,d,f,h,l,g,k,m,n;f=this.Na[0];c=f.x;d=f.y;f=f.z;m=this.Na[1];h=m.x;l=m.y;g=m.z;n=this.Na[2];k=n.x;m=n.y;n=n.z;h-=c;l-=d;g-=f;c=k-c;d=m-d;m=n-f;f=l*m-g*d;m=g*c-h*m;d=h*d-l*c;h=this.dir;h.x=f;h.y=m;h.z=d;this.zf(!1);this.Af(!1);d=this.Na[this.ya];f=this.jb[this.ya];d.x=f.x;d.y=f.y;d.z=f.z;f=this.qb[this.ya];h=d.y-f.y;c=d.z-f.z;d.x=d.x-f.x;d.y=h;d.z=c;this.ya++;if(this.tm())break;this.ya--;d=this.dir;f=-d.y;h=-d.z;d.x=-d.x;d.y=f;d.z=h;this.zf(!1);this.Af(!1);d=this.Na[this.ya];f=this.jb[this.ya];d.x=f.x;d.y=f.y;d.z=f.z;f=this.qb[this.ya];h=d.y-f.y;c=d.z-f.z;d.x=d.x-f.x;d.y=h;d.z=c;this.ya++;if(this.tm())break;this.ya--;break}d=this.dir;d.x=a;d.y=b;d.z=e},tm:function(){var a=this.Na[2].x-this.Na[0].x,b=this.Na[2].y-this.Na[0].y,e=this.Na[2].z-this.Na[0].z,c=this.Na[3].x-this.Na[0].x,d=this.Na[3].y-this.Na[0].y,f=this.Na[3].z-this.Na[0].z,a=(this.Na[1].x-this.Na[0].x)*(b*f-e*d)-(this.Na[1].y-this.Na[0].y)*(a*f-e*c)+(this.Na[1].z-this.Na[0].z)*(a*d-b*c);return 1E-12<a?!0:-1E-12>a},kn:function(a,b,e,c,d,f,h){for(var l=this.Og;0<l.lh;){var g=l.jd;l.lh--;var k=g.ia,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ia=k);g==l.jd&&(l.jd=l.jd.M);g==l.Rc&&(l.Rc=l.Rc.ia);g.M=null;g.ia=null;g.tk();g.M=l.De;l.De=g}for(;0<l.Ne;){var n=l.zb[--l.Ne];n.tk();n.M=l.bf;l.bf=n}var q=this.Og,p=this.Og,r=p.bf;null!=r?(p.bf=r.M,r.M=null):r=new ie;var t=r.za(d[0],f[0],h[0]),R=this.Og,w=R.bf;null!=w?(R.bf=w.M,w.M=null):w=new ie;var B=w.za(d[1],f[1],h[1]),v=this.Og,C=v.bf;null!=C?(v.bf=C.M,C.M=null):C=new ie;var u=C.za(d[2],f[2],h[2]),A=this.Og,E=A.bf;null!=E?(A.bf=E.M,E.M=null):E=new ie;if(!q.fh(t,B,u,E.za(d[3],f[3],h[3])))return Mc.EPA_FAILED_TO_INIT;this.ya=0;for(var z=this.Na[0],vc=this.jb[0],I=this.qb[0],J=0;40>J;){for(var Gb=this.Og.jd,F=1/0,D=null;null!=Gb;){var da=Gb.M;Gb.Wj<F&&(F=Gb.Wj,D=Gb);Gb=da}var P=D,L=this.dir,V=P.dk;L.x=V.x;L.y=V.y;L.z=V.z;var Ka=L,Da=Math.sqrt(Ka.x*Ka.x+Ka.y*Ka.y+Ka.z*Ka.z);0<Da&&(Da=1/Da);var ma=Ka.y*Da,Q=Ka.z*Da;Ka.x=Ka.x*Da;Ka.y=ma;Ka.z=Q;this.zf(!1);this.Af(!1);var xa=this.Na[this.ya],Ha=this.jb[this.ya];xa.x=Ha.x;xa.y=Ha.y;xa.z=Ha.z;var Ea=xa,Ua=this.qb[this.ya],ua=Ea.y-Ua.y,oa=Ea.z-Ua.z;Ea.x=Ea.x-Ua.x;Ea.y=ua;Ea.z=oa;var Wa=P.zb[0],G=P.zb[1],Qa=P.zb[2],X=Wa.xd,M=this.dir,N=this.dir;if(1E-6>z.x*N.x+z.y*N.y+z.z*N.z-(X.x*M.x+X.y*M.y+X.z*M.z)||39==J){var ca=this.closest,Y=this.dir;ca.x=Y.x;ca.y=Y.y;ca.z=Y.z;var S=ca,aa=this.dir,y=Wa.xd,fa=this.dir,T=(aa.x*y.x+aa.y*y.y+aa.z*y.z)/(fa.x*fa.x+fa.y*fa.y+fa.z*fa.z),pa=S.y*T,sa=S.z*T;S.x=S.x*T;S.y=pa;S.z=sa;var va,ra,ka,Z=this.closest;va=Z.x;ra=Z.y;ka=Z.z;var na,Aa,ya,K,Ba,ha,ba,Va,ga,O,za,ob,ja,Na,Dc,fb,Db,ta,wa,Fa,eb,Ia,pb,Oa,la,Ca,Xa,Ra=Wa.xd;na=Ra.x;Aa=Ra.y;ya=Ra.z;var hb=Wa.jb;K=hb.x;Ba=hb.y;ha=hb.z;var Jb=Wa.qb;ba=Jb.x;Va=Jb.y;ga=Jb.z;var cb=G.xd;O=cb.x;za=cb.y;ob=cb.z;var ub=G.jb;ja=ub.x;Na=ub.y;Dc=ub.z;var jb=G.qb;fb=jb.x;Db=jb.y;ta=jb.z;var mb=Qa.xd;wa=mb.x;Fa=mb.y;eb=mb.z;var Yb=Qa.jb;Ia=Yb.x;pb=Yb.y;Oa=Yb.z;var pc=Qa.qb;la=pc.x;Ca=pc.y;Xa=pc.z;var Ya,La,vb,H,db,kb,zb,lb,tb;Ya=O-na;La=za-Aa;vb=ob-ya;H=wa-na;db=Fa-Aa;kb=eb-ya;zb=va-na;lb=ra-Aa;tb=ka-ya;var x=Ya*Ya+La*La+vb*vb,W=Ya*H+La*db+vb*kb,ea=H*H+db*db+kb*kb,Bc=Ya*zb+La*lb+vb*tb,xc=H*zb+db*lb+kb*tb,Pa=x*ea-W*W;Pa&&(Pa=1/Pa);var qb=(Bc*ea-xc*W)*Pa,nb=(-Bc*W+xc*x)*Pa,Ab,Bb,ia,Ta,bb,ib,Cb,Ma,Eb;Ab=ja-K;Bb=Na-Ba;ia=Dc-ha;Ta=K+Ab*qb;bb=Ba+Bb*qb;ib=ha+ia*qb;Ab=Ia-K;Bb=pb-Ba;ia=Oa-ha;Ta+=Ab*nb;bb+=Bb*nb;ib+=ia*nb;Ab=fb-ba;Bb=Db-Va;ia=ta-ga;Cb=ba+Ab*qb;Ma=Va+Bb*qb;Eb=ga+ia*qb;Ab=la-ba;Bb=Ca-Va;ia=Xa-ga;Cb+=Ab*nb;Ma+=Bb*nb;Eb+=ia*nb;var le=this.closestPoint1;le.x=Ta;le.y=bb;le.z=ib;var qa=this.closestPoint2;qa.x=Cb;qa.y=Ma;qa.z=Eb;var Ac=this.closest;this.depth=Math.sqrt(Ac.x*Ac.x+Ac.y*Ac.y+Ac.z*Ac.z);return Mc.SUCCEEDED}var Kb=this.Og,Qb=Kb.bf;null!=Qb?(Kb.bf=Qb.M,Qb.M=null):Qb=new ie;var Ve=Qb.za(z,vc,I);if(!this.Og.Tm(Ve,P))return Mc.EPA_FAILED_TO_ADD_VERTEX;++J}return Mc.EPA_DID_NOT_CONVERGE},ua:function(a,b,e,c,d){return this.zj(a,b,e,c,d,!0)},cb:function(a,b,e,c,d){return this.zj(a,b,e,c,d,!1)},Bf:function(a,b,e,c,d,f,h){return this.fm(a,b,e,c,d,f,h)},Vd:function(a,b,e,c,d){var f=this.$n;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.ao,l=this.bo;h.x=c.x;h.y=c.y;h.z=c.z;c=h.y-e.y;var g=h.z-e.z;h.x=h.x-e.x;h.y=c;h.z=g;l.Z();return this.fm(null,a,f,b,h,l,d)}};be.qc=function(a,b,e){var c,d,f,h;c=a.x;d=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-c;g=h-d;k=b-a;var m;m=-(l*c+g*d+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=c,e.y=d,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=c+l*m;e.y=d+g*m;e.z=a+k*m;return 3};be.uc=function(a,b,e,c){var d,f,h,l,g,k,m,n,q,p,r,t,R,w,B,v,C,u;d=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;n=e.y;q=e.z;p=l-d;r=g-f;t=k-h;R=m-l;w=n-g;B=q-k;v=d-m;C=f-n;u=h-q;var A,E,z;A=r*B-t*w;E=t*R-p*B;z=p*w-r*R;var vc=-1,I,J,Gb,F=0;Gb=J=I=0;if(0>d*(r*z-t*E)+f*(t*A-p*z)+h*(p*E-r*A)){var D;p=a.x;vc=a.y;I=a.z;r=b.x;t=b.y;D=b.z;var da;da=r-p;Gb=t-vc;J=D-I;F=-(da*p+Gb*vc+J*I)/(da*da+Gb*Gb+J*J);0>F?(c.x=p,c.y=vc,c.z=I,J=1):1<F?(c.x=r,c.y=t,c.z=D,J=2):(p+=da*F,vc+=Gb*F,I+=J*F,c.x=p,c.y=vc,c.z=I,J=3);I=c.x*c.x+c.y*c.y+c.z*c.z;F=J;vc=I;I=c.x;J=c.y;Gb=c.z}0>l*(w*z-B*E)+g*(B*A-R*z)+k*(R*E-w*A)&&(R=b.x,l=b.y,b=b.z,B=e.x,p=e.y,r=e.z,t=B-R,w=p-l,g=r-b,k=-(t*R+w*l+g*b)/(t*t+w*w+g*g),0>k?(c.x=R,c.y=l,c.z=b,b=1):1<k?(c.x=B,c.y=p,c.z=r,b=2):(R+=t*k,l+=w*k,b+=g*k,c.x=R,c.y=l,c.z=b,b=3),l=c.x*c.x+c.y*c.y+c.z*c.z,0>vc||l<vc)&&(F=b<<1,vc=l,I=c.x,J=c.y,Gb=c.z);0>m*(C*z-u*E)+n*(u*A-v*z)+q*(v*E-C*A)&&(n=a.x,m=a.y,a=a.z,v=e.x,C=e.y,b=e.z,l=v-n,u=C-m,e=b-a,q=-(l*n+u*m+e*a)/(l*l+u*u+e*e),0>q?(c.x=n,c.y=m,c.z=a,e=1):1<q?(c.x=v,c.y=C,c.z=b,e=2):(n+=l*q,m+=u*q,e=a+e*q,c.x=n,c.y=m,c.z=e,e=3),a=c.x*c.x+c.y*c.y+c.z*c.z,0>vc||a<vc)&&(F=e&1|(e&2)<<1,vc=a,I=c.x,J=c.y,Gb=c.z);if(0<vc)return c.x=I,c.y=J,c.z=Gb,F;e=A*A+E*E+z*z;0<e&&(e=1/Math.sqrt(e));A*=e;E*=e;z*=e;d=(d*A+f*E+h*z)/(A*A+E*E+z*z);I=A*d;J=E*d;Gb=z*d;c.x=I;c.y=J;c.z=Gb;return 7};be.vc=function(a,b,e,c,d){var f,h,l,g,k,m,n,q,p,r,t,R,w,B,v,C,u,A,E,z,vc,I,J,Gb,F,D,da;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;n=e.x;q=e.y;p=e.z;r=c.x;t=c.y;R=c.z;w=g-f;B=k-h;v=m-l;C=n-f;u=q-h;A=p-l;E=r-f;z=t-h;vc=R-l;I=n-g;J=q-k;Gb=p-m;F=r-g;D=t-k;da=R-m;var P,L,V,Ka,Da,ma,Q,xa,Ha,Ea,Ua,ua;P=B*A-v*u;L=v*C-w*A;V=w*u-B*C;Ka=u*vc-A*z;Da=A*E-C*vc;ma=C*z-u*E;Q=z*v-vc*B;xa=vc*w-E*v;Ha=E*B-z*w;Ea=D*Gb-da*J;Ua=da*I-F*Gb;ua=F*J-D*I;var oa=0<w*Ea+B*Ua+v*ua?1:-1,Wa=f*P+h*L+l*V,G=f*Ka+h*Da+l*ma,Qa=f*Q+h*xa+l*Ha,X=g*Ea+k*Ua+m*ua,M=-1,N,ca,Y,S=0;Y=ca=N=0;if(0>Wa*oa){var aa,y,fa,T,pa,sa,va,ra,ka,Z,na,Aa,ya,K,Ba,ha,ba,Va;aa=a.x;y=a.y;fa=a.z;T=b.x;pa=b.y;sa=b.z;va=e.x;ra=e.y;ka=e.z;Z=T-aa;na=pa-y;Aa=sa-fa;ya=va-T;K=ra-pa;Ba=ka-sa;ha=aa-va;ba=y-ra;Va=fa-ka;var ga,O,za;ga=na*Ba-Aa*K;O=Aa*ya-Z*Ba;za=Z*K-na*ya;var ob=aa*(na*za-Aa*O)+y*(Aa*ga-Z*za)+fa*(Z*O-na*ga),ja=T*(K*za-Ba*O)+pa*(Ba*ga-ya*za)+sa*(ya*O-K*ga),Na=va*(ba*za-Va*O)+ra*(Va*ga-ha*za)+ka*(ha*O-ba*ga),Dc=-1,fb,Db,ta,wa=0;ta=Db=fb=0;if(0>ob){var Fa,eb,Ia,pb,Oa,la;Fa=a.x;eb=a.y;Ia=a.z;pb=b.x;Oa=b.y;la=b.z;var Ca,Xa,Ra;Ca=pb-Fa;Xa=Oa-eb;Ra=la-Ia;var hb=Ca*Fa+Xa*eb+Ra*Ia,hb=-hb/(Ca*Ca+Xa*Xa+Ra*Ra),Jb;if(0>hb)d.x=Fa,d.y=eb,d.z=Ia,Jb=1;else if(1<hb)d.x=pb,d.y=Oa,d.z=la,Jb=2;else{var cb,ub,jb;cb=Fa+Ca*hb;ub=eb+Xa*hb;jb=Ia+Ra*hb;d.x=cb;d.y=ub;d.z=jb;Jb=3}var mb=d.x*d.x+d.y*d.y+d.z*d.z,wa=Jb,Dc=mb;fb=d.x;Db=d.y;ta=d.z}if(0>ja){var Yb,pc,Ya,La,vb,H;Yb=b.x;pc=b.y;Ya=b.z;La=e.x;vb=e.y;H=e.z;var db,kb,zb;db=La-Yb;kb=vb-pc;zb=H-Ya;var lb=db*Yb+kb*pc+zb*Ya,lb=-lb/(db*db+kb*kb+zb*zb),tb;if(0>lb)d.x=Yb,d.y=pc,d.z=Ya,tb=1;else if(1<lb)d.x=La,d.y=vb,d.z=H,tb=2;else{var x,W,ea;x=Yb+db*lb;W=pc+kb*lb;ea=Ya+zb*lb;d.x=x;d.y=W;d.z=ea;tb=3}var Bc=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Dc||Bc<Dc)wa=tb<<1,Dc=Bc,fb=d.x,Db=d.y,ta=d.z}if(0>Na){var xc,Pa,qb,nb,Ab,Bb;xc=a.x;Pa=a.y;qb=a.z;nb=e.x;Ab=e.y;Bb=e.z;var ia,Ta,bb;ia=nb-xc;Ta=Ab-Pa;bb=Bb-qb;var ib=ia*xc+Ta*Pa+bb*qb,ib=-ib/(ia*ia+Ta*Ta+bb*bb),Cb;if(0>ib)d.x=xc,d.y=Pa,d.z=qb,Cb=1;else if(1<ib)d.x=nb,d.y=Ab,d.z=Bb,Cb=2;else{var Ma,Eb,le;Ma=xc+ia*ib;Eb=Pa+Ta*ib;le=qb+bb*ib;d.x=Ma;d.y=Eb;d.z=le;Cb=3}var qa=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Dc||qa<Dc)wa=Cb&1|(Cb&2)<<1,Dc=qa,fb=d.x,Db=d.y,ta=d.z}var Ac;if(0<Dc)d.x=fb,d.y=Db,d.z=ta,Ac=wa;else{var Kb=ga*ga+O*O+za*za;0<Kb&&(Kb=1/Math.sqrt(Kb));ga*=Kb;O*=Kb;za*=Kb;var Qb=ga*ga+O*O+za*za,Qb=(aa*ga+y*O+fa*za)/Qb;fb=ga*Qb;Db=O*Qb;ta=za*Qb;d.x=fb;d.y=Db;d.z=ta;Ac=7}var Ve=d.x*d.x+d.y*d.y+d.z*d.z,S=Ac,M=Ve;N=d.x;ca=d.y;Y=d.z}if(0>G*oa){var Ie,Sa,Zb,ab,Ga,Ja,Za,Tb,fc,ec,Nb,bc,Fb,mc,ac,Ob,cc,Ub;Ie=a.x;Sa=a.y;Zb=a.z;ab=e.x;Ga=e.y;Ja=e.z;Za=c.x;Tb=c.y;fc=c.z;ec=ab-Ie;Nb=Ga-Sa;bc=Ja-Zb;Fb=Za-ab;mc=Tb-Ga;ac=fc-Ja;Ob=Ie-Za;cc=Sa-Tb;Ub=Zb-fc;var Lb,Rb,rb;Lb=Nb*ac-bc*mc;Rb=bc*Fb-ec*ac;rb=ec*mc-Nb*Fb;var gb=Ie*(Nb*rb-bc*Rb)+Sa*(bc*Lb-ec*rb)+Zb*(ec*Rb-Nb*Lb),qc=ab*(mc*rb-ac*Rb)+Ga*(ac*Lb-Fb*rb)+Ja*(Fb*Rb-mc*Lb),wb=Za*(cc*rb-Ub*Rb)+Tb*(Ub*Lb-Ob*rb)+fc*(Ob*Rb-cc*Lb),$c=-1,hc,Ic,oc,$a=0;oc=Ic=hc=0;if(0>gb){var ad,rc,sb,Zc,yb,Xb;ad=a.x;rc=a.y;sb=a.z;Zc=e.x;yb=e.y;Xb=e.z;var Ec,Ib,wc;Ec=Zc-ad;Ib=yb-rc;wc=Xb-sb;var Hb=Ec*ad+Ib*rc+wc*sb,Hb=-Hb/(Ec*Ec+Ib*Ib+wc*wc),Vb;if(0>Hb)d.x=ad,d.y=rc,d.z=sb,Vb=1;else if(1<Hb)d.x=Zc,d.y=yb,d.z=Xb,Vb=2;else{var Ef,jf,Bd;Ef=ad+Ec*Hb;jf=rc+Ib*Hb;Bd=sb+wc*Hb;d.x=Ef;d.y=jf;d.z=Bd;Vb=3}var Wb=d.x*d.x+d.y*d.y+d.z*d.z,$a=Vb,$c=Wb;hc=d.x;Ic=d.y;oc=d.z}if(0>qc){var Pc,Pb,sc,Gc,lc,dc;Pc=e.x;Pb=e.y;sc=e.z;Gc=c.x;lc=c.y;dc=c.z;var ic,kc,Qc;ic=Gc-Pc;kc=lc-Pb;Qc=dc-sc;var jc=ic*Pc+kc*Pb+Qc*sc,jc=-jc/(ic*ic+kc*kc+Qc*Qc),Mb;if(0>jc)d.x=Pc,d.y=Pb,d.z=sc,Mb=1;else if(1<jc)d.x=Gc,d.y=lc,d.z=dc,Mb=2;else{var Ud,nc,gc;Ud=Pc+ic*jc;nc=Pb+kc*jc;gc=sc+Qc*jc;d.x=Ud;d.y=nc;d.z=gc;Mb=3}var Mc=d.x*d.x+d.y*d.y+d.z*d.z;if(0>$c||Mc<$c)$a=Mb<<1,$c=Mc,hc=d.x,Ic=d.y,oc=d.z}if(0>wb){var uc,$b,Sb,Uc,Wc,Rc;uc=a.x;$b=a.y;Sb=a.z;Uc=c.x;Wc=c.y;Rc=c.z;var Fc,Oc,yc;Fc=Uc-uc;Oc=Wc-$b;yc=Rc-Sb;var tc=Fc*uc+Oc*$b+yc*Sb,tc=-tc/(Fc*Fc+Oc*Oc+yc*yc),sd;if(0>tc)d.x=uc,d.y=$b,d.z=Sb,sd=1;else if(1<tc)d.x=Uc,d.y=Wc,d.z=Rc,sd=2;else{var ed,Yc,Vd;ed=uc+Fc*tc;Yc=$b+Oc*tc;Vd=Sb+yc*tc;d.x=ed;d.y=Yc;d.z=Vd;sd=3}var nd=d.x*d.x+d.y*d.y+d.z*d.z;if(0>$c||nd<$c)$a=sd&1|(sd&2)<<1,$c=nd,hc=d.x,Ic=d.y,oc=d.z}var Fd;if(0<$c)d.x=hc,d.y=Ic,d.z=oc,Fd=$a;else{var me=Lb*Lb+Rb*Rb+rb*rb;0<me&&(me=1/Math.sqrt(me));Lb*=me;Rb*=me;rb*=me;var Vc=Lb*Lb+Rb*Rb+rb*rb,Vc=(Ie*Lb+Sa*Rb+Zb*rb)/Vc;hc=Lb*Vc;Ic=Rb*Vc;oc=rb*Vc;d.x=hc;d.y=Ic;d.z=oc;Fd=7}var yd=d.x*d.x+d.y*d.y+d.z*d.z;if(0>M||yd<M)S=Fd&1|(Fd&6)<<1,M=yd,N=d.x,ca=d.y,Y=d.z}if(0>Qa*oa){var qd,ne,oe,pe,qe,td,re,Xc,dd,sf,Sc,ld,od,zd,Ad,bd,cd,fd;qd=a.x;ne=a.y;oe=a.z;pe=b.x;qe=b.y;td=b.z;re=c.x;Xc=c.y;dd=c.z;sf=pe-qd;Sc=qe-ne;ld=td-oe;od=re-pe;zd=Xc-qe;Ad=dd-td;bd=qd-re;cd=ne-Xc;fd=oe-dd;var Hc,Cc,zc;Hc=Sc*Ad-ld*zd;Cc=ld*od-sf*Ad;zc=sf*zd-Sc*od;var Wd=qd*(Sc*zc-ld*Cc)+ne*(ld*Hc-sf*zc)+oe*(sf*Cc-Sc*Hc),kf=pe*(zd*zc-Ad*Cc)+qe*(Ad*Hc-od*zc)+td*(od*Cc-zd*Hc),be=re*(cd*zc-fd*Cc)+Xc*(fd*Hc-bd*zc)+dd*(bd*Cc-cd*Hc),Cd=-1,Nc,Gd,Hd,se=0;Hd=Gd=Nc=0;if(0>Wd){var ud,vd,wd,Id,te,de;ud=a.x;vd=a.y;wd=a.z;Id=b.x;te=b.y;de=b.z;var Jd,Xd,Dd;Jd=Id-ud;Xd=te-vd;Dd=de-wd;var ue=Jd*ud+Xd*vd+Dd*wd,ue=-ue/(Jd*Jd+Xd*Xd+Dd*Dd),Je;if(0>ue)d.x=ud,d.y=vd,d.z=wd,Je=1;else if(1<ue)d.x=Id,d.y=te,d.z=de,Je=2;else{var Td,ve,Ke;Td=ud+Jd*ue;ve=vd+Xd*ue;Ke=wd+Dd*ue;d.x=Td;d.y=ve;d.z=Ke;Je=3}var Kd=d.x*d.x+d.y*d.y+d.z*d.z,se=Je,Cd=Kd;Nc=d.x;Gd=d.y;Hd=d.z}if(0>kf){var gd,xd,pd,hd,id,jd;gd=b.x;xd=b.y;pd=b.z;hd=c.x;id=c.y;jd=c.z;var Jc,Kc,Lc;Jc=hd-gd;Kc=id-xd;Lc=jd-pd;var Tc=Jc*gd+Kc*xd+Lc*pd,Tc=-Tc/(Jc*Jc+Kc*Kc+Lc*Lc),kd;if(0>Tc)d.x=gd,d.y=xd,d.z=pd,kd=1;else if(1<Tc)d.x=hd,d.y=id,d.z=jd,kd=2;else{var md,Ge,He;md=gd+Jc*Tc;Ge=xd+Kc*Tc;He=pd+Lc*Tc;d.x=md;d.y=Ge;d.z=He;kd=3}var Le=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Cd||Le<Cd)se=kd<<1,Cd=Le,Nc=d.x,Gd=d.y,Hd=d.z}if(0>be){var Sd,Me,Qd,tf,Fe,We;Sd=a.x;Me=a.y;Qd=a.z;tf=c.x;Fe=c.y;We=c.z;var Ne,uf,lf;Ne=tf-Sd;uf=Fe-Me;lf=We-Qd;var Ce=Ne*Sd+uf*Me+lf*Qd,Ce=-Ce/(Ne*Ne+uf*uf+lf*lf),mf;if(0>Ce)d.x=Sd,d.y=Me,d.z=Qd,mf=1;else if(1<Ce)d.x=tf,d.y=Fe,d.z=We,mf=2;else{var vf,wf,Oe;vf=Sd+Ne*Ce;wf=Me+uf*Ce;Oe=Qd+lf*Ce;d.x=vf;d.y=wf;d.z=Oe;mf=3}var Pe=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Cd||Pe<Cd)se=mf&1|(mf&2)<<1,Cd=Pe,Nc=d.x,Gd=d.y,Hd=d.z}var ee;if(0<Cd)d.x=Nc,d.y=Gd,d.z=Hd,ee=se;else{var fe=Hc*Hc+Cc*Cc+zc*zc;0<fe&&(fe=1/Math.sqrt(fe));Hc*=fe;Cc*=fe;zc*=fe;var Qe=Hc*Hc+Cc*Cc+zc*zc,Qe=(qd*Hc+ne*Cc+oe*zc)/Qe;Nc=Hc*Qe;Gd=Cc*Qe;Hd=zc*Qe;d.x=Nc;d.y=Gd;d.z=Hd;ee=7}var xf=d.x*d.x+d.y*d.y+d.z*d.z;if(0>M||xf<M)S=ee&3|(ee&4)<<1,M=xf,N=d.x,ca=d.y,Y=d.z}if(0>X*oa){var Xe,yf,$d,ae,je,ce,ke,Ae,Gf,Pd,ie,Rd,Ee,Ye,nf,hf,rf,ng;Xe=b.x;yf=b.y;$d=b.z;ae=e.x;je=e.y;ce=e.z;ke=c.x;Ae=c.y;Gf=c.z;Pd=ae-Xe;ie=je-yf;Rd=ce-$d;Ee=ke-ae;Ye=Ae-je;nf=Gf-ce;hf=Xe-ke;rf=yf-Ae;ng=$d-Gf;var Ld,Md,Nd;Ld=ie*nf-Rd*Ye;Md=Rd*Ee-Pd*nf;Nd=Pd*Ye-ie*Ee;var ag=Xe*(ie*Nd-Rd*Md)+yf*(Rd*Ld-Pd*Nd)+$d*(Pd*Md-ie*Ld),og=ae*(Ye*Nd-nf*Md)+je*(nf*Ld-Ee*Nd)+ce*(Ee*Md-Ye*Ld),pg=ke*(rf*Nd-ng*Md)+Ae*(ng*Ld-hf*Nd)+Gf*(hf*Md-rf*Ld),Re=-1,Ze,$e,Se,Sf=0;Se=$e=Ze=0;if(0>ag){var Hf,If,Jf,fg,Df,we;Hf=b.x;If=b.y;Jf=b.z;fg=e.x;Df=e.y;we=e.z;var Yd,Zd,gf;Yd=fg-Hf;Zd=Df-If;gf=we-Jf;var gg=Yd*Hf+Zd*If+gf*Jf,gg=-gg/(Yd*Yd+Zd*Zd+gf*gf),ze;if(0>gg)d.x=Hf,d.y=If,d.z=Jf,ze=1;else if(1<gg)d.x=fg,d.y=Df,d.z=we,ze=2;else{var Ed,Od,qg;Ed=Hf+Yd*gg;Od=If+Zd*gg;qg=Jf+gf*gg;d.x=Ed;d.y=Od;d.z=qg;ze=3}var cg=d.x*d.x+d.y*d.y+d.z*d.z,Sf=ze,Re=cg;Ze=d.x;$e=d.y;Se=d.z}if(0>og){var rg,De,Te,of,Kf,sg;rg=e.x;De=e.y;Te=e.z;of=c.x;Kf=c.y;sg=c.z;var Lf,Mf,Nf;Lf=of-rg;Mf=Kf-De;Nf=sg-Te;var pf=Lf*rg+Mf*De+Nf*Te,pf=-pf/(Lf*Lf+Mf*Mf+Nf*Nf),Tf;if(0>pf)d.x=rg,d.y=De,d.z=Te,Tf=1;else if(1<pf)d.x=of,d.y=Kf,d.z=sg,Tf=2;else{var tg,Uf,Rf;tg=rg+Lf*pf;Uf=De+Mf*pf;Rf=Te+Nf*pf;d.x=tg;d.y=Uf;d.z=Rf;Tf=3}var ug=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Re||ug<Re)Sf=Tf<<1,Re=ug,Ze=d.x,$e=d.y,Se=d.z}if(0>pg){var Of,Vf,zf,Cg,Dg,Qf;Of=b.x;Vf=b.y;zf=b.z;Cg=c.x;Dg=c.y;Qf=c.z;var vg,Wf,Xf;vg=Cg-Of;Wf=Dg-Vf;Xf=Qf-zf;var qf=vg*Of+Wf*Vf+Xf*zf,qf=-qf/(vg*vg+Wf*Wf+Xf*Xf),Eg;if(0>qf)d.x=Of,d.y=Vf,d.z=zf,Eg=1;else if(1<qf)d.x=Cg,d.y=Dg,d.z=Qf,Eg=2;else{var bg,wg,xg;bg=Of+vg*qf;wg=Vf+Wf*qf;xg=zf+Xf*qf;d.x=bg;d.y=wg;d.z=xg;Eg=3}var yg=d.x*d.x+d.y*d.y+d.z*d.z;if(0>Re||yg<Re)Sf=Eg&1|(Eg&2)<<1,Re=yg,Ze=d.x,$e=d.y,Se=d.z}var hg;if(0<Re)d.x=Ze,d.y=$e,d.z=Se,hg=Sf;else{var Af=Ld*Ld+Md*Md+Nd*Nd;0<Af&&(Af=1/Math.sqrt(Af));Ld*=Af;Md*=Af;Nd*=Af;var Pf=Ld*Ld+Md*Md+Nd*Nd,Pf=(Xe*Ld+yf*Md+$d*Nd)/Pf;Ze=Ld*Pf;$e=Md*Pf;Se=Nd*Pf;d.x=Ze;d.y=$e;d.z=Se;hg=7}var Yf=d.x*d.x+d.y*d.y+d.z*d.z;if(0>M||Yf<M)S=hg<<1,M=Yf,N=d.x,ca=d.y,Y=d.z}if(0<M)return d.x=N,d.y=ca,d.z=Y,S;d.Z();return 15};P.prototype={za:function(a,b,e,c,d,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Wf:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},Ac:function(a){return new P(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},Ug:function(a){return new P(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},Mf:function(a){return new P(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},re:function(a){return new P(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Ec:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,c=this.e10+a.e10,d=this.e11+a.e11,f=this.e12+a.e12,h=this.e20+a.e20,l=this.e21+a.e21,g=this.e22+a.e22;this.e00+=a.e00;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Vg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,c=this.e10-a.e10,d=this.e11-a.e11,f=this.e12-a.e12,h=this.e20-a.e20,l=this.e21-a.e21,g=this.e22-a.e22;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Tg:function(a){var b=this.e01*a,e=this.e02*a,c=this.e10*a,d=this.e11*a,f=this.e12*a,h=this.e20*a,l=this.e21*a,g=this.e22*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},se:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,d=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=c;this.e11=d;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Ue:function(a,b,e){return new P(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},Lc:function(a,b,e){return new P(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},te:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new P(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,q*this.e00+b*this.e10+c*this.e20,q*this.e01+b*this.e11+c*this.e21,q*this.e02+b*this.e12+c*this.e22)},Jc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new P(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*c,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*c,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*c)},Ve:function(a,b,e){var c=this.e01*a,d=this.e02*a,f=this.e10*b,h=this.e11*b;b=this.e12*b;var l=this.e20*e,g=this.e21*e;e=this.e22*e;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},fd:function(a,b,e){var c=this.e01*b,d=this.e02*e,f=this.e10*a,h=this.e11*b,l=this.e12*e,g=this.e20*a;b=this.e21*b;e=this.e22*e;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},ue:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;h=c*c*h+f;c=a*this.e01+l*this.e11+g*this.e21;e=a*this.e02+l*this.e12+g*this.e22;d=k*this.e00+m*this.e10+n*this.e20;f=k*this.e01+m*this.e11+n*this.e21;k=k*this.e02+m*this.e12+n*this.e22;m=q*this.e00+b*this.e10+h*this.e20;n=q*this.e01+b*this.e11+h*this.e21;q=q*this.e02+b*this.e12+h*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=c;this.e02=e;this.e10=d;this.e11=f;this.e12=k;this.e20=m;this.e21=n;this.e22=q;return this},Kc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;var p=c*c*h+f;c=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var d=this.e10*a+this.e11*k+this.e12*q,f=this.e10*l+this.e11*m+this.e12*b,h=this.e10*g+this.e11*n+this.e12*p,r=this.e20*a+this.e21*k+this.e22*q,l=this.e20*l+this.e21*m+this.e22*b,g=this.e20*g+this.e21*n+this.e22*p;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=c;this.e02=e;this.e10=d;this.e11=f;this.e12=h;this.e20=r;this.e21=l;this.e22=g;return this},ji:function(){return new P(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},ki:function(){var a=this.e10,b=this.e20,e=this.e01,c=this.e11,d=this.e21,f=this.e02,h=this.e12,l=this.e22;this.e00=this.e00;this.e01=a;this.e02=b;this.e10=e;this.e11=c;this.e12=d;this.e20=f;this.e21=h;this.e22=l;return this},Yd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Xg:function(){return this.e00+this.e11+this.e22},pe:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,c=this.e01*this.e22-this.e02*this.e21,d=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);return new P(a*k,-c*k,h*k,-b*k,d*k,-l*k,e*k,-f*k,g*k)},qe:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,c=this.e01*this.e22-this.e02*this.e21,d=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);this.e00=a*k;this.e01=-c*k;this.e02=h*k;this.e10=-b*k;this.e11=d*k;this.e12=-l*k;this.e20=e*k;this.e21=-f*k;this.e22=g*k;return this},Wg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},de:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new P(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},Hb:function(a){var b=a.x,e=a.y,c=a.z,d=a.w,f=2*b,h=2*e,l=2*c;a=b*f;var g=e*h,c=c*l,k=b*h,e=e*l,b=b*l,f=d*f,h=d*h,d=d*l;this.e00=1-g-c;this.e01=k-d;this.e02=b+h;this.e10=k+d;this.e11=1-a-c;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},Pj:function(){var a=new xa,b=this.e00,e=this.e11,c=this.e22,d=b+e+c;0<d?(b=Math.sqrt(d+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>c?(b=Math.sqrt(b-e-c+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(c-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>c?(b=Math.sqrt(e-c-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(c-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},cb:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),c=Math.sin(a.z),d=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*c;this.e02=e;this.e10=d*c+a*b*e;this.e11=d*a-b*e*c;this.e12=-f*b;this.e20=b*c-d*a*e;this.e21=a*b+d*e*c;this.e22=d*f;return this},li:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new u(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new u(.5*a,1.570796326794895,.5*a)):new u(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},uc:function(a){return 0==a?new u(this.e00,this.e01,this.e02):1==a?new u(this.e10,this.e11,this.e12):2==a?new u(this.e20,this.e21,this.e22):null},pc:function(a){return 0==a?new u(this.e00,this.e10,this.e20):1==a?new u(this.e01,this.e11,this.e21):2==a?new u(this.e02,this.e12,this.e22):null},vc:function(a,b){0==a?b.za(this.e00,this.e01,this.e02):1==a?b.za(this.e10,this.e11,this.e12):2==a?b.za(this.e20,this.e21,this.e22):b.Z()},qc:function(a,b){0==a?b.za(this.e00,this.e10,this.e20):1==a?b.za(this.e01,this.e11,this.e21):2==a?b.za(this.e02,this.e12,this.e22):b.Z()},Mb:function(a,b,e){var c=a.y,d=a.z,f=b.x,h=b.y;b=b.z;var l=e.x,g=e.y;e=e.z;this.e00=a.x;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},ua:function(a,b,e){var c=b.x,d=e.x,f=a.y,h=b.y,l=e.y,g=a.z;b=b.z;e=e.z;this.e00=a.x;this.e01=c;this.e02=d;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"}};L.prototype={za:function(a,b,e,c,d,f,h,l,g,k,m,n,q,p,r,t){this.e00=a;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=t;return this},Wf:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},pc:function(a){return new L(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},Mf:function(a){return new L(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},Ue:function(a){return new L(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},Yd:function(a){return new L(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},qc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,c=this.e03+a.e03,d=this.e10+a.e10,f=this.e11+a.e11,h=this.e12+a.e12,l=this.e13+a.e13,g=this.e20+a.e20,k=this.e21+a.e21,m=this.e22+a.e22,n=this.e23+a.e23,q=this.e30+a.e30,p=this.e31+a.e31,r=this.e32+a.e32,t=this.e33+a.e33;this.e00+=a.e00;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=t;return this},Tg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,c=this.e03-a.e03,d=this.e10-a.e10,f=this.e11-a.e11,h=this.e12-a.e12,l=this.e13-a.e13,g=this.e20-a.e20,k=this.e21-a.e21,m=this.e22-a.e22,n=this.e23-a.e23,q=this.e30-a.e30,p=this.e31-a.e31,r=this.e32-a.e32,t=this.e33-a.e33;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=t;return this},Ve:function(a){var b=this.e01*a,e=this.e02*a,c=this.e03*a,d=this.e10*a,f=this.e11*a,h=this.e12*a,l=this.e13*a,g=this.e20*a,k=this.e21*a,m=this.e22*a,n=this.e23*a,q=this.e30*a,p=this.e31*a,r=this.e32*a,t=this.e33*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=t;return this},pe:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,c=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,n=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,q=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,p=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,r=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,t=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=c;this.e10=d;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=t;return this},te:function(a,b,e){return new L(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},Ac:function(a,b,e){return new L(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},re:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new L(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,k*this.e03+m*this.e13+n*this.e23,q*this.e00+b*this.e10+c*this.e20,q*this.e01+b*this.e11+c*this.e21,q*this.e02+b*this.e12+c*this.e22,q*this.e03+b*this.e13+c*this.e23,this.e30,this.e31,this.e32,this.e33)},uc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;c=c*c*h+f;return new L(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*c,this.e03,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*c,this.e13,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*c,this.e23,this.e30*a+this.e31*k+this.e32*q,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*n+this.e32*c,this.e33)},ki:function(a,b,e){return new L(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},ua:function(a,b,e){return new L(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},ue:function(a,b,e){var c=this.e01*a,d=this.e02*a,f=this.e03*a,h=this.e10*b,l=this.e11*b,g=this.e12*b;b=this.e13*b;var k=this.e20*e,m=this.e21*e,n=this.e22*e;e=this.e23*e;var q=this.e30,p=this.e31,r=this.e32,t=this.e33;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=t;return this},Ec:function(a,b,e){var c=this.e01*b,d=this.e02*e,f=this.e03,h=this.e10*a,l=this.e11*b,g=this.e12*e,k=this.e13,m=this.e20*a,n=this.e21*b,q=this.e22*e,p=this.e23,r=this.e30*a;b=this.e31*b;e=this.e32*e;var t=this.e33;this.e00=this.e00*a;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=b;this.e32=e;this.e33=t;return this},se:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d,p=c*e*h+b*d,r=c*c*h+f;c=a*this.e01+l*this.e11+g*this.e21;b=a*this.e02+l*this.e12+g*this.e22;e=a*this.e03+l*this.e13+g*this.e23;var d=k*this.e00+m*this.e10+n*this.e20,f=k*this.e01+m*this.e11+n*this.e21,h=k*this.e02+m*this.e12+n*this.e22,k=k*this.e03+m*this.e13+n*this.e23,m=q*this.e00+p*this.e10+r*this.e20,n=q*this.e01+p*this.e11+r*this.e21,t=q*this.e02+p*this.e12+r*this.e22,q=q*this.e03+p*this.e13+r*this.e23,p=this.e30,r=this.e31,R=this.e32,w=this.e33;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=c;this.e02=b;this.e03=e;this.e10=d;this.e11=f;this.e12=h;this.e13=k;this.e20=m;this.e21=n;this.e22=t;this.e23=q;this.e30=p;this.e31=r;this.e32=R;this.e33=w;return this},vc:function(a,b,e,c){var d=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-c*d,g=b*c*h+e*d,k=e*b*h+c*d,m=e*e*h+f,n=e*c*h-b*d,q=c*b*h-e*d;b=c*e*h+b*d;var p=c*c*h+f;c=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var d=this.e03,f=this.e10*a+this.e11*k+this.e12*q,h=this.e10*l+this.e11*m+this.e12*b,r=this.e10*g+this.e11*n+this.e12*p,t=this.e13,R=this.e20*a+this.e21*k+this.e22*q,w=this.e20*l+this.e21*m+this.e22*b,B=this.e20*g+this.e21*n+this.e22*p,v=this.e23,C=this.e30*a+this.e31*k+this.e32*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*n+this.e32*p,n=this.e33;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=c;this.e02=e;this.e03=d;this.e10=f;this.e11=h;this.e12=r;this.e13=t;this.e20=R;this.e21=w;this.e22=B;this.e23=v;this.e30=C;this.e31=l;this.e32=g;this.e33=n;return this},li:function(a,b,e){var c=this.e01+a*this.e31,d=this.e02+a*this.e32,f=this.e03+a*this.e33,h=this.e10+b*this.e30,l=this.e11+b*this.e31,g=this.e12+b*this.e32;b=this.e13+b*this.e33;var k=this.e20+e*this.e30,m=this.e21+e*this.e31,n=this.e22+e*this.e32;e=this.e23+e*this.e33;var q=this.e30,p=this.e31,r=this.e32,t=this.e33;this.e00+=a*this.e30;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=t;return this},cb:function(a,b,e){var c=this.e01,d=this.e02,f=this.e00*a+this.e01*b+this.e02*e+this.e03,h=this.e10,l=this.e11,g=this.e12,k=this.e10*a+this.e11*b+this.e12*e+this.e13,m=this.e20,n=this.e21,q=this.e22,p=this.e20*a+this.e21*b+this.e22*e+this.e23,r=this.e30,t=this.e31,R=this.e32;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=c;this.e02=d;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=t;this.e32=R;this.e33=a;return this},Wg:function(){return new L(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Xg:function(){var a=this.e10,b=this.e20,e=this.e30,c=this.e01,d=this.e11,f=this.e21,h=this.e31,l=this.e02,g=this.e12,k=this.e22,m=this.e32,n=this.e03,q=this.e13,p=this.e23,r=this.e33;this.e00=this.e00;this.e01=a;this.e02=b;this.e03=e;this.e10=c;this.e11=d;this.e12=f;this.e13=h;this.e20=l;this.e21=g;this.e22=k;this.e23=m;this.e30=n;this.e31=q;this.e32=p;this.e33=r;return this},Jc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,c=this.e21*this.e32-this.e22*this.e31,d=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*d+this.e13*c)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*d-this.e11*e+this.e13*a)-this.e03*(this.e10*c-this.e11*b+this.e12*a)},Vg:function(){return this.e00+this.e11+this.e22+this.e33},Lc:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,c=this.e01*this.e12-this.e02*this.e11,d=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,t=this.e10*k-this.e11*l+this.e12*h,R=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*d+this.e33*c,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*d-this.e31*e+this.e33*a,w=this.e30*c-this.e31*b+this.e32*a,B=this.e21*f-this.e22*d+this.e23*c,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*d-this.e21*e+this.e23*a,a=this.e20*c-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*t)&&(b=1/b);return new L(q*b,-R*b,l*b,-B*b,-p*b,n*b,-k*b,f*b,r*b,-g*b,m*b,-e*b,-t*b,h*b,-w*b,a*b)},fd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,c=this.e01*this.e12-this.e02*this.e11,d=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,t=this.e10*k-this.e11*l+this.e12*h,R=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*d+this.e33*c,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*d-this.e31*e+this.e33*a,w=this.e30*c-this.e31*b+this.e32*a,B=this.e21*f-this.e22*d+this.e23*c,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*d-this.e21*e+this.e23*a,a=this.e20*c-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*t)&&(b=1/b);this.e00=q*b;this.e01=-R*b;this.e02=l*b;this.e03=-B*b;this.e10=-p*b;this.e11=n*b;this.e12=-k*b;this.e13=f*b;this.e20=r*b;this.e21=-g*b;this.e22=m*b;this.e23=-e*b;this.e30=-t*b;this.e31=h*b;this.e32=-w*b;this.e33=a*b;return this},Mb:function(a,b,e,c,d,f,h,l,g){c=a-c;d=b-d;f=e-f;var k=1/Math.sqrt(c*c+d*d+f*f);c*=k;d*=k;f*=k;var m=l*f-g*d;g=g*c-h*f;h=h*d-l*c;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=d*h-f*g;var k=f*m-c*h,n=c*g-d*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=n;this.e13=-(l*a+k*b+n*e);this.e20=c;this.e21=d;this.e22=f;this.e23=-(c*a+d*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},qe:function(a,b,e,c){a=1/Math.tan(.5*a);c/=e-c;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=c;this.e23=e*c;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},ji:function(a,b,e,c){c=1/(e-c);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=c;this.e23=e*c;this.e33=this.e32=this.e31=this.e30=0;return this},Ug:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},de:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},Kc:function(a){var b=a.e01,e=a.e02,c=a.e10,d=a.e11,f=a.e12,h=a.e20,l=a.e21,g=a.e22;this.e00=a.e00;this.e01=b;this.e02=e;this.e03=0;this.e10=c;this.e11=d;this.e12=f;this.e13=0;this.e20=h;this.e21=l;this.e22=g;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},Hb:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new L(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"}};Na.abs=function(a){return 0<a?a:-a};Na.sin=function(a){return Math.sin(a)};Na.cos=function(a){return Math.cos(a)};Na.tan=function(a){return Math.tan(a)};Na.asin=function(a){return Math.asin(a)};Na.acos=function(a){return Math.acos(a)};Na.atan=function(a){return Math.atan(a)};Na.fd=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};Na.Lc=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};Na.atan2=function(a,b){return Math.atan2(a,b)};Na.sqrt=function(a){return Math.sqrt(a)};Na.Hb=function(a,b,e){return a<b?b:a>e?e:a};Na.Ac=function(){return Math.random()};Na.Ec=function(a,b){return a+Math.random()*(b-a)};Na.Kc=function(a,b){return new u(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};Na.Jc=function(){return new u(-1+2*Math.random(),-1+2*Math.random(),-1+2*Math.random())};Pb.prototype={Ac:function(){return 0==this.c?new u:this.b[--this.c]},qc:function(){return 0==this.eb?new P:this.bb[--this.eb]},uc:function(){return 0==this.dg?new L:this.Lf[--this.dg]},vc:function(){return 0==this.ee?new xa:this.Wd[--this.ee]},ua:function(a,b,e,c){if(null!=a){a.Z();if(this.c==this.b.length){for(var d=Array(this.c<<1),f=0,h=this.c;f<h;){var l=f++;d[l]=this.b[l];this.b[l]=null}this.b=d}this.b[this.c++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.eb==this.bb.length){a=Array(this.eb<<1);d=0;for(f=this.eb;d<f;)h=d++,a[h]=this.bb[h],this.bb[h]=null;this.bb=a}this.bb[this.eb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.dg==this.Lf.length){b=Array(this.dg<<1);a=0;for(d=this.dg;a<d;)f=a++,b[f]=this.Lf[f],this.Lf[f]=null;this.Lf=b}this.Lf[this.dg++]=e}if(null!=c){c.x=0;c.y=0;c.z=0;c.w=1;if(this.ee==this.Wd.length){e=Array(this.ee<<1);b=0;for(a=this.ee;b<a;)d=b++,e[d]=this.Wd[d],this.Wd[d]=null;this.Wd=e}this.Wd[this.ee++]=c}},pc:function(a){a.Z();if(this.c==this.b.length){for(var b=Array(this.c<<1),e=0,c=this.c;e<c;){var d=e++;b[d]=this.b[d];this.b[d]=null}this.b=b}this.b[this.c++]=a},cb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.eb==this.bb.length){for(var b=Array(this.eb<<1),e=0,c=this.eb;e<c;){var d=e++;b[d]=this.bb[d];this.bb[d]=null}this.bb=b}this.bb[this.eb++]=a},Hb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.dg==this.Lf.length){for(var b=Array(this.dg<<1),e=0,c=this.dg;e<c;){var d=e++;b[d]=this.Lf[d];this.Lf[d]=null}this.Lf=b}this.Lf[this.dg++]=a},Mb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.ee==this.Wd.length){for(var b=Array(this.ee<<1),e=0,c=this.ee;e<c;){var d=e++;b[d]=this.Wd[d];this.Wd[d]=null}this.Wd=b}this.Wd[this.ee++]=a}};xa.prototype={Wf:function(){this.z=this.y=this.x=0;this.w=1;return this},za:function(a,b,e,c){this.x=a;this.y=b;this.z=e;this.w=c;return this},ua:function(a){return new xa(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Ec:function(a){return new xa(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},vc:function(a){return new xa(this.x*a,this.y*a,this.z*a,this.w*a)},cb:function(a){var b=this.y+a.y,e=this.z+a.z,c=this.w+a.w;this.x+=a.x;this.y=b;this.z=e;this.w=c;return this},Jc:function(a){var b=this.y-a.y,e=this.z-a.z,c=this.w-a.w;this.x=this.x-a.x;this.y=b;this.z=e;this.w=c;return this},Ac:function(a){var b=this.y*a,e=this.z*a,c=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=c;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},pc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Hb:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},uc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new xa(this.x*a,this.y*a,this.z*a,this.w*a)},qc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);var b=this.y*a,e=this.z*a,c=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=c;return this},Kc:function(a,b){var e=a.x,c=a.y;a=a.z;var d=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*d+c*f+a*b)));if(!this.w)return d=e*e,f=c*c,b=a*a,d<f?d<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-c*h):(h=1/Math.sqrt(d+f),this.z=0,this.x=c*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+d),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(d+f),this.z=0,this.x=c*h,this.y=-e*h),this;h=.5/this.w;this.x=(c*b-a*f)*h;this.y=(a*d-e*b)*h;this.z=(e*f-c*d)*h;return this},Lc:function(a,b){var e,c,d,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,c=-a.y,d=-a.z,a=-a.w):(e=a.x,c=a.y,d=a.z,a=a.w);if(.999999<f)return e=new xa(this.x+(e-this.x)*b,this.y+(c-this.y)*b,this.z+(d-this.z)*b,this.w+(a-this.w)*b),c=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<c&&(c=1/c),d=e.y*c,a=e.z*c,f=e.w*c,e.x=e.x*c,e.y=d,e.z=a,e.w=f,e;b*=Math.acos(f);e-=this.x*f;c-=this.y*f;d-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+c*c+d*d+a*a),h=Math.sin(b);b=Math.cos(b);return new xa(this.x*b+e*f*h,this.y*b+c*f*h,this.z*b+d*f*h,this.w*b+a*f*h)},de:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new xa(this.x,this.y,this.z,this.w)},Mb:function(a){var b=a.e00,e=a.e11,c=a.e22,d=b+e+c;0<d?(b=Math.sqrt(d+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>c?(b=Math.sqrt(b-e-c+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(c-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>c?(b=Math.sqrt(e-c-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(c-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},fd:function(){var a=new P,b=this.x,e=this.y,c=this.z,d=this.w,f=2*b,h=2*e,l=2*c,g=b*f,k=e*h,c=c*l,m=b*h,e=e*l,b=b*l,f=d*f,h=d*h,d=d*l;a.e00=1-k-c;a.e01=m-d;a.e02=b+h;a.e10=m+d;a.e11=1-g-c;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"}};lc.prototype={fn:function(){if(null!=this.Lh){var a=this.Td,b=this.Wm;this.Lh.hm(b,this.Zb.Kb,this.$b.Kb,this.Zb.a,this.$b.a,this.$i);(this.Td=0<b.numPoints)?(this.Ja.Um(b.normal),this.Ye.Hc=b.mm()>F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?F.alternativeContactPositionCorrectionAlgorithm:F.defaultContactPositionCorrectionAlgorithm,b.incremental?this.Zl.Mn(b,this.C.a,this.D.a):this.Zl.co(b,this.C.a,this.D.a)):this.Ja.Xe();if(this.Td&&!a){var b=this.Zb.yd,e=this.$b.yd;b==e&&(e=null);null!=b&&b.beginContact(this);null!=e&&e.beginContact(this)}!this.Td&&a&&(a=this.Zb.yd,b=this.$b.yd,a==b&&(b=null),null!=a&&a.endContact(this),null!=b&&b.endContact(this));this.Td&&(a=this.Zb.yd,b=this.$b.yd,a==b&&(b=null),null!=a&&a.preSolve(this),null!=b&&b.preSolve(this))}},Vk:function(){var a=this.Zb.yd,b=this.$b.yd;a==b&&(b=null);null!=a&&a.postSolve(this);null!=b&&b.postSolve(this)},pc:function(){return this.Zb},qc:function(){return this.$b},sk:function(){return this.Td},cb:function(){return this.Ja},ua:function(){return this.Ye},Mb:function(){return this.ia},Hb:function(){return this.M}};dd.prototype={ua:function(){return this.Zd},Hb:function(){return this.Qc},Mb:function(){return this.ia},cb:function(){return this.M}};Ge.prototype={nn:function(){for(var a=this.jc.ce;null!=a;){for(var b=a.M;;){var e;a.mh.Cc<a.nh.Cc?(e=a.mh.userData,a=a.nh.userData):(e=a.nh.userData,a=a.mh.userData);if(!this.Yn(e,a))break;var c=e.Yb,d=a.Yb,f;f=c.Ae<d.Ae?c.Ob:d.Ob;for(var c=e.Cc,d=a.Cc,h=!1;null!=f;){var l=f.M;f=f.Zd;if(f.Zb.Cc==c&&f.$b.Cc==d){h=f.Zj=!0;break}f=l}h||(c=this.lg,null!=c?(this.lg=c.M,c.M=null):c=new lc,null==this.zd?this.zd=c:(this.ye.M=c,c.ia=this.ye),this.ye=c,c.Zj=!0,d=this.Vm.Jb[e.Kb.Lb][a.Kb.Lb],c.Zb=e,c.$b=a,c.C=e.Yb,c.D=a.Yb,c.Td=!1,null==c.C.Ob?c.C.Ob=c.rb:(c.C.kc.M=c.rb,c.rb.ia=c.C.kc),c.C.kc=c.rb,null==c.D.Ob?c.D.Ob=c.sb:(c.D.kc.M=c.sb,c.sb.ia=c.D.kc),c.D.kc=c.sb,c.C.Ae++,c.D.Ae++,c.rb.Qc=c.D,c.sb.Qc=c.C,c.rb.Zd=c,c.sb.Zd=c,c.Lh=d,c=c.Ye,c.Zb=e,c.$b=a,c.C=c.Zb.Yb,c.D=c.$b.Yb,c.pj=c.C.a,c.qj=c.D.a,this.Bi++);break}a=b}},on:function(){for(var a=this.jc.Yj,b=this.zd;null!=b;){for(var e=b.M;;){if(b.Zj){b.Zj=!1;b.ik=!1;break}if(!a){var c=b.ia,d=b.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b==this.zd&&(this.zd=this.zd.M);b==this.ye&&(this.ye=this.ye.ia);b.M=null;b.ia=null;b.Td&&(c=b.Zb.yd,d=b.$b.yd,c==d&&(d=null),null!=c&&c.endContact(b),null!=d&&d.endContact(b));c=b.rb.ia;d=b.rb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.rb==b.C.Ob&&(b.C.Ob=b.C.Ob.M);b.rb==b.C.kc&&(b.C.kc=b.C.kc.ia);b.rb.M=null;b.rb.ia=null;c=b.sb.ia;d=b.sb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.sb==b.D.Ob&&(b.D.Ob=b.D.Ob.M);b.sb==b.D.kc&&(b.D.kc=b.D.kc.ia);b.sb.M=null;b.sb.ia=null;b.C.Ae--;b.D.Ae--;b.rb.Qc=null;b.sb.Qc=null;b.rb.Zd=null;b.sb.Zd=null;b.Zb=null;b.$b=null;b.C=null;b.D=null;b.Td=!1;b.$i.Xe();b.Ja.Xe();b.Lh=null;c=b.Ye;c.Zb=null;c.$b=null;c.C=null;c.D=null;c.pj=null;c.qj=null;b.M=this.lg;this.lg=b;this.Bi--;break}var d=b.Zb,c=b.$b,f=d.Yb,h=c.Yb,h=!h.Gb&&1!=h.Lb;if((f.Gb||1==f.Lb)&&!h){b.ik=!0;break}f=d.u;h=c.u;d=d.tb;c=c.tb;if(!(d.J<c.G&&d.G>c.J&&d.K<c.H&&d.H>c.K&&d.L<c.I&&d.I>c.L)){c=b.ia;d=b.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b==this.zd&&(this.zd=this.zd.M);b==this.ye&&(this.ye=this.ye.ia);b.M=null;b.ia=null;b.Td&&(c=b.Zb.yd,d=b.$b.yd,c==d&&(d=null),null!=c&&c.endContact(b),null!=d&&d.endContact(b));c=b.rb.ia;d=b.rb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.rb==b.C.Ob&&(b.C.Ob=b.C.Ob.M);b.rb==b.C.kc&&(b.C.kc=b.C.kc.ia);b.rb.M=null;b.rb.ia=null;c=b.sb.ia;d=b.sb.M;null!=c&&(c.M=d);null!=d&&(d.ia=c);b.sb==b.D.Ob&&(b.D.Ob=b.D.Ob.M);b.sb==b.D.kc&&(b.D.kc=b.D.kc.ia);b.sb.M=null;b.sb.ia=null;b.C.Ae--;b.D.Ae--;b.rb.Qc=null;b.sb.Qc=null;b.rb.Zd=null;b.sb.Zd=null;b.Zb=null;b.$b=null;b.C=null;b.D=null;b.Td=!1;b.$i.Xe();b.Ja.Xe();b.Lh=null;c=b.Ye;c.Zb=null;c.$b=null;c.C=null;c.D=null;c.pj=null;c.qj=null;b.M=this.lg;this.lg=b;this.Bi--;break}b.ik=!(f.ma<h.ja&&f.ja>h.ma&&f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa);break}b=e}},Yn:function(a,b){var e=a.Yb,c=b.Yb;if(e==c||0!=e.Lb&&0!=c.Lb||!(a.Tj&b.Uj&&b.Tj&a.Uj))return!1;e.kh<c.kh?(a=e.ze,e=c):a=c.ze;for(;null!=a;){if(a.Qc==e&&!a.Pk.Ak)return!1;a=a.M}return!0},gl:function(){this.jc.Ii();this.nn();this.on()},Vk:function(){for(var a=this.zd;null!=a;){var b=a.M;a.Td&&a.Vk();a=b}},cb:function(){return this.Bi},ua:function(){return this.zd}};zl.prototype={Xe:function(){for(;0<this.Hf;)this.Jf[--this.Hf]=null;for(;0<this.If;)this.Kf[--this.If]=null;for(;0<this.wh;)this.Eh[--this.wh]=null;for(;0<this.vh;)this.Dh[--this.vh]=null},zk:function(a){if(this.Hf==this.Jf.length){for(var b=Array(this.Hf<<1),e=0,c=this.Hf;e<c;){var d=e++;b[d]=this.Jf[d];this.Jf[d]=null}this.Jf=b}a.Nf=!0;this.Jf[this.Hf++]=a},Ol:function(a,b){if(this.If==this.Kf.length){for(var e=Array(this.If<<1),c=0,d=this.If;c<d;){var f=c++;e[f]=this.Kf[f];this.Kf[f]=null}this.Kf=e}a.Nf=!0;this.Kf[this.If++]=a;if(b==Xb.SPLIT_IMPULSE){if(this.wh==this.Eh.length){e=Array(this.wh<<1);c=0;for(d=this.wh;c<d;)f=c++,e[f]=this.Eh[f],this.Eh[f]=null;this.Eh=e}this.Eh[this.wh++]=a}if(b==Xb.NGS){if(this.vh==this.Dh.length){b=Array(this.vh<<1);e=0;for(c=this.vh;e<c;)d=e++,b[d]=this.Dh[d],this.Dh[d]=null;this.Dh=b}this.Dh[this.vh++]=a}},en:function(a,b){a=a.dt;var e=b.pa,c=b.a;e.v=c.v;e.A=c.A;e.B=c.B;e.o=c.o;e.f=c.f;e.h=c.h;e.i=c.i;e.m=c.m;e.j=c.j;e.l=c.l;e.g=c.g;e.s=c.s;b.Bk&&b.gb*b.gb+b.hb*b.hb+b.ib*b.ib<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&b.kb*b.kb+b.lb*b.lb+b.mb*b.mb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?(b.yb+=a,b.yb>F.sleepingTimeThreshold&&(b.Gb=!0,b.yb=0)):b.yb=0;if(!b.Gb){if(0==b.Lb){var e=a*b.$j,c=e*e,e=1/(1+e+c*(.5+.16666666666666666*e+.041666666666666664*c)),c=a*b.Qj,d=c*c,c=1/(1+c+d*(.5+.16666666666666666*c+.041666666666666664*d)),f,h,l,d=this.nm*b.eh;f=this.om*b.eh;h=this.pm*b.eh;d+=b.Mh*b.$a;f+=b.Nh*b.$a;h+=b.Oh*b.$a;var g,k;g=b.P*b.vf+b.R*b.wf+b.S*b.xf;k=b.T*b.vf+b.U*b.wf+b.V*b.xf;l=b.W*b.vf+b.X*b.wf+b.Y*b.xf;b.gb+=d*a;b.hb+=f*a;b.ib+=h*a;b.gb*=e;b.hb*=e;b.ib*=e;b.kb+=g*a;b.lb+=k*a;b.mb+=l*a;b.kb*=c;b.lb*=c;b.mb*=c}b.Wl(a);for(a=b.Dc;null!=a;){e=a.M;c=a.pa;f=a.ha;var d=b.pa,m,n,q,p,r;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;n=d.i*f.h+d.m*f.j+d.j*f.s;q=d.l*f.o+d.g*f.i+d.s*f.l;p=d.l*f.f+d.g*f.m+d.s*f.g;r=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;c=a.a;f=a.ha;d=b.a;h=d.o*f.o+d.f*f.i+d.h*f.l;l=d.o*f.f+d.f*f.m+d.h*f.g;g=d.o*f.h+d.f*f.j+d.h*f.s;k=d.i*f.o+d.m*f.i+d.j*f.l;m=d.i*f.f+d.m*f.m+d.j*f.g;n=d.i*f.h+d.m*f.j+d.j*f.s;q=d.l*f.o+d.g*f.i+d.s*f.l;p=d.l*f.f+d.g*f.m+d.s*f.g;r=d.l*f.h+d.g*f.j+d.s*f.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=d.o*f.v+d.f*f.A+d.h*f.B;l=d.i*f.v+d.m*f.A+d.j*f.B;f=d.l*f.v+d.g*f.A+d.s*f.B;c.v=h;c.A=l;c.B=f;c.v+=d.v;c.A+=d.A;c.B+=d.B;a.Kb.Nb(a.u,a.pa);c=a.u.ma;d=a.u.na;f=a.u.oa;h=a.u.ja;l=a.u.ka;g=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=c<a.u.ma?c:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=f<a.u.oa?f:a.u.oa;a.u.ja=h>a.u.ja?h:a.u.ja;a.u.ka=l>a.u.ka?l:a.u.ka;a.u.la=g>a.u.la?g:a.u.la;null!=a.tb&&(c=a.a.v-a.pa.v,d=a.a.A-a.pa.A,f=a.a.B-a.pa.B,h=a.rc,h.x=c,h.y=d,h.z=f,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=e}}},dn:function(a,b,e){for(var c=a.dt,d=!0,f=0,h=this.Hf;f<h;){var l=f++,g=this.Jf[l],k=g.pa,m=g.a;k.v=m.v;k.A=m.A;k.B=m.B;k.o=m.o;k.f=m.f;k.h=m.h;k.i=m.i;k.m=m.m;k.j=m.j;k.l=m.l;k.g=m.g;k.s=m.s;g.Gb=!1;g.Bk&&g.gb*g.gb+g.hb*g.hb+g.ib*g.ib<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&g.kb*g.kb+g.lb*g.lb+g.mb*g.mb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?g.yb+=c:g.yb=0;g.yb<F.sleepingTimeThreshold&&(d=!1);if(0==g.Lb){var n=c*g.$j,q=n*n,p=1/(1+n+q*(.5+.16666666666666666*n+.041666666666666664*q)),r=c*g.Qj,t=r*r,R=1/(1+r+t*(.5+.16666666666666666*r+.041666666666666664*t)),w,B,v,C,u,A;w=this.nm*g.eh;B=this.om*g.eh;v=this.pm*g.eh;w+=g.Mh*g.$a;B+=g.Nh*g.$a;v+=g.Oh*g.$a;var E,z,vc;E=g.P*g.vf+g.R*g.wf+g.S*g.xf;z=g.T*g.vf+g.U*g.wf+g.V*g.xf;vc=g.W*g.vf+g.X*g.wf+g.Y*g.xf;C=E;u=z;A=vc;g.gb+=w*c;g.hb+=B*c;g.ib+=v*c;g.gb*=p;g.hb*=p;g.ib*=p;g.kb+=C*c;g.lb+=u*c;g.mb+=A*c;g.kb*=R;g.lb*=R;g.mb*=R}}if(d)for(var I=0,J=this.Hf;I<J;){var Gb=I++,D=this.Jf[Gb];D.Gb=!0;D.yb=0}else{for(var P=0,da=this.If;P<da;){var L=P++;this.Kf[L].xh(a)}for(var V=0,xb=this.If;V<xb;){var Ka=V++;this.Kf[Ka].Gh(a)}for(var Da=0;Da<b;){Da++;for(var ma=0,Q=this.If;ma<Q;){var xa=ma++;this.Kf[xa].Ch()}}for(var Ha=0,Ea=this.If;Ha<Ea;){var Ua=Ha++;this.Kf[Ua].Li(a)}for(var ua=0,oa=this.Hf;ua<oa;){var Wa=ua++;this.Jf[Wa].Wl(c)}for(var G=0,Qa=this.wh;G<Qa;){var X=G++;this.Eh[X].Pg(a)}for(var M=0;M<e;){M++;for(var N=0,ca=this.wh;N<ca;){var Y=N++;this.Eh[Y].Bh()}}for(var S=0,aa=this.Hf;S<aa;){var y=S++;this.Jf[y].bn()}for(var fa=0,T=this.vh;fa<T;){var pa=fa++;this.Dh[pa].Pg(a)}for(var sa=0;sa<e;){sa++;for(var va=0,ra=this.vh;va<ra;){var ka=va++;this.Dh[ka].Ah(a)}}for(var Z=0,na=this.If;Z<na;){var Aa=Z++;this.Kf[Aa].postSolve()}for(var ya=0,K=this.Hf;ya<K;)for(var Ba=ya++,ha=this.Jf[Ba],ba=ha.Dc;null!=ba;){var Va=ba.M,ga=ba.pa,O=ba.ha,za=ha.pa,ob,ja,Na,Dc,fb,Db,ta,wa,Fa;ob=za.o*O.o+za.f*O.i+za.h*O.l;ja=za.o*O.f+za.f*O.m+za.h*O.g;Na=za.o*O.h+za.f*O.j+za.h*O.s;Dc=za.i*O.o+za.m*O.i+za.j*O.l;fb=za.i*O.f+za.m*O.m+za.j*O.g;Db=za.i*O.h+za.m*O.j+za.j*O.s;ta=za.l*O.o+za.g*O.i+za.s*O.l;wa=za.l*O.f+za.g*O.m+za.s*O.g;Fa=za.l*O.h+za.g*O.j+za.s*O.s;ga.o=ob;ga.f=ja;ga.h=Na;ga.i=Dc;ga.m=fb;ga.j=Db;ga.l=ta;ga.g=wa;ga.s=Fa;var eb,Ia,pb;eb=za.o*O.v+za.f*O.A+za.h*O.B;Ia=za.i*O.v+za.m*O.A+za.j*O.B;pb=za.l*O.v+za.g*O.A+za.s*O.B;ga.v=eb;ga.A=Ia;ga.B=pb;ga.v+=za.v;ga.A+=za.A;ga.B+=za.B;var Oa=ba.a,la=ba.ha,Ca=ha.a,Xa,Ra,hb,Jb,cb,ub,jb,mb,Yb;Xa=Ca.o*la.o+Ca.f*la.i+Ca.h*la.l;Ra=Ca.o*la.f+Ca.f*la.m+Ca.h*la.g;hb=Ca.o*la.h+Ca.f*la.j+Ca.h*la.s;Jb=Ca.i*la.o+Ca.m*la.i+Ca.j*la.l;cb=Ca.i*la.f+Ca.m*la.m+Ca.j*la.g;ub=Ca.i*la.h+Ca.m*la.j+Ca.j*la.s;jb=Ca.l*la.o+Ca.g*la.i+Ca.s*la.l;mb=Ca.l*la.f+Ca.g*la.m+Ca.s*la.g;Yb=Ca.l*la.h+Ca.g*la.j+Ca.s*la.s;Oa.o=Xa;Oa.f=Ra;Oa.h=hb;Oa.i=Jb;Oa.m=cb;Oa.j=ub;Oa.l=jb;Oa.g=mb;Oa.s=Yb;var pc,Ya,La;pc=Ca.o*la.v+Ca.f*la.A+Ca.h*la.B;Ya=Ca.i*la.v+Ca.m*la.A+Ca.j*la.B;La=Ca.l*la.v+Ca.g*la.A+Ca.s*la.B;Oa.v=pc;Oa.A=Ya;Oa.B=La;Oa.v+=Ca.v;Oa.A+=Ca.A;Oa.B+=Ca.B;var vb,H,db,kb,zb,lb;ba.Kb.Nb(ba.u,ba.pa);vb=ba.u.ma;H=ba.u.na;db=ba.u.oa;kb=ba.u.ja;zb=ba.u.ka;lb=ba.u.la;ba.Kb.Nb(ba.u,ba.a);ba.u.ma=vb<ba.u.ma?vb:ba.u.ma;ba.u.na=H<ba.u.na?H:ba.u.na;ba.u.oa=db<ba.u.oa?db:ba.u.oa;ba.u.ja=kb>ba.u.ja?kb:ba.u.ja;ba.u.ka=zb>ba.u.ka?zb:ba.u.ka;ba.u.la=lb>ba.u.la?lb:ba.u.la;if(null!=ba.tb){var tb,x,W;tb=ba.a.v-ba.pa.v;x=ba.a.A-ba.pa.A;W=ba.a.B-ba.pa.B;var ea=ba.rc;ea.x=tb;ea.y=x;ea.z=W;ba.Yb.oc.jc.wd(ba.tb,ba.u,ba.rc)}ba=Va}}}};ab.prototype={gl:function(){var a=(new Date).getTime()/1E3;this.Kh.gl();Ad.broadPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a);for(var a=(new Date).getTime()/1E3,b=this.Kh.zd;null!=b;){var e=b.M;b.ik||b.fn();b=e}Ad.narrowPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a)},cn:function(){var a=(new Date).getTime()/1E3;if(F.disableSleeping)for(var b=this.uf;null!=b;){var e=b.M;b.Gb=!1;b.yb=0;b=e}if(this.ph.length<this.jj){for(b=this.ph.length<<1;b<this.jj;)b<<=1;this.ph=Array(b)}this.ek=0;b=this.vg;e=this.Fk;b.nm=e.x;b.om=e.y;b.pm=e.z;b=this.uf;for(this.tf=0;null!=b;){for(e=b.M;!b.Nf&&!b.Gb&&1!=b.Lb;){if(0==b.Ae&&0==b.kh){this.vg.en(this.Sh,b);this.ek++;break}this.hn(b);this.vg.dn(this.Sh,this.Uk,this.Tk);this.vg.Xe();this.ek++;break}b=e}this.Kh.Vk();for(b=this.uf;null!=b;)e=b.M,b.Nf=!1,b=e;for(b=this.uf;null!=b;)e=b.M,b.Mh=0,b.Nh=0,b.Oh=0,b.vf=0,b.wf=0,b.xf=0,b=e;for(;0<this.tf;)this.af[--this.tf].Nf=!1,this.af[this.tf]=null;Ad.dynamicsTime=1E3*((new Date).getTime()/1E3-a)},hn:function(a){var b=1;this.vg.zk(a);for(this.ph[0]=a;0<b;)if(a=this.ph[--b],this.ph[b]=null,1!=a.Lb){for(var e=a.Ob;null!=e;){var c=e.M,d=e.Zd.Ye,f=e.Zd.Ye.jk;if(d.sk()&&!f.Nf){if(this.af.length==this.tf){for(var h=Array(this.tf<<1),l=0,g=this.tf;l<g;){var k=l++;h[k]=this.af[k];this.af[k]=null}this.af=h}this.af[this.tf++]=f;this.vg.Ol(f,d.Hc);e=e.Qc;e.Nf||(this.vg.zk(e),this.ph[b++]=e)}e=c}for(c=a.ze;null!=c;){a=c.M;e=c.Pk;d=e.jk;if(!d.Nf){if(this.af.length==this.tf){f=Array(this.tf<<1);h=0;for(l=this.tf;h<l;)g=h++,f[g]=this.af[g],this.af[g]=null;this.af=f}this.af[this.tf++]=d;this.vg.Ol(d,e.Hc);c=c.Qc;c.Nf||(this.vg.zk(c),this.ph[b++]=c)}c=a}}},Xm:function(a,b){a.drawBvh&&this.Ek(a,b.Qb,0,a.style.bvhNodeColor)},Ek:function(a,b,e,c){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var d=this.Ga,f=0==d.c?new u:d.b[--d.c],d=this.Ga,d=0==d.c?new u:d.b[--d.c];f.x=b.J;f.y=b.K;f.z=b.L;d.x=b.G;d.y=b.H;d.z=b.I;a.aabb(f,d,c);var h=this.Ga;if(null!=f){f.Z();if(h.c==h.b.length){for(var l=Array(h.c<<1),g=0,k=h.c;g<k;){var m=g++;l[m]=h.b[m];h.b[m]=null}h.b=l}h.b[h.c++]=f}f=this.Ga;if(null!=d){d.Z();if(f.c==f.b.length){h=Array(f.c<<1);l=0;for(g=f.c;l<g;)k=l++,h[k]=f.b[k],f.b[k]=null;f.b=h}f.b[f.c++]=d}}this.Ek(a,b.F[0],e+1,c);this.Ek(a,b.F[1],e+1,c)}},$m:function(a){for(var b=a.style,e=this.uf;null!=e;){var c=e.M;if(a.drawBases){var d=a.style;a.basis(e.a,d.basisLength,d.basisColorX,d.basisColorY,d.basisColorZ)}var f=null,h=0==e.Lb;h||(f=2==e.Lb?b.kinematicShapeColor:b.staticShapeColor);for(var l=e.Dc;null!=l;){var g=l.M;h&&(f=l.Cc&1?e.Gb?b.sleepingShapeColor2:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Gb?b.sleepingShapeColor1:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var k=l.Kb,m=l.a;switch(k.Lb){case 0:a.sphere(m,k.ab,f);break;case 1:var n=k,q=this.Ga,p=0==q.c?new u:q.b[--q.c],r=p;r.x=n.Ke;r.y=n.Le;r.z=n.Me;a.box(m,p,f);var t=this.Ga;if(null!=p){p.Z();if(t.c==t.b.length){for(var R=Array(t.c<<1),w=0,B=t.c;w<B;){var v=w++;R[v]=t.b[v];t.b[v]=null}t.b=R}t.b[t.c++]=p}break;case 2:var C=k;a.cylinder(m,C.ab,C.Ib,f);break;case 3:var U=k;a.cone(m,U.ab,U.Ib,f);break;case 4:var A=k;a.capsule(m,A.ab,A.Ib,f);break;case 5:var E=k,z=E.Ne,vc=this.Ga,I=0==vc.c?new u:vc.b[--vc.c],J=this.Ga,Gb=0==J.c?new u:J.b[--J.c],D=this.Ga,L=0==D.c?new u:D.b[--D.c],da=this.Ga,V=0==da.c?new u:da.b[--da.c],rd=this.Ga,xb=0==rd.c?new u:rd.b[--rd.c],Ka=this.Ga,Da=0==Ka.c?new u:Ka.b[--Ka.c],ma=this.Ga,Q=0==ma.eb?new P:ma.bb[--ma.eb],xa=this.Ga,Ha=0==xa.c?new u:xa.b[--xa.c],Ea=Q;Ea.e00=m.o;Ea.e01=m.f;Ea.e02=m.h;Ea.e10=m.i;Ea.e11=m.m;Ea.e12=m.j;Ea.e20=m.l;Ea.e21=m.g;Ea.e22=m.s;var Ua=Ha;Ua.x=m.v;Ua.y=m.A;Ua.z=m.B;for(var ua=0,oa=z;ua<oa;){var Wa=ua++,G=E.Bg[Wa],Qa=E.zb[Wa];G.x=Qa.x;G.y=Qa.y;G.z=Qa.z;var X=G,M=X.x*Q.e10+X.y*Q.e11+X.z*Q.e12,N=X.x*Q.e20+X.y*Q.e21+X.z*Q.e22;X.x=X.x*Q.e00+X.y*Q.e01+X.z*Q.e02;X.y=M;X.z=N;var ca=X,Y=ca.y+Ha.y,S=ca.z+Ha.z;ca.x=ca.x+Ha.x;ca.y=Y;ca.z=S}if(30<z)for(var aa=0,y=z;aa<y;){var fa=aa++,T=E.Bg[fa];I.x=T.x;I.y=T.y;I.z=T.z;var pa=E.Bg[(fa+1)%z];Gb.x=pa.x;Gb.y=pa.y;Gb.z=pa.z;a.line(I,Gb,f)}else if(this.ni.wireframe||10<z)for(var sa=0,va=z;sa<va;){var ra=sa++,ka=E.Bg[ra];I.x=ka.x;I.y=ka.y;I.z=ka.z;for(var Z=0,na=ra;Z<na;){var Aa=Z++,ya=E.Bg[Aa];Gb.x=ya.x;Gb.y=ya.y;Gb.z=ya.z;a.line(I,Gb,f)}}else for(var K=0,Ba=z;K<Ba;){var ha=K++,ba=E.Bg[ha];I.x=ba.x;I.y=ba.y;I.z=ba.z;for(var Va=0,ga=ha;Va<ga;){var O=Va++,za=E.Bg[O];Gb.x=za.x;Gb.y=za.y;Gb.z=za.z;for(var ob=0,ja=O;ob<ja;){var Na=ob++,Dc=E.Bg[Na];L.x=Dc.x;L.y=Dc.y;L.z=Dc.z;V.x=Gb.x;V.y=Gb.y;V.z=Gb.z;var fb=V,Db=fb.y-I.y,ta=fb.z-I.z;fb.x=fb.x-I.x;fb.y=Db;fb.z=ta;xb.x=L.x;xb.y=L.y;xb.z=L.z;var wa=xb,Fa=wa.y-I.y,eb=wa.z-I.z;wa.x=wa.x-I.x;wa.y=Fa;wa.z=eb;Da.x=V.x;Da.y=V.y;Da.z=V.z;var Ia=Da,pb=Ia.z*xb.x-Ia.x*xb.z,Oa=Ia.x*xb.y-Ia.y*xb.x;Ia.x=Ia.y*xb.z-Ia.z*xb.y;Ia.y=pb;Ia.z=Oa;var la=Ia,Ca=Math.sqrt(la.x*la.x+la.y*la.y+la.z*la.z);0<Ca&&(Ca=1/Ca);var Xa=la.y*Ca,Ra=la.z*Ca;la.x=la.x*Ca;la.y=Xa;la.z=Ra;a.triangle(I,Gb,L,Da,Da,Da,f);var hb=-Da.y,Jb=-Da.z;Da.x=-Da.x;Da.y=hb;Da.z=Jb;a.triangle(I,L,Gb,Da,Da,Da,f)}}}var cb=this.Ga;if(null!=I){I.Z();if(cb.c==cb.b.length){for(var ub=Array(cb.c<<1),jb=0,mb=cb.c;jb<mb;){var Yb=jb++;ub[Yb]=cb.b[Yb];cb.b[Yb]=null}cb.b=ub}cb.b[cb.c++]=I}var pc=this.Ga;if(null!=Gb){Gb.Z();if(pc.c==pc.b.length){for(var Ya=Array(pc.c<<1),La=0,vb=pc.c;La<vb;){var H=La++;Ya[H]=pc.b[H];pc.b[H]=null}pc.b=Ya}pc.b[pc.c++]=Gb}var db=this.Ga;if(null!=L){L.Z();if(db.c==db.b.length){for(var kb=Array(db.c<<1),zb=0,lb=db.c;zb<lb;){var tb=zb++;kb[tb]=db.b[tb];db.b[tb]=null}db.b=kb}db.b[db.c++]=L}var x=this.Ga;if(null!=V){V.Z();if(x.c==x.b.length){for(var W=Array(x.c<<1),ea=0,Bc=x.c;ea<Bc;){var xc=ea++;W[xc]=x.b[xc];x.b[xc]=null}x.b=W}x.b[x.c++]=V}var Pa=this.Ga;if(null!=xb){xb.Z();if(Pa.c==Pa.b.length){for(var qb=Array(Pa.c<<1),nb=0,Ab=Pa.c;nb<Ab;){var Bb=nb++;qb[Bb]=Pa.b[Bb];Pa.b[Bb]=null}Pa.b=qb}Pa.b[Pa.c++]=xb}var ia=this.Ga;if(null!=Da){Da.Z();if(ia.c==ia.b.length){for(var Ta=Array(ia.c<<1),bb=0,ib=ia.c;bb<ib;){var Cb=bb++;Ta[Cb]=ia.b[Cb];ia.b[Cb]=null}ia.b=Ta}ia.b[ia.c++]=Da}var Ma=this.Ga;if(null!=Q){Q.e00=1;Q.e01=0;Q.e02=0;Q.e10=0;Q.e11=1;Q.e12=0;Q.e20=0;Q.e21=0;Q.e22=1;if(Ma.eb==Ma.bb.length){for(var Eb=Array(Ma.eb<<1),le=0,qa=Ma.eb;le<qa;){var Ac=le++;Eb[Ac]=Ma.bb[Ac];Ma.bb[Ac]=null}Ma.bb=Eb}Ma.bb[Ma.eb++]=Q}var Kb=this.Ga;if(null!=Ha){Ha.Z();if(Kb.c==Kb.b.length){for(var Qb=Array(Kb.c<<1),Sa=0,ab=Kb.c;Sa<ab;){var Ga=Sa++;Qb[Ga]=Kb.b[Ga];Kb.b[Ga]=null}Kb.b=Qb}Kb.b[Kb.c++]=Ha}}}if(a.drawAabbs){var Zb=l.u,Ja=b.aabbColor,Za=this.Ga,gb=0==Za.c?new u:Za.b[--Za.c],$a=this.Ga,Tb=0==$a.c?new u:$a.b[--$a.c],fc=gb;fc.x=Zb.ma;fc.y=Zb.na;fc.z=Zb.oa;var ec=Tb;ec.x=Zb.ja;ec.y=Zb.ka;ec.z=Zb.la;a.aabb(gb,Tb,Ja);var Nb=this.Ga;if(null!=gb){gb.Z();if(Nb.c==Nb.b.length){for(var bc=Array(Nb.c<<1),Fb=0,mc=Nb.c;Fb<mc;){var ac=Fb++;bc[ac]=Nb.b[ac];Nb.b[ac]=null}Nb.b=bc}Nb.b[Nb.c++]=gb}var Ob=this.Ga;if(null!=Tb){Tb.Z();if(Ob.c==Ob.b.length){for(var cc=Array(Ob.c<<1),Ub=0,Lb=Ob.c;Ub<Lb;){var Rb=Ub++;cc[Rb]=Ob.b[Rb];Ob.b[Rb]=null}Ob.b=cc}Ob.b[Ob.c++]=Tb}}l=g}e=c}},Ym:function(a){var b=a.style;if(a.drawPairs||a.drawContacts)for(var e=this.Kh.zd;null!=e;){var c=e.M;if(a.drawPairs){var d=b.pairColor,f=this.Ga,h=0==f.c?new u:f.b[--f.c],l=this.Ga,g=0==l.c?new u:l.b[--l.c],k=h;k.x=e.Zb.a.v;k.y=e.Zb.a.A;k.z=e.Zb.a.B;var m=g;m.x=e.$b.a.v;m.y=e.$b.a.A;m.z=e.$b.a.B;a.line(h,g,d);var n=this.Ga;if(null!=h){h.Z();if(n.c==n.b.length){for(var q=Array(n.c<<1),p=0,r=n.c;p<r;){var t=p++;q[t]=n.b[t];n.b[t]=null}n.b=q}n.b[n.c++]=h}var R=this.Ga;if(null!=g){g.Z();if(R.c==R.b.length){for(var w=Array(R.c<<1),B=0,v=R.c;B<v;){var C=B++;w[C]=R.b[C];R.b[C]=null}R.b=w}R.b[R.c++]=g}}if(a.drawContacts)for(var U=e.Ye,A=e.Ye.Ja.wc,E=0,z=e.Ye.Ja.be;E<z;){var F=E++,I=A[F],J=a.style,Gb=this.Ga,D=0==Gb.c?new u:Gb.b[--Gb.c],P=this.Ga,da=0==P.c?new u:P.b[--P.c],L=this.Ga,V=0==L.c?new u:L.b[--L.c],xb=this.Ga,Ka=0==xb.c?new u:xb.b[--xb.c],Da=this.Ga,ma=0==Da.c?new u:Da.b[--Da.c],Q=D;Q.x=I.Jd;Q.y=I.Kd;Q.z=I.Ld;var xa=da;xa.x=I.Md;xa.y=I.Nd;xa.z=I.Od;var Ha=V;Ha.x=U.Ja.wg;Ha.y=U.Ja.xg;Ha.z=U.Ja.yg;var Ea=Ka;Ea.x=U.Ja.lj;Ea.y=U.Ja.mj;Ea.z=U.Ja.nj;var Ua=ma;Ua.x=U.Ja.Vi;Ua.y=U.Ja.Wi;Ua.z=U.Ja.Xi;if(I.lf)a.point(D,J.disabledContactColor),a.point(da,J.disabledContactColor),a.line(D,da,J.disabledContactColor);else if(I.Pe){var ua;switch(I.Cc&3){case 0:ua=J.contactColor;break;case 1:ua=J.contactColor2;break;case 2:ua=J.contactColor3;break;default:ua=J.contactColor4}a.point(D,ua);a.point(da,ua);a.line(D,da,J.contactColor)}else a.point(D,J.newContactColor),a.point(da,J.newContactColor),a.line(D,da,J.newContactColor);da.x=D.x;da.y=D.y;da.z=D.z;var oa=da,Wa=J.contactNormalLength,G=oa.y+V.y*Wa,Qa=oa.z+V.z*Wa;oa.x=oa.x+V.x*Wa;oa.y=G;oa.z=Qa;a.line(D,da,J.contactNormalColor);if(a.drawContactBases){da.x=D.x;da.y=D.y;da.z=D.z;var X=da,M=J.contactTangentLength,N=X.y+Ka.y*M,ca=X.z+Ka.z*M;X.x=X.x+Ka.x*M;X.y=N;X.z=ca;a.line(D,da,J.contactTangentColor);da.x=D.x;da.y=D.y;da.z=D.z;var Y=da,S=J.contactBinormalLength,aa=Y.y+ma.y*S,y=Y.z+ma.z*S;Y.x=Y.x+ma.x*S;Y.y=aa;Y.z=y;a.line(D,da,J.contactBinormalColor)}var fa=this.Ga;if(null!=D){D.Z();if(fa.c==fa.b.length){for(var T=Array(fa.c<<1),pa=0,sa=fa.c;pa<sa;){var va=pa++;T[va]=fa.b[va];fa.b[va]=null}fa.b=T}fa.b[fa.c++]=D}var ra=this.Ga;if(null!=da){da.Z();if(ra.c==ra.b.length){for(var ka=Array(ra.c<<1),Z=0,na=ra.c;Z<na;){var Aa=Z++;ka[Aa]=ra.b[Aa];ra.b[Aa]=null}ra.b=ka}ra.b[ra.c++]=da}var ya=this.Ga;if(null!=V){V.Z();if(ya.c==ya.b.length){for(var K=Array(ya.c<<1),Ba=0,ha=ya.c;Ba<ha;){var ba=Ba++;K[ba]=ya.b[ba];ya.b[ba]=null}ya.b=K}ya.b[ya.c++]=V}var Va=this.Ga;if(null!=Ka){Ka.Z();if(Va.c==Va.b.length){for(var ga=Array(Va.c<<1),O=0,za=Va.c;O<za;){var ob=O++;ga[ob]=Va.b[ob];Va.b[ob]=null}Va.b=ga}Va.b[Va.c++]=Ka}var ja=this.Ga;if(null!=ma){ma.Z();if(ja.c==ja.b.length){for(var Na=Array(ja.c<<1),Dc=0,fb=ja.c;Dc<fb;){var Db=Dc++;Na[Db]=ja.b[Db];ja.b[Db]=null}ja.b=Na}ja.b[ja.c++]=ma}}e=c}if(a.drawJoints)for(var ta=this.Ph;null!=ta;){var wa=ta.M,Fa=this.Ga,eb=0==Fa.c?new u:Fa.b[--Fa.c],Ia=this.Ga,pb=0==Ia.c?new u:Ia.b[--Ia.c],Oa=eb;Oa.x=ta.C.a.v;Oa.y=ta.C.a.A;Oa.z=ta.C.a.B;var la=pb;la.x=ta.D.a.v;la.y=ta.D.a.A;la.z=ta.D.a.B;var Ca=this.Ga,Xa=0==Ca.c?new u:Ca.b[--Ca.c],Ra=this.Ga,hb=0==Ra.c?new u:Ra.b[--Ra.c],Jb=this.Ga,cb=0==Jb.c?new u:Jb.b[--Jb.c],ub=this.Ga,jb=0==ub.c?new u:ub.b[--ub.c],mb=this.Ga,Yb=0==mb.c?new u:mb.b[--mb.c],pc=this.Ga,Ya=0==pc.c?new u:pc.b[--pc.c],La=this.Ga,vb=0==La.c?new u:La.b[--La.c],H=this.Ga,db=0==H.c?new u:H.b[--H.c],kb=Xa;kb.x=ta.Of;kb.y=ta.Pf;kb.z=ta.Qf;var zb=hb;zb.x=ta.Rf;zb.y=ta.Sf;zb.z=ta.Tf;var lb=cb;lb.x=ta.vb;lb.y=ta.wb;lb.z=ta.xb;var tb=jb;tb.x=ta.He;tb.y=ta.Ie;tb.z=ta.Je;var x=Yb;x.x=ta.Hh;x.y=ta.Ih;x.z=ta.Jh;var W=Ya;W.x=ta.bc;W.y=ta.cc;W.z=ta.dc;var ea=vb;ea.x=ta.ve;ea.y=ta.we;ea.z=ta.xe;var Bc=db;Bc.x=ta.ah;Bc.y=ta.bh;Bc.z=ta.dh;a.line(eb,Xa,a.style.jointLineColor);a.line(pb,hb,a.style.jointLineColor);if(a.drawJointLimits)switch(ta.Lb){case 1:var xc=ta.Rh;this.bj(a,Xa,jb,Yb,vb,a.style.jointRotationalConstraintRadius,xc.lowerLimit,xc.upperLimit,a.style.jointLineColor);break;case 2:var Pa=ta,qb=a.style.jointLineColor,nb=Pa.Wk,Ab=Pa.cl;this.bj(a,hb,jb,Yb,vb,a.style.jointRotationalConstraintRadius,nb.lowerLimit,nb.upperLimit,qb);this.Tl(a,Xa,cb,Ab.lowerLimit,Ab.upperLimit,qb);break;case 3:var Bb=ta.Rh;this.Tl(a,Xa,cb,Bb.lowerLimit,Bb.upperLimit,a.style.jointLineColor);break;case 4:var ia=ta,Ta=a.style.jointRotationalConstraintRadius,bb=a.style.jointLineColor,ib=ia.Qk,Cb=ia.Rk;this.bj(a,Xa,jb,Yb,jb,Ta,ia.Ni-ib.upperLimit,ia.Ni-ib.lowerLimit,bb);this.bj(a,hb,Ya,vb,Ya,Ta,Cb.lowerLimit-ia.Oi,Cb.upperLimit-ia.Oi,bb);break;case 5:var Ma=ta,Eb=a.style.jointRotationalConstraintRadius,Sa=a.style.jointLineColor,qa=Ma.el;this.bj(a,hb,vb,db,vb,Eb,qa.lowerLimit-Ma.tj,qa.upperLimit-Ma.tj,Sa);this.Zm(a,Xa,cb,jb,Yb,Ma.bk,Ma.ck,Eb,Sa);var Ac=this.Ga,Kb=0==Ac.c?new u:Ac.b[--Ac.c];Kb.x=hb.x;Kb.y=hb.y;Kb.z=hb.z;var Qb=Kb,Ga=Qb.y+Ya.y*Eb,ab=Qb.z+Ya.z*Eb;Qb.x=Qb.x+Ya.x*Eb;Qb.y=Ga;Qb.z=ab;var Ja=Qb;a.line(hb,Ja,Sa);var Zb=this.Ga;if(null!=Ja){Ja.Z();if(Zb.c==Zb.b.length){for(var Za=Array(Zb.c<<1),gb=0,$a=Zb.c;gb<$a;){var wb=gb++;Za[wb]=Zb.b[wb];Zb.b[wb]=null}Zb.b=Za}Zb.b[Zb.c++]=Ja}}a.line(Xa,hb,a.style.jointErrorColor);var Tb=this.Ga;if(null!=eb){eb.Z();if(Tb.c==Tb.b.length){for(var fc=Array(Tb.c<<1),ec=0,Nb=Tb.c;ec<Nb;){var bc=ec++;fc[bc]=Tb.b[bc];Tb.b[bc]=null}Tb.b=fc}Tb.b[Tb.c++]=eb}var Fb=this.Ga;if(null!=pb){pb.Z();if(Fb.c==Fb.b.length){for(var mc=Array(Fb.c<<1),ac=0,Ob=Fb.c;ac<Ob;){var cc=ac++;mc[cc]=Fb.b[cc];Fb.b[cc]=null}Fb.b=mc}Fb.b[Fb.c++]=pb}var Ub=this.Ga;if(null!=Xa){Xa.Z();if(Ub.c==Ub.b.length){for(var Lb=Array(Ub.c<<1),Rb=0,rb=Ub.c;Rb<rb;){var sb=Rb++;Lb[sb]=Ub.b[sb];Ub.b[sb]=null}Ub.b=Lb}Ub.b[Ub.c++]=Xa}var qc=this.Ga;if(null!=hb){hb.Z();if(qc.c==qc.b.length){for(var yb=Array(qc.c<<1),$c=0,hc=qc.c;$c<hc;){var Ic=$c++;yb[Ic]=qc.b[Ic];qc.b[Ic]=null}qc.b=yb}qc.b[qc.c++]=hb}var oc=this.Ga;if(null!=cb){cb.Z();if(oc.c==oc.b.length){for(var Hb=Array(oc.c<<1),ad=0,rc=oc.c;ad<rc;){var Xb=ad++;Hb[Xb]=oc.b[Xb];oc.b[Xb]=null}oc.b=Hb}oc.b[oc.c++]=cb}var Zc=this.Ga;if(null!=jb){jb.Z();if(Zc.c==Zc.b.length){for(var Ib=Array(Zc.c<<1),Vb=0,Ec=Zc.c;Vb<Ec;){var Pb=Vb++;Ib[Pb]=Zc.b[Pb];Zc.b[Pb]=null}Zc.b=Ib}Zc.b[Zc.c++]=jb}var wc=this.Ga;if(null!=Yb){Yb.Z();if(wc.c==wc.b.length){for(var sc=Array(wc.c<<1),jc=0,Ef=wc.c;jc<Ef;){var jf=jc++;sc[jf]=wc.b[jf];wc.b[jf]=null}wc.b=sc}wc.b[wc.c++]=Yb}var Bd=this.Ga;if(null!=Ya){Ya.Z();if(Bd.c==Bd.b.length){for(var ic=Array(Bd.c<<1),Pc=0,Wb=Bd.c;Pc<Wb;){var kc=Pc++;ic[kc]=Bd.b[kc];Bd.b[kc]=null}Bd.b=ic}Bd.b[Bd.c++]=Ya}var Gc=this.Ga;if(null!=vb){vb.Z();if(Gc.c==Gc.b.length){for(var lc=Array(Gc.c<<1),dc=0,uc=Gc.c;dc<uc;){var Mb=dc++;lc[Mb]=Gc.b[Mb];Gc.b[Mb]=null}Gc.b=lc}Gc.b[Gc.c++]=vb}var Qc=this.Ga;if(null!=db){db.Z();if(Qc.c==Qc.b.length){for(var $b=Array(Qc.c<<1),Sb=0,nc=Qc.c;Sb<nc;){var gc=Sb++;$b[gc]=Qc.b[gc];Qc.b[gc]=null}Qc.b=$b}Qc.b[Qc.c++]=db}ta=wa}},bj:function(a,b,e,c,d,f,h,l,g){if(h!=l){var k=this.Ga,k=0==k.c?new u:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;var m=k.y+d.y*f,n=k.z+d.z*f;k.x+=d.x*f;k.y=m;k.z=n;a.line(b,k,g);d=this.Ga;if(null!=k){k.Z();if(d.c==d.b.length){for(var m=Array(d.c<<1),n=0,q=d.c;n<q;){var p=n++;m[p]=d.b[p];d.b[p]=null}d.b=m}d.b[d.c++]=k}}h>l?a.ellipse(b,e,c,f,f,g):a.arc(b,e,c,f,f,h,l,!0,g)},Tl:function(a,b,e,c,d,f){if(c<d){var h=this.Ga,h=0==h.c?new u:h.b[--h.c];h.x=b.x;h.y=b.y;h.z=b.z;var l=h.y+e.y*c,g=h.z+e.z*c;h.x+=e.x*c;h.y=l;h.z=g;c=this.Ga;c=0==c.c?new u:c.b[--c.c];c.x=b.x;c.y=b.y;c.z=b.z;b=c.y+e.y*d;l=c.z+e.z*d;c.x+=e.x*d;c.y=b;c.z=l;a.line(h,c,f);a=this.Ga;if(null!=h){h.Z();if(a.c==a.b.length){e=Array(a.c<<1);d=0;for(f=a.c;d<f;)b=d++,e[b]=a.b[b],a.b[b]=null;a.b=e}a.b[a.c++]=h}h=this.Ga;if(null!=c){c.Z();if(h.c==h.b.length){a=Array(h.c<<1);e=0;for(d=h.c;e<d;)f=e++,a[f]=h.b[f],h.b[f]=null;h.b=a}h.b[h.c++]=c}}},Zm:function(a,b,e,c,d,f,h,l,g){for(var k=0,m=this.Ga,n=0==m.c?new u:m.b[--m.c],m=this.Ga,q=0==m.ee?new xa:m.Wd[--m.ee],m=this.Ga,p=0==m.eb?new P:m.bb[--m.eb],m=this.Ga,m=0==m.c?new u:m.b[--m.c],r=0;17>r;){var t=r++,R=Math.cos(k)*f,w=Math.sin(k)*h,B=Math.sqrt(R*R+w*w),v=Math.sin(.5*B),C=Math.cos(.5*B),U=n.Z(),A=U.y+c.y*R,E=U.z+c.z*R;U.x=U.x+c.x*R;U.y=A;U.z=E;R=U;U=R.y+d.y*w;A=R.z+d.z*w;R.x=R.x+d.x*w;R.y=U;R.z=A;w=1/B*v;B=n.y*w;v=n.z*w;n.x=n.x*w;n.y=B;n.z=v;q.x=n.x;q.y=n.y;q.z=n.z;q.w=C;var z=q.x,E=q.y,R=q.z,B=q.w,D=2*z,A=2*E,v=2*R,C=z*D,w=E*A,R=R*v,U=z*A,E=E*v,z=z*v,D=B*D,A=B*A,B=B*v;p.e00=1-w-R;p.e01=U-B;p.e02=z+A;p.e10=U+B;p.e11=1-C-R;p.e12=E-D;p.e20=z-A;p.e21=E+D;p.e22=1-C-w;C=this.Ga;C=0==C.c?new u:C.b[--C.c];w=C.y+e.y*l;B=C.z+e.z*l;C.x=C.x+e.x*l;C.y=w;C.z=B;w=C.x*p.e10+C.y*p.e11+C.z*p.e12;B=C.x*p.e20+C.y*p.e21+C.z*p.e22;C.x=C.x*p.e00+C.y*p.e01+C.z*p.e02;C.y=w;C.z=B;w=C;B=w.y+b.y;v=w.z+b.z;w.x=w.x+b.x;w.y=B;w.z=v;1<=t&&a.line(m,C,g);t=this.Ga;if(null!=m){m.Z();if(t.c==t.b.length){w=Array(t.c<<1);B=0;for(v=t.c;B<v;)R=B++,w[R]=t.b[R],t.b[R]=null;t.b=w}t.b[t.c++]=m}m=C;k+=.39269908169872375}a=this.Ga;if(null!=n){n.Z();if(a.c==a.b.length){b=Array(a.c<<1);e=0;for(c=a.c;e<c;)d=e++,b[d]=a.b[d],a.b[d]=null;a.b=b}a.b[a.c++]=n}n=this.Ga;if(null!=q){q.x=0;q.y=0;q.z=0;q.w=1;if(n.ee==n.Wd.length){a=Array(n.ee<<1);b=0;for(e=n.ee;b<e;)c=b++,a[c]=n.Wd[c],n.Wd[c]=null;n.Wd=a}n.Wd[n.ee++]=q}q=this.Ga;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(q.eb==q.bb.length){n=Array(q.eb<<1);a=0;for(b=q.eb;a<b;)e=a++,n[e]=q.bb[e],q.bb[e]=null;q.bb=n}q.bb[q.eb++]=p}p=this.Ga;if(null!=m){m.Z();if(p.c==p.b.length){q=Array(p.c<<1);n=0;for(a=p.c;n<a;)b=n++,q[b]=p.b[b],p.b[b]=null;p.b=q}p.b[p.c++]=m}},pe:function(a){0<this.Sh.dt&&(this.Sh.dtRatio=a/this.Sh.dt);this.Sh.dt=a;this.Sh.invDt=1/a;a=(new Date).getTime()/1E3;this.gl();this.cn();Ad.totalTime=1E3*((new Date).getTime()/1E3-a)},cb:function(a){if(null!=a.oc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.uf?this.uf=a:(this.Ei.M=a,a.ia=this.Ei);this.Ei=a;a.oc=this;for(a=a.Dc;null!=a;){var b=a.M;a.tb=this.jc.Vh(a,a.u);a.Cc=this.Xl++;this.zg++;a=b}this.jj++},qe:function(a){if(a.oc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.uf&&(this.uf=this.uf.M);a==this.Ei&&(this.Ei=this.Ei.ia);a.M=null;a.ia=null;a.oc=null;for(a=a.Dc;null!=a;){b=a.M;this.jc.Wh(a.tb);a.tb=null;a.Cc=-1;for(var c=a.Yb.Ob;null!=c;){var e=c.M,d=c.Zd;if(d.Zb==a||d.$b==a){c=c.Qc;c.Gb=!1;c.yb=0;var c=this.Kh,f=d.ia,h=d.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d==c.zd&&(c.zd=c.zd.M);d==c.ye&&(c.ye=c.ye.ia);d.M=null;d.ia=null;d.Td&&(f=d.Zb.yd,h=d.$b.yd,f==h&&(h=null),null!=f&&f.endContact(d),null!=h&&h.endContact(d));f=d.rb.ia;h=d.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.rb==d.C.Ob&&(d.C.Ob=d.C.Ob.M);d.rb==d.C.kc&&(d.C.kc=d.C.kc.ia);d.rb.M=null;d.rb.ia=null;f=d.sb.ia;h=d.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.sb==d.D.Ob&&(d.D.Ob=d.D.Ob.M);d.sb==d.D.kc&&(d.D.kc=d.D.kc.ia);d.sb.M=null;d.sb.ia=null;d.C.Ae--;d.D.Ae--;d.rb.Qc=null;d.sb.Qc=null;d.rb.Zd=null;d.sb.Zd=null;d.Zb=null;d.$b=null;d.C=null;d.D=null;d.Td=!1;d.$i.Xe();d.Ja.Xe();d.Lh=null;f=d.Ye;f.Zb=null;f.$b=null;f.C=null;f.D=null;f.pj=null;f.qj=null;d.M=c.lg;c.lg=d;c.Bi--}c=e}this.zg--;a=b}this.jj--},ua:function(a){if(null!=a.oc)throw Error("A joint cannot belong to multiple worlds.");null==this.Ph?this.Ph=a:(this.zi.M=a,a.ia=this.zi);this.zi=a;a.oc=this;a.rb.Qc=a.D;a.sb.Qc=a.C;null==a.C.ze?a.C.ze=a.rb:(a.C.Ze.M=a.rb,a.rb.ia=a.C.Ze);a.C.Ze=a.rb;null==a.D.ze?a.D.ze=a.sb:(a.D.Ze.M=a.sb,a.sb.ia=a.D.Ze);a.D.Ze=a.sb;a.C.kh++;a.D.kh++;var b=a.C;b.Gb=!1;b.yb=0;b=a.D;b.Gb=!1;b.yb=0;a.hd();this.Sk++},Kl:function(a){if(a.oc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Ph&&(this.Ph=this.Ph.M);a==this.zi&&(this.zi=this.zi.ia);a.M=null;a.ia=null;a.oc=null;b=a.rb.ia;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.rb==a.C.ze&&(a.C.ze=a.C.ze.M);a.rb==a.C.Ze&&(a.C.Ze=a.C.Ze.ia);a.rb.M=null;a.rb.ia=null;b=a.sb.ia;e=a.sb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.sb==a.D.ze&&(a.D.ze=a.D.ze.M);a.sb==a.D.Ze&&(a.D.Ze=a.D.Ze.ia);a.sb.M=null;a.sb.ia=null;a.rb.Qc=null;a.sb.Qc=null;a.C.kh--;a.D.kh--;b=a.C;b.Gb=!1;b.yb=0;a=a.D;a.Gb=!1;a.yb=0;this.Sk--},re:function(a){this.ni=a},qc:function(){return this.ni},Hb:function(){null!=this.ni&&(2==this.jc.Lb&&this.Xm(this.ni,this.jc.ge),this.$m(this.ni),this.Ym(this.ni))},Vd:function(a,b,e){var c=this.gk.vj;c.x=a.x;c.y=a.y;c.z=a.z;c=this.gk.end;c.x=b.x;c.y=b.y;c.z=b.z;this.gk.xj=e;this.jc.Vd(a,b,this.gk)},Bf:function(a,b,e,c){this.aj.em=a;var d=this.aj.vj;d.v=b.v;d.A=b.A;d.B=b.B;d.o=b.o;d.f=b.f;d.h=b.h;d.i=b.i;d.m=b.m;d.j=b.j;d.l=b.l;d.g=b.g;d.s=b.s;d=this.aj.eg;d.x=e.x;d.y=e.y;d.z=e.z;this.aj.xj=c;this.jc.Bf(a,b,e,this.aj)},qh:function(a,b){this.yk.u.de(a);this.yk.Ql=b;this.jc.qh(a,this.yk)},fd:function(){return this.uf},vc:function(){return this.Ph},Mb:function(){return this.jc},pc:function(){return this.Kh},Kc:function(){return this.jj},Ec:function(){return this.Sk},Yd:function(){return this.zg},Ac:function(){return this.ek},Lc:function(){return this.Uk},ue:function(a){this.Uk=a},Jc:function(){return this.Tk},te:function(a){this.Tk=a},uc:function(){return this.Fk},se:function(a){var b=this.Fk;b.x=a.x;b.y=a.y;b.z=a.z}};hl.ua=Nc;hl.prototype=gb(Nc.prototype,{process:function(a){a=a.userData;a.Kb.Vd(this.vj,this.end,a.a,this.Mi)&&this.xj.process(a,this.Mi)}});gl.ua=Nc;gl.prototype=gb(Nc.prototype,{process:function(a){a=a.userData;var b=a.Kb.Lb;0>b||5<b||dc.cb.Bf(this.em,a.Kb,this.vj,a.a,this.eg,this.Z,this.Mi)&&this.xj.process(a,this.Mi)}});Wj.ua=Nc;Wj.prototype=gb(Nc.prototype,{process:function(a){a=a.userData;var b=a.u;b.ma<this.u.ja&&b.ja>this.u.ma&&b.na<this.u.ka&&b.ka>this.u.na&&b.oa<this.u.la&&b.la>this.u.oa&&this.Ql.process(a)}});yl.prototype={process:function(){}};fl.prototype={beginContact:function(){},preSolve:function(){},postSolve:function(){},endContact:function(){}};ej.prototype={process:function(){}};hf.ua=ej;hf.prototype=gb(ej.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1},process:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}}});gf.prototype={aabb:function(a,b,e){var c=this.p,d=(0==c.c?new u:c.b[--c.c]).za(a.x,a.y,a.z),c=this.p,f=(0==c.c?new u:c.b[--c.c]).za(a.x,a.y,b.z),c=this.p,h=(0==c.c?new u:c.b[--c.c]).za(a.x,b.y,a.z),c=this.p,l=(0==c.c?new u:c.b[--c.c]).za(a.x,b.y,b.z),c=this.p,g=(0==c.c?new u:c.b[--c.c]).za(b.x,a.y,a.z),c=this.p,c=(0==c.c?new u:c.b[--c.c]).za(b.x,a.y,b.z),k=this.p;a=(0==k.c?new u:k.b[--k.c]).za(b.x,b.y,a.z);k=this.p;b=(0==k.c?new u:k.b[--k.c]).za(b.x,b.y,b.z);this.line(d,f,e);this.line(h,l,e);this.line(g,c,e);this.line(a,b,e);this.line(d,h,e);this.line(f,l,e);this.line(g,a,e);this.line(c,b,e);this.line(d,g,e);this.line(f,c,e);this.line(h,a,e);this.line(l,b,e);e=this.p;if(null!=d){d.Z();if(e.c==e.b.length){for(var k=Array(e.c<<1),m=0,n=e.c;m<n;){var q=m++;k[q]=e.b[q];e.b[q]=null}e.b=k}e.b[e.c++]=d}d=this.p;if(null!=f){f.Z();if(d.c==d.b.length){e=Array(d.c<<1);k=0;for(m=d.c;k<m;)n=k++,e[n]=d.b[n],d.b[n]=null;d.b=e}d.b[d.c++]=f}f=this.p;if(null!=h){h.Z();if(f.c==f.b.length){d=Array(f.c<<1);e=0;for(k=f.c;e<k;)m=e++,d[m]=f.b[m],f.b[m]=null;f.b=d}f.b[f.c++]=h}h=this.p;if(null!=l){l.Z();if(h.c==h.b.length){f=Array(h.c<<1);d=0;for(e=h.c;d<e;)k=d++,f[k]=h.b[k],h.b[k]=null;h.b=f}h.b[h.c++]=l}l=this.p;if(null!=g){g.Z();if(l.c==l.b.length){h=Array(l.c<<1);f=0;for(d=l.c;f<d;)e=f++,h[e]=l.b[e],l.b[e]=null;l.b=h}l.b[l.c++]=g}g=this.p;if(null!=c){c.Z();if(g.c==g.b.length){l=Array(g.c<<1);h=0;for(f=g.c;h<f;)d=h++,l[d]=g.b[d],g.b[d]=null;g.b=l}g.b[g.c++]=c}c=this.p;if(null!=a){a.Z();if(c.c==c.b.length){g=Array(c.c<<1);l=0;for(h=c.c;l<h;)f=l++,g[f]=c.b[f],c.b[f]=null;c.b=g}c.b[c.c++]=a}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){c=Array(a.c<<1);g=0;for(l=a.c;g<l;)h=g++,c[h]=a.b[h],a.b[h]=null;a.b=c}a.b[a.c++]=b}},basis:function(a,b,e,c,d){var f=this.p,h=0==f.c?new u:f.b[--f.c],f=this.p,l=0==f.eb?new P:f.bb[--f.eb],f=this.p,g=0==f.c?new u:f.b[--f.c],f=this.p,k=0==f.c?new u:f.b[--f.c],f=this.p,f=0==f.c?new u:f.b[--f.c];h.x=a.v;h.y=a.A;h.z=a.B;l.e00=a.o;l.e01=a.f;l.e02=a.h;l.e10=a.i;l.e11=a.m;l.e12=a.j;l.e20=a.l;l.e21=a.g;l.e22=a.s;g.za(l.e00,l.e10,l.e20);k.za(l.e01,l.e11,l.e21);f.za(l.e02,l.e12,l.e22);a=g.y*b;var m=g.z*b;g.x=g.x*b;g.y=a;g.z=m;a=g.y+h.y;m=g.z+h.z;g.x+=h.x;g.y=a;g.z=m;a=k.y*b;m=k.z*b;k.x=k.x*b;k.y=a;k.z=m;a=k.y+h.y;m=k.z+h.z;k.x+=h.x;k.y=a;k.z=m;a=f.y*b;m=f.z*b;f.x=f.x*b;f.y=a;f.z=m;b=f.y+h.y;a=f.z+h.z;f.x+=h.x;f.y=b;f.z=a;this.line(h,g,e);this.line(h,k,c);this.line(h,f,d);e=this.p;if(null!=h){h.Z();if(e.c==e.b.length){c=Array(e.c<<1);d=0;for(b=e.c;d<b;)a=d++,c[a]=e.b[a],e.b[a]=null;e.b=c}e.b[e.c++]=h}h=this.p;if(null!=l){l.e00=1;l.e01=0;l.e02=0;l.e10=0;l.e11=1;l.e12=0;l.e20=0;l.e21=0;l.e22=1;if(h.eb==h.bb.length){e=Array(h.eb<<1);c=0;for(d=h.eb;c<d;)b=c++,e[b]=h.bb[b],h.bb[b]=null;h.bb=e}h.bb[h.eb++]=l}l=this.p;if(null!=g){g.Z();if(l.c==l.b.length){h=Array(l.c<<1);e=0;for(c=l.c;e<c;)d=e++,h[d]=l.b[d],l.b[d]=null;l.b=h}l.b[l.c++]=g}g=this.p;if(null!=k){k.Z();if(g.c==g.b.length){l=Array(g.c<<1);h=0;for(e=g.c;h<e;)c=h++,l[c]=g.b[c],g.b[c]=null;g.b=l}g.b[g.c++]=k}k=this.p;if(null!=f){f.Z();if(k.c==k.b.length){g=Array(k.c<<1);l=0;for(h=k.c;l<h;)e=l++,g[e]=k.b[e],k.b[e]=null;k.b=g}k.b[k.c++]=f}},ellipse:function(a,b,e,c,d,f){this.arc(a,b,e,c,d,0,6.28318530717958,!1,f)},arc:function(a,b,e,c,d,f,h,l,g){var k=this.p,k=0==k.c?new u:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;b=k.y*c;var m=k.z*c;k.x=k.x*c;k.y=b;k.z=m;b=k;c=this.p;c=0==c.c?new u:c.b[--c.c];c.x=e.x;c.y=e.y;c.z=e.z;e=c.y*d;k=c.z*d;c.x=c.x*d;c.y=e;c.z=k;e=c;d=h-f;0>d&&(d=-d);(k=d/.5235987755982984+.5|0)||(k=1);d=f;f=(h-f)/k;h=this.p;h=0==h.c?new u:h.b[--h.c];h.x=a.x;h.y=a.y;h.z=a.z;c=Math.cos(d);var m=h.y+b.y*c,n=h.z+b.z*c;h.x+=b.x*c;h.y=m;h.z=n;c=Math.sin(d);m=h.y+e.y*c;n=h.z+e.z*c;h.x+=e.x*c;h.y=m;h.z=n;l&&this.line(a,h,g);for(c=0;c<k;){c++;d+=f;m=this.p;m=0==m.c?new u:m.b[--m.c];m.x=a.x;m.y=a.y;m.z=a.z;var n=Math.cos(d),q=m.y+b.y*n,p=m.z+b.z*n;m.x=m.x+b.x*n;m.y=q;m.z=p;n=Math.sin(d);q=m.y+e.y*n;p=m.z+e.z*n;m.x=m.x+e.x*n;m.y=q;m.z=p;this.line(h,m,g);n=this.p;if(null!=h){h.Z();if(n.c==n.b.length){for(var q=Array(n.c<<1),p=0,r=n.c;p<r;){var t=p++;q[t]=n.b[t];n.b[t]=null}n.b=q}n.b[n.c++]=h}h=m}l&&this.line(a,h,g);a=this.p;if(null!=h){h.Z();if(a.c==a.b.length){l=Array(a.c<<1);g=0;for(d=a.c;g<d;)f=g++,l[f]=a.b[f],a.b[f]=null;a.b=l}a.b[a.c++]=h}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){l=Array(a.c<<1);g=0;for(d=a.c;g<d;)f=g++,l[f]=a.b[f],a.b[f]=null;a.b=l}a.b[a.c++]=b}b=this.p;if(null!=e){e.Z();if(b.c==b.b.length){a=Array(b.c<<1);l=0;for(g=b.c;l<g;)d=l++,a[d]=b.b[d],b.b[d]=null;b.b=a}b.b[b.c++]=e}},cone:function(a,b,e,c){var d=this.p,f=0==d.c?new u:d.b[--d.c],h=this.p,l=0==h.c?new u:h.b[--h.c],g=this.p,k=0==g.c?new u:g.b[--g.c],m=this.p,n=0==m.c?new u:m.b[--m.c],q=this.p,p=0==q.eb?new P:q.bb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,t=0==r.c?new u:r.b[--r.c];t.x=n.x;t.y=n.y;t.z=n.z;var R=t.y+l.y*e,w=t.z+l.z*e;t.x+=l.x*e;t.y=R;t.z=w;var B=this.p,v=0==B.c?new u:B.b[--B.c];v.x=n.x;v.y=n.y;v.z=n.z;var C=-e,U=v.y+l.y*C,A=v.z+l.z*C;v.x+=l.x*C;v.y=U;v.z=A;if(this.wireframe){var E=this.p,z=0==E.c?new u:E.b[--E.c];z.x=v.x;z.y=v.y;z.z=v.z;var D=-b,I=z.y+f.y*D,J=z.z+f.z*D;z.x+=f.x*D;z.y=I;z.z=J;var F=z.y+0*k.y,L=z.z+0*k.z;z.x+=0*k.x;z.y=F;z.z=L;var V=this.p,da=0==V.c?new u:V.b[--V.c];da.x=v.x;da.y=v.y;da.z=v.z;var xa=da.y+f.y*b,rd=da.z+f.z*b;da.x+=f.x*b;da.y=xa;da.z=rd;var xb=da.y+0*k.y,Ka=da.z+0*k.z;da.x+=0*k.x;da.y=xb;da.z=Ka;var Da=this.p,ma=0==Da.c?new u:Da.b[--Da.c];ma.x=v.x;ma.y=v.y;ma.z=v.z;var Q=ma.y+0*f.y,Na=ma.z+0*f.z;ma.x+=0*f.x;ma.y=Q;ma.z=Na;var Ha=-b,Ea=ma.y+k.y*Ha,Ua=ma.z+k.z*Ha;ma.x+=k.x*Ha;ma.y=Ea;ma.z=Ua;var ua=this.p,oa=0==ua.c?new u:ua.b[--ua.c];oa.x=v.x;oa.y=v.y;oa.z=v.z;var Wa=oa.y+0*f.y,G=oa.z+0*f.z;oa.x+=0*f.x;oa.y=Wa;oa.z=G;var Qa=oa.y+k.y*b,X=oa.z+k.z*b;oa.x+=k.x*b;oa.y=Qa;oa.z=X;this.ellipse(v,f,k,b,b,c);this.line(t,z,c);this.line(t,da,c);this.line(t,ma,c);this.line(t,oa,c);var M=this.p;if(null!=z){z.Z();if(M.c==M.b.length){for(var N=Array(M.c<<1),ca=0,Y=M.c;ca<Y;){var S=ca++;N[S]=M.b[S];M.b[S]=null}M.b=N}M.b[M.c++]=z}var aa=this.p;if(null!=da){da.Z();if(aa.c==aa.b.length){for(var y=Array(aa.c<<1),fa=0,T=aa.c;fa<T;){var pa=fa++;y[pa]=aa.b[pa];aa.b[pa]=null}aa.b=y}aa.b[aa.c++]=da}var sa=this.p;if(null!=ma){ma.Z();if(sa.c==sa.b.length){for(var va=Array(sa.c<<1),ra=0,ka=sa.c;ra<ka;){var Z=ra++;va[Z]=sa.b[Z];sa.b[Z]=null}sa.b=va}sa.b[sa.c++]=ma}var na=this.p;if(null!=oa){oa.Z();if(na.c==na.b.length){for(var Aa=Array(na.c<<1),ya=0,K=na.c;ya<K;){var Ba=ya++;Aa[Ba]=na.b[Ba];na.b[Ba]=null}na.b=Aa}na.b[na.c++]=oa}}else{for(var ha=1/Math.sqrt(b*b+4*e*e),ba=2*e*ha,Va=b*ha,ga=0;8>ga;){var O=ga++,za=this.Te[O],ob=this.yj[O];za.x=ob.x;za.y=ob.y;za.z=ob.z;var ja=za,Sa=ja.y*ba,Dc=ja.z*ba;ja.x=ja.x*ba;ja.y=Sa;ja.z=Dc;ja.y+=Va;var fb=this.Te[O],Db=fb.x*p.e10+fb.y*p.e11+fb.z*p.e12,ta=fb.x*p.e20+fb.y*p.e21+fb.z*p.e22;fb.x=fb.x*p.e00+fb.y*p.e01+fb.z*p.e02;fb.y=Db;fb.z=ta;var wa=this.fe[O],Fa=this.dm[O];wa.x=Fa.x;wa.y=Fa.y;wa.z=Fa.z;var eb=wa,Ia=eb.y*ba,pb=eb.z*ba;eb.x=eb.x*ba;eb.y=Ia;eb.z=pb;eb.y+=Va;var Oa=this.fe[O],la=Oa.x*p.e10+Oa.y*p.e11+Oa.z*p.e12,Ca=Oa.x*p.e20+Oa.y*p.e21+Oa.z*p.e22;Oa.x=Oa.x*p.e00+Oa.y*p.e01+Oa.z*p.e02;Oa.y=la;Oa.z=Ca;var Xa=this.Xd[O],Ra=this.yj[O];Xa.x=Ra.x;Xa.y=Ra.y;Xa.z=Ra.z;var hb=Xa,Jb=hb.x*p.e10+hb.y*p.e11+hb.z*p.e12,cb=hb.x*p.e20+hb.y*p.e21+hb.z*p.e22;hb.x=hb.x*p.e00+hb.y*p.e01+hb.z*p.e02;hb.y=Jb;hb.z=cb;var ub=hb,jb=ub.y*b,mb=ub.z*b;ub.x=ub.x*b;ub.y=jb;ub.z=mb;var Yb=ub,pc=Yb.y+n.y,Ya=Yb.z+n.z;Yb.x=Yb.x+n.x;Yb.y=pc;Yb.z=Ya;var La=this.Xd[O],vb=-e,H=La.y+l.y*vb,db=La.z+l.z*vb;La.x=La.x+l.x*vb;La.y=H;La.z=db}for(var kb=0;8>kb;){var zb=kb++,lb=t,tb=this.Xd[zb],x=this.Xd[(zb+1)%8],W=this.fe[zb];this.triangle(lb,tb,x,W,this.Te[zb],this.Te[(zb+1)%8],c);var lb=v,tb=this.Xd[(zb+1)%8],x=this.Xd[zb],ea=this.p,Bc=0==ea.c?new u:ea.b[--ea.c];Bc.x=l.x;Bc.y=l.y;Bc.z=l.z;var xc=Bc,Pa=-xc.y,qb=-xc.z;xc.x=-xc.x;xc.y=Pa;xc.z=qb;W=xc;this.triangle(lb,tb,x,W,W,W,c);var nb=this.p;if(null!=W){W.Z();if(nb.c==nb.b.length){for(var Ab=Array(nb.c<<1),Bb=0,ia=nb.c;Bb<ia;){var Ta=Bb++;Ab[Ta]=nb.b[Ta];nb.b[Ta]=null}nb.b=Ab}nb.b[nb.c++]=W}}}var bb=this.p;if(null!=t){t.Z();if(bb.c==bb.b.length){for(var ib=Array(bb.c<<1),Cb=0,Ma=bb.c;Cb<Ma;){var Eb=Cb++;ib[Eb]=bb.b[Eb];bb.b[Eb]=null}bb.b=ib}bb.b[bb.c++]=t}var Ga=this.p;if(null!=v){v.Z();if(Ga.c==Ga.b.length){for(var qa=Array(Ga.c<<1),Ac=0,Kb=Ga.c;Ac<Kb;){var Qb=Ac++;qa[Qb]=Ga.b[Qb];Ga.b[Qb]=null}Ga.b=qa}Ga.b[Ga.c++]=v}var Ja=this.p;if(null!=n){n.Z();if(Ja.c==Ja.b.length){for(var ab=Array(Ja.c<<1),Za=0,Zb=Ja.c;Za<Zb;){var gb=Za++;ab[gb]=Ja.b[gb];Ja.b[gb]=null}Ja.b=ab}Ja.b[Ja.c++]=n}var $a=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if($a.eb==$a.bb.length){for(var wb=Array($a.eb<<1),sb=0,Tb=$a.eb;sb<Tb;){var fc=sb++;wb[fc]=$a.bb[fc];$a.bb[fc]=null}$a.bb=wb}$a.bb[$a.eb++]=p}var ec=this.p;if(null!=f){f.Z();if(ec.c==ec.b.length){for(var Nb=Array(ec.c<<1),bc=0,Fb=ec.c;bc<Fb;){var mc=bc++;Nb[mc]=ec.b[mc];ec.b[mc]=null}ec.b=Nb}ec.b[ec.c++]=f}var ac=this.p;if(null!=l){l.Z();if(ac.c==ac.b.length){for(var Ob=Array(ac.c<<1),cc=0,Ub=ac.c;cc<Ub;){var Lb=cc++;Ob[Lb]=ac.b[Lb];ac.b[Lb]=null}ac.b=Ob}ac.b[ac.c++]=l}var Rb=this.p;if(null!=k){k.Z();if(Rb.c==Rb.b.length){for(var rb=Array(Rb.c<<1),yb=0,qc=Rb.c;yb<qc;){var Hb=yb++;rb[Hb]=Rb.b[Hb];Rb.b[Hb]=null}Rb.b=rb}Rb.b[Rb.c++]=k}},cylinder:function(a,b,e,c){var d=this.p,f=0==d.c?new u:d.b[--d.c],h=this.p,l=0==h.c?new u:h.b[--h.c],g=this.p,k=0==g.c?new u:g.b[--g.c],m=this.p,n=0==m.c?new u:m.b[--m.c],q=this.p,p=0==q.eb?new P:q.bb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,t=0==r.c?new u:r.b[--r.c];t.x=n.x;t.y=n.y;t.z=n.z;var R=t.y+l.y*e,w=t.z+l.z*e;t.x+=l.x*e;t.y=R;t.z=w;var B=this.p,v=0==B.c?new u:B.b[--B.c];v.x=n.x;v.y=n.y;v.z=n.z;var C=-e,U=v.y+l.y*C,A=v.z+l.z*C;v.x+=l.x*C;v.y=U;v.z=A;if(this.wireframe){var E=this.p,z=0==E.c?new u:E.b[--E.c];z.x=t.x;z.y=t.y;z.z=t.z;var D=-b,I=z.y+f.y*D,J=z.z+f.z*D;z.x+=f.x*D;z.y=I;z.z=J;var F=z.y+0*k.y,L=z.z+0*k.z;z.x+=0*k.x;z.y=F;z.z=L;var V=this.p,da=0==V.c?new u:V.b[--V.c];da.x=t.x;da.y=t.y;da.z=t.z;var xa=da.y+f.y*b,Na=da.z+f.z*b;da.x+=f.x*b;da.y=xa;da.z=Na;var xb=da.y+0*k.y,Ka=da.z+0*k.z;da.x+=0*k.x;da.y=xb;da.z=Ka;var Da=this.p,ma=0==Da.c?new u:Da.b[--Da.c];ma.x=t.x;ma.y=t.y;ma.z=t.z;var Q=ma.y+0*f.y,Ga=ma.z+0*f.z;ma.x+=0*f.x;ma.y=Q;ma.z=Ga;var Ha=-b,Ea=ma.y+k.y*Ha,Ua=ma.z+k.z*Ha;ma.x+=k.x*Ha;ma.y=Ea;ma.z=Ua;var ua=this.p,oa=0==ua.c?new u:ua.b[--ua.c];oa.x=t.x;oa.y=t.y;oa.z=t.z;var Wa=oa.y+0*f.y,G=oa.z+0*f.z;oa.x+=0*f.x;oa.y=Wa;oa.z=G;var Qa=oa.y+k.y*b,X=oa.z+k.z*b;oa.x+=k.x*b;oa.y=Qa;oa.z=X;var M=this.p,N=0==M.c?new u:M.b[--M.c];N.x=v.x;N.y=v.y;N.z=v.z;var ca=-b,Y=N.y+f.y*ca,S=N.z+f.z*ca;N.x+=f.x*ca;N.y=Y;N.z=S;var aa=N.y+0*k.y,y=N.z+0*k.z;N.x+=0*k.x;N.y=aa;N.z=y;var fa=this.p,T=0==fa.c?new u:fa.b[--fa.c];T.x=v.x;T.y=v.y;T.z=v.z;var pa=T.y+f.y*b,sa=T.z+f.z*b;T.x+=f.x*b;T.y=pa;T.z=sa;var va=T.y+0*k.y,ra=T.z+0*k.z;T.x+=0*k.x;T.y=va;T.z=ra;var ka=this.p,Z=0==ka.c?new u:ka.b[--ka.c];Z.x=v.x;Z.y=v.y;Z.z=v.z;var na=Z.y+0*f.y,Aa=Z.z+0*f.z;Z.x+=0*f.x;Z.y=na;Z.z=Aa;var ya=-b,K=Z.y+k.y*ya,Ba=Z.z+k.z*ya;Z.x+=k.x*ya;Z.y=K;Z.z=Ba;var ha=this.p,ba=0==ha.c?new u:ha.b[--ha.c];ba.x=v.x;ba.y=v.y;ba.z=v.z;var Va=ba.y+0*f.y,ga=ba.z+0*f.z;ba.x+=0*f.x;ba.y=Va;ba.z=ga;var O=ba.y+k.y*b,za=ba.z+k.z*b;ba.x+=k.x*b;ba.y=O;ba.z=za;this.ellipse(t,f,k,b,b,c);this.ellipse(v,f,k,b,b,c);this.line(z,N,c);this.line(da,T,c);this.line(ma,Z,c);this.line(oa,ba,c);var ob=this.p;if(null!=z){z.Z();if(ob.c==ob.b.length){for(var ja=Array(ob.c<<1),Ja=0,Sa=ob.c;Ja<Sa;){var fb=Ja++;ja[fb]=ob.b[fb];ob.b[fb]=null}ob.b=ja}ob.b[ob.c++]=z}var Db=this.p;if(null!=da){da.Z();if(Db.c==Db.b.length){for(var ta=Array(Db.c<<1),wa=0,Fa=Db.c;wa<Fa;){var eb=wa++;ta[eb]=Db.b[eb];Db.b[eb]=null}Db.b=ta}Db.b[Db.c++]=da}var Ia=this.p;if(null!=ma){ma.Z();if(Ia.c==Ia.b.length){for(var pb=Array(Ia.c<<1),Oa=0,la=Ia.c;Oa<la;){var Ca=Oa++;pb[Ca]=Ia.b[Ca];Ia.b[Ca]=null}Ia.b=pb}Ia.b[Ia.c++]=ma}var Xa=this.p;if(null!=oa){oa.Z();if(Xa.c==Xa.b.length){for(var Ra=Array(Xa.c<<1),hb=0,Jb=Xa.c;hb<Jb;){var cb=hb++;Ra[cb]=Xa.b[cb];Xa.b[cb]=null}Xa.b=Ra}Xa.b[Xa.c++]=oa}var ub=this.p;if(null!=N){N.Z();if(ub.c==ub.b.length){for(var jb=Array(ub.c<<1),mb=0,Yb=ub.c;mb<Yb;){var pc=mb++;jb[pc]=ub.b[pc];ub.b[pc]=null}ub.b=jb}ub.b[ub.c++]=N}var Ya=this.p;if(null!=T){T.Z();if(Ya.c==Ya.b.length){for(var La=Array(Ya.c<<1),vb=0,H=Ya.c;vb<H;){var db=vb++;La[db]=Ya.b[db];Ya.b[db]=null}Ya.b=La}Ya.b[Ya.c++]=T}var kb=this.p;if(null!=Z){Z.Z();if(kb.c==kb.b.length){for(var zb=Array(kb.c<<1),lb=0,tb=kb.c;lb<tb;){var x=lb++;zb[x]=kb.b[x];kb.b[x]=null}kb.b=zb}kb.b[kb.c++]=Z}var W=this.p;if(null!=ba){ba.Z();if(W.c==W.b.length){for(var ea=Array(W.c<<1),Bc=0,xc=W.c;Bc<xc;){var Pa=Bc++;ea[Pa]=W.b[Pa];W.b[Pa]=null}W.b=ea}W.b[W.c++]=ba}}else{for(var qb=0;8>qb;){var nb=qb++,Ab=this.Te[nb],Bb=this.yj[nb];Ab.x=Bb.x;Ab.y=Bb.y;Ab.z=Bb.z;var ia=Ab,Ta=ia.x*p.e10+ia.y*p.e11+ia.z*p.e12,bb=ia.x*p.e20+ia.y*p.e21+ia.z*p.e22;ia.x=ia.x*p.e00+ia.y*p.e01+ia.z*p.e02;ia.y=Ta;ia.z=bb;var ib=this.fe[nb],Cb=this.Te[nb];ib.x=Cb.x;ib.y=Cb.y;ib.z=Cb.z;var Ma=ib,Eb=Ma.y*b,ab=Ma.z*b;Ma.x=Ma.x*b;Ma.y=Eb;Ma.z=ab;var qa=Ma,Ac=qa.y+n.y,Kb=qa.z+n.z;qa.x=qa.x+n.x;qa.y=Ac;qa.z=Kb;var Qb=this.Xd[nb],Za=this.fe[nb];Qb.x=Za.x;Qb.y=Za.y;Qb.z=Za.z;var $a=this.fe[nb],gb=$a.y+l.y*e,Zb=$a.z+l.z*e;$a.x=$a.x+l.x*e;$a.y=gb;$a.z=Zb;var wb=this.Xd[nb],sb=-e,yb=wb.y+l.y*sb,Hb=wb.z+l.z*sb;wb.x=wb.x+l.x*sb;wb.y=yb;wb.z=Hb}for(var Tb=0;8>Tb;){var fc=Tb++,ec=t,Nb=this.fe[fc],bc=this.fe[(fc+1)%8],Fb=l;this.triangle(ec,Nb,bc,Fb,Fb,Fb,c);var ec=v,Nb=this.Xd[(fc+1)%8],bc=this.Xd[fc],mc=this.p,ac=0==mc.c?new u:mc.b[--mc.c];ac.x=l.x;ac.y=l.y;ac.z=l.z;var Ob=ac,cc=-Ob.y,Ub=-Ob.z;Ob.x=-Ob.x;Ob.y=cc;Ob.z=Ub;Fb=Ob;this.triangle(ec,Nb,bc,Fb,Fb,Fb,c);var Lb=this.p;if(null!=Fb){Fb.Z();if(Lb.c==Lb.b.length){for(var Rb=Array(Lb.c<<1),rb=0,Xb=Lb.c;rb<Xb;){var qc=rb++;Rb[qc]=Lb.b[qc];Lb.b[qc]=null}Lb.b=Rb}Lb.b[Lb.c++]=Fb}var ec=this.fe[fc],Nb=this.Xd[fc],bc=this.Xd[(fc+1)%8],Ib=this.fe[(fc+1)%8],Fb=this.Te[fc],$c=this.Te[(fc+1)%8];this.rect(ec,Nb,bc,Ib,Fb,Fb,$c,$c,c)}}var hc=this.p;if(null!=t){t.Z();if(hc.c==hc.b.length){for(var Ic=Array(hc.c<<1),oc=0,Vb=hc.c;oc<Vb;){var ad=oc++;Ic[ad]=hc.b[ad];hc.b[ad]=null}hc.b=Ic}hc.b[hc.c++]=t}var rc=this.p;if(null!=v){v.Z();if(rc.c==rc.b.length){for(var Pb=Array(rc.c<<1),Zc=0,sc=rc.c;Zc<sc;){var jc=Zc++;Pb[jc]=rc.b[jc];rc.b[jc]=null}rc.b=Pb}rc.b[rc.c++]=v}var Ec=this.p;if(null!=n){n.Z();if(Ec.c==Ec.b.length){for(var kc=Array(Ec.c<<1),wc=0,ic=Ec.c;wc<ic;){var Mb=wc++;kc[Mb]=Ec.b[Mb];Ec.b[Mb]=null}Ec.b=kc}Ec.b[Ec.c++]=n}var Wb=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Wb.eb==Wb.bb.length){for(var lc=Array(Wb.eb<<1),Bd=0,dc=Wb.eb;Bd<dc;){var Pc=Bd++;lc[Pc]=Wb.bb[Pc];Wb.bb[Pc]=null}Wb.bb=lc}Wb.bb[Wb.eb++]=p}var $b=this.p;if(null!=f){f.Z();if($b.c==$b.b.length){for(var uc=Array($b.c<<1),Gc=0,gc=$b.c;Gc<gc;){var Sb=Gc++;uc[Sb]=$b.b[Sb];$b.b[Sb]=null}$b.b=uc}$b.b[$b.c++]=f}var nc=this.p;if(null!=l){l.Z();if(nc.c==nc.b.length){for(var Mc=Array(nc.c<<1),Qc=0,Uc=nc.c;Qc<Uc;){var Vc=Qc++;Mc[Vc]=nc.b[Vc];nc.b[Vc]=null}nc.b=Mc}nc.b[nc.c++]=l}var Ud=this.p;if(null!=k){k.Z();if(Ud.c==Ud.b.length){for(var ed=Array(Ud.c<<1),Yc=0,Nc=Ud.c;Yc<Nc;){var Xc=Yc++;ed[Xc]=Ud.b[Xc];Ud.b[Xc]=null}Ud.b=ed}Ud.b[Ud.c++]=k}},capsule:function(a,b,e,c){var d=this.p,f=0==d.c?new u:d.b[--d.c],h=this.p,l=0==h.c?new u:h.b[--h.c],g=this.p,k=0==g.c?new u:g.b[--g.c],m=this.p,n=0==m.c?new u:m.b[--m.c],q=this.p,p=0==q.eb?new P:q.bb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);for(var r=this.Fh,t=this.xk,R=0;5>R;)for(var w=R++,B=0,v=this.Fh[w].length;B<v;){var C=B++,U=t[w][C],A=this.vk[w][C];U.x=A.x;U.y=A.y;U.z=A.z;var E=U,z=E.x*p.e10+E.y*p.e11+E.z*p.e12,D=E.x*p.e20+E.y*p.e21+E.z*p.e22;E.x=E.x*p.e00+E.y*p.e01+E.z*p.e02;E.y=z;E.z=D}for(var I=0;4>I;){var J=I++;if(!J)for(var F=0;3>F;)for(var L=F++,V=0,da=this.Fh[L].length;V<da;){var xa=V++,Ja=r[L][xa],xb=t[L][xa];Ja.x=xb.x;Ja.y=xb.y;Ja.z=xb.z;var Ka=Ja,Da=Ka.y*b,ma=Ka.z*b;Ka.x=Ka.x*b;Ka.y=Da;Ka.z=ma;var Q=Ka,Na=Q.y+n.y,Ha=Q.z+n.z;Q.x=Q.x+n.x;Q.y=Na;Q.z=Ha;var Ea=Q,Ua=Ea.y+l.y*e,ua=Ea.z+l.z*e;Ea.x=Ea.x+l.x*e;Ea.y=Ua;Ea.z=ua}if(2==J)for(var oa=2;5>oa;)for(var Wa=oa++,G=0,Qa=this.Fh[Wa].length;G<Qa;){var X=G++,M=r[Wa][X],N=t[Wa][X];M.x=N.x;M.y=N.y;M.z=N.z;var ca=M,Y=ca.y*b,S=ca.z*b;ca.x=ca.x*b;ca.y=Y;ca.z=S;var aa=ca,y=aa.y+n.y,fa=aa.z+n.z;aa.x=aa.x+n.x;aa.y=y;aa.z=fa;var T=aa,pa=-e,sa=T.y+l.y*pa,va=T.z+l.z*pa;T.x=T.x+l.x*pa;T.y=sa;T.z=va}for(var ra=0;8>ra;){var ka=ra++,Z,na,Aa,ya,K,Ba,ha,ba;J?3==J?this.wireframe?(Z=r[4][0],na=r[J][(ka+1)%8],Aa=r[J][ka],this.line(Z,na,c),this.line(na,Aa,c)):(Z=r[4][0],na=r[J][(ka+1)%8],Aa=r[J][ka],K=t[4][0],Ba=t[J][(ka+1)%8],ha=t[J][ka],this.triangle(Z,na,Aa,K,Ba,ha,c)):this.wireframe?(Z=r[J][ka],na=r[J][(ka+1)%8],Aa=r[J+1][ka],this.line(Z,na,c),this.line(Z,Aa,c)):(Z=r[J][ka],na=r[J][(ka+1)%8],Aa=r[J+1][ka],ya=r[J+1][(ka+1)%8],K=t[J][ka],Ba=t[J][(ka+1)%8],ha=t[J+1][ka],ba=t[J+1][(ka+1)%8],this.rect(Z,Aa,ya,na,K,ha,ba,Ba,c)):this.wireframe?(Z=r[0][0],na=r[1][ka],this.line(Z,na,c)):(Z=r[0][0],na=r[1][ka],Aa=r[1][(ka+1)%8],K=t[0][0],Ba=t[1][ka],ha=t[1][(ka+1)%8],this.triangle(Z,na,Aa,K,Ba,ha,c))}}var Va=this.p,ga=0==Va.c?new u:Va.b[--Va.c];ga.x=n.x;ga.y=n.y;ga.z=n.z;var O=ga.y+l.y*e,za=ga.z+l.z*e;ga.x+=l.x*e;ga.y=O;ga.z=za;var ob=this.p,ja=0==ob.c?new u:ob.b[--ob.c];ja.x=n.x;ja.y=n.y;ja.z=n.z;var Ga=-e,Sa=ja.y+l.y*Ga,fb=ja.z+l.z*Ga;ja.x+=l.x*Ga;ja.y=Sa;ja.z=fb;if(this.wireframe){var Db=this.p,ta=0==Db.c?new u:Db.b[--Db.c];ta.x=ga.x;ta.y=ga.y;ta.z=ga.z;var wa=-b,Fa=ta.y+f.y*wa,eb=ta.z+f.z*wa;ta.x+=f.x*wa;ta.y=Fa;ta.z=eb;var Ia=ta.y+0*k.y,pb=ta.z+0*k.z;ta.x+=0*k.x;ta.y=Ia;ta.z=pb;var Oa=this.p,la=0==Oa.c?new u:Oa.b[--Oa.c];la.x=ga.x;la.y=ga.y;la.z=ga.z;var Ca=la.y+f.y*b,Xa=la.z+f.z*b;la.x+=f.x*b;la.y=Ca;la.z=Xa;var Ra=la.y+0*k.y,hb=la.z+0*k.z;la.x+=0*k.x;la.y=Ra;la.z=hb;var Jb=this.p,cb=0==Jb.c?new u:Jb.b[--Jb.c];cb.x=ga.x;cb.y=ga.y;cb.z=ga.z;var ub=cb.y+0*f.y,jb=cb.z+0*f.z;cb.x+=0*f.x;cb.y=ub;cb.z=jb;var mb=-b,Yb=cb.y+k.y*mb,pc=cb.z+k.z*mb;cb.x+=k.x*mb;cb.y=Yb;cb.z=pc;var Ya=this.p,La=0==Ya.c?new u:Ya.b[--Ya.c];La.x=ga.x;La.y=ga.y;La.z=ga.z;var vb=La.y+0*f.y,H=La.z+0*f.z;La.x+=0*f.x;La.y=vb;La.z=H;var db=La.y+k.y*b,kb=La.z+k.z*b;La.x+=k.x*b;La.y=db;La.z=kb;var zb=this.p,lb=0==zb.c?new u:zb.b[--zb.c];lb.x=ja.x;lb.y=ja.y;lb.z=ja.z;var tb=-b,x=lb.y+f.y*tb,W=lb.z+f.z*tb;lb.x+=f.x*tb;lb.y=x;lb.z=W;var ea=lb.y+0*k.y,Bc=lb.z+0*k.z;lb.x+=0*k.x;lb.y=ea;lb.z=Bc;var xc=this.p,Pa=0==xc.c?new u:xc.b[--xc.c];Pa.x=ja.x;Pa.y=ja.y;Pa.z=ja.z;var qb=Pa.y+f.y*b,nb=Pa.z+f.z*b;Pa.x+=f.x*b;Pa.y=qb;Pa.z=nb;var Ab=Pa.y+0*k.y,Bb=Pa.z+0*k.z;Pa.x+=0*k.x;Pa.y=Ab;Pa.z=Bb;var ia=this.p,Ta=0==ia.c?new u:ia.b[--ia.c];Ta.x=ja.x;Ta.y=ja.y;Ta.z=ja.z;var bb=Ta.y+0*f.y,ib=Ta.z+0*f.z;Ta.x+=0*f.x;Ta.y=bb;Ta.z=ib;var Cb=-b,Ma=Ta.y+k.y*Cb,Eb=Ta.z+k.z*Cb;Ta.x+=k.x*Cb;Ta.y=Ma;Ta.z=Eb;var ab=this.p,qa=0==ab.c?new u:ab.b[--ab.c];qa.x=ja.x;qa.y=ja.y;qa.z=ja.z;var Ac=qa.y+0*f.y,Kb=qa.z+0*f.z;qa.x+=0*f.x;qa.y=Ac;qa.z=Kb;var Qb=qa.y+k.y*b,$a=qa.z+k.z*b;qa.x+=k.x*b;qa.y=Qb;qa.z=$a;this.ellipse(ga,f,k,b,b,c);this.ellipse(ja,f,k,b,b,c);this.line(ta,lb,c);this.line(la,Pa,c);this.line(cb,Ta,c);this.line(La,qa,c);var Za=this.p;if(null!=ta){ta.Z();if(Za.c==Za.b.length){for(var gb=Array(Za.c<<1),Zb=0,wb=Za.c;Zb<wb;){var sb=Zb++;gb[sb]=Za.b[sb];Za.b[sb]=null}Za.b=gb}Za.b[Za.c++]=ta}var yb=this.p;if(null!=la){la.Z();if(yb.c==yb.b.length){for(var Hb=Array(yb.c<<1),Tb=0,fc=yb.c;Tb<fc;){var ec=Tb++;Hb[ec]=yb.b[ec];yb.b[ec]=null}yb.b=Hb}yb.b[yb.c++]=la}var Nb=this.p;if(null!=cb){cb.Z();if(Nb.c==Nb.b.length){for(var bc=Array(Nb.c<<1),Fb=0,mc=Nb.c;Fb<mc;){var ac=Fb++;bc[ac]=Nb.b[ac];Nb.b[ac]=null}Nb.b=bc}Nb.b[Nb.c++]=cb}var Ob=this.p;if(null!=La){La.Z();if(Ob.c==Ob.b.length){for(var cc=Array(Ob.c<<1),Ub=0,Lb=Ob.c;Ub<Lb;){var Rb=Ub++;cc[Rb]=Ob.b[Rb];Ob.b[Rb]=null}Ob.b=cc}Ob.b[Ob.c++]=La}var rb=this.p;if(null!=lb){lb.Z();if(rb.c==rb.b.length){for(var Xb=Array(rb.c<<1),qc=0,Ib=rb.c;qc<Ib;){var $c=qc++;Xb[$c]=rb.b[$c];rb.b[$c]=null}rb.b=Xb}rb.b[rb.c++]=lb}var hc=this.p;if(null!=Pa){Pa.Z();if(hc.c==hc.b.length){for(var Ic=Array(hc.c<<1),oc=0,Wb=hc.c;oc<Wb;){var ad=oc++;Ic[ad]=hc.b[ad];hc.b[ad]=null}hc.b=Ic}hc.b[hc.c++]=Pa}var rc=this.p;if(null!=Ta){Ta.Z();if(rc.c==rc.b.length){for(var $b=Array(rc.c<<1),Zc=0,Vb=rc.c;Zc<Vb;){var Pb=Zc++;$b[Pb]=rc.b[Pb];rc.b[Pb]=null}rc.b=$b}rc.b[rc.c++]=Ta}var Ec=this.p;if(null!=qa){qa.Z();if(Ec.c==Ec.b.length){for(var jc=Array(Ec.c<<1),wc=0,nc=Ec.c;wc<nc;){var kc=wc++;jc[kc]=Ec.b[kc];Ec.b[kc]=null}Ec.b=jc}Ec.b[Ec.c++]=qa}}else{for(var sc=0;8>sc;){var Mb=sc++,ic=this.Te[Mb],lc=this.yj[Mb];ic.x=lc.x;ic.y=lc.y;ic.z=lc.z;var Pc=ic,dc=Pc.x*p.e10+Pc.y*p.e11+Pc.z*p.e12,uc=Pc.x*p.e20+Pc.y*p.e21+Pc.z*p.e22;Pc.x=Pc.x*p.e00+Pc.y*p.e01+Pc.z*p.e02;Pc.y=dc;Pc.z=uc;var Gc=this.fe[Mb],Sb=this.Te[Mb];Gc.x=Sb.x;Gc.y=Sb.y;Gc.z=Sb.z;var gc=Gc,Mc=gc.y*b,Uc=gc.z*b;gc.x=gc.x*b;gc.y=Mc;gc.z=Uc;var Qc=gc,Vc=Qc.y+n.y,ed=Qc.z+n.z;Qc.x=Qc.x+n.x;Qc.y=Vc;Qc.z=ed;var Xc=this.Xd[Mb],Yc=this.fe[Mb];Xc.x=Yc.x;Xc.y=Yc.y;Xc.z=Yc.z;var Nc=this.fe[Mb],zd=Nc.y+l.y*e,Ad=Nc.z+l.z*e;Nc.x=Nc.x+l.x*e;Nc.y=zd;Nc.z=Ad;var dd=this.Xd[Mb],yd=-e,Sd=dd.y+l.y*yd,Wc=dd.z+l.z*yd;dd.x=dd.x+l.x*yd;dd.y=Sd;dd.z=Wc}for(var Rc=0;8>Rc;){var Fc=Rc++,Oc=this.Te[Fc],yc=this.Te[(Fc+1)%8];this.rect(this.fe[Fc],this.Xd[Fc],this.Xd[(Fc+1)%8],this.fe[(Fc+1)%8],Oc,Oc,yc,yc,c)}}var tc=this.p;if(null!=ga){ga.Z();if(tc.c==tc.b.length){for(var sd=Array(tc.c<<1),Qd=0,$d=tc.c;Qd<$d;){var Vd=Qd++;sd[Vd]=tc.b[Vd];tc.b[Vd]=null}tc.b=sd}tc.b[tc.c++]=ga}var nd=this.p;if(null!=ja){ja.Z();if(nd.c==nd.b.length){for(var Fd=Array(nd.c<<1),me=0,be=nd.c;me<be;){var Pd=me++;Fd[Pd]=nd.b[Pd];nd.b[Pd]=null}nd.b=Fd}nd.b[nd.c++]=ja}var qd=this.p;if(null!=n){n.Z();if(qd.c==qd.b.length){for(var ne=Array(qd.c<<1),oe=0,pe=qd.c;oe<pe;){var qe=oe++;ne[qe]=qd.b[qe];qd.b[qe]=null}qd.b=ne}qd.b[qd.c++]=n}var td=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(td.eb==td.bb.length){for(var re=Array(td.eb<<1),ae=0,ie=td.eb;ae<ie;){var Rd=ae++;re[Rd]=td.bb[Rd];td.bb[Rd]=null}td.bb=re}td.bb[td.eb++]=p}var Sc=this.p;if(null!=f){f.Z();if(Sc.c==Sc.b.length){for(var ld=Array(Sc.c<<1),od=0,je=Sc.c;od<je;){var Td=od++;ld[Td]=Sc.b[Td];Sc.b[Td]=null}Sc.b=ld}Sc.b[Sc.c++]=f}var bd=this.p;if(null!=l){l.Z();if(bd.c==bd.b.length){for(var cd=Array(bd.c<<1),fd=0,Hc=bd.c;fd<Hc;){var Cc=fd++;cd[Cc]=bd.b[Cc];bd.b[Cc]=null}bd.b=cd}bd.b[bd.c++]=l}var zc=this.p;if(null!=k){k.Z();if(zc.c==zc.b.length){for(var Wd=Array(zc.c<<1),ce=0,ke=zc.c;ce<ke;){var Cd=ce++;Wd[Cd]=zc.b[Cd];zc.b[Cd]=null}zc.b=Wd}zc.b[zc.c++]=k}},sphere:function(a,b,e){var c=this.p,d=0==c.c?new u:c.b[--c.c],c=this.p,c=0==c.eb?new P:c.bb[--c.eb];d.x=a.v;d.y=a.A;d.z=a.B;c.e00=a.o;c.e01=a.f;c.e02=a.h;c.e10=a.i;c.e11=a.m;c.e12=a.j;c.e20=a.l;c.e21=a.g;c.e22=a.s;a=this.Fh;for(var f=this.xk,h=0;5>h;)for(var l=h++,g=0,k=this.Fh[l].length;g<k;){var m=g++,n=f[l][m],q=this.vk[l][m];n.x=q.x;n.y=q.y;n.z=q.z;var q=n.x*c.e10+n.y*c.e11+n.z*c.e12,p=n.x*c.e20+n.y*c.e21+n.z*c.e22;n.x=n.x*c.e00+n.y*c.e01+n.z*c.e02;n.y=q;n.z=p;n=a[l][m];m=f[l][m];n.x=m.x;n.y=m.y;n.z=m.z;m=n;n=m.y*b;q=m.z*b;m.x=m.x*b;m.y=n;m.z=q;n=m.y+d.y;q=m.z+d.z;m.x=m.x+d.x;m.y=n;m.z=q}for(b=0;4>b;)for(h=b++,l=0;8>l;){var r=l++,t;h?3==h?this.wireframe?(g=a[4][0],k=a[h][(r+1)%8],m=a[h][r],this.line(g,k,e),this.line(k,m,e)):(g=a[4][0],k=a[h][(r+1)%8],m=a[h][r],q=f[4][0],p=f[h][(r+1)%8],t=f[h][r],this.triangle(g,k,m,q,p,t,e)):this.wireframe?(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],this.line(g,k,e),this.line(g,m,e)):(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],n=a[h+1][(r+1)%8],q=f[h][r],p=f[h][(r+1)%8],t=f[h+1][r],r=f[h+1][(r+1)%8],this.rect(g,m,n,k,q,t,r,p,e)):this.wireframe?(g=a[0][0],k=a[1][r],this.line(g,k,e)):(g=a[0][0],k=a[1][r],m=a[1][(r+1)%8],q=f[0][0],p=f[1][r],t=f[1][(r+1)%8],this.triangle(g,k,m,q,p,t,e))}e=this.p;if(null!=d){d.Z();if(e.c==e.b.length){a=Array(e.c<<1);f=0;for(b=e.c;f<b;)h=f++,a[h]=e.b[h],e.b[h]=null;e.b=a}e.b[e.c++]=d}d=this.p;if(null!=c){c.e00=1;c.e01=0;c.e02=0;c.e10=0;c.e11=1;c.e12=0;c.e20=0;c.e21=0;c.e22=1;if(d.eb==d.bb.length){e=Array(d.eb<<1);a=0;for(f=d.eb;a<f;)b=a++,e[b]=d.bb[b],d.bb[b]=null;d.bb=e}d.bb[d.eb++]=c}},box:function(a,b,e){var c=this.p,d=0==c.c?new u:c.b[--c.c],f=this.p,h=0==f.c?new u:f.b[--f.c],l=this.p,g=0==l.c?new u:l.b[--l.c],k=this.p,m=0==k.c?new u:k.b[--k.c],n=this.p,q=0==n.eb?new P:n.bb[--n.eb];m.x=a.v;m.y=a.A;m.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;d.za(q.e00,q.e10,q.e20);h.za(q.e01,q.e11,q.e21);g.za(q.e02,q.e12,q.e22);var p=b.x,r=b.y,t=b.z,R=this.p,w=0==R.c?new u:R.b[--R.c];w.x=m.x;w.y=m.y;w.z=m.z;var B=-p,v=w.y+d.y*B,C=w.z+d.z*B;w.x+=d.x*B;w.y=v;w.z=C;var U=-r,A=w.y+h.y*U,E=w.z+h.z*U;w.x+=h.x*U;w.y=A;w.z=E;var z=-t,D=w.y+g.y*z,I=w.z+g.z*z;w.x+=g.x*z;w.y=D;w.z=I;var J=this.p,F=0==J.c?new u:J.b[--J.c];F.x=m.x;F.y=m.y;F.z=m.z;var L=-p,V=F.y+d.y*L,da=F.z+d.z*L;F.x+=d.x*L;F.y=V;F.z=da;var xa=-r,Ja=F.y+h.y*xa,xb=F.z+h.z*xa;F.x+=h.x*xa;F.y=Ja;F.z=xb;var Ka=F.y+g.y*t,Da=F.z+g.z*t;F.x+=g.x*t;F.y=Ka;F.z=Da;var ma=this.p,Q=0==ma.c?new u:ma.b[--ma.c];Q.x=m.x;Q.y=m.y;Q.z=m.z;var Ga=-p,Ha=Q.y+d.y*Ga,Ea=Q.z+d.z*Ga;Q.x+=d.x*Ga;Q.y=Ha;Q.z=Ea;var Ua=Q.y+h.y*r,ua=Q.z+h.z*r;Q.x+=h.x*r;Q.y=Ua;Q.z=ua;var oa=-t,Wa=Q.y+g.y*oa,G=Q.z+g.z*oa;Q.x+=g.x*oa;Q.y=Wa;Q.z=G;var Qa=this.p,X=0==Qa.c?new u:Qa.b[--Qa.c];X.x=m.x;X.y=m.y;X.z=m.z;var M=-p,N=X.y+d.y*M,ca=X.z+d.z*M;X.x+=d.x*M;X.y=N;X.z=ca;var Y=X.y+h.y*r,S=X.z+h.z*r;X.x+=h.x*r;X.y=Y;X.z=S;var aa=X.y+g.y*t,y=X.z+g.z*t;X.x+=g.x*t;X.y=aa;X.z=y;var fa=this.p,T=0==fa.c?new u:fa.b[--fa.c];T.x=m.x;T.y=m.y;T.z=m.z;var pa=T.y+d.y*p,sa=T.z+d.z*p;T.x+=d.x*p;T.y=pa;T.z=sa;var va=-r,ra=T.y+h.y*va,ka=T.z+h.z*va;T.x+=h.x*va;T.y=ra;T.z=ka;var Z=-t,na=T.y+g.y*Z,Aa=T.z+g.z*Z;T.x+=g.x*Z;T.y=na;T.z=Aa;var ya=this.p,K=0==ya.c?new u:ya.b[--ya.c];K.x=m.x;K.y=m.y;K.z=m.z;var Ba=K.y+d.y*p,ha=K.z+d.z*p;K.x+=d.x*p;K.y=Ba;K.z=ha;var ba=-r,Va=K.y+h.y*ba,ga=K.z+h.z*ba;K.x+=h.x*ba;K.y=Va;K.z=ga;var O=K.y+g.y*t,za=K.z+g.z*t;K.x+=g.x*t;K.y=O;K.z=za;var ob=this.p,ja=0==ob.c?new u:ob.b[--ob.c];ja.x=m.x;ja.y=m.y;ja.z=m.z;var Na=ja.y+d.y*p,Za=ja.z+d.z*p;ja.x+=d.x*p;ja.y=Na;ja.z=Za;var fb=ja.y+h.y*r,Db=ja.z+h.z*r;ja.x+=h.x*r;ja.y=fb;ja.z=Db;var ta=-t,wa=ja.y+g.y*ta,Fa=ja.z+g.z*ta;ja.x+=g.x*ta;ja.y=wa;ja.z=Fa;var eb=this.p,Ia=0==eb.c?new u:eb.b[--eb.c];Ia.x=m.x;Ia.y=m.y;Ia.z=m.z;var pb=Ia.y+d.y*p,Oa=Ia.z+d.z*p;Ia.x+=d.x*p;Ia.y=pb;Ia.z=Oa;var la=Ia.y+h.y*r,Ca=Ia.z+h.z*r;Ia.x+=h.x*r;Ia.y=la;Ia.z=Ca;var Xa=Ia.y+g.y*t,Ra=Ia.z+g.z*t;Ia.x+=g.x*t;Ia.y=Xa;Ia.z=Ra;if(this.wireframe)this.line(w,F,e),this.line(Q,X,e),this.line(T,K,e),this.line(ja,Ia,e),this.line(w,Q,e),this.line(F,X,e),this.line(T,ja,e),this.line(K,Ia,e),this.line(w,T,e),this.line(F,K,e),this.line(Q,ja,e),this.line(X,Ia,e);else{var hb=this.p,Jb=0==hb.c?new u:hb.b[--hb.c];Jb.x=d.x;Jb.y=d.y;Jb.z=d.z;var cb=-Jb.y,ub=-Jb.z;Jb.x=-Jb.x;Jb.y=cb;Jb.z=ub;var jb=this.p,mb=0==jb.c?new u:jb.b[--jb.c];mb.x=h.x;mb.y=h.y;mb.z=h.z;var Yb=-mb.y,pc=-mb.z;mb.x=-mb.x;mb.y=Yb;mb.z=pc;var Ya=this.p,La=0==Ya.c?new u:Ya.b[--Ya.c];La.x=g.x;La.y=g.y;La.z=g.z;var vb=-La.y,H=-La.z;La.x=-La.x;La.y=vb;La.z=H;this.rect(w,F,X,Q,Jb,Jb,Jb,Jb,e);this.rect(T,ja,Ia,K,d,d,d,d,e);this.rect(w,T,K,F,mb,mb,mb,mb,e);this.rect(Q,X,Ia,ja,h,h,h,h,e);this.rect(w,Q,ja,T,La,La,La,La,e);this.rect(F,K,Ia,X,g,g,g,g,e);var db=this.p;if(null!=Jb){Jb.Z();if(db.c==db.b.length){for(var kb=Array(db.c<<1),zb=0,lb=db.c;zb<lb;){var tb=zb++;kb[tb]=db.b[tb];db.b[tb]=null}db.b=kb}db.b[db.c++]=Jb}var x=this.p;if(null!=mb){mb.Z();if(x.c==x.b.length){for(var W=Array(x.c<<1),ea=0,Sa=x.c;ea<Sa;){var ab=ea++;W[ab]=x.b[ab];x.b[ab]=null}x.b=W}x.b[x.c++]=mb}var Pa=this.p;if(null!=La){La.Z();if(Pa.c==Pa.b.length){for(var qb=Array(Pa.c<<1),nb=0,Ab=Pa.c;nb<Ab;){var Bb=nb++;qb[Bb]=Pa.b[Bb];Pa.b[Bb]=null}Pa.b=qb}Pa.b[Pa.c++]=La}}var ia=this.p;if(null!=w){w.Z();if(ia.c==ia.b.length){for(var Ta=Array(ia.c<<1),bb=0,ib=ia.c;bb<ib;){var Cb=bb++;Ta[Cb]=ia.b[Cb];ia.b[Cb]=null}ia.b=Ta}ia.b[ia.c++]=w}var Ma=this.p;if(null!=F){F.Z();if(Ma.c==Ma.b.length){for(var Eb=Array(Ma.c<<1),$a=0,qa=Ma.c;$a<qa;){var Ac=$a++;Eb[Ac]=Ma.b[Ac];Ma.b[Ac]=null}Ma.b=Eb}Ma.b[Ma.c++]=F}var Kb=this.p;if(null!=Q){Q.Z();if(Kb.c==Kb.b.length){for(var Qb=Array(Kb.c<<1),gb=0,wb=Kb.c;gb<wb;){var sb=gb++;Qb[sb]=Kb.b[sb];Kb.b[sb]=null}Kb.b=Qb}Kb.b[Kb.c++]=Q}var Zb=this.p;if(null!=X){X.Z();if(Zb.c==Zb.b.length){for(var yb=Array(Zb.c<<1),Hb=0,Xb=Zb.c;Hb<Xb;){var Mb=Hb++;yb[Mb]=Zb.b[Mb];Zb.b[Mb]=null}Zb.b=yb}Zb.b[Zb.c++]=X}var Tb=this.p;if(null!=T){T.Z();if(Tb.c==Tb.b.length){for(var fc=Array(Tb.c<<1),ec=0,Nb=Tb.c;ec<Nb;){var bc=ec++;fc[bc]=Tb.b[bc];Tb.b[bc]=null}Tb.b=fc}Tb.b[Tb.c++]=T}var Fb=this.p;if(null!=K){K.Z();if(Fb.c==Fb.b.length){for(var mc=Array(Fb.c<<1),ac=0,Ob=Fb.c;ac<Ob;){var cc=ac++;mc[cc]=Fb.b[cc];Fb.b[cc]=null}Fb.b=mc}Fb.b[Fb.c++]=K}var Ub=this.p;if(null!=ja){ja.Z();if(Ub.c==Ub.b.length){for(var Lb=Array(Ub.c<<1),Rb=0,rb=Ub.c;Rb<rb;){var Ib=Rb++;Lb[Ib]=Ub.b[Ib];Ub.b[Ib]=null}Ub.b=Lb}Ub.b[Ub.c++]=ja}var qc=this.p;if(null!=Ia){Ia.Z();if(qc.c==qc.b.length){for(var $b=Array(qc.c<<1),$c=0,hc=qc.c;$c<hc;){var Ic=$c++;$b[Ic]=qc.b[Ic];qc.b[Ic]=null}qc.b=$b}qc.b[qc.c++]=Ia}var oc=this.p;if(null!=m){m.Z();if(oc.c==oc.b.length){for(var Wb=Array(oc.c<<1),ad=0,rc=oc.c;ad<rc;){var Vb=ad++;Wb[Vb]=oc.b[Vb];oc.b[Vb]=null}oc.b=Wb}oc.b[oc.c++]=m}var Pb=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(Pb.eb==Pb.bb.length){for(var jc=Array(Pb.eb<<1),kc=0,Ec=Pb.eb;kc<Ec;){var ic=kc++;jc[ic]=Pb.bb[ic];Pb.bb[ic]=null}Pb.bb=jc}Pb.bb[Pb.eb++]=q}var wc=this.p;if(null!=d){d.Z();if(wc.c==wc.b.length){for(var nc=Array(wc.c<<1),gc=0,sc=wc.c;gc<sc;){var lc=gc++;nc[lc]=wc.b[lc];wc.b[lc]=null}wc.b=nc}wc.b[wc.c++]=d}var Sb=this.p;if(null!=h){h.Z();if(Sb.c==Sb.b.length){for(var dc=Array(Sb.c<<1),uc=0,Mc=Sb.c;uc<Mc;){var Nc=uc++;dc[Nc]=Sb.b[Nc];Sb.b[Nc]=null}Sb.b=dc}Sb.b[Sb.c++]=h}var Gc=this.p;if(null!=g){g.Z();if(Gc.c==Gc.b.length){for(var Uc=Array(Gc.c<<1),Xc=0,Yc=Gc.c;Xc<Yc;){var Vc=Xc++;Uc[Vc]=Gc.b[Vc];Gc.b[Vc]=null}Gc.b=Uc}Gc.b[Gc.c++]=g}},rect:function(a,b,e,c,d,f,h,l,g){this.triangle(a,b,e,d,f,h,g);this.triangle(a,e,c,d,h,l,g)},point:function(){},triangle:function(){},line:function(){}};Ib.prototype={xh:function(){},Gh:function(){},Ch:function(){},Li:function(){},Pg:function(){},Bh:function(){},Ah:function(){},postSolve:function(){}};zd.prototype={$d:function(a,b){b.Qe=this.C;b.Re=this.D;var e,c,d,f,h,l,g,k,m;e=this.Ja.wg;c=this.Ja.xg;d=this.Ja.yg;f=this.Ja.lj;h=this.Ja.mj;l=this.Ja.nj;g=this.Ja.Vi;k=this.Ja.Wi;m=this.Ja.Xi;for(var n=Math.sqrt(this.Zb.Xj*this.$b.Xj),q=Math.sqrt(this.Zb.hk*this.$b.hk),p=this.Ja.be,r=b.Ka=0;r<p;){var t=r++,t=this.Ja.wc[t];if(0>t.Gc)t.lf=!0,t=t.ae,t.bd=0,t.zc=0,t.yc=0,t.ub=0,t.df=0,t.ef=0,t.ff=0;else{t.lf=!1;var R=b.rows[b.Ka++];R.friction=n;R.Ma=0;var w=R.Ng;w.va=e;w.wa=c;w.xa=d;w.Ba=e;w.Ca=c;w.Da=d;w.aa=t.Eb*d-t.Fb*c;w.ba=t.Fb*e-t.Db*d;w.ca=t.Db*c-t.Eb*e;w.ea=t.fc*d-t.gc*c;w.fa=t.gc*e-t.ec*d;w.ga=t.ec*c-t.fc*e;w=R.Lj;w.va=f;w.wa=h;w.xa=l;w.Ba=f;w.Ca=h;w.Da=l;w.aa=t.Eb*l-t.Fb*h;w.ba=t.Fb*f-t.Db*l;w.ca=t.Db*h-t.Eb*f;w.ea=t.fc*l-t.gc*h;w.fa=t.gc*f-t.ec*l;w.ga=t.ec*h-t.fc*f;w=R.Kj;w.va=g;w.wa=k;w.xa=m;w.Ba=g;w.Ca=k;w.Da=m;w.aa=t.Eb*m-t.Fb*k;w.ba=t.Fb*g-t.Db*m;w.ca=t.Db*k-t.Eb*g;w.ea=t.fc*m-t.gc*k;w.fa=t.gc*g-t.ec*m;w.ga=t.ec*k-t.fc*g;w=R.Ng;w=w.va*this.C.gb+w.wa*this.C.hb+w.xa*this.C.ib+(w.aa*this.C.kb+w.ba*this.C.lb+w.ca*this.C.mb)-(w.Ba*this.D.gb+w.Ca*this.D.hb+w.Da*this.D.ib+(w.ea*this.D.kb+w.fa*this.D.lb+w.ga*this.D.mb));R.Fa=w<-F.contactEnableBounceThreshold&&!t.Pe?-w*q:0;this.Hc==Xb.BAUMGARTE&&t.Gc>F.linearSlop&&(w=(t.Gc-F.linearSlop)*F.velocityBaumgarte*a.invDt,R.Fa<w&&(R.Fa=w));t.Pe||(w=t.ae,w.bd=0,w.zc=0,w.yc=0,w.ub=0,w.df=0,w.ef=0,w.ff=0);R.ta=t.ae}}},gd:function(a){a.Qe=this.C;a.Re=this.D;var b,e,c;b=this.Ja.wg;e=this.Ja.xg;c=this.Ja.yg;for(var d=this.Ja.be,f=a.Ka=0;f<d;){var h=f++,h=this.Ja.wc[h];if(!h.lf){var l=a.rows[a.Ka++],g=l.Ng;g.va=b;g.wa=e;g.xa=c;g.Ba=b;g.Ca=e;g.Da=c;g.aa=h.Eb*c-h.Fb*e;g.ba=h.Fb*b-h.Db*c;g.ca=h.Db*e-h.Eb*b;g.ea=h.fc*c-h.gc*e;g.fa=h.gc*b-h.ec*c;g.ga=h.ec*e-h.fc*b;l.Fa=h.Gc-F.linearSlop;0>l.Fa&&(l.Fa=0);l.ta=h.ae}}},al:function(){this.Ja.Yl(this.pj,this.qj)},cb:function(){return this.Zb},Hb:function(){return this.$b},ua:function(){return this.Ja},sk:function(){for(var a=0,b=this.Ja.be;a<b;){var e=a++;if(0<=this.Ja.wc[e].Gc)return!0}return!1}};wl.prototype={de:function(a){this.bd=a.bd;this.zc=a.zc;this.yc=a.yc;this.df=a.df;this.ef=a.ef;this.ff=a.ff}};kc.prototype={Xe:function(){for(var a=0,b=this.be;a<b;){var e=a++,e=this.wc[e];e.mf=0;e.nf=0;e.pf=0;e.qf=0;e.rf=0;e.sf=0;e.Db=0;e.Eb=0;e.Fb=0;e.ec=0;e.fc=0;e.gc=0;e.Jd=0;e.Kd=0;e.Ld=0;e.Md=0;e.Nd=0;e.Od=0;e.Gc=0;var c=e.ae;c.bd=0;c.zc=0;c.yc=0;c.ub=0;c.df=0;c.ef=0;c.ff=0;e.Pe=!1;e.lf=!1;e.Cc=-1}this.be=0},Um:function(a){this.wg=a.x;this.xg=a.y;this.yg=a.z;var b=a.x,e=a.y;a=a.z;var c=b*b,d=e*e,f=a*a,h;c<d?c<f?(f=1/Math.sqrt(d+f),c=0,d=-a*f,f*=e,h=e*f-a*d,a=-b*f,b*=d):(d=1/Math.sqrt(c+d),c=-e*d,d*=b,f=0,h=-a*d,a*=c,b=b*d-e*c):d<f?(f=1/Math.sqrt(c+f),c=a*f,d=0,f*=-b,h=e*f,a=a*c-b*f,b=-e*c):(d=1/Math.sqrt(c+d),c=-e*d,d*=b,f=0,h=-a*d,a*=c,b=b*d-e*c);this.lj=c;this.mj=d;this.nj=f;this.Vi=h;this.Wi=a;this.Xi=b},Yl:function(a,b){for(var e=0,c=this.be;e<c;){var d=e++,d=this.wc[d],f,h,l;f=a.o*d.mf+a.f*d.nf+a.h*d.pf;h=a.i*d.mf+a.m*d.nf+a.j*d.pf;l=a.l*d.mf+a.g*d.nf+a.s*d.pf;d.Db=f;d.Eb=h;d.Fb=l;f=b.o*d.qf+b.f*d.rf+b.h*d.sf;h=b.i*d.qf+b.m*d.rf+b.j*d.sf;l=b.l*d.qf+b.g*d.rf+b.s*d.sf;d.ec=f;d.fc=h;d.gc=l;d.Jd=d.Db+a.v;d.Kd=d.Eb+a.A;d.Ld=d.Fb+a.B;d.Md=d.ec+b.v;d.Nd=d.fc+b.A;d.Od=d.gc+b.B;d.Gc=-((d.Jd-d.Md)*this.wg+(d.Kd-d.Nd)*this.xg+(d.Ld-d.Od)*this.yg)}},Hb:function(){var a=new u;a.x=this.wg;a.y=this.xg;a.z=this.yg;return a},Mb:function(a){a.x=this.wg;a.y=this.xg;a.z=this.yg},uc:function(){var a=new u;a.x=this.lj;a.y=this.mj;a.z=this.nj;return a},vc:function(a){a.x=this.lj;a.y=this.mj;a.z=this.nj},ua:function(){var a=new u;a.x=this.Vi;a.y=this.Wi;a.z=this.Xi;return a},cb:function(a){a.x=this.Vi;a.y=this.Wi;a.z=this.Xi},qc:function(){return this.wc},pc:function(){return this.be}};Wb.prototype={Mb:function(){var a=new u;a.x=this.Jd;a.y=this.Kd;a.z=this.Ld;return a},pc:function(a){a.x=this.Jd;a.y=this.Kd;a.z=this.Ld},qc:function(){var a=new u;a.x=this.Md;a.y=this.Nd;a.z=this.Od;return a},uc:function(a){a.x=this.Md;a.y=this.Nd;a.z=this.Od},cb:function(){return this.Gc},Ac:function(){return this.Pe},Hb:function(){return this.ae.bd},vc:function(){return this.ae.zc},ua:function(){return this.ae.yc},Ec:function(){return!this.lf}};el.prototype={Un:function(){for(var a=this.Ja.be;0<=--a;){var b=this.Ja.wc[a],e,c;e=b.Jd-b.Md;c=b.Kd-b.Nd;var b=b.Ld-b.Od,d=this.Ja.wg*e+this.Ja.xg*c+this.Ja.yg*b;d>F.contactPersistenceThreshold?this.Fm(a):(e+=this.Ja.wg*-d,c+=this.Ja.xg*-d,b+=this.Ja.yg*-d,e*e+c*c+b*b>F.contactPersistenceThreshold*F.contactPersistenceThreshold&&this.Fm(a))}},Fm:function(a){var b=--this.Ja.be;if(a!=b){var e=this.Ja.wc[a];this.Ja.wc[a]=this.Ja.wc[b];this.Ja.wc[b]=e}a=this.Ja.wc[b];a.mf=0;a.nf=0;a.pf=0;a.qf=0;a.rf=0;a.sf=0;a.Db=0;a.Eb=0;a.Fb=0;a.ec=0;a.fc=0;a.gc=0;a.Jd=0;a.Kd=0;a.Ld=0;a.Md=0;a.Nd=0;a.Od=0;a.Gc=0;b=a.ae;b.bd=0;b.zc=0;b.yc=0;b.ub=0;b.df=0;b.ef=0;b.ff=0;a.Pe=!1;a.lf=!1;a.Cc=-1},gn:function(a,b,e){var c=this.Ja.be;if(c==F.maxManifoldPoints){var c=this.Ja.wc[this.mn(a,b,e)],d=a.position1;c.Jd=d.x;c.Kd=d.y;c.Ld=d.z;d=a.position2;c.Md=d.x;c.Nd=d.y;c.Od=d.z;c.Db=c.Jd-b.v;c.Eb=c.Kd-b.A;c.Fb=c.Ld-b.B;c.ec=c.Md-e.v;c.fc=c.Nd-e.A;c.gc=c.Od-e.B;var f,d=b.o*c.Db+b.i*c.Eb+b.l*c.Fb;f=b.f*c.Db+b.m*c.Eb+b.g*c.Fb;b=b.h*c.Db+b.j*c.Eb+b.s*c.Fb;c.mf=d;c.nf=f;c.pf=b;b=e.o*c.ec+e.i*c.fc+e.l*c.gc;d=e.f*c.ec+e.m*c.fc+e.g*c.gc;e=e.h*c.ec+e.j*c.fc+e.s*c.gc;c.qf=b;c.rf=d;c.sf=e;c.Gc=a.depth;e=c.ae;e.bd=0;e.zc=0;e.yc=0;e.ub=0;e.df=0;e.ef=0;e.ff=0;c.Cc=a.id;c.Pe=!1;c.lf=!1}else c=this.Ja.wc[c],d=a.position1,c.Jd=d.x,c.Kd=d.y,c.Ld=d.z,d=a.position2,c.Md=d.x,c.Nd=d.y,c.Od=d.z,c.Db=c.Jd-b.v,c.Eb=c.Kd-b.A,c.Fb=c.Ld-b.B,c.ec=c.Md-e.v,c.fc=c.Nd-e.A,c.gc=c.Od-e.B,d=b.o*c.Db+b.i*c.Eb+b.l*c.Fb,f=b.f*c.Db+b.m*c.Eb+b.g*c.Fb,b=b.h*c.Db+b.j*c.Eb+b.s*c.Fb,c.mf=d,c.nf=f,c.pf=b,b=e.o*c.ec+e.i*c.fc+e.l*c.gc,d=e.f*c.ec+e.m*c.fc+e.g*c.gc,e=e.h*c.ec+e.j*c.fc+e.s*c.gc,c.qf=b,c.rf=d,c.sf=e,c.Gc=a.depth,e=c.ae,e.bd=0,e.zc=0,e.yc=0,e.ub=0,e.df=0,e.ef=0,e.ff=0,c.Cc=a.id,c.Pe=!1,c.lf=!1,this.Ja.be++},mn:function(a,b){var e=this.Ja.wc[0],c=this.Ja.wc[1],d=this.Ja.wc[2],f=this.Ja.wc[3],h=e.Gc,l=0;c.Gc>h&&(h=c.Gc,l=1);d.Gc>h&&(h=d.Gc,l=2);f.Gc>h&&(h=f.Gc,l=3);var g,k,m,n=a.position1;g=n.x;k=n.y;m=n.z;g-=b.v;k-=b.A;m-=b.B;var q=c.Db,p=c.Eb,r=c.Fb,t=d.Db,R=d.Eb,w=d.Fb,B=f.Db,v=f.Eb,C=f.Fb,u,A,E,z,F,I,J,D,L,P,da,V,xa,xb,Ka,Da,ma,Q;u=t-q;A=R-p;E=w-r;z=g-B;F=k-v;I=m-C;J=B-q;D=v-p;L=C-r;P=g-t;da=k-R;V=m-w;xa=g-q;xb=k-p;Ka=m-r;Da=B-t;ma=v-R;Q=C-w;var Ga,Ha,Ea,Ua,ua,oa,Wa,G,Qa;Ga=A*I-E*F;Ha=E*z-u*I;Ea=u*F-A*z;Ua=D*V-L*da;ua=L*P-J*V;oa=J*da-D*P;Wa=xb*Q-Ka*ma;G=Ka*Da-xa*Q;Qa=xa*ma-xb*Da;var X=Ga*Ga+Ha*Ha+Ea*Ea,M=Ua*Ua+ua*ua+oa*oa,N=Wa*Wa+G*G+Qa*Qa,ca=X>M?X>N?X:N:M>N?M:N,Y=e.Db,S=e.Eb,aa=e.Fb,y=d.Db,fa=d.Eb,T=d.Fb,pa=f.Db,sa=f.Eb,va=f.Fb,ra,ka,Z,na,Aa,ya,K,Ba,ha,ba,Va,ga,O,za,ob,ja,Ja,Na;ra=y-Y;ka=fa-S;Z=T-aa;na=g-pa;Aa=k-sa;ya=m-va;K=pa-Y;Ba=sa-S;ha=va-aa;ba=g-y;Va=k-fa;ga=m-T;O=g-Y;za=k-S;ob=m-aa;ja=pa-y;Ja=sa-fa;Na=va-T;var fb,Db,ta,wa,Fa,eb,Ia,pb,Oa;fb=ka*ya-Z*Aa;Db=Z*na-ra*ya;ta=ra*Aa-ka*na;wa=Ba*ga-ha*Va;Fa=ha*ba-K*ga;eb=K*Va-Ba*ba;Ia=za*Na-ob*Ja;pb=ob*ja-O*Na;Oa=O*Ja-za*ja;var la=fb*fb+Db*Db+ta*ta,Ca=wa*wa+Fa*Fa+eb*eb,Xa=Ia*Ia+pb*pb+Oa*Oa,Ra=la>Ca?la>Xa?la:Xa:Ca>Xa?Ca:Xa,hb=e.Db,Jb=e.Eb,cb=e.Fb,ub=c.Db,jb=c.Eb,mb=c.Fb,Yb=f.Db,pc=f.Eb,Ya=f.Fb,La,vb,H,db,kb,zb,lb,tb,x,W,ea,Za,ab,Pa,qb,nb,Ab,Bb;La=ub-hb;vb=jb-Jb;H=mb-cb;db=g-Yb;kb=k-pc;zb=m-Ya;lb=Yb-hb;tb=pc-Jb;x=Ya-cb;W=g-ub;ea=k-jb;Za=m-mb;ab=g-hb;Pa=k-Jb;qb=m-cb;nb=Yb-ub;Ab=pc-jb;Bb=Ya-mb;var ia,Ta,bb,ib,Cb,Ma,Eb,Sa,qa;ia=vb*zb-H*kb;Ta=H*db-La*zb;bb=La*kb-vb*db;ib=tb*Za-x*ea;Cb=x*W-lb*Za;Ma=lb*ea-tb*W;Eb=Pa*Bb-qb*Ab;Sa=qb*nb-ab*Bb;qa=ab*Ab-Pa*nb;var $a=ia*ia+Ta*Ta+bb*bb,Kb=ib*ib+Cb*Cb+Ma*Ma,Qb=Eb*Eb+Sa*Sa+qa*qa,gb=$a>Kb?$a>Qb?$a:Qb:Kb>Qb?Kb:Qb,sb=e.Db,wb=e.Eb,Zb=e.Fb,yb=c.Db,Hb=c.Eb,Pb=c.Fb,Mb=d.Db,Tb=d.Eb,fc=d.Fb,ec,Nb,bc,Fb,mc,ac,Ob,cc,Ub,Lb,Rb,rb,Xb,qc,Ib,$b,hc,Ic;ec=yb-sb;Nb=Hb-wb;bc=Pb-Zb;Fb=g-Mb;mc=k-Tb;ac=m-fc;Ob=Mb-sb;cc=Tb-wb;Ub=fc-Zb;Lb=g-yb;Rb=k-Hb;rb=m-Pb;Xb=g-sb;qc=k-wb;Ib=m-Zb;$b=Mb-yb;hc=Tb-Hb;Ic=fc-Pb;var oc,Sb,Vb,rc,Wb,ic,jc,kc,nc;oc=Nb*ac-bc*mc;Sb=bc*Fb-ec*ac;Vb=ec*mc-Nb*Fb;rc=cc*rb-Ub*Rb;Wb=Ub*Lb-Ob*rb;ic=Ob*Rb-cc*Lb;jc=qc*Ic-Ib*hc;kc=Ib*$b-Xb*Ic;nc=Xb*hc-qc*$b;var gc=oc*oc+Sb*Sb+Vb*Vb,wc=rc*rc+Wb*Wb+ic*ic,lc=jc*jc+kc*kc+nc*nc,sc=gc>wc?gc>lc?gc:lc:wc>lc?wc:lc,dc=ca,uc=0;if(Ra>dc&&1!=l||!l)dc=Ra,uc=1;gb>dc&&2!=l&&(dc=gb,uc=2);sc>dc&&3!=l&&(dc=sc,uc=3);return uc},pn:function(a,b,e){for(var c=F.contactPersistenceThreshold*F.contactPersistenceThreshold,d=-1,f=0,h=this.Ja.be;f<h;){var l=f++,g=this.Ja.wc[l],k,m,n,q,p,r;p=a.position1;k=p.x;m=p.y;n=p.z;r=a.position2;q=r.x;p=r.y;r=r.z;k-=b.v;m-=b.A;n-=b.B;q-=e.v;p-=e.A;r-=e.B;k=g.Db-k;m=g.Eb-m;n=g.Fb-n;q=g.ec-q;p=g.fc-p;g=g.gc-r;r=k*k+m*m+n*n;g=q*q+p*p+g*g;g=r<g?r:g;g<c&&(c=g,d=l)}return d},co:function(a,b,e){this.Gl=this.Ja.be;for(var c=0,d=this.Gl;c<d;){var f=c++,h=this.Hl[f],f=this.Ja.wc[f];h.mf=f.mf;h.nf=f.nf;h.pf=f.pf;h.qf=f.qf;h.rf=f.rf;h.sf=f.sf;h.Db=f.Db;h.Eb=f.Eb;h.Fb=f.Fb;h.ec=f.ec;h.fc=f.fc;h.gc=f.gc;h.Jd=f.Jd;h.Kd=f.Kd;h.Ld=f.Ld;h.Md=f.Md;h.Nd=f.Nd;h.Od=f.Od;h.Gc=f.Gc;h.ae.de(f.ae);h.Cc=f.Cc;h.Pe=f.Pe;h.lf=!1}c=a.numPoints;this.Ja.be=c;for(d=0;d<c;){var f=d++,h=this.Ja.wc[f],f=a.points[f],l=f.position1;h.Jd=l.x;h.Kd=l.y;h.Ld=l.z;l=f.position2;h.Md=l.x;h.Nd=l.y;h.Od=l.z;h.Db=h.Jd-b.v;h.Eb=h.Kd-b.A;h.Fb=h.Ld-b.B;h.ec=h.Md-e.v;h.fc=h.Nd-e.A;h.gc=h.Od-e.B;var g,k,l=b.o*h.Db+b.i*h.Eb+b.l*h.Fb;g=b.f*h.Db+b.m*h.Eb+b.g*h.Fb;k=b.h*h.Db+b.j*h.Eb+b.s*h.Fb;h.mf=l;h.nf=g;h.pf=k;l=e.o*h.ec+e.i*h.fc+e.l*h.gc;g=e.f*h.ec+e.m*h.fc+e.g*h.gc;k=e.h*h.ec+e.j*h.fc+e.s*h.gc;h.qf=l;h.rf=g;h.sf=k;h.Gc=f.depth;l=h.ae;l.bd=0;l.zc=0;l.yc=0;l.ub=0;l.df=0;l.ef=0;l.ff=0;h.Cc=f.id;h.Pe=!1;h.lf=!1;f=0;for(l=this.Gl;f<l;)if(g=f++,g=this.Hl[g],h.Cc==g.Cc){h.ae.de(g.ae);h.Pe=!0;break}}},Mn:function(a,b,e){this.Ja.Yl(b,e);for(var c=0,d=this.Ja.be;c<d;){var f=c++;this.Ja.wc[f].Pe=!0}a=a.points[0];c=this.pn(a,b,e);-1==c?this.gn(a,b,e):(c=this.Ja.wc[c],d=a.position1,c.Jd=d.x,c.Kd=d.y,c.Ld=d.z,d=a.position2,c.Md=d.x,c.Nd=d.y,c.Od=d.z,c.Db=c.Jd-b.v,c.Eb=c.Kd-b.A,c.Fb=c.Ld-b.B,c.ec=c.Md-e.v,c.fc=c.Nd-e.A,c.gc=c.Od-e.B,d=b.o*c.Db+b.i*c.Eb+b.l*c.Fb,f=b.f*c.Db+b.m*c.Eb+b.g*c.Fb,b=b.h*c.Db+b.j*c.Eb+b.s*c.Fb,c.mf=d,c.nf=f,c.pf=b,b=e.o*c.ec+e.i*c.fc+e.l*c.gc,d=e.f*c.ec+e.m*c.fc+e.g*c.gc,e=e.h*c.ec+e.j*c.fc+e.s*c.gc,c.qf=b,c.rf=d,c.sf=e,c.Gc=a.depth);this.Un()}};$d.prototype={Hm:function(){this.xc=0;if(0!=this.va||0!=this.wa||0!=this.xa||0!=this.Ba||0!=this.Ca||0!=this.Da)this.xc|=1;if(0!=this.aa||0!=this.ba||0!=this.ca||0!=this.ea||0!=this.fa||0!=this.ga)this.xc|=2}};V.prototype={hd:function(){var a=this.C.a,b=this.D.a,e,c,d;e=a.o*this.dj+a.f*this.ej+a.h*this.fj;c=a.i*this.dj+a.m*this.ej+a.j*this.fj;d=a.l*this.dj+a.g*this.ej+a.s*this.fj;this.Sb=e;this.Tb=c;this.Ub=d;e=b.o*this.gj+b.f*this.hj+b.h*this.ij;c=b.i*this.gj+b.m*this.hj+b.j*this.ij;d=b.l*this.gj+b.g*this.hj+b.s*this.ij;this.Vb=e;this.Wb=c;this.Xb=d;this.Of=this.Sb+a.v;this.Pf=this.Tb+a.A;this.Qf=this.Ub+a.B;this.Rf=this.Vb+b.v;this.Sf=this.Wb+b.A;this.Tf=this.Xb+b.B;e=a.o*this.qa+a.f*this.ra+a.h*this.sa;c=a.i*this.qa+a.m*this.ra+a.j*this.sa;d=a.l*this.qa+a.g*this.ra+a.s*this.sa;this.vb=e;this.wb=c;this.xb=d;e=a.o*this.Ab+a.f*this.Bb+a.h*this.Cb;c=a.i*this.Ab+a.m*this.Bb+a.j*this.Cb;d=a.l*this.Ab+a.g*this.Bb+a.s*this.Cb;this.He=e;this.Ie=c;this.Je=d;e=a.o*this.lc+a.f*this.mc+a.h*this.nc;c=a.i*this.lc+a.m*this.mc+a.j*this.nc;a=a.l*this.lc+a.g*this.mc+a.s*this.nc;this.Hh=e;this.Ih=c;this.Jh=a;a=b.o*this.nb+b.f*this.ob+b.h*this.pb;e=b.i*this.nb+b.m*this.ob+b.j*this.pb;c=b.l*this.nb+b.g*this.ob+b.s*this.pb;this.bc=a;this.cc=e;this.dc=c;a=b.o*this.gh+b.f*this.hh+b.h*this.ih;e=b.i*this.gh+b.m*this.hh+b.j*this.ih;c=b.l*this.gh+b.g*this.hh+b.s*this.ih;this.ve=a;this.we=e;this.xe=c;a=b.o*this.Mc+b.f*this.Nc+b.h*this.Oc;e=b.i*this.Mc+b.m*this.Nc+b.j*this.Oc;b=b.l*this.Mc+b.g*this.Nc+b.s*this.Oc;this.ah=a;this.bh=e;this.dh=b},$d:function(a,b){b.Qe=this.C;b.Re=this.D;b.Ka=0},gd:function(a){a.Qe=this.C;a.Re=this.D;a.Ka=0},Rl:function(){var a=this.Pi*this.Pi+this.Qi*this.Qi+this.Ri*this.Ri,b=this.Si*this.Si+this.Ti*this.Ti+this.Ui*this.Ui;0<this.Yi&&a>this.Yi*this.Yi?this.oc.Kl(this):0<this.Zi&&b>this.Zi*this.Zi&&this.oc.Kl(this)},ue:function(){return this.C},Ue:function(){return this.D},Tg:function(){return this.Lb},cb:function(){var a=new u;a.x=this.Of;a.y=this.Pf;a.z=this.Qf;return a},Mb:function(){var a=new u;a.x=this.Rf;a.y=this.Sf;a.z=this.Tf;return a},Hb:function(a){a.x=this.Of;a.y=this.Pf;a.z=this.Qf},pc:function(a){a.x=this.Rf;a.y=this.Sf;a.z=this.Tf},pe:function(){var a=new u;a.x=this.dj;a.y=this.ej;a.z=this.fj;return a},re:function(){var a=new u;a.x=this.gj;a.y=this.hj;a.z=this.ij;return a},qe:function(a){a.x=this.dj;a.y=this.ej;a.z=this.fj},se:function(a){a.x=this.gj;a.y=this.hj;a.z=this.ij},Ec:function(){var a=new P,b,e,c,d,f,h,l,g,k;b=this.vb;e=this.He;c=this.Hh;d=this.wb;f=this.Ie;h=this.Ih;l=this.xb;g=this.Je;k=this.Jh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Kc:function(){var a=new P,b,e,c,d,f,h,l,g,k;b=this.bc;e=this.ve;c=this.ah;d=this.cc;f=this.we;h=this.bh;l=this.dc;g=this.xe;k=this.dh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Jc:function(a){var b,e,c,d,f,h,l,g,k;b=this.vb;e=this.He;c=this.Hh;d=this.wb;f=this.Ie;h=this.Ih;l=this.xb;g=this.Je;k=this.Jh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Lc:function(a){var b,e,c,d,f,h,l,g,k;b=this.bc;e=this.ve;c=this.ah;d=this.cc;f=this.we;h=this.bh;l=this.dc;g=this.xe;k=this.dh;a.e00=b;a.e01=e;a.e02=c;a.e10=d;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},ua:function(){return this.Ak},Ug:function(a){this.Ak=a},fd:function(){return this.Yi},Vg:function(a){this.Yi=a},Yd:function(){return this.Zi},Wg:function(a){this.Zi=a},te:function(){return this.Hc},Xg:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Hc=a},qc:function(){var a=new u;a.x=this.Pi;a.y=this.Qi;a.z=this.Ri;return a},uc:function(a){a.x=this.Pi;a.y=this.Qi;a.z=this.Ri},vc:function(){var a=new u;a.x=this.Si;a.y=this.Ti;a.z=this.Ui;return a},Ac:function(a){a.x=this.Si;a.y=this.Ti;a.z=this.Ui},Mf:function(){return this.ia},Ve:function(){return this.M}};sb.ua=V;sb.prototype=gb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,d=this.Df*c,f=this.Ef*c,h=this.Ee*c,c=this.Fe*c,l,g,k,m,n,q,p,r,t,u,w,B;l=-this.Ub;g=this.Tb;k=this.Ub;m=-this.Sb;n=-this.Tb;q=this.Sb;p=-this.Xb;r=this.Wb;t=this.Xb;u=-this.Vb;w=-this.Wb;B=this.Vb;var v,C=1/(this.C.$a+this.D.$a),U=this.da.cd,A=this.da.dd,E=this.da.ed,z=(this.C.P*U+this.C.R*A+this.C.S*E)*U+(this.C.T*U+this.C.U*A+this.C.V*E)*A+(this.C.W*U+this.C.X*A+this.C.Y*E)*E;v=(this.D.P*U+this.D.R*A+this.D.S*E)*U+(this.D.T*U+this.D.U*A+this.D.V*E)*A+(this.D.W*U+this.D.X*A+this.D.Y*E)*E;if(0<z){var D=U*this.Sb+A*this.Tb+E*this.Ub,D=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-D*D;0<D&&(z=0<this.C.$a?1/(1/z+this.C.Pc*D):0)}0<v&&(U=U*this.Vb+A*this.Wb+E*this.Xb,U=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-U*U,0<U&&(v=0<this.D.$a?1/(1/v+this.D.Pc*U):0));z=z+v?1/(z+v):0;if(0>=this.dl.frequency||!e){v=this.Pb[0];U=a.rows[a.Ka++];A=U.Aa;A.va=0;A.wa=0;A.xa=0;A.Ba=0;A.Ca=0;A.Da=0;A.aa=0;A.ba=0;A.ca=0;A.ea=0;A.fa=0;A.ga=0;U.Fa=0;U.Ma=0;U.Ia=0;U.Ha=0;U.motorSpeed=0;U.fb=0;U.ta=null;U.ta=v;v=U;var U=this.eg,D=this.cl,E=this.dl,I,A=F.linearSlop;if(e)E=0,I=1;else{if(0<E.frequency){var A=0,J=6.28318530717958*E.frequency,L=E.dampingRatio;L<F.minSpringDamperDampingRatio&&(L=F.minSpringDamperDampingRatio);I=b.dt;L=2*L*J;J*=J;E.useSymplecticEuler?(E=1/(I*L),I=J/L):(E=1/(I*(I*J+L)),I=J/(I*J+L))}else E=0,I=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<D.motorForce?(v.motorSpeed=D.motorSpeed,v.fb=D.motorForce*b.dt):(v.motorSpeed=0,v.fb=0)}var L=D.lowerLimit,P=D.upperLimit;L>P?U=J=D=0:L==P?(D=-1/0,J=1/0,U-=L):U<L?(D=-1/0,J=0,U=U-L+A,0<U&&(U=0)):U>P?(D=0,J=1/0,U=U-P-A,0>U&&(U=0)):U=J=D=0;v.Ia=D;v.Ha=J;v.Ma=E*(C?1/C:0);v.Fa=U*I;v=v.Aa;v.va=this.da.cd;v.wa=this.da.dd;v.xa=this.da.ed;v.Ba=this.da.cd;v.Ca=this.da.dd;v.Da=this.da.ed;v.aa=-0;v.ba=-l;v.ca=-g;v.ea=-0;v.fa=-p;v.ga=-r}v=this.Pb[1];l=a.rows[a.Ka++];g=l.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.aa=0;g.ba=0;g.ca=0;g.ea=0;g.fa=0;g.ga=0;l.Fa=0;l.Ma=0;l.Ia=0;l.Ha=0;l.motorSpeed=0;l.fb=0;l.ta=v;v=l;v.Fa=d;v.Ma=0;v.Ia=-1/0;v.Ha=1/0;v=v.Aa;v.va=this.da.Qd;v.wa=this.da.Rd;v.xa=this.da.Sd;v.Ba=this.da.Qd;v.Ca=this.da.Rd;v.Da=this.da.Sd;v.aa=-k;v.ba=-0;v.ca=-m;v.ea=-t;v.fa=-0;v.ga=-u;d=this.Pb[2];v=a.rows[a.Ka++];k=v.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;v.Fa=0;v.Ma=0;v.Ia=0;v.Ha=0;v.motorSpeed=0;v.fb=0;v.ta=d;v.Fa=f;v.Ma=0;v.Ia=-1/0;v.Ha=1/0;v=v.Aa;v.va=this.da.me;v.wa=this.da.ne;v.xa=this.da.oe;v.Ba=this.da.me;v.Ca=this.da.ne;v.Da=this.da.oe;v.aa=-n;v.ba=-q;v.ca=-0;v.ea=-w;v.fa=-B;v.ga=-0;if(0>=this.Xk.frequency||!e)f=this.Pb[3],n=a.rows[a.Ka++],q=n.Aa,q.va=0,q.wa=0,q.xa=0,q.Ba=0,q.Ca=0,q.Da=0,q.aa=0,q.ba=0,q.ca=0,q.ea=0,q.fa=0,q.ga=0,n.Fa=0,n.Ma=0,n.Ia=0,n.Ha=0,n.motorSpeed=0,n.fb=0,n.ta=f,v=n,f=this.angle,q=this.Wk,w=this.Xk,n=F.angularSlop,e?(e=0,w=1):(0<w.frequency?(n=0,e=6.28318530717958*w.frequency,d=w.dampingRatio,d<F.minSpringDamperDampingRatio&&(d=F.minSpringDamperDampingRatio),B=b.dt,d=2*d*e,k=e*e,w.useSymplecticEuler?(e=1/(B*d),w=k/d):(e=1/(B*(B*k+d)),w=k/(B*k+d))):(e=0,w=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<q.motorTorque?(v.motorSpeed=q.motorSpeed,v.fb=q.motorTorque*b.dt):(v.motorSpeed=0,v.fb=0)),b=q.lowerLimit,q=q.upperLimit,B=.5*(b+q),f=((f-B+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+B,b>q?b=d=B=0:b==q?(B=-1/0,d=1/0,b=f-b):f<b?(B=-1/0,d=0,b=f-b+n,0<b&&(b=0)):f>q?(B=0,d=1/0,b=f-q-n,0>b&&(b=0)):b=d=B=0,v.Ia=B,v.Ha=d,v.Ma=e*(z?1/z:0),v.Fa=b*w,v=v.Aa,v.aa=this.da.cd,v.ba=this.da.dd,v.ca=this.da.ed,v.ea=this.da.cd,v.fa=this.da.dd,v.ga=this.da.ed;b=this.Pb[4];z=a.rows[a.Ka++];e=z.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.aa=0;e.ba=0;e.ca=0;e.ea=0;e.fa=0;e.ga=0;z.Fa=0;z.Ma=0;z.Ia=0;z.Ha=0;z.motorSpeed=0;z.fb=0;z.ta=b;v=z;v.Fa=h;v.Ma=0;v.Ia=-1/0;v.Ha=1/0;v=v.Aa;v.aa=this.da.Qd;v.ba=this.da.Rd;v.ca=this.da.Sd;v.ea=this.da.Qd;v.fa=this.da.Rd;v.ga=this.da.Sd;h=this.Pb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.aa=0;b.ba=0;b.ca=0;b.ea=0;b.fa=0;b.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=h;v=a;v.Fa=c;v.Ma=0;v.Ia=-1/0;v.Ha=1/0;v=v.Aa;v.aa=this.da.me;v.ba=this.da.ne;v.ca=this.da.oe;v.ea=this.da.me;v.fa=this.da.ne;v.ga=this.da.oe},hd:function(){V.prototype.hd.call(this);var a=this.da,b=a.$.C.$a,e=a.$.D.$a,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v,C,U,A,E,z,D,I,J,F,L,P,da,xa,Ga=a.$.vb*a.$.bc+a.$.wb*a.$.cc+a.$.xb*a.$.dc;if(-.999999999>Ga){var xb,Ka,Da,ma=a.$.vb,Q=a.$.wb,Ja=a.$.xb,Ha=ma*ma,Ea=Q*Q,Ua=Ja*Ja,ua;Ha<Ea?Ha<Ua?(ua=1/Math.sqrt(Ea+Ua),xb=0,Ka=Ja*ua,Da=-Q*ua):(ua=1/Math.sqrt(Ha+Ea),xb=Q*ua,Ka=-ma*ua,Da=0):Ea<Ua?(ua=1/Math.sqrt(Ua+Ha),xb=-Ja*ua,Ka=0,Da=ma*ua):(ua=1/Math.sqrt(Ha+Ea),xb=Q*ua,Ka=-ma*ua,Da=0);c=xb;d=Ka;f=Da;h=0}else{var oa,Wa,G;oa=a.$.wb*a.$.dc-a.$.xb*a.$.cc;Wa=a.$.xb*a.$.bc-a.$.vb*a.$.dc;G=a.$.vb*a.$.cc-a.$.wb*a.$.bc;var Qa=Math.sqrt(.5*(1+Ga)),Ga=.5/Qa;oa*=Ga;Wa*=Ga;G*=Ga;c=oa;d=Wa;f=G;h=Qa}var X,M,N,ca,Y,S,aa,y;N=M=X=0;ca=1;Y=c;S=d;aa=f;y=h;var fa=X*Y+M*S+N*aa+ca*y;0>fa&&(fa=-fa,Y=-Y,S=-S,aa=-aa,y=-y);if(.999999<fa){var T,pa,sa,va;T=Y-X;pa=S-M;sa=aa-N;va=y-ca;Y=X+b/(b+e)*T;S=M+b/(b+e)*pa;aa=N+b/(b+e)*sa;y=ca+b/(b+e)*va;var ra=Y*Y+S*S+aa*aa+y*y;1E-32<ra&&(ra=1/Math.sqrt(ra));l=Y*ra;g=S*ra;k=aa*ra;m=y*ra}else{var ka=b/(b+e)*Math.acos(fa);Y+=X*-fa;S+=M*-fa;aa+=N*-fa;y+=ca*-fa;var Z=Y*Y+S*S+aa*aa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));Y*=Z;S*=Z;aa*=Z;y*=Z;var na=Math.sin(ka),Aa=Math.cos(ka);X*=Aa;M*=Aa;N*=Aa;ca*=Aa;l=X+Y*na;g=M+S*na;k=N+aa*na;m=ca+y*na}var ya=l,K=g,Ba=k,ha=m,ba=2*ya,Va=2*K,ga=2*Ba,O=ya*ba,za=K*Va,ob=Ba*ga,ja=ya*Va,Na=K*ga,Za=ya*ga,fb=ha*ba,Db=ha*Va,ta=ha*ga;n=1-za-ob;q=ja-ta;p=Za+Db;r=ja+ta;t=1-O-ob;u=Na-fb;w=Za-Db;B=Na+fb;v=1-O-za;var wa,Fa;wa=n*a.$.vb+q*a.$.wb+p*a.$.xb;Fa=r*a.$.vb+t*a.$.wb+u*a.$.xb;C=w*a.$.vb+B*a.$.wb+v*a.$.xb;J=a.cd;F=a.dd;L=a.ed;P=a.Qd;da=a.Rd;xa=a.Sd;var eb=J*wa+F*Fa+L*C;if(-.999999999>eb){var Ia,pb,Oa,la=J*J,Ca=F*F,Xa=L*L,Ra;la<Ca?la<Xa?(Ra=1/Math.sqrt(Ca+Xa),Ia=0,pb=L*Ra,Oa=-F*Ra):(Ra=1/Math.sqrt(la+Ca),Ia=F*Ra,pb=-J*Ra,Oa=0):Ca<Xa?(Ra=1/Math.sqrt(Xa+la),Ia=-L*Ra,pb=0,Oa=J*Ra):(Ra=1/Math.sqrt(la+Ca),Ia=F*Ra,pb=-J*Ra,Oa=0);l=Ia;g=pb;k=Oa;m=0}else{var hb,Jb,cb;hb=F*C-L*Fa;Jb=L*wa-J*C;cb=J*Fa-F*wa;var ub=Math.sqrt(.5*(1+eb)),eb=.5/ub;hb*=eb;Jb*=eb;cb*=eb;l=hb;g=Jb;k=cb;m=ub}var jb=l,mb=g,Yb=k,ab=m,Ya=2*jb,La=2*mb,vb=2*Yb,H=jb*Ya,db=mb*La,kb=Yb*vb,zb=jb*La,lb=mb*vb,tb=jb*vb,x=ab*Ya,W=ab*La,ea=ab*vb;n=1-db-kb;q=zb-ea;p=tb+W;r=zb+ea;t=1-H-kb;u=lb-x;w=tb-W;B=lb+x;v=1-H-db;var Sa,$a,Pa;Sa=n*P+q*da+p*xa;$a=r*P+t*da+u*xa;Pa=w*P+B*da+v*xa;U=Sa;A=$a;E=Pa;z=Fa*E-C*A;D=C*U-wa*E;I=wa*A-Fa*U;if(1E-6<z*z+D*D+I*I){var qb=z*z+D*D+I*I;0<qb&&(qb=1/Math.sqrt(qb));z*=qb;D*=qb;I*=qb}else{var nb=wa*wa,Ab=Fa*Fa,Bb=C*C,ia;nb<Ab?nb<Bb?(ia=1/Math.sqrt(Ab+Bb),z=0,D=C*ia,I=-Fa*ia):(ia=1/Math.sqrt(nb+Ab),z=Fa*ia,D=-wa*ia,I=0):Ab<Bb?(ia=1/Math.sqrt(Bb+nb),z=-C*ia,D=0,I=wa*ia):(ia=1/Math.sqrt(nb+Ab),z=Fa*ia,D=-wa*ia,I=0)}U=D*C-I*Fa;A=I*wa-z*C;E=z*Fa-D*wa;a.cd=wa;a.dd=Fa;a.ed=C;a.Qd=U;a.Rd=A;a.Sd=E;a.me=z;a.ne=D;a.oe=I;var Ta,bb,ib;Ta=this.wb*this.dc-this.xb*this.cc;bb=this.xb*this.bc-this.vb*this.dc;ib=this.vb*this.cc-this.wb*this.bc;var Cb=this.vb*this.bc+this.wb*this.cc+this.xb*this.dc,Ma=-1>=Cb?3.14159265358979:1<=Cb?0:Math.acos(Cb),Eb=Ta*Ta+bb*bb+ib*ib;0<Eb&&(Eb=1/Math.sqrt(Eb));Ta*=Eb;bb*=Eb;ib*=Eb;Ta*=Ma;bb*=Ma;ib*=Ma;this.Ee=Ta*this.da.Qd+bb*this.da.Rd+ib*this.da.Sd;this.Fe=Ta*this.da.me+bb*this.da.ne+ib*this.da.oe;var gb,qa,Ac;gb=this.Ie*this.xe-this.Je*this.we;qa=this.Je*this.ve-this.He*this.xe;Ac=this.He*this.we-this.Ie*this.ve;Cb=this.He*this.ve+this.Ie*this.we+this.Je*this.xe;this.angle=-1>=Cb?3.14159265358979:1<=Cb?0:Math.acos(Cb);0>gb*this.da.cd+qa*this.da.dd+Ac*this.da.ed&&(this.angle=-this.angle);var Kb,Qb,sb;Kb=this.Rf-this.Of;Qb=this.Sf-this.Pf;sb=this.Tf-this.Qf;this.eg=Kb*this.da.cd+Qb*this.da.dd+sb*this.da.ed;this.Df=Kb*this.da.Qd+Qb*this.da.Rd+sb*this.da.Sd;this.Ef=Kb*this.da.me+Qb*this.da.ne+sb*this.da.oe},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new u;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new u;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new u;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new u;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Gn:function(){return this.dl},yn:function(){return this.Xk},Fn:function(){return this.cl},xn:function(){return this.Wk},ol:function(){return this.angle},rl:function(){return this.eg}});jc.prototype={fh:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var c=this.rigidBody1,d,f,h;d=e.x;f=e.y;h=e.z;d-=c.a.v;f-=c.a.A;h-=c.a.B;a=c.a.o*d+c.a.i*f+c.a.l*h;b=c.a.f*d+c.a.m*f+c.a.g*h;c=c.a.h*d+c.a.j*f+c.a.s*h;d=this.localAnchor1;d.x=a;d.y=b;d.z=c;b=this.rigidBody2;c=e.x;d=e.y;f=e.z;c-=b.a.v;d-=b.a.A;f-=b.a.B;e=b.a.o*c+b.a.i*d+b.a.l*f;a=b.a.f*c+b.a.m*d+b.a.g*f;b=b.a.h*c+b.a.j*d+b.a.s*f;c=this.localAnchor2;c.x=e;c.y=a;c.z=b}};Fe.ua=jc;Fe.prototype=gb(jc.prototype,{za:function(a,b,e,c){this.fh(a,b,e);var d,f,h;d=c.x;f=c.y;h=c.z;var l;e=a.a.o*d+a.a.i*f+a.a.l*h;l=a.a.f*d+a.a.m*f+a.a.g*h;a=a.a.h*d+a.a.j*f+a.a.s*h;d=this.localAxis1;d.x=e;d.y=l;d.z=a;l=c.x;a=c.y;d=c.z;c=b.a.o*l+b.a.i*a+b.a.l*d;e=b.a.f*l+b.a.m*a+b.a.g*d;b=b.a.h*l+b.a.j*a+b.a.s*d;l=this.localAxis2;l.x=c;l.y=e;l.z=b;return this}});Xc.prototype={ua:function(){return this.Pk},Hb:function(){return this.Qc},Mb:function(){return this.ia},cb:function(){return this.M}};Vb.ua=V;Vb.prototype=gb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,d=this.Df*c,f=this.Ef*c,h=this.rh*c,l=this.Ee*c,c=this.Fe*c,g,k,m,n,q,p,r,t,u,w,B,v;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;q=-this.Tb;p=this.Sb;r=-this.Xb;t=this.Wb;u=this.Xb;w=-this.Vb;B=-this.Wb;v=this.Vb;var C,U;U=1/(this.C.$a+this.D.$a);if(0>=this.Ce.frequency||!e){C=this.Pb[0];var A=a.rows[a.Ka++],E=A.Aa;E.va=0;E.wa=0;E.xa=0;E.Ba=0;E.Ca=0;E.Da=0;E.aa=0;E.ba=0;E.ca=0;E.ea=0;E.fa=0;E.ga=0;A.Fa=0;A.Ma=0;A.Ia=0;A.Ha=0;A.motorSpeed=0;A.fb=0;A.ta=C;C=A;var A=this.eg,z=this.Rh,D=this.Ce,E=F.linearSlop;if(e)D=0,e=1;else{if(0<D.frequency){var E=0,I=6.28318530717958*D.frequency,J=D.dampingRatio;J<F.minSpringDamperDampingRatio&&(J=F.minSpringDamperDampingRatio);e=b.dt;J=2*J*I;I*=I;D.useSymplecticEuler?(D=1/(e*J),e=I/J):(D=1/(e*(e*I+J)),e=I/(e*I+J))}else D=0,e=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<z.motorForce?(C.motorSpeed=z.motorSpeed,C.fb=z.motorForce*b.dt):(C.motorSpeed=0,C.fb=0)}b=z.lowerLimit;I=z.upperLimit;b>I?b=J=z=0:b==I?(z=-1/0,J=1/0,b=A-b):A<b?(z=-1/0,J=0,b=A-b+E,0<b&&(b=0)):A>I?(z=0,J=1/0,b=A-I-E,0>b&&(b=0)):b=J=z=0;C.Ia=z;C.Ha=J;C.Ma=D*(U?1/U:0);C.Fa=b*e;U=C.Aa;U.va=this.da.cd;U.wa=this.da.dd;U.xa=this.da.ed;U.Ba=this.da.cd;U.Ca=this.da.dd;U.Da=this.da.ed;U.aa=-0;U.ba=-g;U.ca=-k;U.ea=-0;U.fa=-r;U.ga=-t}g=this.Pb[1];k=a.rows[a.Ka++];r=k.Aa;r.va=0;r.wa=0;r.xa=0;r.Ba=0;r.Ca=0;r.Da=0;r.aa=0;r.ba=0;r.ca=0;r.ea=0;r.fa=0;r.ga=0;k.Fa=0;k.Ma=0;k.Ia=0;k.Ha=0;k.motorSpeed=0;k.fb=0;k.ta=g;C=k;C.Fa=d;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;U=C.Aa;U.va=this.da.Qd;U.wa=this.da.Rd;U.xa=this.da.Sd;U.Ba=this.da.Qd;U.Ca=this.da.Rd;U.Da=this.da.Sd;U.aa=-m;U.ba=-0;U.ca=-n;U.ea=-u;U.fa=-0;U.ga=-w;d=this.Pb[2];m=a.rows[a.Ka++];n=m.Aa;n.va=0;n.wa=0;n.xa=0;n.Ba=0;n.Ca=0;n.Da=0;n.aa=0;n.ba=0;n.ca=0;n.ea=0;n.fa=0;n.ga=0;m.Fa=0;m.Ma=0;m.Ia=0;m.Ha=0;m.motorSpeed=0;m.fb=0;m.ta=d;C=m;C.Fa=f;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;U=C.Aa;U.va=this.da.me;U.wa=this.da.ne;U.xa=this.da.oe;U.Ba=this.da.me;U.Ca=this.da.ne;U.Da=this.da.oe;U.aa=-q;U.ba=-p;U.ca=-0;U.ea=-B;U.fa=-v;U.ga=-0;f=this.Pb[3];q=a.rows[a.Ka++];p=q.Aa;p.va=0;p.wa=0;p.xa=0;p.Ba=0;p.Ca=0;p.Da=0;p.aa=0;p.ba=0;p.ca=0;p.ea=0;p.fa=0;p.ga=0;q.Fa=0;q.Ma=0;q.Ia=0;q.Ha=0;q.motorSpeed=0;q.fb=0;q.ta=f;C=q;C.Fa=h;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;U=C.Aa;U.aa=1;U.ba=0;U.ca=0;U.ea=1;U.fa=0;U.ga=0;h=this.Pb[4];f=a.rows[a.Ka++];q=f.Aa;q.va=0;q.wa=0;q.xa=0;q.Ba=0;q.Ca=0;q.Da=0;q.aa=0;q.ba=0;q.ca=0;q.ea=0;q.fa=0;q.ga=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.fb=0;f.ta=h;C=f;C.Fa=l;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;U=C.Aa;U.aa=0;U.ba=1;U.ca=0;U.ea=0;U.fa=1;U.ga=0;l=this.Pb[5];a=a.rows[a.Ka++];h=a.Aa;h.va=0;h.wa=0;h.xa=0;h.Ba=0;h.Ca=0;h.Da=0;h.aa=0;h.ba=0;h.ca=0;h.ea=0;h.fa=0;h.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=l;C=a;C.Fa=c;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;U=C.Aa;U.aa=0;U.ba=0;U.ca=1;U.ea=0;U.fa=0;U.ga=1},hd:function(){V.prototype.hd.call(this);var a=this.da,b=a.$.C.$a,e=a.$.D.$a,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v,C,U,A,E,z,D,I,J,F,L,P,da,xa,Ga=a.$.vb*a.$.bc+a.$.wb*a.$.cc+a.$.xb*a.$.dc;if(-.999999999>Ga){var xb,Ka,Da,ma=a.$.vb,Q=a.$.wb,Ja=a.$.xb,Ha=ma*ma,Ea=Q*Q,Ua=Ja*Ja,ua;Ha<Ea?Ha<Ua?(ua=1/Math.sqrt(Ea+Ua),xb=0,Ka=Ja*ua,Da=-Q*ua):(ua=1/Math.sqrt(Ha+Ea),xb=Q*ua,Ka=-ma*ua,Da=0):Ea<Ua?(ua=1/Math.sqrt(Ua+Ha),xb=-Ja*ua,Ka=0,Da=ma*ua):(ua=1/Math.sqrt(Ha+Ea),xb=Q*ua,Ka=-ma*ua,Da=0);c=xb;d=Ka;f=Da;h=0}else{var oa,Wa,G;oa=a.$.wb*a.$.dc-a.$.xb*a.$.cc;Wa=a.$.xb*a.$.bc-a.$.vb*a.$.dc;G=a.$.vb*a.$.cc-a.$.wb*a.$.bc;var Qa=Math.sqrt(.5*(1+Ga)),Ga=.5/Qa;oa*=Ga;Wa*=Ga;G*=Ga;c=oa;d=Wa;f=G;h=Qa}var X,M,N,ca,Y,S,aa,y;N=M=X=0;ca=1;Y=c;S=d;aa=f;y=h;var fa=X*Y+M*S+N*aa+ca*y;0>fa&&(fa=-fa,Y=-Y,S=-S,aa=-aa,y=-y);if(.999999<fa){var T,pa,sa,va;T=Y-X;pa=S-M;sa=aa-N;va=y-ca;Y=X+b/(b+e)*T;S=M+b/(b+e)*pa;aa=N+b/(b+e)*sa;y=ca+b/(b+e)*va;var ra=Y*Y+S*S+aa*aa+y*y;1E-32<ra&&(ra=1/Math.sqrt(ra));l=Y*ra;g=S*ra;k=aa*ra;m=y*ra}else{var ka=b/(b+e)*Math.acos(fa);Y+=X*-fa;S+=M*-fa;aa+=N*-fa;y+=ca*-fa;var Z=Y*Y+S*S+aa*aa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));Y*=Z;S*=Z;aa*=Z;y*=Z;var na=Math.sin(ka),Aa=Math.cos(ka);X*=Aa;M*=Aa;N*=Aa;ca*=Aa;l=X+Y*na;g=M+S*na;k=N+aa*na;m=ca+y*na}var ya=l,K=g,Ba=k,ha=m,ba=2*ya,Va=2*K,ga=2*Ba,O=ya*ba,za=K*Va,ob=Ba*ga,ja=ya*Va,Na=K*ga,ab=ya*ga,fb=ha*ba,Db=ha*Va,ta=ha*ga;n=1-za-ob;q=ja-ta;p=ab+Db;r=ja+ta;t=1-O-ob;u=Na-fb;w=ab-Db;B=Na+fb;v=1-O-za;var wa,Fa;wa=n*a.$.vb+q*a.$.wb+p*a.$.xb;Fa=r*a.$.vb+t*a.$.wb+u*a.$.xb;C=w*a.$.vb+B*a.$.wb+v*a.$.xb;J=a.cd;F=a.dd;L=a.ed;P=a.Qd;da=a.Rd;xa=a.Sd;var eb=J*wa+F*Fa+L*C;if(-.999999999>eb){var Ia,pb,Oa,la=J*J,Ca=F*F,Xa=L*L,Ra;la<Ca?la<Xa?(Ra=1/Math.sqrt(Ca+Xa),Ia=0,pb=L*Ra,Oa=-F*Ra):(Ra=1/Math.sqrt(la+Ca),Ia=F*Ra,pb=-J*Ra,Oa=0):Ca<Xa?(Ra=1/Math.sqrt(Xa+la),Ia=-L*Ra,pb=0,Oa=J*Ra):(Ra=1/Math.sqrt(la+Ca),Ia=F*Ra,pb=-J*Ra,Oa=0);l=Ia;g=pb;k=Oa;m=0}else{var hb,Jb,cb;hb=F*C-L*Fa;Jb=L*wa-J*C;cb=J*Fa-F*wa;var ub=Math.sqrt(.5*(1+eb)),eb=.5/ub;hb*=eb;Jb*=eb;cb*=eb;l=hb;g=Jb;k=cb;m=ub}var jb=l,mb=g,Yb=k,Za=m,Ya=2*jb,La=2*mb,vb=2*Yb,H=jb*Ya,db=mb*La,kb=Yb*vb,zb=jb*La,lb=mb*vb,tb=jb*vb,x=Za*Ya,W=Za*La,ea=Za*vb;n=1-db-kb;q=zb-ea;p=tb+W;r=zb+ea;t=1-H-kb;u=lb-x;w=tb-W;B=lb+x;v=1-H-db;var Sa,$a,Pa;Sa=n*P+q*da+p*xa;$a=r*P+t*da+u*xa;Pa=w*P+B*da+v*xa;U=Sa;A=$a;E=Pa;z=Fa*E-C*A;D=C*U-wa*E;I=wa*A-Fa*U;if(1E-6<z*z+D*D+I*I){var qb=z*z+D*D+I*I;0<qb&&(qb=1/Math.sqrt(qb));z*=qb;D*=qb;I*=qb}else{var nb=wa*wa,Ab=Fa*Fa,Bb=C*C,ia;nb<Ab?nb<Bb?(ia=1/Math.sqrt(Ab+Bb),z=0,D=C*ia,I=-Fa*ia):(ia=1/Math.sqrt(nb+Ab),z=Fa*ia,D=-wa*ia,I=0):Ab<Bb?(ia=1/Math.sqrt(Bb+nb),z=-C*ia,D=0,I=wa*ia):(ia=1/Math.sqrt(nb+Ab),z=Fa*ia,D=-wa*ia,I=0)}U=D*C-I*Fa;A=I*wa-z*C;E=z*Fa-D*wa;a.cd=wa;a.dd=Fa;a.ed=C;a.Qd=U;a.Rd=A;a.Sd=E;a.me=z;a.ne=D;a.oe=I;var Ta,bb,ib,Cb,Ma,Eb,gb,qa,sb,Kb,Qb,wb,yb,Hb,Zb,Pb,Mb,Xb;Ta=this.vb;bb=this.He;ib=this.Hh;Cb=this.wb;Ma=this.Ie;Eb=this.Ih;gb=this.xb;qa=this.Je;sb=this.Jh;Kb=this.bc;Qb=this.ve;wb=this.ah;yb=this.cc;Hb=this.we;Zb=this.bh;Pb=this.dc;Mb=this.xe;Xb=this.dh;var Ib,Tb,fc,ec,Nb,bc,Fb,mc;Ib=Kb*Ta+Qb*bb+wb*ib;Tb=Kb*Cb+Qb*Ma+wb*Eb;fc=Kb*gb+Qb*qa+wb*sb;ec=yb*Ta+Hb*bb+Zb*ib;Nb=yb*Cb+Hb*Ma+Zb*Eb;bc=yb*gb+Hb*qa+Zb*sb;Fb=Pb*Ta+Mb*bb+Xb*ib;mc=Pb*Cb+Mb*Ma+Xb*Eb;var ac,Ob,cc,Ub,Lb=Pb*gb+Mb*qa+Xb*sb,Rb=Ib+Nb+Lb,rb;0<Rb?(rb=Math.sqrt(Rb+1),Ub=.5*rb,rb=.5/rb,ac=(mc-bc)*rb,Ob=(fc-Fb)*rb,cc=(ec-Tb)*rb):Ib>Nb?Ib>Lb?(rb=Math.sqrt(Ib-Nb-Lb+1),ac=.5*rb,rb=.5/rb,Ob=(Tb+ec)*rb,cc=(fc+Fb)*rb,Ub=(mc-bc)*rb):(rb=Math.sqrt(Lb-Ib-Nb+1),cc=.5*rb,rb=.5/rb,ac=(fc+Fb)*rb,Ob=(bc+mc)*rb,Ub=(ec-Tb)*rb):Nb>Lb?(rb=Math.sqrt(Nb-Lb-Ib+1),Ob=.5*rb,rb=.5/rb,ac=(Tb+ec)*rb,cc=(bc+mc)*rb,Ub=(fc-Fb)*rb):(rb=Math.sqrt(Lb-Ib-Nb+1),cc=.5*rb,rb=.5/rb,ac=(fc+Fb)*rb,Ob=(bc+mc)*rb,Ub=(ec-Tb)*rb);var $b=Ub,qc=2*(-1>=$b?3.14159265358979:1<=$b?0:Math.acos($b));this.rh=ac;this.Ee=Ob;this.Fe=cc;var Sb=this.rh*this.rh+this.Ee*this.Ee+this.Fe*this.Fe;0<Sb&&(Sb=1/Math.sqrt(Sb));this.rh*=Sb;this.Ee*=Sb;this.Fe*=Sb;this.rh*=qc;this.Ee*=qc;this.Fe*=qc;var Vb,hc,Wb;Vb=this.Rf-this.Of;hc=this.Sf-this.Pf;Wb=this.Tf-this.Qf;this.eg=Vb*this.da.cd+hc*this.da.dd+Wb*this.da.ed;this.Df=Vb*this.da.Qd+hc*this.da.Rd+Wb*this.da.Sd;this.Ef=Vb*this.da.me+hc*this.da.ne+Wb*this.da.oe},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new u;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new u;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new u;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new u;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Cj:function(){return this.Ce},ql:function(){return this.Rh},rl:function(){return this.eg}});bg.ua=jc;bg.prototype=gb(jc.prototype,{za:function(a,b,e,c){this.fh(a,b,e);var d,f,h;d=c.x;f=c.y;h=c.z;var l;e=a.a.o*d+a.a.i*f+a.a.l*h;l=a.a.f*d+a.a.m*f+a.a.g*h;a=a.a.h*d+a.a.j*f+a.a.s*h;d=this.localAxis1;d.x=e;d.y=l;d.z=a;l=c.x;a=c.y;d=c.z;c=b.a.o*l+b.a.i*a+b.a.l*d;e=b.a.f*l+b.a.m*a+b.a.g*d;b=b.a.h*l+b.a.j*a+b.a.s*d;l=this.localAxis2;l.x=c;l.y=e;l.z=b;return this}});Za.ua=V;Za.prototype=gb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,d,f;d=this.Mj*c;f=this.Df*c;var h=this.Ef*c,l,g,k,m,n,q,p,r,t,u,w,B;l=-this.Ub;g=this.Tb;k=this.Ub;m=-this.Sb;n=-this.Tb;q=this.Sb;p=-this.Xb;r=this.Wb;t=this.Xb;u=-this.Vb;w=-this.Wb;B=this.Vb;var v=this.je,C=this.ke,D=this.le,c=(this.C.P*v+this.C.R*C+this.C.S*D)*v+(this.C.T*v+this.C.U*C+this.C.V*D)*C+(this.C.W*v+this.C.X*C+this.C.Y*D)*D,A=(this.D.P*v+this.D.R*C+this.D.S*D)*v+(this.D.T*v+this.D.U*C+this.D.V*D)*C+(this.D.W*v+this.D.X*C+this.D.Y*D)*D;if(0<c){var E=v*this.Sb+C*this.Tb+D*this.Ub,E=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-E*E;0<E&&(c=0<this.C.$a?1/(1/c+this.C.Pc*E):0)}0<A&&(v=v*this.Vb+C*this.Wb+D*this.Xb,v=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-v*v,0<v&&(A=0<this.D.$a?1/(1/A+this.D.Pc*v):0));A=c+A?1/(c+A):0;C=this.bc;D=this.cc;E=this.dc;c=(this.C.P*C+this.C.R*D+this.C.S*E)*C+(this.C.T*C+this.C.U*D+this.C.V*E)*D+(this.C.W*C+this.C.X*D+this.C.Y*E)*E;v=(this.D.P*C+this.D.R*D+this.D.S*E)*C+(this.D.T*C+this.D.U*D+this.D.V*E)*D+(this.D.W*C+this.D.X*D+this.D.Y*E)*E;if(0<c){var z=C*this.Sb+D*this.Tb+E*this.Ub,z=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-z*z;0<z&&(c=0<this.C.$a?1/(1/c+this.C.Pc*z):0)}0<v&&(C=C*this.Vb+D*this.Wb+E*this.Xb,C=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-C*C,0<C&&(v=0<this.D.$a?1/(1/v+this.D.Pc*C):0));c=c+v?1/(c+v):0;v=this.Pb[0];C=a.rows[a.Ka++];D=C.Aa;D.va=0;D.wa=0;D.xa=0;D.Ba=0;D.Ca=0;D.Da=0;D.aa=0;D.ba=0;D.ca=0;D.ea=0;D.fa=0;D.ga=0;C.Fa=0;C.Ma=0;C.Ia=0;C.Ha=0;C.motorSpeed=0;C.fb=0;C.ta=v;v=C;v.Fa=d;v.Ma=0;v.Ia=-1/0;v.Ha=1/0;v=v.Aa;v.va=1;v.wa=0;v.xa=0;v.Ba=1;v.Ca=0;v.Da=0;v.aa=-0;v.ba=-l;v.ca=-g;v.ea=-0;v.fa=-p;v.ga=-r;v=this.Pb[1];d=a.rows[a.Ka++];l=d.Aa;l.va=0;l.wa=0;l.xa=0;l.Ba=0;l.Ca=0;l.Da=0;l.aa=0;l.ba=0;l.ca=0;l.ea=0;l.fa=0;l.ga=0;d.Fa=0;d.Ma=0;d.Ia=0;d.Ha=0;d.motorSpeed=0;d.fb=0;d.ta=v;v=d;v.Fa=f;v.Ma=0;v.Ia=-1/0;v.Ha=1/0;v=v.Aa;v.va=0;v.wa=1;v.xa=0;v.Ba=0;v.Ca=1;v.Da=0;v.aa=-k;v.ba=-0;v.ca=-m;v.ea=-t;v.fa=-0;v.ga=-u;v=this.Pb[2];f=a.rows[a.Ka++];k=f.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.fb=0;f.ta=v;v=f;v.Fa=h;v.Ma=0;v.Ia=-1/0;v.Ha=1/0;v=v.Aa;v.va=0;v.wa=0;v.xa=1;v.Ba=0;v.Ca=0;v.Da=1;v.aa=-n;v.ba=-q;v.ca=-0;v.ea=-w;v.fa=-B;v.ga=-0;0<this.Nj&&(0>=this.$k.frequency||!e)&&(v=this.Pb[3],h=a.rows[a.Ka++],n=h.Aa,n.va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.fb=0,h.ta=v,v=h,h=this.Nj,w=this.nl,q=this.$k,n=F.angularSlop,e?(q=0,B=1):(0<q.frequency?(n=0,k=6.28318530717958*q.frequency,f=q.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),B=b.dt,f=2*f*k,k*=k,q.useSymplecticEuler?(q=1/(B*f),B=k/f):(q=1/(B*(B*k+f)),B=k/(B*k+f))):(q=0,B=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<w.motorTorque?(v.motorSpeed=w.motorSpeed,v.fb=w.motorTorque*b.dt):(v.motorSpeed=0,v.fb=0)),f=w.lowerLimit,w=w.upperLimit,k=.5*(f+w),h=((h-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,h+=k,f>w?h=m=k=0:f==w?(k=-1/0,m=1/0,h-=f):h<f?(k=-1/0,m=0,h=h-f+n,0<h&&(h=0)):h>w?(k=0,m=1/0,h=h-w-n,0>h&&(h=0)):h=m=k=0,v.Ia=k,v.Ha=m,v.Ma=q*(A?1/A:0),v.Fa=h*B,v=v.Aa,v.aa=this.je,v.ba=this.ke,v.ca=this.le,v.ea=this.je,v.fa=this.ke,v.ga=this.le);if(0>=this.fl.frequency||!e)A=this.Pb[4],a=a.rows[a.Ka++],v=a.Aa,v.va=0,v.wa=0,v.xa=0,v.Ba=0,v.Ca=0,v.Da=0,v.aa=0,v.ba=0,v.ca=0,v.ea=0,v.fa=0,v.ga=0,a.Fa=0,a.Ma=0,a.Ia=0,a.Ha=0,a.motorSpeed=0,a.fb=0,a.ta=A,v=a,a=this.tj,h=this.el,n=this.fl,A=F.angularSlop,e?(e=0,n=1):(0<n.frequency?(A=0,e=6.28318530717958*n.frequency,w=n.dampingRatio,w<F.minSpringDamperDampingRatio&&(w=F.minSpringDamperDampingRatio),q=b.dt,w=2*w*e,B=e*e,n.useSymplecticEuler?(e=1/(q*w),n=B/w):(e=1/(q*(q*B+w)),n=B/(q*B+w))):(e=0,n=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<h.motorTorque?(v.motorSpeed=h.motorSpeed,v.fb=h.motorTorque*b.dt):(v.motorSpeed=0,v.fb=0)),b=h.lowerLimit,h=h.upperLimit,q=.5*(b+h),a=((a-q+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,a+=q,b>h?b=w=q=0:b==h?(q=-1/0,w=1/0,b=a-b):a<b?(q=-1/0,w=0,b=a-b+A,0<b&&(b=0)):a>h?(q=0,w=1/0,b=a-h-A,0>b&&(b=0)):b=w=q=0,v.Ia=q,v.Ha=w,v.Ma=e*(c?1/c:0),v.Fa=b*n,v=v.Aa,v.aa=this.gi,v.ba=this.hi,v.ca=this.ii,v.ea=this.gi,v.fa=this.hi,v.ga=this.ii},hd:function(){V.prototype.hd.call(this);var a,b,e,c,d,f;a=this.vb;b=this.wb;e=this.xb;c=this.bc;d=this.cc;f=this.dc;var h,l,g,k,m,n,q,p,r;h=this.vb;l=this.He;g=this.Hh;k=this.wb;m=this.Ie;n=this.Ih;q=this.xb;p=this.Je;r=this.Jh;var t,u,w,B,v,C,D,A;C=a*c+b*d+e*f;-.999999999>C?(v=a*a,c=b*b,d=e*e,v<c?v<d?(c=1/Math.sqrt(c+d),v=0,e*=c,a=-b*c):(c=1/Math.sqrt(v+c),v=b*c,e=-a*c,a=0):c<d?(c=1/Math.sqrt(d+v),v=-e*c,e=0,a*=c):(c=1/Math.sqrt(v+c),v=b*c,e=-a*c,a=0),t=v,u=e,w=a,B=0):(v=Math.sqrt(.5*(1+C)),C=.5/v,t=(b*f-e*d)*C,u=(e*c-a*f)*C,w=(a*d-b*c)*C,B=v);C=t;f=u;v=w;a=B;d=2*C;e=2*f;b=2*v;D=C*d;A=f*e;c=v*b;v=C*e;f*=b;C*=b;var E=a*d,z=a*e;d=a*b;a=1-A-c;b=v-d;e=C+z;v+=d;c=1-D-c;d=f-E;C-=z;f+=E;D=1-D-A;this.kj=2*(-1>=B?3.14159265358979:1<=B?0:Math.acos(B));B=t;A=w;w=a*this.ve+v*this.we+C*this.xe;E=b*this.ve+c*this.we+f*this.xe;t=e*this.ve+d*this.we+D*this.xe;this.tj=Math.atan2(this.Hh*w+this.Ih*E+this.Jh*t,this.He*w+this.Ie*E+this.Je*t);this.gi=this.vb+this.bc;this.hi=this.wb+this.cc;this.ii=this.xb+this.dc;t=this.gi*this.gi+this.hi*this.hi+this.ii*this.ii;0<t&&(t=1/Math.sqrt(t));this.gi*=t;this.hi*=t;this.ii*=t;w=Math.sqrt(B*B+u*u+A*A);0<w&&(w=1/w);B*=w*this.kj;u*=w*this.kj;A*=w*this.kj;t=l*B+m*u+p*A;u=g*B+n*u+r*A;w=this.bk;B=this.ck;w=1/(w*w);A=1/(B*B);(B=t*t*w+u*u*A)?(E=Math.sqrt(1/B),B=t*E,E*=u,z=B*w,A*=E,w=1/Math.sqrt(z*z+A*A),z*=w,A*=w,t=(t-B)*z+(u-E)*A,0<t?(this.Nj=t,this.je=0,this.ke=z,this.le=A,h=h*this.je+l*this.ke+g*this.le,k=k*this.je+m*this.ke+n*this.le,q=q*this.je+p*this.ke+r*this.le,this.je=h,this.ke=k,this.le=q,q=a*this.je+b*this.ke+e*this.le,p=v*this.je+c*this.ke+d*this.le,r=C*this.je+f*this.ke+D*this.le,this.je=q,this.ke=p,this.le=r):this.Nj=0):this.Nj=this.le=this.ke=this.je=0;this.Mj=this.Rf-this.Of;this.Df=this.Sf-this.Pf;this.Ef=this.Tf-this.Qf},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new u;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new u;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new u;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new u;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Kn:function(){return this.fl},Jn:function(){return this.el},En:function(){return this.$k},Cn:function(){var a=new u;a.x=this.je;a.y=this.ke;a.z=this.le;return a},Dn:function(a){a.x=this.je;a.y=this.ke;a.z=this.le},Bn:function(){return this.kj},In:function(){return this.tj}});Qf.ua=jc;Qf.prototype=gb(jc.prototype,{za:function(a,b,e,c,d){this.fh(a,b,e);var f,h,l;f=c.x;h=c.y;l=c.z;var g;e=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;h=this.localTwistAxis1;h.x=e;h.y=g;h.z=f;g=c.x;f=c.y;h=c.z;c=b.a.o*g+b.a.i*f+b.a.l*h;e=b.a.f*g+b.a.m*f+b.a.g*h;b=b.a.h*g+b.a.j*f+b.a.s*h;g=this.localTwistAxis2;g.x=c;g.y=e;g.z=b;c=d.x;e=d.y;g=d.z;d=a.a.o*c+a.a.i*e+a.a.l*g;b=a.a.f*c+a.a.m*e+a.a.g*g;a=a.a.h*c+a.a.j*e+a.a.s*g;c=this.localSwingAxis1;c.x=d;c.y=b;c.z=a;return this}});Hb.ua=V;Hb.prototype=gb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,d,f;d=this.Mj*c;f=this.Df*c;var h=this.Ef*c,l=this.Ee*c,c=this.Fe*c,g,k,m,n,q,p,r,t,u,w,B,v;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;q=-this.Tb;p=this.Sb;r=-this.Xb;t=this.Wb;u=this.Xb;w=-this.Vb;B=-this.Wb;v=this.Vb;var C=this.da.cd,D=this.da.dd,A=this.da.ed,E=(this.C.P*C+this.C.R*D+this.C.S*A)*C+(this.C.T*C+this.C.U*D+this.C.V*A)*D+(this.C.W*C+this.C.X*D+this.C.Y*A)*A,z=(this.D.P*C+this.D.R*D+this.D.S*A)*C+(this.D.T*C+this.D.U*D+this.D.V*A)*D+(this.D.W*C+this.D.X*D+this.D.Y*A)*A;if(0<E){var L=C*this.Sb+D*this.Tb+A*this.Ub,L=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-L*L;0<L&&(E=0<this.C.$a?1/(1/E+this.C.Pc*L):0)}0<z&&(C=C*this.Vb+D*this.Wb+A*this.Xb,C=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-C*C,0<C&&(z=0<this.D.$a?1/(1/z+this.D.Pc*C):0));E=E+z?1/(E+z):0;z=this.Pb[0];C=a.rows[a.Ka++];D=C.Aa;D.va=0;D.wa=0;D.xa=0;D.Ba=0;D.Ca=0;D.Da=0;D.aa=0;D.ba=0;D.ca=0;D.ea=0;D.fa=0;D.ga=0;C.Fa=0;C.Ma=0;C.Ia=0;C.Ha=0;C.motorSpeed=0;C.fb=0;C.ta=z;z=C;z.Fa=d;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.va=1;z.wa=0;z.xa=0;z.Ba=1;z.Ca=0;z.Da=0;z.aa=-0;z.ba=-g;z.ca=-k;z.ea=-0;z.fa=-r;z.ga=-t;z=this.Pb[1];d=a.rows[a.Ka++];g=d.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.aa=0;g.ba=0;g.ca=0;g.ea=0;g.fa=0;g.ga=0;d.Fa=0;d.Ma=0;d.Ia=0;d.Ha=0;d.motorSpeed=0;d.fb=0;d.ta=z;z=d;z.Fa=f;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.va=0;z.wa=1;z.xa=0;z.Ba=0;z.Ca=1;z.Da=0;z.aa=-m;z.ba=-0;z.ca=-n;z.ea=-u;z.fa=-0;z.ga=-w;f=this.Pb[2];z=a.rows[a.Ka++];m=z.Aa;m.va=0;m.wa=0;m.xa=0;m.Ba=0;m.Ca=0;m.Da=0;m.aa=0;m.ba=0;m.ca=0;m.ea=0;m.fa=0;m.ga=0;z.Fa=0;z.Ma=0;z.Ia=0;z.Ha=0;z.motorSpeed=0;z.fb=0;z.ta=f;z.Fa=h;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.va=0;z.wa=0;z.xa=1;z.Ba=0;z.Ca=0;z.Da=1;z.aa=-q;z.ba=-p;z.ca=-0;z.ea=-B;z.fa=-v;z.ga=-0;if(0>=this.Ce.frequency||!e)h=this.Pb[3],q=a.rows[a.Ka++],p=q.Aa,p.va=0,p.wa=0,p.xa=0,p.Ba=0,p.Ca=0,p.Da=0,p.aa=0,p.ba=0,p.ca=0,p.ea=0,p.fa=0,p.ga=0,q.Fa=0,q.Ma=0,q.Ia=0,q.Ha=0,q.motorSpeed=0,q.fb=0,q.ta=h,z=q,h=this.angle,p=this.Rh,B=this.Ce,q=F.angularSlop,e?(e=0,B=1):(0<B.frequency?(q=0,e=6.28318530717958*B.frequency,f=B.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),v=b.dt,f=2*f*e,m=e*e,B.useSymplecticEuler?(e=1/(v*f),B=m/f):(e=1/(v*(v*m+f)),B=m/(v*m+f))):(e=0,B=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<p.motorTorque?(z.motorSpeed=p.motorSpeed,z.fb=p.motorTorque*b.dt):(z.motorSpeed=0,z.fb=0)),b=p.lowerLimit,p=p.upperLimit,v=.5*(b+p),h=((h-v+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+v,b>p?b=f=v=0:b==p?(v=-1/0,f=1/0,b=h-b):h<b?(v=-1/0,f=0,b=h-b+q,0<b&&(b=0)):h>p?(v=0,f=1/0,b=h-p-q,0>b&&(b=0)):b=f=v=0,z.Ia=v,z.Ha=f,z.Ma=e*(E?1/E:0),z.Fa=b*B,z=z.Aa,z.aa=this.da.cd,z.ba=this.da.dd,z.ca=this.da.ed,z.ea=this.da.cd,z.fa=this.da.dd,z.ga=this.da.ed;b=this.Pb[4];E=a.rows[a.Ka++];e=E.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.aa=0;e.ba=0;e.ca=0;e.ea=0;e.fa=0;e.ga=0;E.Fa=0;E.Ma=0;E.Ia=0;E.Ha=0;E.motorSpeed=0;E.fb=0;E.ta=b;z=E;z.Fa=l;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.aa=this.da.Qd;z.ba=this.da.Rd;z.ca=this.da.Sd;z.ea=this.da.Qd;z.fa=this.da.Rd;z.ga=this.da.Sd;l=this.Pb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.aa=0;b.ba=0;b.ca=0;b.ea=0;b.fa=0;b.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=l;z=a;z.Fa=c;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.aa=this.da.me;z.ba=this.da.ne;z.ca=this.da.oe;z.ea=this.da.me;z.fa=this.da.ne;z.ga=this.da.oe},hd:function(){V.prototype.hd.call(this);var a=this.da,b=a.$.C.$a,e=a.$.D.$a,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v,C,D,A,E,z,F,I,J,L,P,xa,da,Ga,Ja=a.$.vb*a.$.bc+a.$.wb*a.$.cc+a.$.xb*a.$.dc;if(-.999999999>Ja){var xb,Ka,Da,ma=a.$.vb,Q=a.$.wb,Na=a.$.xb,Ha=ma*ma,Ea=Q*Q,Ua=Na*Na,ua;Ha<Ea?Ha<Ua?(ua=1/Math.sqrt(Ea+Ua),xb=0,Ka=Na*ua,Da=-Q*ua):(ua=1/Math.sqrt(Ha+Ea),xb=Q*ua,Ka=-ma*ua,Da=0):Ea<Ua?(ua=1/Math.sqrt(Ua+Ha),xb=-Na*ua,Ka=0,Da=ma*ua):(ua=1/Math.sqrt(Ha+Ea),xb=Q*ua,Ka=-ma*ua,Da=0);c=xb;d=Ka;f=Da;h=0}else{var oa,Wa,G;oa=a.$.wb*a.$.dc-a.$.xb*a.$.cc;Wa=a.$.xb*a.$.bc-a.$.vb*a.$.dc;G=a.$.vb*a.$.cc-a.$.wb*a.$.bc;var Qa=Math.sqrt(.5*(1+Ja)),Ja=.5/Qa;oa*=Ja;Wa*=Ja;G*=Ja;c=oa;d=Wa;f=G;h=Qa}var X,M,N,ca,Y,S,aa,y;N=M=X=0;ca=1;Y=c;S=d;aa=f;y=h;var fa=X*Y+M*S+N*aa+ca*y;0>fa&&(fa=-fa,Y=-Y,S=-S,aa=-aa,y=-y);if(.999999<fa){var T,pa,sa,va;T=Y-X;pa=S-M;sa=aa-N;va=y-ca;Y=X+b/(b+e)*T;S=M+b/(b+e)*pa;aa=N+b/(b+e)*sa;y=ca+b/(b+e)*va;var ra=Y*Y+S*S+aa*aa+y*y;1E-32<ra&&(ra=1/Math.sqrt(ra));l=Y*ra;g=S*ra;k=aa*ra;m=y*ra}else{var ka=b/(b+e)*Math.acos(fa);Y+=X*-fa;S+=M*-fa;aa+=N*-fa;y+=ca*-fa;var Z=Y*Y+S*S+aa*aa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));Y*=Z;S*=Z;aa*=Z;y*=Z;var na=Math.sin(ka),Aa=Math.cos(ka);X*=Aa;M*=Aa;N*=Aa;ca*=Aa;l=X+Y*na;g=M+S*na;k=N+aa*na;m=ca+y*na}var ya=l,K=g,Ba=k,ha=m,ba=2*ya,Va=2*K,ga=2*Ba,O=ya*ba,za=K*Va,ob=Ba*ga,ja=ya*Va,Za=K*ga,ab=ya*ga,fb=ha*ba,Db=ha*Va,ta=ha*ga;n=1-za-ob;q=ja-ta;p=ab+Db;r=ja+ta;t=1-O-ob;u=Za-fb;w=ab-Db;B=Za+fb;v=1-O-za;var wa,Fa;wa=n*a.$.vb+q*a.$.wb+p*a.$.xb;Fa=r*a.$.vb+t*a.$.wb+u*a.$.xb;C=w*a.$.vb+B*a.$.wb+v*a.$.xb;J=a.cd;L=a.dd;P=a.ed;xa=a.Qd;da=a.Rd;Ga=a.Sd;var eb=J*wa+L*Fa+P*C;if(-.999999999>eb){var Ia,pb,Oa,la=J*J,Ca=L*L,Xa=P*P,Ra;la<Ca?la<Xa?(Ra=1/Math.sqrt(Ca+Xa),Ia=0,pb=P*Ra,Oa=-L*Ra):(Ra=1/Math.sqrt(la+Ca),Ia=L*Ra,pb=-J*Ra,Oa=0):Ca<Xa?(Ra=1/Math.sqrt(Xa+la),Ia=-P*Ra,pb=0,Oa=J*Ra):(Ra=1/Math.sqrt(la+Ca),Ia=L*Ra,pb=-J*Ra,Oa=0);l=Ia;g=pb;k=Oa;m=0}else{var hb,Jb,cb;hb=L*C-P*Fa;Jb=P*wa-J*C;cb=J*Fa-L*wa;var ub=Math.sqrt(.5*(1+eb)),eb=.5/ub;hb*=eb;Jb*=eb;cb*=eb;l=hb;g=Jb;k=cb;m=ub}var jb=l,mb=g,Sa=k,$a=m,Ya=2*jb,La=2*mb,vb=2*Sa,H=jb*Ya,db=mb*La,kb=Sa*vb,zb=jb*La,lb=mb*vb,tb=jb*vb,x=$a*Ya,W=$a*La,ea=$a*vb;n=1-db-kb;q=zb-ea;p=tb+W;r=zb+ea;t=1-H-kb;u=lb-x;w=tb-W;B=lb+x;v=1-H-db;var gb,sb,Pa;gb=n*xa+q*da+p*Ga;sb=r*xa+t*da+u*Ga;Pa=w*xa+B*da+v*Ga;D=gb;A=sb;E=Pa;z=Fa*E-C*A;F=C*D-wa*E;I=wa*A-Fa*D;if(1E-6<z*z+F*F+I*I){var qb=z*z+F*F+I*I;0<qb&&(qb=1/Math.sqrt(qb));z*=qb;F*=qb;I*=qb}else{var nb=wa*wa,Ab=Fa*Fa,Bb=C*C,ia;nb<Ab?nb<Bb?(ia=1/Math.sqrt(Ab+Bb),z=0,F=C*ia,I=-Fa*ia):(ia=1/Math.sqrt(nb+Ab),z=Fa*ia,F=-wa*ia,I=0):Ab<Bb?(ia=1/Math.sqrt(Bb+nb),z=-C*ia,F=0,I=wa*ia):(ia=1/Math.sqrt(nb+Ab),z=Fa*ia,F=-wa*ia,I=0)}D=F*C-I*Fa;A=I*wa-z*C;E=z*Fa-F*wa;a.cd=wa;a.dd=Fa;a.ed=C;a.Qd=D;a.Rd=A;a.Sd=E;a.me=z;a.ne=F;a.oe=I;var Ta,bb,ib;Ta=this.wb*this.dc-this.xb*this.cc;bb=this.xb*this.bc-this.vb*this.dc;ib=this.vb*this.cc-this.wb*this.bc;var Cb=this.vb*this.bc+this.wb*this.cc+this.xb*this.dc,Ma=-1>=Cb?3.14159265358979:1<=Cb?0:Math.acos(Cb),Eb=Ta*Ta+bb*bb+ib*ib;0<Eb&&(Eb=1/Math.sqrt(Eb));Ta*=Eb;bb*=Eb;ib*=Eb;Ta*=Ma;bb*=Ma;ib*=Ma;this.Ee=Ta*this.da.Qd+bb*this.da.Rd+ib*this.da.Sd;this.Fe=Ta*this.da.me+bb*this.da.ne+ib*this.da.oe;var wb,qa,yb;wb=this.Ie*this.xe-this.Je*this.we;qa=this.Je*this.ve-this.He*this.xe;yb=this.He*this.we-this.Ie*this.ve;Cb=this.He*this.ve+this.Ie*this.we+this.Je*this.xe;this.angle=-1>=Cb?3.14159265358979:1<=Cb?0:Math.acos(Cb);0>wb*this.da.cd+qa*this.da.dd+yb*this.da.ed&&(this.angle=-this.angle);this.Mj=this.Rf-this.Of;this.Df=this.Sf-this.Pf;this.Ef=this.Tf-this.Qf},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new u;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new u;a.x=this.bc;a.y=this.cc;a.z=this.dc;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.bc;a.y=this.cc;a.z=this.dc},Ig:function(){var a=new u;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new u;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Cj:function(){return this.Ce},ql:function(){return this.Rh},ol:function(){return this.angle}});Df.ua=jc;Df.prototype=gb(jc.prototype,{za:function(a,b,e,c){this.fh(a,b,e);var d,f,h;d=c.x;f=c.y;h=c.z;var l;e=a.a.o*d+a.a.i*f+a.a.l*h;l=a.a.f*d+a.a.m*f+a.a.g*h;a=a.a.h*d+a.a.j*f+a.a.s*h;d=this.localAxis1;d.x=e;d.y=l;d.z=a;l=c.x;a=c.y;d=c.z;c=b.a.o*l+b.a.i*a+b.a.l*d;e=b.a.f*l+b.a.m*a+b.a.g*d;b=b.a.h*l+b.a.j*a+b.a.s*d;l=this.localAxis2;l.x=c;l.y=e;l.z=b;return this}});$b.prototype={ua:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},cb:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new $b;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a}};Qd.ua=V;Qd.prototype=gb(V.prototype,{Ud:function(a,b,e){if(!(0<this.Ce.frequency&&e)){var c,d,f;c=this.Rf-this.Of;d=this.Sf-this.Pf;f=this.Tf-this.Qf;var h;if(0<this.Ce.frequency){h=6.28318530717958*this.Ce.frequency;e=this.Ce.dampingRatio;e<F.minSpringDamperDampingRatio&&(e=F.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.Ce.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.$a+this.D.$a}else h=0,b=e?1:this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;var g,k,m,n,q,p,r,t,u,w;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;e=-this.Tb;l=this.Sb;q=-this.Xb;p=this.Wb;r=this.Xb;t=-this.Vb;u=-this.Wb;w=this.Vb;var B=this.Pb[0],v=a.rows[a.Ka++],C=v.Aa;C.va=0;C.wa=0;C.xa=0;C.Ba=0;C.Ca=0;C.Da=0;C.aa=0;C.ba=0;C.ca=0;C.ea=0;C.fa=0;C.ga=0;v.Fa=0;v.Ma=0;v.Ia=0;v.Ha=0;v.motorSpeed=0;v.fb=0;v.ta=B;B=v;B.Fa=c*b;B.Ma=h;B.Ia=-1/0;B.Ha=1/0;c=B.Aa;c.va=1;c.wa=0;c.xa=0;c.Ba=1;c.Ca=0;c.Da=0;c.aa=-0;c.ba=-g;c.ca=-k;c.ea=-0;c.fa=-q;c.ga=-p;c=this.Pb[1];g=a.rows[a.Ka++];k=g.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;g.Fa=0;g.Ma=0;g.Ia=0;g.Ha=0;g.motorSpeed=0;g.fb=0;g.ta=c;B=g;B.Fa=d*b;B.Ma=h;B.Ia=-1/0;B.Ha=1/0;c=B.Aa;c.va=0;c.wa=1;c.xa=0;c.Ba=0;c.Ca=1;c.Da=0;c.aa=-m;c.ba=-0;c.ca=-n;c.ea=-r;c.fa=-0;c.ga=-t;d=this.Pb[2];a=a.rows[a.Ka++];c=a.Aa;c.va=0;c.wa=0;c.xa=0;c.Ba=0;c.Ca=0;c.Da=0;c.aa=0;c.ba=0;c.ca=0;c.ea=0;c.fa=0;c.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=d;B=a;B.Fa=f*b;B.Ma=h;B.Ia=-1/0;B.Ha=1/0;c=B.Aa;c.va=0;c.wa=0;c.xa=1;c.Ba=0;c.Ca=0;c.Da=1;c.aa=-e;c.ba=-l;c.ca=-0;c.ea=-u;c.fa=-w;c.ga=-0}},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Cj:function(){return this.Ce}});ag.ua=jc;ag.prototype=gb(jc.prototype,{za:function(a,b,e){this.fh(a,b,e);return this}});Mb.prototype={ua:function(a,b){this.frequency=a;this.dampingRatio=b;return this},cb:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new Mb;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a}};yd.prototype={ua:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},cb:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new yd;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a}};$a.ua=V;$a.prototype=gb(V.prototype,{Ud:function(a,b,e){var c=e?1:this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,d,f;d=this.Mj*c;f=this.Df*c;var h=this.Ef*c,l=this.Pl*c,g,k,m,n,q,p,r,t,u,w,B,v,C,D,A,E,z,L;g=0;k=-this.Ub;m=this.Tb;n=this.Ub;q=0;p=-this.Sb;r=-this.Tb;t=this.Sb;w=u=0;B=-this.Xb;v=this.Wb;C=this.Xb;D=0;A=-this.Vb;E=-this.Wb;z=this.Vb;L=0;g=-g;k=-k;m=-m;n=-n;q=-q;p=-p;r=-r;t=-t;u=-u;w=-w;B=-B;v=-v;C=-C;D=-D;A=-A;E=-E;z=-z;L=-L;var I=this.fg,J=this.gg,P=this.hg,V=(this.C.P*I+this.C.R*J+this.C.S*P)*I+(this.C.T*I+this.C.U*J+this.C.V*P)*J+(this.C.W*I+this.C.X*J+this.C.Y*P)*P,xa=(this.D.P*I+this.D.R*J+this.D.S*P)*I+(this.D.T*I+this.D.U*J+this.D.V*P)*J+(this.D.W*I+this.D.X*J+this.D.Y*P)*P;if(0<V){var da=I*this.Sb+J*this.Tb+P*this.Ub,Ga=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-da*da;0<Ga&&(V=0<this.C.$a?1/(1/V+this.C.Pc*Ga):0)}if(0<xa){var Ja=I*this.Vb+J*this.Wb+P*this.Xb,xb=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-Ja*Ja;0<xb&&(xa=0<this.D.$a?1/(1/xa+this.D.Pc*xb):0)}var Ka=V+xa?1/(V+xa):0,Da=this.ig,ma=this.jg,Q=this.kg,Na=(this.C.P*Da+this.C.R*ma+this.C.S*Q)*Da+(this.C.T*Da+this.C.U*ma+this.C.V*Q)*ma+(this.C.W*Da+this.C.X*ma+this.C.Y*Q)*Q,Ha=(this.D.P*Da+this.D.R*ma+this.D.S*Q)*Da+(this.D.T*Da+this.D.U*ma+this.D.V*Q)*ma+(this.D.W*Da+this.D.X*ma+this.D.Y*Q)*Q;if(0<Na){var Ea=Da*this.Sb+ma*this.Tb+Q*this.Ub,Ua=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-Ea*Ea;0<Ua&&(Na=0<this.C.$a?1/(1/Na+this.C.Pc*Ua):0)}if(0<Ha){var ua=Da*this.Vb+ma*this.Wb+Q*this.Xb,oa=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-ua*ua;0<oa&&(Ha=0<this.D.$a?1/(1/Ha+this.D.Pc*oa):0)}var Wa=Na+Ha?1/(Na+Ha):0,G=this.Pb[0],Qa=a.rows[a.Ka++],X=Qa.Aa;X.va=0;X.wa=0;X.xa=0;X.Ba=0;X.Ca=0;X.Da=0;X.aa=0;X.ba=0;X.ca=0;X.ea=0;X.fa=0;X.ga=0;Qa.Fa=0;Qa.Ma=0;Qa.Ia=0;Qa.Ha=0;Qa.motorSpeed=0;Qa.fb=0;Qa.ta=G;var M=Qa;M.Fa=d;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;var N=M.Aa;N.va=1;N.wa=0;N.xa=0;N.Ba=1;N.Ca=0;N.Da=0;N.aa=g;N.ba=k;N.ca=m;N.ea=w;N.fa=B;N.ga=v;var ca=this.Pb[1],Y=a.rows[a.Ka++],S=Y.Aa;S.va=0;S.wa=0;S.xa=0;S.Ba=0;S.Ca=0;S.Da=0;S.aa=0;S.ba=0;S.ca=0;S.ea=0;S.fa=0;S.ga=0;Y.Fa=0;Y.Ma=0;Y.Ia=0;Y.Ha=0;Y.motorSpeed=0;Y.fb=0;Y.ta=ca;M=Y;M.Fa=f;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;N=M.Aa;N.va=0;N.wa=1;N.xa=0;N.Ba=0;N.Ca=1;N.Da=0;N.aa=n;N.ba=q;N.ca=p;N.ea=C;N.fa=D;N.ga=A;var aa=this.Pb[2],y=a.rows[a.Ka++],fa=y.Aa;fa.va=0;fa.wa=0;fa.xa=0;fa.Ba=0;fa.Ca=0;fa.Da=0;fa.aa=0;fa.ba=0;fa.ca=0;fa.ea=0;fa.fa=0;fa.ga=0;y.Fa=0;y.Ma=0;y.Ia=0;y.Ha=0;y.motorSpeed=0;y.fb=0;y.ta=aa;M=y;M.Fa=h;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;N=M.Aa;N.va=0;N.wa=0;N.xa=1;N.Ba=0;N.Ca=0;N.Da=1;N.aa=r;N.ba=t;N.ca=u;N.ea=E;N.fa=z;N.ga=L;if(!this.Im&&(0>=this.Yk.frequency||!e)){var T=this.Pb[3],pa=a.rows[a.Ka++],sa=pa.Aa;sa.va=0;sa.wa=0;sa.xa=0;sa.Ba=0;sa.Ca=0;sa.Da=0;sa.aa=0;sa.ba=0;sa.ca=0;sa.ea=0;sa.fa=0;sa.ga=0;pa.Fa=0;pa.Ma=0;pa.Ia=0;pa.Ha=0;pa.motorSpeed=0;pa.fb=0;pa.ta=T;var M=pa,va=this.Ni,ra=this.Qk,ka=this.Yk,Z,na,Aa=F.angularSlop;if(e)Z=0,na=1;else{if(0<ka.frequency){var Aa=0,ya=6.28318530717958*ka.frequency,K=ka.dampingRatio;K<F.minSpringDamperDampingRatio&&(K=F.minSpringDamperDampingRatio);var Ba=b.dt,ha=2*K*ya,ba=ya*ya;ka.useSymplecticEuler?(Z=1/(Ba*ha),na=ba/ha):(Z=1/(Ba*(Ba*ba+ha)),na=ba/(Ba*ba+ha))}else Z=0,na=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<ra.motorTorque?(M.motorSpeed=ra.motorSpeed,M.fb=ra.motorTorque*b.dt):(M.motorSpeed=0,M.fb=0)}var Va=ra.lowerLimit,ga=ra.upperLimit,O=.5*(Va+ga),va=va-O,va=((va+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,va=va+O,za,ob,ja;Va>ga?ja=ob=za=0:Va==ga?(za=-1/0,ob=1/0,ja=va-Va):va<Va?(za=-1/0,ob=0,ja=va-Va+Aa,0<ja&&(ja=0)):va>ga?(za=0,ob=1/0,ja=va-ga-Aa,0>ja&&(ja=0)):ja=ob=za=0;var Za=Ka?1/Ka:0;M.Ia=za;M.Ha=ob;M.Ma=Z*Za;M.Fa=ja*na;N=M.Aa;N.aa=this.fg;N.ba=this.gg;N.ca=this.hg;N.ea=this.fg;N.fa=this.gg;N.ga=this.hg}if(!this.Jm){var ab=this.Pb[4],fb=a.rows[a.Ka++],Db=fb.Aa;Db.va=0;Db.wa=0;Db.xa=0;Db.Ba=0;Db.Ca=0;Db.Da=0;Db.aa=0;Db.ba=0;Db.ca=0;Db.ea=0;Db.fa=0;Db.ga=0;fb.Fa=0;fb.Ma=0;fb.Ia=0;fb.Ha=0;fb.motorSpeed=0;fb.fb=0;fb.ta=ab;M=fb;M.Fa=l;M.Ma=0;M.Ia=-1/0;M.Ha=1/0;N=M.Aa;N.aa=this.Yg;N.ba=this.Zg;N.ca=this.$g;N.ea=this.Yg;N.fa=this.Zg;N.ga=this.$g}if(!this.Km&&(0>=this.Zk.frequency||!e)){var ta=this.Pb[5],wa=a.rows[a.Ka++],Fa=wa.Aa;Fa.va=0;Fa.wa=0;Fa.xa=0;Fa.Ba=0;Fa.Ca=0;Fa.Da=0;Fa.aa=0;Fa.ba=0;Fa.ca=0;Fa.ea=0;Fa.fa=0;Fa.ga=0;wa.Fa=0;wa.Ma=0;wa.Ia=0;wa.Ha=0;wa.motorSpeed=0;wa.fb=0;wa.ta=ta;var M=wa,eb=this.Oi,Ia=this.Rk,pb=this.Zk,Oa,la,Ca=F.angularSlop;if(e)Oa=0,la=1;else{if(0<pb.frequency){var Ca=0,Xa=6.28318530717958*pb.frequency,Ra=pb.dampingRatio;Ra<F.minSpringDamperDampingRatio&&(Ra=F.minSpringDamperDampingRatio);var hb=b.dt,Sa=2*Ra*Xa,cb=Xa*Xa;pb.useSymplecticEuler?(Oa=1/(hb*Sa),la=cb/Sa):(Oa=1/(hb*(hb*cb+Sa)),la=cb/(hb*cb+Sa))}else Oa=0,la=this.Hc==Xb.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Ia.motorTorque?(M.motorSpeed=Ia.motorSpeed,M.fb=Ia.motorTorque*b.dt):(M.motorSpeed=0,M.fb=0)}var ub=Ia.lowerLimit,jb=Ia.upperLimit,mb=.5*(ub+jb),eb=eb-mb,eb=((eb+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,eb=eb+mb,$a,gb,Ya;ub>jb?Ya=gb=$a=0:ub==jb?($a=-1/0,gb=1/0,Ya=eb-ub):eb<ub?($a=-1/0,gb=0,Ya=eb-ub+Ca,0<Ya&&(Ya=0)):eb>jb?($a=0,gb=1/0,Ya=eb-jb-Ca,0>Ya&&(Ya=0)):Ya=gb=$a=0;var La=Wa?1/Wa:0;M.Ia=$a;M.Ha=gb;M.Ma=Oa*La;M.Fa=Ya*la;N=M.Aa;N.aa=this.ig;N.ba=this.jg;N.ca=this.kg;N.ea=this.ig;N.fa=this.jg;N.ga=this.kg}},hd:function(){V.prototype.hd.call(this);var a,b,e,c,d,f,h,l,g;a=this.vb;b=this.wb;e=this.xb;h=this.ah;l=this.bh;g=this.dh;c=l*e-g*b;d=g*a-h*e;f=h*b-l*a;this.fg=d*g-f*l;this.gg=f*h-c*g;this.hg=c*l-d*h;this.Yg=c;this.Zg=d;this.$g=f;this.ig=b*f-e*d;this.jg=e*c-a*f;this.kg=a*d-b*c;a=this.fg*this.fg+this.gg*this.gg+this.hg*this.hg;0<a&&(a=1/Math.sqrt(a));this.fg*=a;this.gg*=a;this.hg*=a;a=this.Yg*this.Yg+this.Zg*this.Zg+this.$g*this.$g;0<a&&(a=1/Math.sqrt(a));this.Yg*=a;this.Zg*=a;this.$g*=a;a=this.ig*this.ig+this.jg*this.jg+this.kg*this.kg;0<a&&(a=1/Math.sqrt(a));this.ig*=a;this.jg*=a;this.kg*=a;this.Im=!(this.fg*this.fg+this.gg*this.gg+this.hg*this.hg);this.Jm=!(this.Yg*this.Yg+this.Zg*this.Zg+this.$g*this.$g);this.Km=!(this.ig*this.ig+this.jg*this.jg+this.kg*this.kg);var k,m,n,q,p,r,t,u,w;k=this.vb;a=this.He;b=this.Hh;m=this.wb;e=this.Ie;c=this.Ih;n=this.xb;d=this.Je;f=this.Jh;q=this.bc;p=this.ve;h=this.ah;r=this.cc;t=this.we;l=this.bh;u=this.dc;w=this.xe;g=this.dh;var B,v,C;B=k*h+m*l+n*g;v=a*p+e*t+d*w;C=b*p+c*t+f*w;-1>=B?(e=Math.atan2(C,v),a=.5*e,b=-1.570796326794895,e=.5*-e):1<=B?(e=Math.atan2(C,v),a=.5*e,b=1.570796326794895,e*=.5):(B=Math.asin(B),k=Math.atan2(-(k*p+m*t+n*w),k*q+m*r+n*u),a=Math.atan2(-(a*h+e*l+d*g),b*h+c*l+f*g),b=B,e=k);this.Ni=a;this.Pl=b;this.Oi=e;this.Mj=this.Rf-this.Of;this.Df=this.Sf-this.Pf;this.Ef=this.Tf-this.Qf},$d:function(a,b){V.prototype.$d.call(this,a,b);this.Ud(b,a,!1)},gd:function(a){V.prototype.gd.call(this,a);this.Ud(a,null,!0)},Eg:function(){var a=new u;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Gg:function(){var a=new u;a.x=this.ah;a.y=this.bh;a.z=this.dh;return a},Fg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Hg:function(a){a.x=this.ah;a.y=this.bh;a.z=this.dh},Ig:function(){var a=new u;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Kg:function(){var a=new u;a.x=this.Mc;a.y=this.Nc;a.z=this.Oc;return a},Jg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Lg:function(a){a.x=this.Mc;a.y=this.Nc;a.z=this.Oc},zn:function(){return this.Yk},An:function(){return this.Zk},vn:function(){return this.Qk},wn:function(){return this.Rk},qn:function(){return this.Ni},rn:function(){return this.Oi}});rf.ua=jc;rf.prototype=gb(jc.prototype,{za:function(a,b,e,c,d){this.fh(a,b,e);var f,h,l;f=c.x;h=c.y;l=c.z;c=a.a.o*f+a.a.i*h+a.a.l*l;e=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;f=this.localAxis1;f.x=c;f.y=e;f.z=a;c=d.x;e=d.y;f=d.z;d=b.a.o*c+b.a.i*e+b.a.l*f;a=b.a.f*c+b.a.m*e+b.a.g*f;b=b.a.h*c+b.a.j*e+b.a.s*f;c=this.localAxis2;c.x=d;c.y=a;c.z=b;return this}});vl.prototype={za:function(a){this.Sc=a.Sc;for(var b=0,e=this.Sc;b<e;){var c=b++;this.uh[c]=a.uh[c];this.zh[c]=a.zh[c]}this.ie=a.ie;b=0;for(e=this.ie;b<e;)c=b++,this.Mg[c]=a.Mg[c]},kl:function(a,b,e,c,d,f,h){for(var l=0,g=this.ie;l<g;){var k=l++,k=this.Mg[k],m=a.rows[k];this.il[k]=m.Fa*f-e[k]-m.Ma*c[k]}l=b.cj;g=0;for(k=this.Sc;g<k;){var n=g++,m=this.uh[n],n=this.zh[n],q=a.rows[m],n=(0>n?q.Ia:0<n?q.Ha:0)-c[m];if(d[m]=n)for(var q=0,p=this.ie;q<p;){var r=q++,t=r=this.Mg[r],u=this.il;u[t]-=l[m][r]*n}}g=this.Mg;k=this.ie;for(n=m=0;n<k;)q=n++,m|=1<<g[q];b.Sj[m]||(b.ln(m,g,k),b.Sj[m]=!0);g=b.Ck[m];b=!0;k=0;for(m=this.ie;k<m;){for(var n=k++,q=this.Mg[n],p=a.rows[q],t=r=c[q],u=0,w=this.ie;u<w;)var B=u++,t=t+this.il[this.Mg[B]]*g[n][B];if(t<p.Ia-F.directMlcpSolverEps||t>p.Ha+F.directMlcpSolverEps){b=!1;break}d[q]=t-r}if(h)return!0;if(!b)return!1;h=0;for(g=this.Sc;h<g;){n=h++;k=this.uh[n];m=a.rows[k];n=this.zh[n];q=c[k]+d[k];p=e[k];r=0;for(t=a.Ka;r<t;)u=r++,p+=l[k][u]*d[u];k=m.Fa*f-p-m.Ma*q;if(0>n&&k>F.directMlcpSolverEps||0<n&&k<-F.directMlcpSolverEps){b=!1;break}}return b}};ul.prototype={Uh:function(a,b){if(b==a.Ka)null==this.Th[this.jf]&&(this.Th[this.jf]=new vl(this.On)),this.Th[this.jf++].za(this.cf);else{var e=a.rows[b],c=e.Ia>-1/0,d=e.Ha<1/0;0==e.Ia&&0==e.Ha?(d=this.cf,d.uh[d.Sc]=b,d.zh[d.Sc]=0,d.Sc++,this.Uh(a,b+1),this.cf.Sc--):(e=this.cf,e.Mg[e.ie]=b,e.ie++,this.Uh(a,b+1),this.cf.ie--,c&&(c=this.cf,c.uh[c.Sc]=b,c.zh[c.Sc]=-1,c.Sc++,this.Uh(a,b+1),this.cf.Sc--),d&&(d=this.cf,d.uh[d.Sc]=b,d.zh[d.Sc]=1,d.Sc++,this.Uh(a,b+1),this.cf.Sc--))}}};dl.prototype={};uc.ua=Ib;uc.prototype=gb(Ib.prototype,{xh:function(a){this.$.hd();this.$.$d(a,this.info);this.C=this.info.Qe;this.D=this.info.Re;this.ei.ll(this.info,this.ac);a=this.Se;a.jf=0;var b=a.cf;b.Sc=0;b.ie=0;a.Uh(this.info,0);a=this.Ml;for(var b=this.Se.jf,e=0,c=0,d=0,f=a.n;d<f;){var h=d++,h=a.sc[h];h<b?(a.kf[e]=h,++e):(a.kf[b+c]=h,++c)}b=a.sc;a.sc=a.kf;a.kf=b},Gh:function(a){var b=this.$.Hc==Xb.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ta;e.ta=0;e.ad=0;e.ub=0}else{a=0;for(e=this.info.Ka;a<e;){var c=a++,d=this.info.rows[c],f=d.ta,h=f.ta*b;h<d.Ia?h=d.Ia:h>d.Ha&&(h=d.Ha);f.ta=h;0<d.fb?(h=f.ad*b,d=d.fb,h<-d?h=-d:h>d&&(h=d),f.ad=h):f.ad=0;this.Cf[c]=f.ta+f.ad}var b=this.Cf,e=a=!1,l,g,k,m,n,q,p,r,c=this.C.gb,f=this.C.hb,d=this.C.ib,h=this.D.gb;l=this.D.hb;g=this.D.ib;k=this.C.kb;m=this.C.lb;n=this.C.mb;q=this.D.kb;p=this.D.lb;r=this.D.mb;for(var t=0,u=this.info.Ka;t<u;){var w=t++,B=this.info.rows[w].Aa,v=this.ac[w],w=b[w];B.xc&1&&(c+=v.qd*w,f+=v.rd*w,d+=v.sd*w,h+=v.td*-w,l+=v.ud*-w,g+=v.vd*-w,a=!0);B.xc&2&&(k+=v.kd*w,m+=v.ld*w,n+=v.md*w,q+=v.nd*-w,p+=v.od*-w,r+=v.pd*-w,e=!0)}a&&(this.C.gb=c,this.C.hb=f,this.C.ib=d,this.D.gb=h,this.D.hb=l,this.D.ib=g);e&&(this.C.kb=k,this.C.lb=m,this.C.mb=n,this.D.kb=q,this.D.lb=p,this.D.mb=r)}},Ch:function(){var a=this.info.Ka,b,e,c,d,f,h,l,g,k,m,n,q;b=this.C.gb;e=this.C.hb;c=this.C.ib;d=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0;p<a;){var r=p++,t=this.info.rows[r],u=t.ta,t=t.Aa,w=0,w=w+(b*t.va+e*t.wa+c*t.xa),w=w-(d*t.Ba+f*t.Ca+h*t.Da),w=w+(l*t.aa+g*t.ba+k*t.ca),w=w-(m*t.ea+n*t.fa+q*t.ga);this.Qg[r]=w;this.Yh[r]=u.ta;this.Aj[r]=0}b=this.ei.cj;for(e=0;e<a;)if(c=e++,h=this.info.rows[c],d=h.ta,l=this.ac[c],0<h.fb)for(f=d.ad,h=f+l.Ff*(-h.motorSpeed-this.Qg[c]),l=d.ad,h<-l?h=-l:h>l&&(h=l),d.ad=h,d=h-f,this.Aj[c]=d,f=0,h=a;f<h;)g=l=f++,k=this.Qg,k[g]+=d*b[c][l];e=!1;c=0;for(d=this.Se.jf;c<d;)if(b=c++,b=this.Ml.sc[b],this.Se.Th[b].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,1,!1)){for(e=0;e<a;)d=e++,c=this.Cf[d],this.info.rows[d].ta.ta+=c,f=this.Aj,f[d]+=c;a=this.Aj;c=e=!1;d=this.C.gb;f=this.C.hb;h=this.C.ib;l=this.D.gb;g=this.D.hb;k=this.D.ib;m=this.C.kb;n=this.C.lb;q=this.C.mb;p=this.D.kb;r=this.D.lb;u=this.D.mb;t=0;for(w=this.info.Ka;t<w;){var B=t++,v=this.info.rows[B].Aa,C=this.ac[B],B=a[B];v.xc&1&&(d+=C.qd*B,f+=C.rd*B,h+=C.sd*B,l+=C.td*-B,g+=C.ud*-B,k+=C.vd*-B,e=!0);v.xc&2&&(m+=C.kd*B,n+=C.ld*B,q+=C.md*B,p+=C.nd*-B,r+=C.od*-B,u+=C.pd*-B,c=!0)}e&&(this.C.gb=d,this.C.hb=f,this.C.ib=h,this.D.gb=l,this.D.hb=g,this.D.ib=k);c&&(this.C.kb=m,this.C.lb=n,this.C.mb=q,this.D.kb=p,this.D.lb=r,this.D.mb=u);a=this.Ml;for(e=0;a.sc[e]!=b;)++e;for(;0<e;)b=a.sc[e],a.sc[e]=a.sc[e-1],a.sc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},Li:function(a){for(var b,e,c,d,f,h,l=h=f=d=c=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ta,m=m.Aa;m.xc&1?(b+=m.va*k.ta,e+=m.wa*k.ta,c+=m.xa*k.ta):m.xc&2&&(d+=m.aa*k.ta,f+=m.ba*k.ta,h+=m.ca*k.ta)}this.$.Pi=b*a.invDt;this.$.Qi=e*a.invDt;this.$.Ri=c*a.invDt;this.$.Si=d*a.invDt;this.$.Ti=f*a.invDt;this.$.Ui=h*a.invDt},Pg:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;this.ei.ll(this.info,this.ac);var a=this.Se;a.jf=0;var b=a.cf;b.Sc=0;b.ie=0;a.Uh(this.info,0);for(var a=this.Ki,b=this.Se.jf,e=0,c=0,d=0,f=a.n;d<f;){var h=d++,h=a.sc[h];h<b?(a.kf[e]=h,++e):(a.kf[b+c]=h,++c)}b=a.sc;a.sc=a.kf;a.kf=b;a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},Bh:function(){var a=this.info.Ka,b,e,c,d,f,h,l,g,k,m,n,q;b=this.C.Yc;e=this.C.Zc;c=this.C.$c;d=this.D.Yc;f=this.D.Zc;h=this.D.$c;l=this.C.Uc;g=this.C.Vc;k=this.C.Wc;m=this.D.Uc;n=this.D.Vc;q=this.D.Wc;for(var p=0;p<a;){var r=p++,t=this.info.rows[r],u=t.ta,t=t.Aa,w=0,w=w+(b*t.va+e*t.wa+c*t.xa),w=w-(d*t.Ba+f*t.Ca+h*t.Da),w=w+(l*t.aa+g*t.ba+k*t.ca),w=w-(m*t.ea+n*t.fa+q*t.ga);this.Qg[r]=w;this.Yh[r]=u.ub}e=!1;c=0;for(d=this.Se.jf;c<d;)if(b=c++,b=this.Ki.sc[b],this.Se.Th[b].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,F.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)c=e++,this.info.rows[c].ta.ub+=this.Cf[c];a=this.Cf;c=e=!1;d=this.C.Yc;f=this.C.Zc;h=this.C.$c;l=this.D.Yc;g=this.D.Zc;k=this.D.$c;m=this.C.Uc;n=this.C.Vc;q=this.C.Wc;p=this.D.Uc;r=this.D.Vc;u=this.D.Wc;t=0;for(w=this.info.Ka;t<w;){var B=t++,v=this.info.rows[B].Aa,C=this.ac[B],B=a[B];v.xc&1&&(d+=C.qd*B,f+=C.rd*B,h+=C.sd*B,l+=C.td*-B,g+=C.ud*-B,k+=C.vd*-B,e=!0);v.xc&2&&(m+=C.kd*B,n+=C.ld*B,q+=C.md*B,p+=C.nd*-B,r+=C.od*-B,u+=C.pd*-B,c=!0)}e&&(this.C.Yc=d,this.C.Zc=f,this.C.$c=h,this.D.Yc=l,this.D.Zc=g,this.D.$c=k);c&&(this.C.Uc=m,this.C.Vc=n,this.C.Wc=q,this.D.Uc=p,this.D.Vc=r,this.D.Wc=u);a=this.Ki;for(e=0;a.sc[e]!=b;)++e;for(;0<e;)b=a.sc[e],a.sc[e]=a.sc[e-1],a.sc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},Ah:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;this.ei.ll(this.info,this.ac);var a=this.Se;a.jf=0;var b=a.cf;b.Sc=0;b.ie=0;a.Uh(this.info,0);for(var e=this.Ki,c=this.Se.jf,d=0,f=0,h=0,l=e.n;h<l;){var g=h++,k=e.sc[g];k<c?(e.kf[d]=k,++d):(e.kf[c+f]=k,++f)}var m=e.sc;e.sc=e.kf;e.kf=m;for(var n=this.info.Ka,q=0;q<n;){var p=q++,r=this.info.rows[p].ta;this.Qg[p]=0;this.Yh[p]=r.ub}for(var t=!1,u=0,w=this.Se.jf;u<w;){var B=u++,v=this.Ki.sc[B];if(this.Se.Th[v].kl(this.info,this.ei,this.Qg,this.Yh,this.Cf,F.positionNgsBaumgarte,!1)){for(var C=0,D=n;C<D;){var A=C++;this.info.rows[A].ta.ub+=this.Cf[A]}for(var E=this.Cf,z=!1,L=!1,I,J,P,V,xa,da,Ga,Ja,Na,Ka,Da,ma,Q=ma=Da=Ka=Na=Ja=Ga=da=xa=V=P=J=I=0,Sa=this.info.Ka;Q<Sa;){var Ha=Q++,Ea=this.info.rows[Ha].Aa,Ua=this.ac[Ha],ua=E[Ha];Ea.xc&1&&(I+=Ua.qd*ua,J+=Ua.rd*ua,P+=Ua.sd*ua,V+=Ua.td*-ua,xa+=Ua.ud*-ua,da+=Ua.vd*-ua,z=!0);Ea.xc&2&&(Ga+=Ua.kd*ua,Ja+=Ua.ld*ua,Na+=Ua.md*ua,Ka+=Ua.nd*-ua,Da+=Ua.od*-ua,ma+=Ua.pd*-ua,L=!0)}if(z){var oa=this.C;oa.a.v+=I;oa.a.A+=J;oa.a.B+=P;var Wa=this.D;Wa.a.v+=V;Wa.a.A+=xa;Wa.a.B+=da}if(L){var G=this.C,Qa=Math.sqrt(Ga*Ga+Ja*Ja+Na*Na),X=.5*Qa,M,N;if(.5>X){var ca=X*X;M=.5*(1-.16666666666666666*ca+ca*ca*.008333333333333333);N=1-.5*ca+ca*ca*.041666666666666664}else M=Math.sin(X)/Qa,N=Math.cos(X);var Y,S,aa;Y=Ga*M;S=Ja*M;aa=Na*M;var y,fa,T,pa;y=Y;fa=S;T=aa;pa=N;var sa,va,ra,ka,Z=G.a.o,na=G.a.m,Aa=G.a.s,ya=Z+na+Aa,K;0<ya?(K=Math.sqrt(ya+1),ka=.5*K,K=.5/K,sa=(G.a.g-G.a.j)*K,va=(G.a.h-G.a.l)*K,ra=(G.a.i-G.a.f)*K):Z>na?Z>Aa?(K=Math.sqrt(Z-na-Aa+1),sa=.5*K,K=.5/K,va=(G.a.f+G.a.i)*K,ra=(G.a.h+G.a.l)*K,ka=(G.a.g-G.a.j)*K):(K=Math.sqrt(Aa-Z-na+1),ra=.5*K,K=.5/K,sa=(G.a.h+G.a.l)*K,va=(G.a.j+G.a.g)*K,ka=(G.a.i-G.a.f)*K):na>Aa?(K=Math.sqrt(na-Aa-Z+1),va=.5*K,K=.5/K,sa=(G.a.f+G.a.i)*K,ra=(G.a.j+G.a.g)*K,ka=(G.a.h-G.a.l)*K):(K=Math.sqrt(Aa-Z-na+1),ra=.5*K,K=.5/K,sa=(G.a.h+G.a.l)*K,va=(G.a.j+G.a.g)*K,ka=(G.a.i-G.a.f)*K);sa=pa*sa+y*ka+fa*ra-T*va;va=pa*va-y*ra+fa*ka+T*sa;ra=pa*ra+y*va-fa*sa+T*ka;ka=pa*ka-y*sa-fa*va-T*ra;var Ba=sa*sa+va*va+ra*ra+ka*ka;1E-32<Ba&&(Ba=1/Math.sqrt(Ba));sa*=Ba;va*=Ba;ra*=Ba;ka*=Ba;var ha=sa,ba=va,Va=ra,ga=ka,O=2*ha,za=2*ba,ob=2*Va,ja=ha*O,$a=ba*za,Za=Va*ob,fb=ha*za,ab=ba*ob,ta=ha*ob,wa=ga*O,Fa=ga*za,eb=ga*ob;G.a.o=1-$a-Za;G.a.f=fb-eb;G.a.h=ta+Fa;G.a.i=fb+eb;G.a.m=1-ja-Za;G.a.j=ab-wa;G.a.l=ta-Fa;G.a.g=ab+wa;G.a.s=1-ja-$a;var Ia,pb,Oa,la,Ca,Xa,Ra,hb,gb;Ia=G.a.o*G.Ra+G.a.f*G.Ua+G.a.h*G.Xa;pb=G.a.o*G.Sa+G.a.f*G.Va+G.a.h*G.Ya;Oa=G.a.o*G.Ta+G.a.f*G.Wa+G.a.h*G.Za;la=G.a.i*G.Ra+G.a.m*G.Ua+G.a.j*G.Xa;Ca=G.a.i*G.Sa+G.a.m*G.Va+G.a.j*G.Ya;Xa=G.a.i*G.Ta+G.a.m*G.Wa+G.a.j*G.Za;Ra=G.a.l*G.Ra+G.a.g*G.Ua+G.a.s*G.Xa;hb=G.a.l*G.Sa+G.a.g*G.Va+G.a.s*G.Ya;gb=G.a.l*G.Ta+G.a.g*G.Wa+G.a.s*G.Za;G.P=Ia;G.R=pb;G.S=Oa;G.T=la;G.U=Ca;G.V=Xa;G.W=Ra;G.X=hb;G.Y=gb;var cb,ub,jb,mb,sb,wb,Ya,La,vb;cb=G.P*G.a.o+G.R*G.a.f+G.S*G.a.h;ub=G.P*G.a.i+G.R*G.a.m+G.S*G.a.j;jb=G.P*G.a.l+G.R*G.a.g+G.S*G.a.s;mb=G.T*G.a.o+G.U*G.a.f+G.V*G.a.h;sb=G.T*G.a.i+G.U*G.a.m+G.V*G.a.j;wb=G.T*G.a.l+G.U*G.a.g+G.V*G.a.s;Ya=G.W*G.a.o+G.X*G.a.f+G.Y*G.a.h;La=G.W*G.a.i+G.X*G.a.m+G.Y*G.a.j;vb=G.W*G.a.l+G.X*G.a.g+G.Y*G.a.s;G.P=cb;G.R=ub;G.S=jb;G.T=mb;G.U=sb;G.V=wb;G.W=Ya;G.X=La;G.Y=vb;G.P*=G.N.x;G.R*=G.N.x;G.S*=G.N.x;G.T*=G.N.y;G.U*=G.N.y;G.V*=G.N.y;G.W*=G.N.z;G.X*=G.N.z;G.Y*=G.N.z;var H=this.D,db=Math.sqrt(Ka*Ka+Da*Da+ma*ma),kb=.5*db,zb,lb;if(.5>kb){var tb=kb*kb;zb=.5*(1-.16666666666666666*tb+tb*tb*.008333333333333333);lb=1-.5*tb+tb*tb*.041666666666666664}else zb=Math.sin(kb)/db,lb=Math.cos(kb);var x,W,ea;x=Ka*zb;W=Da*zb;ea=ma*zb;var yb,Hb,Pa,qb;yb=x;Hb=W;Pa=ea;qb=lb;var nb,Ab,Bb,ia,Ta=H.a.o,bb=H.a.m,ib=H.a.s,Cb=Ta+bb+ib,Ma;0<Cb?(Ma=Math.sqrt(Cb+1),ia=.5*Ma,Ma=.5/Ma,nb=(H.a.g-H.a.j)*Ma,Ab=(H.a.h-H.a.l)*Ma,Bb=(H.a.i-H.a.f)*Ma):Ta>bb?Ta>ib?(Ma=Math.sqrt(Ta-bb-ib+1),nb=.5*Ma,Ma=.5/Ma,Ab=(H.a.f+H.a.i)*Ma,Bb=(H.a.h+H.a.l)*Ma,ia=(H.a.g-H.a.j)*Ma):(Ma=Math.sqrt(ib-Ta-bb+1),Bb=.5*Ma,Ma=.5/Ma,nb=(H.a.h+H.a.l)*Ma,Ab=(H.a.j+H.a.g)*Ma,ia=(H.a.i-H.a.f)*Ma):bb>ib?(Ma=Math.sqrt(bb-ib-Ta+1),Ab=.5*Ma,Ma=.5/Ma,nb=(H.a.f+H.a.i)*Ma,Bb=(H.a.j+H.a.g)*Ma,ia=(H.a.h-H.a.l)*Ma):(Ma=Math.sqrt(ib-Ta-bb+1),Bb=.5*Ma,Ma=.5/Ma,nb=(H.a.h+H.a.l)*Ma,Ab=(H.a.j+H.a.g)*Ma,ia=(H.a.i-H.a.f)*Ma);nb=qb*nb+yb*ia+Hb*Bb-Pa*Ab;Ab=qb*Ab-yb*Bb+Hb*ia+Pa*nb;Bb=qb*Bb+yb*Ab-Hb*nb+Pa*ia;ia=qb*ia-yb*nb-Hb*Ab-Pa*Bb;var Eb=nb*nb+Ab*Ab+Bb*Bb+ia*ia;1E-32<Eb&&(Eb=1/Math.sqrt(Eb));nb*=Eb;Ab*=Eb;Bb*=Eb;ia*=Eb;var Pb=nb,qa=Ab,Ib=Bb,Kb=ia,Qb=2*Pb,Mb=2*qa,Sb=2*Ib,Xb=Pb*Qb,Zb=qa*Mb,Vb=Ib*Sb,Wb=Pb*Mb,$b=qa*Sb,ic=Pb*Sb,Tb=Kb*Qb,fc=Kb*Mb,ec=Kb*Sb;H.a.o=1-Zb-Vb;H.a.f=Wb-ec;H.a.h=ic+fc;H.a.i=Wb+ec;H.a.m=1-Xb-Vb;H.a.j=$b-Tb;H.a.l=ic-fc;H.a.g=$b+Tb;H.a.s=1-Xb-Zb;var Nb,bc,Fb,mc,ac,Ob,cc,Ub,Lb;Nb=H.a.o*H.Ra+H.a.f*H.Ua+H.a.h*H.Xa;bc=H.a.o*H.Sa+H.a.f*H.Va+H.a.h*H.Ya;Fb=H.a.o*H.Ta+H.a.f*H.Wa+H.a.h*H.Za;mc=H.a.i*H.Ra+H.a.m*H.Ua+H.a.j*H.Xa;ac=H.a.i*H.Sa+H.a.m*H.Va+H.a.j*H.Ya;Ob=H.a.i*H.Ta+H.a.m*H.Wa+H.a.j*H.Za;cc=H.a.l*H.Ra+H.a.g*H.Ua+H.a.s*H.Xa;Ub=H.a.l*H.Sa+H.a.g*H.Va+H.a.s*H.Ya;Lb=H.a.l*H.Ta+H.a.g*H.Wa+H.a.s*H.Za;H.P=Nb;H.R=bc;H.S=Fb;H.T=mc;H.U=ac;H.V=Ob;H.W=cc;H.X=Ub;H.Y=Lb;var Rb,rb,jc,qc,kc,lc,hc,nc,oc;Rb=H.P*H.a.o+H.R*H.a.f+H.S*H.a.h;rb=H.P*H.a.i+H.R*H.a.m+H.S*H.a.j;jc=H.P*H.a.l+H.R*H.a.g+H.S*H.a.s;qc=H.T*H.a.o+H.U*H.a.f+H.V*H.a.h;kc=H.T*H.a.i+H.U*H.a.m+H.V*H.a.j;lc=H.T*H.a.l+H.U*H.a.g+H.V*H.a.s;hc=H.W*H.a.o+H.X*H.a.f+H.Y*H.a.h;nc=H.W*H.a.i+H.X*H.a.m+H.Y*H.a.j;oc=H.W*H.a.l+H.X*H.a.g+H.Y*H.a.s;H.P=Rb;H.R=rb;H.S=jc;H.T=qc;H.U=kc;H.V=lc;H.W=hc;H.X=nc;H.Y=oc;H.P*=H.N.x;H.R*=H.N.x;H.S*=H.N.x;H.T*=H.N.y;H.U*=H.N.y;H.V*=H.N.y;H.W*=H.N.z;H.X*=H.N.z;H.Y*=H.N.z}for(var gc=this.Ki,dc=0;gc.sc[dc]!=v;)++dc;for(;0<dc;){var rc=gc.sc[dc];gc.sc[dc]=gc.sc[dc-1];gc.sc[dc-1]=rc;--dc}t=!0;break}}t||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},postSolve:function(){this.$.hd();this.$.Rl()}});tl.prototype={ln:function(a,b,e){for(var c=0;c<e;)for(var d=c++,f=b[d],h=0,l=e;h<l;){var g=h++;this.wk[d][g]=this.$a[f][b[g]]}c=this.wk;a=this.Ck[a];var k;switch(e){case 4:d=c[0];b=a[0];e=1/d[0];b[0]=e;d[1]*=e;d[2]*=e;d[3]*=e;g=c[1];k=a[1];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g=c[2];k=a[2];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g=c[3];k=a[3];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];d=c[1];b=a[1];e=1/d[1];b[1]=e;b[0]*=e;d[2]*=e;d[3]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g=c[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g=c[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];d=c[2];b=a[2];e=1/d[2];b[2]=e;b[0]*=e;b[1]*=e;d[3]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=d[3]*g[2];g=c[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=d[3]*g[2];g=c[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];d=c[3];b=a[3];e=1/d[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[3];g=c[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=c[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:d=c[0];b=a[0];e=1/d[0];b[0]=e;d[1]*=e;d[2]*=e;d[3]*=e;d[4]*=e;g=c[1];k=a[1];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g=c[2];k=a[2];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g=c[3];k=a[3];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g=c[4];k=a[4];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];d=c[1];b=a[1];e=1/d[1];b[1]=e;b[0]*=e;d[2]*=e;d[3]*=e;d[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g=c[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g=c[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g=c[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];d=c[2];b=a[2];e=1/d[2];b[2]=e;b[0]*=e;b[1]*=e;d[3]*=e;d[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g=c[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g=c[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g=c[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];d=c[3];b=a[3];e=1/d[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;d[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=d[4]*g[3];g=c[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=d[4]*g[3];g=c[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=d[4]*g[3];g=c[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=d[4]*g[3];d=c[4];b=a[4];e=1/d[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[4];g=c[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=c[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=c[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:d=c[0];b=a[0];e=1/d[0];b[0]=e;d[1]*=e;d[2]*=e;d[3]*=e;d[4]*=e;d[5]*=e;g=c[1];k=a[1];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[2];k=a[2];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[3];k=a[3];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[4];k=a[4];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];g=c[5];k=a[5];k[0]=-e*g[0];g[1]-=d[1]*g[0];g[2]-=d[2]*g[0];g[3]-=d[3]*g[0];g[4]-=d[4]*g[0];g[5]-=d[5]*g[0];d=c[1];b=a[1];e=1/d[1];b[1]=e;b[0]*=e;d[2]*=e;d[3]*=e;d[4]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];g=c[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=d[2]*g[1];g[3]-=d[3]*g[1];g[4]-=d[4]*g[1];g[5]-=d[5]*g[1];d=c[2];b=a[2];e=1/d[2];b[2]=e;b[0]*=e;b[1]*=e;d[3]*=e;d[4]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];g=c[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=d[3]*g[2];g[4]-=d[4]*g[2];g[5]-=d[5]*g[2];d=c[3];b=a[3];e=1/d[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;d[4]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];g=c[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=d[4]*g[3];g[5]-=d[5]*g[3];d=c[4];b=a[4];e=1/d[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;d[5]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=d[5]*g[4];g=c[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=d[5]*g[4];g=c[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=d[5]*g[4];g=c[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=d[5]*g[4];g=c[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=d[5]*g[4];d=c[5];b=a[5];e=1/d[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=c[0];k=a[0];k[0]-=b[0]*g[5];g=c[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=c[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=c[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=c[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;d=c[h];b=a[h];l=1/d[h];b[h]=l;g=0;for(k=h;g<k;){var m=g++;b[m]*=l}g=h+1;for(k=e;g<k;)m=g++,d[m]*=l;for(var m=0,n=h;m<n;){var q=m++,g=c[q];k=a[q];for(var p=0,q=q+1;p<q;){var r=p++;k[r]-=b[r]*g[h]}k=h+1;for(p=e;k<p;)q=k++,g[q]-=d[q]*g[h]}m=h+1;for(n=e;m<n;){k=m++;g=c[k];k=a[k];p=0;for(q=h;p<q;)r=p++,k[r]-=b[r]*g[h];k[h]=-l*g[h];k=h+1;for(p=e;k<p;)q=k++,g[q]-=d[q]*g[h]}}for(c=1;c<e;)for(d=c++,b=a[d],f=0,h=d;f<h;)l=f++,a[l][d]=b[l]}},ll:function(a,b){var e=this.$a,c=this.cj,d=a.Ka,f=a.Qe,h=a.Re,l=f.$a,g=h.$a,k,m,n,q,p,r,t,u,w,B,v,C,D,A,E,z;k=f.P;m=f.R;n=f.S;q=f.T;p=f.U;r=f.V;t=f.W;u=f.X;f=f.Y;w=h.P;B=h.R;v=h.S;C=h.T;D=h.U;A=h.V;E=h.W;z=h.X;for(var h=h.Y,F=0;F<d;){var I=F++,J=a.rows[I].Aa,I=b[I];J.Hm();J.xc&1?(I.qd=J.va*l,I.rd=J.wa*l,I.sd=J.xa*l,I.td=J.Ba*g,I.ud=J.Ca*g,I.vd=J.Da*g):(I.qd=0,I.rd=0,I.sd=0,I.td=0,I.ud=0,I.vd=0);if(J.xc&2){var L,P,V;L=k*J.aa+m*J.ba+n*J.ca;P=q*J.aa+p*J.ba+r*J.ca;V=t*J.aa+u*J.ba+f*J.ca;I.kd=L;I.ld=P;I.md=V;L=w*J.ea+B*J.fa+v*J.ga;P=C*J.ea+D*J.fa+A*J.ga;J=E*J.ea+z*J.fa+h*J.ga;I.nd=L;I.od=P;I.pd=J}else I.kd=0,I.ld=0,I.md=0,I.nd=0,I.od=0,I.pd=0}for(l=0;l<d;)for(g=l++,k=a.rows[g].Aa,m=g,n=d;m<n;)q=m++,p=b[q],r=k.va*p.qd+k.wa*p.rd+k.xa*p.sd+(k.aa*p.kd+k.ba*p.ld+k.ca*p.md)+(k.Ba*p.td+k.Ca*p.ud+k.Da*p.vd)+(k.ea*p.nd+k.fa*p.od+k.ga*p.pd),g==q?(e[g][q]=r+a.rows[g].Ma,c[g][q]=r,p.mass=r+a.rows[g].Ma,p.Ff=r,0!=p.mass&&(p.mass=1/p.mass),p.Ff&&(p.Ff=1/p.Ff)):(e[g][q]=r,e[q][g]=r,c[g][q]=r,c[q][g]=r);a=0;for(b=this.ak;a<b;)e=a++,this.Sj[e]=!1}};ic.ua=Ib;ic.prototype=gb(Ib.prototype,{xh:function(a){this.Ji.$d(a,this.info);this.C=this.info.Qe;this.D=this.info.Re;a=this.C.$a;var b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;u=this.D.V;w=this.D.W;B=this.D.X;v=this.D.Y;for(var C=0,D=this.info.Ka;C<D;){var A=C++,E=this.info.rows[A],A=this.ac[A],z=E.Ng;A.Zh=z.va*a;A.$h=z.wa*a;A.ai=z.xa*a;A.bi=z.Ba*b;A.ci=z.Ca*b;A.di=z.Da*b;var F,I,J;F=e*z.aa+c*z.ba+d*z.ca;I=f*z.aa+h*z.ba+l*z.ca;J=g*z.aa+k*z.ba+m*z.ca;A.Xf=F;A.Yf=I;A.Zf=J;F=n*z.ea+q*z.fa+p*z.ga;I=r*z.ea+t*z.fa+u*z.ga;J=w*z.ea+B*z.fa+v*z.ga;A.$f=F;A.ag=I;A.bg=J;A.he=a+b+(A.Xf*z.aa+A.Yf*z.ba+A.Zf*z.ca)+(A.$f*z.ea+A.ag*z.fa+A.bg*z.ga);0!=A.he&&(A.he=1/A.he);z=E.Lj;E=E.Kj;A.yl=z.va*a;A.zl=z.wa*a;A.Al=z.xa*a;A.Bl=z.Ba*b;A.Cl=z.Ca*b;A.Dl=z.Da*b;A.sl=E.va*a;A.tl=E.wa*a;A.ul=E.xa*a;A.vl=E.Ba*b;A.wl=E.Ca*b;A.xl=E.Da*b;F=e*z.aa+c*z.ba+d*z.ca;I=f*z.aa+h*z.ba+l*z.ca;J=g*z.aa+k*z.ba+m*z.ca;A.Ej=F;A.Fj=I;A.Gj=J;F=n*z.ea+q*z.fa+p*z.ga;I=r*z.ea+t*z.fa+u*z.ga;J=w*z.ea+B*z.fa+v*z.ga;A.Hj=F;A.Ij=I;A.Jj=J;F=e*E.aa+c*E.ba+d*E.ca;I=f*E.aa+h*E.ba+l*E.ca;J=g*E.aa+k*E.ba+m*E.ca;A.lk=F;A.mk=I;A.nk=J;F=n*E.ea+q*E.fa+p*E.ga;I=r*E.ea+t*E.fa+u*E.ga;J=w*E.ea+B*E.fa+v*E.ga;A.pk=F;A.qk=I;A.rk=J;z=a+b+(A.Ej*z.aa+A.Fj*z.ba+A.Gj*z.ca)+(A.Hj*z.ea+A.Ij*z.fa+A.Jj*z.ga);I=F=A.Ej*E.aa+A.Fj*E.ba+A.Gj*E.ca+(A.Hj*E.ea+A.Ij*E.fa+A.Jj*E.ga);E=a+b+(A.lk*E.aa+A.mk*E.ba+A.nk*E.ca)+(A.pk*E.ea+A.qk*E.fa+A.rk*E.ga);(J=z*E-F*I)&&(J=1/J);A.ym=E*J;A.zm=-F*J;A.Am=-I*J;A.Bm=z*J}},Gh:function(a){var b,e,c,d,f,h,l,g,k,m,n,q;b=this.C.gb;e=this.C.hb;c=this.C.ib;d=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0,r=this.info.Ka;p<r;){var t=p++,u=this.info.rows[t],w=u.ta,t=this.ac[t],B=u.Lj,v=u.Kj,u=w.bd,B=w.df*B.va+w.ef*B.wa+w.ff*B.xa,v=w.df*v.va+w.ef*v.wa+w.ff*v.xa;w.zc=B;w.yc=v;w.bd*=a.dtRatio;w.zc*=a.dtRatio;w.yc*=a.dtRatio;b+=t.Zh*u;e+=t.$h*u;c+=t.ai*u;b+=t.yl*B;e+=t.zl*B;c+=t.Al*B;b+=t.sl*v;e+=t.tl*v;c+=t.ul*v;d+=t.bi*-u;f+=t.ci*-u;h+=t.di*-u;d+=t.Bl*-B;f+=t.Cl*-B;h+=t.Dl*-B;d+=t.vl*-v;f+=t.wl*-v;h+=t.xl*-v;l+=t.Xf*u;g+=t.Yf*u;k+=t.Zf*u;l+=t.Ej*B;g+=t.Fj*B;k+=t.Gj*B;l+=t.lk*v;g+=t.mk*v;k+=t.nk*v;m+=t.$f*-u;n+=t.ag*-u;q+=t.bg*-u;m+=t.Hj*-B;n+=t.Ij*-B;q+=t.Jj*-B;m+=t.pk*-v;n+=t.qk*-v;q+=t.rk*-v}this.C.gb=b;this.C.hb=e;this.C.ib=c;this.D.gb=d;this.D.hb=f;this.D.ib=h;this.C.kb=l;this.C.lb=g;this.C.mb=k;this.D.kb=m;this.D.lb=n;this.D.mb=q},Ch:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.gb;b=this.C.hb;e=this.C.ib;c=this.D.gb;d=this.D.hb;f=this.D.ib;h=this.C.kb;l=this.C.lb;g=this.C.mb;k=this.D.kb;m=this.D.lb;n=this.D.mb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,t=this.info.rows[r],r=this.ac[r],u=t.ta,w=0,B=t.Lj,w=w+(a*B.va+b*B.wa+e*B.xa),w=w-(c*B.Ba+d*B.Ca+f*B.Da),w=w+(h*B.aa+l*B.ba+g*B.ca),w=w-(k*B.ea+m*B.fa+n*B.ga),v=0,B=t.Kj,v=v+(a*B.va+b*B.wa+e*B.xa),v=v-(c*B.Ba+d*B.Ca+f*B.Da),v=v+(h*B.aa+l*B.ba+g*B.ca),v=v-(k*B.ea+m*B.fa+n*B.ga),B=-(w*r.ym+v*r.zm),C=-(w*r.Am+v*r.Bm),w=u.zc,v=u.yc;u.zc+=B;u.yc+=C;(t=t.friction*u.bd)?(B=u.zc*u.zc+u.yc*u.yc,B>t*t&&(t/=Math.sqrt(B),u.zc*=t,u.yc*=t)):(u.zc=0,u.yc=0);B=u.zc-w;C=u.yc-v;a+=r.yl*B;b+=r.zl*B;e+=r.Al*B;a+=r.sl*C;b+=r.tl*C;e+=r.ul*C;c+=r.Bl*-B;d+=r.Cl*-B;f+=r.Dl*-B;c+=r.vl*-C;d+=r.wl*-C;f+=r.xl*-C;h+=r.Ej*B;l+=r.Fj*B;g+=r.Gj*B;h+=r.lk*C;l+=r.mk*C;g+=r.nk*C;k+=r.Hj*-B;m+=r.Ij*-B;n+=r.Jj*-B;k+=r.pk*-C;m+=r.qk*-C;n+=r.rk*-C}q=0;for(p=this.info.Ka;q<p;)r=q++,t=this.info.rows[r],r=this.ac[r],u=t.ta,w=0,v=t.Ng,w+=a*v.va+b*v.wa+e*v.xa,w-=c*v.Ba+d*v.Ca+f*v.Da,w+=h*v.aa+l*v.ba+g*v.ca,w-=k*v.ea+m*v.fa+n*v.ga,t=(t.Fa-w)*r.he,w=u.bd,u.bd+=t,0>u.bd&&(u.bd=0),t=u.bd-w,a+=r.Zh*t,b+=r.$h*t,e+=r.ai*t,c+=r.bi*-t,d+=r.ci*-t,f+=r.di*-t,h+=r.Xf*t,l+=r.Yf*t,g+=r.Zf*t,k+=r.$f*-t,m+=r.ag*-t,n+=r.bg*-t;this.C.gb=a;this.C.hb=b;this.C.ib=e;this.D.gb=c;this.D.hb=d;this.D.ib=f;this.C.kb=h;this.C.lb=l;this.C.mb=g;this.D.kb=k;this.D.lb=m;this.D.mb=n},Pg:function(){this.Ji.al();this.Ji.gd(this.info);var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;u=this.D.V;w=this.D.W;B=this.D.X;v=this.D.Y;for(var C=0,D=this.info.Ka;C<D;){var A=C++,E=this.ac[A],A=this.info.rows[A].Ng;E.Zh=A.va*a;E.$h=A.wa*a;E.ai=A.xa*a;E.bi=A.Ba*b;E.ci=A.Ca*b;E.di=A.Da*b;var z,F,I;z=e*A.aa+c*A.ba+d*A.ca;F=f*A.aa+h*A.ba+l*A.ca;I=g*A.aa+k*A.ba+m*A.ca;E.Xf=z;E.Yf=F;E.Zf=I;z=n*A.ea+q*A.fa+p*A.ga;F=r*A.ea+t*A.fa+u*A.ga;I=w*A.ea+B*A.fa+v*A.ga;E.$f=z;E.ag=F;E.bg=I;E.he=a+b+(E.Xf*A.aa+E.Yf*A.ba+E.Zf*A.ca)+(E.$f*A.ea+E.ag*A.fa+E.bg*A.ga);0!=E.he&&(E.he=1/E.he)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},Bh:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.Yc;b=this.C.Zc;e=this.C.$c;c=this.D.Yc;d=this.D.Zc;f=this.D.$c;h=this.C.Uc;l=this.C.Vc;g=this.C.Wc;k=this.D.Uc;m=this.D.Vc;n=this.D.Wc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,t=this.info.rows[r],r=this.ac[r],u=t.ta,w=t.Ng,B=0,B=B+(a*w.va+b*w.wa+e*w.xa),B=B-(c*w.Ba+d*w.Ca+f*w.Da),B=B+(h*w.aa+l*w.ba+g*w.ca),B=B-(k*w.ea+m*w.fa+n*w.ga),t=(t.Fa-B)*r.he*F.positionSplitImpulseBaumgarte,w=u.ub;u.ub+=t;0>u.ub&&(u.ub=0);t=u.ub-w;a+=r.Zh*t;b+=r.$h*t;e+=r.ai*t;c+=r.bi*-t;d+=r.ci*-t;f+=r.di*-t;h+=r.Xf*t;l+=r.Yf*t;g+=r.Zf*t;k+=r.$f*-t;m+=r.ag*-t;n+=r.bg*-t}this.C.Yc=a;this.C.Zc=b;this.C.$c=e;this.D.Yc=c;this.D.Zc=d;this.D.$c=f;this.C.Uc=h;this.C.Vc=l;this.C.Wc=g;this.D.Uc=k;this.D.Vc=m;this.D.Wc=n},Ah:function(){this.Ji.al();this.Ji.gd(this.info);var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;u=this.D.V;w=this.D.W;B=this.D.X;v=this.D.Y;for(var C=0,D=this.info.Ka;C<D;){var A=C++,E=this.ac[A],z=this.info.rows[A].Ng;E.Zh=z.va*a;E.$h=z.wa*a;E.ai=z.xa*a;E.bi=z.Ba*b;E.ci=z.Ca*b;E.di=z.Da*b;var L,I,J;L=e*z.aa+c*z.ba+d*z.ca;I=f*z.aa+h*z.ba+l*z.ca;J=g*z.aa+k*z.ba+m*z.ca;E.Xf=L;E.Yf=I;E.Zf=J;var P,V,xa;P=n*z.ea+q*z.fa+p*z.ga;V=r*z.ea+t*z.fa+u*z.ga;xa=w*z.ea+B*z.fa+v*z.ga;E.$f=P;E.ag=V;E.bg=xa;E.he=a+b+(E.Xf*z.aa+E.Yf*z.ba+E.Zf*z.ca)+(E.$f*z.ea+E.ag*z.fa+E.bg*z.ga);0!=E.he&&(E.he=1/E.he)}for(var da,Ga,Ja,Na,Ka,Da,ma,Q,Sa,Ha,Ea,Ua,ua=Ua=Ea=Ha=Sa=Q=ma=Da=Ka=Na=Ja=Ga=da=0,oa=this.info.Ka;ua<oa;){var Wa=ua++,G=this.info.rows[Wa],Qa=this.ac[Wa],X=G.ta,M=G.Ng,N=0,N=N+(da*M.va+Ga*M.wa+Ja*M.xa),N=N-(Na*M.Ba+Ka*M.Ca+Da*M.Da),N=N+(ma*M.aa+Q*M.ba+Sa*M.ca),N=N-(Ha*M.ea+Ea*M.fa+Ua*M.ga),ca=(G.Fa-N)*Qa.he*F.positionNgsBaumgarte,Y=X.ub;X.ub+=ca;0>X.ub&&(X.ub=0);ca=X.ub-Y;da+=Qa.Zh*ca;Ga+=Qa.$h*ca;Ja+=Qa.ai*ca;Na+=Qa.bi*-ca;Ka+=Qa.ci*-ca;Da+=Qa.di*-ca;ma+=Qa.Xf*ca;Q+=Qa.Yf*ca;Sa+=Qa.Zf*ca;Ha+=Qa.$f*-ca;Ea+=Qa.ag*-ca;Ua+=Qa.bg*-ca}var S=this.C;S.a.v+=da;S.a.A+=Ga;S.a.B+=Ja;var aa=this.D;aa.a.v+=Na;aa.a.A+=Ka;aa.a.B+=Da;var y=this.C,fa=Math.sqrt(ma*ma+Q*Q+Sa*Sa),T=.5*fa,pa,sa;if(.5>T){var va=T*T;pa=.5*(1-.16666666666666666*va+va*va*.008333333333333333);sa=1-.5*va+va*va*.041666666666666664}else pa=Math.sin(T)/fa,sa=Math.cos(T);var ra,ka;ra=ma*pa;ka=Q*pa;var Z,na;Z=Sa*pa;na=sa;var Aa,ya,K,Ba,ha=y.a.o,ba=y.a.m,Va=y.a.s,ga=ha+ba+Va,O;0<ga?(O=Math.sqrt(ga+1),Ba=.5*O,O=.5/O,Aa=(y.a.g-y.a.j)*O,ya=(y.a.h-y.a.l)*O,K=(y.a.i-y.a.f)*O):ha>ba?ha>Va?(O=Math.sqrt(ha-ba-Va+1),Aa=.5*O,O=.5/O,ya=(y.a.f+y.a.i)*O,K=(y.a.h+y.a.l)*O,Ba=(y.a.g-y.a.j)*O):(O=Math.sqrt(Va-ha-ba+1),K=.5*O,O=.5/O,Aa=(y.a.h+y.a.l)*O,ya=(y.a.j+y.a.g)*O,Ba=(y.a.i-y.a.f)*O):ba>Va?(O=Math.sqrt(ba-Va-ha+1),ya=.5*O,O=.5/O,Aa=(y.a.f+y.a.i)*O,K=(y.a.j+y.a.g)*O,Ba=(y.a.h-y.a.l)*O):(O=Math.sqrt(Va-ha-ba+1),K=.5*O,O=.5/O,Aa=(y.a.h+y.a.l)*O,ya=(y.a.j+y.a.g)*O,Ba=(y.a.i-y.a.f)*O);Aa=na*Aa+ra*Ba+ka*K-Z*ya;ya=na*ya-ra*K+ka*Ba+Z*Aa;K=na*K+ra*ya-ka*Aa+Z*Ba;Ba=na*Ba-ra*Aa-ka*ya-Z*K;var za=Aa*Aa+ya*ya+K*K+Ba*Ba;1E-32<za&&(za=1/Math.sqrt(za));Aa*=za;ya*=za;K*=za;Ba*=za;var ob=Aa,ja=ya,$a=K,Za=Ba,fb=2*ob,ab=2*ja,ta=2*$a,wa=ob*fb,Fa=ja*ab,eb=$a*ta,Ia=ob*ab,pb=ja*ta,Oa=ob*ta,la=Za*fb,Ca=Za*ab,Xa=Za*ta;y.a.o=1-Fa-eb;y.a.f=Ia-Xa;y.a.h=Oa+Ca;y.a.i=Ia+Xa;y.a.m=1-wa-eb;y.a.j=pb-la;y.a.l=Oa-Ca;y.a.g=pb+la;y.a.s=1-wa-Fa;var Ra,hb,gb,cb,ub,jb,mb,sb,yb;Ra=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;hb=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;gb=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;cb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;ub=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;jb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;mb=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;sb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;yb=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;y.P=Ra;y.R=hb;y.S=gb;y.T=cb;y.U=ub;y.V=jb;y.W=mb;y.X=sb;y.Y=yb;var Ya,La,vb,H,db,kb,zb,lb,tb;Ya=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;La=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;vb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;H=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;db=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;kb=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;zb=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;lb=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;tb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=Ya;y.R=La;y.S=vb;y.T=H;y.U=db;y.V=kb;y.W=zb;y.X=lb;y.Y=tb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var x=this.D,W=Math.sqrt(Ha*Ha+Ea*Ea+Ua*Ua),ea=.5*W,wb,Hb;if(.5>ea){var Pa=ea*ea;wb=.5*(1-.16666666666666666*Pa+Pa*Pa*.008333333333333333);Hb=1-.5*Pa+Pa*Pa*.041666666666666664}else wb=Math.sin(ea)/W,Hb=Math.cos(ea);var qb,nb;qb=Ha*wb;nb=Ea*wb;var Ab,Bb;Ab=Ua*wb;Bb=Hb;var ia,Ta,bb,ib,Cb=x.a.o,Ma=x.a.m,Eb=x.a.s,Pb=Cb+Ma+Eb,qa;0<Pb?(qa=Math.sqrt(Pb+1),ib=.5*qa,qa=.5/qa,ia=(x.a.g-x.a.j)*qa,Ta=(x.a.h-x.a.l)*qa,bb=(x.a.i-x.a.f)*qa):Cb>Ma?Cb>Eb?(qa=Math.sqrt(Cb-Ma-Eb+1),ia=.5*qa,qa=.5/qa,Ta=(x.a.f+x.a.i)*qa,bb=(x.a.h+x.a.l)*qa,ib=(x.a.g-x.a.j)*qa):(qa=Math.sqrt(Eb-Cb-Ma+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,ib=(x.a.i-x.a.f)*qa):Ma>Eb?(qa=Math.sqrt(Ma-Eb-Cb+1),Ta=.5*qa,qa=.5/qa,ia=(x.a.f+x.a.i)*qa,bb=(x.a.j+x.a.g)*qa,ib=(x.a.h-x.a.l)*qa):(qa=Math.sqrt(Eb-Cb-Ma+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,ib=(x.a.i-x.a.f)*qa);ia=Bb*ia+qb*ib+nb*bb-Ab*Ta;Ta=Bb*Ta-qb*bb+nb*ib+Ab*ia;bb=Bb*bb+qb*Ta-nb*ia+Ab*ib;ib=Bb*ib-qb*ia-nb*Ta-Ab*bb;var Ib=ia*ia+Ta*Ta+bb*bb+ib*ib;1E-32<Ib&&(Ib=1/Math.sqrt(Ib));ia*=Ib;Ta*=Ib;bb*=Ib;ib*=Ib;var Kb=ia,Qb=Ta,Sb=bb,Mb=ib,Xb=2*Kb,Zb=2*Qb,Vb=2*Sb,Wb=Kb*Xb,$b=Qb*Zb,dc=Sb*Vb,Tb=Kb*Zb,fc=Qb*Vb,ec=Kb*Vb,Nb=Mb*Xb,bc=Mb*Zb,Fb=Mb*Vb;x.a.o=1-$b-dc;x.a.f=Tb-Fb;x.a.h=ec+bc;x.a.i=Tb+Fb;x.a.m=1-Wb-dc;x.a.j=fc-Nb;x.a.l=ec-bc;x.a.g=fc+Nb;x.a.s=1-Wb-$b;var mc,ac,Ob,cc,Ub,Lb,Rb,rb,gc;mc=x.a.o*x.Ra+x.a.f*x.Ua+x.a.h*x.Xa;ac=x.a.o*x.Sa+x.a.f*x.Va+x.a.h*x.Ya;Ob=x.a.o*x.Ta+x.a.f*x.Wa+x.a.h*x.Za;cc=x.a.i*x.Ra+x.a.m*x.Ua+x.a.j*x.Xa;Ub=x.a.i*x.Sa+x.a.m*x.Va+x.a.j*x.Ya;Lb=x.a.i*x.Ta+x.a.m*x.Wa+x.a.j*x.Za;Rb=x.a.l*x.Ra+x.a.g*x.Ua+x.a.s*x.Xa;rb=x.a.l*x.Sa+x.a.g*x.Va+x.a.s*x.Ya;gc=x.a.l*x.Ta+x.a.g*x.Wa+x.a.s*x.Za;x.P=mc;x.R=ac;x.S=Ob;x.T=cc;x.U=Ub;x.V=Lb;x.W=Rb;x.X=rb;x.Y=gc;var qc,ic,jc,hc,kc,oc,lc,nc,rc;qc=x.P*x.a.o+x.R*x.a.f+x.S*x.a.h;ic=x.P*x.a.i+x.R*x.a.m+x.S*x.a.j;jc=x.P*x.a.l+x.R*x.a.g+x.S*x.a.s;hc=x.T*x.a.o+x.U*x.a.f+x.V*x.a.h;kc=x.T*x.a.i+x.U*x.a.m+x.V*x.a.j;oc=x.T*x.a.l+x.U*x.a.g+x.V*x.a.s;lc=x.W*x.a.o+x.X*x.a.f+x.Y*x.a.h;nc=x.W*x.a.i+x.X*x.a.m+x.Y*x.a.j;rc=x.W*x.a.l+x.X*x.a.g+x.Y*x.a.s;x.P=qc;x.R=ic;x.S=jc;x.T=hc;x.U=kc;x.V=oc;x.W=lc;x.X=nc;x.Y=rc;x.P*=x.N.x;x.R*=x.N.x;x.S*=x.N.x;x.T*=x.N.y;x.U*=x.N.y;x.V*=x.N.y;x.W*=x.N.z;x.X*=x.N.z;x.Y*=x.N.z},postSolve:function(){for(var a=0,b=this.info.Ka;a<b;){var e=a++,c=this.info.rows[e],e=c.ta,d=c.Lj,c=c.Kj,f,h,l;l=h=f=0;f+=d.va*e.zc;h+=d.wa*e.zc;l+=d.xa*e.zc;f+=c.va*e.yc;h+=c.wa*e.yc;l+=c.xa*e.yc;e.df=f;e.ef=h;e.ff=l}this.Ji.al()}});sc.ua=Ib;sc.prototype=gb(Ib.prototype,{xh:function(a){this.$.hd();this.$.$d(a,this.info);this.C=this.info.Qe;this.D=this.info.Re;a=this.C.$a;var b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;u=this.D.V;w=this.D.W;B=this.D.X;v=this.D.Y;for(var C=0,D=this.info.Ka;C<D;){var A=C++,E=this.info.rows[A],A=this.ac[A],z=E.Aa;z.Hm();z.xc&1?(A.qd=z.va*a,A.rd=z.wa*a,A.sd=z.xa*a,A.td=z.Ba*b,A.ud=z.Ca*b,A.vd=z.Da*b):(A.qd=0,A.rd=0,A.sd=0,A.td=0,A.ud=0,A.vd=0);if(z.xc&2){var F,I,J;F=e*z.aa+c*z.ba+d*z.ca;I=f*z.aa+h*z.ba+l*z.ca;J=g*z.aa+k*z.ba+m*z.ca;A.kd=F;A.ld=I;A.md=J;F=n*z.ea+q*z.fa+p*z.ga;I=r*z.ea+t*z.fa+u*z.ga;J=w*z.ea+B*z.fa+v*z.ga;A.nd=F;A.od=I;A.pd=J}else A.kd=0,A.ld=0,A.md=0,A.nd=0,A.od=0,A.pd=0;A.Ff=A.qd*z.va+A.rd*z.wa+A.sd*z.xa+(A.td*z.Ba+A.ud*z.Ca+A.vd*z.Da)+(A.kd*z.aa+A.ld*z.ba+A.md*z.ca)+(A.nd*z.ea+A.od*z.fa+A.pd*z.ga);A.mass=A.Ff+E.Ma;A.Ff&&(A.Ff=1/A.Ff);0!=A.mass&&(A.mass=1/A.mass)}},Gh:function(a){var b=this.$.Hc==Xb.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ta;e.ta=0;e.ad=0;e.ub=0}else{var c,d,f,h,l,g,k,m,n,q;a=this.C.gb;e=this.C.hb;c=this.C.ib;d=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0,r=this.info.Ka;p<r;){var t=p++,u=this.ac[t],t=this.info.rows[t].ta;t.ta*=b;t.ad*=b;t=t.ta+t.ad;a+=u.qd*t;e+=u.rd*t;c+=u.sd*t;d+=u.td*-t;f+=u.ud*-t;h+=u.vd*-t;l+=u.kd*t;g+=u.ld*t;k+=u.md*t;m+=u.nd*-t;n+=u.od*-t;q+=u.pd*-t}this.C.gb=a;this.C.hb=e;this.C.ib=c;this.D.gb=d;this.D.hb=f;this.D.ib=h;this.C.kb=l;this.C.lb=g;this.C.mb=k;this.D.kb=m;this.D.lb=n;this.D.mb=q}},Ch:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.gb;b=this.C.hb;e=this.C.ib;c=this.D.gb;d=this.D.hb;f=this.D.ib;h=this.C.kb;l=this.C.lb;g=this.C.mb;k=this.D.kb;m=this.D.lb;n=this.D.mb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,t=this.info.rows[r],r=this.ac[r],u=t.ta,w=t.Aa;if(0!=t.fb){var B=0,B=B+(a*w.va+b*w.wa+e*w.xa),B=B-(c*w.Ba+d*w.Ca+f*w.Da),B=B+(h*w.aa+l*w.ba+g*w.ca),B=B-(k*w.ea+m*w.fa+n*w.ga),B=(-t.motorSpeed-B)*r.Ff,v=u.ad;u.ad+=B;u.ad<-t.fb?u.ad=-t.fb:u.ad>t.fb&&(u.ad=t.fb);B=u.ad-v;w.xc&1&&(a+=r.qd*B,b+=r.rd*B,e+=r.sd*B,c+=r.td*-B,d+=r.ud*-B,f+=r.vd*-B);w.xc&2&&(h+=r.kd*B,l+=r.ld*B,g+=r.md*B,k+=r.nd*-B,m+=r.od*-B,n+=r.pd*-B)}}q=0;for(p=this.info.Ka;q<p;)r=q++,t=this.info.rows[r],r=this.ac[r],u=t.ta,w=t.Aa,B=0,B+=a*w.va+b*w.wa+e*w.xa,B-=c*w.Ba+d*w.Ca+f*w.Da,B+=h*w.aa+l*w.ba+g*w.ca,B-=k*w.ea+m*w.fa+n*w.ga,B=(t.Fa-B-u.ta*t.Ma)*r.mass,v=u.ta,u.ta+=B,u.ta<t.Ia?u.ta=t.Ia:u.ta>t.Ha&&(u.ta=t.Ha),B=u.ta-v,w.xc&1&&(a+=r.qd*B,b+=r.rd*B,e+=r.sd*B,c+=r.td*-B,d+=r.ud*-B,f+=r.vd*-B),w.xc&2&&(h+=r.kd*B,l+=r.ld*B,g+=r.md*B,k+=r.nd*-B,m+=r.od*-B,n+=r.pd*-B);this.C.gb=a;this.C.hb=b;this.C.ib=e;this.D.gb=c;this.D.hb=d;this.D.ib=f;this.C.kb=h;this.C.lb=l;this.C.mb=g;this.D.kb=k;this.D.lb=m;this.D.mb=n},Li:function(a){for(var b,e,c,d,f,h,l=h=f=d=c=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ta,m=m.Aa;m.xc&1?(b+=m.va*k.ta,e+=m.wa*k.ta,c+=m.xa*k.ta):m.xc&2&&(d+=m.aa*k.ta,f+=m.ba*k.ta,h+=m.ca*k.ta)}this.$.Pi=b*a.invDt;this.$.Qi=e*a.invDt;this.$.Ri=c*a.invDt;this.$.Si=d*a.invDt;this.$.Ti=f*a.invDt;this.$.Ui=h*a.invDt},Pg:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;u=this.D.V;w=this.D.W;B=this.D.X;v=this.D.Y;for(var C=0,D=this.info.Ka;C<D;){var A=C++,E=this.ac[A],A=this.info.rows[A].Aa;E.qd=A.va*a;E.rd=A.wa*a;E.sd=A.xa*a;E.td=A.Ba*b;E.ud=A.Ca*b;E.vd=A.Da*b;var z,F,I;z=e*A.aa+c*A.ba+d*A.ca;F=f*A.aa+h*A.ba+l*A.ca;I=g*A.aa+k*A.ba+m*A.ca;E.kd=z;E.ld=F;E.md=I;z=n*A.ea+q*A.fa+p*A.ga;F=r*A.ea+t*A.fa+u*A.ga;I=w*A.ea+B*A.fa+v*A.ga;E.nd=z;E.od=F;E.pd=I;E.mass=E.qd*A.va+E.rd*A.wa+E.sd*A.xa+(E.td*A.Ba+E.ud*A.Ca+E.vd*A.Da)+(E.kd*A.aa+E.ld*A.ba+E.md*A.ca)+(E.nd*A.ea+E.od*A.fa+E.pd*A.ga);E.mass&&(E.mass=1/E.mass)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},Bh:function(){var a,b,e,c,d,f,h,l,g,k,m,n;a=this.C.Yc;b=this.C.Zc;e=this.C.$c;c=this.D.Yc;d=this.D.Zc;f=this.D.$c;h=this.C.Uc;l=this.C.Vc;g=this.C.Wc;k=this.D.Uc;m=this.D.Vc;n=this.D.Wc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,t=this.info.rows[r],r=this.ac[r],u=t.ta,w=t.Aa,B=0,B=B+(a*w.va+b*w.wa+e*w.xa),B=B-(c*w.Ba+d*w.Ca+f*w.Da),B=B+(h*w.aa+l*w.ba+g*w.ca),B=B-(k*w.ea+m*w.fa+n*w.ga),w=(t.Fa*F.positionSplitImpulseBaumgarte-B)*r.mass,B=u.ub;u.ub+=w;u.ub<t.Ia?u.ub=t.Ia:u.ub>t.Ha&&(u.ub=t.Ha);w=u.ub-B;a+=r.qd*w;b+=r.rd*w;e+=r.sd*w;c+=r.td*-w;d+=r.ud*-w;f+=r.vd*-w;h+=r.kd*w;l+=r.ld*w;g+=r.md*w;k+=r.nd*-w;m+=r.od*-w;n+=r.pd*-w}this.C.Yc=a;this.C.Zc=b;this.C.$c=e;this.D.Yc=c;this.D.Zc=d;this.D.$c=f;this.C.Uc=h;this.C.Vc=l;this.C.Wc=g;this.D.Uc=k;this.D.Vc=m;this.D.Wc=n},Ah:function(){this.$.hd();this.$.gd(this.info);this.C=this.info.Qe;this.D=this.info.Re;var a=this.C.$a,b=this.D.$a,e,c,d,f,h,l,g,k,m,n,q,p,r,t,u,w,B,v;e=this.C.P;c=this.C.R;d=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;u=this.D.V;w=this.D.W;B=this.D.X;v=this.D.Y;for(var C=0,D=this.info.Ka;C<D;){var A=C++,E=this.ac[A],z=this.info.rows[A].Aa;E.qd=z.va*a;E.rd=z.wa*a;E.sd=z.xa*a;E.td=z.Ba*b;E.ud=z.Ca*b;E.vd=z.Da*b;var L,I,J;L=e*z.aa+c*z.ba+d*z.ca;I=f*z.aa+h*z.ba+l*z.ca;J=g*z.aa+k*z.ba+m*z.ca;E.kd=L;E.ld=I;E.md=J;var P,V,xa;P=n*z.ea+q*z.fa+p*z.ga;V=r*z.ea+t*z.fa+u*z.ga;xa=w*z.ea+B*z.fa+v*z.ga;E.nd=P;E.od=V;E.pd=xa;E.mass=E.qd*z.va+E.rd*z.wa+E.sd*z.xa+(E.td*z.Ba+E.ud*z.Ca+E.vd*z.Da)+(E.kd*z.aa+E.ld*z.ba+E.md*z.ca)+(E.nd*z.ea+E.od*z.fa+E.pd*z.ga);E.mass&&(E.mass=1/E.mass)}for(var da,Ga,Ja,Na,Ka,Da,ma,Q,Sa,Ha,Ea,Ua,ua=Ua=Ea=Ha=Sa=Q=ma=Da=Ka=Na=Ja=Ga=da=0,oa=this.info.Ka;ua<oa;){var Wa=ua++,G=this.info.rows[Wa],Qa=this.ac[Wa],X=G.ta,M=G.Aa,N=0,N=N+(da*M.va+Ga*M.wa+Ja*M.xa),N=N-(Na*M.Ba+Ka*M.Ca+Da*M.Da),N=N+(ma*M.aa+Q*M.ba+Sa*M.ca),N=N-(Ha*M.ea+Ea*M.fa+Ua*M.ga),ca=(G.Fa*F.positionNgsBaumgarte-N)*Qa.mass,Y=X.ub;X.ub+=ca;X.ub<G.Ia?X.ub=G.Ia:X.ub>G.Ha&&(X.ub=G.Ha);ca=X.ub-Y;da+=Qa.qd*ca;Ga+=Qa.rd*ca;Ja+=Qa.sd*ca;Na+=Qa.td*-ca;Ka+=Qa.ud*-ca;Da+=Qa.vd*-ca;ma+=Qa.kd*ca;Q+=Qa.ld*ca;Sa+=Qa.md*ca;Ha+=Qa.nd*-ca;Ea+=Qa.od*-ca;Ua+=Qa.pd*-ca}var S=this.C;S.a.v+=da;S.a.A+=Ga;S.a.B+=Ja;var aa=this.D;aa.a.v+=Na;aa.a.A+=Ka;aa.a.B+=Da;var y=this.C,fa=Math.sqrt(ma*ma+Q*Q+Sa*Sa),T=.5*fa,pa,sa;if(.5>T){var va=T*T;pa=.5*(1-.16666666666666666*va+va*va*.008333333333333333);sa=1-.5*va+va*va*.041666666666666664}else pa=Math.sin(T)/fa,sa=Math.cos(T);var ra,ka;ra=ma*pa;ka=Q*pa;var Z,na;Z=Sa*pa;na=sa;var Aa,ya,K,Ba,ha=y.a.o,ba=y.a.m,Va=y.a.s,ga=ha+ba+Va,O;0<ga?(O=Math.sqrt(ga+1),Ba=.5*O,O=.5/O,Aa=(y.a.g-y.a.j)*O,ya=(y.a.h-y.a.l)*O,K=(y.a.i-y.a.f)*O):ha>ba?ha>Va?(O=Math.sqrt(ha-ba-Va+1),Aa=.5*O,O=.5/O,ya=(y.a.f+y.a.i)*O,K=(y.a.h+y.a.l)*O,Ba=(y.a.g-y.a.j)*O):(O=Math.sqrt(Va-ha-ba+1),K=.5*O,O=.5/O,Aa=(y.a.h+y.a.l)*O,ya=(y.a.j+y.a.g)*O,Ba=(y.a.i-y.a.f)*O):ba>Va?(O=Math.sqrt(ba-Va-ha+1),ya=.5*O,O=.5/O,Aa=(y.a.f+y.a.i)*O,K=(y.a.j+y.a.g)*O,Ba=(y.a.h-y.a.l)*O):(O=Math.sqrt(Va-ha-ba+1),K=.5*O,O=.5/O,Aa=(y.a.h+y.a.l)*O,ya=(y.a.j+y.a.g)*O,Ba=(y.a.i-y.a.f)*O);Aa=na*Aa+ra*Ba+ka*K-Z*ya;ya=na*ya-ra*K+ka*Ba+Z*Aa;K=na*K+ra*ya-ka*Aa+Z*Ba;Ba=na*Ba-ra*Aa-ka*ya-Z*K;var za=Aa*Aa+ya*ya+K*K+Ba*Ba;1E-32<za&&(za=1/Math.sqrt(za));Aa*=za;ya*=za;K*=za;Ba*=za;var Za=Aa,ja=ya,ab=K,$a=Ba,fb=2*Za,gb=2*ja,ta=2*ab,wa=Za*fb,Fa=ja*gb,eb=ab*ta,Ia=Za*gb,pb=ja*ta,Oa=Za*ta,la=$a*fb,Ca=$a*gb,Xa=$a*ta;y.a.o=1-Fa-eb;y.a.f=Ia-Xa;y.a.h=Oa+Ca;y.a.i=Ia+Xa;y.a.m=1-wa-eb;y.a.j=pb-la;y.a.l=Oa-Ca;y.a.g=pb+la;y.a.s=1-wa-Fa;var Ra,hb,sb,cb,ub,jb,mb,wb,yb;Ra=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;hb=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;sb=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;cb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;ub=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;jb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;mb=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;wb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;yb=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;y.P=Ra;y.R=hb;y.S=sb;y.T=cb;y.U=ub;y.V=jb;y.W=mb;y.X=wb;y.Y=yb;var Ya,La,vb,H,db,kb,zb,lb,tb;Ya=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;La=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;vb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;H=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;db=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;kb=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;zb=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;lb=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;tb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=Ya;y.R=La;y.S=vb;y.T=H;y.U=db;y.V=kb;y.W=zb;y.X=lb;y.Y=tb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var x=this.D,W=Math.sqrt(Ha*Ha+Ea*Ea+Ua*Ua),ea=.5*W,Hb,Ib;if(.5>ea){var Pa=ea*ea;Hb=.5*(1-.16666666666666666*Pa+Pa*Pa*.008333333333333333);Ib=1-.5*Pa+Pa*Pa*.041666666666666664}else Hb=Math.sin(ea)/W,Ib=Math.cos(ea);var qb,nb;qb=Ha*Hb;nb=Ea*Hb;var Ab,Bb;Ab=Ua*Hb;Bb=Ib;var ia,Ta,bb,ib,Cb=x.a.o,Ma=x.a.m,Eb=x.a.s,Pb=Cb+Ma+Eb,qa;0<Pb?(qa=Math.sqrt(Pb+1),ib=.5*qa,qa=.5/qa,ia=(x.a.g-x.a.j)*qa,Ta=(x.a.h-x.a.l)*qa,bb=(x.a.i-x.a.f)*qa):Cb>Ma?Cb>Eb?(qa=Math.sqrt(Cb-Ma-Eb+1),ia=.5*qa,qa=.5/qa,Ta=(x.a.f+x.a.i)*qa,bb=(x.a.h+x.a.l)*qa,ib=(x.a.g-x.a.j)*qa):(qa=Math.sqrt(Eb-Cb-Ma+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,ib=(x.a.i-x.a.f)*qa):Ma>Eb?(qa=Math.sqrt(Ma-Eb-Cb+1),Ta=.5*qa,qa=.5/qa,ia=(x.a.f+x.a.i)*qa,bb=(x.a.j+x.a.g)*qa,ib=(x.a.h-x.a.l)*qa):(qa=Math.sqrt(Eb-Cb-Ma+1),bb=.5*qa,qa=.5/qa,ia=(x.a.h+x.a.l)*qa,Ta=(x.a.j+x.a.g)*qa,ib=(x.a.i-x.a.f)*qa);ia=Bb*ia+qb*ib+nb*bb-Ab*Ta;Ta=Bb*Ta-qb*bb+nb*ib+Ab*ia;bb=Bb*bb+qb*Ta-nb*ia+Ab*ib;ib=Bb*ib-qb*ia-nb*Ta-Ab*bb;var Mb=ia*ia+Ta*Ta+bb*bb+ib*ib;1E-32<Mb&&(Mb=1/Math.sqrt(Mb));ia*=Mb;Ta*=Mb;bb*=Mb;ib*=Mb;var Kb=ia,Qb=Ta,Sb=bb,Vb=ib,Xb=2*Kb,Zb=2*Qb,Wb=2*Sb,$b=Kb*Xb,dc=Qb*Zb,gc=Sb*Wb,Tb=Kb*Zb,fc=Qb*Wb,ec=Kb*Wb,Nb=Vb*Xb,bc=Vb*Zb,Fb=Vb*Wb;x.a.o=1-dc-gc;x.a.f=Tb-Fb;x.a.h=ec+bc;x.a.i=Tb+Fb;x.a.m=1-$b-gc;x.a.j=fc-Nb;x.a.l=ec-bc;x.a.g=fc+Nb;x.a.s=1-$b-dc;var mc,ac,Ob,cc,Ub,Lb,Rb,rb,ic;mc=x.a.o*x.Ra+x.a.f*x.Ua+x.a.h*x.Xa;ac=x.a.o*x.Sa+x.a.f*x.Va+x.a.h*x.Ya;Ob=x.a.o*x.Ta+x.a.f*x.Wa+x.a.h*x.Za;cc=x.a.i*x.Ra+x.a.m*x.Ua+x.a.j*x.Xa;Ub=x.a.i*x.Sa+x.a.m*x.Va+x.a.j*x.Ya;Lb=x.a.i*x.Ta+x.a.m*x.Wa+x.a.j*x.Za;Rb=x.a.l*x.Ra+x.a.g*x.Ua+x.a.s*x.Xa;rb=x.a.l*x.Sa+x.a.g*x.Va+x.a.s*x.Ya;ic=x.a.l*x.Ta+x.a.g*x.Wa+x.a.s*x.Za;x.P=mc;x.R=ac;x.S=Ob;x.T=cc;x.U=Ub;x.V=Lb;x.W=Rb;x.X=rb;x.Y=ic;var jc,kc,lc,hc,nc,oc,sc,uc,rc;jc=x.P*x.a.o+x.R*x.a.f+x.S*x.a.h;kc=x.P*x.a.i+x.R*x.a.m+x.S*x.a.j;lc=x.P*x.a.l+x.R*x.a.g+x.S*x.a.s;hc=x.T*x.a.o+x.U*x.a.f+x.V*x.a.h;nc=x.T*x.a.i+x.U*x.a.m+x.V*x.a.j;oc=x.T*x.a.l+x.U*x.a.g+x.V*x.a.s;sc=x.W*x.a.o+x.X*x.a.f+x.Y*x.a.h;uc=x.W*x.a.i+x.X*x.a.m+x.Y*x.a.j;rc=x.W*x.a.l+x.X*x.a.g+x.Y*x.a.s;x.P=jc;x.R=kc;x.S=lc;x.T=hc;x.U=nc;x.V=oc;x.W=sc;x.X=uc;x.Y=rc;x.P*=x.N.x;x.R*=x.N.x;x.S*=x.N.x;x.T*=x.N.y;x.U*=x.N.y;x.V*=x.N.y;x.W*=x.N.z;x.X*=x.N.z;x.Y*=x.N.z},postSolve:function(){this.$.hd();this.$.Rl()}});D.prototype={Wl:function(a){switch(this.Lb){case 1:this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=this.mb=this.lb=this.kb=this.ib=this.hb=this.gb=0;break;case 0:case 2:var b,e,c,d,f;b=this.gb*a;e=this.hb*a;c=this.ib*a;d=this.kb*a;f=this.lb*a;a=this.mb*a;var h=b*b+e*e+c*c,l=d*d+f*f+a*a;if(h||l){h>F.maxTranslationPerStep*F.maxTranslationPerStep&&(h=F.maxTranslationPerStep/Math.sqrt(h),this.gb*=h,this.hb*=h,this.ib*=h,b*=h,e*=h,c*=h);l>F.maxRotationPerStep*F.maxRotationPerStep&&(l=F.maxRotationPerStep/Math.sqrt(l),this.kb*=l,this.lb*=l,this.mb*=l,d*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=c;b=Math.sqrt(d*d+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));d*=b;f*=b;a*=b;b=e;e=this.a.o;c=this.a.m;var l=this.a.s,h=e+c+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,c=(this.a.i-this.a.f)*g):e>c?e>l?(g=Math.sqrt(e-c-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,c=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):c>l?(g=Math.sqrt(c-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,c=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+d*e+f*c-a*l;l=b*l-d*c+f*e+a*h;c=b*c+d*l-f*h+a*e;e=b*e-d*h-f*l-a*c;a=h*h+l*l+c*c+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;c*=a;b=e*a;var k=2*f;g=2*h;e=2*c;a=f*k;d=h*g;c*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-d-c;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-c;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-d;f=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=f;this.R=a;this.S=d;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;f=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;d=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;c=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=f;this.R=a;this.S=d;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}}},bn:function(){var a=this.Uc*this.Uc+this.Vc*this.Vc+this.Wc*this.Wc;if(this.Yc*this.Yc+this.Zc*this.Zc+this.$c*this.$c||a)switch(this.Lb){case 1:this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0;break;case 0:case 2:var b,e,c,d,f;b=this.Yc;e=this.Zc;c=this.$c;a=this.Uc;d=this.Vc;f=this.Wc;this.Wc=this.Vc=this.Uc=this.$c=this.Zc=this.Yc=0;this.a.v+=b;this.a.A+=e;this.a.B+=c;b=Math.sqrt(a*a+d*d+f*f);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));a*=b;d*=b;f*=b;b=e;var h,l;e=this.a.o;c=this.a.m;l=this.a.s;h=e+c+l;var g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,c=(this.a.i-this.a.f)*g):e>c?e>l?(g=Math.sqrt(e-c-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,c=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):c>l?(g=Math.sqrt(c-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,c=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-c+1),c=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+a*e+d*c-f*l;l=b*l-a*c+d*e+f*h;c=b*c+a*l-d*h+f*e;e=b*e-a*h-d*l-f*c;d=h*h+l*l+c*c+e*e;1E-32<d&&(d=1/Math.sqrt(d));a=h*d;h=l*d;c*=d;b=e*d;var k=2*a;g=2*h;e=2*c;d=a*k;f=h*g;c*=e;l=a*g;h*=e;a*=e;k*=b;g*=b;b*=e;this.a.o=1-f-c;this.a.f=l-b;this.a.h=a+g;this.a.i=l+b;this.a.m=1-d-c;this.a.j=h-k;this.a.l=a-g;this.a.g=h+k;this.a.s=1-d-f;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;d=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=d;this.S=f;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;d=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;c=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=d;this.S=f;this.T=b;this.U=e;this.V=c;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}},Oj:function(){for(var a,b,e,c,d,f,h,l,g,k=g=l=h=f=d=c=e=b=a=0,m=this.Dc;null!=m;){var n=m.M,q=m.Kb;q.Oe();var p=m.Dk*q.yf,r,t,u,w,B,v,C,D;r=m.ha.o*q.mg+m.ha.f*q.pg+m.ha.h*q.sg;t=m.ha.o*q.ng+m.ha.f*q.qg+m.ha.h*q.tg;u=m.ha.o*q.og+m.ha.f*q.rg+m.ha.h*q.ug;w=m.ha.i*q.mg+m.ha.m*q.pg+m.ha.j*q.sg;B=m.ha.i*q.ng+m.ha.m*q.qg+m.ha.j*q.tg;v=m.ha.i*q.og+m.ha.m*q.rg+m.ha.j*q.ug;C=m.ha.l*q.mg+m.ha.g*q.pg+m.ha.s*q.sg;D=m.ha.l*q.ng+m.ha.g*q.qg+m.ha.s*q.tg;var q=m.ha.l*q.og+m.ha.g*q.rg+m.ha.s*q.ug,A,E,z,F,I,J;A=r*m.ha.o+t*m.ha.f+u*m.ha.h;E=r*m.ha.i+t*m.ha.m+u*m.ha.j;u=r*m.ha.l+t*m.ha.g+u*m.ha.s;z=w*m.ha.o+B*m.ha.f+v*m.ha.h;F=w*m.ha.i+B*m.ha.m+v*m.ha.j;v=w*m.ha.l+B*m.ha.g+v*m.ha.s;I=C*m.ha.o+D*m.ha.f+q*m.ha.h;J=C*m.ha.i+D*m.ha.m+q*m.ha.j;q=C*m.ha.l+D*m.ha.g+q*m.ha.s;r=A;t=E;w=z;B=F;C=I;D=J;r*=p;t*=p;u*=p;w*=p;B*=p;v*=p;C*=p;D*=p;var q=q*p,L,P,V;z=m.ha.v*m.ha.v;F=m.ha.A*m.ha.A;L=m.ha.B*m.ha.B;I=-m.ha.v*m.ha.A;J=-m.ha.A*m.ha.B;V=-m.ha.B*m.ha.v;m=F+L;A=I;E=V;L=z+L;P=J;z+=F;r+=m*p;t+=A*p;u+=E*p;w+=I*p;B+=L*p;v+=P*p;C+=V*p;D+=J*p;q+=z*p;k+=p;a+=r;b+=t;e+=u;c+=w;d+=B;f+=v;h+=C;l+=D;g+=q;m=n}this.Pc=k;this.Ad=a;this.Bd=b;this.Cd=e;this.Dd=c;this.Ed=d;this.Fd=f;this.Gd=h;this.Hd=l;this.Id=g;a=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd);if(0<this.Pc&&0<a&&0==this.Lb){this.$a=1/this.Pc;a=this.Ed*this.Id-this.Fd*this.Hd;b=this.Dd*this.Id-this.Fd*this.Gd;e=this.Dd*this.Hd-this.Ed*this.Gd;c=this.Bd*this.Id-this.Cd*this.Hd;d=this.Ad*this.Id-this.Cd*this.Gd;f=this.Ad*this.Hd-this.Bd*this.Gd;h=this.Bd*this.Fd-this.Cd*this.Ed;l=this.Ad*this.Fd-this.Cd*this.Dd;g=this.Ad*this.Ed-this.Bd*this.Dd;k=this.Ad*a-this.Bd*b+this.Cd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-c*k;this.Ta=h*k;this.Ua=-b*k;this.Va=d*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.pi=this.Ra;this.ri=this.Sa;this.si=this.Ta;this.ti=this.Ua;this.ui=this.Va;this.vi=this.Wa;this.wi=this.Xa;this.xi=this.Ya;this.yi=this.Za;this.Ra=this.pi*this.N.x;this.Sa=this.ri*this.N.x;this.Ta=this.si*this.N.x;this.Ua=this.ti*this.N.y;this.Va=this.ui*this.N.y;this.Wa=this.vi*this.N.y;this.Xa=this.wi*this.N.z;this.Ya=this.xi*this.N.z;this.Za=this.yi*this.N.z}else this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Lb&&(this.Lb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},lm:function(){var a=new u;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},qm:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},Rn:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.pa;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Dc;null!=a;){var b=a.M,e=a.pa,c=a.ha,d=this.pa,f,h,l,g,k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=d,f.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}this.Gb=!1;this.yb=0},fo:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.pa;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Dc;null!=b;){e=b.M;a=b.pa;var c=b.ha,d=this.pa,f,h,l,g,k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;a.v=f;a.A=h;a.B=c;a.v+=d.v;a.A+=d.A;a.B+=d.B;a=b.a;c=b.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;a.v=f;a.A=h;a.B=c;a.v+=d.v;a.A+=d.A;a.B+=d.B;b.Kb.Nb(b.u,b.pa);a=b.u.ma;d=b.u.na;c=b.u.oa;f=b.u.ja;h=b.u.ka;l=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=a<b.u.ma?a:b.u.ma;b.u.na=d<b.u.na?d:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=f>b.u.ja?f:b.u.ja;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;null!=b.tb&&(a=b.a.v-b.pa.v,d=b.a.A-b.pa.A,c=b.a.B-b.pa.B,f=b.rc,f.x=a,f.y=d,f.z=c,b.Yb.oc.jc.wd(b.tb,b.u,b.rc));b=e}this.Gb=!1;this.yb=0},um:function(){var a=new P;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},vm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},Vn:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,c,d,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Dc;null!=a;){b=a.M;e=a.pa;d=a.ha;c=this.pa;var k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=c,f.z=d,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}this.Gb=!1;this.yb=0},Zn:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;a=Math.sin(b);var d=Math.sin(e),f=Math.sin(c);b=Math.cos(b);e=Math.cos(e);c=Math.cos(c);this.a.o=e*c;this.a.f=-e*f;this.a.h=d;this.a.i=b*f+c*a*d;this.a.m=b*c-a*d*f;this.a.j=-e*a;this.a.l=a*f-b*c*d;this.a.g=c*a+b*d*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;d=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;b=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=d;this.S=f;this.T=e;this.U=c;this.V=b;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;d=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;e=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;b=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=d;this.S=f;this.T=e;this.U=c;this.V=b;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;d=this.a;a.v=d.v;a.A=d.A;a.B=d.B;a.o=d.o;a.f=d.f;a.h=d.h;a.i=d.i;a.m=d.m;a.j=d.j;a.l=d.l;a.g=d.g;a.s=d.s;for(a=this.Dc;null!=a;){d=a.M;f=a.pa;c=a.ha;e=this.pa;var k,m,n,q,p;b=e.o*c.o+e.f*c.i+e.h*c.l;h=e.o*c.f+e.f*c.m+e.h*c.g;l=e.o*c.h+e.f*c.j+e.h*c.s;g=e.i*c.o+e.m*c.i+e.j*c.l;k=e.i*c.f+e.m*c.m+e.j*c.g;m=e.i*c.h+e.m*c.j+e.j*c.s;n=e.l*c.o+e.g*c.i+e.s*c.l;q=e.l*c.f+e.g*c.m+e.s*c.g;p=e.l*c.h+e.g*c.j+e.s*c.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*c.v+e.f*c.A+e.h*c.B;h=e.i*c.v+e.m*c.A+e.j*c.B;c=e.l*c.v+e.g*c.A+e.s*c.B;f.v=b;f.A=h;f.B=c;f.v+=e.v;f.A+=e.A;f.B+=e.B;f=a.a;c=a.ha;e=this.a;b=e.o*c.o+e.f*c.i+e.h*c.l;h=e.o*c.f+e.f*c.m+e.h*c.g;l=e.o*c.h+e.f*c.j+e.h*c.s;g=e.i*c.o+e.m*c.i+e.j*c.l;k=e.i*c.f+e.m*c.m+e.j*c.g;m=e.i*c.h+e.m*c.j+e.j*c.s;n=e.l*c.o+e.g*c.i+e.s*c.l;q=e.l*c.f+e.g*c.m+e.s*c.g;p=e.l*c.h+e.g*c.j+e.s*c.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*c.v+e.f*c.A+e.h*c.B;h=e.i*c.v+e.m*c.A+e.j*c.B;c=e.l*c.v+e.g*c.A+e.s*c.B;f.v=b;f.A=h;f.B=c;f.v+=e.v;f.A+=e.A;f.B+=e.B;a.Kb.Nb(a.u,a.pa);f=a.u.ma;e=a.u.na;c=a.u.oa;b=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=f<a.u.ma?f:a.u.ma;a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=b>a.u.ja?b:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(f=a.a.v-a.pa.v,e=a.a.A-a.pa.A,c=a.a.B-a.pa.B,b=a.rc,b.x=f,b.y=e,b.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=d}this.Gb=!1;this.yb=0},Dm:function(a){var b,e,c,d,f,h,l,g,k;b=a.e00;e=a.e01;c=a.e02;d=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+c*this.a.l;m=b*this.a.f+e*this.a.m+c*this.a.g;b=b*this.a.h+e*this.a.j+c*this.a.s;e=d*this.a.o+f*this.a.i+h*this.a.l;c=d*this.a.f+f*this.a.m+h*this.a.g;d=d*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=c;this.a.j=d;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;m=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;k=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=d;this.W=f;this.X=h;this.Y=b;l=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;a=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;m=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;k=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;f=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=d;this.W=f;this.X=h;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;l=this.pa;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Dc;null!=l;){g=l.M;a=l.pa;k=l.ha;m=this.pa;var n,q,p;d=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;c=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=d;a.f=f;a.h=h;a.i=b;a.m=e;a.j=c;a.l=n;a.g=q;a.s=p;d=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=d;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;a=l.a;k=l.ha;m=this.a;d=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;c=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=d;a.f=f;a.h=h;a.i=b;a.m=e;a.j=c;a.l=n;a.g=q;a.s=p;d=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=d;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;l.Kb.Nb(l.u,l.pa);a=l.u.ma;m=l.u.na;k=l.u.oa;d=l.u.ja;f=l.u.ka;h=l.u.la;l.Kb.Nb(l.u,l.a);l.u.ma=a<l.u.ma?a:l.u.ma;l.u.na=m<l.u.na?m:l.u.na;l.u.oa=k<l.u.oa?k:l.u.oa;l.u.ja=d>l.u.ja?d:l.u.ja;l.u.ka=f>l.u.ka?f:l.u.ka;l.u.la=h>l.u.la?h:l.u.la;null!=l.tb&&(a=l.a.v-l.pa.v,m=l.a.A-l.pa.A,k=l.a.B-l.pa.B,d=l.rc,d.x=a,d.y=m,d.z=k,l.Yb.oc.jc.wd(l.tb,l.u,l.rc));l=g}this.Gb=!1;this.yb=0},Em:function(a){var b,e,c,d,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);c=l*n;d=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=c*this.a.o+d*this.a.i+g*this.a.l;m=c*this.a.f+d*this.a.m+g*this.a.g;g=c*this.a.h+d*this.a.j+g*this.a.s;c=a*this.a.o+b*this.a.i+f*this.a.l;d=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=c;this.a.m=d;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;h=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;g=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;k=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;m=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;e=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;b=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;f=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;g=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;k=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;m=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;l=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;e=this.pa;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Dc;null!=e;){a=e.M;b=e.pa;h=e.ha;f=this.pa;var q,p,g=f.o*h.o+f.f*h.i+f.h*h.l,k=f.o*h.f+f.f*h.m+f.h*h.g,m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;c=f.i*h.f+f.m*h.m+f.j*h.g;d=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=c;b.j=d;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;b=e.a;h=e.ha;f=this.a;g=f.o*h.o+f.f*h.i+f.h*h.l;k=f.o*h.f+f.f*h.m+f.h*h.g;m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;c=f.i*h.f+f.m*h.m+f.j*h.g;d=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=c;b.j=d;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;e.Kb.Nb(e.u,e.pa);b=e.u.ma;f=e.u.na;h=e.u.oa;g=e.u.ja;k=e.u.ka;m=e.u.la;e.Kb.Nb(e.u,e.a);e.u.ma=b<e.u.ma?b:e.u.ma;e.u.na=f<e.u.na?f:e.u.na;e.u.oa=h<e.u.oa?h:e.u.oa;e.u.ja=g>e.u.ja?g:e.u.ja;e.u.ka=k>e.u.ka?k:e.u.ka;e.u.la=m>e.u.la?m:e.u.la;null!=e.tb&&(b=e.a.v-e.pa.v,f=e.a.A-e.pa.A,h=e.a.B-e.pa.B,g=e.rc,g.x=b,g.y=f,g.z=h,e.Yb.oc.jc.wd(e.tb,e.u,e.rc));e=a}this.Gb=!1;this.yb=0},im:function(){var a=new xa,b,e,c,d;b=this.a.o;e=this.a.m;c=this.a.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,c=(this.a.i-this.a.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,c=(this.a.h+this.a.l)*f,d=(this.a.g-this.a.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,c=(this.a.j+this.a.g)*f,d=(this.a.h-this.a.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=c;a.w=d;return a},jm:function(a){var b,e,c,d;b=this.a.o;e=this.a.m;c=this.a.s;d=b+e+c;var f;0<d?(f=Math.sqrt(d+1),d=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,c=(this.a.i-this.a.f)*f):b>e?b>c?(f=Math.sqrt(b-e-c+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,c=(this.a.h+this.a.l)*f,d=(this.a.g-this.a.j)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f):e>c?(f=Math.sqrt(e-c-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,c=(this.a.j+this.a.g)*f,d=(this.a.h-this.a.l)*f):(f=Math.sqrt(c-b-e+1),c=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,d=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=c;a.w=d},Qn:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;var d=a.w,f=2*b,h=2*e,l=2*c;a=b*f;var g=e*h;c*=l;var k=b*h;e*=l;b*=l;f*=d;h*=d;d*=l;this.a.o=1-g-c;this.a.f=k-d;this.a.h=b+h;this.a.i=k+d;this.a.m=1-a-c;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;d=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;l=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;e=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=g;this.S=d;this.T=l;this.U=c;this.V=k;this.W=h;this.X=e;this.Y=b;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;d=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;l=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;k=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;e=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=g;this.S=d;this.T=l;this.U=c;this.V=k;this.W=h;this.X=e;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Dc;null!=a;){g=a.M;d=a.pa;c=a.ha;var l=this.pa,m,n,q,p,k=l.o*c.o+l.f*c.i+l.h*c.l,h=l.o*c.f+l.f*c.m+l.h*c.g;e=l.o*c.h+l.f*c.j+l.h*c.s;b=l.i*c.o+l.m*c.i+l.j*c.l;f=l.i*c.f+l.m*c.m+l.j*c.g;m=l.i*c.h+l.m*c.j+l.j*c.s;n=l.l*c.o+l.g*c.i+l.s*c.l;q=l.l*c.f+l.g*c.m+l.s*c.g;p=l.l*c.h+l.g*c.j+l.s*c.s;d.o=k;d.f=h;d.h=e;d.i=b;d.m=f;d.j=m;d.l=n;d.g=q;d.s=p;k=l.o*c.v+l.f*c.A+l.h*c.B;h=l.i*c.v+l.m*c.A+l.j*c.B;c=l.l*c.v+l.g*c.A+l.s*c.B;d.v=k;d.A=h;d.B=c;d.v+=l.v;d.A+=l.A;d.B+=l.B;d=a.a;c=a.ha;l=this.a;k=l.o*c.o+l.f*c.i+l.h*c.l;h=l.o*c.f+l.f*c.m+l.h*c.g;e=l.o*c.h+l.f*c.j+l.h*c.s;b=l.i*c.o+l.m*c.i+l.j*c.l;f=l.i*c.f+l.m*c.m+l.j*c.g;m=l.i*c.h+l.m*c.j+l.j*c.s;n=l.l*c.o+l.g*c.i+l.s*c.l;q=l.l*c.f+l.g*c.m+l.s*c.g;p=l.l*c.h+l.g*c.j+l.s*c.s;d.o=k;d.f=h;d.h=e;d.i=b;d.m=f;d.j=m;d.l=n;d.g=q;d.s=p;k=l.o*c.v+l.f*c.A+l.h*c.B;h=l.i*c.v+l.m*c.A+l.j*c.B;c=l.l*c.v+l.g*c.A+l.s*c.B;d.v=k;d.A=h;d.B=c;d.v+=l.v;d.A+=l.A;d.B+=l.B;a.Kb.Nb(a.u,a.pa);d=a.u.ma;l=a.u.na;c=a.u.oa;k=a.u.ja;h=a.u.ka;e=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=d<a.u.ma?d:a.u.ma;a.u.na=l<a.u.na?l:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=k>a.u.ja?k:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=e>a.u.la?e:a.u.la;null!=a.tb&&(d=a.a.v-a.pa.v,l=a.a.A-a.pa.A,c=a.a.B-a.pa.B,k=a.rc,k.x=d,k.y=l,k.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=g}this.Gb=!1;this.yb=0},wm:function(){var a=this.a,b=new Ja;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},xm:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},eo:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,c,d,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Dc;null!=a;){b=a.M;e=a.pa;d=a.ha;c=this.pa;var k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=c,f.z=d,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}this.Gb=!1;this.yb=0},Tg:function(){return this.Pc},se:function(){var a=new P;a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id;return a},te:function(a){a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id},Ug:function(){var a=new ql;a.mass=this.Pc;var b=a.localInertia;b.e00=this.Ad;b.e01=this.Bd;b.e02=this.Cd;b.e10=this.Dd;b.e11=this.Ed;b.e12=this.Fd;b.e20=this.Gd;b.e21=this.Hd;b.e22=this.Id;return a},Vg:function(a){a.mass=this.Pc;a=a.localInertia;a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id},Om:function(a){this.Pc=a.mass;a=a.localInertia;this.Ad=a.e00;this.Bd=a.e01;this.Cd=a.e02;this.Dd=a.e10;this.Ed=a.e11;this.Fd=a.e12;this.Gd=a.e20;this.Hd=a.e21;this.Id=a.e22;a=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd);if(0<this.Pc&&0<a&&0==this.Lb){this.$a=1/this.Pc;a=this.Ed*this.Id-this.Fd*this.Hd;var b=this.Dd*this.Id-this.Fd*this.Gd,e=this.Dd*this.Hd-this.Ed*this.Gd,c=this.Bd*this.Id-this.Cd*this.Hd,d=this.Ad*this.Id-this.Cd*this.Gd,f=this.Ad*this.Hd-this.Bd*this.Gd,h=this.Bd*this.Fd-this.Cd*this.Ed,l=this.Ad*this.Fd-this.Cd*this.Dd,g=this.Ad*this.Ed-this.Bd*this.Dd,k=this.Ad*a-this.Bd*b+this.Cd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-c*k;this.Ta=h*k;this.Ua=-b*k;this.Va=d*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.pi=this.Ra;this.ri=this.Sa;this.si=this.Ta;this.ti=this.Ua;this.ui=this.Va;this.vi=this.Wa;this.wi=this.Xa;this.xi=this.Ya;this.yi=this.Za;this.Ra=this.pi*this.N.x;this.Sa=this.ri*this.N.x;this.Ta=this.si*this.N.x;this.Ua=this.ti*this.N.y;this.Va=this.ui*this.N.y;this.Wa=this.vi*this.N.y;this.Xa=this.wi*this.N.z;this.Ya=this.xi*this.N.z;this.Za=this.yi*this.N.z}else this.yi=this.xi=this.wi=this.vi=this.ui=this.ti=this.si=this.ri=this.pi=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Lb&&(this.Lb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},ji:function(){var a=this.N;return new u(a.x,a.y,a.z)},Pm:function(a){var b=this.N;b.x=a.x;b.y=a.y;b.z=a.z;var e,c,d,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;c=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=c;this.U=d;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},qe:function(){var a=new u;a.x=this.gb;a.y=this.hb;a.z=this.ib;return a},re:function(a){a.x=this.gb;a.y=this.hb;a.z=this.ib},Nm:function(a){1==this.Lb?this.ib=this.hb=this.gb=0:(this.gb=a.x,this.hb=a.y,this.ib=a.z);this.Gb=!1;this.yb=0},Jc:function(){var a=new u;a.x=this.kb;a.y=this.lb;a.z=this.mb;return a},Kc:function(a){a.x=this.gb;a.y=this.hb;a.z=this.ib},ko:function(a){1==this.Lb?this.mb=this.lb=this.kb=0:(this.kb=a.x,this.lb=a.y,this.mb=a.z);this.Gb=!1;this.yb=0},cb:function(a){if(1!=this.Lb){var b,e;b=a.x;e=a.y;a=a.z;this.gb+=b;this.hb+=e;this.ib+=a}this.Gb=!1;this.yb=0},ua:function(a){if(1!=this.Lb){var b,e;b=a.x;e=a.y;a=a.z;this.kb+=b;this.lb+=e;this.mb+=a}this.Gb=!1;this.yb=0},uc:function(a,b){var e,c;e=a.x;c=a.y;a=a.z;this.gb+=e*this.$a;this.hb+=c*this.$a;this.ib+=a*this.$a;var d,f,h;d=b.x;f=b.y;h=b.z;d-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*c;a=h*e-d*a;d=d*c-f*e;e=this.P*b+this.R*a+this.S*d;c=this.T*b+this.U*a+this.V*d;b=this.W*b+this.X*a+this.Y*d;this.kb+=e;this.lb+=c;this.mb+=b;this.Gb=!1;this.yb=0},vc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.gb+=b*this.$a;this.hb+=e*this.$a;this.ib+=a*this.$a;this.Gb=!1;this.yb=0},Mb:function(a){var b,e,c;b=a.x;e=a.y;c=a.z;var d;a=this.P*b+this.R*e+this.S*c;d=this.T*b+this.U*e+this.V*c;b=this.W*b+this.X*e+this.Y*c;this.kb+=a;this.lb+=d;this.mb+=b;this.Gb=!1;this.yb=0},pc:function(a,b){var e,c;e=a.x;c=a.y;a=a.z;this.Mh+=e;this.Nh+=c;this.Oh+=a;var d,f;d=b.x;f=b.y;b=b.z;d-=this.a.v;f-=this.a.A;b-=this.a.B;this.vf+=f*a-b*c;this.wf+=b*e-d*a;this.xf+=d*c-f*e;this.Gb=!1;this.yb=0},qc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.Mh+=b;this.Nh+=e;this.Oh+=a;this.Gb=!1;this.yb=0},Ac:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.vf+=b;this.wf+=e;this.xf+=a;this.Gb=!1;this.yb=0},fd:function(){return this.eh},Lm:function(a){this.eh=a;this.Gb=!1;this.yb=0},ue:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var c,d;c=this.a.o*b+this.a.i*e+this.a.l*a;d=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=c;e=d;c=new u;c.x=b;c.y=e;c.z=a;return c},Ue:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;e-=this.a.v;c-=this.a.A;d-=this.a.B;var f;a=this.a.o*e+this.a.i*c+this.a.l*d;f=this.a.f*e+this.a.m*c+this.a.g*d;e=this.a.h*e+this.a.j*c+this.a.s*d;b.x=a;b.y=f;b.z=e},Ve:function(a){var b,e;b=a.x;e=a.y;a=a.z;var c,d;c=this.a.o*b+this.a.i*e+this.a.l*a;d=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=c;e=d;c=new u;c.x=b;c.y=e;c.z=a;return c},Mf:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;var f;a=this.a.o*e+this.a.i*c+this.a.l*d;f=this.a.f*e+this.a.m*c+this.a.g*d;e=this.a.h*e+this.a.j*c+this.a.s*d;b.x=a;b.y=f;b.z=e},Pj:function(a){var b,e;b=a.x;e=a.y;a=a.z;var c,d;c=this.a.o*b+this.a.f*e+this.a.h*a;d=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=c+this.a.v;e=d+this.a.A;a+=this.a.B;c=new u;c.x=b;c.y=e;c.z=a;return c},Nl:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;var f;a=this.a.o*e+this.a.f*c+this.a.h*d;f=this.a.i*e+this.a.m*c+this.a.j*d;d=this.a.l*e+this.a.g*c+this.a.s*d;e=a+this.a.v;c=f+this.a.A;d+=this.a.B;b.x=e;b.y=c;b.z=d},am:function(a){var b,e;b=a.x;e=a.y;a=a.z;var c,d;c=this.a.o*b+this.a.f*e+this.a.h*a;d=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=c;e=d;c=new u;c.x=b;c.y=e;c.z=a;return c},bm:function(a,b){var e,c,d;e=a.x;c=a.y;d=a.z;var f;a=this.a.o*e+this.a.f*c+this.a.h*d;f=this.a.i*e+this.a.m*c+this.a.j*d;e=this.a.l*e+this.a.g*c+this.a.s*d;b.x=a;b.y=f;b.z=e},gm:function(){return this.zg},ki:function(){return this.Dc},Wg:function(){return this.Ae},Lc:function(){return this.Ob},Xg:function(){return this.kh},Yd:function(){return this.ze},Hb:function(a){null==this.Dc?this.Dc=a:(this.Fi.M=a,a.ia=this.Fi);this.Fi=a;this.zg++;a.Yb=this;if(null!=this.oc){var b=this.oc;a.tb=b.jc.Vh(a,a.u);a.Cc=b.Xl++;b.zg++}this.Oj();for(a=this.Dc;null!=a;){var b=a.M,e=a.pa,c=a.ha,d=this.pa,f,h,l,g,k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=d,f.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}},io:function(a){var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Dc&&(this.Dc=this.Dc.M);a==this.Fi&&(this.Fi=this.Fi.ia);a.M=null;a.ia=null;this.zg--;a.Yb=null;if(null!=this.oc){b=this.oc;b.jc.Wh(a.tb);a.tb=null;a.Cc=-1;for(var c=a.Yb.Ob;null!=c;){var e=c.M,d=c.Zd;if(d.Zb==a||d.$b==a){c=c.Qc;c.Gb=!1;c.yb=0;var c=b.Kh,f=d.ia,h=d.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d==c.zd&&(c.zd=c.zd.M);d==c.ye&&(c.ye=c.ye.ia);d.M=null;d.ia=null;d.Td&&(f=d.Zb.yd,h=d.$b.yd,f==h&&(h=null),null!=f&&f.endContact(d),null!=h&&h.endContact(d));f=d.rb.ia;h=d.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.rb==d.C.Ob&&(d.C.Ob=d.C.Ob.M);d.rb==d.C.kc&&(d.C.kc=d.C.kc.ia);d.rb.M=null;d.rb.ia=null;f=d.sb.ia;h=d.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);d.sb==d.D.Ob&&(d.D.Ob=d.D.Ob.M);d.sb==d.D.kc&&(d.D.kc=d.D.kc.ia);d.sb.M=null;d.sb.ia=null;d.C.Ae--;d.D.Ae--;d.rb.Qc=null;d.sb.Qc=null;d.rb.Zd=null;d.sb.Zd=null;d.Zb=null;d.$b=null;d.C=null;d.D=null;d.Td=!1;d.$i.Xe();d.Ja.Xe();d.Lh=null;f=d.Ye;f.Zb=null;f.$b=null;f.C=null;f.D=null;f.pj=null;f.qj=null;d.M=c.lg;c.lg=d;c.Bi--}c=e}b.zg--}this.Oj();for(a=this.Dc;null!=a;){var b=a.M,e=a.pa,c=a.ha,d=this.pa,l,g,k,m,n,q,p,f=d.o*c.o+d.f*c.i+d.h*c.l,h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.rc,f.x=e,f.y=d,f.z=c,a.Yb.oc.jc.wd(a.tb,a.u,a.rc));a=b}},Cm:function(){return this.Lb},Qm:function(a){this.Lb=a;this.Oj()},Sm:function(){this.Gb=!1;this.yb=0},Rm:function(){this.Gb=!0;this.yb=0},li:function(){return this.yb},lo:function(a){this.Bk=a;this.Gb=!1;this.yb=0},pe:function(){return this.$j},Mm:function(a){this.$j=a},Ec:function(){return this.Qj},jo:function(a){this.Qj=a},rm:function(){return this.ia},cm:function(){return this.M}};Ga.prototype={uc:function(){return this.Xj},ue:function(a){this.Xj=a},Jc:function(){return this.hk},Ve:function(a){this.hk=a},Ac:function(){var a=this.ha,b=new Ja;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Ec:function(a){var b=this.ha;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Yd:function(){var a=this.a,b=new Ja;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},pe:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Ue:function(a){var b=this.ha;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Yb)for(a=this.Yb,a.Oj(),b=a.Dc;null!=b;){var e=b.M,c=b.pa,d=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;c=b.a;d=b.ha;f=a.a;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;b.Kb.Nb(b.u,b.pa);c=b.u.ma;f=b.u.na;d=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=c<b.u.ma?c:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.tb&&(c=b.a.v-b.pa.v,f=b.a.A-b.pa.A,d=b.a.B-b.pa.B,h=b.rc,h.x=c,h.y=f,h.z=d,b.Yb.oc.jc.wd(b.tb,b.u,b.rc));b=e}},qc:function(){return this.Dk},te:function(a){this.Dk=a;if(null!=this.Yb){a=this.Yb;a.Oj();for(var b=a.Dc;null!=b;){var e=b.M,c=b.pa,d=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;c=b.a;d=b.ha;f=a.a;h=f.o*d.o+f.f*d.i+f.h*d.l;l=f.o*d.f+f.f*d.m+f.h*d.g;g=f.o*d.h+f.f*d.j+f.h*d.s;k=f.i*d.o+f.m*d.i+f.j*d.l;m=f.i*d.f+f.m*d.m+f.j*d.g;n=f.i*d.h+f.m*d.j+f.j*d.s;q=f.l*d.o+f.g*d.i+f.s*d.l;p=f.l*d.f+f.g*d.m+f.s*d.g;r=f.l*d.h+f.g*d.j+f.s*d.s;c.o=h;c.f=l;c.h=g;c.i=k;c.m=m;c.j=n;c.l=q;c.g=p;c.s=r;h=f.o*d.v+f.f*d.A+f.h*d.B;l=f.i*d.v+f.m*d.A+f.j*d.B;d=f.l*d.v+f.g*d.A+f.s*d.B;c.v=h;c.A=l;c.B=d;c.v+=f.v;c.A+=f.A;c.B+=f.B;b.Kb.Nb(b.u,b.pa);c=b.u.ma;f=b.u.na;d=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=c<b.u.ma?c:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.tb&&(c=b.a.v-b.pa.v,f=b.a.A-b.pa.A,d=b.a.B-b.pa.B,h=b.rc,h.x=c,h.y=f,h.z=d,b.Yb.oc.jc.wd(b.tb,b.u,b.rc));b=e}}},ua:function(){return this.u.clone()},cb:function(a){a.de(this.u)},vc:function(){return this.Kb},Kc:function(){return this.Yb},Hb:function(){return this.Tj},qe:function(a){this.Tj=a},Mb:function(){return this.Uj},re:function(a){this.Uj=a},pc:function(){return this.yd},se:function(a){this.yd=a},fd:function(){return this.ia},Lc:function(){return this.M}};wh.Ve=1;wh.Mf=2;wh.BRUTE_FORCE=1;wh.BVH=2;Yc.vm=0;Yc.Ue=1;Yc.ji=2;Yc.Ug=3;Yc.Tg=4;Yc.Vg=5;Yc.Xg=0;Yc.Wg=5;Yc.SPHERE=0;Yc.BOX=1;Yc.CYLINDER=2;Yc.CONE=3;Yc.CAPSULE=4;Yc.CONVEX_HULL=5;ij.re=1;He.Mb=0;u.numCreations=0;F.defaultFriction=.2;F.defaultRestitution=.2;F.defaultDensity=1;F.defaultCollisionGroup=1;F.defaultCollisionMask=1;F.maxTranslationPerStep=20;F.maxRotationPerStep=3.14159265358979;F.bvhProxyPadding=.1;F.bvhIncrementalCollisionThreshold=.45;F.defaultGJKMargin=.05;F.enableGJKCaching=!0;F.maxEPAVertices=128;F.maxEPAPolyhedronFaces=128;F.contactEnableBounceThreshold=.5;F.velocityBaumgarte=.2;F.positionSplitImpulseBaumgarte=.4;F.positionNgsBaumgarte=1;F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;F.defaultContactPositionCorrectionAlgorithm=0;F.alternativeContactPositionCorrectionAlgorithm=1;F.contactPersistenceThreshold=.05;F.maxManifoldPoints=4;F.defaultJointConstraintSolverType=0;F.defaultJointPositionCorrectionAlgorithm=0;F.jointWarmStartingFactorForBaungarte=.8;F.jointWarmStartingFactor=.95;F.minSpringDamperDampingRatio=1E-6;F.minRagdollMaxSwingAngle=1E-6;F.maxJacobianRows=6;F.directMlcpSolverEps=1E-9;F.islandInitialRigidBodyArraySize=128;F.islandInitialConstraintArraySize=128;F.sleepingVelocityThreshold=.2;F.sleepingAngularVelocityThreshold=.5;F.sleepingTimeThreshold=1;F.disableSleeping=!1;F.linearSlop=.005;F.angularSlop=.017453292519943278;dc.cb=new dc;Mc.Dm=0;Mc.gm=1;Mc.cm=2;Mc.bm=257;Mc.am=258;Mc.Nl=259;Mc.SUCCEEDED=0;Mc.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;Mc.GJK_DID_NOT_CONVERGE=2;Mc.EPA_FAILED_TO_INIT=257;Mc.EPA_FAILED_TO_ADD_VERTEX=258;Mc.EPA_DID_NOT_CONVERGE=259;P.numCreations=0;L.numCreations=0;Na.POSITIVE_INFINITY=1/0;Na.NEGATIVE_INFINITY=-1/0;Na.PI=3.14159265358979;Na.TWO_PI=6.28318530717958;Na.HALF_PI=1.570796326794895;Na.TO_RADIANS=.017453292519943278;Na.TO_DEGREES=57.29577951308238;xa.numCreations=0;gf.se=8;gf.te=4;gf.qe=8;Ad.broadPhaseCollisionTime=0;Ad.narrowPhaseCollisionTime=0;Ad.dynamicsTime=0;Ad.totalTime=0;Xb.ue=0;Xb.xm=1;Xb.lm=2;Xb.BAUMGARTE=0;Xb.SPLIT_IMPULSE=1;Xb.NGS=2;$d.pe=1;$d.Yd=2;Sb.wm=0;Sb.um=1;Sb.ki=2;Sb.qm=3;Sb.Em=4;Sb.rm=5;Sb.SPHERICAL=0;Sb.REVOLUTE=1;Sb.CYLINDRICAL=2;Sb.PRISMATIC=3;Sb.UNIVERSAL=4;Sb.RAGDOLL=5;Ee.im=0;Ee.li=1;Ee.ITERATIVE=0;Ee.DIRECT=1;Pd.Pj=0;Pd.Cm=1;Pd.jm=2;Pd.DYNAMIC=0;Pd.STATIC=1;Pd.KINEMATIC=2;window.OIMO={};window.OIMO.BroadPhase=yb;yb.prototype.createProxy=yb.prototype.Vh;yb.prototype.destroyProxy=yb.prototype.Wh;yb.prototype.moveProxy=yb.prototype.wd;yb.prototype.isOverlapping=yb.prototype.Mb;yb.prototype.collectPairs=yb.prototype.Ii;yb.prototype.getProxyPairList=yb.prototype.ua;yb.prototype.isIncremental=yb.prototype.Hb;yb.prototype.getTestCount=yb.prototype.cb;yb.prototype.rayCast=yb.prototype.Vd;yb.prototype.convexCast=yb.prototype.Bf;yb.prototype.aabbTest=yb.prototype.qh;window.OIMO.Geometry=ed;ed.prototype.getType=ed.prototype.cb;ed.prototype.getVolume=ed.prototype.ua;ed.prototype.rayCast=ed.prototype.Vd;window.OIMO.ConvexGeometry=wb;wb.prototype.getGjkMergin=wb.prototype.sn;wb.prototype.setGjkMergin=wb.prototype.Xn;wb.prototype.computeLocalSupportingVertex=wb.prototype.Pd;wb.prototype.rayCast=wb.prototype.Vd;window.OIMO.BroadPhaseProxyCallback=Nc;Nc.prototype.process=Nc.prototype.process;window.OIMO.BroadPhaseType=wh;window.OIMO.Proxy=Vc;Vc.prototype.getId=Vc.prototype.Hb;Vc.prototype.getFatAabb=Vc.prototype.ua;Vc.prototype.getFatAabbTo=Vc.prototype.cb;window.OIMO.ProxyPair=Ae;Ae.prototype.getProxy1=Ae.prototype.ua;Ae.prototype.getProxy2=Ae.prototype.cb;Ae.prototype.getNext=Ae.prototype.Hb;window.OIMO.BruteForceBroadPhase=nc;nc.prototype.createProxy=nc.prototype.Vh;nc.prototype.destroyProxy=nc.prototype.Wh;nc.prototype.moveProxy=nc.prototype.wd;nc.prototype.collectPairs=nc.prototype.Ii;nc.prototype.rayCast=nc.prototype.Vd;nc.prototype.convexCast=nc.prototype.Bf;nc.prototype.aabbTest=nc.prototype.qh;window.OIMO.BvhBroadPhase=gc;gc.prototype.createProxy=gc.prototype.Vh;gc.prototype.destroyProxy=gc.prototype.Wh;gc.prototype.moveProxy=gc.prototype.wd;gc.prototype.collectPairs=gc.prototype.Ii;gc.prototype.rayCast=gc.prototype.Vd;gc.prototype.convexCast=gc.prototype.Bf;gc.prototype.aabbTest=gc.prototype.qh;gc.prototype.getTreeBalance=gc.prototype.Hn;window.OIMO.Aabb=Sa;Sa.prototype.init=Sa.prototype.za;Sa.prototype.getMin=Sa.prototype.Jc;Sa.prototype.getMinTo=Sa.prototype.Kc;Sa.prototype.setMin=Sa.prototype.Yd;Sa.prototype.getMax=Sa.prototype.Ac;Sa.prototype.getMaxTo=Sa.prototype.Ec;Sa.prototype.setMax=Sa.prototype.fd;Sa.prototype.getCenter=Sa.prototype.Hb;Sa.prototype.getCenterTo=Sa.prototype.Mb;Sa.prototype.getExtents=Sa.prototype.pc;Sa.prototype.getExtentsTo=Sa.prototype.qc;Sa.prototype.combine=Sa.prototype.ua;Sa.prototype.combined=Sa.prototype.cb;Sa.prototype.overlap=Sa.prototype.Lc;Sa.prototype.getIntersection=Sa.prototype.uc;Sa.prototype.getIntersectionTo=Sa.prototype.vc;Sa.prototype.copyFrom=Sa.prototype.de;Sa.prototype.clone=Sa.prototype.clone;window.OIMO.BoxGeometry=ke;ke.prototype.getHalfExtents=ke.prototype.tn;ke.prototype.getHalfExtentsTo=ke.prototype.un;ke.prototype.computeLocalSupportingVertex=ke.prototype.Pd;window.OIMO.CapsuleGeometry=ce;ce.prototype.getRadius=ce.prototype.Xh;ce.prototype.getHalfHeight=ce.prototype.Bj;ce.prototype.computeLocalSupportingVertex=ce.prototype.Pd;window.OIMO.ConeGeometry=Td;Td.prototype.getRadius=Td.prototype.Xh;Td.prototype.getHalfHeight=Td.prototype.Bj;Td.prototype.computeLocalSupportingVertex=Td.prototype.Pd;window.OIMO.ConvexHullGeometry=je;je.prototype.getVertices=je.prototype.Ln;je.prototype.computeLocalSupportingVertex=je.prototype.Pd;window.OIMO.CylinderGeometry=Sd;Sd.prototype.getRadius=Sd.prototype.Xh;Sd.prototype.getHalfHeight=Sd.prototype.Bj;Sd.prototype.computeLocalSupportingVertex=Sd.prototype.Pd;window.OIMO.GeometryType=Yc;window.OIMO.RayCastHit=fj;window.OIMO.SphereGeometry=Rd;Rd.prototype.getRadius=Rd.prototype.Xh;Rd.prototype.computeLocalSupportingVertex=Rd.prototype.Pd;window.OIMO.CollisionMatrix=cg;cg.prototype.getDetector=cg.prototype.ua;window.OIMO.DetectorResult=ae;ae.prototype.getMaxDepth=ae.prototype.mm;ae.prototype.clear=ae.prototype.clear;window.OIMO.DetectorResultPoint=ll;window.OIMO.Detector=Uc;Uc.prototype.detect=Uc.prototype.hm;window.OIMO.BoxBoxDetector=ij;window.OIMO.CapsuleCapsuleDetector=hj;window.OIMO.GjkEpaDetector=gj;window.OIMO.SphereBoxDetector=Sg;window.OIMO.SphereCapsuleDetector=Rf;window.OIMO.SphereSphereDetector=Fk;window.OIMO.Vec3=u;u.prototype.init=u.prototype.za;u.prototype.zero=u.prototype.Z;u.prototype.add=u.prototype.Lc;u.prototype.addScaled=u.prototype.ua;u.prototype.sub=u.prototype.ue;u.prototype.scale=u.prototype.se;u.prototype.scale3=u.prototype.Ve;u.prototype.dot=u.prototype.Yd;u.prototype.cross=u.prototype.Hb;u.prototype.addEq=u.prototype.fd;u.prototype.addScaledEq=u.prototype.cb;u.prototype.subEq=u.prototype.Ue;u.prototype.scaleEq=u.prototype.te;u.prototype.scale3Eq=u.prototype.Mf;u.prototype.crossEq=u.prototype.Mb;u.prototype.mulMat3=u.prototype.pc;u.prototype.mulMat4=u.prototype.uc;u.prototype.mulTransform=u.prototype.Ac;u.prototype.mulMat3Eq=u.prototype.qc;u.prototype.mulMat4Eq=u.prototype.vc;u.prototype.mulTransformEq=u.prototype.Ec;u.prototype.length=u.prototype.length;u.prototype.lengthSq=u.prototype.pe;u.prototype.normalized=u.prototype.re;u.prototype.normalize=u.prototype.qe;u.prototype.negate=u.prototype.Jc;u.prototype.negateEq=u.prototype.Kc;u.prototype.copyFrom=u.prototype.de;u.prototype.clone=u.prototype.clone;u.prototype.toString=u.prototype.toString;window.OIMO.Transform=Ja;Ja.prototype.identity=Ja.prototype.Wf;Ja.prototype.getPosition=Ja.prototype.Hb;Ja.prototype.getPositionTo=Ja.prototype.Mb;Ja.prototype.setPosition=Ja.prototype.Ec;Ja.prototype.translate=Ja.prototype.Lc;Ja.prototype.getRotation=Ja.prototype.pc;Ja.prototype.getRotationTo=Ja.prototype.qc;Ja.prototype.setRotation=Ja.prototype.Jc;Ja.prototype.setRotationXyz=Ja.prototype.Kc;Ja.prototype.rotate=Ja.prototype.uc;Ja.prototype.rotateXyz=Ja.prototype.vc;Ja.prototype.getOrientation=Ja.prototype.ua;Ja.prototype.getOrientationTo=Ja.prototype.cb;Ja.prototype.setOrientation=Ja.prototype.Ac;Ja.prototype.clone=Ja.prototype.clone;Ja.prototype.copyFrom=Ja.prototype.de;window.OIMO.Setting=F;window.OIMO.GjkEpa=dc;dc.prototype.computeClosestPoints=dc.prototype.ua;dc.prototype.computeDistance=dc.prototype.cb;dc.prototype.convexCast=dc.prototype.Bf;dc.prototype.rayCast=dc.prototype.Vd;dc.getInstance=dc.pc;window.OIMO.GjkEpaResultState=Mc;window.OIMO.SimplexUtil=be;be.projectOrigin2=be.qc;be.projectOrigin3=be.uc;be.projectOrigin4=be.vc;window.OIMO.Mat3=P;P.prototype.init=P.prototype.za;P.prototype.identity=P.prototype.Wf;P.prototype.add=P.prototype.Ac;P.prototype.sub=P.prototype.Ug;P.prototype.scale=P.prototype.Mf;P.prototype.mul=P.prototype.re;P.prototype.addEq=P.prototype.Ec;P.prototype.subEq=P.prototype.Vg;P.prototype.scaleEq=P.prototype.Tg;P.prototype.mulEq=P.prototype.se;P.prototype.prependScale=P.prototype.Ue;P.prototype.appendScale=P.prototype.Lc;P.prototype.prependRotation=P.prototype.te;P.prototype.appendRotation=P.prototype.Jc;P.prototype.prependScaleEq=P.prototype.Ve;P.prototype.appendScaleEq=P.prototype.fd;P.prototype.prependRotationEq=P.prototype.ue;P.prototype.appendRotationEq=P.prototype.Kc;P.prototype.transpose=P.prototype.ji;P.prototype.transposeEq=P.prototype.ki;P.prototype.determinant=P.prototype.Yd;P.prototype.trace=P.prototype.Xg;P.prototype.inverse=P.prototype.pe;P.prototype.inverseEq=P.prototype.qe;P.prototype.toArray=P.prototype.Wg;P.prototype.copyFrom=P.prototype.de;P.prototype.clone=P.prototype.clone;P.prototype.fromQuat=P.prototype.Hb;P.prototype.toQuat=P.prototype.Pj;P.prototype.fromEulerXyz=P.prototype.cb;P.prototype.toEulerXyz=P.prototype.li;P.prototype.getRow=P.prototype.uc;P.prototype.getCol=P.prototype.pc;P.prototype.getRowTo=P.prototype.vc;P.prototype.getColTo=P.prototype.qc;P.prototype.fromRows=P.prototype.Mb;P.prototype.fromCols=P.prototype.ua;P.prototype.toString=P.prototype.toString;window.OIMO.Mat4=L;L.prototype.init=L.prototype.za;L.prototype.identity=L.prototype.Wf;L.prototype.add=L.prototype.pc;L.prototype.sub=L.prototype.Mf;L.prototype.scale=L.prototype.Ue;L.prototype.mul=L.prototype.Yd;L.prototype.addEq=L.prototype.qc;L.prototype.subEq=L.prototype.Tg;L.prototype.scaleEq=L.prototype.Ve;L.prototype.mulEq=L.prototype.pe;L.prototype.prependScale=L.prototype.te;L.prototype.appendScale=L.prototype.Ac;L.prototype.prependRotation=L.prototype.re;L.prototype.appendRotation=L.prototype.uc;L.prototype.prependTranslation=L.prototype.ki;L.prototype.appendTranslation=L.prototype.ua;L.prototype.prependScaleEq=L.prototype.ue;L.prototype.appendScaleEq=L.prototype.Ec;L.prototype.prependRotationEq=L.prototype.se;L.prototype.appendRotationEq=L.prototype.vc;L.prototype.prependTranslationEq=L.prototype.li;L.prototype.appendTranslationEq=L.prototype.cb;L.prototype.transpose=L.prototype.Wg;L.prototype.transposeEq=L.prototype.Xg;L.prototype.determinant=L.prototype.Jc;L.prototype.trace=L.prototype.Vg;L.prototype.inverse=L.prototype.Lc;L.prototype.inverseEq=L.prototype.fd;L.prototype.lookAt=L.prototype.Mb;L.prototype.perspective=L.prototype.qe;L.prototype.ortho=L.prototype.ji;L.prototype.toArray=L.prototype.Ug;L.prototype.copyFrom=L.prototype.de;L.prototype.fromMat3=L.prototype.Kc;L.prototype.fromTransform=L.prototype.Hb;L.prototype.clone=L.prototype.clone;L.prototype.toString=L.prototype.toString;window.OIMO.MathUtil=Na;Na.abs=Na.abs;Na.sin=Na.sin;Na.cos=Na.cos;Na.tan=Na.tan;Na.asin=Na.asin;Na.acos=Na.acos;Na.atan=Na.atan;Na.safeAsin=Na.fd;Na.safeAcos=Na.Lc;Na.atan2=Na.atan2;Na.sqrt=Na.sqrt;Na.clamp=Na.Hb;Na.rand=Na.Ac;Na.randIn=Na.Ec;Na.randVec3In=Na.Kc;Na.randVec3=Na.Jc;window.OIMO.Pool=Pb;Pb.prototype.vec3=Pb.prototype.Ac;Pb.prototype.mat3=Pb.prototype.qc;Pb.prototype.mat4=Pb.prototype.uc;Pb.prototype.quat=Pb.prototype.vc;Pb.prototype.dispose=Pb.prototype.ua;Pb.prototype.disposeVec3=Pb.prototype.pc;Pb.prototype.disposeMat3=Pb.prototype.cb;Pb.prototype.disposeMat4=Pb.prototype.Hb;Pb.prototype.disposeQuat=Pb.prototype.Mb;window.OIMO.Quat=xa;xa.prototype.identity=xa.prototype.Wf;xa.prototype.init=xa.prototype.za;xa.prototype.add=xa.prototype.ua;xa.prototype.sub=xa.prototype.Ec;xa.prototype.scale=xa.prototype.vc;xa.prototype.addEq=xa.prototype.cb;xa.prototype.subEq=xa.prototype.Jc;xa.prototype.scaleEq=xa.prototype.Ac;xa.prototype.length=xa.prototype.length;xa.prototype.lengthSq=xa.prototype.pc;xa.prototype.dot=xa.prototype.Hb;xa.prototype.normalized=xa.prototype.uc;xa.prototype.normalize=xa.prototype.qc;xa.prototype.setArc=xa.prototype.Kc;xa.prototype.slerp=xa.prototype.Lc;xa.prototype.copyFrom=xa.prototype.de;xa.prototype.clone=xa.prototype.clone;xa.prototype.fromMat3=xa.prototype.Mb;xa.prototype.toMat3=xa.prototype.fd;xa.prototype.toString=xa.prototype.toString;window.OIMO.Contact=lc;lc.prototype.getShape1=lc.prototype.pc;lc.prototype.getShape2=lc.prototype.qc;lc.prototype.isTouching=lc.prototype.sk;lc.prototype.getManifold=lc.prototype.cb;lc.prototype.getContactConstraint=lc.prototype.ua;lc.prototype.getPrev=lc.prototype.Mb;lc.prototype.getNext=lc.prototype.Hb;window.OIMO.ContactLink=dd;dd.prototype.getContact=dd.prototype.ua;dd.prototype.getOther=dd.prototype.Hb;dd.prototype.getPrev=dd.prototype.Mb;dd.prototype.getNext=dd.prototype.cb;window.OIMO.ContactManager=Ge;Ge.prototype.getNumContacts=Ge.prototype.cb;Ge.prototype.getContactList=Ge.prototype.ua;window.OIMO.TimeStep=Al;window.OIMO.World=ab;ab.prototype.step=ab.prototype.pe;ab.prototype.addRigidBody=ab.prototype.cb;ab.prototype.removeRigidBody=ab.prototype.qe;ab.prototype.addJoint=ab.prototype.ua;ab.prototype.removeJoint=ab.prototype.Kl;ab.prototype.setDebugDraw=ab.prototype.re;ab.prototype.getDebugDraw=ab.prototype.qc;ab.prototype.debugDraw=ab.prototype.Hb;ab.prototype.rayCast=ab.prototype.Vd;ab.prototype.convexCast=ab.prototype.Bf;ab.prototype.aabbTest=ab.prototype.qh;ab.prototype.getRigidBodyList=ab.prototype.fd;ab.prototype.getJointList=ab.prototype.vc;ab.prototype.getBroadPhase=ab.prototype.Mb;ab.prototype.getContactManager=ab.prototype.pc;ab.prototype.getNumRigidBodies=ab.prototype.Kc;ab.prototype.getNumJoints=ab.prototype.Ec;ab.prototype.getNumShapes=ab.prototype.Yd;ab.prototype.getNumIslands=ab.prototype.Ac;ab.prototype.getNumVelocityIterations=ab.prototype.Lc;ab.prototype.setNumVelocityIterations=ab.prototype.ue;ab.prototype.getNumPositionIterations=ab.prototype.Jc;ab.prototype.setNumPositionIterations=ab.prototype.te;ab.prototype.getGravity=ab.prototype.uc;ab.prototype.setGravity=ab.prototype.se;window.OIMO.AabbTestCallback=yl;window.OIMO.ContactCallback=fl;window.OIMO.RayCastCallback=ej;window.OIMO.RayCastClosest=hf;hf.prototype.clear=hf.prototype.clear;hf.prototype.process=hf.prototype.process;window.OIMO.DebugDraw=gf;window.OIMO.DebugDrawStyle=xl;window.OIMO.Performance=Ad;window.OIMO.ConstraintSolver=Ib;Ib.prototype.preSolveVelocity=Ib.prototype.xh;Ib.prototype.warmStart=Ib.prototype.Gh;Ib.prototype.solveVelocity=Ib.prototype.Ch;Ib.prototype.postSolveVelocity=Ib.prototype.Li;Ib.prototype.preSolvePosition=Ib.prototype.Pg;Ib.prototype.solvePositionSplitImpulse=Ib.prototype.Bh;Ib.prototype.solvePositionNgs=Ib.prototype.Ah;Ib.prototype.postSolve=Ib.prototype.postSolve;window.OIMO.PositionCorrectionAlgorithm=Xb;window.OIMO.ContactConstraint=zd;zd.prototype.getShape1=zd.prototype.cb;zd.prototype.getShape2=zd.prototype.Hb;zd.prototype.getManifold=zd.prototype.ua;zd.prototype.isTouching=zd.prototype.sk;window.OIMO.Manifold=kc;kc.prototype.getNormal=kc.prototype.Hb;kc.prototype.getNormalTo=kc.prototype.Mb;kc.prototype.getTangent=kc.prototype.uc;kc.prototype.getTangentTo=kc.prototype.vc;kc.prototype.getBinormal=kc.prototype.ua;kc.prototype.getBinormalTo=kc.prototype.cb;kc.prototype.getPoints=kc.prototype.qc;kc.prototype.getNumPoints=kc.prototype.pc;window.OIMO.ManifoldPoint=Wb;Wb.prototype.getPosition1=Wb.prototype.Mb;Wb.prototype.getPosition1To=Wb.prototype.pc;Wb.prototype.getPosition2=Wb.prototype.qc;Wb.prototype.getPosition2To=Wb.prototype.uc;Wb.prototype.getDepth=Wb.prototype.cb;Wb.prototype.isWarmStarted=Wb.prototype.Ac;Wb.prototype.getNormalImpulse=Wb.prototype.Hb;Wb.prototype.getTangentImpulse=Wb.prototype.vc;Wb.prototype.getBinormalImpulse=Wb.prototype.ua;Wb.prototype.isEnabled=Wb.prototype.Ec;window.OIMO.Joint=V;V.prototype.getRigidBody1=V.prototype.ue;V.prototype.getRigidBody2=V.prototype.Ue;V.prototype.getType=V.prototype.Tg;V.prototype.getAnchor1=V.prototype.cb;V.prototype.getAnchor2=V.prototype.Mb;V.prototype.getAnchor1To=V.prototype.Hb;V.prototype.getAnchor2To=V.prototype.pc;V.prototype.getLocalAnchor1=V.prototype.pe;V.prototype.getLocalAnchor2=V.prototype.re;V.prototype.getLocalAnchor1To=V.prototype.qe;V.prototype.getLocalAnchor2To=V.prototype.se;V.prototype.getBasis1=V.prototype.Ec;V.prototype.getBasis2=V.prototype.Kc;V.prototype.getBasis1To=V.prototype.Jc;V.prototype.getBasis2To=V.prototype.Lc;V.prototype.getAllowCollision=V.prototype.ua;V.prototype.setAllowCollision=V.prototype.Ug;V.prototype.getBreakForce=V.prototype.fd;V.prototype.setBreakForce=V.prototype.Vg;V.prototype.getBreakTorque=V.prototype.Yd;V.prototype.setBreakTorque=V.prototype.Wg;V.prototype.getPositionCorrectionAlgorithm=V.prototype.te;V.prototype.setPositionCorrectionAlgorithm=V.prototype.Xg;V.prototype.getAppliedForce=V.prototype.qc;V.prototype.getAppliedForceTo=V.prototype.uc;V.prototype.getAppliedTorque=V.prototype.vc;V.prototype.getAppliedTorqueTo=V.prototype.Ac;V.prototype.getPrev=V.prototype.Mf;V.prototype.getNext=V.prototype.Ve;window.OIMO.CylindricalJoint=sb;sb.prototype.getAxis1=sb.prototype.Eg;sb.prototype.getAxis2=sb.prototype.Gg;sb.prototype.getAxis1To=sb.prototype.Fg;sb.prototype.getAxis2To=sb.prototype.Hg;sb.prototype.getLocalAxis1=sb.prototype.Ig;sb.prototype.getLocalAxis2=sb.prototype.Kg;sb.prototype.getLocalAxis1To=sb.prototype.Jg;sb.prototype.getLocalAxis2To=sb.prototype.Lg;sb.prototype.getTranslationalSpringDamper=sb.prototype.Gn;sb.prototype.getRotationalSpringDamper=sb.prototype.yn;sb.prototype.getTranslationalLimitMotor=sb.prototype.Fn;sb.prototype.getRotationalLimitMotor=sb.prototype.xn;sb.prototype.getAngle=sb.prototype.ol;sb.prototype.getTranslation=sb.prototype.rl;window.OIMO.JointConfig=jc;window.OIMO.CylindricalJointConfig=Fe;Fe.prototype.init=Fe.prototype.za;window.OIMO.JointLink=Xc;Xc.prototype.getContact=Xc.prototype.ua;Xc.prototype.getOther=Xc.prototype.Hb;Xc.prototype.getPrev=Xc.prototype.Mb;Xc.prototype.getNext=Xc.prototype.cb;window.OIMO.JointType=Sb;window.OIMO.PrismaticJoint=Vb;Vb.prototype.getAxis1=Vb.prototype.Eg;Vb.prototype.getAxis2=Vb.prototype.Gg;Vb.prototype.getAxis1To=Vb.prototype.Fg;Vb.prototype.getAxis2To=Vb.prototype.Hg;Vb.prototype.getLocalAxis1=Vb.prototype.Ig;Vb.prototype.getLocalAxis2=Vb.prototype.Kg;Vb.prototype.getLocalAxis1To=Vb.prototype.Jg;Vb.prototype.getLocalAxis2To=Vb.prototype.Lg;Vb.prototype.getSpringDamper=Vb.prototype.Cj;Vb.prototype.getLimitMotor=Vb.prototype.ql;Vb.prototype.getTranslation=Vb.prototype.rl;window.OIMO.PrismaticJointConfig=bg;bg.prototype.init=bg.prototype.za;window.OIMO.RagdollJoint=Za;Za.prototype.getAxis1=Za.prototype.Eg;Za.prototype.getAxis2=Za.prototype.Gg;Za.prototype.getAxis1To=Za.prototype.Fg;Za.prototype.getAxis2To=Za.prototype.Hg;Za.prototype.getLocalAxis1=Za.prototype.Ig;Za.prototype.getLocalAxis2=Za.prototype.Kg;Za.prototype.getLocalAxis1To=Za.prototype.Jg;Za.prototype.getLocalAxis2To=Za.prototype.Lg;Za.prototype.getTwistSpringDamper=Za.prototype.Kn;Za.prototype.getTwistLimitMotor=Za.prototype.Jn;Za.prototype.getSwingSpringDamper=Za.prototype.En;Za.prototype.getSwingAxis=Za.prototype.Cn;Za.prototype.getSwingAxisTo=Za.prototype.Dn;Za.prototype.getSwingAngle=Za.prototype.Bn;Za.prototype.getTwistAngle=Za.prototype.In;window.OIMO.RagdollJointConfig=Qf;Qf.prototype.init=Qf.prototype.za;window.OIMO.RevoluteJoint=Hb;Hb.prototype.getAxis1=Hb.prototype.Eg;Hb.prototype.getAxis2=Hb.prototype.Gg;Hb.prototype.getAxis1To=Hb.prototype.Fg;Hb.prototype.getAxis2To=Hb.prototype.Hg;Hb.prototype.getLocalAxis1=Hb.prototype.Ig;Hb.prototype.getLocalAxis2=Hb.prototype.Kg;Hb.prototype.getLocalAxis1To=Hb.prototype.Jg;Hb.prototype.getLocalAxis2To=Hb.prototype.Lg;Hb.prototype.getSpringDamper=Hb.prototype.Cj;Hb.prototype.getLimitMotor=Hb.prototype.ql;Hb.prototype.getAngle=Hb.prototype.ol;window.OIMO.RevoluteJointConfig=Df;Df.prototype.init=Df.prototype.za;window.OIMO.RotationalLimitMotor=$b;$b.prototype.setLimits=$b.prototype.ua;$b.prototype.setMotor=$b.prototype.cb;$b.prototype.clone=$b.prototype.clone;window.OIMO.SphericalJoint=Qd;Qd.prototype.getSpringDamper=Qd.prototype.Cj;window.OIMO.SphericalJointConfig=ag;ag.prototype.init=ag.prototype.za;window.OIMO.SpringDamper=Mb;Mb.prototype.setSpring=Mb.prototype.ua;Mb.prototype.setSymplecticEuler=Mb.prototype.cb;Mb.prototype.clone=Mb.prototype.clone;window.OIMO.TranslationalLimitMotor=yd;yd.prototype.setLimits=yd.prototype.ua;yd.prototype.setMotor=yd.prototype.cb;yd.prototype.clone=yd.prototype.clone;window.OIMO.UniversalJoint=$a;$a.prototype.getAxis1=$a.prototype.Eg;$a.prototype.getAxis2=$a.prototype.Gg;$a.prototype.getAxis1To=$a.prototype.Fg;$a.prototype.getAxis2To=$a.prototype.Hg;$a.prototype.getLocalAxis1=$a.prototype.Ig;$a.prototype.getLocalAxis2=$a.prototype.Kg;$a.prototype.getLocalAxis1To=$a.prototype.Jg;$a.prototype.getLocalAxis2To=$a.prototype.Lg;$a.prototype.getSpringDamper1=$a.prototype.zn;$a.prototype.getSpringDamper2=$a.prototype.An;$a.prototype.getLimitMotor1=$a.prototype.vn;$a.prototype.getLimitMotor2=$a.prototype.wn;$a.prototype.getAngle1=$a.prototype.qn;$a.prototype.getAngle2=$a.prototype.rn;window.OIMO.UniversalJointConfig=rf;rf.prototype.init=rf.prototype.za;window.OIMO.ConstraintSolverType=Ee;window.OIMO.DirectJointConstraintSolver=uc;uc.prototype.preSolveVelocity=uc.prototype.xh;uc.prototype.warmStart=uc.prototype.Gh;uc.prototype.solveVelocity=uc.prototype.Ch;uc.prototype.postSolveVelocity=uc.prototype.Li;uc.prototype.preSolvePosition=uc.prototype.Pg;uc.prototype.solvePositionSplitImpulse=uc.prototype.Bh;uc.prototype.solvePositionNgs=uc.prototype.Ah;uc.prototype.postSolve=uc.prototype.postSolve;window.OIMO.PgsContactConstraintSolver=ic;ic.prototype.preSolveVelocity=ic.prototype.xh;ic.prototype.warmStart=ic.prototype.Gh;ic.prototype.solveVelocity=ic.prototype.Ch;ic.prototype.preSolvePosition=ic.prototype.Pg;ic.prototype.solvePositionSplitImpulse=ic.prototype.Bh;ic.prototype.solvePositionNgs=ic.prototype.Ah;ic.prototype.postSolve=ic.prototype.postSolve;window.OIMO.PgsJointConstraintSolver=sc;sc.prototype.preSolveVelocity=sc.prototype.xh;sc.prototype.warmStart=sc.prototype.Gh;sc.prototype.solveVelocity=sc.prototype.Ch;sc.prototype.postSolveVelocity=sc.prototype.Li;sc.prototype.preSolvePosition=sc.prototype.Pg;sc.prototype.solvePositionSplitImpulse=sc.prototype.Bh;sc.prototype.solvePositionNgs=sc.prototype.Ah;sc.prototype.postSolve=sc.prototype.postSolve;window.OIMO.MassData=ql;window.OIMO.RigidBody=D;D.prototype.getPosition=D.prototype.lm;D.prototype.getPositionTo=D.prototype.qm;D.prototype.setPosition=D.prototype.Rn;D.prototype.translate=D.prototype.fo;D.prototype.getRotation=D.prototype.um;D.prototype.getRotationTo=D.prototype.vm;D.prototype.setRotation=D.prototype.Vn;D.prototype.setRotationXyz=D.prototype.Zn;D.prototype.rotate=D.prototype.Dm;D.prototype.rotateXyz=D.prototype.Em;D.prototype.getOrientation=D.prototype.im;D.prototype.getOrientationTo=D.prototype.jm;D.prototype.setOrientation=D.prototype.Qn;D.prototype.getTransform=D.prototype.wm;D.prototype.getTransformTo=D.prototype.xm;D.prototype.setTransform=D.prototype.eo;D.prototype.getMass=D.prototype.Tg;D.prototype.getLocalInertia=D.prototype.se;D.prototype.getLocalInertiaTo=D.prototype.te;D.prototype.getMassData=D.prototype.Ug;D.prototype.getMassDataTo=D.prototype.Vg;D.prototype.setMassData=D.prototype.Om;D.prototype.getRotationFactor=D.prototype.ji;D.prototype.setRotationFactor=D.prototype.Pm;D.prototype.getLinearVelocity=D.prototype.qe;D.prototype.getLinearVelocityTo=D.prototype.re;D.prototype.setLinearVelocity=D.prototype.Nm;D.prototype.getAngularVelocity=D.prototype.Jc;D.prototype.getAngularVelocityTo=D.prototype.Kc;D.prototype.setAngularVelocity=D.prototype.ko;D.prototype.addLinearVelocity=D.prototype.cb;D.prototype.addAngularVelocity=D.prototype.ua;D.prototype.applyImpulse=D.prototype.uc;D.prototype.applyLinearImpulse=D.prototype.vc;D.prototype.applyAngularImpulse=D.prototype.Mb;D.prototype.applyForce=D.prototype.pc;D.prototype.applyForceToCenter=D.prototype.qc;D.prototype.applyTorque=D.prototype.Ac;D.prototype.getGravityScale=D.prototype.fd;D.prototype.setGravityScale=D.prototype.Lm;D.prototype.getLocalPoint=D.prototype.ue;D.prototype.getLocalPointTo=D.prototype.Ue;D.prototype.getLocalVector=D.prototype.Ve;D.prototype.getLocalVectorTo=D.prototype.Mf;D.prototype.getWorldPoint=D.prototype.Pj;D.prototype.getWorldPointTo=D.prototype.Nl;D.prototype.getWorldVector=D.prototype.am;D.prototype.getWorldVectorTo=D.prototype.bm;D.prototype.getNumShapes=D.prototype.gm;D.prototype.getShapeList=D.prototype.ki;D.prototype.getNumContectLinks=D.prototype.Wg;D.prototype.getContactLinkList=D.prototype.Lc;D.prototype.getNumJointLinks=D.prototype.Xg;D.prototype.getJointLinkList=D.prototype.Yd;D.prototype.addShape=D.prototype.Hb;D.prototype.removeShape=D.prototype.io;D.prototype.getType=D.prototype.Cm;D.prototype.setType=D.prototype.Qm;D.prototype.wakeUp=D.prototype.Sm;D.prototype.sleep=D.prototype.Rm;D.prototype.getSleepTime=D.prototype.li;D.prototype.setAutoSleep=D.prototype.lo;D.prototype.getLinearDamping=D.prototype.pe;D.prototype.setLinearDamping=D.prototype.Mm;D.prototype.getAngularDamping=D.prototype.Ec;D.prototype.setAngularDamping=D.prototype.jo;D.prototype.getPrev=D.prototype.rm;D.prototype.getNext=D.prototype.cm;window.OIMO.RigidBodyConfig=function(){this.position=new u;this.rotation=new P;this.linearVelocity=new u;this.angularVelocity=new u;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0};window.OIMO.RigidBodyType=Pd;window.OIMO.Shape=Ga;Ga.prototype.getFriction=Ga.prototype.uc;Ga.prototype.setFriction=Ga.prototype.ue;Ga.prototype.getRestitution=Ga.prototype.Jc;Ga.prototype.setRestitution=Ga.prototype.Ve;Ga.prototype.getLocalTransform=Ga.prototype.Ac;Ga.prototype.getLocalTransformTo=Ga.prototype.Ec;Ga.prototype.getTransform=Ga.prototype.Yd;Ga.prototype.getTransformTo=Ga.prototype.pe;Ga.prototype.setLocalTransform=Ga.prototype.Ue;Ga.prototype.getDensity=Ga.prototype.qc;Ga.prototype.setDensity=Ga.prototype.te;Ga.prototype.getAabb=Ga.prototype.ua;Ga.prototype.getAabbTo=Ga.prototype.cb;Ga.prototype.getGeometry=Ga.prototype.vc;Ga.prototype.getRigidBody=Ga.prototype.Kc;Ga.prototype.getCollisionGroup=Ga.prototype.Hb;Ga.prototype.setCollisionGroup=Ga.prototype.qe;Ga.prototype.getCollisionMask=Ga.prototype.Mb;Ga.prototype.setCollisionMask=Ga.prototype.re;Ga.prototype.getContactCallback=Ga.prototype.pc;Ga.prototype.setContactCallback=Ga.prototype.se;Ga.prototype.getPrev=Ga.prototype.fd;Ga.prototype.getNext=Ga.prototype.Lc;window.OIMO.ShapeConfig=function(){this.position=new u;this.rotation=new P;this.friction=F.defaultFriction;this.restitution=F.defaultRestitution;this.density=F.defaultDensity;this.collisionGroup=F.defaultCollisionGroup;this.collisionMask=F.defaultCollisionMask;this.contactCallback=this.geometry=null}})();