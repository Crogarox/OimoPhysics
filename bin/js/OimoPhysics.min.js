/* OimoPhysics (c) 2017 saharan, The MIT License */'use strict';(function(){function Og(){this.position=new t;this.rotation=new O;this.friction=F.defaultFriction;this.restitution=F.defaultRestitution;this.density=F.defaultDensity;this.collisionGroup=F.defaultCollisionGroup;this.collisionMask=F.defaultCollisionMask;this.contactCallback=this.geometry=null}function wa(a){this.sc=-1;this.ia=new Ca;this.qa=new Ca;this.a=new Ca;var b=a.position;this.ia.v=b.x;this.ia.A=b.y;this.ia.B=b.z;b=a.rotation;this.ia.o=b.e00;this.ia.f=b.e01;this.ia.h=b.e02;this.ia.i=b.e10;this.ia.m=b.e11;this.ia.j=b.e12;this.ia.l=b.e20;this.ia.g=b.e21;this.ia.s=b.e22;var b=this.qa,e=this.ia;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ia;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Pj=a.restitution;this.Fj=a.friction;this.jk=a.density;this.Jb=a.geometry;this.Aj=a.collisionGroup;this.Bj=a.collisionMask;this.Cj=a.contactCallback;this.u=new Da;this.Oa=null;this.nc=new t}function vd(){}function Zj(){this.position=new t;this.rotation=new O;this.linearVelocity=new t;this.angularVelocity=new t;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0}function C(a){this.ni=this.Ac=this.ja=this.M=null;this.pg=0;this.fc=this.Nb=null;this.se=0;this.Oe=this.re=null;this.$g=0;var b=a.linearVelocity;this.eb=b.x;this.fb=b.y;this.gb=b.z;b=a.angularVelocity;this.ib=b.x;this.jb=b.y;this.kb=b.z;this.Sc=this.Rc=this.Qc=this.Wc=this.Vc=this.Uc=0;this.qa=new Ca;this.a=new Ca;b=a.position;this.qa.v=b.x;this.qa.A=b.y;this.qa.B=b.z;b=a.rotation;this.qa.o=b.e00;this.qa.f=b.e01;this.qa.h=b.e02;this.qa.i=b.e10;this.qa.m=b.e11;this.qa.j=b.e12;this.qa.l=b.e20;this.qa.g=b.e21;this.qa.s=b.e22;var b=this.a,e=this.qa;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Xb=a.type;this.yb=0;this.Gb=!1;this.hk=a.autoSleep;this.Y=this.X=this.W=this.V=this.U=this.T=this.S=this.R=this.P=this.gi=this.fi=this.ei=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.zd=this.yd=this.xd=this.wd=this.$a=this.Nc=0;this.Il=a.linearDamping;this.Al=a.angularDamping;this.mf=this.lf=this.kf=this.Ah=this.zh=this.yh=0;this.N=new t(1,1,1);this.Cf=!1;this.Ug=1;this.kc=null}function Me(){this.mass=0;this.localInertia=new O}function bc(a){Sb.call(this);this.$=a;this.info=new Ne;this.Yb=Array(F.maxJacobianRows);a=0;for(var b=this.Yb.length;a<b;){var e=a++;this.Yb[e]=new Oe}}function zb(a){Sb.call(this);this.ti=a;this.info=new Tf;this.Yb=Array(F.maxManifoldPoints);a=0;for(var b=this.Yb.length;a<b;){var e=a++;this.Yb[e]=new of}}function Uf(a){this.sg=a;this.ck=Array(this.sg);this.$a=Array(this.sg);this.Oi=Array(this.sg);a=0;for(var b=this.sg;a<b;){var e=a++;this.ck[e]=Array(this.sg);this.$a[e]=Array(this.sg);this.Oi[e]=Array(this.sg);for(var d=0,c=this.sg;d<c;){var f=d++;this.ck[e][f]=0;this.$a[e][f]=0;this.Oi[e][f]=0}}this.Ij=1<<this.sg;this.zj=Array(this.Ij);this.ik=Array(this.Ij);a=0;for(b=this.Ij;a<b;){for(var d=e=a++,d=(d&85)+(d>>1&85),d=(d&51)+(d>>2&51),d=(d&15)+(d>>4&15),c=Array(d),f=0,h=d;f<h;){var l=f++;c[l]=Array(d);for(var g=0,k=d;g<k;){var m=g++;c[l][m]=0}}this.zj[e]=!1;this.ik[e]=c}}function wc(a){Sb.call(this);this.$=a;this.info=new Ne;a=F.maxJacobianRows;this.Rh=new Uf(a);this.Ee=new Bk(a);this.Yb=Array(a);for(var b=0,e=this.Yb.length;b<e;){var d=b++;this.Yb[d]=new Oe}b=this.Ee.Eh.length;this.ul=new Md(b);this.ui=new Md(b);this.Hg=Array(a);this.Kh=Array(a);this.sf=Array(a);this.lj=Array(a);for(b=0;b<a;)e=b++,this.Hg[e]=0,this.Kh[e]=0,this.sf[e]=0,this.lj[e]=0}function Md(a){this.n=a;this.oc=Array(a);this.af=Array(a);for(var b=0;b<a;){var e=b++;this.oc[e]=e}}function Bk(a){this.Dn=a;this.Ze=0;this.Eh=Array(1<<a);this.Te=new tg(a)}function tg(a){this.size=a;this.Pc=0;this.gh=Array(a);this.kh=Array(a);this.je=0;this.Dg=Array(a)}function ak(a){this.gh=Array(a);this.Dg=Array(a);this.kh=Array(a);this.Rk=Array(a);this.je=this.Pc=0}function Oe(){this.tf=this.mass=this.ld=this.kd=this.jd=this.hd=this.gd=this.fd=this.rd=this.qd=this.pd=this.od=this.nd=this.md=0}function of(){this.rm=this.qm=this.pm=this.om=this.ie=this.Yj=this.Xj=this.Wj=this.Vj=this.Uj=this.Tj=this.fl=this.el=this.dl=this.cl=this.bl=this.al=this.tj=this.sj=this.rj=this.qj=this.pj=this.oj=this.ll=this.kl=this.jl=this.il=this.hl=this.gl=this.Sf=this.Rf=this.Qf=this.Pf=this.Of=this.Nf=this.Qh=this.Ph=this.Oh=this.Nh=this.Mh=this.Lh=0}function ne(){}function Qd(){$b.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper1=new nc;this.springDamper2=new nc;this.limitMotor1=new Ec;this.limitMotor2=new Ec}function ub(a){L.call(this,a,uc.UNIVERSAL);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.Kc=b.x;this.Lc=b.y;this.Mc=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.Kc*this.Kc+this.Lc*this.Lc+this.Mc*this.Mc?(b=this.Kc*this.Kc+this.Lc*this.Lc+this.Mc*this.Mc,0<b&&(b=1/Math.sqrt(b)),this.Kc*=b,this.Lc*=b,this.Mc*=b):(this.Lc=this.Kc=0,this.Mc=1);var e=this.C.a,b=this.D.a,d,c,f,h,l,g,k,m,n,q,p,r,v;r=e.o*this.sa+e.f*this.ta+e.h*this.ua;v=e.i*this.sa+e.m*this.ta+e.j*this.ua;d=e.l*this.sa+e.g*this.ta+e.s*this.ua;var aa,w;aa=b.o*this.Kc+b.f*this.Lc+b.h*this.Mc;w=b.i*this.Kc+b.m*this.Lc+b.j*this.Mc;p=b.l*this.Kc+b.g*this.Lc+b.s*this.Mc;l=w*d-p*v;g=p*r-aa*d;k=aa*v-w*r;l*l+g*g+k*k||(l=r*r,g=v*v,k=d*d,l<g?l<k?(k=1/Math.sqrt(g+k),l=0,g=d*k,k*=-v):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0):g<k?(k=1/Math.sqrt(k+l),l=-d*k,g=0,k*=r):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0));c=v*k-d*g;f=d*l-r*k;h=r*g-v*l;m=g*p-k*w;n=k*aa-l*p;q=l*w-g*aa;var B,u;B=e.o*r+e.i*v+e.l*d;u=e.f*r+e.m*v+e.g*d;d=e.h*r+e.j*v+e.s*d;this.sa=B;this.ta=u;this.ua=d;d=e.o*l+e.i*g+e.l*k;r=e.f*l+e.m*g+e.g*k;v=e.h*l+e.j*g+e.s*k;this.Ab=d;this.Bb=r;this.Cb=v;d=e.o*c+e.i*f+e.l*h;r=e.f*c+e.m*f+e.g*h;e=e.h*c+e.j*f+e.s*h;this.hc=d;this.ic=r;this.jc=e;e=b.o*m+b.i*n+b.l*q;c=b.f*m+b.m*n+b.g*q;m=b.h*m+b.j*n+b.s*q;this.lb=e;this.mb=c;this.nb=m;e=b.o*l+b.i*g+b.l*k;m=b.f*l+b.m*g+b.g*k;l=b.h*l+b.j*g+b.s*k;this.Wg=e;this.Xg=m;this.Yg=l;l=b.o*aa+b.i*w+b.l*p;g=b.f*aa+b.m*w+b.g*p;b=b.h*aa+b.j*w+b.s*p;this.Kc=l;this.Lc=g;this.Mc=b;this.zi=this.zl=this.yi=0;this.Em=this.Dm=this.Cm=!1;this.Fk=a.springDamper1.clone();this.Gk=a.springDamper2.clone();this.xk=a.limitMotor1.clone();this.yk=a.limitMotor2.clone()}function zc(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function nc(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function oe(){$b.call(this);this.springDamper=new nc}function pe(a){L.call(this,a,0);this.ue=a.springDamper.clone()}function Ec(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function qe(){$b.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper=new nc;this.limitMotor=new Ec}function Lb(a){L.call(this,a,1);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.lb*this.lb+this.mb*this.mb+this.nb*this.nb?(b=this.lb*this.lb+this.mb*this.mb+this.nb*this.nb,0<b&&(b=1/Math.sqrt(b)),this.lb*=b,this.mb*=b,this.nb*=b):(this.lb=1,this.nb=this.mb=0);var e,d,c,f,h,l,g,k;d=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<d&&-.999999>d?(b=this.sa,e=this.ta,c=this.ua,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.sa,m=this.ta,q=this.ua,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;n=b*this.sa+e*this.ta+c*this.ua;m=d*this.sa+f*this.ta+h*this.ua;q=l*this.sa+g*this.ta+k*this.ua;this.lb=n;this.mb=m;this.nb=q;n=b*this.Ab+e*this.Bb+c*this.Cb;m=d*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.hc+e*this.ic+c*this.jc;e=d*this.hc+f*this.ic+h*this.jc;c=l*this.hc+g*this.ic+k*this.jc;this.Kc=b;this.Lc=e;this.Mc=c;this.angularErrorZ=this.angularErrorY=this.angle=0;this.ea=new Pe(this);this.ue=a.springDamper.clone();this.Ch=a.limitMotor.clone()}function Rd(){$b.call(this);this.localTwistAxis1=new t(1,0,0);this.localTwistAxis2=new t(1,0,0);this.localSwingAxis1=new t(0,1,0);this.twistSpringDamper=new nc;this.swingSpringDamper=new nc;this.twistLimitMotor=new Ec;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function Ab(a){L.call(this,a,uc.RAGDOLL);var b=a.localTwistAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localSwingAxis1;this.Ab=b.x;this.Bb=b.y;this.Cb=b.z;b=a.localTwistAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;if(this.hc*this.hc+this.ic*this.ic+this.jc*this.jc)b=this.hc*this.hc+this.ic*this.ic+this.jc*this.jc,0<b&&(b=1/Math.sqrt(b)),this.hc*=b,this.ic*=b,this.jc*=b,this.Ab=this.ic*this.ua-this.jc*this.ta,this.Bb=this.jc*this.sa-this.hc*this.ua,this.Cb=this.hc*this.ta-this.ic*this.sa;else{var b=this.sa,e=this.ta,d=this.ua,c=b*b,f=e*e,h=d*d;c<f?c<h?(c=1/Math.sqrt(f+h),this.Ab=0,this.Bb=d*c,this.Cb=-e*c):(c=1/Math.sqrt(c+f),this.Ab=e*c,this.Bb=-b*c,this.Cb=0):f<h?(c=1/Math.sqrt(h+c),this.Ab=-d*c,this.Bb=0,this.Cb=b*c):(c=1/Math.sqrt(c+f),this.Ab=e*c,this.Bb=-b*c,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab}var l,g,k,m,c=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<c&&-.999999>c?(b=this.sa,e=this.ta,d=this.ua,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);k=e;var h=c,e=d,n=2*b;g=2*k;d=2*h;c=b*n;f=k*g;l=h*d;h=b*g;m=k*d;k=b*d;var n=e*n,q=e*g;g=e*d;b=1-f-l;e=h-g;d=k+q;h+=g;l=1-c-l;g=m-n;k-=q;m+=n;c=1-c-f;f=b*this.sa+e*this.ta+d*this.ua;n=h*this.sa+l*this.ta+g*this.ua;q=k*this.sa+m*this.ta+c*this.ua;this.lb=f;this.mb=n;this.nb=q;f=b*this.Ab+e*this.Bb+d*this.Cb;n=h*this.Ab+l*this.Bb+g*this.Cb;q=k*this.Ab+m*this.Bb+c*this.Cb;this.Wg=f;this.Xg=n;this.Yg=q;b=b*this.hc+e*this.ic+d*this.jc;e=h*this.hc+l*this.ic+g*this.jc;d=k*this.hc+m*this.ic+c*this.jc;this.Kc=b;this.Lc=e;this.Mc=d;this.Nk=a.twistSpringDamper.clone();this.Mk=a.twistLimitMotor.clone();this.Hk=a.swingSpringDamper.clone();this.Jj=a.maxSwingAngle1;this.Kj=a.maxSwingAngle2;this.Jj<F.minRagdollMaxSwingAngle&&(this.Jj=F.minRagdollMaxSwingAngle);this.Kj<F.minRagdollMaxSwingAngle&&(this.Kj=F.minRagdollMaxSwingAngle);this.Wk=new Ec;this.Wk.lowerLimit=-1;this.swingConstraintAxisZ=this.swingConstraintAxisY=this.swingConstraintAxisX=this.swingConstraintAxis1Z=this.swingConstraintAxis1Y=this.swingConstraintAxis1X=this.twistAxisZ=this.twistAxisY=this.twistAxisX=this.swingAxisZ=this.swingAxisY=this.swingAxisX=this.swingError=this.ej=this.Wi=this.Wk.upperLimit=0}function Be(){$b.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.limitMotor=new zc;this.springDamper=new nc}function Gb(a){L.call(this,a,uc.PRISMATIC);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.lb*this.lb+this.mb*this.mb+this.nb*this.nb?(b=this.lb*this.lb+this.mb*this.mb+this.nb*this.nb,0<b&&(b=1/Math.sqrt(b)),this.lb*=b,this.mb*=b,this.nb*=b):(this.lb=1,this.nb=this.mb=0);var e,d,c,f,h,l,g,k;d=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<d&&-.999999>d?(b=this.sa,e=this.ta,c=this.ua,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.sa,m=this.ta,q=this.ua,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;n=b*this.sa+e*this.ta+c*this.ua;m=d*this.sa+f*this.ta+h*this.ua;q=l*this.sa+g*this.ta+k*this.ua;this.lb=n;this.mb=m;this.nb=q;n=b*this.Ab+e*this.Bb+c*this.Cb;m=d*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.hc+e*this.ic+c*this.jc;e=d*this.hc+f*this.ic+h*this.jc;c=l*this.hc+g*this.ic+k*this.jc;this.Kc=b;this.Lc=e;this.Mc=c;this.ea=new Pe(this);this.angularErrorZ=this.angularErrorY=this.angularErrorX=this.linearErrorZ=this.linearErrorY=this.Vf=0;this.ue=a.springDamper.clone();this.Ch=a.limitMotor.clone()}function uc(){}function Lc(a){this.wk=a}function Ck(){this.ub=this.Yc=this.va=0}function Pe(a){this.$=a;this.me=this.le=this.ke=this.Od=this.Nd=this.Md=this.bd=this.ad=this.$c=0}function re(){$b.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.translationalLimitMotor=new zc;this.translationalSpringDamper=new nc;this.rotationalLimitMotor=new Ec;this.rotationalSpringDamper=new nc}function $b(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new t;this.localAnchor2=new t;this.allowCollision=!1;this.solverType=F.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=F.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function vb(a){L.call(this,a,2);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.lb*this.lb+this.mb*this.mb+this.nb*this.nb?(b=this.lb*this.lb+this.mb*this.mb+this.nb*this.nb,0<b&&(b=1/Math.sqrt(b)),this.lb*=b,this.mb*=b,this.nb*=b):(this.lb=1,this.nb=this.mb=0);var e,d,c,f,h,l,g,k;d=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<d&&-.999999>d?(b=this.sa,e=this.ta,c=this.ua,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.sa,m=this.ta,q=this.ua,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;n=b*this.sa+e*this.ta+c*this.ua;m=d*this.sa+f*this.ta+h*this.ua;q=l*this.sa+g*this.ta+k*this.ua;this.lb=n;this.mb=m;this.nb=q;n=b*this.Ab+e*this.Bb+c*this.Cb;m=d*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.hc+e*this.ic+c*this.jc;e=d*this.hc+f*this.ic+h*this.jc;c=l*this.hc+g*this.ic+k*this.jc;this.Kc=b;this.Lc=e;this.Mc=c;this.linearErrorZ=this.linearErrorY=this.Vf=this.angularErrorZ=this.angularErrorY=this.angle=0;this.ea=new Pe(this);this.Lk=a.translationalSpringDamper.clone();this.Kk=a.translationalLimitMotor.clone();this.Ek=a.rotationalSpringDamper.clone();this.Dk=a.rotationalLimitMotor.clone()}function L(a,b){this.rb=new Lc(this);this.sb=new Lc(this);this.Ec=F.defaultJointPositionCorrectionAlgorithm;this.Xb=b;this.kc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.gk=a.allowCollision;this.Ji=a.breakForce;this.Ki=a.breakTorque;switch(a.solverType){case 0:this.Rj=new bc(this);break;case 1:this.Rj=new wc(this)}b=a.localAnchor1;this.Pi=b.x;this.Qi=b.y;this.Ri=b.z;a=a.localAnchor2;this.Si=a.x;this.Ti=a.y;this.Ui=a.z;this.Mc=this.Lc=this.Kc=this.Yg=this.Xg=this.Wg=this.nb=this.mb=this.lb=this.jc=this.ic=this.hc=this.Cb=this.Bb=this.Ab=this.ua=this.ta=this.sa=this.If=this.Hf=this.Gf=this.Ff=this.Ef=this.Df=this.Vb=this.Ub=this.Tb=this.Sb=this.Rb=this.Qb=0;this.Ob=Array(F.maxJacobianRows);a=0;for(b=F.maxJacobianRows;a<b;){var e=a++;this.Ob[e]=new Ck}}function hj(){this.Ba=new ld;this.cb=this.motorSpeed=this.Ia=this.Ja=this.Na=this.Ga=0;this.va=null}function Ne(){this.De=this.Ce=null;this.La=0;this.rows=Array(F.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new hj}}function ij(){this.Eg=new ld;this.vj=new ld;this.uj=new ld;this.friction=this.Na=this.Ga=0;this.va=null}function Tf(){this.De=this.Ce=null;this.La=0;this.rows=Array(F.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new ij}}function ld(){this.wc=this.ha=this.ga=this.fa=this.da=this.ca=this.ba=this.Ea=this.Da=this.Ca=this.ya=this.xa=this.wa=0}function jj(a){this.Ka=a;this.ol=0;this.pl=Array(F.maxManifoldPoints);a=0;for(var b=F.maxManifoldPoints;a<b;){var e=a++;this.pl[e]=new hc}}function hc(){this.Dc=this.Kd=this.Jd=this.Id=this.Hd=this.Gd=this.Fd=this.dc=this.cc=this.bc=this.Fb=this.Eb=this.Db=this.gf=this.ff=this.ef=this.df=this.cf=this.bf=0;this.Wd=new kj;this.Jf=this.Se=!1;this.sc=-1}function Pb(){this.Xd=this.Ii=this.Hi=this.Gi=this.Zi=this.Yi=this.Xi=this.og=this.ng=this.mg=0;this.tc=Array(F.maxManifoldPoints);for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.tc[e]=new hc}}function kj(){this.We=this.Ve=this.Ue=this.ub=this.xc=this.yc=this.Zc=0}function bd(a){this.Rj=new zb(this);this.Ka=a}function ic(){}function Sb(){this.D=this.C=null;this.Cf=!1}function cd(){}function Qe(){this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new t(1,.1,.1);this.jointLineColor=new t(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new t(.2,.2,1);this.contactTangentColor=new t(.1,.8,.1);this.contactNormalColor=new t(1,.1,.1);this.disabledContactColor=new t(.5,.1,.1);this.newContactColor=new t(1,1,.1);this.contactColor=new t(1,.1,.1);this.pairColor=new t(1,1,.1);this.bvhNodeColor=new t(.4,.4,.4);this.aabbColor=new t(1,.1,.1);this.kinematicShapeColor=new t(1,.5,.1);this.staticShapeColor=new t(.7,.7,.7);this.sleepingShapeColor2=new t(.2,.8,.5);this.sleepingShapeColor1=new t(.3,.3,.8);this.sleepyShapeColor2=new t(.6,.8,.3);this.sleepyShapeColor1=new t(.5,.25,.6);this.shapeColor2=new t(1,.8,.1);this.shapeColor1=new t(.7,.2,.4)}function Tb(){this.p=new Mb;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.bk=Array(5);this.rh=Array(5);this.dk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.bk[b]=Array(e);this.rh[b]=Array(e);this.dk[b]=Array(e);for(e=0;8>e;){var d=e++,c=.7853981633974475*b,f=.7853981633974475*d;this.bk[b][d]=new t(Math.sin(c)*Math.cos(f),Math.cos(c),-Math.sin(c)*Math.sin(f));this.rh[b][d]=new t;this.dk[b][d]=new t}}this.jj=Array(8);this.Sl=Array(8);this.ae=Array(8);this.Fe=Array(8);this.Af=Array(8);for(a=0;8>a;)b=a++,this.jj[b]=new t(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.Sl[b]=new t(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.ae[b]=new t,this.Fe[b]=new t,this.Af[b]=new t;this.style=new Qe}function Dd(){this.position=new t;this.normal=new t;this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1}function md(){}function wd(){}function nd(){}function pf(){this.u=new Da;this.Bl=null}function se(){this.wi=new Wd;this.gj=new Ca;this.Vf=new t;this.Z=new t;this.Ul=this.ij=null}function Re(){this.wi=new Wd;this.gj=new t;this.end=new t;this.ij=null}function qa(a,b){null==a&&(a=2);switch(a){case 1:this.ec=new Eb;break;case 2:this.ec=new tc}this.wh=new Qc(this.ec);null==b&&(b=new t(0,-9.80665,0));this.lk=new t(b.x,b.y,b.z);this.hi=this.Bh=this.mi=this.jf=null;this.Mj=this.zk=this.pg=this.Vi=0;this.Bk=10;this.Ak=5;this.Oj=new Re;this.Mi=new se;this.ek=new pf;this.lg=new Dk;this.Qe=Array(F.islandInitialConstraintArraySize);this.dh=Array(F.islandInitialRigidBodyArraySize);this.Dh=new lj;this.Ha=new Mb;this.Jl=0}function lj(){this.invDt=this.dt=0;this.dtRatio=1}function Dk(){this.xf=Array(F.islandInitialRigidBodyArraySize);this.yf=Array(F.islandInitialConstraintArraySize);this.ph=Array(F.islandInitialConstraintArraySize);this.oh=Array(F.islandInitialConstraintArraySize);this.hh=this.ih=this.wf=this.vf=0}function Qc(a){this.ec=a;this.Km=new Ed;this.ji=0}function Gc(){this.Oc=this.Ud=this.M=this.ja=null}function cc(){this.ja=this.M=null;this.rb=new Gc;this.sb=new Gc;this.xh=this.D=this.C=this.vc=this.uc=null;this.Li=new bk;this.Lm=new dd;this.Qj=this.Hj=!1;this.Ka=new Pb;this.Ll=new jj(this.Ka);this.Ke=new bd(this.Ka);this.ug=!1}function ga(a,b,e,d){null==d&&(d=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=d;ga.numCreations++}function Mb(){this.b=Array(256);this.c=0;this.ob=Array(256);this.qb=0;this.zf=Array(256);this.Uf=0;this.Td=Array(256);this.$d=0}function na(){}function M(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){null==v&&(v=1);null==r&&(r=0);null==p&&(p=0);null==q&&(q=0);null==n&&(n=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==c&&(c=0);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;M.numCreations++}function O(a,b,e,d,c,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==c&&(c=1);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;O.numCreations++}function xd(){}function Nb(){}function Jb(){this.Pa=Array(4);this.hb=Array(4);this.pb=Array(4);this.fj=Array(3);this.fj[0]=new t(1,0,0);this.fj[1]=new t(0,1,0);this.fj[2]=new t(0,0,1);this.Nn=new t;this.On=new t;this.Gn=new t;this.Fn=new t;this.Mn=new Ca;for(var a=0;4>a;){var b=a++;this.Pa[b]=new t;this.hb[b]=new t;this.pb[b]=new t}this.dir=new t;this.closest=new t;this.closestPoint1=new t;this.closestPoint2=new t;this.Fg=new mj}function F(){}function Ca(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function t(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;t.numCreations++}function Ek(){this.ql=new t}function Oc(){this.ud=new t;this.hb=new t;this.pb=new t}function Mc(){this.id=++Mc.Cc;this.ja=this.M=null;this.Lj=new t;this.Jk=this.Ej=0;this.cj=!1;this.zb=Array(3);this.we=Array(3);this.Ie=Array(3);this.Sh=new t;this.ii=Array(3);this.ii[0]=1;this.ii[1]=2;this.ii[2]=0}function mj(){this.zb=Array(F.maxEPAVertices);this.Wh=new t;this.Ae=0;this.Fc=this.Xc=null;this.ah=0;this.Re=this.ve=null}function Se(){this.qh=!1}function Fd(a){this.qh=a}function Gd(a){this.qh=a}function Sd(){this.qh=!1}function yd(){this.qh=!1}function Xc(a){this.qh=a}function bk(){}function nj(){this.position1=new t;this.position2=new t;this.id=this.depth=0}function dd(){this.numPoints=0;this.normal=new t;this.points=Array(F.maxManifoldPoints);this.incremental=!1;for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.points[e]=new nj}}function Ed(){this.Ib=Array(8);for(var a=0;6>a;){var b=a++;this.Ib[b]=Array(8)}a=new Sd;this.Ib[0][0]=new Se;this.Ib[0][1]=new Gd(!1);this.Ib[0][2]=a;this.Ib[0][3]=a;this.Ib[0][4]=new Fd(!1);this.Ib[0][5]=a;this.Ib[1][0]=new Gd(!0);this.Ib[1][1]=a;this.Ib[1][2]=a;this.Ib[1][3]=a;this.Ib[1][4]=a;this.Ib[1][5]=a;this.Ib[2][0]=a;this.Ib[2][1]=a;this.Ib[2][2]=a;this.Ib[2][3]=a;this.Ib[2][4]=a;this.Ib[2][5]=a;this.Ib[3][0]=a;this.Ib[3][1]=a;this.Ib[3][2]=a;this.Ib[3][3]=a;this.Ib[3][4]=a;this.Ib[3][5]=a;this.Ib[4][0]=new Fd(!0);this.Ib[4][1]=a;this.Ib[4][2]=a;this.Ib[4][3]=a;this.Ib[4][4]=new yd;this.Ib[4][5]=a;this.Ib[5][0]=a;this.Ib[5][1]=a;this.Ib[5][2]=a;this.Ib[5][3]=a;this.Ib[5][4]=a;this.Ib[5][5]=a}function Nd(a){xa.call(this,0);this.gc=this.ab=a;this.Be()}function Wd(){this.position=new t;this.normal=new t;this.fraction=0}function Nc(){}function Dc(a,b){xa.call(this,2);this.ab=a;this.Hb=b;this.Be()}function Hd(a){xa.call(this,5);this.Ae=a.length;this.zb=Array(this.Ae);this.tg=Array(this.Ae);for(var b=0,e=this.Ae;b<e;){var d=b++;this.zb[d]=a[d];this.tg[d]=new t}this.Ml=!0;this.Be()}function ed(a,b){xa.call(this,3);this.ab=a;this.Hb=b;this.ak=a/Math.sqrt(a*a+4*b*b);this.Sj=2*b/Math.sqrt(a*a+4*b*b);this.Be()}function od(a,b){xa.call(this,4);this.ab=a;this.Hb=b;this.gc=this.ab;this.Be()}function fd(a){xa.call(this,1);this.Le=a.x;this.Me=a.y;this.Ne=a.z;this.mk=this.Le;this.qk=this.pk=this.nk=0;this.rk=this.Me;this.uk=this.tk=this.sk=0;this.vk=this.Ne;this.Be()}function Da(){this.ma=this.la=this.ka=this.pa=this.oa=this.na=0}function Fk(){this.Pb=null;this.Nj=0;this.oi=new oj;this.Xe=this.Tf=this.Tc=null;this.Sh=Array(1024)}function oj(){this.Gl=0;this.yj=!1}function pj(a,b){Jc.call(this,a,b);this.Qd=null;this.Zg=!1}function te(){this.Kf=this.Lf=this.M=null;this.F=Array(2);this.Ma=0;this.Fa=null;this.O=0;this.Oa=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function tc(){Wa.call(this);this.Gj=!0;this.he=new Fk;this.Ye=Array(1024);this.uf=0}function Eb(){Wa.call(this);this.Gj=!1}function Cc(){this.rg=this.qg=null}function Jc(a,b){this.userData=a;this.sc=b;this.M=this.ja=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function pd(){}function Yc(){}function Cf(){xa.call(this,-1);this.min=new t;this.max=new t}function Ce(){xa.call(this,-1)}function xa(a){Bc.call(this,a);this.gc=F.defaultGJKMargin;this.Ml=!1}function Bc(a){this.Xb=a;this.nf=0}function Wa(){this.ki=0;this.Yd=this.Pe=this.te=null;this.Gj=!1;this.$i=0;this.bh=null;this.Fl=0;this.Dj=new Ce;this.u=new Cf;this.Mf=new Ca;this.Z=new t;this.wi=new Wd}function dc(){}function gd(a){this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,gd)}function mb(a,b){function e(){}e.prototype=a;a=new e;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}Math.aa=!0;gd.aa=!0;gd.Qa=function(a){return a instanceof Error?a:new gd(a)};gd.Kb=Error;gd.prototype=mb(Error.prototype,{ra:gd});dc.aa=!0;dc.Hc=function(a){if(a instanceof Array&&null==a.xl)return Array;var b=a.ra;if(null!=b)return b;a=dc.Lb(a);return null!=a?dc.qc(a):null};dc.tb=function(a,b){if(null==a)return!1;if(a==b)return!0;var e=a.Yn;if(null!=e)for(var d=0,c=e.length;d<c;){var f=d++,f=e[f];if(f==b||dc.tb(f,b))return!0}return dc.tb(a.Kb,b)};dc.bb=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.xl:!1;case kl:return"boolean"==typeof a;case ll:return!0;case ml:return"number"==typeof a;case nl:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||dc.tb(dc.Hc(a),b))return!0}else{if("object"==typeof b&&dc.mc(b)&&a instanceof b)return!0}else return!1;return b==ol&&null!=a.aa||b==pl&&null!=a.Xn?!0:a.xl==b}};dc.lc=function(a,b){if(dc.bb(a,b))return a;throw new gd("Cannot cast "+a+" to "+b);};dc.Lb=function(a){a=dc.rc.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};dc.mc=function(a){return null!=dc.Lb(a)};dc.qc=function(a){return window[a]};Wa.aa=!0;Wa.prototype={Gh:function(){return null},Hh:function(){},sd:function(){},Lb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},si:function(){},Qa:function(){return this.Yd},tb:function(){return this.Gj},bb:function(){return this.$i},Sd:function(){},rf:function(){},eh:function(){},ra:Wa};Bc.aa=!0;Bc.prototype={Be:function(){},Mb:function(){},li:function(){return!1},bb:function(){return this.Xb},Qa:function(){return this.nf},Sd:function(a,b,e,d){var c,f,h,l;c=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;c-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.li(e.o*c+e.i*f+e.l*a,e.f*c+e.m*f+e.g*a,e.h*c+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,d)){var g,k;b=d.position;c=b.x;f=b.y;h=b.z;b=d.normal;l=b.x;g=b.y;k=b.z;var m,n;m=e.o*c+e.f*f+e.h*h;n=e.i*c+e.m*f+e.j*h;h=e.l*c+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;c=m+e.v;f=n+e.A;h+=e.B;e=d.position;e.x=c;e.y=f;e.z=h;d=d.normal;d.x=b;d.y=a;d.z=l;return!0}return!1},ra:Bc};xa.aa=!0;xa.Kb=Bc;xa.prototype=mb(Bc.prototype,{gn:function(){return this.gc},Jn:function(a){0>a&&(a=0);this.gc=a},Ld:function(){},Sd:function(a,b,e,d){return this.Ml?Jb.Qa.Sd(this,e,a,b,d):Bc.prototype.Sd.call(this,a,b,e,d)},ra:xa});Ce.aa=!0;Ce.Kb=xa;Ce.prototype=mb(xa.prototype,{Aa:function(a,b,e){this.Ym=a;var d,c,f;d=e.x;c=e.y;f=e.z;var h;e=b.o*d+b.i*c+b.l*f;h=b.f*d+b.m*c+b.g*f;b=b.h*d+b.j*c+b.s*f;d=this.nl=new t;d.x=e;d.y=h;d.z=b;this.gc=a.gc},Ld:function(a,b){this.Ym.Ld(a,b);var e=this.nl;if(0<a.x*e.x+a.y*e.y+a.z*e.z){a=this.nl;var e=b.y+a.y,d=b.z+a.z;b.x+=a.x;b.y=e;b.z=d}},ra:Ce});Cf.aa=!0;Cf.Kb=xa;Cf.prototype=mb(xa.prototype,{Ld:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z},ra:Cf});Yc.aa=!0;Yc.prototype={td:function(){},ra:Yc};pd.aa=!0;Jc.aa=!0;Jc.prototype={tb:function(){return this.sc},Qa:function(){var a=new Da;a.na=this.J;a.oa=this.K;a.pa=this.L;a.ka=this.G;a.la=this.H;a.ma=this.I;return a},bb:function(a){a.na=this.J;a.oa=this.K;a.pa=this.L;a.ka=this.G;a.la=this.H;a.ma=this.I},ra:Jc};Cc.aa=!0;Cc.prototype={Qa:function(){return this.qg},bb:function(){return this.rg},tb:function(){return this.M},ra:Cc};Eb.aa=!0;Eb.Kb=Wa;Eb.prototype=mb(Wa.prototype,{Gh:function(a,b){a=new Jc(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ja=this.Pe);this.Pe=a;a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;return a},Hh:function(a){this.ki--;var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ja);a.M=null;a.ja=null;a.userData=null},sd:function(a,b){a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;for(a=this.te;null!=a;){for(var b=a.M,e=a.M;null!=e;){var d=e.M;this.$i++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var c=this.bh;null!=c?(this.bh=c.M,c.M=null):c=new Cc;null!=this.Yd&&(c.M=this.Yd);this.Yd=c;c.qg=a;c.rg=e}e=d}a=b}},Sd:function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.te;null!=l;){var g=l.M,k=d,m=c,n=a,q=f,p=h,r=b,v=k<q?k:q,aa=m<p?m:p,w=n<r?n:r,B=m>p?m:p,u=n>r?n:r,D=l.J,t=l.K,A=l.L,E=l.G,x=l.H,Bb=l.I;if(D>(k>q?k:q)||E<v||t>B||x<aa||A>u||Bb<w)n=!1;else{var q=q-k,p=p-m,N=r-n,r=0>q?-q:q,v=0>p?-p:p,B=0>N?-N:N,aa=.5*(E-D),w=.5*(x-t),u=.5*(Bb-A),k=k-.5*(E+D),m=m-.5*(x+t),n=n-.5*(Bb+A),A=m*N-n*p;0<(0>A?-A:A)-(w*B+u*v)?n=!0:(n=n*q-k*N,n=0<(0>n?-n:n)-(u*r+aa*B));n?n=!0:(n=k*p-m*q,n=0<(0>n?-n:n)-(aa*v+w*r));n=n?!1:!0}n&&e.td(l);l=g}},rf:function(a,b,e,d){for(var c=this.te;null!=c;){var f=c.M,h=this.u.min;h.x=c.J;h.y=c.K;h.z=c.L;h=this.u.max;h.x=c.G;h.y=c.H;h.z=c.I;this.Dj.Aa(a,b,e);h=Jb.Qa;0==h.kj(this.Dj,this.u,b,this.Mf,null,!1)&&0>=h.distance&&d.td(c);c=f}},eh:function(a,b){for(var e=this.te;null!=e;){var d=e.M;a.na<e.G&&a.ka>e.J&&a.oa<e.H&&a.la>e.K&&a.pa<e.I&&a.ma>e.L&&b.td(e);e=d}},ra:Eb});tc.aa=!0;tc.Kb=Wa;tc.prototype=mb(Wa.prototype,{fh:function(a,b){this.$i++;var e=0==a.O,d=0==b.O;a==b?e||(this.fh(a.F[0],b),this.fh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&d?(a=a.Oa,b=b.Oa,e=this.bh,null!=e?(this.bh=e.M,e.M=null):e=new Cc,null!=this.Yd&&(e.M=this.Yd),this.Yd=e,e.qg=a,e.rg=b):d||a.O>b.O?(this.fh(a.F[0],b),this.fh(a.F[1],b)):(this.fh(b.F[0],a),this.fh(b.F[1],a)))},rl:function(a,b,e,d,c,f,h,l){var g=a.J,k=a.K,m=a.L,n=a.G,q=a.H,p=a.I,r;if(g>(b>c?b:c)||n<(b<c?b:c)||k>(e>f?e:f)||q<(e<f?e:f)||m>(d>h?d:h)||p<(d<h?d:h))r=!1;else{var v=c-b,aa=f-e,w=h-d;r=0>v?-v:v;var B=0>aa?-aa:aa,u=0>w?-w:w,D=.5*(n-g),t=.5*(q-k),A=.5*(p-m),g=b-.5*(n+g),k=e-.5*(q+k),m=d-.5*(p+m),p=k*w-m*aa;0<(0>p?-p:p)-(t*u+A*B)?u=!0:(w=m*v-g*w,u=0<(0>w?-w:w)-(A*r+D*u));u?r=!0:(v=g*aa-k*v,r=0<(0>v?-v:v)-(D*B+t*r));r=r?!1:!0}r&&(0==a.O?l.td(a.Oa):(this.rl(a.F[0],b,e,d,c,f,h,l),this.rl(a.F[1],b,e,d,c,f,h,l)))},Vk:function(a,b,e,d,c){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.Dj.Aa(b,e,d);f=Jb.Qa;0==f.kj(this.Dj,this.u,e,this.Mf,null,!1)&&0>=f.distance&&(0==a.O?c.td(a.Oa):(this.Vk(a.F[0],b,e,d,c),this.Vk(a.F[1],b,e,d,c)))},Qk:function(a,b,e){a.J<b.ka&&a.G>b.na&&a.K<b.la&&a.H>b.oa&&a.L<b.ma&&a.I>b.pa&&(0==a.O?e.td(a.Oa):(this.Qk(a.F[0],b,e),this.Qk(a.F[1],b,e)))},Gh:function(a,b){a=new pj(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ja=this.Pe);this.Pe=a;a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.he;var e=b.Tc;null!=e?(b.Tc=e.M,e.M=null):e=new te;var d=e;d.Oa=a;a.Qd=d;d.J=a.J;d.K=a.K;d.L=a.L;d.G=a.G;d.H=a.H;d.I=a.I;b.Nj++;null==b.Tf?b.Tf=d:(b.Xe.Kf=d,d.Lf=b.Xe);b.Xe=d;if(null==d.Oa||d.Oa.Qd!=d||null!=d.F[0]||null!=d.F[1]||0!=d.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==b.Pb)b.Pb=d;else{for(var c=b.Pb;0<c.O&&(e=b.oi.Dl(c,d),-1!=e);)c=c.F[e];var f=c.Fa,e=b.Tc;null!=e?(b.Tc=e.M,e.M=null):e=new te;if(null==f)b.Pb=e;else{var h=c.Ma;f.F[h]=e;e.Fa=f;e.Ma=h}f=c.Ma;e.F[f]=c;c.Fa=e;c.Ma=f;c=c.Ma^1;e.F[c]=d;d.Fa=e;for(d.Ma=c;null!=e;){if(b.oi.yj&&!(2>e.O)){var d=e.Fa,f=e.F[0],h=e.F[1],l=f.O-h.O,c=e.Ma;1<l?(h=f.F[0],l=f.F[1],h.O>l.O?(f.F[1]=e,e.Fa=f,e.Ma=1,e.F[0]=l,l.Fa=e,l.Ma=0):(f.F[0]=e,e.Fa=f,e.Ma=0,e.F[0]=h,h.Fa=e,h.Ma=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].O,l=f.F[1].O,f.O=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].O,l=e.F[1].O,e.O=(h>l?h:l)+1,null!=d?(d.F[c]=f,f.Fa=d,f.Ma=c):(b.Pb=f,f.Fa=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.O>l.O?(h.F[1]=e,e.Fa=h,e.Ma=1,e.F[1]=l,l.Fa=e,l.Ma=1):(h.F[0]=e,e.Fa=h,e.Ma=0,e.F[1]=f,f.Fa=e,f.Ma=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].O,l=h.F[1].O,h.O=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].O,l=e.F[1].O,e.O=(f>l?f:l)+1,null!=d?(d.F[c]=h,h.Fa=d,h.Ma=c):(b.Pb=h,h.Fa=null),e=h)}d=e.F[0].O;c=e.F[1].O;e.O=(d>c?d:c)+1;d=e.F[0];c=e.F[1];e.J=d.J<c.J?d.J:c.J;e.K=d.K<c.K?d.K:c.K;e.L=d.L<c.L?d.L:c.L;e.G=d.G>c.G?d.G:c.G;e.H=d.H>c.H?d.H:c.H;e.I=d.I>c.I?d.I:c.I;e=e.Fa}}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){b=Array(this.uf<<1);e=0;for(d=this.uf;e<d;)c=e++,b[c]=this.Ye[c],this.Ye[c]=null;this.Ye=b}this.Ye[this.uf++]=a}return a},Hh:function(a){this.ki--;var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ja);a.M=null;a.ja=null;b=this.he;e=a.Qd;b.Nj--;var d=e.Lf,c=e.Kf;null!=d&&(d.Kf=c);null!=c&&(c.Lf=d);e==b.Tf&&(b.Tf=b.Tf.Kf);e==b.Xe&&(b.Xe=b.Xe.Lf);e.Kf=null;e.Lf=null;if(null==e.Oa||e.Oa.Qd!=e||null!=e.F[0]||null!=e.F[1]||0!=e.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(b.Pb==e)b.Pb=null;else{var d=e.Fa,c=d.F[e.Ma^1],f=d.Fa;if(null==f){c.Fa=null;c.Ma=0;b.Pb=c;if(null!=d.Oa&&null!=d.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.Ma=0;d.Fa=null;d.O=0;d.Oa=null;d.M=b.Tc;b.Tc=d}else{var h=d.Ma;f.F[h]=c;c.Fa=f;c.Ma=h;if(null!=d.Oa&&null!=d.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.Ma=0;d.Fa=null;d.O=0;d.Oa=null;d.M=b.Tc;b.Tc=d;for(d=f;null!=d;){if(b.oi.yj&&!(2>d.O)){var c=d.Fa,h=d.F[0],l=d.F[1],g=h.O-l.O,f=d.Ma;1<g?(l=h.F[0],g=h.F[1],l.O>g.O?(h.F[1]=d,d.Fa=h,d.Ma=1,d.F[0]=g,g.Fa=d,g.Ma=0):(h.F[0]=d,d.Fa=h,d.Ma=0,d.F[0]=l,l.Fa=d,l.Ma=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].O,g=h.F[1].O,h.O=(l>g?l:g)+1,l=d.F[0],g=d.F[1],d.J=l.J<g.J?l.J:g.J,d.K=l.K<g.K?l.K:g.K,d.L=l.L<g.L?l.L:g.L,d.G=l.G>g.G?l.G:g.G,d.H=l.H>g.H?l.H:g.H,d.I=l.I>g.I?l.I:g.I,l=d.F[0].O,g=d.F[1].O,d.O=(l>g?l:g)+1,null!=c?(c.F[f]=h,h.Fa=c,h.Ma=f):(b.Pb=h,h.Fa=null),d=h):-1>g&&(h=l.F[0],g=l.F[1],h.O>g.O?(l.F[1]=d,d.Fa=l,d.Ma=1,d.F[1]=g,g.Fa=d,g.Ma=1):(l.F[0]=d,d.Fa=l,d.Ma=0,d.F[1]=h,h.Fa=d,h.Ma=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].O,g=l.F[1].O,l.O=(h>g?h:g)+1,h=d.F[0],g=d.F[1],d.J=h.J<g.J?h.J:g.J,d.K=h.K<g.K?h.K:g.K,d.L=h.L<g.L?h.L:g.L,d.G=h.G>g.G?h.G:g.G,d.H=h.H>g.H?h.H:g.H,d.I=h.I>g.I?h.I:g.I,h=d.F[0].O,g=d.F[1].O,d.O=(h>g?h:g)+1,null!=c?(c.F[f]=l,l.Fa=c,l.Ma=f):(b.Pb=l,l.Fa=null),d=l)}c=d.F[0].O;f=d.F[1].O;d.O=(c>f?c:f)+1;c=d.F[0];f=d.F[1];d.J=c.J<f.J?c.J:f.J;d.K=c.K<f.K?c.K:f.K;d.L=c.L<f.L?c.L:f.L;d.G=c.G>f.G?c.G:f.G;d.H=c.H>f.H?c.H:f.H;d.I=c.I>f.I?c.I:f.I;d=d.Fa}}}a.Qd=null;if(null!=e.Oa&&null!=e.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");e.F[0]=null;e.F[1]=null;e.Ma=0;e.Fa=null;e.O=0;e.Oa=null;e.M=b.Tc;b.Tc=e;a.userData=null;a.M=null;a.ja=null;a.Zg&&(a.Zg=!1)},sd:function(a,b,e){if(!(a.J<=b.na&&a.G>=b.ka&&a.K<=b.oa&&a.H>=b.la&&a.L<=b.pa&&a.I>=b.ma)){a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var d;b=e.x;d=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<d?0:d;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>d?0:d;a.I+=0>e?0:e}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){e=Array(this.uf<<1);b=0;for(d=this.uf;b<d;){var c=b++;e[c]=this.Ye[c];this.Ye[c]=null}this.Ye=e}this.Ye[this.uf++]=a}}},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;if(!(2>this.ki)){for(var b=this.uf/this.ki<F.bvhIncrementalCollisionThreshold,e=0,d=this.uf;e<d;){var c=e++,f=this.Ye[c];if(f.Zg){var h=this.he,l=f.Qd;h.Nj--;var g=l.Lf,k=l.Kf;null!=g&&(g.Kf=k);null!=k&&(k.Lf=g);l==h.Tf&&(h.Tf=h.Tf.Kf);l==h.Xe&&(h.Xe=h.Xe.Lf);l.Kf=null;l.Lf=null;if(null==l.Oa||l.Oa.Qd!=l||null!=l.F[0]||null!=l.F[1]||0!=l.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(h.Pb==l)h.Pb=null;else{var m=l.Fa,n=m.F[l.Ma^1],q=m.Fa;if(null==q){n.Fa=null;n.Ma=0;h.Pb=n;if(null!=m.Oa&&null!=m.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.Ma=0;m.F[0]=null;m.F[1]=null;m.Ma=0;m.Fa=null;m.O=0;m.Oa=null;m.M=h.Tc;h.Tc=m}else{n.Fa=q;var p=m.Ma;q.F[p]=n;n.Fa=q;n.Ma=p;if(null!=m.Oa&&null!=m.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.Ma=0;m.F[0]=null;m.F[1]=null;m.Ma=0;m.Fa=null;m.O=0;m.Oa=null;m.M=h.Tc;h.Tc=m;for(var r=q;null!=r;){if(h.oi.yj&&!(2>r.O)){var v=r.Fa,aa=r.F[0],w=r.F[1],B=aa.O-w.O,u=r.Ma;if(1<B){var D=aa.F[0],t=aa.F[1];if(D.O>t.O){aa.F[1]=r;r.Fa=aa;r.Ma=1;r.F[0]=t;t.Fa=r;t.Ma=0;var A=aa.F[0],E=aa.F[1];aa.J=A.J<E.J?A.J:E.J;aa.K=A.K<E.K?A.K:E.K;aa.L=A.L<E.L?A.L:E.L;aa.G=A.G>E.G?A.G:E.G;aa.H=A.H>E.H?A.H:E.H;aa.I=A.I>E.I?A.I:E.I;var x=aa.F[0].O,Bb=aa.F[1].O;aa.O=(x>Bb?x:Bb)+1;var N=r.F[0],I=r.F[1];r.J=N.J<I.J?N.J:I.J;r.K=N.K<I.K?N.K:I.K;r.L=N.L<I.L?N.L:I.L;r.G=N.G>I.G?N.G:I.G;r.H=N.H>I.H?N.H:I.H;r.I=N.I>I.I?N.I:I.I;var al=r.F[0].O,Fl=r.F[1].O;r.O=(al>Fl?al:Fl)+1}else{aa.F[0]=r;r.Fa=aa;r.Ma=0;r.F[0]=D;D.Fa=r;D.Ma=0;var C=aa.F[0],ha=aa.F[1];aa.J=C.J<ha.J?C.J:ha.J;aa.K=C.K<ha.K?C.K:ha.K;aa.L=C.L<ha.L?C.L:ha.L;aa.G=C.G>ha.G?C.G:ha.G;aa.H=C.H>ha.H?C.H:ha.H;aa.I=C.I>ha.I?C.I:ha.I;var O=aa.F[0].O,Ub=aa.F[1].O;aa.O=(O>Ub?O:Ub)+1;var L=r.F[0],ka=r.F[1];r.J=L.J<ka.J?L.J:ka.J;r.K=L.K<ka.K?L.K:ka.K;r.L=L.L<ka.L?L.L:ka.L;r.G=L.G>ka.G?L.G:ka.G;r.H=L.H>ka.H?L.H:ka.H;r.I=L.I>ka.I?L.I:ka.I;var bb=r.F[0].O,U=r.F[1].O;r.O=(bb>U?bb:U)+1}null!=v?(v.F[u]=aa,aa.Fa=v,aa.Ma=u):(h.Pb=aa,aa.Fa=null);r=aa}else if(-1>B){var R=w.F[0],lc=w.F[1];if(R.O>lc.O){w.F[1]=r;r.Fa=w;r.Ma=1;r.F[1]=lc;lc.Fa=r;lc.Ma=1;var Na=w.F[0],Ra=w.F[1];w.J=Na.J<Ra.J?Na.J:Ra.J;w.K=Na.K<Ra.K?Na.K:Ra.K;w.L=Na.L<Ra.L?Na.L:Ra.L;w.G=Na.G>Ra.G?Na.G:Ra.G;w.H=Na.H>Ra.H?Na.H:Ra.H;w.I=Na.I>Ra.I?Na.I:Ra.I;var M=w.F[0].O,Pa=w.F[1].O;w.O=(M>Pa?M:Pa)+1;var Ba=r.F[0],Hb=r.F[1];r.J=Ba.J<Hb.J?Ba.J:Hb.J;r.K=Ba.K<Hb.K?Ba.K:Hb.K;r.L=Ba.L<Hb.L?Ba.L:Hb.L;r.G=Ba.G>Hb.G?Ba.G:Hb.G;r.H=Ba.H>Hb.H?Ba.H:Hb.H;r.I=Ba.I>Hb.I?Ba.I:Hb.I;var H=r.F[0].O,Qa=r.F[1].O;r.O=(H>Qa?H:Qa)+1}else{w.F[0]=r;r.Fa=w;r.Ma=0;r.F[1]=R;R.Fa=r;R.Ma=1;var ba=w.F[0],Q=w.F[1];w.J=ba.J<Q.J?ba.J:Q.J;w.K=ba.K<Q.K?ba.K:Q.K;w.L=ba.L<Q.L?ba.L:Q.L;w.G=ba.G>Q.G?ba.G:Q.G;w.H=ba.H>Q.H?ba.H:Q.H;w.I=ba.I>Q.I?ba.I:Q.I;var P=w.F[0].O,ya=w.F[1].O;w.O=(P>ya?P:ya)+1;var ta=r.F[0],W=r.F[1];r.J=ta.J<W.J?ta.J:W.J;r.K=ta.K<W.K?ta.K:W.K;r.L=ta.L<W.L?ta.L:W.L;r.G=ta.G>W.G?ta.G:W.G;r.H=ta.H>W.H?ta.H:W.H;r.I=ta.I>W.I?ta.I:W.I;var pa=r.F[0].O,y=r.F[1].O;r.O=(pa>y?pa:y)+1}null!=v?(v.F[u]=w,w.Fa=v,w.Ma=u):(h.Pb=w,w.Fa=null);r=w}}var Ia=r.F[0].O,ca=r.F[1].O;r.O=(Ia>ca?Ia:ca)+1;var Ea=r.F[0],za=r.F[1];r.J=Ea.J<za.J?Ea.J:za.J;r.K=Ea.K<za.K?Ea.K:za.K;r.L=Ea.L<za.L?Ea.L:za.L;r.G=Ea.G>za.G?Ea.G:za.G;r.H=Ea.H>za.H?Ea.H:za.H;r.I=Ea.I>za.I?Ea.I:za.I;r=r.Fa}}}f.Qd=null;if(null!=l.Oa&&null!=l.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");l.M=null;l.Ma=0;l.F[0]=null;l.F[1]=null;l.Ma=0;l.Fa=null;l.O=0;l.Oa=null;l.M=h.Tc;h.Tc=l;var Fa=this.he,Sa=Fa.Tc;null!=Sa?(Fa.Tc=Sa.M,Sa.M=null):Sa=new te;var la=Sa;la.Oa=f;f.Qd=la;la.J=f.J;la.K=f.K;la.L=f.L;la.G=f.G;la.H=f.H;la.I=f.I;Fa.Nj++;null==Fa.Tf?Fa.Tf=la:(Fa.Xe.Kf=la,la.Lf=Fa.Xe);Fa.Xe=la;if(null==la.Oa||la.Oa.Qd!=la||null!=la.F[0]||null!=la.F[1]||0!=la.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==Fa.Pb)Fa.Pb=la;else{for(var Z=Fa.Pb;0<Z.O;){var Ga=Fa.oi.Dl(Z,la);if(-1==Ga)break;else Z=Z.F[Ga]}var ra=Z.Fa,va=Fa.Tc;null!=va?(Fa.Tc=va.M,va.M=null):va=new te;var J=va;if(null==ra)Fa.Pb=J;else{var La=Z.Ma;ra.F[La]=J;J.Fa=ra;J.Ma=La}var Xa=Z.Ma;J.F[Xa]=Z;Z.Fa=J;Z.Ma=Xa;var S=Z.Ma^1;J.F[S]=la;la.Fa=J;for(la.Ma=S;null!=J;){if(Fa.oi.yj&&!(2>J.O)){var Ya=J.Fa,T=J.F[0],K=J.F[1],ia=T.O-K.O,gb=J.Ma;if(1<ia){var da=T.F[0],Hc=T.F[1];if(da.O>Hc.O){T.F[1]=J;J.Fa=T;J.Ma=1;J.F[0]=Hc;Hc.Fa=J;Hc.Ma=0;var sa=T.F[0],fb=T.F[1];T.J=sa.J<fb.J?sa.J:fb.J;T.K=sa.K<fb.K?sa.K:fb.K;T.L=sa.L<fb.L?sa.L:fb.L;T.G=sa.G>fb.G?sa.G:fb.G;T.H=sa.H>fb.H?sa.H:fb.H;T.I=sa.I>fb.I?sa.I:fb.I;var jb=T.F[0].O,Za=T.F[1].O;T.O=(jb>Za?jb:Za)+1;var ma=J.F[0],oa=J.F[1];J.J=ma.J<oa.J?ma.J:oa.J;J.K=ma.K<oa.K?ma.K:oa.K;J.L=ma.L<oa.L?ma.L:oa.L;J.G=ma.G>oa.G?ma.G:oa.G;J.H=ma.H>oa.H?ma.H:oa.H;J.I=ma.I>oa.I?ma.I:oa.I;var Ja=J.F[0].O,Ha=J.F[1].O;J.O=(Ja>Ha?Ja:Ha)+1}else{T.F[0]=J;J.Fa=T;J.Ma=0;J.F[0]=da;da.Fa=J;da.Ma=0;var ob=T.F[0],fa=T.F[1];T.J=ob.J<fa.J?ob.J:fa.J;T.K=ob.K<fa.K?ob.K:fa.K;T.L=ob.L<fa.L?ob.L:fa.L;T.G=ob.G>fa.G?ob.G:fa.G;T.H=ob.H>fa.H?ob.H:fa.H;T.I=ob.I>fa.I?ob.I:fa.I;var ea=T.F[0].O,ja=T.F[1].O;T.O=(ea>ja?ea:ja)+1;var cb=J.F[0],Aa=J.F[1];J.J=cb.J<Aa.J?cb.J:Aa.J;J.K=cb.K<Aa.K?cb.K:Aa.K;J.L=cb.L<Aa.L?cb.L:Aa.L;J.G=cb.G>Aa.G?cb.G:Aa.G;J.H=cb.H>Aa.H?cb.H:Aa.H;J.I=cb.I>Aa.I?cb.I:Aa.I;var sb=J.F[0].O,Ua=J.F[1].O;J.O=(sb>Ua?sb:Ua)+1}null!=Ya?(Ya.F[gb]=T,T.Fa=Ya,T.Ma=gb):(Fa.Pb=T,T.Fa=null);J=T}else if(-1>ia){var qb=K.F[0],rb=K.F[1];if(qb.O>rb.O){K.F[1]=J;J.Fa=K;J.Ma=1;J.F[1]=rb;rb.Fa=J;rb.Ma=1;var tb=K.F[0],Va=K.F[1];K.J=tb.J<Va.J?tb.J:Va.J;K.K=tb.K<Va.K?tb.K:Va.K;K.L=tb.L<Va.L?tb.L:Va.L;K.G=tb.G>Va.G?tb.G:Va.G;K.H=tb.H>Va.H?tb.H:Va.H;K.I=tb.I>Va.I?tb.I:Va.I;var xb=K.F[0].O,rc=K.F[1].O;K.O=(xb>rc?xb:rc)+1;var $a=J.F[0],ua=J.F[1];J.J=$a.J<ua.J?$a.J:ua.J;J.K=$a.K<ua.K?$a.K:ua.K;J.L=$a.L<ua.L?$a.L:ua.L;J.G=$a.G>ua.G?$a.G:ua.G;J.H=$a.H>ua.H?$a.H:ua.H;J.I=$a.I>ua.I?$a.I:ua.I;var Yb=J.F[0].O,G=J.F[1].O;J.O=(Yb>G?Yb:G)+1}else{K.F[0]=J;J.Fa=K;J.Ma=0;J.F[1]=qb;qb.Fa=J;qb.Ma=1;var pb=K.F[0],db=K.F[1];K.J=pb.J<db.J?pb.J:db.J;K.K=pb.K<db.K?pb.K:db.K;K.L=pb.L<db.L?pb.L:db.L;K.G=pb.G>db.G?pb.G:db.G;K.H=pb.H>db.H?pb.H:db.H;K.I=pb.I>db.I?pb.I:db.I;var oc=K.F[0].O,ab=K.F[1].O;K.O=(oc>ab?oc:ab)+1;var hb=J.F[0],z=J.F[1];J.J=hb.J<z.J?hb.J:z.J;J.K=hb.K<z.K?hb.K:z.K;J.L=hb.L<z.L?hb.L:z.L;J.G=hb.G>z.G?hb.G:z.G;J.H=hb.H>z.H?hb.H:z.H;J.I=hb.I>z.I?hb.I:z.I;var Db=J.F[0].O,de=J.F[1].O;J.O=(Db>de?Db:de)+1}null!=Ya?(Ya.F[gb]=K,K.Fa=Ya,K.Ma=gb):(Fa.Pb=K,K.Fa=null);J=K}}var Tc=J.F[0].O,Fb=J.F[1].O;J.O=(Tc>Fb?Tc:Fb)+1;var Oa=J.F[0],nb=J.F[1];J.J=Oa.J<nb.J?Oa.J:nb.J;J.K=Oa.K<nb.K?Oa.K:nb.K;J.L=Oa.L<nb.L?Oa.L:nb.L;J.G=Oa.G>nb.G?Oa.G:nb.G;J.H=Oa.H>nb.H?Oa.H:nb.H;J.I=Oa.I>nb.I?Oa.I:nb.I;J=J.Fa}}b&&this.fh(this.he.Pb,f.Qd);f.Zg=!1}this.Ye[c]=null}b||this.fh(this.he.Pb,this.he.Pb);this.uf=0}},Sd:function(a,b,e){null!=this.he.Pb&&this.rl(this.he.Pb,a.x,a.y,a.z,b.x,b.y,b.z,e)},rf:function(a,b,e,d){null!=this.he.Pb&&this.Vk(this.he.Pb,a,b,e,d)},eh:function(a,b){null!=this.he.Pb&&this.Qk(this.he.Pb,a,b)},wn:function(){return this.he.Qm()},ra:tc});te.aa=!0;te.prototype={ra:te};pj.aa=!0;pj.Kb=Jc;pj.prototype=mb(Jc.prototype,{ra:pj});oj.aa=!0;oj.prototype={Dl:function(a,b){switch(this.Gl){case 0:var e,d,c;e=b.J+b.G;d=b.K+b.H;c=b.L+b.I;var f=a.F[0],h=a.F[1],l,g;b=f.J+f.G;a=f.K+f.H;f=f.L+f.I;l=h.J+h.G;g=h.K+h.H;h=h.L+h.I;b-=e;a-=d;f-=c;l-=e;g-=d;h-=c;return b*b+a*a+f*f<l*l+g*g+h*h?0:1;case 1:f=a.F[0];e=a.F[1];d=a.H-a.K;c=a.I-a.L;var h=2*((a.G-a.J)*(d+c)+d*c),k,m;d=a.J<b.J?a.J:b.J;k=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;c=a.G>b.G?a.G:b.G;m=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;a=m-k;l=g-l;d=2*((c-d)*(a+l)+a*l);a=2*d;var n=2*(d-h),h=n;d=f.J<b.J?f.J:b.J;k=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;c=f.G>b.G?f.G:b.G;m=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.O?(f=m-k,l=g-l,h+=2*((c-d)*(f+l)+f*l)):(k=m-k,l=g-l,g=f.H-f.K,m=f.I-f.L,h+=2*((c-d)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m));f=n;d=e.J<b.J?e.J:b.J;k=e.K<b.K?e.K:b.K;l=e.L<b.L?e.L:b.L;c=e.G>b.G?e.G:b.G;m=e.H>b.H?e.H:b.H;g=e.I>b.I?e.I:b.I;0==e.O?(e=m-k,b=g-l,f+=2*((c-d)*(e+b)+e*b)):(b=m-k,l=g-l,g=e.H-e.K,n=e.I-e.L,f+=2*((c-d)*(b+l)+b*l)-2*((e.G-e.J)*(g+n)+g*n));return a<h?a<f?-1:1:h<f?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Gl),-1}},ra:oj};Fk.aa=!0;Fk.prototype={Qm:function(){return this.Yk(this.Pb)},Yk:function(a){if(null==a||0==a.O)return 0;var b=a.F[0].O-a.F[1].O;0>b&&(b=-b);return b+this.Yk(a.F[0])+this.Yk(a.F[1])},ra:Fk};Da.aa=!0;Da.prototype={Aa:function(a,b){this.na=a.x;this.oa=a.y;this.pa=a.z;this.ka=b.x;this.la=b.y;this.ma=b.z;return this},Hc:function(){var a=new t;a.x=this.na;a.y=this.oa;a.z=this.pa;return a},Ic:function(a){a.x=this.na;a.y=this.oa;a.z=this.pa},Pd:function(a){this.na=a.x;this.oa=a.y;this.pa=a.z;return this},zc:function(){var a=new t;a.x=this.ka;a.y=this.la;a.z=this.ma;return a},Cc:function(a){a.x=this.ka;a.y=this.la;a.z=this.ma},cd:function(a){this.ka=a.x;this.la=a.y;this.ma=a.z;return this},tb:function(){var a=new t,b,e,d;b=this.na+this.ka;e=this.oa+this.la;d=this.pa+this.ma;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},Lb:function(a){var b,e,d;b=this.na+this.ka;e=this.oa+this.la;d=this.pa+this.ma;a.x=.5*b;a.y=.5*e;a.z=.5*d},lc:function(){var a=new t,b,e,d;b=this.ka-this.na;e=this.la-this.oa;d=this.ma-this.pa;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},mc:function(a){var b,e,d;b=this.ka-this.na;e=this.la-this.oa;d=this.ma-this.pa;a.x=.5*b;a.y=.5*e;a.z=.5*d},Qa:function(a){this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.pa=this.pa<a.pa?this.pa:a.pa;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;this.ma=this.ma>a.ma?this.ma:a.ma;return this},bb:function(a){var b=new Da;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.pa=this.pa<a.pa?this.pa:a.pa;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;b.ma=this.ma>a.ma?this.ma:a.ma;return b},Jc:function(a){return this.na<a.ka&&this.ka>a.na&&this.oa<a.la&&this.la>a.oa&&this.pa<a.ma?this.ma>a.pa:!1},qc:function(a){var b=new Da;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.pa=this.pa>a.pa?this.pa:a.pa;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;b.ma=this.ma<a.ma?this.ma:a.ma;return b},rc:function(a,b){b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.pa=this.pa>a.pa?this.pa:a.pa;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;b.ma=this.ma<a.ma?this.ma:a.ma},Zd:function(a){this.na=a.na;this.oa=a.oa;this.pa=a.pa;this.ka=a.ka;this.la=a.la;this.ma=a.ma;return this},clone:function(){var a=new Da;a.na=this.na;a.oa=this.oa;a.pa=this.pa;a.ka=this.ka;a.la=this.la;a.ma=this.ma;return a},ra:Da};fd.aa=!0;fd.Kb=xa;fd.prototype=mb(xa.prototype,{hn:function(){var a=new t;a.x=this.Le;a.y=this.Me;a.z=this.Ne;return a},jn:function(a){a.x=this.Le;a.y=this.Me;a.z=this.Ne},Be:function(){this.nf=8*this.Le*this.Me*this.Ne;var a,b,e;a=this.Le*this.Le;b=this.Me*this.Me;e=this.Ne*this.Ne;this.cg=.3333333333333333*(b+e);this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(e+a);this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(a+b)},Mb:function(a,b){var e,d,c,f,h;f=b.o*this.mk+b.f*this.nk+b.h*this.pk;h=b.i*this.mk+b.m*this.nk+b.j*this.pk;e=b.l*this.mk+b.g*this.nk+b.s*this.pk;var l,g;l=b.o*this.qk+b.f*this.rk+b.h*this.sk;g=b.i*this.qk+b.m*this.rk+b.j*this.sk;d=b.l*this.qk+b.g*this.rk+b.s*this.sk;var k,m;k=b.o*this.tk+b.f*this.uk+b.h*this.vk;m=b.i*this.tk+b.m*this.uk+b.j*this.vk;c=b.l*this.tk+b.g*this.uk+b.s*this.vk;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>d?-d:d)+(0>c?-c:c);a.na=b.v-f;a.oa=b.A-h;a.pa=b.B-e;a.ka=b.v+f;a.la=b.A+h;a.ma=b.B+e},Ld:function(a,b){var e,d,c;c=d=e=this.gc;e=e<this.Le?e:this.Le;d=d<this.Me?d:this.Me;c=c<this.Ne?c:this.Ne;e=this.Le-e;d=this.Me-d;c=this.Ne-c;b.x=0<a.x?e:-e;b.y=0<a.y?d:-d;b.z=0<a.z?c:-c},li:function(a,b,e,d,c,f,h){var l=this.Le,g=this.Me,k=this.Ne;d-=a;c-=b;f-=e;var m=0,n=0,q=0,p=1,r=1,v=1;if(-1E-6<d&&1E-6>d){if(a<=-l||a>=l)return!1}else{var aa=1/d,w=(-l-a)*aa,l=(l-a)*aa;w>l&&(aa=w,w=l,l=aa);0<w&&(m=w);1>l&&(p=l)}if(-1E-6<c&&1E-6>c){if(b<=-g||b>=g)return!1}else w=1/c,l=(-g-b)*w,g=(g-b)*w,l>g&&(w=l,l=g,g=w),0<l&&(n=l),1>g&&(r=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(q=g),1>k&&(v=k);if(1<=m||1<=n||1<=q||0>=p||0>=r||0>=v)return!1;k=m;m=0;n>k&&(k=n,m=1);q>k&&(k=q,m=2);r<p&&(p=r);v<p&&(p=v);if(k>p||!k)return!1;switch(m){case 0:h.normal.Aa(0<d?-1:1,0,0);break;case 1:h.normal.Aa(0,0<c?-1:1,0);break;case 2:h.normal.Aa(0,0,0<f?-1:1)}h.position.Aa(a+k*d,b+k*c,e+k*f);h.fraction=k;return!0},ra:fd});od.aa=!0;od.Kb=xa;od.prototype=mb(xa.prototype,{Jh:function(){return this.ab},mj:function(){return this.Hb},Be:function(){var a=this.ab*this.ab,b=this.Hb*this.Hb,e=6.28318530717958*a*this.Hb,d=3.14159265358979*a*this.ab*4/3,c=(this.nf=e+d)?1/this.nf:0;this.cg=b=c*(e*(.25*a+b/3)+d*(.4*a+this.Hb*this.ab*.75+b));this.fg=this.eg=this.dg=0;this.gg=c*(e*a*.5+d*a*.4);this.jg=this.ig=this.hg=0;this.kg=b},Mb:function(a,b){var e,d,c;c=d=e=this.ab;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Hb;h=(0>h?-h:h)*this.Hb;l=(0>l?-l:l)*this.Hb;e+=f;d+=h;c+=l;a.na=b.v-e;a.oa=b.A-d;a.pa=b.B-c;a.ka=b.v+e;a.la=b.A+d;a.ma=b.B+c},Ld:function(a,b){0<a.y?b.Aa(0,this.Hb,0):b.Aa(0,-this.Hb,0)},li:function(a,b,e,d,c,f,h){var l=this.Hb,g=d-a,k=f-e,m,n=g*g+k*k,q=a*g+e*k;m=a*a+e*e-this.ab*this.ab;var p=q*q-n*m;if(0>p)return!1;if(0<n){if(p=Math.sqrt(p),m=(-q-p)/n,1<=m||0>=(-q+p)/n)return!1}else{if(0<=m)return!1;m=0}n=b+(c-b)*m;if(n>-l&&n<l)return 0<m?(f=m,q=h.normal.Aa(a+g*f,0,e+k*f),b=Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),0<b&&(b=1/b),c=q.y*b,d=q.z*b,q.x=q.x*b,q.y=c,q.z=d,h.position.Aa(a+f*g,n,e+f*k),h.fraction=f,!0):!1;var g=0>n?-l:l,r;r=a-0;l=b-g;k=e-0;a=d-a;b=c-b;e=f-e;n=a*a+b*b+e*e;q=r*a+l*b+k*e;m=r*r+l*l+k*k-this.ab*this.ab;p=q*q-n*m;if(0>p)return!1;f=(-q-Math.sqrt(p))/n;if(0>f||1<f)return!1;a=r+a*f;n=l+b*f;e=k+e*f;q=a*a+n*n+e*e;0<q&&(q=1/Math.sqrt(q));b=h.position;b.x=a+0;b.y=n+g;b.z=e+0;g=h.normal;g.x=a*q;g.y=n*q;g.z=e*q;h.fraction=f;return!0},ra:od});ed.aa=!0;ed.Kb=xa;ed.prototype=mb(xa.prototype,{Jh:function(){return this.ab},mj:function(){return this.Hb},Be:function(){var a=this.ab*this.ab,b=this.Hb*this.Hb*4;this.nf=3.14159265358979*a*this.Hb*2/3;this.cg=.05*(3*a+2*b);this.fg=this.eg=this.dg=0;this.gg=.3*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+2*b)},Mb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Hb;d*=this.Hb;c*=this.Hb;var g,k,m,n,q,p;g=-e-f;k=-d-h;m=-c-l;n=-e+f;q=-d+h;p=-c+l;l=g>n?g:n;h=k>q?k:q;f=m>p?m:p;g=g<n?g:n;k=k<q?k:q;m=m<p?m:p;a.na=b.v+(g<e?g:e);a.oa=b.A+(k<d?k:d);a.pa=b.B+(m<c?m:c);a.ka=b.v+(l>e?l:e);a.la=b.A+(h>d?h:d);a.ma=b.B+(f>c?f:c)},Ld:function(a,b){var e=a.x,d=a.y,c=a.z;0<d&&d*d>this.ak*this.ak*(e*e+d*d+c*c)?(b.Aa(0,this.Hb-this.gc/this.ak,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,d=e*e+a*a,c=2*this.Hb,c=(c-this.gc)/c*this.ab-this.gc/this.Sj,0>c&&(c=0),d=0<d?c/Math.sqrt(d):0,c=this.Hb-this.gc,0>c&&(c=0),b.x=e*d,b.y=-c,b.z=a*d)},li:function(a,b,e,d,c,f,h){var l=this.Hb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,m=(l-b)*m;if(n>m)var q=n,n=m,m=q;0<n&&(g=n);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var q=this.Sj*this.Sj,m=q*(d*d+c*c+f*f)-c*c,n=q*(a*d+b*c+e*f)-b*c,q=q*(a*a+b*b+e*e)-b*b,p=n*n-m*q;if(m){if(0>p)return!1;p=Math.sqrt(p);if(0>m)if(0<c){if(q=0,n=(-n+p)/m,0>=n)return!1}else{if(q=(-n-p)/m,n=1,1<=q)return!1}else if(q=(-n-p)/m,n=(-n+p)/m,1<=q||0>=n)return!1}else if(m=-q/(2*n),0<n){if(q=0,n=m,0>=m)return!1}else if(q=m,n=1,1<=m)return!1;b+=l;if(n<=g||k<=q)return!1;if(q<g){l=g;if(!l)return!1;h.normal.Aa(0,0<c?-1:1,0)}else{l=q;if(!l)return!1;g=h.normal.Aa(a+d*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;k=this.Sj;n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;h.normal.y+=this.ak}h.position.Aa(a+l*d,b+l*c,e+l*f);h.fraction=l;return!0},ra:ed});Hd.aa=!0;Hd.Kb=xa;Hd.prototype=mb(xa.prototype,{An:function(){return this.zb},Be:function(){this.cg=this.nf=1;this.fg=this.eg=this.dg=0;this.gg=1;this.jg=this.ig=this.hg=0;this.kg=1;for(var a=this.zb[0].x,b=this.zb[0].y,e=this.zb[0].z,d=this.zb[0].x,c=this.zb[0].y,f=this.zb[0].z,h=1,l=this.Ae;h<l;){var g=h++,k=this.zb[g].x,m=this.zb[g].y,g=this.zb[g].z;k<a?a=k:k>d&&(d=k);m<b?b=m:m>c&&(c=m);g<e?e=g:g>f&&(f=g)}h=d-a;l=c-b;k=f-e;this.nf=h*l*k;a=.25*((a+d)*(a+d)+(b+c)*(b+c)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.cg=.3333333333333333*(l+k)+a;this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(k+h)+a;this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(h+l)+a},Mb:function(a,b){var e,d,c,f,h,l,g,k,m;m=k=g=this.gc;var n,q,p;e=this.zb[0];n=e.x;q=e.y;p=e.z;d=b.o*n+b.f*q+b.h*p;e=b.i*n+b.m*q+b.j*p;c=b.l*n+b.g*q+b.s*p;n=d+b.v;q=e+b.A;p=c+b.B;e=n;d=q;c=p;f=n;h=q;l=p;for(var r=1,v=this.Ae;r<v;){n=r++;p=this.zb[n];n=p.x;q=p.y;p=p.z;var aa,w;aa=b.o*n+b.f*q+b.h*p;w=b.i*n+b.m*q+b.j*p;p=b.l*n+b.g*q+b.s*p;n=aa;q=w;n+=b.v;q+=b.A;p+=b.B;e=e<n?e:n;d=d<q?d:q;c=c<p?c:p;f=f>n?f:n;h=h>q?h:q;l=l>p?l:p}a.na=e-g;a.oa=d-k;a.pa=c-m;a.ka=f+g;a.la=h+k;a.ma=l+m},Ld:function(a,b){for(var e=this.zb[0],e=e.x*a.x+e.y*a.y+e.z*a.z,d=0,c=1,f=this.Ae;c<f;){var h=c++,l=this.zb[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,d=h)}a=this.zb[d];b.x=a.x;b.y=a.y;b.z=a.z},ra:Hd});Dc.aa=!0;Dc.Kb=xa;Dc.prototype=mb(xa.prototype,{Jh:function(){return this.ab},mj:function(){return this.Hb},Be:function(){var a=this.ab*this.ab,b=this.Hb*this.Hb*4;this.nf=3.14159265358979*a*this.Hb*2;this.cg=.08333333333333333*(3*a+b);this.fg=this.eg=this.dg=0;this.gg=.5*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+b)},Mb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;e=0>e?-e:e;d=0>d?-d:d;c=0>c?-c:c;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Hb;d*=this.Hb;c*=this.Hb;f+=e;h+=d;l+=c;a.na=b.v-f;a.oa=b.A-h;a.pa=b.B-l;a.ka=b.v+f;a.la=b.A+h;a.ma=b.B+l},Ld:function(a,b){var e=a.x,d=a.z,c=e*e+d*d,f=this.ab-this.gc;0>f&&(f=0);c=0<c?f/Math.sqrt(c):0;f=this.Hb-this.gc;0>f&&(f=0);b.x=e*c;b.y=0<a.y?f:-f;b.z=d*c},li:function(a,b,e,d,c,f,h){var l=this.Hb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,l=(l-b)*m;n>l&&(m=n,n=l,l=m);0<n&&(g=n);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=d*d+f*f,n=a*d+e*f,m=a*a+e*e-this.ab*this.ab,q=n*n-l*m;if(0>q)return!1;if(0<l){if(q=Math.sqrt(q),m=(-n-q)/l,l=(-n+q)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.Aa(0,0<c?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.Aa(a+d*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);n=k.y*l;m=k.z*l;k.x=k.x*l;k.y=n;k.z=m}h.position.Aa(a+g*d,b+g*c,e+g*f);h.fraction=g;return!0},ra:Dc});Nc.aa=!0;Wd.aa=!0;Wd.prototype={ra:Wd};Nd.aa=!0;Nd.Kb=xa;Nd.prototype=mb(xa.prototype,{Jh:function(){return this.ab},Be:function(){this.nf=4.188790204786386*this.ab*this.ab*this.ab;this.cg=.4*this.ab*this.ab;this.fg=this.eg=this.dg=0;this.gg=.4*this.ab*this.ab;this.jg=this.ig=this.hg=0;this.kg=.4*this.ab*this.ab},Mb:function(a,b){var e,d,c;c=d=e=this.ab;a.na=b.v-e;a.oa=b.A-d;a.pa=b.B-c;a.ka=b.v+e;a.la=b.A+d;a.ma=b.B+c},Ld:function(a,b){b.Z()},li:function(a,b,e,d,c,f,h){var l;d-=a;c-=b;l=f-e;f=d*d+c*c+l*l;var g=a*d+b*c+e*l,k=g*g-f*(a*a+b*b+e*e-this.ab*this.ab);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=d*f;b+=c*f;e+=l*f;d=a*a+b*b+e*e;0<d&&(d=1/Math.sqrt(d));c=h.position;c.x=a;c.y=b;c.z=e;c=h.normal;c.x=a*d;c.y=b*d;c.z=e*d;h.fraction=f;return!0},ra:Nd});Ed.aa=!0;Ed.prototype={Qa:function(a,b){return this.Ib[a][b]},ra:Ed};dd.aa=!0;dd.prototype={cm:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var d=b++;this.points[d].depth>a&&(a=this.points[d].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.Z();e.position2.Z();e.depth=0;e.id=0}this.normal.Z()},ra:dd};nj.aa=!0;nj.prototype={ra:nj};bk.aa=!0;bk.prototype={Je:function(){null!=this.Yh&&this.Yh.clear()},ra:bk};Xc.aa=!0;Xc.prototype={xi:function(a,b,e,d){var c=a.normal;c.x=b;c.y=e;c.z=d;this.qh&&(a=a.normal,b=-a.y,e=-a.z,a.x=-a.x,a.y=b,a.z=e)},ri:function(a,b,e,d,c,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.qh?(l=a.position1,l.x=c,l.y=f,l.z=h,c=a.position2,c.x=b,c.y=e,c.z=d):(l=a.position1,l.x=b,l.y=e,l.z=d,b=a.position2,b.x=c,b.y=f,b.z=h)},Ih:function(){},Yl:function(a,b,e,d,c,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.Z();g.position2.Z();g.depth=0;g.id=0}a.normal.Z();this.qh?this.Ih(a,e,b,c,d,f):this.Ih(a,b,e,d,c,f)},ra:Xc};yd.aa=!0;yd.Kb=Xc;yd.prototype=mb(Xc.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k,m;f=d.f;h=d.m;l=d.g;g=c.f;k=c.m;m=c.g;var n=b.Hb,q=e.Hb;b=b.ab;e=e.ab;var p,r,v,aa,w,B;p=d.v+f*-n;r=d.A+h*-n;v=d.B+l*-n;f=d.v+f*n;aa=d.A+h*n;w=d.B+l*n;h=c.v+g*-q;l=c.A+k*-q;d=c.B+m*-q;g=c.v+g*q;k=c.A+k*q;B=c.B+m*q;var u,D,t;u=p-h;D=r-l;t=v-d;f-=p;aa-=r;c=w-v;m=g-h;w=k-l;g=B-d;k=-(u*f+D*aa+t*c);u=u*m+D*w+t*g;D=n*n*4;t=f*m+aa*w+c*g;B=q*q*4;D||B?D?B?((q=D*B-t*t)?(n=t*u+B*k,n=0>n?0:n>q?1:n/q):n=0,q=n*t+u,0>q?(q=0,n=k,n=0>n?0:n>D?1:n/D):q>B?(q=1,n=t+k,n=0>n?0:n>D?1:n/D):q/=B):(q=0,n=k,n=0>n?0:n>D?1:n/D):(n=0,q=u,q=0>q?0:q>B?1:q/B):q=n=0;p+=f*n;r+=aa*n;v+=c*n;h+=m*q;l+=w*q;d+=g*q;aa=p-h;f=r-l;q=v-d;n=aa*aa+f*f+q*q;n>=(b+e)*(b+e)||(n=Math.sqrt(n),0<n?(aa*=1/n,f*=1/n,q*=1/n):(aa=1,q=f=0),this.xi(a,aa,f,q),this.ri(a,p+aa*-b,r+f*-b,v+q*-b,h+aa*e,l+f*e,d+q*e,b+e-n,0))},ra:yd});Sd.aa=!0;Sd.Kb=Xc;Sd.prototype=mb(Xc.prototype,{Ih:function(a,b,e,d,c,f){var h=Jb.Qa;d=h.kj(b,e,d,c,F.enableGJKCaching?f:null,!0);a.incremental=!0;if(d!=Nb.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+d);else if(!(h.distance>b.gc+e.gc)){var l,g,k;f=h.closestPoint1;d=f.x;c=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,n,q;m=d-l;n=c-g;q=f-k;if(m*m+n*n+q*q){0>h.distance&&(m=-m,n=-n,q=-q);var p=m*m+n*n+q*q;0<p&&(p=1/Math.sqrt(p));m*=p;n*=p;q*=p;this.xi(a,m,n,q);d+=m*-b.gc;c+=n*-b.gc;f+=q*-b.gc;l+=m*e.gc;g+=n*e.gc;k+=q*e.gc;this.ri(a,d,c,f,l,g,k,b.gc+e.gc-h.distance,0)}}},ra:Sd});Gd.aa=!0;Gd.Kb=Xc;Gd.prototype=mb(Xc.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k;f=e.Le;h=e.Me;e=e.Ne;l=-f;g=-h;k=-e;b=b.ab;var m,n,q;m=d.v-c.v;n=d.A-c.A;q=d.B-c.B;var p,r;p=c.o*m+c.i*n+c.l*q;r=c.f*m+c.m*n+c.g*q;m=c.h*m+c.j*n+c.s*q;if(l<p&&f>p&&g<r&&h>r&&k<m&&e>m){var v;n=f-(0>p?-p:p);v=h-(0>r?-r:r);var aa=e-(0>m?-m:m),w,B;n<v?n<aa?(l=0<p?1:-1,w=k=g=0,q=B=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),B=w=1,q=0,n=aa):v<aa?(0<r?(l=0,g=1):(l=0,g=-1),k=0,w=1,B=0,q=1,n=v):(0<m?(g=l=0,k=1):(g=l=0,k=-1),B=w=1,q=0,n=aa);p=l*f+w*p;h=g*h+B*r;m=k*e+q*m;e=c.o*p+c.f*h+c.h*m;r=c.i*p+c.m*h+c.j*m;h=c.l*p+c.g*h+c.s*m;m=c.o*l+c.f*g+c.h*k;p=c.i*l+c.m*g+c.j*k;f=c.l*l+c.g*g+c.s*k;this.xi(a,m,p,f);this.ri(a,d.v+m*-b,d.A+p*-b,d.B+f*-b,c.v+e,c.A+r,c.B+h,n,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=p<f?p:f,n=r<h?r:h,q=m<e?m:e,f=f>l?f:l,n=n>g?n:g,q=q>k?q:k,p-=f,l=r-n,g=m-q,e=p*p+l*l+g*g,e>=b*b||(e=Math.sqrt(e),r=c.o*f+c.f*n+c.h*q,h=c.i*f+c.m*n+c.j*q,m=c.l*f+c.g*n+c.s*q,k=c.o*p+c.f*l+c.h*g,f=c.i*p+c.m*l+c.j*g,p=c.l*p+c.g*l+c.s*g,g=k*k+f*f+p*p,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,p*=g,this.xi(a,l,f,p),this.ri(a,d.v+l*-b,d.A+f*-b,d.B+p*-b,c.v+r,c.A+h,c.B+m,b-e,0))},ra:Gd});Fd.aa=!0;Fd.Kb=Xc;Fd.prototype=mb(Xc.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f=e.Hb;b=b.ab;e=e.ab;var h,l,g;h=c.f;l=c.m;g=c.g;var k,m;k=d.v;m=d.A;d=d.B;var n,q,p,r;n=c.v+h*-f;q=c.A+l*-f;p=c.B+g*-f;h=c.v+h*f;l=c.A+l*f;r=c.B+g*f;c=h-n;g=l-q;l=r-p;f=f*f*4;h=(k-n)*c+(m-q)*g+(d-p)*l;h=0>h?0:h>f?1:h/f;f=n+c*h;q+=g*h;p+=l*h;l=k-f;g=m-q;n=d-p;c=l*l+g*g+n*n;c>=(b+e)*(b+e)||(c=Math.sqrt(c),0<c?(l*=1/c,g*=1/c,n*=1/c):(l=1,n=g=0),this.xi(a,l,g,n),this.ri(a,k+l*-b,m+g*-b,d+n*-b,f+l*e,q+g*e,p+n*e,b+e-c,0))},ra:Fd});Se.aa=!0;Se.Kb=Xc;Se.prototype=mb(Xc.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f,h,l;f=d.v-c.v;h=d.A-c.A;l=d.B-c.B;b=b.ab;e=e.ab;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.xi(a,f,h,l),this.ri(a,d.v+f*-b,d.A+h*-b,d.B+l*-b,c.v+f*e,c.A+h*e,c.B+l*e,b+e-g,0))},ra:Se});mj.aa=!0;mj.prototype={Sn:function(){for(var a=this.Xc;null!=a;){for(var b=a.M,e=0;3>e;){var d=e++;a.zb[d].dj=null;a.zb[d].pi=null;if(-1==a.Ie[d])return this.Bc=2,!1;if(null==a.we[d])return this.Bc=3,!1}a=b}return!0},am:function(a,b,e){if(b.Jk!=a){b.Jk=a;var d=b.Sh;d.x=e.x;d.y=e.y;d.z=e.z;var c=b.zb[0].ud,f=d.y-c.y,h=d.z-c.z;d.x=d.x-c.x;d.y=f;d.z=h;d=b.Sh;c=b.Lj;b.cj=0<d.x*c.x+d.y*c.y+d.z*c.z;if(b.cj){for(d=0;3>d;)if(c=d++,f=b.we[c],null!=f){h=f.Sh;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.zb[0].ud,g=h.y-l.y,k=h.z-l.z;h.x=h.x-l.x;h.y=g;h.z=k;h=f.Sh;l=f.Lj;f.cj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.cj?this.am(a,f,e):(h=b.zb[c],h.pi=b.zb[b.ii[c]],h.dj=f)}for(a=0;3>a;)e=a++,d=b.we[e],null!=d&&(c=b.Ie[e],d.we[c]=null,d.Ie[c]=-1,b.we[e]=null,b.Ie[e]=-1);this.ah--;a=b.ja;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ja=a);b==this.Xc&&(this.Xc=this.Xc.M);b==this.Fc&&(this.Fc=this.Fc.ja);b.M=null;b.ja=null;b.$j();b.M=this.ve;this.ve=b}else this.Bc=6}},Vg:function(a,b,e,d){this.Bc=0;this.Ae=4;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;this.zb[3]=d;var c=this.Wh,f=a.ud;c.x=f.x;c.y=f.y;c.z=f.z;var f=b.ud,h=c.y+f.y,l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=e.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=d.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=.25*c.y;h=.25*c.z;c.x=.25*c.x;c.y=f;c.z=h;c=this.ve;null!=c?(this.ve=c.M,c.M=null):c=new Mc;f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new Mc;h=this.ve;null!=h?(this.ve=h.M,h.M=null):h=new Mc;l=this.ve;null!=l?(this.ve=l.M,l.M=null):l=new Mc;c.Aa(a,b,e,this.Wh,!0)||(this.Bc=1);f.Aa(a,b,d,this.Wh,!0)||(this.Bc=1);h.Aa(a,e,d,this.Wh,!0)||(this.Bc=1);l.Aa(b,e,d,this.Wh,!0)||(this.Bc=1);c.Ig(f)||(this.Bc=1);c.Ig(h)||(this.Bc=1);c.Ig(l)||(this.Bc=1);f.Ig(h)||(this.Bc=1);f.Ig(l)||(this.Bc=1);h.Ig(l)||(this.Bc=1);this.ah++;null==this.Xc?this.Xc=c:(this.Fc.M=c,c.ja=this.Fc);this.Fc=c;this.ah++;null==this.Xc?this.Xc=f:(this.Fc.M=f,f.ja=this.Fc);this.Fc=f;this.ah++;null==this.Xc?this.Xc=h:(this.Fc.M=h,h.ja=this.Fc);this.Fc=h;this.ah++;null==this.Xc?this.Xc=l:(this.Fc.M=l,l.ja=this.Fc);this.Fc=l;return!this.Bc},Im:function(a,b){this.zb[this.Ae++]=a;var e=b.zb[0];this.am(this.Ae,b,a.ud);if(0!=this.Bc)return!1;b=e;for(var d=null,c=null;;){if(null==b.pi)return this.Bc=4,!1;if(null==b.dj)return this.Bc=5,!1;var f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new Mc;null==c&&(c=f);f.Aa(b,b.pi,a,this.Wh,!1)||(this.Bc=1);if(0!=this.Bc)return!1;this.ah++;null==this.Xc?this.Xc=f:(this.Fc.M=f,f.ja=this.Fc);this.Fc=f;f.Ig(b.dj)||(this.Bc=1);null==d||f.Ig(d)||(this.Bc=1);d=f;b=b.pi;if(b==e)break}d.Ig(c)||(this.Bc=1);return 0==this.Bc?this.Sn():!1},ra:mj};Mc.aa=!0;Mc.prototype={Aa:function(a,b,e,d,c){null==c&&(c=!1);var f,h,l,g,k,m,n,q,p,r,v,aa,w=a.ud;f=w.x;h=w.y;l=w.z;var B=b.ud;g=B.x;k=B.y;m=B.z;var u=e.ud;n=u.x;q=u.y;p=u.z;r=d.x;v=d.y;aa=d.z;var D,t,A,E,x,Bb,N,I,al;D=g-f;t=k-h;A=m-l;E=n-f;x=q-h;Bb=p-l;N=f-r;I=h-v;al=l-aa;var F,C,ha;F=t*Bb-A*x;C=A*E-D*Bb;ha=D*x-t*E;var O=!1;if(0>N*F+I*C+al*ha)if(c){var Ub=b;b=e;e=Ub;F*=-1;C*=-1;ha*=-1}else O=!0;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;var L=this.Lj;L.x=F;L.y=C;L.z=ha;var ka=a.ud,bb=b.ud,U=e.ud,R=this.Sh,M,Na,Ra,yc,Pa,Ba,Hb,H,Qa,ba,Q,P,ya,ta,W,pa,y,Ia;M=ka.x;Na=ka.y;Ra=ka.z;yc=bb.x;Pa=bb.y;Ba=bb.z;Hb=U.x;H=U.y;Qa=U.z;ba=yc-M;Q=Pa-Na;P=Ba-Ra;ya=Hb-yc;ta=H-Pa;W=Qa-Ba;pa=M-Hb;y=Na-H;Ia=Ra-Qa;var ca,Ea,za;ca=Q*W-P*ta;Ea=P*ya-ba*W;za=ba*ta-Q*ya;var Fa=M*(Q*za-P*Ea)+Na*(P*ca-ba*za)+Ra*(ba*Ea-Q*ca),Sa=yc*(ta*za-W*Ea)+Pa*(W*ca-ya*za)+Ba*(ya*Ea-ta*ca),la=Hb*(y*za-Ia*Ea)+H*(Ia*ca-pa*za)+Qa*(pa*Ea-y*ca),Z=-1,Ga,ra,va;va=ra=Ga=0;if(0>Fa){var J,La,Xa,S,Ya,T;J=ka.x;La=ka.y;Xa=ka.z;S=bb.x;Ya=bb.y;T=bb.z;var K,ia,gb;K=S-J;ia=Ya-La;gb=T-Xa;var da=K*J+ia*La+gb*Xa,da=-da/(K*K+ia*ia+gb*gb);if(0>da)R.x=J,R.y=La,R.z=Xa;else if(1<da)R.x=S,R.y=Ya,R.z=T;else{var Hc,sa,fb;Hc=J+K*da;sa=La+ia*da;fb=Xa+gb*da;R.x=Hc;R.y=sa;R.z=fb}Z=R.x*R.x+R.y*R.y+R.z*R.z;Ga=R.x;ra=R.y;va=R.z}if(0>Sa){var jb,Za,ma,oa,Ja,Ha;jb=bb.x;Za=bb.y;ma=bb.z;oa=U.x;Ja=U.y;Ha=U.z;var ob,fa,ea;ob=oa-jb;fa=Ja-Za;ea=Ha-ma;var ja=ob*jb+fa*Za+ea*ma,ja=-ja/(ob*ob+fa*fa+ea*ea);if(0>ja)R.x=jb,R.y=Za,R.z=ma;else if(1<ja)R.x=oa,R.y=Ja,R.z=Ha;else{var cb,Aa,sb;cb=jb+ob*ja;Aa=Za+fa*ja;sb=ma+ea*ja;R.x=cb;R.y=Aa;R.z=sb}var Ua=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||Ua<Z)Z=Ua,Ga=R.x,ra=R.y,va=R.z}if(0>la){var qb,rb,tb,Va,xb,rc;qb=ka.x;rb=ka.y;tb=ka.z;Va=U.x;xb=U.y;rc=U.z;var $a,ua,Yb;$a=Va-qb;ua=xb-rb;Yb=rc-tb;var G=$a*qb+ua*rb+Yb*tb,G=-G/($a*$a+ua*ua+Yb*Yb);if(0>G)R.x=qb,R.y=rb,R.z=tb;else if(1<G)R.x=Va,R.y=xb,R.z=rc;else{var pb,db,oc;pb=qb+$a*G;db=rb+ua*G;oc=tb+Yb*G;R.x=pb;R.y=db;R.z=oc}var ab=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||ab<Z)Z=ab,Ga=R.x,ra=R.y,va=R.z}if(0<Z)R.x=Ga,R.y=ra,R.z=va;else{var hb=ca*ca+Ea*Ea+za*za;0<hb&&(hb=1/Math.sqrt(hb));ca*=hb;Ea*=hb;za*=hb;var z=ca*ca+Ea*Ea+za*za,z=(M*ca+Na*Ea+Ra*za)/z;Ga=ca*z;ra=Ea*z;va=za*z;R.x=Ga;R.y=ra;R.z=va}var Db=this.Sh;this.Ej=Db.x*Db.x+Db.y*Db.y+Db.z*Db.z;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=-1;this.Ie[1]=-1;this.Ie[2]=-1;return!O},Ig:function(a){for(var b=0,e=0;3>e;)for(var d=e++,c=0;3>c;){var f=c++,h=this.ii[d];this.zb[d]==a.zb[this.ii[f]]&&this.zb[h]==a.zb[f]&&(this.we[d]=a,this.Ie[d]=f,a.we[f]=this,a.Ie[f]=d,++b)}return 1!=b?!1:!0},$j:function(){this.ja=this.M=null;this.Jk=0;this.cj=!1;this.Ej=0;this.zb[0]=null;this.zb[1]=null;this.zb[2]=null;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=0;this.Ie[1]=0;this.Ie[2]=0},ra:Mc};Oc.aa=!0;Oc.prototype={Aa:function(a,b,e){var d=this.ud;d.x=a.x;d.y=a.y;d.z=a.z;a=this.hb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.pb;b.x=e.x;b.y=e.y;b.z=e.z;this.dj=this.pi=this.M=null;return this},$j:function(){this.dj=this.pi=this.M=null},ra:Oc};Ek.aa=!0;Ek.prototype={clear:function(){this.ql.Z()},ra:Ek};t.aa=!0;t.prototype={Aa:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},Z:function(){this.z=this.y=this.x=0;return this},Jc:function(a){return new t(this.x+a.x,this.y+a.y,this.z+a.z)},Qa:function(a,b){return new t(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},ge:function(a){return new t(this.x-a.x,this.y-a.y,this.z-a.z)},ee:function(a){return new t(this.x*a,this.y*a,this.z*a)},He:function(a,b,e){return new t(this.x*a,this.y*b,this.z*e)},Pd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},tb:function(a){return new t(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},cd:function(a){var b=this.y+a.y,e=this.z+a.z;this.x+=a.x;this.y=b;this.z=e;return this},bb:function(a,b){var e=this.y+a.y*b,d=this.z+a.z*b;this.x+=a.x*b;this.y=e;this.z=d;return this},Ge:function(a){var b=this.y-a.y,e=this.z-a.z;this.x=this.x-a.x;this.y=b;this.z=e;return this},fe:function(a){var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Bf:function(a,b,e){b=this.y*b;e=this.z*e;this.x=this.x*a;this.y=b;this.z=e;return this},Lb:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},lc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},qc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},zc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;a=new t;a.x=b;a.y=e;a.z=d;return a},mc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},rc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Cc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;this.x=b;this.y=e;this.z=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},be:function(){return this.x*this.x+this.y*this.y+this.z*this.z},de:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new t(this.x*a,this.y*a,this.z*a)},ce:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Hc:function(){return new t(-this.x,-this.y,-this.z)},Ic:function(){var a=-this.y,b=-this.z;this.x=-this.x;this.y=a;this.z=b;return this},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new t(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"},ra:t};Ca.aa=!0;Ca.prototype={Mf:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},tb:function(){var a=new t;a.x=this.v;a.y=this.A;a.z=this.B;return a},Lb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},Cc:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Jc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},lc:function(){var a=new O;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},mc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Hc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},Ic:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.o=e*d;this.f=-e*f;this.h=c;this.i=b*f+d*a*c;this.m=b*d-a*c*f;this.j=-e*a;this.l=a*f-b*d*c;this.g=d*a+b*c*f;this.s=b*e},qc:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+d*this.l;m=b*this.f+e*this.m+d*this.g;b=b*this.h+e*this.j+d*this.s;e=c*this.o+f*this.i+h*this.l;d=c*this.f+f*this.m+h*this.g;c=c*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=d;this.j=c;this.l=f;this.g=h;this.s=l},rc:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);d=l*n;c=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=d*this.o+c*this.i+g*this.l;m=d*this.f+c*this.m+g*this.g;g=d*this.h+c*this.j+g*this.s;d=a*this.o+b*this.i+f*this.l;c=a*this.f+b*this.m+f*this.g;a=a*this.h+b*this.j+f*this.s;b=e*this.o+h*this.i+l*this.l;f=e*this.f+h*this.m+l*this.g;e=e*this.h+h*this.j+l*this.s;this.o=k;this.f=m;this.h=g;this.i=d;this.m=c;this.j=a;this.l=b;this.g=f;this.s=e},Qa:function(){var a=new ga,b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},bb:function(a){var b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},zc:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.o=1-g-d;this.f=k-c;this.h=b+h;this.i=k+c;this.m=1-a-d;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new Ca;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},Zd:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this},ra:Ca};F.aa=!0;Jb.aa=!0;Jb.Ic=function(){return Jb.Qa};Jb.prototype={kj:function(a,b,e,d,c,f){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var h=this.Pa,l=this.hb,g=this.pb,k=this.closest,m=this.dir;null!=c?(null==c.Yh&&(c.Yh=new Ek),this.Cn(c.Yh)):m.Z();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var n,q,p;n=d.v-e.v;q=d.A-e.A;p=d.B-e.B;m.x=n;m.y=q;m.z=p;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.Aa(1,0,0)}this.za=0;this.pf(!1);this.qf(!1);var r=this.Pa[this.za],v=this.hb[this.za];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.pb[this.za],w=r.y-aa.y,B=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=B;this.za=1;for(var u=0;40>u;){var D=0;switch(this.za){case 1:var t=h[0];k.x=t.x;k.y=t.y;k.z=t.z;D=1;break;case 2:var A,E,x,Bb,N,I,F=h[0];A=F.x;E=F.y;x=F.z;var C=h[1];Bb=C.x;N=C.y;I=C.z;var O,ha,L;O=Bb-A;ha=N-E;L=I-x;var Ub=O*A+ha*E+L*x,Ub=-Ub/(O*O+ha*ha+L*L);if(0>Ub){var M=k;M.x=A;M.y=E;M.z=x;D=1}else if(1<Ub){var ka=k;ka.x=Bb;ka.y=N;ka.z=I;D=2}else{var bb,U,R;bb=A+O*Ub;U=E+ha*Ub;R=x+L*Ub;var lc=k;lc.x=bb;lc.y=U;lc.z=R;D=3}break;case 3:var Na=h[0],Ra=h[1],yc=h[2],Pa,Ba,Hb,H,Qa,ba,Q,P,ya,ta,W,pa,y,Ia,ca,Ea,za,Fa,Sa=Na;Pa=Sa.x;Ba=Sa.y;Hb=Sa.z;var la=Ra;H=la.x;Qa=la.y;ba=la.z;var Z=yc;Q=Z.x;P=Z.y;ya=Z.z;ta=H-Pa;W=Qa-Ba;pa=ba-Hb;y=Q-H;Ia=P-Qa;ca=ya-ba;Ea=Pa-Q;za=Ba-P;Fa=Hb-ya;var Ga,ra,va;Ga=W*ca-pa*Ia;ra=pa*y-ta*ca;va=ta*Ia-W*y;var J=Pa*(W*va-pa*ra)+Ba*(pa*Ga-ta*va)+Hb*(ta*ra-W*Ga),La=H*(Ia*va-ca*ra)+Qa*(ca*Ga-y*va)+ba*(y*ra-Ia*Ga),Xa=Q*(za*va-Fa*ra)+P*(Fa*Ga-Ea*va)+ya*(Ea*ra-za*Ga),S=-1,Ya,T,K,ia=0;K=T=Ya=0;if(0>J){var gb,da,Hc,sa,fb,jb,Za=Na;gb=Za.x;da=Za.y;Hc=Za.z;var ma=Ra;sa=ma.x;fb=ma.y;jb=ma.z;var oa,Ja,Ha;oa=sa-gb;Ja=fb-da;Ha=jb-Hc;var ob=oa*gb+Ja*da+Ha*Hc,ob=-ob/(oa*oa+Ja*Ja+Ha*Ha),fa;if(0>ob){var ea=k;ea.x=gb;ea.y=da;ea.z=Hc;fa=1}else if(1<ob){var ja=k;ja.x=sa;ja.y=fb;ja.z=jb;fa=2}else{var cb,Aa,sb;cb=gb+oa*ob;Aa=da+Ja*ob;sb=Hc+Ha*ob;var Ua=k;Ua.x=cb;Ua.y=Aa;Ua.z=sb;fa=3}var qb=k.x*k.x+k.y*k.y+k.z*k.z,ia=fa,S=qb,rb=k;Ya=rb.x;T=rb.y;K=rb.z}if(0>La){var tb,Va,xb,rc,$a,ua,Yb=Ra;tb=Yb.x;Va=Yb.y;xb=Yb.z;var G=yc;rc=G.x;$a=G.y;ua=G.z;var pb,db,oc;pb=rc-tb;db=$a-Va;oc=ua-xb;var ab=pb*tb+db*Va+oc*xb,ab=-ab/(pb*pb+db*db+oc*oc),hb;if(0>ab){var z=k;z.x=tb;z.y=Va;z.z=xb;hb=1}else if(1<ab){var Db=k;Db.x=rc;Db.y=$a;Db.z=ua;hb=2}else{var de,Tc,Fb;de=tb+pb*ab;Tc=Va+db*ab;Fb=xb+oc*ab;var Oa=k;Oa.x=de;Oa.y=Tc;Oa.z=Fb;hb=3}var nb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||nb<S){var ia=hb<<1,S=nb,wb=k;Ya=wb.x;T=wb.y;K=wb.z}}if(0>Xa){var yb,eb,Y,Ma,kb,Ta,ib=Na;yb=ib.x;eb=ib.y;Y=ib.z;var Ka=yc;Ma=Ka.x;kb=Ka.y;Ta=Ka.z;var Kb,bl,X;Kb=Ma-yb;bl=kb-eb;X=Ta-Y;var Cb=Kb*yb+bl*eb+X*Y,Cb=-Cb/(Kb*Kb+bl*bl+X*X),hd;if(0>Cb){var Rc=k;Rc.x=yb;Rc.y=eb;Rc.z=Y;hd=1}else if(1<Cb){var ql=k;ql.x=Ma;ql.y=kb;ql.z=Ta;hd=2}else{var ec,qd,ga;ec=yb+Kb*Cb;qd=eb+bl*Cb;ga=Y+X*Cb;var na=k;na.x=ec;na.y=qd;na.z=ga;hd=3}var xc=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||xc<S){var ia=hd&1|(hd&2)<<1,S=xc,qa=k;Ya=qa.x;T=qa.y;K=qa.z}}if(0<S){var jc=k;jc.x=Ya;jc.y=T;jc.z=K;D=ia}else{var pc=Ga*Ga+ra*ra+va*va;0<pc&&(pc=1/Math.sqrt(pc));Ga*=pc;ra*=pc;va*=pc;var kc=Ga*Ga+ra*ra+va*va,kc=(Pa*Ga+Ba*ra+Hb*va)/kc;Ya=Ga*kc;T=ra*kc;K=va*kc;var ac=k;ac.x=Ya;ac.y=T;ac.z=K;D=7}break;case 4:var Vb=h[0],Wb=h[1],Qb=h[2],fc=h[3],Rb,Ob,Xb,gc,Ib,Zb,lb,wa,Ca,Da,qc,mc,id,Ic,Pg,sc,vc,xa,Vf,mb,Te,Fc,Ab,Ue,ub,$c,Qg,rl=Vb;Rb=rl.x;Ob=rl.y;Xb=rl.z;var vb=Wb;gc=vb.x;Ib=vb.y;Zb=vb.z;var Wa=Qb;lb=Wa.x;wa=Wa.y;Ca=Wa.z;var Ac=fc;Da=Ac.x;qc=Ac.y;mc=Ac.z;id=gc-Rb;Ic=Ib-Ob;Pg=Zb-Xb;sc=lb-Rb;vc=wa-Ob;xa=Ca-Xb;Vf=Da-Rb;mb=qc-Ob;Te=mc-Xb;Fc=lb-gc;Ab=wa-Ib;Ue=Ca-Zb;ub=Da-gc;$c=qc-Ib;Qg=mc-Zb;var Tb,Sb,Gk,Lb,Pc,Gl,Gb,ic,hc,Mb,tc,Jb;Tb=Ic*xa-Pg*vc;Sb=Pg*sc-id*xa;Gk=id*vc-Ic*sc;Lb=vc*Te-xa*mb;Pc=xa*Vf-sc*Te;Gl=sc*mb-vc*Vf;Gb=mb*Pg-Te*Ic;ic=Te*id-Vf*Pg;hc=Vf*Ic-mb*id;Mb=$c*Ue-Qg*Ab;tc=Qg*Fc-ub*Ue;Jb=ub*Ab-$c*Fc;var bc=0<id*Mb+Ic*tc+Pg*Jb?1:-1,wc=Rb*Tb+Ob*Sb+Xb*Gk,$b=Rb*Lb+Ob*Pc+Xb*Gl,dc=Rb*Gb+Ob*ic+Xb*hc,Pb=gc*Mb+Ib*tc+Zb*Jb,ug=-1,zb,nc,qj,Eb=0;qj=nc=zb=0;if(0>wc*bc){var rd,Uc,Wf,cc,Nb,Ec,Df,hl,wh,cl,uc,sd,Rg,Sg,vg,xh,Id,sl,yh=Vb;rd=yh.x;Uc=yh.y;Wf=yh.z;var Xc=Wb;cc=Xc.x;Nb=Xc.y;Ec=Xc.z;var ck=Qb;Df=ck.x;hl=ck.y;wh=ck.z;cl=cc-rd;uc=Nb-Uc;sd=Ec-Wf;Rg=Df-cc;Sg=hl-Nb;vg=wh-Ec;xh=rd-Df;Id=Uc-hl;sl=Wf-wh;var Kc,jd,kd;Kc=uc*vg-sd*Sg;jd=sd*Rg-cl*vg;kd=cl*Sg-uc*Rg;var Lc=rd*(uc*kd-sd*jd)+Uc*(sd*Kc-cl*kd)+Wf*(cl*jd-uc*Kc),Pl=cc*(Sg*kd-vg*jd)+Nb*(vg*Kc-Rg*kd)+Ec*(Rg*jd-Sg*Kc),Vc=Df*(Id*kd-sl*jd)+hl*(sl*Kc-xh*kd)+wh*(xh*jd-Id*Kc),Wc=-1,Zc,td,ad,Sc=0;ad=td=Zc=0;if(0>Lc){var De,Ve,We,Jd,rj,ue,ve=Vb;De=ve.x;Ve=ve.y;We=ve.z;var Gc=Wb;Jd=Gc.x;rj=Gc.y;ue=Gc.z;var dl,el,fl;dl=Jd-De;el=rj-Ve;fl=ue-We;var wg=dl*De+el*Ve+fl*We,wg=-wg/(dl*dl+el*el+fl*fl),Nc;if(0>wg){var Jc=k;Jc.x=De;Jc.y=Ve;Jc.z=We;Nc=1}else if(1<wg){var zh=k;zh.x=Jd;zh.y=rj;zh.z=ue;Nc=2}else{var Bc,Ee,dk;Bc=De+dl*wg;Ee=Ve+el*wg;dk=We+fl*wg;var zc=k;zc.x=Bc;zc.y=Ee;zc.z=dk;Nc=3}var bd=k.x*k.x+k.y*k.y+k.z*k.z,Sc=Nc,Wc=bd,wd=k;Zc=wd.x;td=wd.y;ad=wd.z}if(0>Pl){var Cc,Yc,Xe,xd,ek,Ah,Bh=Wb;Cc=Bh.x;Yc=Bh.y;Xe=Bh.z;var Ch=Qb;xd=Ch.x;ek=Ch.y;Ah=Ch.z;var Ye,Ze,$e;Ye=xd-Cc;Ze=ek-Yc;$e=Ah-Xe;var Zd=Ye*Cc+Ze*Yc+$e*Xe,Zd=-Zd/(Ye*Ye+Ze*Ze+$e*$e),Ef;if(0>Zd){var tl=k;tl.x=Cc;tl.y=Yc;tl.z=Xe;Ef=1}else if(1<Zd){var ul=k;ul.x=xd;ul.y=ek;ul.z=Ah;Ef=2}else{var Dc,Ff,Gf;Dc=Cc+Ye*Zd;Ff=Yc+Ze*Zd;Gf=Xe+$e*Zd;var Hf=k;Hf.x=Dc;Hf.y=Ff;Hf.z=Gf;Ef=3}var Hl=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||Hl<Wc){var Sc=Ef<<1,Wc=Hl,ed=k;Zc=ed.x;td=ed.y;ad=ed.z}}if(0>Vc){var Xf,Yf,af,Zf,If,we,bf=Vb;Xf=bf.x;Yf=bf.y;af=bf.z;var $f=Qb;Zf=$f.x;If=$f.y;we=$f.z;var ag,bg,cg;ag=Zf-Xf;bg=If-Yf;cg=we-af;var Fe=ag*Xf+bg*Yf+cg*af,Fe=-Fe/(ag*ag+bg*bg+cg*cg),Ge;if(0>Fe){var cf=k;cf.x=Xf;cf.y=Yf;cf.z=af;Ge=1}else if(1<Fe){var dg=k;dg.x=Zf;dg.y=If;dg.z=we;Ge=2}else{var qf,He,rf;qf=Xf+ag*Fe;He=Yf+bg*Fe;rf=af+cg*Fe;var eg=k;eg.x=qf;eg.y=He;eg.z=rf;Ge=3}var od=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||od<Wc){var Sc=Ge&1|(Ge&2)<<1,Wc=od,fd=k;Zc=fd.x;td=fd.y;ad=fd.z}}var vl;if(0<Wc){var wl=k;wl.x=Zc;wl.y=td;wl.z=ad;vl=Sc}else{var df=Kc*Kc+jd*jd+kd*kd;0<df&&(df=1/Math.sqrt(df));Kc*=df;jd*=df;kd*=df;var sf=Kc*Kc+jd*jd+kd*kd,sf=(rd*Kc+Uc*jd+Wf*kd)/sf;Zc=Kc*sf;td=jd*sf;ad=kd*sf;var Jf=k;Jf.x=Zc;Jf.y=td;Jf.z=ad;vl=7}var Ql=k.x*k.x+k.y*k.y+k.z*k.z,Eb=vl,ug=Ql,Kf=k;zb=Kf.x;nc=Kf.y;qj=Kf.z}if(0>$b*bc){var ee,xe,Lf,cd,fg,zd,Ad,Bd,il,gg,hg,$d,fe,ge,ae,tf,ef,ff,gf=Vb;ee=gf.x;xe=gf.y;Lf=gf.z;var Mf=Qb;cd=Mf.x;fg=Mf.y;zd=Mf.z;var xl=fc;Ad=xl.x;Bd=xl.y;il=xl.z;gg=cd-ee;hg=fg-xe;$d=zd-Lf;fe=Ad-cd;ge=Bd-fg;ae=il-zd;tf=ee-Ad;ef=xe-Bd;ff=Lf-il;var Td,Kd,Ld;Td=hg*ae-$d*ge;Kd=$d*fe-gg*ae;Ld=gg*ge-hg*fe;var Rl=ee*(hg*Ld-$d*Kd)+xe*($d*Td-gg*Ld)+Lf*(gg*Kd-hg*Td),Nf=cd*(ge*Ld-ae*Kd)+fg*(ae*Td-fe*Ld)+zd*(fe*Kd-ge*Td),Xd=Ad*(ef*Ld-ff*Kd)+Bd*(ff*Td-tf*Ld)+il*(tf*Kd-ef*Td),ud=-1,Cd,ig,Dh,jg=0;Dh=ig=Cd=0;if(0>Rl){var Yd,be,ye,hf,kg,jf,kf=Vb;Yd=kf.x;be=kf.y;ye=kf.z;var lf=Qb;hf=lf.x;kg=lf.y;jf=lf.z;var ze,uf,lg;ze=hf-Yd;uf=kg-be;lg=jf-ye;var vf=ze*Yd+uf*be+lg*ye,vf=-vf/(ze*ze+uf*uf+lg*lg),xg;if(0>vf){var mg=k;mg.x=Yd;mg.y=be;mg.z=ye;xg=1}else if(1<vf){var mf=k;mf.x=hf;mf.y=kg;mf.z=jf;xg=2}else{var wf,Ie,yg;wf=Yd+ze*vf;Ie=be+uf*vf;yg=ye+lg*vf;var zg=k;zg.x=wf;zg.y=Ie;zg.z=yg;xg=3}var Mc=k.x*k.x+k.y*k.y+k.z*k.z,jg=xg,ud=Mc,ng=k;Cd=ng.x;ig=ng.y;Dh=ng.z}if(0>Nf){var xf,yf,Ae,Ag,yl,og,pg=Qb;xf=pg.x;yf=pg.y;Ae=pg.z;var qg=fc;Ag=qg.x;yl=qg.y;og=qg.z;var Of,Je,nf;Of=Ag-xf;Je=yl-yf;nf=og-Ae;var zf=Of*xf+Je*yf+nf*Ae,zf=-zf/(Of*Of+Je*Je+nf*nf),ld;if(0>zf){var Dd=k;Dd.x=xf;Dd.y=yf;Dd.z=Ae;ld=1}else if(1<zf){var Qc=k;Qc.x=Ag;Qc.y=yl;Qc.z=og;ld=2}else{var dd,Tg,Nd;dd=xf+Of*zf;Tg=yf+Je*zf;Nd=Ae+nf*zf;var Hd=k;Hd.x=dd;Hd.y=Tg;Hd.z=Nd;ld=3}var vd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ud||vd<ud){var jg=ld<<1,ud=vd,md=k;Cd=md.x;ig=md.y;Dh=md.z}}if(0>Xd){var Oc,gd,Eh,Qd,oe,Fh,Gh=Vb;Oc=Gh.x;gd=Gh.y;Eh=Gh.z;var Hh=fc;Qd=Hh.x;oe=Hh.y;Fh=Hh.z;var Ih,Jh,Kh;Ih=Qd-Oc;Jh=oe-gd;Kh=Fh-Eh;var Bg=Ih*Oc+Jh*gd+Kh*Eh,Bg=-Bg/(Ih*Ih+Jh*Jh+Kh*Kh),Lh;if(0>Bg){var Mh=k;Mh.x=Oc;Mh.y=gd;Mh.z=Eh;Lh=1}else if(1<Bg){var Nh=k;Nh.x=Qd;Nh.y=oe;Nh.z=Fh;Lh=2}else{var sj,Ug,tj;sj=Oc+Ih*Bg;Ug=gd+Jh*Bg;tj=Eh+Kh*Bg;var pe=k;pe.x=sj;pe.y=Ug;pe.z=tj;Lh=3}var qe=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ud||qe<ud){var jg=Lh&1|(Lh&2)<<1,ud=qe,Rd=k;Cd=Rd.x;ig=Rd.y;Dh=Rd.z}}var Be;if(0<ud){var re=k;re.x=Cd;re.y=ig;re.z=Dh;Be=jg}else{var Vg=Td*Td+Kd*Kd+Ld*Ld;0<Vg&&(Vg=1/Math.sqrt(Vg));Td*=Vg;Kd*=Vg;Ld*=Vg;var uj=Td*Td+Kd*Kd+Ld*Ld,uj=(ee*Td+xe*Kd+Lf*Ld)/uj;Cd=Td*uj;ig=Kd*uj;Dh=Ld*uj;var Wd=k;Wd.x=Cd;Wd.y=ig;Wd.z=Dh;Be=7}var Ed=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ug||Ed<ug){var Eb=Be&1|(Be&6)<<1,ug=Ed,Fd=k;zb=Fd.x;nc=Fd.y;qj=Fd.z}}if(0>dc*bc){var rg,Cg,Oh,Gd,vj,Wg,Xg,Yg,Ph,Zg,$g,ah,bh,ch,Dg,Qh,Rh,Sh,Th=Vb;rg=Th.x;Cg=Th.y;Oh=Th.z;var Uh=Wb;Gd=Uh.x;vj=Uh.y;Wg=Uh.z;var te=fc;Xg=te.x;Yg=te.y;Ph=te.z;Zg=Gd-rg;$g=vj-Cg;ah=Wg-Oh;bh=Xg-Gd;ch=Yg-vj;Dg=Ph-Wg;Qh=rg-Xg;Rh=Cg-Yg;Sh=Oh-Ph;var he,ie,je;he=$g*Dg-ah*ch;ie=ah*bh-Zg*Dg;je=Zg*ch-$g*bh;var ne=rg*($g*je-ah*ie)+Cg*(ah*he-Zg*je)+Oh*(Zg*ie-$g*he),Pe=Gd*(ch*je-Dg*ie)+vj*(Dg*he-bh*je)+Wg*(bh*ie-ch*he),Ke=Xg*(Rh*je-Sh*ie)+Yg*(Sh*he-Qh*je)+Ph*(Qh*ie-Rh*he),Od=-1,Ud,Vh,Wh,nd=0;Wh=Vh=Ud=0;if(0>ne){var Af,Pf,Qf,Eg,wj,Xh,Yh=Vb;Af=Yh.x;Pf=Yh.y;Qf=Yh.z;var Zh=Wb;Eg=Zh.x;wj=Zh.y;Xh=Zh.z;var $h,ai,bi;$h=Eg-Af;ai=wj-Pf;bi=Xh-Qf;var Fg=$h*Af+ai*Pf+bi*Qf,Fg=-Fg/($h*$h+ai*ai+bi*bi),xj;if(0>Fg){var ci=k;ci.x=Af;ci.y=Pf;ci.z=Qf;xj=1}else if(1<Fg){var di=k;di.x=Eg;di.y=wj;di.z=Xh;xj=2}else{var yj,dh,fk;yj=Af+$h*Fg;dh=Pf+ai*Fg;fk=Qf+bi*Fg;var gk=k;gk.x=yj;gk.y=dh;gk.z=fk;xj=3}var Se=k.x*k.x+k.y*k.y+k.z*k.z,nd=xj,Od=Se,Sd=k;Ud=Sd.x;Vh=Sd.y;Wh=Sd.z}if(0>Pe){var zj,Aj,ei,yd,hk,fi,gi=Wb;zj=gi.x;Aj=gi.y;ei=gi.z;var hi=fc;yd=hi.x;hk=hi.y;fi=hi.z;var ii,ji,ki;ii=yd-zj;ji=hk-Aj;ki=fi-ei;var Gg=ii*zj+ji*Aj+ki*ei,Gg=-Gg/(ii*ii+ji*ji+ki*ki),Bj;if(0>Gg){var li=k;li.x=zj;li.y=Aj;li.z=ei;Bj=1}else if(1<Gg){var mi=k;mi.x=yd;mi.y=hk;mi.z=fi;Bj=2}else{var Cj,eh,ik;Cj=zj+ii*Gg;eh=Aj+ji*Gg;ik=ei+ki*Gg;var jk=k;jk.x=Cj;jk.y=eh;jk.z=ik;Bj=3}var pd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||pd<Od){var nd=Bj<<1,Od=pd,Hk=k;Ud=Hk.x;Vh=Hk.y;Wh=Hk.z}}if(0>Ke){var Dj,Ej,ni,Ik,kk,oi,pi=Vb;Dj=pi.x;Ej=pi.y;ni=pi.z;var qi=fc;Ik=qi.x;kk=qi.y;oi=qi.z;var ri,si,ti;ri=Ik-Dj;si=kk-Ej;ti=oi-ni;var Hg=ri*Dj+si*Ej+ti*ni,Hg=-Hg/(ri*ri+si*si+ti*ti),ui;if(0>Hg){var vi=k;vi.x=Dj;vi.y=Ej;vi.z=ni;ui=1}else if(1<Hg){var wi=k;wi.x=Ik;wi.y=kk;wi.z=oi;ui=2}else{var Fj,fh,Gj;Fj=Dj+ri*Hg;fh=Ej+si*Hg;Gj=ni+ti*Hg;var lk=k;lk.x=Fj;lk.y=fh;lk.z=Gj;ui=3}var Jk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||Jk<Od){var nd=ui&1|(ui&2)<<1,Od=Jk,Kk=k;Ud=Kk.x;Vh=Kk.y;Wh=Kk.z}}var mk;if(0<Od){var Lk=k;Lk.x=Ud;Lk.y=Vh;Lk.z=Wh;mk=nd}else{var gh=he*he+ie*ie+je*je;0<gh&&(gh=1/Math.sqrt(gh));he*=gh;ie*=gh;je*=gh;var Hj=he*he+ie*ie+je*je,Hj=(rg*he+Cg*ie+Oh*je)/Hj;Ud=he*Hj;Vh=ie*Hj;Wh=je*Hj;var nk=k;nk.x=Ud;nk.y=Vh;nk.z=Wh;mk=7}var ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ug||ok<ug){var Eb=mk&3|(mk&4)<<1,ug=ok,pk=k;zb=pk.x;nc=pk.y;qj=pk.z}}if(0>Pb*bc){var sg,Ig,xi,qk,Ij,hh,ih,jh,yi,kh,lh,mh,nh,oh,Jg,zi,Ai,Bi,Ci=Wb;sg=Ci.x;Ig=Ci.y;xi=Ci.z;var Di=Qb;qk=Di.x;Ij=Di.y;hh=Di.z;var rk=fc;ih=rk.x;jh=rk.y;yi=rk.z;kh=qk-sg;lh=Ij-Ig;mh=hh-xi;nh=ih-qk;oh=jh-Ij;Jg=yi-hh;zi=sg-ih;Ai=Ig-jh;Bi=xi-yi;var ke,le,me;ke=lh*Jg-mh*oh;le=mh*nh-kh*Jg;me=kh*oh-lh*nh;var Me=sg*(lh*me-mh*le)+Ig*(mh*ke-kh*me)+xi*(kh*le-lh*ke),Ne=qk*(oh*me-Jg*le)+Ij*(Jg*ke-nh*me)+hh*(nh*le-oh*ke),Le=ih*(Ai*me-Bi*le)+jh*(Bi*ke-zi*me)+yi*(zi*le-Ai*ke),Pd=-1,Vd,Ei,Fi,Mk=0;Fi=Ei=Vd=0;if(0>Me){var Bf,Rf,Sf,Kg,Jj,Gi,Hi=Wb;Bf=Hi.x;Rf=Hi.y;Sf=Hi.z;var Ii=Qb;Kg=Ii.x;Jj=Ii.y;Gi=Ii.z;var Ji,Ki,Li;Ji=Kg-Bf;Ki=Jj-Rf;Li=Gi-Sf;var Lg=Ji*Bf+Ki*Rf+Li*Sf,Lg=-Lg/(Ji*Ji+Ki*Ki+Li*Li),Kj;if(0>Lg){var Mi=k;Mi.x=Bf;Mi.y=Rf;Mi.z=Sf;Kj=1}else if(1<Lg){var Ni=k;Ni.x=Kg;Ni.y=Jj;Ni.z=Gi;Kj=2}else{var Lj,ph,sk;Lj=Bf+Ji*Lg;ph=Rf+Ki*Lg;sk=Sf+Li*Lg;var tk=k;tk.x=Lj;tk.y=ph;tk.z=sk;Kj=3}var Oe=k.x*k.x+k.y*k.y+k.z*k.z,Mk=Kj,Pd=Oe,Nk=k;Vd=Nk.x;Ei=Nk.y;Fi=Nk.z}if(0>Ne){var Mj,Nj,Oi,Md,uk,Pi,Qi=Qb;Mj=Qi.x;Nj=Qi.y;Oi=Qi.z;var Ri=fc;Md=Ri.x;uk=Ri.y;Pi=Ri.z;var Si,Ti,Ui;Si=Md-Mj;Ti=uk-Nj;Ui=Pi-Oi;var Mg=Si*Mj+Ti*Nj+Ui*Oi,Mg=-Mg/(Si*Si+Ti*Ti+Ui*Ui),Oj;if(0>Mg){var Vi=k;Vi.x=Mj;Vi.y=Nj;Vi.z=Oi;Oj=1}else if(1<Mg){var Wi=k;Wi.x=Md;Wi.y=uk;Wi.z=Pi;Oj=2}else{var Pj,qh,vk;Pj=Mj+Si*Mg;qh=Nj+Ti*Mg;vk=Oi+Ui*Mg;var wk=k;wk.x=Pj;wk.y=qh;wk.z=vk;Oj=3}var Ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Ok<Pd){var Mk=Oj<<1,Pd=Ok,Pk=k;Vd=Pk.x;Ei=Pk.y;Fi=Pk.z}}if(0>Le){var Qj,Rj,Xi,Qk,xk,Yi,Zi=Wb;Qj=Zi.x;Rj=Zi.y;Xi=Zi.z;var $i=fc;Qk=$i.x;xk=$i.y;Yi=$i.z;var aj,bj,cj;aj=Qk-Qj;bj=xk-Rj;cj=Yi-Xi;var Ng=aj*Qj+bj*Rj+cj*Xi,Ng=-Ng/(aj*aj+bj*bj+cj*cj),dj;if(0>Ng){var ej=k;ej.x=Qj;ej.y=Rj;ej.z=Xi;dj=1}else if(1<Ng){var fj=k;fj.x=Qk;fj.y=xk;fj.z=Yi;dj=2}else{var Sj,rh,Tj;Sj=Qj+aj*Ng;rh=Rj+bj*Ng;Tj=Xi+cj*Ng;var yk=k;yk.x=Sj;yk.y=rh;yk.z=Tj;dj=3}var Rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Rk<Pd){var Mk=dj&1|(dj&2)<<1,Pd=Rk,Sk=k;Vd=Sk.x;Ei=Sk.y;Fi=Sk.z}}var Tk;if(0<Pd){var Uk=k;Uk.x=Vd;Uk.y=Ei;Uk.z=Fi;Tk=Mk}else{var sh=ke*ke+le*le+me*me;0<sh&&(sh=1/Math.sqrt(sh));ke*=sh;le*=sh;me*=sh;var Uj=ke*ke+le*le+me*me,Uj=(sg*ke+Ig*le+xi*me)/Uj;Vd=ke*Uj;Ei=le*Uj;Fi=me*Uj;var zk=k;zk.x=Vd;zk.y=Ei;zk.z=Fi;Tk=7}var Vk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ug||Vk<ug){var Eb=Tk<<1,ug=Vk,Ak=k;zb=Ak.x;nc=Ak.y;qj=Ak.z}}if(0<ug){var th=k;th.x=zb;th.y=nc;th.z=qj;D=Eb}else k.Z(),D=15}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.za){case 1:this.En();break;case 2:this.ml();break;case 3:this.tl()}if(4==this.za){var Vj=this.Zm(a,b,e,d,h,l,g);if(0!=Vj)return this.distance=0,Vj;this.distance=-this.depth;return 0}this.distance=0;return 1}this.zm(D);m.x=k.x;m.y=k.y;m.z=k.z;var uh=m,Qe=-uh.y,pf=-uh.z;uh.x=-uh.x;uh.y=Qe;uh.z=pf;this.pf(!1);this.qf(!1);var Wj=this.Pa[this.za],Xj=this.hb[this.za];Wj.x=Xj.x;Wj.y=Xj.y;Wj.z=Xj.z;var ce=Wj,vh=this.pb[this.za],se=ce.y-vh.y,Re=ce.z-vh.z;ce.x=ce.x-vh.x;ce.y=se;ce.z=Re;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var Yj=h[this.za];if(1E-8>Yj.x*m.x+Yj.y*m.y+Yj.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.im(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=c&&null!=c.Yh&&this.In(c.Yh),0;this.za++;++u}return 2},Vl:function(a,b,e,d,c,f,h){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var l=this.Pa,g=this.closest,k=this.dir,m,n,q;m=d.v-e.v;n=d.A-e.A;q=d.B-e.B;k.x=m;k.y=n;k.z=q;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.Aa(1,0,0);this.za=0;if(null!=this.hj)this.pf(!0);else{var p=this.hb[this.za];p.x=this.pc.v;p.y=this.pc.A;p.z=this.pc.B}this.qf(!0);var r=this.Pa[this.za],v=this.hb[this.za];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.pb[this.za],w=r.y-aa.y,B=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=B;this.za=1;var u=0,D=0,t=this.Gn,A=this.Fn;t.Z();A.x=f.x;A.y=f.y;A.z=f.z;var E=A.y-c.y,x=A.z-c.z;A.x=A.x-c.x;A.y=E;for(A.z=x;40>u;){var Bb=0;switch(this.za){case 1:var N=l[0];g.x=N.x;g.y=N.y;g.z=N.z;Bb=1;break;case 2:var I,F,C,O,ha,L,Ub=l[0];I=Ub.x;F=Ub.y;C=Ub.z;var M=l[1];O=M.x;ha=M.y;L=M.z;var ka,bb,U;ka=O-I;bb=ha-F;U=L-C;var R=ka*I+bb*F+U*C,R=-R/(ka*ka+bb*bb+U*U);if(0>R){var lc=g;lc.x=I;lc.y=F;lc.z=C;Bb=1}else if(1<R){var Na=g;Na.x=O;Na.y=ha;Na.z=L;Bb=2}else{var Ra,yc,Pa;Ra=I+ka*R;yc=F+bb*R;Pa=C+U*R;var Ba=g;Ba.x=Ra;Ba.y=yc;Ba.z=Pa;Bb=3}break;case 3:var Hb=l[0],H=l[1],Qa=l[2],ba,Q,P,ya,ta,W,pa,y,Ia,ca,Ea,za,Fa,Sa,la,Z,Ga,ra,va=Hb;ba=va.x;Q=va.y;P=va.z;var J=H;ya=J.x;ta=J.y;W=J.z;var La=Qa;pa=La.x;y=La.y;Ia=La.z;ca=ya-ba;Ea=ta-Q;za=W-P;Fa=pa-ya;Sa=y-ta;la=Ia-W;Z=ba-pa;Ga=Q-y;ra=P-Ia;var Xa,S,Ya;Xa=Ea*la-za*Sa;S=za*Fa-ca*la;Ya=ca*Sa-Ea*Fa;var T=ba*(Ea*Ya-za*S)+Q*(za*Xa-ca*Ya)+P*(ca*S-Ea*Xa),K=ya*(Sa*Ya-la*S)+ta*(la*Xa-Fa*Ya)+W*(Fa*S-Sa*Xa),ia=pa*(Ga*Ya-ra*S)+y*(ra*Xa-Z*Ya)+Ia*(Z*S-Ga*Xa),gb=-1,da,Hc,sa,fb=0;sa=Hc=da=0;if(0>T){var jb,Za,ma,oa,Ja,Ha,ob=Hb;jb=ob.x;Za=ob.y;ma=ob.z;var fa=H;oa=fa.x;Ja=fa.y;Ha=fa.z;var ea,ja,cb;ea=oa-jb;ja=Ja-Za;cb=Ha-ma;var Aa=ea*jb+ja*Za+cb*ma,Aa=-Aa/(ea*ea+ja*ja+cb*cb),sb;if(0>Aa){var Ua=g;Ua.x=jb;Ua.y=Za;Ua.z=ma;sb=1}else if(1<Aa){var qb=g;qb.x=oa;qb.y=Ja;qb.z=Ha;sb=2}else{var rb,tb,Va;rb=jb+ea*Aa;tb=Za+ja*Aa;Va=ma+cb*Aa;var xb=g;xb.x=rb;xb.y=tb;xb.z=Va;sb=3}var rc=g.x*g.x+g.y*g.y+g.z*g.z,fb=sb,gb=rc,$a=g;da=$a.x;Hc=$a.y;sa=$a.z}if(0>K){var ua,Yb,G,pb,db,oc,ab=H;ua=ab.x;Yb=ab.y;G=ab.z;var hb=Qa;pb=hb.x;db=hb.y;oc=hb.z;var z,Db,de;z=pb-ua;Db=db-Yb;de=oc-G;var Tc=z*ua+Db*Yb+de*G,Tc=-Tc/(z*z+Db*Db+de*de),Fb;if(0>Tc){var Oa=g;Oa.x=ua;Oa.y=Yb;Oa.z=G;Fb=1}else if(1<Tc){var nb=g;nb.x=pb;nb.y=db;nb.z=oc;Fb=2}else{var wb,yb,eb;wb=ua+z*Tc;yb=Yb+Db*Tc;eb=G+de*Tc;var Y=g;Y.x=wb;Y.y=yb;Y.z=eb;Fb=3}var Ma=g.x*g.x+g.y*g.y+g.z*g.z;if(0>gb||Ma<gb){var fb=Fb<<1,gb=Ma,kb=g;da=kb.x;Hc=kb.y;sa=kb.z}}if(0>ia){var Ta,ib,Ka,Kb,ga,X,Cb=Hb;Ta=Cb.x;ib=Cb.y;Ka=Cb.z;var hd=Qa;Kb=hd.x;ga=hd.y;X=hd.z;var Rc,na,ec;Rc=Kb-Ta;na=ga-ib;ec=X-Ka;var qd=Rc*Ta+na*ib+ec*Ka,qd=-qd/(Rc*Rc+na*na+ec*ec),qa;if(0>qd){var wa=g;wa.x=Ta;wa.y=ib;wa.z=Ka;qa=1}else if(1<qd){var xc=g;xc.x=Kb;xc.y=ga;xc.z=X;qa=2}else{var Ca,jc,pc;Ca=Ta+Rc*qd;jc=ib+na*qd;pc=Ka+ec*qd;var kc=g;kc.x=Ca;kc.y=jc;kc.z=pc;qa=3}var ac=g.x*g.x+g.y*g.y+g.z*g.z;if(0>gb||ac<gb){var fb=qa&1|(qa&2)<<1,gb=ac,Vb=g;da=Vb.x;Hc=Vb.y;sa=Vb.z}}if(0<gb){var Wb=g;Wb.x=da;Wb.y=Hc;Wb.z=sa;Bb=fb}else{var Qb=Xa*Xa+S*S+Ya*Ya;0<Qb&&(Qb=1/Math.sqrt(Qb));Xa*=Qb;S*=Qb;Ya*=Qb;var fc=Xa*Xa+S*S+Ya*Ya,fc=(ba*Xa+Q*S+P*Ya)/fc;da=Xa*fc;Hc=S*fc;sa=Ya*fc;var Rb=g;Rb.x=da;Rb.y=Hc;Rb.z=sa;Bb=7}break;case 4:var Ob=l[0],Xb=l[1],gc=l[2],Ib=l[3],Zb,lb,Da,xa,mb,qc,mc,id,Ic,Pg,sc,vc,Ab,Vf,ub,Te,Fc,vb,Ue,Wa,$c,Qg,Tb,Sb,Lb,Ac,Gb,ic=Ob;Zb=ic.x;lb=ic.y;Da=ic.z;var Gk=Xb;xa=Gk.x;mb=Gk.y;qc=Gk.z;var hc=gc;mc=hc.x;id=hc.y;Ic=hc.z;var Pc=Ib;Pg=Pc.x;sc=Pc.y;vc=Pc.z;Ab=xa-Zb;Vf=mb-lb;ub=qc-Da;Te=mc-Zb;Fc=id-lb;vb=Ic-Da;Ue=Pg-Zb;Wa=sc-lb;$c=vc-Da;Qg=mc-xa;Tb=id-mb;Sb=Ic-qc;Lb=Pg-xa;Ac=sc-mb;Gb=vc-qc;var Mb,tc,bc,zb,nc,Jb,Eb,wc,$b,cc,Nb,dc;Mb=Vf*vb-ub*Fc;tc=ub*Te-Ab*vb;bc=Ab*Fc-Vf*Te;zb=Fc*$c-vb*Wa;nc=vb*Ue-Te*$c;Jb=Te*Wa-Fc*Ue;Eb=Wa*ub-$c*Vf;wc=$c*Ab-Ue*ub;$b=Ue*Vf-Wa*Ab;cc=Ac*Sb-Gb*Tb;Nb=Gb*Qg-Lb*Sb;dc=Lb*Tb-Ac*Qg;var uc=0<Ab*cc+Vf*Nb+ub*dc?1:-1,Pb=Zb*Mb+lb*tc+Da*bc,Ec=Zb*zb+lb*nc+Da*Jb,qj=Zb*Eb+lb*wc+Da*$b,Xc=xa*cc+mb*Nb+qc*dc,rd=-1,Uc,Wf,Nc,Gc=0;Nc=Wf=Uc=0;if(0>Pb*uc){var Jc,Df,Cc,wh,Yc,zc,sd,Rg,Sg,vg,xh,Id,Bc,yh,Lc,ck,Kc,jd,kd=Ob;Jc=kd.x;Df=kd.y;Cc=kd.z;var wd=Xb;wh=wd.x;Yc=wd.y;zc=wd.z;var bd=gc;sd=bd.x;Rg=bd.y;Sg=bd.z;vg=wh-Jc;xh=Yc-Df;Id=zc-Cc;Bc=sd-wh;yh=Rg-Yc;Lc=Sg-zc;ck=Jc-sd;Kc=Df-Rg;jd=Cc-Sg;var Vc,Wc,Zc;Vc=xh*Lc-Id*yh;Wc=Id*Bc-vg*Lc;Zc=vg*yh-xh*Bc;var td=Jc*(xh*Zc-Id*Wc)+Df*(Id*Vc-vg*Zc)+Cc*(vg*Wc-xh*Vc),ad=wh*(yh*Zc-Lc*Wc)+Yc*(Lc*Vc-Bc*Zc)+zc*(Bc*Wc-yh*Vc),Sc=sd*(Kc*Zc-jd*Wc)+Rg*(jd*Vc-ck*Zc)+Sg*(ck*Wc-Kc*Vc),De=-1,Ve,We,Jd,rj=0;Jd=We=Ve=0;if(0>td){var ue,ve,cd,xd,ed,fd,wg=Ob;ue=wg.x;ve=wg.y;cd=wg.z;var ld=Xb;xd=ld.x;ed=ld.y;fd=ld.z;var Oc,zh,Dc;Oc=xd-ue;zh=ed-ve;Dc=fd-cd;var Ee=Oc*ue+zh*ve+Dc*cd,Ee=-Ee/(Oc*Oc+zh*zh+Dc*Dc),dk;if(0>Ee){var od=g;od.x=ue;od.y=ve;od.z=cd;dk=1}else if(1<Ee){var gd=g;gd.x=xd;gd.y=ed;gd.z=fd;dk=2}else{var Dd,Qc,Hd;Dd=ue+Oc*Ee;Qc=ve+zh*Ee;Hd=cd+Dc*Ee;var Xe=g;Xe.x=Dd;Xe.y=Qc;Xe.z=Hd;dk=3}var Be=g.x*g.x+g.y*g.y+g.z*g.z,rj=dk,De=Be,ek=g;Ve=ek.x;We=ek.y;Jd=ek.z}if(0>ad){var Ah,Bh,Ch,Ye,Ze,$e,Zd=Xb;Ah=Zd.x;Bh=Zd.y;Ch=Zd.z;var Ef=gc;Ye=Ef.x;Ze=Ef.y;$e=Ef.z;var md,dd,Mc;md=Ye-Ah;dd=Ze-Bh;Mc=$e-Ch;var Ff=md*Ah+dd*Bh+Mc*Ch,Ff=-Ff/(md*md+dd*dd+Mc*Mc),Gf;if(0>Ff){var Hf=g;Hf.x=Ah;Hf.y=Bh;Hf.z=Ch;Gf=1}else if(1<Ff){var Gd=g;Gd.x=Ye;Gd.y=Ze;Gd.z=$e;Gf=2}else{var Nd,Xf,Yf;Nd=Ah+md*Ff;Xf=Bh+dd*Ff;Yf=Ch+Mc*Ff;var af=g;af.x=Nd;af.y=Xf;af.z=Yf;Gf=3}var Zf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>De||Zf<De){var rj=Gf<<1,De=Zf,If=g;Ve=If.x;We=If.y;Jd=If.z}}if(0>Sc){var we,bf,$f,ag,bg,cg,Fe=Ob;we=Fe.x;bf=Fe.y;$f=Fe.z;var Ge=gc;ag=Ge.x;bg=Ge.y;cg=Ge.z;var cf,dg,qf;cf=ag-we;dg=bg-bf;qf=cg-$f;var He=cf*we+dg*bf+qf*$f,He=-He/(cf*cf+dg*dg+qf*qf),rf;if(0>He){var eg=g;eg.x=we;eg.y=bf;eg.z=$f;rf=1}else if(1<He){var vd=g;vd.x=ag;vd.y=bg;vd.z=cg;rf=2}else{var Qd,oe,pe;Qd=we+cf*He;oe=bf+dg*He;pe=$f+qf*He;var df=g;df.x=Qd;df.y=oe;df.z=pe;rf=3}var sf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>De||sf<De){var rj=rf&1|(rf&2)<<1,De=sf,Jf=g;Ve=Jf.x;We=Jf.y;Jd=Jf.z}}var Rd;if(0<De){var Kf=g;Kf.x=Ve;Kf.y=We;Kf.z=Jd;Rd=rj}else{var ee=Vc*Vc+Wc*Wc+Zc*Zc;0<ee&&(ee=1/Math.sqrt(ee));Vc*=ee;Wc*=ee;Zc*=ee;var xe=Vc*Vc+Wc*Wc+Zc*Zc,xe=(Jc*Vc+Df*Wc+Cc*Zc)/xe;Ve=Vc*xe;We=Wc*xe;Jd=Zc*xe;var Lf=g;Lf.x=Ve;Lf.y=We;Lf.z=Jd;Rd=7}var re=g.x*g.x+g.y*g.y+g.z*g.z,Gc=Rd,rd=re,fg=g;Uc=fg.x;Wf=fg.y;Nc=fg.z}if(0>Ec*uc){var zd,Ad,Bd,nd,gg,hg,$d,fe,ge,ae,tf,ef,ff,gf,Mf,Wd,Td,Kd,Ld=Ob;zd=Ld.x;Ad=Ld.y;Bd=Ld.z;var Fd=gc;nd=Fd.x;gg=Fd.y;hg=Fd.z;var Nf=Ib;$d=Nf.x;fe=Nf.y;ge=Nf.z;ae=nd-zd;tf=gg-Ad;ef=hg-Bd;ff=$d-nd;gf=fe-gg;Mf=ge-hg;Wd=zd-$d;Td=Ad-fe;Kd=Bd-ge;var Xd,ud,Cd;Xd=tf*Mf-ef*gf;ud=ef*ff-ae*Mf;Cd=ae*gf-tf*ff;var ig=zd*(tf*Cd-ef*ud)+Ad*(ef*Xd-ae*Cd)+Bd*(ae*ud-tf*Xd),te=nd*(gf*Cd-Mf*ud)+gg*(Mf*Xd-ff*Cd)+hg*(ff*ud-gf*Xd),jg=$d*(Td*Cd-Kd*ud)+fe*(Kd*Xd-Wd*Cd)+ge*(Wd*ud-Td*Xd),Yd=-1,be,ye,hf,kg=0;hf=ye=be=0;if(0>ig){var jf,kf,lf,ze,uf,lg,vf=Ob;jf=vf.x;kf=vf.y;lf=vf.z;var xg=gc;ze=xg.x;uf=xg.y;lg=xg.z;var mg,mf,wf;mg=ze-jf;mf=uf-kf;wf=lg-lf;var Ie=mg*jf+mf*kf+wf*lf,Ie=-Ie/(mg*mg+mf*mf+wf*wf),yg;if(0>Ie){var zg=g;zg.x=jf;zg.y=kf;zg.z=lf;yg=1}else if(1<Ie){var qe=g;qe.x=ze;qe.y=uf;qe.z=lg;yg=2}else{var ng,xf,yf;ng=jf+mg*Ie;xf=kf+mf*Ie;yf=lf+wf*Ie;var Ae=g;Ae.x=ng;Ae.y=xf;Ae.z=yf;yg=3}var Ag=g.x*g.x+g.y*g.y+g.z*g.z,kg=yg,Yd=Ag,Ed=g;be=Ed.x;ye=Ed.y;hf=Ed.z}if(0>te){var og,pg,qg,Of,Je,nf,zf=gc;og=zf.x;pg=zf.y;qg=zf.z;var Sd=Ib;Of=Sd.x;Je=Sd.y;nf=Sd.z;var yd,Md,pd;yd=Of-og;Md=Je-pg;pd=nf-qg;var Tg=yd*og+Md*pg+pd*qg,Tg=-Tg/(yd*yd+Md*Md+pd*pd),ne;if(0>Tg){var Pe=g;Pe.x=og;Pe.y=pg;Pe.z=qg;ne=1}else if(1<Tg){var Se=g;Se.x=Of;Se.y=Je;Se.z=nf;ne=2}else{var Me,Ne,Oe;Me=og+yd*Tg;Ne=pg+Md*Tg;Oe=qg+pd*Tg;var Eh=g;Eh.x=Me;Eh.y=Ne;Eh.z=Oe;ne=3}var Qe=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||Qe<Yd){var kg=ne<<1,Yd=Qe,pf=g;be=pf.x;ye=pf.y;hf=pf.z}}if(0>jg){var Fh,Gh,Hh,Ih,Jh,Kh,Bg=Ob;Fh=Bg.x;Gh=Bg.y;Hh=Bg.z;var Lh=Ib;Ih=Lh.x;Jh=Lh.y;Kh=Lh.z;var Mh,Nh,sj;Mh=Ih-Fh;Nh=Jh-Gh;sj=Kh-Hh;var Ug=Mh*Fh+Nh*Gh+sj*Hh,Ug=-Ug/(Mh*Mh+Nh*Nh+sj*sj),tj;if(0>Ug){var se=g;se.x=Fh;se.y=Gh;se.z=Hh;tj=1}else if(1<Ug){var Re=g;Re.x=Ih;Re.y=Jh;Re.z=Kh;tj=2}else{var lj,nj,pj;lj=Fh+Mh*Ug;nj=Gh+Nh*Ug;pj=Hh+sj*Ug;var Vg=g;Vg.x=lj;Vg.y=nj;Vg.z=pj;tj=3}var uj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||uj<Yd){var kg=tj&1|(tj&2)<<1,Yd=uj,Cf=g;be=Cf.x;ye=Cf.y;hf=Cf.z}}var Ce;if(0<Yd){var Og=g;Og.x=be;Og.y=ye;Og.z=hf;Ce=kg}else{var rg=Xd*Xd+ud*ud+Cd*Cd;0<rg&&(rg=1/Math.sqrt(rg));Xd*=rg;ud*=rg;Cd*=rg;var Cg=Xd*Xd+ud*ud+Cd*Cd,Cg=(zd*Xd+Ad*ud+Bd*Cd)/Cg;be=Xd*Cg;ye=ud*Cg;hf=Cd*Cg;var Oh=g;Oh.x=be;Oh.y=ye;Oh.z=hf;Ce=7}var Zj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||Zj<rd){var Gc=Ce&1|(Ce&6)<<1,rd=Zj,vj=g;Uc=vj.x;Wf=vj.y;Nc=vj.z}}if(0>qj*uc){var Wg,Xg,Yg,Ph,Zg,$g,ah,bh,ch,Dg,Qh,Rh,Sh,Th,Uh,Tf,he,ie,je=Ob;Wg=je.x;Xg=je.y;Yg=je.z;var of=Xb;Ph=of.x;Zg=of.y;$g=of.z;var Uf=Ib;ah=Uf.x;bh=Uf.y;ch=Uf.z;Dg=Ph-Wg;Qh=Zg-Xg;Rh=$g-Yg;Sh=ah-Ph;Th=bh-Zg;Uh=ch-$g;Tf=Wg-ah;he=Xg-bh;ie=Yg-ch;var Ke,Od,Ud;Ke=Qh*Uh-Rh*Th;Od=Rh*Sh-Dg*Uh;Ud=Dg*Th-Qh*Sh;var Vh=Wg*(Qh*Ud-Rh*Od)+Xg*(Rh*Ke-Dg*Ud)+Yg*(Dg*Od-Qh*Ke),Wh=Ph*(Th*Ud-Uh*Od)+Zg*(Uh*Ke-Sh*Ud)+$g*(Sh*Od-Th*Ke),Bk=ah*(he*Ud-ie*Od)+bh*(ie*Ke-Tf*Ud)+ch*(Tf*Od-he*Ke),Af=-1,Pf,Qf,Eg,wj=0;Eg=Qf=Pf=0;if(0>Vh){var Xh,Yh,Zh,$h,ai,bi,Fg=Ob;Xh=Fg.x;Yh=Fg.y;Zh=Fg.z;var xj=Xb;$h=xj.x;ai=xj.y;bi=xj.z;var ci,di,yj;ci=$h-Xh;di=ai-Yh;yj=bi-Zh;var dh=ci*Xh+di*Yh+yj*Zh,dh=-dh/(ci*ci+di*di+yj*yj),fk;if(0>dh){var gk=g;gk.x=Xh;gk.y=Yh;gk.z=Zh;fk=1}else if(1<dh){var tg=g;tg.x=$h;tg.y=ai;tg.z=bi;fk=2}else{var ak,zj,Aj;ak=Xh+ci*dh;zj=Yh+di*dh;Aj=Zh+yj*dh;var ei=g;ei.x=ak;ei.y=zj;ei.z=Aj;fk=3}var Ck=g.x*g.x+g.y*g.y+g.z*g.z,wj=fk,Af=Ck,hk=g;Pf=hk.x;Qf=hk.y;Eg=hk.z}if(0>Wh){var fi,gi,hi,ii,ji,ki,Gg=Xb;fi=Gg.x;gi=Gg.y;hi=Gg.z;var Bj=Ib;ii=Bj.x;ji=Bj.y;ki=Bj.z;var li,mi,Cj;li=ii-fi;mi=ji-gi;Cj=ki-hi;var eh=li*fi+mi*gi+Cj*hi,eh=-eh/(li*li+mi*mi+Cj*Cj),ik;if(0>eh){var jk=g;jk.x=fi;jk.y=gi;jk.z=hi;ik=1}else if(1<eh){var hj=g;hj.x=ii;hj.y=ji;hj.z=ki;ik=2}else{var Hk,Dj,Ej;Hk=fi+li*eh;Dj=gi+mi*eh;Ej=hi+Cj*eh;var ni=g;ni.x=Hk;ni.y=Dj;ni.z=Ej;ik=3}var Ik=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Ik<Af){var wj=ik<<1,Af=Ik,kk=g;Pf=kk.x;Qf=kk.y;Eg=kk.z}}if(0>Bk){var oi,pi,qi,ri,si,ti,Hg=Ob;oi=Hg.x;pi=Hg.y;qi=Hg.z;var ui=Ib;ri=ui.x;si=ui.y;ti=ui.z;var vi,wi,Fj;vi=ri-oi;wi=si-pi;Fj=ti-qi;var fh=vi*oi+wi*pi+Fj*qi,fh=-fh/(vi*vi+wi*wi+Fj*Fj),Gj;if(0>fh){var lk=g;lk.x=oi;lk.y=pi;lk.z=qi;Gj=1}else if(1<fh){var Jk=g;Jk.x=ri;Jk.y=si;Jk.z=ti;Gj=2}else{var Kk,mk,Lk;Kk=oi+vi*fh;mk=pi+wi*fh;Lk=qi+Fj*fh;var gh=g;gh.x=Kk;gh.y=mk;gh.z=Lk;Gj=3}var Hj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Hj<Af){var wj=Gj&1|(Gj&2)<<1,Af=Hj,nk=g;Pf=nk.x;Qf=nk.y;Eg=nk.z}}var ok;if(0<Af){var pk=g;pk.x=Pf;pk.y=Qf;pk.z=Eg;ok=wj}else{var sg=Ke*Ke+Od*Od+Ud*Ud;0<sg&&(sg=1/Math.sqrt(sg));Ke*=sg;Od*=sg;Ud*=sg;var Ig=Ke*Ke+Od*Od+Ud*Ud,Ig=(Wg*Ke+Xg*Od+Yg*Ud)/Ig;Pf=Ke*Ig;Qf=Od*Ig;Eg=Ud*Ig;var xi=g;xi.x=Pf;xi.y=Qf;xi.z=Eg;ok=7}var qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||qk<rd){var Gc=ok&3|(ok&4)<<1,rd=qk,Ij=g;Uc=Ij.x;Wf=Ij.y;Nc=Ij.z}}if(0>Xc*uc){var hh,ih,jh,yi,kh,lh,mh,nh,oh,Jg,zi,Ai,Bi,Ci,Di,rk,ke,le,me=Xb;hh=me.x;ih=me.y;jh=me.z;var ij=gc;yi=ij.x;kh=ij.y;lh=ij.z;var jj=Ib;mh=jj.x;nh=jj.y;oh=jj.z;Jg=yi-hh;zi=kh-ih;Ai=lh-jh;Bi=mh-yi;Ci=nh-kh;Di=oh-lh;rk=hh-mh;ke=ih-nh;le=jh-oh;var Le,Pd,Vd;Le=zi*Di-Ai*Ci;Pd=Ai*Bi-Jg*Di;Vd=Jg*Ci-zi*Bi;var Ei=hh*(zi*Vd-Ai*Pd)+ih*(Ai*Le-Jg*Vd)+jh*(Jg*Pd-zi*Le),Fi=yi*(Ci*Vd-Di*Pd)+kh*(Di*Le-Bi*Vd)+lh*(Bi*Pd-Ci*Le),Mk=mh*(ke*Vd-le*Pd)+nh*(le*Le-rk*Vd)+oh*(rk*Pd-ke*Le),Bf=-1,Rf,Sf,Kg,Jj=0;Kg=Sf=Rf=0;if(0>Ei){var Gi,Hi,Ii,Ji,Ki,Li,Lg=Xb;Gi=Lg.x;Hi=Lg.y;Ii=Lg.z;var Kj=gc;Ji=Kj.x;Ki=Kj.y;Li=Kj.z;var Mi,Ni,Lj;Mi=Ji-Gi;Ni=Ki-Hi;Lj=Li-Ii;var ph=Mi*Gi+Ni*Hi+Lj*Ii,ph=-ph/(Mi*Mi+Ni*Ni+Lj*Lj),sk;if(0>ph){var tk=g;tk.x=Gi;tk.y=Hi;tk.z=Ii;sk=1}else if(1<ph){var kj=g;kj.x=Ji;kj.y=Ki;kj.z=Li;sk=2}else{var Nk,Mj,Nj;Nk=Gi+Mi*ph;Mj=Hi+Ni*ph;Nj=Ii+Lj*ph;var Oi=g;Oi.x=Nk;Oi.y=Mj;Oi.z=Nj;sk=3}var Dk=g.x*g.x+g.y*g.y+g.z*g.z,Jj=sk,Bf=Dk,uk=g;Rf=uk.x;Sf=uk.y;Kg=uk.z}if(0>Fi){var Pi,Qi,Ri,Si,Ti,Ui,Mg=gc;Pi=Mg.x;Qi=Mg.y;Ri=Mg.z;var Oj=Ib;Si=Oj.x;Ti=Oj.y;Ui=Oj.z;var Vi,Wi,Pj;Vi=Si-Pi;Wi=Ti-Qi;Pj=Ui-Ri;var qh=Vi*Pi+Wi*Qi+Pj*Ri,qh=-qh/(Vi*Vi+Wi*Wi+Pj*Pj),vk;if(0>qh){var wk=g;wk.x=Pi;wk.y=Qi;wk.z=Ri;vk=1}else if(1<qh){var Ok=g;Ok.x=Si;Ok.y=Ti;Ok.z=Ui;vk=2}else{var Pk,Qj,Rj;Pk=Pi+Vi*qh;Qj=Qi+Wi*qh;Rj=Ri+Pj*qh;var Xi=g;Xi.x=Pk;Xi.y=Qj;Xi.z=Rj;vk=3}var Qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Qk<Bf){var Jj=vk<<1,Bf=Qk,xk=g;Rf=xk.x;Sf=xk.y;Kg=xk.z}}if(0>Mk){var Yi,Zi,$i,aj,bj,cj,Ng=Xb;Yi=Ng.x;Zi=Ng.y;$i=Ng.z;var dj=Ib;aj=dj.x;bj=dj.y;cj=dj.z;var ej,fj,Sj;ej=aj-Yi;fj=bj-Zi;Sj=cj-$i;var rh=ej*Yi+fj*Zi+Sj*$i,rh=-rh/(ej*ej+fj*fj+Sj*Sj),Tj;if(0>rh){var yk=g;yk.x=Yi;yk.y=Zi;yk.z=$i;Tj=1}else if(1<rh){var Rk=g;Rk.x=aj;Rk.y=bj;Rk.z=cj;Tj=2}else{var Sk,Tk,Uk;Sk=Yi+ej*rh;Tk=Zi+fj*rh;Uk=$i+Sj*rh;var sh=g;sh.x=Sk;sh.y=Tk;sh.z=Uk;Tj=3}var Uj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Uj<Bf){var Jj=Tj&1|(Tj&2)<<1,Bf=Uj,zk=g;Rf=zk.x;Sf=zk.y;Kg=zk.z}}var Vk;if(0<Bf){var Ak=g;Ak.x=Rf;Ak.y=Sf;Ak.z=Kg;Vk=Jj}else{var th=Le*Le+Pd*Pd+Vd*Vd;0<th&&(th=1/Math.sqrt(th));Le*=th;Pd*=th;Vd*=th;var Vj=Le*Le+Pd*Pd+Vd*Vd,Vj=(hh*Le+ih*Pd+jh*Vd)/Vj;Rf=Le*Vj;Sf=Pd*Vj;Kg=Vd*Vj;var uh=g;uh.x=Rf;uh.y=Sf;uh.z=Kg;Vk=7}var bk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>rd||bk<rd){var Gc=Vk<<1,rd=bk,mj=g;Uc=mj.x;Wf=mj.y;Nc=mj.z}}if(0<rd){var Wj=g;Wj.x=Uc;Wj.y=Wf;Wj.z=Nc;Bb=Gc}else g.Z(),Bb=15}this.zm(Bb);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!D||4==this.za){h.fraction=D;break}this.im();h.fraction=D;var Xj=h.normal;Xj.x=k.x;Xj.y=k.y;Xj.z=k.z;var ce=Xj,vh=Math.sqrt(ce.x*ce.x+ce.y*ce.y+ce.z*ce.z);0<vh&&(vh=1/vh);var Ek=ce.y*vh,Fk=ce.z*vh;ce.x=ce.x*vh;ce.y=Ek;ce.z=Fk;var Yj=h.position,oj=this.closestPoint1;Yj.x=oj.x;Yj.y=oj.y;Yj.z=oj.z;var Wk=Yj,kl=Wk.y+c.y*D,ll=Wk.z+c.z*D;Wk.x+=c.x*D;Wk.y=kl;Wk.z=ll;return!0}k.x=g.x;k.y=g.y;k.z=g.z;var Xk=k,ml=-Xk.y,nl=-Xk.z;Xk.x=-Xk.x;Xk.y=ml;Xk.z=nl;if(null!=this.hj)this.pf(!0);else{var zl=this.hb[this.za];zl.x=this.pc.v;zl.y=this.pc.A;zl.z=this.pc.B}this.qf(!0);var jl=this.Pa[this.za],Al=this.hb[this.za];jl.x=Al.x;jl.y=Al.y;jl.z=Al.z;var Yk=jl,Bl=this.pb[this.za],ol=Yk.y-Bl.y,pl=Yk.z-Bl.z;Yk.x=Yk.x-Bl.x;Yk.y=ol;Yk.z=pl;var Zk=l[this.za],Sl=Zk.y-t.y,Tl=Zk.z-t.z;Zk.x=Zk.x-t.x;Zk.y=Sl;Zk.z=Tl;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var Cl=l[this.za],gj=k,Il=Cl.x*gj.x+Cl.y*gj.y+Cl.z*gj.z;if(0>Il){if(0<=A.x*gj.x+A.y*gj.y+A.z*gj.z)break;var gl=Il/(A.x*gj.x+A.y*gj.y+A.z*gj.z),D=D+gl;if(1<=D)break;var Ul=t.y+A.y*gl,Vl=t.z+A.z*gl;t.x=t.x+A.x*gl;t.y=Ul;t.z=Vl;for(var Jl=0,Wl=this.za+1;Jl<Wl;){var Xl=Jl++,$k=l[Xl],Dl=-gl,Yl=$k.y+A.y*Dl,Zl=$k.z+A.z*Dl;$k.x=$k.x+A.x*Dl;$k.y=Yl;$k.z=Zl}}for(var Kl=!1,Ll=0,$l=this.za;Ll<$l;){var El=Ll++,Ml=l[El].x-l[this.za].x,Nl=l[El].y-l[this.za].y,Ol=l[El].z-l[this.za].z;if(1E-8>Ml*Ml+Nl*Nl+Ol*Ol){Kl=!0;break}}Kl||this.za++;++u}return!1},im:function(){switch(this.za){case 1:var a=this.closestPoint1,b=this.hb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,d=this.pb[0];e.x=d.x;e.y=d.y;e.z=d.z;break;case 2:var c,f,h,l=this.closest;c=l.x;f=l.y;h=l.z;var g,k,m,n,q,p,r,v,aa,w,B,u,D,t,A,E,x,Bb,N=this.Pa[0];g=N.x;k=N.y;m=N.z;var I=this.hb[0];n=I.x;q=I.y;p=I.z;var F=this.pb[0];r=F.x;v=F.y;aa=F.z;var C=this.Pa[1];w=C.x;B=C.y;u=C.z;var O=this.hb[1];D=O.x;t=O.y;A=O.z;var ha=this.pb[1];E=ha.x;x=ha.y;Bb=ha.z;var L,Ub,M;L=w-g;Ub=B-k;M=u-m;var ka=L*L+Ub*Ub+M*M;ka&&(ka=1/ka);var bb=((c-g)*L+(f-k)*Ub+(h-m)*M)*ka,U,R,lc,Na,Ra,yc,Pa,Ba,Hb;U=D-n;R=t-q;lc=A-p;Na=n+U*bb;Ra=q+R*bb;yc=p+lc*bb;U=E-r;R=x-v;lc=Bb-aa;Pa=r+U*bb;Ba=v+R*bb;Hb=aa+lc*bb;var H=this.closestPoint1;H.x=Na;H.y=Ra;H.z=yc;var Qa=this.closestPoint2;Qa.x=Pa;Qa.y=Ba;Qa.z=Hb;break;case 3:var ba,Q,P,ya=this.closest;ba=ya.x;Q=ya.y;P=ya.z;var ta,W,pa,y,Ia,ca,Ea,za,Fa,Sa,la,Z,Ga,ra,va,J,La,Xa,S,Ya,T,K,ia,gb,da,Hc,sa,fb=this.Pa[0];ta=fb.x;W=fb.y;pa=fb.z;var jb=this.hb[0];y=jb.x;Ia=jb.y;ca=jb.z;var Za=this.pb[0];Ea=Za.x;za=Za.y;Fa=Za.z;var ma=this.Pa[1];Sa=ma.x;la=ma.y;Z=ma.z;var oa=this.hb[1];Ga=oa.x;ra=oa.y;va=oa.z;var Ja=this.pb[1];J=Ja.x;La=Ja.y;Xa=Ja.z;var Ha=this.Pa[2];S=Ha.x;Ya=Ha.y;T=Ha.z;var ob=this.hb[2];K=ob.x;ia=ob.y;gb=ob.z;var fa=this.pb[2];da=fa.x;Hc=fa.y;sa=fa.z;var ea,ja,cb,Aa,sb,Ua,qb,rb,tb;ea=Sa-ta;ja=la-W;cb=Z-pa;Aa=S-ta;sb=Ya-W;Ua=T-pa;qb=ba-ta;rb=Q-W;tb=P-pa;var Va=ea*ea+ja*ja+cb*cb,xb=ea*Aa+ja*sb+cb*Ua,rc=Aa*Aa+sb*sb+Ua*Ua,$a=ea*qb+ja*rb+cb*tb,ua=Aa*qb+sb*rb+Ua*tb,Yb=Va*rc-xb*xb;Yb&&(Yb=1/Yb);var G=($a*rc-ua*xb)*Yb,pb=(-$a*xb+ua*Va)*Yb,db,oc,ab,hb,z,Db,de,Tc,Fb;db=Ga-y;oc=ra-Ia;ab=va-ca;hb=y+db*G;z=Ia+oc*G;Db=ca+ab*G;db=K-y;oc=ia-Ia;ab=gb-ca;hb+=db*pb;z+=oc*pb;Db+=ab*pb;db=J-Ea;oc=La-za;ab=Xa-Fa;de=Ea+db*G;Tc=za+oc*G;Fb=Fa+ab*G;db=da-Ea;oc=Hc-za;ab=sa-Fa;de+=db*pb;Tc+=oc*pb;Fb+=ab*pb;var Oa=this.closestPoint1;Oa.x=hb;Oa.y=z;Oa.z=Db;var nb=this.closestPoint2;nb.x=de;nb.y=Tc;nb.z=Fb;break;default:throw Error("!?");}},Cn:function(a){var b=this.dir;a=a.ql;b.x=a.x;b.y=a.y;b.z=a.z},In:function(a){a=a.ql;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;var b=-a.y,e=-a.z;a.x=-a.x;a.y=b;a.z=e},zm:function(a){this.za=a;this.za=(this.za&5)+(this.za>>1&5);this.za=(this.za&3)+(this.za>>2&3);switch(a){case 2:a=this.Pa[0];var b=this.Pa[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.Pa[0];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.Pa[1];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.Pa[0];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.Pa[0];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.Pa[1];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.Pa[0];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.Pa[2];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[2];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[2];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.Pa[0];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.Pa[1];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.Pa[1];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.Pa[0],b=this.Pa[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.hb[0],b=this.hb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.pb[0],b=this.pb[3],a.x=b.x,a.y=b.y,a.z=b.z}},pf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;e=this.pc.o*c+this.pc.i*f+this.pc.l*h;l=this.pc.f*c+this.pc.m*f+this.pc.g*h;b=this.pc.h*c+this.pc.j*f+this.pc.s*h;d=this.dir;d.x=e;d.y=l;d.z=b;this.hj.Ld(this.dir,this.hb[this.za]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.hb[this.za],b=this.dir,e=this.hj.gc,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.hb[this.za];b=a.x;e=a.y;d=a.z;l=this.pc.o*b+this.pc.f*e+this.pc.h*d;a=this.pc.i*b+this.pc.m*e+this.pc.j*d;e=this.pc.l*b+this.pc.g*e+this.pc.s*d;b=l+this.pc.v;a+=this.pc.A;e+=this.pc.B;l=this.hb[this.za];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},qf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;b=this.Gc.o*c+this.Gc.i*f+this.Gc.l*h;e=this.Gc.f*c+this.Gc.m*f+this.Gc.g*h;l=this.Gc.h*c+this.Gc.j*f+this.Gc.s*h;d=this.dir;d.x=-b;d.y=-e;d.z=-l;this.Sk.Ld(this.dir,this.pb[this.za]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.pb[this.za],b=this.dir,e=this.Sk.gc,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.pb[this.za];b=a.x;e=a.y;d=a.z;l=this.Gc.o*b+this.Gc.f*e+this.Gc.h*d;a=this.Gc.i*b+this.Gc.m*e+this.Gc.j*d;e=this.Gc.l*b+this.Gc.g*e+this.Gc.s*d;b=l+this.Gc.v;a+=this.Gc.A;e+=this.Gc.B;l=this.pb[this.za];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},En:function(){for(var a=0;3>a;){var b=a++,e=this.dir,b=this.fj[b];e.x=b.x;e.y=b.y;e.z=b.z;this.pf(!1);this.qf(!1);e=this.Pa[this.za];b=this.hb[this.za];e.x=b.x;e.y=b.y;e.z=b.z;var b=this.pb[this.za],d=e.y-b.y,c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.za++;this.ml();if(4==this.za)break;this.za--;e=this.dir;b=-e.y;d=-e.z;e.x=-e.x;e.y=b;e.z=d;this.pf(!1);this.qf(!1);e=this.Pa[this.za];b=this.hb[this.za];e.x=b.x;e.y=b.y;e.z=b.z;b=this.pb[this.za];d=e.y-b.y;c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.za++;this.ml();if(4==this.za)break;this.za--}},ml:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var d,c,f,h,l,g;f=this.Pa[0];d=f.x;c=f.y;f=f.z;g=this.Pa[1];h=g.x;l=g.y;g=g.z;d-=h;c-=l;f-=g;for(l=0;3>l;){g=l++;var k,m;g=this.fj[g];h=g.x;k=g.y;m=g.z;g=c*m-f*k;m=f*h-d*m;h=d*k-c*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.pf(!1);this.qf(!1);g=this.Pa[this.za];h=this.hb[this.za];g.x=h.x;g.y=h.y;g.z=h.z;h=this.pb[this.za];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.za++;this.tl();if(4==this.za)break;this.za--;g=this.dir;h=-g.y;k=-g.z;g.x=-g.x;g.y=h;g.z=k;this.pf(!1);this.qf(!1);g=this.Pa[this.za];h=this.hb[this.za];g.x=h.x;g.y=h.y;g.z=h.z;h=this.pb[this.za];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.za++;this.tl();if(4==this.za)break;this.za--}d=this.dir;d.x=a;d.y=b;d.z=e},tl:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var d,c,f,h,l,g,k,m,n;f=this.Pa[0];d=f.x;c=f.y;f=f.z;m=this.Pa[1];h=m.x;l=m.y;g=m.z;n=this.Pa[2];k=n.x;m=n.y;n=n.z;h-=d;l-=c;g-=f;d=k-d;c=m-c;m=n-f;f=l*m-g*c;m=g*d-h*m;c=h*c-l*d;h=this.dir;h.x=f;h.y=m;h.z=c;this.pf(!1);this.qf(!1);c=this.Pa[this.za];f=this.hb[this.za];c.x=f.x;c.y=f.y;c.z=f.z;f=this.pb[this.za];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.za++;if(this.jm())break;this.za--;c=this.dir;f=-c.y;h=-c.z;c.x=-c.x;c.y=f;c.z=h;this.pf(!1);this.qf(!1);c=this.Pa[this.za];f=this.hb[this.za];c.x=f.x;c.y=f.y;c.z=f.z;f=this.pb[this.za];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.za++;if(this.jm())break;this.za--;break}c=this.dir;c.x=a;c.y=b;c.z=e},jm:function(){var a=this.Pa[2].x-this.Pa[0].x,b=this.Pa[2].y-this.Pa[0].y,e=this.Pa[2].z-this.Pa[0].z,d=this.Pa[3].x-this.Pa[0].x,c=this.Pa[3].y-this.Pa[0].y,f=this.Pa[3].z-this.Pa[0].z,a=(this.Pa[1].x-this.Pa[0].x)*(b*f-e*c)-(this.Pa[1].y-this.Pa[0].y)*(a*f-e*d)+(this.Pa[1].z-this.Pa[0].z)*(a*c-b*d);return 1E-12<a?!0:-1E-12>a},Zm:function(a,b,e,d,c,f,h){for(var l=this.Fg;0<l.ah;){var g=l.Xc;l.ah--;var k=g.ja,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ja=k);g==l.Xc&&(l.Xc=l.Xc.M);g==l.Fc&&(l.Fc=l.Fc.ja);g.M=null;g.ja=null;g.$j();g.M=l.ve;l.ve=g}if(null!=l.Xc)throw Error("assertion error: _triangleList == null is false");if(null!=l.Fc)throw Error("assertion error: _triangleListLast == null is false");for(;0<l.Ae;){var n=l.zb[--l.Ae];n.$j();n.M=l.Re;l.Re=n}var q=this.Fg,p=this.Fg,r=p.Re;null!=r?(p.Re=r.M,r.M=null):r=new Oc;var v=r.Aa(c[0],f[0],h[0]),aa=this.Fg,w=aa.Re;null!=w?(aa.Re=w.M,w.M=null):w=new Oc;var B=w.Aa(c[1],f[1],h[1]),u=this.Fg,D=u.Re;null!=D?(u.Re=D.M,D.M=null):D=new Oc;var t=D.Aa(c[2],f[2],h[2]),A=this.Fg,E=A.Re;null!=E?(A.Re=E.M,E.M=null):E=new Oc;if(!q.Vg(v,B,t,E.Aa(c[3],f[3],h[3])))return Nb.EPA_FAILED_TO_INIT;this.za=0;for(var x=this.Pa[0],Bb=this.hb[0],N=this.pb[0],I=0;40>I;){for(var F=this.Fg.Xc,C=1/0,O=null;null!=F;){var ha=F.M;F.Ej<C&&(C=F.Ej,O=F);F=ha}var L=O,M=this.dir,na=L.Lj;M.x=na.x;M.y=na.y;M.z=na.z;var ka=M,bb=Math.sqrt(ka.x*ka.x+ka.y*ka.y+ka.z*ka.z);0<bb&&(bb=1/bb);var U=ka.y*bb,R=ka.z*bb;ka.x=ka.x*bb;ka.y=U;ka.z=R;this.pf(!1);this.qf(!1);var lc=this.Pa[this.za],Na=this.hb[this.za];lc.x=Na.x;lc.y=Na.y;lc.z=Na.z;var Ra=lc,yc=this.pb[this.za],Pa=Ra.y-yc.y,Ba=Ra.z-yc.z;Ra.x=Ra.x-yc.x;Ra.y=Pa;Ra.z=Ba;var Hb=L.zb[0],H=L.zb[1],Qa=L.zb[2],ba=Hb.ud,Q=this.dir,P=this.dir;if(1E-6>x.x*P.x+x.y*P.y+x.z*P.z-(ba.x*Q.x+ba.y*Q.y+ba.z*Q.z)||39==I){var ya=this.closest,ta=this.dir;ya.x=ta.x;ya.y=ta.y;ya.z=ta.z;var W=ya,pa=this.dir,y=Hb.ud,Ia=this.dir,ca=(pa.x*y.x+pa.y*y.y+pa.z*y.z)/(Ia.x*Ia.x+Ia.y*Ia.y+Ia.z*Ia.z),Ea=W.y*ca,za=W.z*ca;W.x=W.x*ca;W.y=Ea;W.z=za;var Fa,Sa,la,Z=this.closest;Fa=Z.x;Sa=Z.y;la=Z.z;var Ga,ra,va,J,La,Xa,S,Ya,T,K,ia,gb,da,Hc,sa,fb,jb,Za,ma,oa,Ja,Ha,ob,fa,ea,ja,cb,Aa=Hb.ud;Ga=Aa.x;ra=Aa.y;va=Aa.z;var sb=Hb.hb;J=sb.x;La=sb.y;Xa=sb.z;var Ua=Hb.pb;S=Ua.x;Ya=Ua.y;T=Ua.z;var qb=H.ud;K=qb.x;ia=qb.y;gb=qb.z;var rb=H.hb;da=rb.x;Hc=rb.y;sa=rb.z;var tb=H.pb;fb=tb.x;jb=tb.y;Za=tb.z;var Va=Qa.ud;ma=Va.x;oa=Va.y;Ja=Va.z;var xb=Qa.hb;Ha=xb.x;ob=xb.y;fa=xb.z;var rc=Qa.pb;ea=rc.x;ja=rc.y;cb=rc.z;var $a,ua,Yb,G,pb,db,oc,ab,hb;$a=K-Ga;ua=ia-ra;Yb=gb-va;G=ma-Ga;pb=oa-ra;db=Ja-va;oc=Fa-Ga;ab=Sa-ra;hb=la-va;var z=$a*$a+ua*ua+Yb*Yb,Db=$a*G+ua*pb+Yb*db,de=G*G+pb*pb+db*db,Tc=$a*oc+ua*ab+Yb*hb,Fb=G*oc+pb*ab+db*hb,Oa=z*de-Db*Db;Oa&&(Oa=1/Oa);var nb=(Tc*de-Fb*Db)*Oa,wb=(-Tc*Db+Fb*z)*Oa,yb,eb,Y,Ma,kb,Ta,ib,Ka,Kb;yb=da-J;eb=Hc-La;Y=sa-Xa;Ma=J+yb*nb;kb=La+eb*nb;Ta=Xa+Y*nb;yb=Ha-J;eb=ob-La;Y=fa-Xa;Ma+=yb*wb;kb+=eb*wb;Ta+=Y*wb;yb=fb-S;eb=jb-Ya;Y=Za-T;ib=S+yb*nb;Ka=Ya+eb*nb;Kb=T+Y*nb;yb=ea-S;eb=ja-Ya;Y=cb-T;ib+=yb*wb;Ka+=eb*wb;Kb+=Y*wb;var ga=this.closestPoint1;ga.x=Ma;ga.y=kb;ga.z=Ta;var X=this.closestPoint2;X.x=ib;X.y=Ka;X.z=Kb;var Cb=this.closest;this.depth=Math.sqrt(Cb.x*Cb.x+Cb.y*Cb.y+Cb.z*Cb.z);return Nb.SUCCEEDED}var hd=this.Fg,Rc=hd.Re;null!=Rc?(hd.Re=Rc.M,Rc.M=null):Rc=new Oc;var qa=Rc.Aa(x,Bb,N);if(!this.Fg.Im(qa,L))return Nb.EPA_FAILED_TO_ADD_VERTEX;++I}return Nb.EPA_DID_NOT_CONVERGE},Qa:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!0)},bb:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!1)},rf:function(a,b,e,d,c,f,h){return this.Vl(a,b,e,d,c,f,h)},Sd:function(a,b,e,d,c){var f=this.Mn;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.Nn,l=this.On;h.x=d.x;h.y=d.y;h.z=d.z;d=h.y-e.y;var g=h.z-e.z;h.x=h.x-e.x;h.y=d;h.z=g;l.Z();return this.Vl(null,a,f,b,h,l,c)},ra:Jb};Nb.aa=!0;xd.aa=!0;xd.Jc=function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-d;g=h-c;k=b-a;var m;m=-(l*d+g*c+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=d,e.y=c,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=d+l*m;e.y=c+g*m;e.z=a+k*m;return 3};xd.cd=function(a,b,e,d){var c,f,h,l,g,k,m,n,q,p,r,v,aa,w,B,u,D,t;c=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;n=e.y;q=e.z;p=l-c;r=g-f;v=k-h;aa=m-l;w=n-g;B=q-k;u=c-m;D=f-n;t=h-q;var A,E,x;A=r*B-v*w;E=v*aa-p*B;x=p*w-r*aa;var Bb=-1,N,I,F,C=0;F=I=N=0;if(0>c*(r*x-v*E)+f*(v*A-p*x)+h*(p*E-r*A)){var L;p=a.x;Bb=a.y;N=a.z;r=b.x;v=b.y;L=b.z;var ha;ha=r-p;F=v-Bb;I=L-N;C=-(ha*p+F*Bb+I*N)/(ha*ha+F*F+I*I);0>C?(d.x=p,d.y=Bb,d.z=N,I=1):1<C?(d.x=r,d.y=v,d.z=L,I=2):(p+=ha*C,Bb+=F*C,N+=I*C,d.x=p,d.y=Bb,d.z=N,I=3);N=d.x*d.x+d.y*d.y+d.z*d.z;C=I;Bb=N;N=d.x;I=d.y;F=d.z}0>l*(w*x-B*E)+g*(B*A-aa*x)+k*(aa*E-w*A)&&(aa=b.x,l=b.y,b=b.z,B=e.x,p=e.y,r=e.z,v=B-aa,w=p-l,g=r-b,k=-(v*aa+w*l+g*b)/(v*v+w*w+g*g),0>k?(d.x=aa,d.y=l,d.z=b,b=1):1<k?(d.x=B,d.y=p,d.z=r,b=2):(aa+=v*k,l+=w*k,b+=g*k,d.x=aa,d.y=l,d.z=b,b=3),l=d.x*d.x+d.y*d.y+d.z*d.z,0>Bb||l<Bb)&&(C=b<<1,Bb=l,N=d.x,I=d.y,F=d.z);0>m*(D*x-t*E)+n*(t*A-u*x)+q*(u*E-D*A)&&(n=a.x,m=a.y,a=a.z,u=e.x,D=e.y,b=e.z,l=u-n,t=D-m,e=b-a,q=-(l*n+t*m+e*a)/(l*l+t*t+e*e),0>q?(d.x=n,d.y=m,d.z=a,e=1):1<q?(d.x=u,d.y=D,d.z=b,e=2):(n+=l*q,m+=t*q,e=a+e*q,d.x=n,d.y=m,d.z=e,e=3),a=d.x*d.x+d.y*d.y+d.z*d.z,0>Bb||a<Bb)&&(C=e&1|(e&2)<<1,Bb=a,N=d.x,I=d.y,F=d.z);if(0<Bb)return d.x=N,d.y=I,d.z=F,C;e=A*A+E*E+x*x;0<e&&(e=1/Math.sqrt(e));A*=e;E*=e;x*=e;c=(c*A+f*E+h*x)/(A*A+E*E+x*x);N=A*c;I=E*c;F=x*c;d.x=N;d.y=I;d.z=F;return 7};xd.Pd=function(a,b,e,d,c){var f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,V,A,E,x,Bb,N,I,F,C,L,ha;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;n=e.x;q=e.y;p=e.z;r=d.x;v=d.y;t=d.z;w=g-f;B=k-h;u=m-l;D=n-f;V=q-h;A=p-l;E=r-f;x=v-h;Bb=t-l;N=n-g;I=q-k;F=p-m;C=r-g;L=v-k;ha=t-m;var O,M,na,ka,bb,U,R,lc,Na,Ra,yc,Pa;O=B*A-u*V;M=u*D-w*A;na=w*V-B*D;ka=V*Bb-A*x;bb=A*E-D*Bb;U=D*x-V*E;R=x*u-Bb*B;lc=Bb*w-E*u;Na=E*B-x*w;Ra=L*F-ha*I;yc=ha*N-C*F;Pa=C*I-L*N;var Ba=0<w*Ra+B*yc+u*Pa?1:-1,Hb=f*O+h*M+l*na,H=f*ka+h*bb+l*U,Qa=f*R+h*lc+l*Na,ba=g*Ra+k*yc+m*Pa,Q=-1,P,ya,ta,W=0;ta=ya=P=0;if(0>Hb*Ba){var pa,y,Ia,ca,Ea,za,Fa,Sa,la,Z,Ga,ra,va,J,La,Xa,S,Ya;pa=a.x;y=a.y;Ia=a.z;ca=b.x;Ea=b.y;za=b.z;Fa=e.x;Sa=e.y;la=e.z;Z=ca-pa;Ga=Ea-y;ra=za-Ia;va=Fa-ca;J=Sa-Ea;La=la-za;Xa=pa-Fa;S=y-Sa;Ya=Ia-la;var T,K,ia;T=Ga*La-ra*J;K=ra*va-Z*La;ia=Z*J-Ga*va;var gb=pa*(Ga*ia-ra*K)+y*(ra*T-Z*ia)+Ia*(Z*K-Ga*T),da=ca*(J*ia-La*K)+Ea*(La*T-va*ia)+za*(va*K-J*T),Hc=Fa*(S*ia-Ya*K)+Sa*(Ya*T-Xa*ia)+la*(Xa*K-S*T),sa=-1,fb,jb,Za,ma=0;Za=jb=fb=0;if(0>gb){var oa,Ja,Ha,ob,fa,ea;oa=a.x;Ja=a.y;Ha=a.z;ob=b.x;fa=b.y;ea=b.z;var ja,cb,Aa;ja=ob-oa;cb=fa-Ja;Aa=ea-Ha;var sb=ja*oa+cb*Ja+Aa*Ha,sb=-sb/(ja*ja+cb*cb+Aa*Aa),Ua;if(0>sb)c.x=oa,c.y=Ja,c.z=Ha,Ua=1;else if(1<sb)c.x=ob,c.y=fa,c.z=ea,Ua=2;else{var qb,rb,tb;qb=oa+ja*sb;rb=Ja+cb*sb;tb=Ha+Aa*sb;c.x=qb;c.y=rb;c.z=tb;Ua=3}var Va=c.x*c.x+c.y*c.y+c.z*c.z,ma=Ua,sa=Va;fb=c.x;jb=c.y;Za=c.z}if(0>da){var xb,rc,$a,ua,Yb,G;xb=b.x;rc=b.y;$a=b.z;ua=e.x;Yb=e.y;G=e.z;var pb,db,oc;pb=ua-xb;db=Yb-rc;oc=G-$a;var ab=pb*xb+db*rc+oc*$a,ab=-ab/(pb*pb+db*db+oc*oc),hb;if(0>ab)c.x=xb,c.y=rc,c.z=$a,hb=1;else if(1<ab)c.x=ua,c.y=Yb,c.z=G,hb=2;else{var z,Db,ga;z=xb+pb*ab;Db=rc+db*ab;ga=$a+oc*ab;c.x=z;c.y=Db;c.z=ga;hb=3}var Tc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||Tc<sa)ma=hb<<1,sa=Tc,fb=c.x,jb=c.y,Za=c.z}if(0>Hc){var Fb,Oa,nb,wb,yb,eb;Fb=a.x;Oa=a.y;nb=a.z;wb=e.x;yb=e.y;eb=e.z;var Y,Ma,kb;Y=wb-Fb;Ma=yb-Oa;kb=eb-nb;var Ta=Y*Fb+Ma*Oa+kb*nb,Ta=-Ta/(Y*Y+Ma*Ma+kb*kb),ib;if(0>Ta)c.x=Fb,c.y=Oa,c.z=nb,ib=1;else if(1<Ta)c.x=wb,c.y=yb,c.z=eb,ib=2;else{var Ka,Kb,qa;Ka=Fb+Y*Ta;Kb=Oa+Ma*Ta;qa=nb+kb*Ta;c.x=Ka;c.y=Kb;c.z=qa;ib=3}var X=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||X<sa)ma=ib&1|(ib&2)<<1,sa=X,fb=c.x,jb=c.y,Za=c.z}var Cb;if(0<sa)c.x=fb,c.y=jb,c.z=Za,Cb=ma;else{var hd=T*T+K*K+ia*ia;0<hd&&(hd=1/Math.sqrt(hd));T*=hd;K*=hd;ia*=hd;var Rc=T*T+K*K+ia*ia,Rc=(pa*T+y*K+Ia*ia)/Rc;fb=T*Rc;jb=K*Rc;Za=ia*Rc;c.x=fb;c.y=jb;c.z=Za;Cb=7}var wa=c.x*c.x+c.y*c.y+c.z*c.z,W=Cb,Q=wa;P=c.x;ya=c.y;ta=c.z}if(0>H*Ba){var ec,qd,Da,Ca,xc,xa,jc,pc,kc,ac,Vb,Wb,Qb,fc,Rb,Ob,Xb,gc;ec=a.x;qd=a.y;Da=a.z;Ca=e.x;xc=e.y;xa=e.z;jc=d.x;pc=d.y;kc=d.z;ac=Ca-ec;Vb=xc-qd;Wb=xa-Da;Qb=jc-Ca;fc=pc-xc;Rb=kc-xa;Ob=ec-jc;Xb=qd-pc;gc=Da-kc;var Ib,Zb,lb;Ib=Vb*Rb-Wb*fc;Zb=Wb*Qb-ac*Rb;lb=ac*fc-Vb*Qb;var mb=ec*(Vb*lb-Wb*Zb)+qd*(Wb*Ib-ac*lb)+Da*(ac*Zb-Vb*Ib),Ab=Ca*(fc*lb-Rb*Zb)+xc*(Rb*Ib-Qb*lb)+xa*(Qb*Zb-fc*Ib),ub=jc*(Xb*lb-gc*Zb)+pc*(gc*Ib-Ob*lb)+kc*(Ob*Zb-Xb*Ib),qc=-1,mc,id,Ic,vb=0;Ic=id=mc=0;if(0>mb){var sc,vc,Wa,Tb,Sb,Te;sc=a.x;vc=a.y;Wa=a.z;Tb=e.x;Sb=e.y;Te=e.z;var Fc,Lb,Ue;Fc=Tb-sc;Lb=Sb-vc;Ue=Te-Wa;var Gb=Fc*sc+Lb*vc+Ue*Wa,Gb=-Gb/(Fc*Fc+Lb*Lb+Ue*Ue),$c;if(0>Gb)c.x=sc,c.y=vc,c.z=Wa,$c=1;else if(1<Gb)c.x=Tb,c.y=Sb,c.z=Te,$c=2;else{var Qg,ic,hc;Qg=sc+Fc*Gb;ic=vc+Lb*Gb;hc=Wa+Ue*Gb;c.x=Qg;c.y=ic;c.z=hc;$c=3}var Mb=c.x*c.x+c.y*c.y+c.z*c.z,vb=$c,qc=Mb;mc=c.x;id=c.y;Ic=c.z}if(0>Ab){var Ac,tc,bc,zb,nc,Pc;Ac=e.x;tc=e.y;bc=e.z;zb=d.x;nc=d.y;Pc=d.z;var Jb,Eb,uc;Jb=zb-Ac;Eb=nc-tc;uc=Pc-bc;var cc=Jb*Ac+Eb*tc+uc*bc,cc=-cc/(Jb*Jb+Eb*Eb+uc*uc),Nb;if(0>cc)c.x=Ac,c.y=tc,c.z=bc,Nb=1;else if(1<cc)c.x=zb,c.y=nc,c.z=Pc,Nb=2;else{var dc,wc,$b;dc=Ac+Jb*cc;wc=tc+Eb*cc;$b=bc+uc*cc;c.x=dc;c.y=wc;c.z=$b;Nb=3}var Nc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>qc||Nc<qc)vb=Nb<<1,qc=Nc,mc=c.x,id=c.y,Ic=c.z}if(0>ub){var Pb,Ec,Gc,Jc,Cc,Yc;Pb=a.x;Ec=a.y;Gc=a.z;Jc=d.x;Cc=d.y;Yc=d.z;var Bc,zc,rd;Bc=Jc-Pb;zc=Cc-Ec;rd=Yc-Gc;var Uc=Bc*Pb+zc*Ec+rd*Gc,Uc=-Uc/(Bc*Bc+zc*zc+rd*rd),Lc;if(0>Uc)c.x=Pb,c.y=Ec,c.z=Gc,Lc=1;else if(1<Uc)c.x=Jc,c.y=Cc,c.z=Yc,Lc=2;else{var Xc,cd,wd;Xc=Pb+Bc*Uc;cd=Ec+zc*Uc;wd=Gc+rd*Uc;c.x=Xc;c.y=cd;c.z=wd;Lc=3}var Df=c.x*c.x+c.y*c.y+c.z*c.z;if(0>qc||Df<qc)vb=Lc&1|(Lc&2)<<1,qc=Df,mc=c.x,id=c.y,Ic=c.z}var Oc;if(0<qc)c.x=mc,c.y=id,c.z=Ic,Oc=vb;else{var Dc=Ib*Ib+Zb*Zb+lb*lb;0<Dc&&(Dc=1/Math.sqrt(Dc));Ib*=Dc;Zb*=Dc;lb*=Dc;var bd=Ib*Ib+Zb*Zb+lb*lb,bd=(ec*Ib+qd*Zb+Da*lb)/bd;mc=Ib*bd;id=Zb*bd;Ic=lb*bd;c.x=mc;c.y=id;c.z=Ic;Oc=7}var xd=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||xd<Q)W=Oc&1|(Oc&6)<<1,Q=xd,P=c.x,ya=c.y,ta=c.z}if(0>Qa*Ba){var sd,ed,fd,ld,md,Id,dd,Mc,od,gd,Kc,jd,kd,Dd,nd,Vc,Wc,Zc;sd=a.x;ed=a.y;fd=a.z;ld=b.x;md=b.y;Id=b.z;dd=d.x;Mc=d.y;od=d.z;gd=ld-sd;Kc=md-ed;jd=Id-fd;kd=dd-ld;Dd=Mc-md;nd=od-Id;Vc=sd-dd;Wc=ed-Mc;Zc=fd-od;var td,ad,Sc;td=Kc*nd-jd*Dd;ad=jd*kd-gd*nd;Sc=gd*Dd-Kc*kd;var De=sd*(Kc*Sc-jd*ad)+ed*(jd*td-gd*Sc)+fd*(gd*ad-Kc*td),Ve=ld*(Dd*Sc-nd*ad)+md*(nd*td-kd*Sc)+Id*(kd*ad-Dd*td),We=dd*(Wc*Sc-Zc*ad)+Mc*(Zc*td-Vc*Sc)+od*(Vc*ad-Wc*td),Jd=-1,Qc,ue,ve,Gd=0;ve=ue=Qc=0;if(0>De){var yd,Hd,vd,Md,Rd,Wd;yd=a.x;Hd=a.y;vd=a.z;Md=b.x;Rd=b.y;Wd=b.z;var Fd,Nd,Ee;Fd=Md-yd;Nd=Rd-Hd;Ee=Wd-vd;var pd=Fd*yd+Nd*Hd+Ee*vd,pd=-pd/(Fd*Fd+Nd*Nd+Ee*Ee),Qd;if(0>pd)c.x=yd,c.y=Hd,c.z=vd,Qd=1;else if(1<pd)c.x=Md,c.y=Rd,c.z=Wd,Qd=2;else{var oe,pe,qe;oe=yd+Fd*pd;pe=Hd+Nd*pd;qe=vd+Ee*pd;c.x=oe;c.y=pe;c.z=qe;Qd=3}var Be=c.x*c.x+c.y*c.y+c.z*c.z,Gd=Qd,Jd=Be;Qc=c.x;ue=c.y;ve=c.z}if(0>Ve){var Xe,Ed,Sd,ne,re,te;Xe=b.x;Ed=b.y;Sd=b.z;ne=d.x;re=d.y;te=d.z;var Ye,Ze,$e;Ye=ne-Xe;Ze=re-Ed;$e=te-Sd;var Zd=Ye*Xe+Ze*Ed+$e*Sd,Zd=-Zd/(Ye*Ye+Ze*Ze+$e*$e),Ef;if(0>Zd)c.x=Xe,c.y=Ed,c.z=Sd,Ef=1;else if(1<Zd)c.x=ne,c.y=re,c.z=te,Ef=2;else{var Pe,Se,pf;Pe=Xe+Ye*Zd;Se=Ed+Ze*Zd;pf=Sd+$e*Zd;c.x=Pe;c.y=Se;c.z=pf;Ef=3}var Ff=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Jd||Ff<Jd)Gd=Ef<<1,Jd=Ff,Qc=c.x,ue=c.y,ve=c.z}if(0>We){var Gf,Hf,se,Re,Xf,Yf;Gf=a.x;Hf=a.y;se=a.z;Re=d.x;Xf=d.y;Yf=d.z;var af,Zf,If;af=Re-Gf;Zf=Xf-Hf;If=Yf-se;var we=af*Gf+Zf*Hf+If*se,we=-we/(af*af+Zf*Zf+If*If),bf;if(0>we)c.x=Gf,c.y=Hf,c.z=se,bf=1;else if(1<we)c.x=Re,c.y=Xf,c.z=Yf,bf=2;else{var $f,ag,bg;$f=Gf+af*we;ag=Hf+Zf*we;bg=se+If*we;c.x=$f;c.y=ag;c.z=bg;bf=3}var cg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Jd||cg<Jd)Gd=bf&1|(bf&2)<<1,Jd=cg,Qc=c.x,ue=c.y,ve=c.z}var Fe;if(0<Jd)c.x=Qc,c.y=ue,c.z=ve,Fe=Gd;else{var Ge=td*td+ad*ad+Sc*Sc;0<Ge&&(Ge=1/Math.sqrt(Ge));td*=Ge;ad*=Ge;Sc*=Ge;var cf=td*td+ad*ad+Sc*Sc,cf=(sd*td+ed*ad+fd*Sc)/cf;Qc=td*cf;ue=ad*cf;ve=Sc*cf;c.x=Qc;c.y=ue;c.z=ve;Fe=7}var dg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||dg<Q)W=Fe&3|(Fe&4)<<1,Q=dg,P=c.x,ya=c.y,ta=c.z}if(0>ba*Ba){var qf,He,rf,eg,Me,Ne,Oe,Qe,df,sf,Jf,Ce,Kf,ee,xe,Lf,Cf,fg;qf=b.x;He=b.y;rf=b.z;eg=e.x;Me=e.y;Ne=e.z;Oe=d.x;Qe=d.y;df=d.z;sf=eg-qf;Jf=Me-He;Ce=Ne-rf;Kf=Oe-eg;ee=Qe-Me;xe=df-Ne;Lf=qf-Oe;Cf=He-Qe;fg=rf-df;var zd,Ad,Bd;zd=Jf*xe-Ce*ee;Ad=Ce*Kf-sf*xe;Bd=sf*ee-Jf*Kf;var Og=qf*(Jf*Bd-Ce*Ad)+He*(Ce*zd-sf*Bd)+rf*(sf*Ad-Jf*zd),gg=eg*(ee*Bd-xe*Ad)+Me*(xe*zd-Kf*Bd)+Ne*(Kf*Ad-ee*zd),hg=Oe*(Cf*Bd-fg*Ad)+Qe*(fg*zd-Lf*Bd)+df*(Lf*Ad-Cf*zd),$d=-1,fe,ge,ae,tf=0;ae=ge=fe=0;if(0>Og){var ef,ff,gf,Mf,Tf,Td;ef=b.x;ff=b.y;gf=b.z;Mf=e.x;Tf=e.y;Td=e.z;var Kd,Ld,of;Kd=Mf-ef;Ld=Tf-ff;of=Td-gf;var Nf=Kd*ef+Ld*ff+of*gf,Nf=-Nf/(Kd*Kd+Ld*Ld+of*of),Xd;if(0>Nf)c.x=ef,c.y=ff,c.z=gf,Xd=1;else if(1<Nf)c.x=Mf,c.y=Tf,c.z=Td,Xd=2;else{var ud,Cd,ig;ud=ef+Kd*Nf;Cd=ff+Ld*Nf;ig=gf+of*Nf;c.x=ud;c.y=Cd;c.z=ig;Xd=3}var Dh=c.x*c.x+c.y*c.y+c.z*c.z,tf=Xd,$d=Dh;fe=c.x;ge=c.y;ae=c.z}if(0>gg){var jg,Yd,be,ye,hf,kg;jg=e.x;Yd=e.y;be=e.z;ye=d.x;hf=d.y;kg=d.z;var jf,kf,lf;jf=ye-jg;kf=hf-Yd;lf=kg-be;var ze=jf*jg+kf*Yd+lf*be,ze=-ze/(jf*jf+kf*kf+lf*lf),uf;if(0>ze)c.x=jg,c.y=Yd,c.z=be,uf=1;else if(1<ze)c.x=ye,c.y=hf,c.z=kg,uf=2;else{var lg,vf,xg;lg=jg+jf*ze;vf=Yd+kf*ze;xg=be+lf*ze;c.x=lg;c.y=vf;c.z=xg;uf=3}var mg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>$d||mg<$d)tf=uf<<1,$d=mg,fe=c.x,ge=c.y,ae=c.z}if(0>hg){var mf,wf,Ie,yg,zg,Uf;mf=b.x;wf=b.y;Ie=b.z;yg=d.x;zg=d.y;Uf=d.z;var ng,xf,yf;ng=yg-mf;xf=zg-wf;yf=Uf-Ie;var Ae=ng*mf+xf*wf+yf*Ie,Ae=-Ae/(ng*ng+xf*xf+yf*yf),Ag;if(0>Ae)c.x=mf,c.y=wf,c.z=Ie,Ag=1;else if(1<Ae)c.x=yg,c.y=zg,c.z=Uf,Ag=2;else{var tg,og,pg;tg=mf+ng*Ae;og=wf+xf*Ae;pg=Ie+yf*Ae;c.x=tg;c.y=og;c.z=pg;Ag=3}var qg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>$d||qg<$d)tf=Ag&1|(Ag&2)<<1,$d=qg,fe=c.x,ge=c.y,ae=c.z}var Of;if(0<$d)c.x=fe,c.y=ge,c.z=ae,Of=tf;else{var Je=zd*zd+Ad*Ad+Bd*Bd;0<Je&&(Je=1/Math.sqrt(Je));zd*=Je;Ad*=Je;Bd*=Je;var nf=zd*zd+Ad*Ad+Bd*Bd,nf=(qf*zd+He*Ad+rf*Bd)/nf;fe=zd*nf;ge=Ad*nf;ae=Bd*nf;c.x=fe;c.y=ge;c.z=ae;Of=7}var zf=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||zf<Q)W=Of<<1,Q=zf,P=c.x,ya=c.y,ta=c.z}if(0<Q)return c.x=P,c.y=ya,c.z=ta,W;c.Z();return 15};O.aa=!0;O.prototype={Aa:function(a,b,e,d,c,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Mf:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},zc:function(a){return new O(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},Kg:function(a){return new O(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},Bf:function(a){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},de:function(a){return new O(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Cc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e10+a.e10,c=this.e11+a.e11,f=this.e12+a.e12,h=this.e20+a.e20,l=this.e21+a.e21,g=this.e22+a.e22;this.e00+=a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Lg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e10-a.e10,c=this.e11-a.e11,f=this.e12-a.e12,h=this.e20-a.e20,l=this.e21-a.e21,g=this.e22-a.e22;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Jg:function(a){var b=this.e01*a,e=this.e02*a,d=this.e10*a,c=this.e11*a,f=this.e12*a,h=this.e20*a,l=this.e21*a,g=this.e22*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},ee:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,c=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Ge:function(a,b,e){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},Jc:function(a,b,e){return new O(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},fe:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22)},Hc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d)},He:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e10*b,h=this.e11*b;b=this.e12*b;var l=this.e20*e,g=this.e21*e;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},cd:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e10*a,h=this.e11*b,l=this.e12*e,g=this.e20*a;b=this.e21*b;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},ge:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;h=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;e=a*this.e02+l*this.e12+g*this.e22;c=k*this.e00+m*this.e10+n*this.e20;f=k*this.e01+m*this.e11+n*this.e21;k=k*this.e02+m*this.e12+n*this.e22;m=q*this.e00+b*this.e10+h*this.e20;n=q*this.e01+b*this.e11+h*this.e21;q=q*this.e02+b*this.e12+h*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=k;this.e20=m;this.e21=n;this.e22=q;return this},Ic:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e10*a+this.e11*k+this.e12*q,f=this.e10*l+this.e11*m+this.e12*b,h=this.e10*g+this.e11*n+this.e12*p,r=this.e20*a+this.e21*k+this.e22*q,l=this.e20*l+this.e21*m+this.e22*b,g=this.e20*g+this.e21*n+this.e22*p;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=h;this.e20=r;this.e21=l;this.e22=g;return this},Th:function(){return new O(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},Uh:function(){var a=this.e10,b=this.e20,e=this.e01,d=this.e11,c=this.e21,f=this.e02,h=this.e12,l=this.e22;this.e00=this.e00;this.e01=a;this.e02=b;this.e10=e;this.e11=d;this.e12=c;this.e20=f;this.e21=h;this.e22=l;return this},Pd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Ng:function(){return this.e00+this.e11+this.e22},be:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);return new O(a*k,-d*k,h*k,-b*k,c*k,-l*k,e*k,-f*k,g*k)},ce:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);this.e00=a*k;this.e01=-d*k;this.e02=h*k;this.e10=-b*k;this.e11=c*k;this.e12=-l*k;this.e20=e*k;this.e21=-f*k;this.e22=g*k;return this},Mg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new O(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},tb:function(a){var b=a.x,e=a.y,d=a.z,c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h,d=d*l,k=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;this.e00=1-g-d;this.e01=k-c;this.e02=b+h;this.e10=k+c;this.e11=1-a-d;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},xj:function(){var a=new ga,b=this.e00,e=this.e11,d=this.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},bb:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),d=Math.sin(a.z),c=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*d;this.e02=e;this.e10=c*d+a*b*e;this.e11=c*a-b*e*d;this.e12=-f*b;this.e20=b*d-c*a*e;this.e21=a*b+c*e*d;this.e22=c*f;return this},Vh:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,1.570796326794895,.5*a)):new t(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},qc:function(a){return 0==a?new t(this.e00,this.e01,this.e02):1==a?new t(this.e10,this.e11,this.e12):2==a?new t(this.e20,this.e21,this.e22):null},lc:function(a){return 0==a?new t(this.e00,this.e10,this.e20):1==a?new t(this.e01,this.e11,this.e21):2==a?new t(this.e02,this.e12,this.e22):null},rc:function(a,b){0==a?b.Aa(this.e00,this.e01,this.e02):1==a?b.Aa(this.e10,this.e11,this.e12):2==a?b.Aa(this.e20,this.e21,this.e22):b.Z()},mc:function(a,b){0==a?b.Aa(this.e00,this.e10,this.e20):1==a?b.Aa(this.e01,this.e11,this.e21):2==a?b.Aa(this.e02,this.e12,this.e22):b.Z()},Lb:function(a,b,e){var d=a.y,c=a.z,f=b.x,h=b.y;b=b.z;var l=e.x,g=e.y;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},Qa:function(a,b,e){var d=b.x,c=e.x,f=a.y,h=b.y,l=e.y,g=a.z;b=b.z;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"},ra:O};M.aa=!0;M.prototype={Aa:function(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Mf:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},lc:function(a){return new M(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},Bf:function(a){return new M(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},Ge:function(a){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},Pd:function(a){return new M(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},mc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e03+a.e03,c=this.e10+a.e10,f=this.e11+a.e11,h=this.e12+a.e12,l=this.e13+a.e13,g=this.e20+a.e20,k=this.e21+a.e21,m=this.e22+a.e22,n=this.e23+a.e23,q=this.e30+a.e30,p=this.e31+a.e31,r=this.e32+a.e32,v=this.e33+a.e33;this.e00+=a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Jg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e03-a.e03,c=this.e10-a.e10,f=this.e11-a.e11,h=this.e12-a.e12,l=this.e13-a.e13,g=this.e20-a.e20,k=this.e21-a.e21,m=this.e22-a.e22,n=this.e23-a.e23,q=this.e30-a.e30,p=this.e31-a.e31,r=this.e32-a.e32,v=this.e33-a.e33;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},He:function(a){var b=this.e01*a,e=this.e02*a,d=this.e03*a,c=this.e10*a,f=this.e11*a,h=this.e12*a,l=this.e13*a,g=this.e20*a,k=this.e21*a,m=this.e22*a,n=this.e23*a,q=this.e30*a,p=this.e31*a,r=this.e32*a,v=this.e33*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},be:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,d=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,n=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,q=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,p=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,r=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,v=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},fe:function(a,b,e){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},zc:function(a,b,e){return new M(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},de:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,k*this.e03+m*this.e13+n*this.e23,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22,q*this.e03+b*this.e13+d*this.e23,this.e30,this.e31,this.e32,this.e33)},qc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e03,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e13,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d,this.e23,this.e30*a+this.e31*k+this.e32*q,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*n+this.e32*d,this.e33)},Uh:function(a,b,e){return new M(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},Qa:function(a,b,e){return new M(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},ge:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e03*a,h=this.e10*b,l=this.e11*b,g=this.e12*b;b=this.e13*b;var k=this.e20*e,m=this.e21*e,n=this.e22*e;e=this.e23*e;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Cc:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e03,h=this.e10*a,l=this.e11*b,g=this.e12*e,k=this.e13,m=this.e20*a,n=this.e21*b,q=this.e22*e,p=this.e23,r=this.e30*a;b=this.e31*b;e=this.e32*e;var v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=b;this.e32=e;this.e33=v;return this},ee:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c,p=d*e*h+b*c,r=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;b=a*this.e02+l*this.e12+g*this.e22;e=a*this.e03+l*this.e13+g*this.e23;var c=k*this.e00+m*this.e10+n*this.e20,f=k*this.e01+m*this.e11+n*this.e21,h=k*this.e02+m*this.e12+n*this.e22,k=k*this.e03+m*this.e13+n*this.e23,m=q*this.e00+p*this.e10+r*this.e20,n=q*this.e01+p*this.e11+r*this.e21,v=q*this.e02+p*this.e12+r*this.e22,q=q*this.e03+p*this.e13+r*this.e23,p=this.e30,r=this.e31,t=this.e32,w=this.e33;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=b;this.e03=e;this.e10=c;this.e11=f;this.e12=h;this.e13=k;this.e20=m;this.e21=n;this.e22=v;this.e23=q;this.e30=p;this.e31=r;this.e32=t;this.e33=w;return this},rc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e03,f=this.e10*a+this.e11*k+this.e12*q,h=this.e10*l+this.e11*m+this.e12*b,r=this.e10*g+this.e11*n+this.e12*p,v=this.e13,t=this.e20*a+this.e21*k+this.e22*q,w=this.e20*l+this.e21*m+this.e22*b,B=this.e20*g+this.e21*n+this.e22*p,u=this.e23,D=this.e30*a+this.e31*k+this.e32*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*n+this.e32*p,n=this.e33;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e03=c;this.e10=f;this.e11=h;this.e12=r;this.e13=v;this.e20=t;this.e21=w;this.e22=B;this.e23=u;this.e30=D;this.e31=l;this.e32=g;this.e33=n;return this},Vh:function(a,b,e){var d=this.e01+a*this.e31,c=this.e02+a*this.e32,f=this.e03+a*this.e33,h=this.e10+b*this.e30,l=this.e11+b*this.e31,g=this.e12+b*this.e32;b=this.e13+b*this.e33;var k=this.e20+e*this.e30,m=this.e21+e*this.e31,n=this.e22+e*this.e32;e=this.e23+e*this.e33;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00+=a*this.e30;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},bb:function(a,b,e){var d=this.e01,c=this.e02,f=this.e00*a+this.e01*b+this.e02*e+this.e03,h=this.e10,l=this.e11,g=this.e12,k=this.e10*a+this.e11*b+this.e12*e+this.e13,m=this.e20,n=this.e21,q=this.e22,p=this.e20*a+this.e21*b+this.e22*e+this.e23,r=this.e30,v=this.e31,t=this.e32;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=v;this.e32=t;this.e33=a;return this},Mg:function(){return new M(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Ng:function(){var a=this.e10,b=this.e20,e=this.e30,d=this.e01,c=this.e11,f=this.e21,h=this.e31,l=this.e02,g=this.e12,k=this.e22,m=this.e32,n=this.e03,q=this.e13,p=this.e23,r=this.e33;this.e00=this.e00;this.e01=a;this.e02=b;this.e03=e;this.e10=d;this.e11=c;this.e12=f;this.e13=h;this.e20=l;this.e21=g;this.e22=k;this.e23=m;this.e30=n;this.e31=q;this.e32=p;this.e33=r;return this},Hc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,d=this.e21*this.e32-this.e22*this.e31,c=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*c+this.e13*d)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*c-this.e11*e+this.e13*a)-this.e03*(this.e10*d-this.e11*b+this.e12*a)},Lg:function(){return this.e00+this.e11+this.e22+this.e33},Jc:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,B=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);return new M(q*b,-t*b,l*b,-B*b,-p*b,n*b,-k*b,f*b,r*b,-g*b,m*b,-e*b,-v*b,h*b,-w*b,a*b)},cd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,B=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);this.e00=q*b;this.e01=-t*b;this.e02=l*b;this.e03=-B*b;this.e10=-p*b;this.e11=n*b;this.e12=-k*b;this.e13=f*b;this.e20=r*b;this.e21=-g*b;this.e22=m*b;this.e23=-e*b;this.e30=-v*b;this.e31=h*b;this.e32=-w*b;this.e33=a*b;return this},Lb:function(a,b,e,d,c,f,h,l,g){d=a-d;c=b-c;f=e-f;var k=1/Math.sqrt(d*d+c*c+f*f);d*=k;c*=k;f*=k;var m=l*f-g*c;g=g*d-h*f;h=h*c-l*d;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=c*h-f*g;var k=f*m-d*h,n=d*g-c*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=n;this.e13=-(l*a+k*b+n*e);this.e20=d;this.e21=c;this.e22=f;this.e23=-(d*a+c*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},ce:function(a,b,e,d){a=1/Math.tan(.5*a);d/=e-d;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},Th:function(a,b,e,d){d=1/(e-d);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e33=this.e32=this.e31=this.e30=0;return this},Kg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},Ic:function(a){var b=a.e01,e=a.e02,d=a.e10,c=a.e11,f=a.e12,h=a.e20,l=a.e21,g=a.e22;this.e00=a.e00;this.e01=b;this.e02=e;this.e03=0;this.e10=d;this.e11=c;this.e12=f;this.e13=0;this.e20=h;this.e21=l;this.e22=g;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},tb:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new M(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"},ra:M};na.aa=!0;na.abs=function(a){return 0<a?a:-a};na.sin=function(a){return Math.sin(a)};na.cos=function(a){return Math.cos(a)};na.tan=function(a){return Math.tan(a)};na.asin=function(a){return Math.asin(a)};na.acos=function(a){return Math.acos(a)};na.atan=function(a){return Math.atan(a)};na.ge=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};na.fe=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};na.atan2=function(a,b){return Math.atan2(a,b)};na.sqrt=function(a){return Math.sqrt(a)};na.zc=function(a,b,e){return a<b?b:a>e?e:a};na.be=function(){return Math.random()};na.ce=function(a,b){return a+Math.random()*(b-a)};na.ee=function(a,b){return new t(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};na.de=function(){return new t(-1+2*Math.random(),-1+2*Math.random(),-1+2*Math.random())};Mb.aa=!0;Mb.prototype={zc:function(){return 0==this.c?new t:this.b[--this.c]},mc:function(){return 0==this.qb?new O:this.ob[--this.qb]},qc:function(){return 0==this.Uf?new M:this.zf[--this.Uf]},rc:function(){return 0==this.$d?new ga:this.Td[--this.$d]},Qa:function(a,b,e,d){if(null!=a){a.Z();if(this.c==this.b.length){for(var c=Array(this.c<<1),f=0,h=this.c;f<h;){var l=f++;c[l]=this.b[l];this.b[l]=null}this.b=c}this.b[this.c++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.qb==this.ob.length){a=Array(this.qb<<1);c=0;for(f=this.qb;c<f;)h=c++,a[h]=this.ob[h],this.ob[h]=null;this.ob=a}this.ob[this.qb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.Uf==this.zf.length){b=Array(this.Uf<<1);a=0;for(c=this.Uf;a<c;)f=a++,b[f]=this.zf[f],this.zf[f]=null;this.zf=b}this.zf[this.Uf++]=e}if(null!=d){d.x=0;d.y=0;d.z=0;d.w=1;if(this.$d==this.Td.length){e=Array(this.$d<<1);b=0;for(a=this.$d;b<a;)c=b++,e[c]=this.Td[c],this.Td[c]=null;this.Td=e}this.Td[this.$d++]=d}},lc:function(a){a.Z();if(this.c==this.b.length){for(var b=Array(this.c<<1),e=0,d=this.c;e<d;){var c=e++;b[c]=this.b[c];this.b[c]=null}this.b=b}this.b[this.c++]=a},bb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.qb==this.ob.length){for(var b=Array(this.qb<<1),e=0,d=this.qb;e<d;){var c=e++;b[c]=this.ob[c];this.ob[c]=null}this.ob=b}this.ob[this.qb++]=a},tb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.Uf==this.zf.length){for(var b=Array(this.Uf<<1),e=0,d=this.Uf;e<d;){var c=e++;b[c]=this.zf[c];this.zf[c]=null}this.zf=b}this.zf[this.Uf++]=a},Lb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.$d==this.Td.length){for(var b=Array(this.$d<<1),e=0,d=this.$d;e<d;){var c=e++;b[c]=this.Td[c];this.Td[c]=null}this.Td=b}this.Td[this.$d++]=a},ra:Mb};ga.aa=!0;ga.prototype={Mf:function(){this.z=this.y=this.x=0;this.w=1;return this},Aa:function(a,b,e,d){this.x=a;this.y=b;this.z=e;this.w=d;return this},Qa:function(a){return new ga(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Cc:function(a){return new ga(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},rc:function(a){return new ga(this.x*a,this.y*a,this.z*a,this.w*a)},bb:function(a){var b=this.y+a.y,e=this.z+a.z,d=this.w+a.w;this.x+=a.x;this.y=b;this.z=e;this.w=d;return this},Hc:function(a){var b=this.y-a.y,e=this.z-a.z,d=this.w-a.w;this.x=this.x-a.x;this.y=b;this.z=e;this.w=d;return this},zc:function(a){var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},tb:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},qc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new ga(this.x*a,this.y*a,this.z*a,this.w*a)},mc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},Ic:function(a,b){var e=a.x,d=a.y;a=a.z;var c=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*c+d*f+a*b)));if(!this.w)return c=e*e,f=d*d,b=a*a,c<f?c<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-d*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+c),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h),this;h=.5/this.w;this.x=(d*b-a*f)*h;this.y=(a*c-e*b)*h;this.z=(e*f-d*c)*h;return this},Jc:function(a,b){var e,d,c,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,d=-a.y,c=-a.z,a=-a.w):(e=a.x,d=a.y,c=a.z,a=a.w);if(.999999<f)return e=new ga(this.x+(e-this.x)*b,this.y+(d-this.y)*b,this.z+(c-this.z)*b,this.w+(a-this.w)*b),d=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<d&&(d=1/d),c=e.y*d,a=e.z*d,f=e.w*d,e.x=e.x*d,e.y=c,e.z=a,e.w=f,e;b*=Math.acos(f);e-=this.x*f;d-=this.y*f;c-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+d*d+c*c+a*a),h=Math.sin(b);b=Math.cos(b);return new ga(this.x*b+e*f*h,this.y*b+d*f*h,this.z*b+c*f*h,this.w*b+a*f*h)},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new ga(this.x,this.y,this.z,this.w)},Lb:function(a){var b=a.e00,e=a.e11,d=a.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},cd:function(){var a=new O,b=this.x,e=this.y,d=this.z,c=this.w,f=2*b,h=2*e,l=2*d,g=b*f,k=e*h,d=d*l,m=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;a.e00=1-k-d;a.e01=m-c;a.e02=b+h;a.e10=m+c;a.e11=1-g-d;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"},ra:ga};cc.aa=!0;cc.prototype={Vm:function(){if(null!=this.xh){var a=this.Lm;this.xh.Yl(a,this.uc.Jb,this.vc.Jb,this.uc.a,this.vc.a,this.Li);(this.ug=0<a.numPoints)?(this.Ka.Jm(a.normal),this.Ke.Ec=a.cm()>F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?F.alternativeContactPositionCorrectionAlgorithm:F.defaultContactPositionCorrectionAlgorithm,a.incremental?this.Ll.Bn(a,this.C.a,this.D.a):this.Ll.Pn(a,this.C.a,this.D.a)):this.Ka.Je()}},Ck:function(){var a=this.uc.Cj,b=this.vc.Cj;a==b&&(b=null);null!=a&&a.$e(this);null!=b&&b.$e(this)},lc:function(){return this.uc},mc:function(){return this.vc},Zj:function(){return this.ug},bb:function(){return this.Ka},Qa:function(){return this.Ke},Lb:function(){return this.ja},tb:function(){return this.M},ra:cc};Gc.aa=!0;Gc.prototype={Qa:function(){return this.Ud},tb:function(){return this.Oc},Lb:function(){return this.ja},bb:function(){return this.M},ra:Gc};Qc.aa=!0;Qc.prototype={bn:function(){for(var a=this.ec.Yd;null!=a;){for(var b=a.M;;){var e;if(a.qg.sc==a.rg.sc)throw Error("assertion error: pp._p1._id != pp._p2._id is false");a.qg.sc<a.rg.sc?(e=a.qg.userData,a=a.rg.userData):(e=a.rg.userData,a=a.qg.userData);if(!this.Kn(e,a))break;var d=e.Wb,c=a.Wb,f;f=d.se<c.se?d.Nb:c.Nb;for(var d=e.sc,c=a.sc,h=!1;null!=f;){var l=f.M;f=f.Ud;if(f.uc.sc==d&&f.vc.sc==c){h=f.Hj=!0;break}f=l}h||(d=this.bg,null!=d?(this.bg=d.M,d.M=null):d=new cc,null==this.vd?this.vd=d:(this.qe.M=d,d.ja=this.qe),this.qe=d,d.Hj=!0,c=this.Km.Ib[e.Jb.Xb][a.Jb.Xb],d.uc=e,d.vc=a,d.C=e.Wb,d.D=a.Wb,d.ug=!1,null==d.C.Nb?d.C.Nb=d.rb:(d.C.fc.M=d.rb,d.rb.ja=d.C.fc),d.C.fc=d.rb,null==d.D.Nb?d.D.Nb=d.sb:(d.D.fc.M=d.sb,d.sb.ja=d.D.fc),d.D.fc=d.sb,d.C.se++,d.D.se++,d.rb.Oc=d.D,d.sb.Oc=d.C,d.rb.Ud=d,d.sb.Ud=d,d.xh=c,d=d.Ke,d.uc=e,d.vc=a,d.C=d.uc.Wb,d.D=d.vc.Wb,d.aj=d.C.a,d.bj=d.D.a,this.ji++);break}a=b}},cn:function(){for(var a=this.ec.Gj,b=this.vd;null!=b;){for(var e=b.M;;){if(b.Hj){b.Hj=!1;b.Qj=!1;break}if(!a){var d=b.ja,c=b.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ja);b.M=null;b.ja=null;d=b.rb.ja;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.rb==b.C.Nb&&(b.C.Nb=b.C.Nb.M);b.rb==b.C.fc&&(b.C.fc=b.C.fc.ja);b.rb.M=null;b.rb.ja=null;d=b.sb.ja;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.sb==b.D.Nb&&(b.D.Nb=b.D.Nb.M);b.sb==b.D.fc&&(b.D.fc=b.D.fc.ja);b.sb.M=null;b.sb.ja=null;b.C.se--;b.D.se--;b.rb.Oc=null;b.sb.Oc=null;b.rb.Ud=null;b.sb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ka.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}var c=b.uc,d=b.vc,f=c.Wb,h=d.Wb,h=!h.Gb&&1!=h.Xb;if((f.Gb||1==f.Xb)&&!h){b.Qj=!0;break}f=c.u;h=d.u;c=c.Oa;d=d.Oa;if(!(c.J<d.G&&c.G>d.J&&c.K<d.H&&c.H>d.K&&c.L<d.I&&c.I>d.L)){d=b.ja;c=b.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ja);b.M=null;b.ja=null;d=b.rb.ja;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.rb==b.C.Nb&&(b.C.Nb=b.C.Nb.M);b.rb==b.C.fc&&(b.C.fc=b.C.fc.ja);b.rb.M=null;b.rb.ja=null;d=b.sb.ja;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.sb==b.D.Nb&&(b.D.Nb=b.D.Nb.M);b.sb==b.D.fc&&(b.D.fc=b.D.fc.ja);b.sb.M=null;b.sb.ja=null;b.C.se--;b.D.se--;b.rb.Oc=null;b.sb.Oc=null;b.rb.Ud=null;b.sb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ka.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}b.Qj=!(f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa&&f.pa<h.ma&&f.ma>h.pa);break}b=e}},Kn:function(a,b){var e=a.Wb,d=b.Wb;if(e==d||0!=e.Xb&&0!=d.Xb||!(a.Aj&b.Bj&&b.Aj&a.Bj))return!1;e.$g<d.$g?(a=e.re,e=d):a=d.re;for(;null!=a;){if(a.Oc==e&&!a.wk.gk)return!1;a=a.M}return!0},Ok:function(){this.ec.si();this.bn();this.cn()},Ck:function(){for(var a=this.vd;null!=a;){var b=a.M;a.ug&&a.Ck();a=b}},bb:function(){return this.ji},Qa:function(){return this.vd},ra:Qc};Dk.aa=!0;Dk.prototype={Je:function(){for(;0<this.vf;)this.xf[--this.vf]=null;for(;0<this.wf;)this.yf[--this.wf]=null;for(;0<this.ih;)this.ph[--this.ih]=null;for(;0<this.hh;)this.oh[--this.hh]=null},fk:function(a){if(this.vf==this.xf.length){for(var b=Array(this.vf<<1),e=0,d=this.vf;e<d;){var c=e++;b[c]=this.xf[c];this.xf[c]=null}this.xf=b}a.Cf=!0;this.xf[this.vf++]=a},yl:function(a,b){if(this.wf==this.yf.length){for(var e=Array(this.wf<<1),d=0,c=this.wf;d<c;){var f=d++;e[f]=this.yf[f];this.yf[f]=null}this.yf=e}a.Cf=!0;this.yf[this.wf++]=a;if(b==ic.SPLIT_IMPULSE){if(this.ih==this.ph.length){e=Array(this.ih<<1);d=0;for(c=this.ih;d<c;)f=d++,e[f]=this.ph[f],this.ph[f]=null;this.ph=e}this.ph[this.ih++]=a}if(b==ic.NGS){if(this.hh==this.oh.length){b=Array(this.hh<<1);e=0;for(d=this.hh;e<d;)c=e++,b[c]=this.oh[c],this.oh[c]=null;this.oh=b}this.oh[this.hh++]=a}},Um:function(a,b){a=a.dt;var e=b.qa,d=b.a;e.v=d.v;e.A=d.A;e.B=d.B;e.o=d.o;e.f=d.f;e.h=d.h;e.i=d.i;e.m=d.m;e.j=d.j;e.l=d.l;e.g=d.g;e.s=d.s;b.hk&&b.eb*b.eb+b.fb*b.fb+b.gb*b.gb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&b.ib*b.ib+b.jb*b.jb+b.kb*b.kb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?(b.yb+=a,b.yb>F.sleepingTimeThreshold&&(b.Gb=!0,b.yb=0)):b.yb=0;if(!b.Gb){if(0==b.Xb){var e=a*b.Il,d=e*e,e=1/(1+e+d*(.5+.16666666666666666*e+.041666666666666664*d)),d=a*b.Al,c=d*d,d=1/(1+d+c*(.5+.16666666666666666*d+.041666666666666664*c)),f,h,l,c=this.dm*b.Ug;f=this.em*b.Ug;h=this.fm*b.Ug;c+=b.yh*b.$a;f+=b.zh*b.$a;h+=b.Ah*b.$a;var g,k;g=b.P*b.kf+b.R*b.lf+b.S*b.mf;k=b.T*b.kf+b.U*b.lf+b.V*b.mf;l=b.W*b.kf+b.X*b.lf+b.Y*b.mf;b.eb+=c*a;b.fb+=f*a;b.gb+=h*a;b.eb*=e;b.fb*=e;b.gb*=e;b.ib+=g*a;b.jb+=k*a;b.kb+=l*a;b.ib*=d;b.jb*=d;b.kb*=d}b.Hl(a);for(a=b.Ac;null!=a;){e=a.M;d=a.qa;f=a.ia;var c=b.qa,m,n,q,p,r;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;d=a.a;f=a.ia;c=b.a;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;a.Jb.Mb(a.u,a.qa);d=a.u.na;c=a.u.oa;f=a.u.pa;h=a.u.ka;l=a.u.la;g=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=f<a.u.pa?f:a.u.pa;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;a.u.ma=g>a.u.ma?g:a.u.ma;null!=a.Oa&&(d=a.a.v-a.qa.v,c=a.a.A-a.qa.A,f=a.a.B-a.qa.B,h=a.nc,h.x=d,h.y=c,h.z=f,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=e}}},Tm:function(a,b,e){for(var d=a.dt,c=!0,f=0,h=this.vf;f<h;){var l=f++,g=this.xf[l],k=g.qa,m=g.a;k.v=m.v;k.A=m.A;k.B=m.B;k.o=m.o;k.f=m.f;k.h=m.h;k.i=m.i;k.m=m.m;k.j=m.j;k.l=m.l;k.g=m.g;k.s=m.s;g.Gb=!1;g.hk&&g.eb*g.eb+g.fb*g.fb+g.gb*g.gb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&g.ib*g.ib+g.jb*g.jb+g.kb*g.kb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?g.yb+=d:g.yb=0;g.yb<F.sleepingTimeThreshold&&(c=!1);if(0==g.Xb){var n=d*g.Il,q=n*n,p=1/(1+n+q*(.5+.16666666666666666*n+.041666666666666664*q)),r=d*g.Al,v=r*r,t=1/(1+r+v*(.5+.16666666666666666*r+.041666666666666664*v)),w,B,u,D,V,A;w=this.dm*g.Ug;B=this.em*g.Ug;u=this.fm*g.Ug;w+=g.yh*g.$a;B+=g.zh*g.$a;u+=g.Ah*g.$a;var E,x,Bb;E=g.P*g.kf+g.R*g.lf+g.S*g.mf;x=g.T*g.kf+g.U*g.lf+g.V*g.mf;Bb=g.W*g.kf+g.X*g.lf+g.Y*g.mf;D=E;V=x;A=Bb;g.eb+=w*d;g.fb+=B*d;g.gb+=u*d;g.eb*=p;g.fb*=p;g.gb*=p;g.ib+=D*d;g.jb+=V*d;g.kb+=A*d;g.ib*=t;g.jb*=t;g.kb*=t}}if(c)for(var N=0,I=this.vf;N<I;){var C=N++,L=this.xf[C];L.Gb=!0;L.yb=0}else{for(var O=0,ha=this.wf;O<ha;){var M=O++;this.yf[M].jh(a)}for(var Ub=0,na=this.wf;Ub<na;){var ka=Ub++;this.yf[ka].sh(a)}for(var bb=0;bb<b;){bb++;for(var U=0,R=this.wf;U<R;){var lc=U++;this.yf[lc].nh()}}for(var Na=0,Ra=this.wf;Na<Ra;){var yc=Na++;this.yf[yc].vi(a)}for(var Pa=0,Ba=this.vf;Pa<Ba;){var Hb=Pa++;this.xf[Hb].Hl(d)}for(var H=0,Qa=this.ih;H<Qa;){var ba=H++;this.ph[ba].Gg(a)}for(var Q=0;Q<e;){Q++;for(var P=0,ya=this.ih;P<ya;){var ta=P++;this.ph[ta].mh()}}for(var W=0,pa=this.vf;W<pa;){var y=W++;this.xf[y].Rm()}for(var Ia=0,ca=this.hh;Ia<ca;){var Ea=Ia++;this.oh[Ea].Gg(a)}for(var za=0;za<e;){za++;for(var Fa=0,Sa=this.hh;Fa<Sa;){var la=Fa++;this.oh[la].lh(a)}}for(var Z=0,Ga=this.wf;Z<Ga;){var ra=Z++;this.yf[ra].$e()}for(var va=0,J=this.vf;va<J;)for(var La=va++,Xa=this.xf[La],S=Xa.Ac;null!=S;){var Ya=S.M,T=S.qa,K=S.ia,ia=Xa.qa,gb,da,Hc,sa,fb,jb,Za,ma,oa;gb=ia.o*K.o+ia.f*K.i+ia.h*K.l;da=ia.o*K.f+ia.f*K.m+ia.h*K.g;Hc=ia.o*K.h+ia.f*K.j+ia.h*K.s;sa=ia.i*K.o+ia.m*K.i+ia.j*K.l;fb=ia.i*K.f+ia.m*K.m+ia.j*K.g;jb=ia.i*K.h+ia.m*K.j+ia.j*K.s;Za=ia.l*K.o+ia.g*K.i+ia.s*K.l;ma=ia.l*K.f+ia.g*K.m+ia.s*K.g;oa=ia.l*K.h+ia.g*K.j+ia.s*K.s;T.o=gb;T.f=da;T.h=Hc;T.i=sa;T.m=fb;T.j=jb;T.l=Za;T.g=ma;T.s=oa;var Ja,Ha,ob;Ja=ia.o*K.v+ia.f*K.A+ia.h*K.B;Ha=ia.i*K.v+ia.m*K.A+ia.j*K.B;ob=ia.l*K.v+ia.g*K.A+ia.s*K.B;T.v=Ja;T.A=Ha;T.B=ob;T.v+=ia.v;T.A+=ia.A;T.B+=ia.B;var fa=S.a,ea=S.ia,ja=Xa.a,cb,Aa,sb,Ua,qb,rb,tb,Va,xb;cb=ja.o*ea.o+ja.f*ea.i+ja.h*ea.l;Aa=ja.o*ea.f+ja.f*ea.m+ja.h*ea.g;sb=ja.o*ea.h+ja.f*ea.j+ja.h*ea.s;Ua=ja.i*ea.o+ja.m*ea.i+ja.j*ea.l;qb=ja.i*ea.f+ja.m*ea.m+ja.j*ea.g;rb=ja.i*ea.h+ja.m*ea.j+ja.j*ea.s;tb=ja.l*ea.o+ja.g*ea.i+ja.s*ea.l;Va=ja.l*ea.f+ja.g*ea.m+ja.s*ea.g;xb=ja.l*ea.h+ja.g*ea.j+ja.s*ea.s;fa.o=cb;fa.f=Aa;fa.h=sb;fa.i=Ua;fa.m=qb;fa.j=rb;fa.l=tb;fa.g=Va;fa.s=xb;var rc,$a,ua;rc=ja.o*ea.v+ja.f*ea.A+ja.h*ea.B;$a=ja.i*ea.v+ja.m*ea.A+ja.j*ea.B;ua=ja.l*ea.v+ja.g*ea.A+ja.s*ea.B;fa.v=rc;fa.A=$a;fa.B=ua;fa.v+=ja.v;fa.A+=ja.A;fa.B+=ja.B;var Yb,G,pb,db,oc,ab;S.Jb.Mb(S.u,S.qa);Yb=S.u.na;G=S.u.oa;pb=S.u.pa;db=S.u.ka;oc=S.u.la;ab=S.u.ma;S.Jb.Mb(S.u,S.a);S.u.na=Yb<S.u.na?Yb:S.u.na;S.u.oa=G<S.u.oa?G:S.u.oa;S.u.pa=pb<S.u.pa?pb:S.u.pa;S.u.ka=db>S.u.ka?db:S.u.ka;S.u.la=oc>S.u.la?oc:S.u.la;S.u.ma=ab>S.u.ma?ab:S.u.ma;if(null!=S.Oa){var hb,z,Db;hb=S.a.v-S.qa.v;z=S.a.A-S.qa.A;Db=S.a.B-S.qa.B;var ga=S.nc;ga.x=hb;ga.y=z;ga.z=Db;S.Wb.kc.ec.sd(S.Oa,S.u,S.nc)}S=Ya}}},ra:Dk};lj.aa=!0;lj.prototype={ra:lj};qa.aa=!0;qa.prototype={Ok:function(){var a=(new Date).getTime()/1E3;this.wh.Ok();cd.broadPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a);for(var a=(new Date).getTime()/1E3,b=this.wh.vd;null!=b;){var e=b.M;b.Qj||b.Vm();b=e}cd.narrowPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a)},Sm:function(){var a=(new Date).getTime()/1E3;if(F.disableSleeping)for(var b=this.jf;null!=b;){var e=b.M;b.Gb=!1;b.yb=0;b=e}if(this.dh.length<this.Vi){for(b=this.dh.length<<1;b<this.Vi;)b<<=1;this.dh=Array(b)}this.Mj=0;b=this.lg;e=this.lk;b.dm=e.x;b.em=e.y;b.fm=e.z;b=this.jf;for(this.hf=0;null!=b;){for(e=b.M;!b.Cf&&!b.Gb&&1!=b.Xb;){if(0==b.se&&0==b.$g){this.lg.Um(this.Dh,b);this.Mj++;break}this.Xm(b);this.lg.Tm(this.Dh,this.Bk,this.Ak);this.lg.Je();this.Mj++;break}b=e}this.wh.Ck();for(b=this.jf;null!=b;)e=b.M,b.Cf=!1,b=e;for(b=this.jf;null!=b;)e=b.M,b.yh=0,b.zh=0,b.Ah=0,b.kf=0,b.lf=0,b.mf=0,b=e;for(;0<this.hf;)this.Qe[--this.hf].Cf=!1,this.Qe[this.hf]=null;cd.dynamicsTime=1E3*((new Date).getTime()/1E3-a)},Xm:function(a){var b=1;this.lg.fk(a);for(this.dh[0]=a;0<b;)if(a=this.dh[--b],this.dh[b]=null,1!=a.Xb){for(var e=a.Nb;null!=e;){var d=e.M,c=e.Ud.Ke,f=e.Ud.Ke.Rj;if(c.Zj()&&!f.Cf){if(this.Qe.length==this.hf){for(var h=Array(this.hf<<1),l=0,g=this.hf;l<g;){var k=l++;h[k]=this.Qe[k];this.Qe[k]=null}this.Qe=h}this.Qe[this.hf++]=f;this.lg.yl(f,c.Ec);e=e.Oc;e.Cf||(this.lg.fk(e),this.dh[b++]=e)}e=d}for(d=a.re;null!=d;){a=d.M;e=d.wk;c=e.Rj;if(!c.Cf){if(this.Qe.length==this.hf){f=Array(this.hf<<1);h=0;for(l=this.hf;h<l;)g=h++,f[g]=this.Qe[g],this.Qe[g]=null;this.Qe=f}this.Qe[this.hf++]=c;this.lg.yl(c,e.Ec);d=d.Oc;d.Cf||(this.lg.fk(d),this.dh[b++]=d)}d=a}}},Mm:function(a,b){a.drawBvh&&this.kk(a,b.Pb,0,a.style.bvhNodeColor)},kk:function(a,b,e,d){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var c=this.Ha,f=0==c.c?new t:c.b[--c.c],c=this.Ha,c=0==c.c?new t:c.b[--c.c];f.x=b.J;f.y=b.K;f.z=b.L;c.x=b.G;c.y=b.H;c.z=b.I;a.Pk(f,c,d);var h=this.Ha;if(null!=f){f.Z();if(h.c==h.b.length){for(var l=Array(h.c<<1),g=0,k=h.c;g<k;){var m=g++;l[m]=h.b[m];h.b[m]=null}h.b=l}h.b[h.c++]=f}f=this.Ha;if(null!=c){c.Z();if(f.c==f.b.length){h=Array(f.c<<1);l=0;for(g=f.c;l<g;)k=l++,h[k]=f.b[k],f.b[k]=null;f.b=h}f.b[f.c++]=c}}this.kk(a,b.F[0],e+1,d);this.kk(a,b.F[1],e+1,d)}},Pm:function(a){for(var b=a.style,e=this.jf;null!=e;){var d=e.M,c=null,f=0==e.Xb;f||(c=2==e.Xb?b.kinematicShapeColor:b.staticShapeColor);for(var h=e.Ac;null!=h;){var l=h.M;f&&(c=h.sc&1?e.Gb?b.sleepingShapeColor2:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Gb?b.sleepingShapeColor1:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var g=h.Jb,k=h.a;switch(g.Xb){case 0:a.Am(k,g.ab,c);break;case 1:var m=g,n=this.Ha,q=0==n.c?new t:n.b[--n.c],p=q;p.x=m.Le;p.y=m.Me;p.z=m.Ne;a.Pl(k,q,c);var r=this.Ha;if(null!=q){q.Z();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var B=aa++;v[B]=r.b[B];r.b[B]=null}r.b=v}r.b[r.c++]=q}break;case 2:var u=g;a.Wl(k,u.ab,u.Hb,c);break;case 3:var D=g;a.Tl(k,D.ab,D.Hb,c);break;case 4:var V=g;a.Rl(k,V.ab,V.Hb,c);break;case 5:var A=g,E=A.Ae,x=this.Ha,Bb=0==x.c?new t:x.b[--x.c],N=this.Ha,I=0==N.c?new t:N.b[--N.c],C=this.Ha,L=0==C.c?new t:C.b[--C.c],M=this.Ha,ha=0==M.c?new t:M.b[--M.c],ga=this.Ha,Ub=0==ga.c?new t:ga.b[--ga.c],na=this.Ha,ka=0==na.c?new t:na.b[--na.c],bb=this.Ha,U=0==bb.qb?new O:bb.ob[--bb.qb],R=this.Ha,lc=0==R.c?new t:R.b[--R.c],Na=U;Na.e00=k.o;Na.e01=k.f;Na.e02=k.h;Na.e10=k.i;Na.e11=k.m;Na.e12=k.j;Na.e20=k.l;Na.e21=k.g;Na.e22=k.s;var Ra=lc;Ra.x=k.v;Ra.y=k.A;Ra.z=k.B;for(var yc=0,Pa=E;yc<Pa;){var Ba=yc++,Hb=A.tg[Ba],H=A.zb[Ba];Hb.x=H.x;Hb.y=H.y;Hb.z=H.z;var Qa=Hb,ba=Qa.x*U.e10+Qa.y*U.e11+Qa.z*U.e12,Q=Qa.x*U.e20+Qa.y*U.e21+Qa.z*U.e22;Qa.x=Qa.x*U.e00+Qa.y*U.e01+Qa.z*U.e02;Qa.y=ba;Qa.z=Q;var P=Qa,ya=P.y+lc.y,ta=P.z+lc.z;P.x=P.x+lc.x;P.y=ya;P.z=ta}if(30<E)for(var W=0,pa=E;W<pa;){var y=W++,Ia=A.tg[y];Bb.x=Ia.x;Bb.y=Ia.y;Bb.z=Ia.z;var ca=A.tg[(y+1)%E];I.x=ca.x;I.y=ca.y;I.z=ca.z}else if(this.Xh.wireframe||10<E)for(var Ea=0,za=E;Ea<za;){var Fa=Ea++,Sa=A.tg[Fa];Bb.x=Sa.x;Bb.y=Sa.y;Bb.z=Sa.z;for(var la=0,Z=Fa;la<Z;){var Ga=la++,ra=A.tg[Ga];I.x=ra.x;I.y=ra.y;I.z=ra.z}}else for(var va=0,J=E;va<J;){var La=va++,Xa=A.tg[La];Bb.x=Xa.x;Bb.y=Xa.y;Bb.z=Xa.z;for(var S=0,Ya=La;S<Ya;){var T=S++,K=A.tg[T];I.x=K.x;I.y=K.y;I.z=K.z;for(var ia=0,gb=T;ia<gb;){var da=ia++,Hc=A.tg[da];L.x=Hc.x;L.y=Hc.y;L.z=Hc.z;ha.x=I.x;ha.y=I.y;ha.z=I.z;var sa=ha,fb=sa.y-Bb.y,jb=sa.z-Bb.z;sa.x=sa.x-Bb.x;sa.y=fb;sa.z=jb;Ub.x=L.x;Ub.y=L.y;Ub.z=L.z;var Za=Ub,ma=Za.y-Bb.y,oa=Za.z-Bb.z;Za.x=Za.x-Bb.x;Za.y=ma;Za.z=oa;ka.x=ha.x;ka.y=ha.y;ka.z=ha.z;var Ja=ka,Ha=Ja.z*Ub.x-Ja.x*Ub.z,ob=Ja.x*Ub.y-Ja.y*Ub.x;Ja.x=Ja.y*Ub.z-Ja.z*Ub.y;Ja.y=Ha;Ja.z=ob;var fa=Ja,ea=Math.sqrt(fa.x*fa.x+fa.y*fa.y+fa.z*fa.z);0<ea&&(ea=1/ea);var ja=fa.y*ea,cb=fa.z*ea;fa.x=fa.x*ea;fa.y=ja;fa.z=cb;var Aa=-ka.y,sb=-ka.z;ka.x=-ka.x;ka.y=Aa;ka.z=sb}}}var Ua=this.Ha;if(null!=Bb){Bb.Z();if(Ua.c==Ua.b.length){for(var qb=Array(Ua.c<<1),rb=0,tb=Ua.c;rb<tb;){var Va=rb++;qb[Va]=Ua.b[Va];Ua.b[Va]=null}Ua.b=qb}Ua.b[Ua.c++]=Bb}var xb=this.Ha;if(null!=I){I.Z();if(xb.c==xb.b.length){for(var rc=Array(xb.c<<1),$a=0,ua=xb.c;$a<ua;){var Yb=$a++;rc[Yb]=xb.b[Yb];xb.b[Yb]=null}xb.b=rc}xb.b[xb.c++]=I}var G=this.Ha;if(null!=L){L.Z();if(G.c==G.b.length){for(var pb=Array(G.c<<1),db=0,oc=G.c;db<oc;){var ab=db++;pb[ab]=G.b[ab];G.b[ab]=null}G.b=pb}G.b[G.c++]=L}var hb=this.Ha;if(null!=ha){ha.Z();if(hb.c==hb.b.length){for(var z=Array(hb.c<<1),Db=0,qa=hb.c;Db<qa;){var Tc=Db++;z[Tc]=hb.b[Tc];hb.b[Tc]=null}hb.b=z}hb.b[hb.c++]=ha}var Fb=this.Ha;if(null!=Ub){Ub.Z();if(Fb.c==Fb.b.length){for(var Oa=Array(Fb.c<<1),nb=0,wb=Fb.c;nb<wb;){var yb=nb++;Oa[yb]=Fb.b[yb];Fb.b[yb]=null}Fb.b=Oa}Fb.b[Fb.c++]=Ub}var eb=this.Ha;if(null!=ka){ka.Z();if(eb.c==eb.b.length){for(var Y=Array(eb.c<<1),Ma=0,kb=eb.c;Ma<kb;){var Ta=Ma++;Y[Ta]=eb.b[Ta];eb.b[Ta]=null}eb.b=Y}eb.b[eb.c++]=ka}var ib=this.Ha;if(null!=U){U.e00=1;U.e01=0;U.e02=0;U.e10=0;U.e11=1;U.e12=0;U.e20=0;U.e21=0;U.e22=1;if(ib.qb==ib.ob.length){for(var Ka=Array(ib.qb<<1),Kb=0,Da=ib.qb;Kb<Da;){var X=Kb++;Ka[X]=ib.ob[X];ib.ob[X]=null}ib.ob=Ka}ib.ob[ib.qb++]=U}var Cb=this.Ha;if(null!=lc){lc.Z();if(Cb.c==Cb.b.length){for(var hd=Array(Cb.c<<1),Rc=0,wa=Cb.c;Rc<wa;){var ec=Rc++;hd[ec]=Cb.b[ec];Cb.b[ec]=null}Cb.b=hd}Cb.b[Cb.c++]=lc}}}if(a.drawAabbs){var qd=h.u,Ca=b.aabbColor,xa=this.Ha,xc=0==xa.c?new t:xa.b[--xa.c],mb=this.Ha,jc=0==mb.c?new t:mb.b[--mb.c],pc=xc;pc.x=qd.na;pc.y=qd.oa;pc.z=qd.pa;var kc=jc;kc.x=qd.ka;kc.y=qd.la;kc.z=qd.ma;a.Pk(xc,jc,Ca);var ac=this.Ha;if(null!=xc){xc.Z();if(ac.c==ac.b.length){for(var Vb=Array(ac.c<<1),Wb=0,Qb=ac.c;Wb<Qb;){var fc=Wb++;Vb[fc]=ac.b[fc];ac.b[fc]=null}ac.b=Vb}ac.b[ac.c++]=xc}var Rb=this.Ha;if(null!=jc){jc.Z();if(Rb.c==Rb.b.length){for(var Ob=Array(Rb.c<<1),Xb=0,gc=Rb.c;Xb<gc;){var Ib=Xb++;Ob[Ib]=Rb.b[Ib];Rb.b[Ib]=null}Rb.b=Ob}Rb.b[Rb.c++]=jc}}h=l}e=d}},Nm:function(a){if(a.drawPairs||a.drawContacts)for(var b=this.wh.vd;null!=b;){var e=b.M;if(a.drawPairs){var d=this.Ha,c=0==d.c?new t:d.b[--d.c],f=this.Ha,h=0==f.c?new t:f.b[--f.c],l=c;l.x=b.uc.a.v;l.y=b.uc.a.A;l.z=b.uc.a.B;var g=h;g.x=b.vc.a.v;g.y=b.vc.a.A;g.z=b.vc.a.B;var k=this.Ha;if(null!=c){c.Z();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=c}var r=this.Ha;if(null!=h){h.Z();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var B=aa++;v[B]=r.b[B];r.b[B]=null}r.b=v}r.b[r.c++]=h}}if(a.drawContacts)for(var u=b.Ke,D=b.Ke.Ka.tc,V=0,A=b.Ke.Ka.Xd;V<A;){var E=V++,x=D[E],Bb=a.style,N=this.Ha,I=0==N.c?new t:N.b[--N.c],F=this.Ha,C=0==F.c?new t:F.b[--F.c],L=this.Ha,ha=0==L.c?new t:L.b[--L.c],O=this.Ha,M=0==O.c?new t:O.b[--O.c],ga=this.Ha,ka=0==ga.c?new t:ga.b[--ga.c],bb=I;bb.x=x.Fd;bb.y=x.Gd;bb.z=x.Hd;var U=C;U.x=x.Id;U.y=x.Jd;U.z=x.Kd;var R=ha;R.x=u.Ka.mg;R.y=u.Ka.ng;R.z=u.Ka.og;var lc=M;lc.x=u.Ka.Xi;lc.y=u.Ka.Yi;lc.z=u.Ka.Zi;var Na=ka;Na.x=u.Ka.Gi;Na.y=u.Ka.Hi;Na.z=u.Ka.Ii;C.x=I.x;C.y=I.y;C.z=I.z;var Ra=C,yc=Bb.contactNormalLength,Pa=Ra.y+ha.y*yc,Ba=Ra.z+ha.z*yc;Ra.x=Ra.x+ha.x*yc;Ra.y=Pa;Ra.z=Ba;if(a.drawContactBases){C.x=I.x;C.y=I.y;C.z=I.z;var Hb=C,H=Bb.contactTangentLength,Qa=Hb.y+M.y*H,ba=Hb.z+M.z*H;Hb.x=Hb.x+M.x*H;Hb.y=Qa;Hb.z=ba;C.x=I.x;C.y=I.y;C.z=I.z;var Q=C,P=Bb.contactBinormalLength,ya=Q.y+ka.y*P,ta=Q.z+ka.z*P;Q.x=Q.x+ka.x*P;Q.y=ya;Q.z=ta}var W=this.Ha;if(null!=I){I.Z();if(W.c==W.b.length){for(var pa=Array(W.c<<1),y=0,Ia=W.c;y<Ia;){var ca=y++;pa[ca]=W.b[ca];W.b[ca]=null}W.b=pa}W.b[W.c++]=I}var Ea=this.Ha;if(null!=C){C.Z();if(Ea.c==Ea.b.length){for(var za=Array(Ea.c<<1),Fa=0,Sa=Ea.c;Fa<Sa;){var la=Fa++;za[la]=Ea.b[la];Ea.b[la]=null}Ea.b=za}Ea.b[Ea.c++]=C}var Z=this.Ha;if(null!=ha){ha.Z();if(Z.c==Z.b.length){for(var Ga=Array(Z.c<<1),ra=0,va=Z.c;ra<va;){var J=ra++;Ga[J]=Z.b[J];Z.b[J]=null}Z.b=Ga}Z.b[Z.c++]=ha}var La=this.Ha;if(null!=M){M.Z();if(La.c==La.b.length){for(var Xa=Array(La.c<<1),S=0,Ya=La.c;S<Ya;){var T=S++;Xa[T]=La.b[T];La.b[T]=null}La.b=Xa}La.b[La.c++]=M}var K=this.Ha;if(null!=ka){ka.Z();if(K.c==K.b.length){for(var ia=Array(K.c<<1),gb=0,da=K.c;gb<da;){var na=gb++;ia[na]=K.b[na];K.b[na]=null}K.b=ia}K.b[K.c++]=ka}}b=e}if(a.drawJoints)for(var sa=this.Bh;null!=sa;){var fb=sa.M,jb=this.Ha,Za=0==jb.c?new t:jb.b[--jb.c],ma=this.Ha,oa=0==ma.c?new t:ma.b[--ma.c],Ja=Za;Ja.x=sa.C.a.v;Ja.y=sa.C.a.A;Ja.z=sa.C.a.B;var Ha=oa;Ha.x=sa.D.a.v;Ha.y=sa.D.a.A;Ha.z=sa.D.a.B;var ob=this.Ha,fa=0==ob.c?new t:ob.b[--ob.c],ea=this.Ha,ja=0==ea.c?new t:ea.b[--ea.c],cb=this.Ha,Aa=0==cb.c?new t:cb.b[--cb.c],sb=this.Ha,Ua=0==sb.c?new t:sb.b[--sb.c],qb=this.Ha,rb=0==qb.c?new t:qb.b[--qb.c],tb=this.Ha,Va=0==tb.c?new t:tb.b[--tb.c],xb=this.Ha,rc=0==xb.c?new t:xb.b[--xb.c],$a=this.Ha,ua=0==$a.c?new t:$a.b[--$a.c],Yb=fa;Yb.x=sa.Df;Yb.y=sa.Ef;Yb.z=sa.Ff;var G=ja;G.x=sa.Gf;G.y=sa.Hf;G.z=sa.If;var pb=Aa;pb.x=sa.vb;pb.y=sa.wb;pb.z=sa.xb;var db=Ua;db.x=sa.xe;db.y=sa.ye;db.z=sa.ze;var oc=rb;oc.x=sa.th;oc.y=sa.uh;oc.z=sa.vh;var ab=Va;ab.x=sa.Zb;ab.y=sa.$b;ab.z=sa.ac;var hb=rc;hb.x=sa.ne;hb.y=sa.oe;hb.z=sa.pe;var z=ua;z.x=sa.Rg;z.y=sa.Sg;z.z=sa.Tg;if(a.drawJointLimits)switch(sa.Xb){case 1:var Db=sa.Ch;this.Ni(a,fa,Ua,rb,rc,a.style.jointRotationalConstraintRadius,Db.lowerLimit,Db.upperLimit,a.style.jointLineColor);break;case 2:var qa=sa,Tc=a.style.jointLineColor,Fb=qa.Dk,Oa=qa.Kk;this.Ni(a,ja,Ua,rb,rc,a.style.jointRotationalConstraintRadius,Fb.lowerLimit,Fb.upperLimit,Tc);this.El(a,fa,Aa,Oa.lowerLimit,Oa.upperLimit,Tc);break;case 3:var nb=sa.Ch;this.El(a,fa,Aa,nb.lowerLimit,nb.upperLimit,a.style.jointLineColor);break;case 4:var wb=sa,yb=a.style.jointRotationalConstraintRadius,eb=a.style.jointLineColor,Y=wb.xk,Ma=wb.yk;this.Ni(a,fa,Ua,rb,Ua,yb,wb.yi-Y.upperLimit,wb.yi-Y.lowerLimit,eb);this.Ni(a,ja,Va,rc,Va,yb,Ma.lowerLimit-wb.zi,Ma.upperLimit-wb.zi,eb);break;case 5:var kb=sa,Ta=a.style.jointRotationalConstraintRadius,ib=a.style.jointLineColor,Ka=kb.Mk;this.Ni(a,ja,rc,ua,rc,Ta,Ka.lowerLimit-kb.ej,Ka.upperLimit-kb.ej,ib);this.Om(a,fa,Aa,Ua,rb,kb.Jj,kb.Kj,Ta,ib);var Kb=this.Ha,Da=0==Kb.c?new t:Kb.b[--Kb.c];Da.x=ja.x;Da.y=ja.y;Da.z=ja.z;var X=Da,Cb=X.y+Va.y*Ta,hd=X.z+Va.z*Ta;X.x=X.x+Va.x*Ta;X.y=Cb;X.z=hd;var Rc=X,wa=this.Ha;if(null!=Rc){Rc.Z();if(wa.c==wa.b.length){for(var ec=Array(wa.c<<1),qd=0,Ca=wa.c;qd<Ca;){var xa=qd++;ec[xa]=wa.b[xa];wa.b[xa]=null}wa.b=ec}wa.b[wa.c++]=Rc}}var xc=this.Ha;if(null!=Za){Za.Z();if(xc.c==xc.b.length){for(var mb=Array(xc.c<<1),jc=0,pc=xc.c;jc<pc;){var kc=jc++;mb[kc]=xc.b[kc];xc.b[kc]=null}xc.b=mb}xc.b[xc.c++]=Za}var ac=this.Ha;if(null!=oa){oa.Z();if(ac.c==ac.b.length){for(var Vb=Array(ac.c<<1),Wb=0,Qb=ac.c;Wb<Qb;){var fc=Wb++;Vb[fc]=ac.b[fc];ac.b[fc]=null}ac.b=Vb}ac.b[ac.c++]=oa}var Rb=this.Ha;if(null!=fa){fa.Z();if(Rb.c==Rb.b.length){for(var Ob=Array(Rb.c<<1),Xb=0,gc=Rb.c;Xb<gc;){var Ib=Xb++;Ob[Ib]=Rb.b[Ib];Rb.b[Ib]=null}Rb.b=Ob}Rb.b[Rb.c++]=fa}var Zb=this.Ha;if(null!=ja){ja.Z();if(Zb.c==Zb.b.length){for(var lb=Array(Zb.c<<1),Ab=0,vb=Zb.c;Ab<vb;){var Wa=Ab++;lb[Wa]=Zb.b[Wa];Zb.b[Wa]=null}Zb.b=lb}Zb.b[Zb.c++]=ja}var qc=this.Ha;if(null!=Aa){Aa.Z();if(qc.c==qc.b.length){for(var mc=Array(qc.c<<1),id=0,Ic=qc.c;id<Ic;){var ub=id++;mc[ub]=qc.b[ub];qc.b[ub]=null}qc.b=mc}qc.b[qc.c++]=Aa}var sc=this.Ha;if(null!=Ua){Ua.Z();if(sc.c==sc.b.length){for(var vc=Array(sc.c<<1),Gb=0,Tb=sc.c;Gb<Tb;){var Sb=Gb++;vc[Sb]=sc.b[Sb];sc.b[Sb]=null}sc.b=vc}sc.b[sc.c++]=Ua}var Lb=this.Ha;if(null!=rb){rb.Z();if(Lb.c==Lb.b.length){for(var Fc=Array(Lb.c<<1),ic=0,tc=Lb.c;ic<tc;){var bc=ic++;Fc[bc]=Lb.b[bc];Lb.b[bc]=null}Lb.b=Fc}Lb.b[Lb.c++]=rb}var $c=this.Ha;if(null!=Va){Va.Z();if($c.c==$c.b.length){for(var hc=Array($c.c<<1),cc=0,Jb=$c.c;cc<Jb;){var Eb=cc++;hc[Eb]=$c.b[Eb];$c.b[Eb]=null}$c.b=hc}$c.b[$c.c++]=Va}var Ac=this.Ha;if(null!=rc){rc.Z();if(Ac.c==Ac.b.length){for(var zb=Array(Ac.c<<1),nc=0,uc=Ac.c;nc<uc;){var Mb=nc++;zb[Mb]=Ac.b[Mb];Ac.b[Mb]=null}Ac.b=zb}Ac.b[Ac.c++]=rc}var Pc=this.Ha;if(null!=ua){ua.Z();if(Pc.c==Pc.b.length){for(var Nb=Array(Pc.c<<1),Pb=0,dc=Pc.c;Pb<dc;){var wc=Pb++;Nb[wc]=Pc.b[wc];Pc.b[wc]=null}Pc.b=Nb}Pc.b[Pc.c++]=ua}sa=fb}},Ni:function(a,b,e,d,c,f,h,l,g){if(h!=l){var k=this.Ha,k=0==k.c?new t:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;var m=k.y+c.y*f,n=k.z+c.z*f;k.x+=c.x*f;k.y=m;k.z=n;c=this.Ha;if(null!=k){k.Z();if(c.c==c.b.length){for(var m=Array(c.c<<1),n=0,q=c.c;n<q;){var p=n++;m[p]=c.b[p];c.b[p]=null}c.b=m}c.b[c.c++]=k}}h>l?a.ellipse(b,e,d,f,f,g):a.arc(b,e,d,f,f,h,l,!0,g)},El:function(a,b,e,d,c){if(d<c){a=this.Ha;a=0==a.c?new t:a.b[--a.c];a.x=b.x;a.y=b.y;a.z=b.z;var f=a.y+e.y*d,h=a.z+e.z*d;a.x+=e.x*d;a.y=f;a.z=h;d=this.Ha;d=0==d.c?new t:d.b[--d.c];d.x=b.x;d.y=b.y;d.z=b.z;b=d.y+e.y*c;f=d.z+e.z*c;d.x+=e.x*c;d.y=b;d.z=f;e=this.Ha;if(null!=a){a.Z();if(e.c==e.b.length){c=Array(e.c<<1);b=0;for(f=e.c;b<f;)h=b++,c[h]=e.b[h],e.b[h]=null;e.b=c}e.b[e.c++]=a}a=this.Ha;if(null!=d){d.Z();if(a.c==a.b.length){e=Array(a.c<<1);c=0;for(b=a.c;c<b;)f=c++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=d}}},Om:function(a,b,e,d,c,f,h,l){var g=0;a=this.Ha;var k=0==a.c?new t:a.b[--a.c];a=this.Ha;var m=0==a.$d?new ga:a.Td[--a.$d];a=this.Ha;var n=0==a.qb?new O:a.ob[--a.qb];a=this.Ha;a=0==a.c?new t:a.b[--a.c];for(var q=0;17>q;){q++;var p=Math.cos(g)*f,r=Math.sin(g)*h,v=Math.sqrt(p*p+r*r),aa=Math.sin(.5*v),w=Math.cos(.5*v),B=k.Z(),u=B.y+d.y*p,D=B.z+d.z*p;B.x=B.x+d.x*p;B.y=u;B.z=D;p=B;B=p.y+c.y*r;u=p.z+c.z*r;p.x=p.x+c.x*r;p.y=B;p.z=u;r=1/v*aa;v=k.y*r;aa=k.z*r;k.x=k.x*r;k.y=v;k.z=aa;m.x=k.x;m.y=k.y;m.z=k.z;m.w=w;var V=m.x,D=m.y,p=m.z,v=m.w,A=2*V,u=2*D,aa=2*p,w=V*A,r=D*u,p=p*aa,B=V*u,D=D*aa,V=V*aa,A=v*A,u=v*u,v=v*aa;n.e00=1-r-p;n.e01=B-v;n.e02=V+u;n.e10=B+v;n.e11=1-w-p;n.e12=D-A;n.e20=V-u;n.e21=D+A;n.e22=1-w-r;w=this.Ha;w=0==w.c?new t:w.b[--w.c];r=w.y+e.y*l;v=w.z+e.z*l;w.x=w.x+e.x*l;w.y=r;w.z=v;r=w.x*n.e10+w.y*n.e11+w.z*n.e12;v=w.x*n.e20+w.y*n.e21+w.z*n.e22;w.x=w.x*n.e00+w.y*n.e01+w.z*n.e02;w.y=r;w.z=v;r=w;v=r.y+b.y;aa=r.z+b.z;r.x=r.x+b.x;r.y=v;r.z=aa;r=this.Ha;if(null!=a){a.Z();if(r.c==r.b.length){v=Array(r.c<<1);aa=0;for(p=r.c;aa<p;)B=aa++,v[B]=r.b[B],r.b[B]=null;r.b=v}r.b[r.c++]=a}a=w;g+=.39269908169872375}b=this.Ha;if(null!=k){k.Z();if(b.c==b.b.length){e=Array(b.c<<1);d=0;for(c=b.c;d<c;)f=d++,e[f]=b.b[f],b.b[f]=null;b.b=e}b.b[b.c++]=k}k=this.Ha;if(null!=m){m.x=0;m.y=0;m.z=0;m.w=1;if(k.$d==k.Td.length){b=Array(k.$d<<1);e=0;for(d=k.$d;e<d;)c=e++,b[c]=k.Td[c],k.Td[c]=null;k.Td=b}k.Td[k.$d++]=m}m=this.Ha;if(null!=n){n.e00=1;n.e01=0;n.e02=0;n.e10=0;n.e11=1;n.e12=0;n.e20=0;n.e21=0;n.e22=1;if(m.qb==m.ob.length){k=Array(m.qb<<1);b=0;for(e=m.qb;b<e;)d=b++,k[d]=m.ob[d],m.ob[d]=null;m.ob=k}m.ob[m.qb++]=n}n=this.Ha;if(null!=a){a.Z();if(n.c==n.b.length){m=Array(n.c<<1);k=0;for(b=n.c;k<b;)e=k++,m[e]=n.b[e],n.b[e]=null;n.b=m}n.b[n.c++]=a}},be:function(a){0<this.Dh.dt&&(this.Dh.dtRatio=a/this.Dh.dt);this.Dh.dt=a;this.Dh.invDt=1/a;a=(new Date).getTime()/1E3;this.Ok();this.Sm();cd.totalTime=1E3*((new Date).getTime()/1E3-a)},bb:function(a){if(null!=a.kc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.jf?this.jf=a:(this.mi.M=a,a.ja=this.mi);this.mi=a;a.kc=this;for(a=a.Ac;null!=a;){var b=a.M;a.Oa=this.ec.Gh(a,a.u);a.sc=this.Jl++;this.pg++;a=b}this.Vi++},ce:function(a){if(a.kc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.jf&&(this.jf=this.jf.M);a==this.mi&&(this.mi=this.mi.ja);a.M=null;a.ja=null;a.kc=null;for(a=a.Ac;null!=a;){b=a.M;this.ec.Hh(a.Oa);a.Oa=null;a.sc=-1;for(var d=a.Wb.Nb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Oc;d.Gb=!1;d.yb=0;var d=this.wh,f=c.ja,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ja);c.M=null;c.ja=null;f=c.rb.ja;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.rb==c.C.Nb&&(c.C.Nb=c.C.Nb.M);c.rb==c.C.fc&&(c.C.fc=c.C.fc.ja);c.rb.M=null;c.rb.ja=null;f=c.sb.ja;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.sb==c.D.Nb&&(c.D.Nb=c.D.Nb.M);c.sb==c.D.fc&&(c.D.fc=c.D.fc.ja);c.sb.M=null;c.sb.ja=null;c.C.se--;c.D.se--;c.rb.Oc=null;c.sb.Oc=null;c.rb.Ud=null;c.sb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ka.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}this.pg--;a=b}this.Vi--},Qa:function(a){if(null!=a.kc)throw Error("A joint cannot belong to multiple worlds.");null==this.Bh?this.Bh=a:(this.hi.M=a,a.ja=this.hi);this.hi=a;a.kc=this;a.rb.Oc=a.D;a.sb.Oc=a.C;null==a.C.re?a.C.re=a.rb:(a.C.Oe.M=a.rb,a.rb.ja=a.C.Oe);a.C.Oe=a.rb;null==a.D.re?a.D.re=a.sb:(a.D.Oe.M=a.sb,a.sb.ja=a.D.Oe);a.D.Oe=a.sb;a.C.$g++;a.D.$g++;var b=a.C;b.Gb=!1;b.yb=0;b=a.D;b.Gb=!1;b.yb=0;a.ed();this.zk++},sl:function(a){if(a.kc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.Bh&&(this.Bh=this.Bh.M);a==this.hi&&(this.hi=this.hi.ja);a.M=null;a.ja=null;a.kc=null;b=a.rb.ja;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a.rb==a.C.re&&(a.C.re=a.C.re.M);a.rb==a.C.Oe&&(a.C.Oe=a.C.Oe.ja);a.rb.M=null;a.rb.ja=null;b=a.sb.ja;e=a.sb.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a.sb==a.D.re&&(a.D.re=a.D.re.M);a.sb==a.D.Oe&&(a.D.Oe=a.D.Oe.ja);a.sb.M=null;a.sb.ja=null;a.rb.Oc=null;a.sb.Oc=null;a.C.$g--;a.D.$g--;b=a.C;b.Gb=!1;b.yb=0;a=a.D;a.Gb=!1;a.yb=0;this.zk--},de:function(a){this.Xh=a},mc:function(){return this.Xh},tb:function(){null!=this.Xh&&(dc.bb(this.ec,tc)&&this.Mm(this.Xh,dc.lc(this.ec,tc).he),this.Pm(this.Xh),this.Nm(this.Xh))},Sd:function(a,b,e){var d=this.Oj.gj;d.x=a.x;d.y=a.y;d.z=a.z;d=this.Oj.end;d.x=b.x;d.y=b.y;d.z=b.z;this.Oj.ij=e;this.ec.Sd(a,b,this.Oj)},rf:function(a,b,e,d){this.Mi.Ul=a;var c=this.Mi.gj;c.v=b.v;c.A=b.A;c.B=b.B;c.o=b.o;c.f=b.f;c.h=b.h;c.i=b.i;c.m=b.m;c.j=b.j;c.l=b.l;c.g=b.g;c.s=b.s;c=this.Mi.Vf;c.x=e.x;c.y=e.y;c.z=e.z;this.Mi.ij=d;this.ec.rf(a,b,e,this.Mi)},eh:function(a,b){this.ek.u.Zd(a);this.ek.Bl=b;this.ec.eh(a,this.ek)},cd:function(){return this.jf},rc:function(){return this.Bh},Lb:function(){return this.ec},lc:function(){return this.wh},Ic:function(){return this.Vi},Cc:function(){return this.zk},Pd:function(){return this.pg},zc:function(){return this.Mj},Jc:function(){return this.Bk},ge:function(a){this.Bk=a},Hc:function(){return this.Ak},fe:function(a){this.Ak=a},qc:function(){return this.lk},ee:function(a){var b=this.lk;b.x=a.x;b.y=a.y;b.z=a.z},ra:qa};Re.aa=!0;Re.Kb=Yc;Re.prototype=mb(Yc.prototype,{td:function(a){a=a.userData;a.Jb.Sd(this.gj,this.end,a.a,this.wi)&&this.ij.td(a,this.wi)},ra:Re});se.aa=!0;se.Kb=Yc;se.prototype=mb(Yc.prototype,{td:function(a){a=a.userData;dc.bb(a.Jb,xa)&&Jb.Qa.rf(this.Ul,a.Jb,this.gj,a.a,this.Vf,this.Z,this.wi)&&this.ij.td(a,this.wi)},ra:se});pf.aa=!0;pf.Kb=Yc;pf.prototype=mb(Yc.prototype,{td:function(a){a=a.userData;var b=a.u;b.na<this.u.ka&&b.ka>this.u.na&&b.oa<this.u.la&&b.la>this.u.oa&&b.pa<this.u.ma&&b.ma>this.u.pa&&this.Bl.td(a)},ra:pf});nd.aa=!0;nd.prototype={td:function(){},ra:nd};wd.aa=!0;wd.prototype={Qa:function(){},tb:function(){},$e:function(){},bb:function(){},ra:wd};md.aa=!0;md.prototype={td:function(){},ra:md};Dd.aa=!0;Dd.Kb=md;Dd.prototype=mb(md.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1},td:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}},ra:Dd});Tb.aa=!0;Tb.prototype={Pk:function(a,b){var e=this.p,d=(0==e.c?new t:e.b[--e.c]).Aa(a.x,a.y,a.z),e=this.p,c=(0==e.c?new t:e.b[--e.c]).Aa(a.x,a.y,b.z),e=this.p,f=(0==e.c?new t:e.b[--e.c]).Aa(a.x,b.y,a.z),e=this.p,h=(0==e.c?new t:e.b[--e.c]).Aa(a.x,b.y,b.z),e=this.p,l=(0==e.c?new t:e.b[--e.c]).Aa(b.x,a.y,a.z),e=this.p,e=(0==e.c?new t:e.b[--e.c]).Aa(b.x,a.y,b.z),g=this.p;a=(0==g.c?new t:g.b[--g.c]).Aa(b.x,b.y,a.z);g=this.p;b=(0==g.c?new t:g.b[--g.c]).Aa(b.x,b.y,b.z);g=this.p;if(null!=d){d.Z();if(g.c==g.b.length){for(var k=Array(g.c<<1),m=0,n=g.c;m<n;){var q=m++;k[q]=g.b[q];g.b[q]=null}g.b=k}g.b[g.c++]=d}d=this.p;if(null!=c){c.Z();if(d.c==d.b.length){g=Array(d.c<<1);k=0;for(m=d.c;k<m;)n=k++,g[n]=d.b[n],d.b[n]=null;d.b=g}d.b[d.c++]=c}c=this.p;if(null!=f){f.Z();if(c.c==c.b.length){d=Array(c.c<<1);g=0;for(k=c.c;g<k;)m=g++,d[m]=c.b[m],c.b[m]=null;c.b=d}c.b[c.c++]=f}f=this.p;if(null!=h){h.Z();if(f.c==f.b.length){c=Array(f.c<<1);d=0;for(g=f.c;d<g;)k=d++,c[k]=f.b[k],f.b[k]=null;f.b=c}f.b[f.c++]=h}h=this.p;if(null!=l){l.Z();if(h.c==h.b.length){f=Array(h.c<<1);c=0;for(d=h.c;c<d;)g=c++,f[g]=h.b[g],h.b[g]=null;h.b=f}h.b[h.c++]=l}l=this.p;if(null!=e){e.Z();if(l.c==l.b.length){h=Array(l.c<<1);f=0;for(c=l.c;f<c;)d=f++,h[d]=l.b[d],l.b[d]=null;l.b=h}l.b[l.c++]=e}e=this.p;if(null!=a){a.Z();if(e.c==e.b.length){l=Array(e.c<<1);h=0;for(f=e.c;h<f;)c=h++,l[c]=e.b[c],e.b[c]=null;e.b=l}e.b[e.c++]=a}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){e=Array(a.c<<1);l=0;for(h=a.c;l<h;)f=l++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=b}},ellipse:function(a,b,e,d,c,f){this.arc(a,b,e,d,c,0,6.28318530717958,!1,f)},arc:function(a,b,e,d,c,f,h){var l=this.p,l=0==l.c?new t:l.b[--l.c];l.x=b.x;l.y=b.y;l.z=b.z;b=l.y*d;var g=l.z*d;l.x=l.x*d;l.y=b;l.z=g;b=l;d=this.p;d=0==d.c?new t:d.b[--d.c];d.x=e.x;d.y=e.y;d.z=e.z;e=d.y*c;l=d.z*c;d.x=d.x*c;d.y=e;d.z=l;e=d;c=h-f;0>c&&(c=-c);(l=c/.5235987755982984+.5|0)||(l=1);c=f;f=(h-f)/l;h=this.p;h=0==h.c?new t:h.b[--h.c];h.x=a.x;h.y=a.y;h.z=a.z;d=Math.cos(c);var g=h.y+b.y*d,k=h.z+b.z*d;h.x+=b.x*d;h.y=g;h.z=k;d=Math.sin(c);g=h.y+e.y*d;k=h.z+e.z*d;h.x+=e.x*d;h.y=g;h.z=k;for(d=0;d<l;){d++;c+=f;g=this.p;g=0==g.c?new t:g.b[--g.c];g.x=a.x;g.y=a.y;g.z=a.z;var k=Math.cos(c),m=g.y+b.y*k,n=g.z+b.z*k;g.x=g.x+b.x*k;g.y=m;g.z=n;k=Math.sin(c);m=g.y+e.y*k;n=g.z+e.z*k;g.x=g.x+e.x*k;g.y=m;g.z=n;k=this.p;if(null!=h){h.Z();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=h}h=g}a=this.p;if(null!=h){h.Z();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(d=a.c;f<d;)l=f++,c[l]=a.b[l],a.b[l]=null;a.b=c}a.b[a.c++]=h}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(h=a.c;f<h;)d=f++,c[d]=a.b[d],a.b[d]=null;a.b=c}a.b[a.c++]=b}b=this.p;if(null!=e){e.Z();if(b.c==b.b.length){a=Array(b.c<<1);c=0;for(f=b.c;c<f;)h=c++,a[h]=b.b[h],b.b[h]=null;b.b=a}b.b[b.c++]=e}},Tl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.qb?new O:q.ob[--q.qb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.Aa(p.e00,p.e10,p.e20);l.Aa(p.e01,p.e11,p.e21);k.Aa(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var B=this.p,u=0==B.c?new t:B.b[--B.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,A=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=A;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=u.x;x.y=u.y;x.z=u.z;var Bb=-b,N=x.y+f.y*Bb,I=x.z+f.z*Bb;x.x+=f.x*Bb;x.y=N;x.z=I;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ha=0==L.c?new t:L.b[--L.c];ha.x=u.x;ha.y=u.y;ha.z=u.z;var M=ha.y+f.y*b,Ub=ha.z+f.z*b;ha.x+=f.x*b;ha.y=M;ha.z=Ub;var ga=ha.y+0*k.y,ka=ha.z+0*k.z;ha.x+=0*k.x;ha.y=ga;ha.z=ka;var bb=this.p,U=0==bb.c?new t:bb.b[--bb.c];U.x=u.x;U.y=u.y;U.z=u.z;var R=U.y+0*f.y,lc=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=lc;var Na=-b,Ra=U.y+k.y*Na,yc=U.z+k.z*Na;U.x+=k.x*Na;U.y=Ra;U.z=yc;var Pa=this.p,Ba=0==Pa.c?new t:Pa.b[--Pa.c];Ba.x=u.x;Ba.y=u.y;Ba.z=u.z;var Hb=Ba.y+0*f.y,H=Ba.z+0*f.z;Ba.x+=0*f.x;Ba.y=Hb;Ba.z=H;var Qa=Ba.y+k.y*b,ba=Ba.z+k.z*b;Ba.x+=k.x*b;Ba.y=Qa;Ba.z=ba;this.ellipse(u,f,k,b,b,d);var Q=this.p;if(null!=x){x.Z();if(Q.c==Q.b.length){for(var P=Array(Q.c<<1),ya=0,ta=Q.c;ya<ta;){var W=ya++;P[W]=Q.b[W];Q.b[W]=null}Q.b=P}Q.b[Q.c++]=x}var pa=this.p;if(null!=ha){ha.Z();if(pa.c==pa.b.length){for(var y=Array(pa.c<<1),Ia=0,ca=pa.c;Ia<ca;){var Ea=Ia++;y[Ea]=pa.b[Ea];pa.b[Ea]=null}pa.b=y}pa.b[pa.c++]=ha}var za=this.p;if(null!=U){U.Z();if(za.c==za.b.length){for(var Fa=Array(za.c<<1),Sa=0,la=za.c;Sa<la;){var Z=Sa++;Fa[Z]=za.b[Z];za.b[Z]=null}za.b=Fa}za.b[za.c++]=U}var Ga=this.p;if(null!=Ba){Ba.Z();if(Ga.c==Ga.b.length){for(var ra=Array(Ga.c<<1),va=0,J=Ga.c;va<J;){var La=va++;ra[La]=Ga.b[La];Ga.b[La]=null}Ga.b=ra}Ga.b[Ga.c++]=Ba}}else{for(var Xa=1/Math.sqrt(b*b+4*e*e),S=2*e*Xa,Ya=b*Xa,T=0;8>T;){var K=T++,ia=this.Af[K],gb=this.jj[K];ia.x=gb.x;ia.y=gb.y;ia.z=gb.z;var da=ia,na=da.y*S,sa=da.z*S;da.x=da.x*S;da.y=na;da.z=sa;da.y+=Ya;var fb=this.Af[K],jb=fb.x*p.e10+fb.y*p.e11+fb.z*p.e12,Za=fb.x*p.e20+fb.y*p.e21+fb.z*p.e22;fb.x=fb.x*p.e00+fb.y*p.e01+fb.z*p.e02;fb.y=jb;fb.z=Za;var ma=this.ae[K],oa=this.Sl[K];ma.x=oa.x;ma.y=oa.y;ma.z=oa.z;var Ja=ma,Ha=Ja.y*S,ob=Ja.z*S;Ja.x=Ja.x*S;Ja.y=Ha;Ja.z=ob;Ja.y+=Ya;var fa=this.ae[K],ea=fa.x*p.e10+fa.y*p.e11+fa.z*p.e12,ja=fa.x*p.e20+fa.y*p.e21+fa.z*p.e22;fa.x=fa.x*p.e00+fa.y*p.e01+fa.z*p.e02;fa.y=ea;fa.z=ja;var cb=this.Fe[K],Aa=this.jj[K];cb.x=Aa.x;cb.y=Aa.y;cb.z=Aa.z;var sb=cb,Ua=sb.x*p.e10+sb.y*p.e11+sb.z*p.e12,qb=sb.x*p.e20+sb.y*p.e21+sb.z*p.e22;sb.x=sb.x*p.e00+sb.y*p.e01+sb.z*p.e02;sb.y=Ua;sb.z=qb;var rb=sb,tb=rb.y*b,Va=rb.z*b;rb.x=rb.x*b;rb.y=tb;rb.z=Va;var xb=rb,rc=xb.y+n.y,$a=xb.z+n.z;xb.x=xb.x+n.x;xb.y=rc;xb.z=$a;var ua=this.Fe[K],Yb=-e,G=ua.y+l.y*Yb,pb=ua.z+l.z*Yb;ua.x=ua.x+l.x*Yb;ua.y=G;ua.z=pb}for(var db=0;8>db;){var oc=db++,ab=this.ae[oc],hb=this.p,z=0==hb.c?new t:hb.b[--hb.c];z.x=l.x;z.y=l.y;z.z=l.z;var Db=z,qa=-Db.y,wa=-Db.z;Db.x=-Db.x;Db.y=qa;Db.z=wa;var ab=Db,Fb=this.p;if(null!=ab){ab.Z();if(Fb.c==Fb.b.length){for(var Oa=Array(Fb.c<<1),nb=0,wb=Fb.c;nb<wb;){var yb=nb++;Oa[yb]=Fb.b[yb];Fb.b[yb]=null}Fb.b=Oa}Fb.b[Fb.c++]=ab}}}var eb=this.p;if(null!=v){v.Z();if(eb.c==eb.b.length){for(var Y=Array(eb.c<<1),Ma=0,kb=eb.c;Ma<kb;){var Ta=Ma++;Y[Ta]=eb.b[Ta];eb.b[Ta]=null}eb.b=Y}eb.b[eb.c++]=v}var ib=this.p;if(null!=u){u.Z();if(ib.c==ib.b.length){for(var Ka=Array(ib.c<<1),Kb=0,Da=ib.c;Kb<Da;){var X=Kb++;Ka[X]=ib.b[X];ib.b[X]=null}ib.b=Ka}ib.b[ib.c++]=u}var Cb=this.p;if(null!=n){n.Z();if(Cb.c==Cb.b.length){for(var hd=Array(Cb.c<<1),Rc=0,Ca=Cb.c;Rc<Ca;){var ec=Rc++;hd[ec]=Cb.b[ec];Cb.b[ec]=null}Cb.b=hd}Cb.b[Cb.c++]=n}var xa=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(xa.qb==xa.ob.length){for(var mb=Array(xa.qb<<1),Wa=0,xc=xa.qb;Wa<xc;){var Ab=Wa++;mb[Ab]=xa.ob[Ab];xa.ob[Ab]=null}xa.ob=mb}xa.ob[xa.qb++]=p}var jc=this.p;if(null!=f){f.Z();if(jc.c==jc.b.length){for(var pc=Array(jc.c<<1),kc=0,ac=jc.c;kc<ac;){var Vb=kc++;pc[Vb]=jc.b[Vb];jc.b[Vb]=null}jc.b=pc}jc.b[jc.c++]=f}var Wb=this.p;if(null!=l){l.Z();if(Wb.c==Wb.b.length){for(var Qb=Array(Wb.c<<1),fc=0,Rb=Wb.c;fc<Rb;){var Ob=fc++;Qb[Ob]=Wb.b[Ob];Wb.b[Ob]=null}Wb.b=Qb}Wb.b[Wb.c++]=l}var Xb=this.p;if(null!=k){k.Z();if(Xb.c==Xb.b.length){for(var gc=Array(Xb.c<<1),Ib=0,Zb=Xb.c;Ib<Zb;){var lb=Ib++;gc[lb]=Xb.b[lb];Xb.b[lb]=null}Xb.b=gc}Xb.b[Xb.c++]=k}},Wl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.qb?new O:q.ob[--q.qb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.Aa(p.e00,p.e10,p.e20);l.Aa(p.e01,p.e11,p.e21);k.Aa(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var B=this.p,u=0==B.c?new t:B.b[--B.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,A=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=A;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=v.x;x.y=v.y;x.z=v.z;var Bb=-b,N=x.y+f.y*Bb,I=x.z+f.z*Bb;x.x+=f.x*Bb;x.y=N;x.z=I;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ha=0==L.c?new t:L.b[--L.c];ha.x=v.x;ha.y=v.y;ha.z=v.z;var M=ha.y+f.y*b,Ub=ha.z+f.z*b;ha.x+=f.x*b;ha.y=M;ha.z=Ub;var ga=ha.y+0*k.y,ka=ha.z+0*k.z;ha.x+=0*k.x;ha.y=ga;ha.z=ka;var bb=this.p,U=0==bb.c?new t:bb.b[--bb.c];U.x=v.x;U.y=v.y;U.z=v.z;var R=U.y+0*f.y,lc=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=lc;var Na=-b,Ra=U.y+k.y*Na,yc=U.z+k.z*Na;U.x+=k.x*Na;U.y=Ra;U.z=yc;var Pa=this.p,Ba=0==Pa.c?new t:Pa.b[--Pa.c];Ba.x=v.x;Ba.y=v.y;Ba.z=v.z;var Hb=Ba.y+0*f.y,H=Ba.z+0*f.z;Ba.x+=0*f.x;Ba.y=Hb;Ba.z=H;var Qa=Ba.y+k.y*b,ba=Ba.z+k.z*b;Ba.x+=k.x*b;Ba.y=Qa;Ba.z=ba;var Q=this.p,P=0==Q.c?new t:Q.b[--Q.c];P.x=u.x;P.y=u.y;P.z=u.z;var ya=-b,ta=P.y+f.y*ya,W=P.z+f.z*ya;P.x+=f.x*ya;P.y=ta;P.z=W;var pa=P.y+0*k.y,y=P.z+0*k.z;P.x+=0*k.x;P.y=pa;P.z=y;var Ia=this.p,ca=0==Ia.c?new t:Ia.b[--Ia.c];ca.x=u.x;ca.y=u.y;ca.z=u.z;var Ea=ca.y+f.y*b,za=ca.z+f.z*b;ca.x+=f.x*b;ca.y=Ea;ca.z=za;var Fa=ca.y+0*k.y,Sa=ca.z+0*k.z;ca.x+=0*k.x;ca.y=Fa;ca.z=Sa;var la=this.p,Z=0==la.c?new t:la.b[--la.c];Z.x=u.x;Z.y=u.y;Z.z=u.z;var Ga=Z.y+0*f.y,ra=Z.z+0*f.z;Z.x+=0*f.x;Z.y=Ga;Z.z=ra;var va=-b,J=Z.y+k.y*va,La=Z.z+k.z*va;Z.x+=k.x*va;Z.y=J;Z.z=La;var Xa=this.p,S=0==Xa.c?new t:Xa.b[--Xa.c];S.x=u.x;S.y=u.y;S.z=u.z;var Ya=S.y+0*f.y,T=S.z+0*f.z;S.x+=0*f.x;S.y=Ya;S.z=T;var K=S.y+k.y*b,ia=S.z+k.z*b;S.x+=k.x*b;S.y=K;S.z=ia;this.ellipse(v,f,k,b,b,d);this.ellipse(u,f,k,b,b,d);var gb=this.p;if(null!=x){x.Z();if(gb.c==gb.b.length){for(var da=Array(gb.c<<1),na=0,sa=gb.c;na<sa;){var fb=na++;da[fb]=gb.b[fb];gb.b[fb]=null}gb.b=da}gb.b[gb.c++]=x}var jb=this.p;if(null!=ha){ha.Z();if(jb.c==jb.b.length){for(var Za=Array(jb.c<<1),ma=0,oa=jb.c;ma<oa;){var Ja=ma++;Za[Ja]=jb.b[Ja];jb.b[Ja]=null}jb.b=Za}jb.b[jb.c++]=ha}var Ha=this.p;if(null!=U){U.Z();if(Ha.c==Ha.b.length){for(var ob=Array(Ha.c<<1),fa=0,ea=Ha.c;fa<ea;){var ja=fa++;ob[ja]=Ha.b[ja];Ha.b[ja]=null}Ha.b=ob}Ha.b[Ha.c++]=U}var cb=this.p;if(null!=Ba){Ba.Z();if(cb.c==cb.b.length){for(var Aa=Array(cb.c<<1),sb=0,Ua=cb.c;sb<Ua;){var qb=sb++;Aa[qb]=cb.b[qb];cb.b[qb]=null}cb.b=Aa}cb.b[cb.c++]=Ba}var rb=this.p;if(null!=P){P.Z();if(rb.c==rb.b.length){for(var tb=Array(rb.c<<1),Va=0,xb=rb.c;Va<xb;){var rc=Va++;tb[rc]=rb.b[rc];rb.b[rc]=null}rb.b=tb}rb.b[rb.c++]=P}var $a=this.p;if(null!=ca){ca.Z();if($a.c==$a.b.length){for(var ua=Array($a.c<<1),Yb=0,G=$a.c;Yb<G;){var pb=Yb++;ua[pb]=$a.b[pb];$a.b[pb]=null}$a.b=ua}$a.b[$a.c++]=ca}var db=this.p;if(null!=Z){Z.Z();if(db.c==db.b.length){for(var oc=Array(db.c<<1),ab=0,hb=db.c;ab<hb;){var z=ab++;oc[z]=db.b[z];db.b[z]=null}db.b=oc}db.b[db.c++]=Z}var Db=this.p;if(null!=S){S.Z();if(Db.c==Db.b.length){for(var qa=Array(Db.c<<1),wa=0,Fb=Db.c;wa<Fb;){var Oa=wa++;qa[Oa]=Db.b[Oa];Db.b[Oa]=null}Db.b=qa}Db.b[Db.c++]=S}}else{for(var nb=0;8>nb;){var wb=nb++,yb=this.Af[wb],eb=this.jj[wb];yb.x=eb.x;yb.y=eb.y;yb.z=eb.z;var Y=yb,Ma=Y.x*p.e10+Y.y*p.e11+Y.z*p.e12,kb=Y.x*p.e20+Y.y*p.e21+Y.z*p.e22;Y.x=Y.x*p.e00+Y.y*p.e01+Y.z*p.e02;Y.y=Ma;Y.z=kb;var Ta=this.ae[wb],ib=this.Af[wb];Ta.x=ib.x;Ta.y=ib.y;Ta.z=ib.z;var Ka=Ta,Kb=Ka.y*b,Da=Ka.z*b;Ka.x=Ka.x*b;Ka.y=Kb;Ka.z=Da;var X=Ka,Cb=X.y+n.y,xa=X.z+n.z;X.x=X.x+n.x;X.y=Cb;X.z=xa;var Ca=this.Fe[wb],mb=this.ae[wb];Ca.x=mb.x;Ca.y=mb.y;Ca.z=mb.z;var ec=this.ae[wb],Ab=ec.y+l.y*e,Wa=ec.z+l.z*e;ec.x=ec.x+l.x*e;ec.y=Ab;ec.z=Wa;var ub=this.Fe[wb],xc=-e,Lb=ub.y+l.y*xc,jc=ub.z+l.z*xc;ub.x=ub.x+l.x*xc;ub.y=Lb;ub.z=jc}for(var pc=0;8>pc;){var kc=pc++,ac=v,Vb=this.ae[kc],Wb=this.ae[(kc+1)%8],Qb=l,ac=u,Vb=this.Fe[(kc+1)%8],Wb=this.Fe[kc],fc=this.p,Rb=0==fc.c?new t:fc.b[--fc.c];Rb.x=l.x;Rb.y=l.y;Rb.z=l.z;var Ob=Rb,Xb=-Ob.y,gc=-Ob.z;Ob.x=-Ob.x;Ob.y=Xb;Ob.z=gc;var Qb=Ob,Ib=this.p;if(null!=Qb){Qb.Z();if(Ib.c==Ib.b.length){for(var Zb=Array(Ib.c<<1),lb=0,vb=Ib.c;lb<vb;){var Gb=lb++;Zb[Gb]=Ib.b[Gb];Ib.b[Gb]=null}Ib.b=Zb}Ib.b[Ib.c++]=Qb}var ac=this.ae[kc],Vb=this.Fe[kc],Wb=this.Fe[(kc+1)%8],Sb=this.ae[(kc+1)%8],Qb=this.Af[kc],qc=this.Af[(kc+1)%8];this.rect(ac,Vb,Wb,Sb,Qb,Qb,qc,qc,d)}}var mc=this.p;if(null!=v){v.Z();if(mc.c==mc.b.length){for(var id=Array(mc.c<<1),Ic=0,Tb=mc.c;Ic<Tb;){var sc=Ic++;id[sc]=mc.b[sc];mc.b[sc]=null}mc.b=id}mc.b[mc.c++]=v}var vc=this.p;if(null!=u){u.Z();if(vc.c==vc.b.length){for(var bc=Array(vc.c<<1),ic=0,hc=vc.c;ic<hc;){var Eb=ic++;bc[Eb]=vc.b[Eb];vc.b[Eb]=null}vc.b=bc}vc.b[vc.c++]=u}var Fc=this.p;if(null!=n){n.Z();if(Fc.c==Fc.b.length){for(var tc=Array(Fc.c<<1),cc=0,Jb=Fc.c;cc<Jb;){var $c=cc++;tc[$c]=Fc.b[$c];Fc.b[$c]=null}Fc.b=tc}Fc.b[Fc.c++]=n}var zb=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(zb.qb==zb.ob.length){for(var nc=Array(zb.qb<<1),Mb=0,uc=zb.qb;Mb<uc;){var Ac=Mb++;nc[Ac]=zb.ob[Ac];zb.ob[Ac]=null}zb.ob=nc}zb.ob[zb.qb++]=p}var Nb=this.p;if(null!=f){f.Z();if(Nb.c==Nb.b.length){for(var wc=Array(Nb.c<<1),Pb=0,dc=Nb.c;Pb<dc;){var Pc=Pb++;wc[Pc]=Nb.b[Pc];Nb.b[Pc]=null}Nb.b=wc}Nb.b[Nb.c++]=f}var $b=this.p;if(null!=l){l.Z();if($b.c==$b.b.length){for(var Ec=Array($b.c<<1),Gc=0,Nc=$b.c;Gc<Nc;){var Bc=Gc++;Ec[Bc]=$b.b[Bc];$b.b[Bc]=null}$b.b=Ec}$b.b[$b.c++]=l}var zc=this.p;if(null!=k){k.Z();if(zc.c==zc.b.length){for(var Lc=Array(zc.c<<1),Jc=0,Cc=zc.c;Jc<Cc;){var Dc=Jc++;Lc[Dc]=zc.b[Dc];zc.b[Dc]=null}zc.b=Lc}zc.b[zc.c++]=k}},Rl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.qb?new O:q.ob[--q.qb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.Aa(p.e00,p.e10,p.e20);l.Aa(p.e01,p.e11,p.e21);k.Aa(p.e02,p.e12,p.e22);for(var r=this.rh,v=this.dk,aa=0;5>aa;)for(var w=aa++,B=0,u=this.rh[w].length;B<u;){var D=B++,V=v[w][D],A=this.bk[w][D];V.x=A.x;V.y=A.y;V.z=A.z;var E=V,x=E.x*p.e10+E.y*p.e11+E.z*p.e12,Bb=E.x*p.e20+E.y*p.e21+E.z*p.e22;E.x=E.x*p.e00+E.y*p.e01+E.z*p.e02;E.y=x;E.z=Bb}for(var N=0;4>N;){var I=N++;if(!I)for(var F=0;3>F;)for(var C=F++,L=0,M=this.rh[C].length;L<M;){var na=L++,Ub=r[C][na],ga=v[C][na];Ub.x=ga.x;Ub.y=ga.y;Ub.z=ga.z;var ka=Ub,bb=ka.y*b,U=ka.z*b;ka.x=ka.x*b;ka.y=bb;ka.z=U;var R=ka,lc=R.y+n.y,Na=R.z+n.z;R.x=R.x+n.x;R.y=lc;R.z=Na;var Ra=R,yc=Ra.y+l.y*e,Pa=Ra.z+l.z*e;Ra.x=Ra.x+l.x*e;Ra.y=yc;Ra.z=Pa}if(2==I)for(var Ba=2;5>Ba;)for(var Hb=Ba++,H=0,Qa=this.rh[Hb].length;H<Qa;){var ba=H++,Q=r[Hb][ba],P=v[Hb][ba];Q.x=P.x;Q.y=P.y;Q.z=P.z;var ya=Q,ta=ya.y*b,W=ya.z*b;ya.x=ya.x*b;ya.y=ta;ya.z=W;var pa=ya,y=pa.y+n.y,Ia=pa.z+n.z;pa.x=pa.x+n.x;pa.y=y;pa.z=Ia;var ca=pa,Ea=-e,za=ca.y+l.y*Ea,Fa=ca.z+l.z*Ea;ca.x=ca.x+l.x*Ea;ca.y=za;ca.z=Fa}for(var Sa=0;8>Sa;){var la=Sa++,Z,Ga,ra,va,J,La,Xa,S;I?3==I?this.wireframe?(Z=r[4][0],Ga=r[I][(la+1)%8],ra=r[I][la]):(Z=r[4][0],Ga=r[I][(la+1)%8],ra=r[I][la],J=v[4][0],La=v[I][(la+1)%8],Xa=v[I][la]):this.wireframe?(Z=r[I][la],Ga=r[I][(la+1)%8],ra=r[I+1][la]):(Z=r[I][la],Ga=r[I][(la+1)%8],ra=r[I+1][la],va=r[I+1][(la+1)%8],J=v[I][la],La=v[I][(la+1)%8],Xa=v[I+1][la],S=v[I+1][(la+1)%8],this.rect(Z,ra,va,Ga,J,Xa,S,La,d)):this.wireframe?(Z=r[0][0],Ga=r[1][la]):(Z=r[0][0],Ga=r[1][la],ra=r[1][(la+1)%8],J=v[0][0],La=v[1][la],Xa=v[1][(la+1)%8])}}var Ya=this.p,T=0==Ya.c?new t:Ya.b[--Ya.c];T.x=n.x;T.y=n.y;T.z=n.z;var K=T.y+l.y*e,ia=T.z+l.z*e;T.x+=l.x*e;T.y=K;T.z=ia;var gb=this.p,da=0==gb.c?new t:gb.b[--gb.c];da.x=n.x;da.y=n.y;da.z=n.z;var qa=-e,sa=da.y+l.y*qa,fb=da.z+l.z*qa;da.x+=l.x*qa;da.y=sa;da.z=fb;if(this.wireframe){var jb=this.p,Za=0==jb.c?new t:jb.b[--jb.c];Za.x=T.x;Za.y=T.y;Za.z=T.z;var ma=-b,oa=Za.y+f.y*ma,Ja=Za.z+f.z*ma;Za.x+=f.x*ma;Za.y=oa;Za.z=Ja;var Ha=Za.y+0*k.y,ob=Za.z+0*k.z;Za.x+=0*k.x;Za.y=Ha;Za.z=ob;var fa=this.p,ea=0==fa.c?new t:fa.b[--fa.c];ea.x=T.x;ea.y=T.y;ea.z=T.z;var ja=ea.y+f.y*b,cb=ea.z+f.z*b;ea.x+=f.x*b;ea.y=ja;ea.z=cb;var Aa=ea.y+0*k.y,sb=ea.z+0*k.z;ea.x+=0*k.x;ea.y=Aa;ea.z=sb;var Ua=this.p,qb=0==Ua.c?new t:Ua.b[--Ua.c];qb.x=T.x;qb.y=T.y;qb.z=T.z;var rb=qb.y+0*f.y,tb=qb.z+0*f.z;qb.x+=0*f.x;qb.y=rb;qb.z=tb;var Va=-b,xb=qb.y+k.y*Va,rc=qb.z+k.z*Va;qb.x+=k.x*Va;qb.y=xb;qb.z=rc;var $a=this.p,ua=0==$a.c?new t:$a.b[--$a.c];ua.x=T.x;ua.y=T.y;ua.z=T.z;var Yb=ua.y+0*f.y,G=ua.z+0*f.z;ua.x+=0*f.x;ua.y=Yb;ua.z=G;var pb=ua.y+k.y*b,db=ua.z+k.z*b;ua.x+=k.x*b;ua.y=pb;ua.z=db;var oc=this.p,ab=0==oc.c?new t:oc.b[--oc.c];ab.x=da.x;ab.y=da.y;ab.z=da.z;var hb=-b,z=ab.y+f.y*hb,Db=ab.z+f.z*hb;ab.x+=f.x*hb;ab.y=z;ab.z=Db;var wa=ab.y+0*k.y,Da=ab.z+0*k.z;ab.x+=0*k.x;ab.y=wa;ab.z=Da;var Fb=this.p,Oa=0==Fb.c?new t:Fb.b[--Fb.c];Oa.x=da.x;Oa.y=da.y;Oa.z=da.z;var nb=Oa.y+f.y*b,wb=Oa.z+f.z*b;Oa.x+=f.x*b;Oa.y=nb;Oa.z=wb;var yb=Oa.y+0*k.y,eb=Oa.z+0*k.z;Oa.x+=0*k.x;Oa.y=yb;Oa.z=eb;var Y=this.p,Ma=0==Y.c?new t:Y.b[--Y.c];Ma.x=da.x;Ma.y=da.y;Ma.z=da.z;var kb=Ma.y+0*f.y,Ta=Ma.z+0*f.z;Ma.x+=0*f.x;Ma.y=kb;Ma.z=Ta;var ib=-b,Ka=Ma.y+k.y*ib,Kb=Ma.z+k.z*ib;Ma.x+=k.x*ib;Ma.y=Ka;Ma.z=Kb;var xa=this.p,X=0==xa.c?new t:xa.b[--xa.c];X.x=da.x;X.y=da.y;X.z=da.z;var Cb=X.y+0*f.y,Ca=X.z+0*f.z;X.x+=0*f.x;X.y=Cb;X.z=Ca;var mb=X.y+k.y*b,ub=X.z+k.z*b;X.x+=k.x*b;X.y=mb;X.z=ub;this.ellipse(T,f,k,b,b,d);this.ellipse(da,f,k,b,b,d);var ec=this.p;if(null!=Za){Za.Z();if(ec.c==ec.b.length){for(var Ab=Array(ec.c<<1),Wa=0,Lb=ec.c;Wa<Lb;){var xc=Wa++;Ab[xc]=ec.b[xc];ec.b[xc]=null}ec.b=Ab}ec.b[ec.c++]=Za}var vb=this.p;if(null!=ea){ea.Z();if(vb.c==vb.b.length){for(var jc=Array(vb.c<<1),pc=0,kc=vb.c;pc<kc;){var ac=pc++;jc[ac]=vb.b[ac];vb.b[ac]=null}vb.b=jc}vb.b[vb.c++]=ea}var Vb=this.p;if(null!=qb){qb.Z();if(Vb.c==Vb.b.length){for(var Wb=Array(Vb.c<<1),Qb=0,fc=Vb.c;Qb<fc;){var Rb=Qb++;Wb[Rb]=Vb.b[Rb];Vb.b[Rb]=null}Vb.b=Wb}Vb.b[Vb.c++]=qb}var Ob=this.p;if(null!=ua){ua.Z();if(Ob.c==Ob.b.length){for(var Xb=Array(Ob.c<<1),gc=0,Ib=Ob.c;gc<Ib;){var Zb=gc++;Xb[Zb]=Ob.b[Zb];Ob.b[Zb]=null}Ob.b=Xb}Ob.b[Ob.c++]=ua}var lb=this.p;if(null!=ab){ab.Z();if(lb.c==lb.b.length){for(var Gb=Array(lb.c<<1),zb=0,Sb=lb.c;zb<Sb;){var qc=zb++;Gb[qc]=lb.b[qc];lb.b[qc]=null}lb.b=Gb}lb.b[lb.c++]=ab}var mc=this.p;if(null!=Oa){Oa.Z();if(mc.c==mc.b.length){for(var id=Array(mc.c<<1),Ic=0,Tb=mc.c;Ic<Tb;){var sc=Ic++;id[sc]=mc.b[sc];mc.b[sc]=null}mc.b=id}mc.b[mc.c++]=Oa}var vc=this.p;if(null!=Ma){Ma.Z();if(vc.c==vc.b.length){for(var Nb=Array(vc.c<<1),bc=0,ic=vc.c;bc<ic;){var Eb=bc++;Nb[Eb]=vc.b[Eb];vc.b[Eb]=null}vc.b=Nb}vc.b[vc.c++]=Ma}var Fc=this.p;if(null!=X){X.Z();if(Fc.c==Fc.b.length){for(var tc=Array(Fc.c<<1),cc=0,hc=Fc.c;cc<hc;){var $b=cc++;tc[$b]=Fc.b[$b];Fc.b[$b]=null}Fc.b=tc}Fc.b[Fc.c++]=X}}else{for(var nc=0;8>nc;){var Mb=nc++,Jb=this.Af[Mb],uc=this.jj[Mb];Jb.x=uc.x;Jb.y=uc.y;Jb.z=uc.z;var Ac=Jb,zc=Ac.x*p.e10+Ac.y*p.e11+Ac.z*p.e12,wc=Ac.x*p.e20+Ac.y*p.e21+Ac.z*p.e22;Ac.x=Ac.x*p.e00+Ac.y*p.e01+Ac.z*p.e02;Ac.y=zc;Ac.z=wc;var Pb=this.ae[Mb],dc=this.Af[Mb];Pb.x=dc.x;Pb.y=dc.y;Pb.z=dc.z;var Pc=Pb,Ec=Pc.y*b,Gc=Pc.z*b;Pc.x=Pc.x*b;Pc.y=Ec;Pc.z=Gc;var Bc=Pc,Lc=Bc.y+n.y,Nc=Bc.z+n.z;Bc.x=Bc.x+n.x;Bc.y=Lc;Bc.z=Nc;var Dc=this.Fe[Mb],Jc=this.ae[Mb];Dc.x=Jc.x;Dc.y=Jc.y;Dc.z=Jc.z;var Cc=this.ae[Mb],Yc=Cc.y+l.y*e,bd=Cc.z+l.z*e;Cc.x=Cc.x+l.x*e;Cc.y=Yc;Cc.z=bd;var Oc=this.Fe[Mb],Xc=-e,ed=Oc.y+l.y*Xc,fd=Oc.z+l.z*Xc;Oc.x=Oc.x+l.x*Xc;Oc.y=ed;Oc.z=fd}for(var cd=0;8>cd;){var Qc=cd++,gd=this.Af[Qc],rd=this.Af[(Qc+1)%8];this.rect(this.ae[Qc],this.Fe[Qc],this.Fe[(Qc+1)%8],this.ae[(Qc+1)%8],gd,gd,rd,rd,d)}}var Uc=this.p;if(null!=T){T.Z();if(Uc.c==Uc.b.length){for(var ld=Array(Uc.c<<1),md=0,wd=Uc.c;md<wd;){var dd=md++;ld[dd]=Uc.b[dd];Uc.b[dd]=null}Uc.b=ld}Uc.b[Uc.c++]=T}var Mc=this.p;if(null!=da){da.Z();if(Mc.c==Mc.b.length){for(var od=Array(Mc.c<<1),pd=0,Dd=Mc.c;pd<Dd;){var nd=pd++;od[nd]=Mc.b[nd];Mc.b[nd]=null}Mc.b=od}Mc.b[Mc.c++]=da}var sd=this.p;if(null!=n){n.Z();if(sd.c==sd.b.length){for(var xd=Array(sd.c<<1),yd=0,Hd=sd.c;yd<Hd;){var vd=yd++;xd[vd]=sd.b[vd];sd.b[vd]=null}sd.b=xd}sd.b[sd.c++]=n}var Id=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Id.qb==Id.ob.length){for(var Fd=Array(Id.qb<<1),Gd=0,Nd=Id.qb;Gd<Nd;){var Ed=Gd++;Fd[Ed]=Id.ob[Ed];Id.ob[Ed]=null}Id.ob=Fd}Id.ob[Id.qb++]=p}var Kc=this.p;if(null!=f){f.Z();if(Kc.c==Kc.b.length){for(var jd=Array(Kc.c<<1),kd=0,Sd=Kc.c;kd<Sd;){var Md=kd++;jd[Md]=Kc.b[Md];Kc.b[Md]=null}Kc.b=jd}Kc.b[Kc.c++]=f}var Vc=this.p;if(null!=l){l.Z();if(Vc.c==Vc.b.length){for(var Wc=Array(Vc.c<<1),Zc=0,td=Vc.c;Zc<td;){var ad=Zc++;Wc[ad]=Vc.b[ad];Vc.b[ad]=null}Vc.b=Wc}Vc.b[Vc.c++]=l}var Sc=this.p;if(null!=k){k.Z();if(Sc.c==Sc.b.length){for(var Qd=Array(Sc.c<<1),Rd=0,Wd=Sc.c;Rd<Wd;){var Jd=Rd++;Qd[Jd]=Sc.b[Jd];Sc.b[Jd]=null}Sc.b=Qd}Sc.b[Sc.c++]=k}},Am:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],d=this.p,d=0==d.qb?new O:d.ob[--d.qb];c.x=a.v;c.y=a.A;c.z=a.B;d.e00=a.o;d.e01=a.f;d.e02=a.h;d.e10=a.i;d.e11=a.m;d.e12=a.j;d.e20=a.l;d.e21=a.g;d.e22=a.s;a=this.rh;for(var f=this.dk,h=0;5>h;)for(var l=h++,g=0,k=this.rh[l].length;g<k;){var m=g++,n=f[l][m],q=this.bk[l][m];n.x=q.x;n.y=q.y;n.z=q.z;var q=n.x*d.e10+n.y*d.e11+n.z*d.e12,p=n.x*d.e20+n.y*d.e21+n.z*d.e22;n.x=n.x*d.e00+n.y*d.e01+n.z*d.e02;n.y=q;n.z=p;n=a[l][m];m=f[l][m];n.x=m.x;n.y=m.y;n.z=m.z;m=n;n=m.y*b;q=m.z*b;m.x=m.x*b;m.y=n;m.z=q;n=m.y+c.y;q=m.z+c.z;m.x=m.x+c.x;m.y=n;m.z=q}for(b=0;4>b;)for(h=b++,l=0;8>l;){var r=l++,v;h&&3!=h&&!this.wireframe&&(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],n=a[h+1][(r+1)%8],q=f[h][r],p=f[h][(r+1)%8],v=f[h+1][r],r=f[h+1][(r+1)%8],this.rect(g,m,n,k,q,v,r,p,e))}e=this.p;if(null!=c){c.Z();if(e.c==e.b.length){a=Array(e.c<<1);f=0;for(b=e.c;f<b;)h=f++,a[h]=e.b[h],e.b[h]=null;e.b=a}e.b[e.c++]=c}c=this.p;if(null!=d){d.e00=1;d.e01=0;d.e02=0;d.e10=0;d.e11=1;d.e12=0;d.e20=0;d.e21=0;d.e22=1;if(c.qb==c.ob.length){e=Array(c.qb<<1);a=0;for(f=c.qb;a<f;)b=a++,e[b]=c.ob[b],c.ob[b]=null;c.ob=e}c.ob[c.qb++]=d}},Pl:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],f=this.p,h=0==f.c?new t:f.b[--f.c],l=this.p,g=0==l.c?new t:l.b[--l.c],k=this.p,m=0==k.c?new t:k.b[--k.c],n=this.p,q=0==n.qb?new O:n.ob[--n.qb];m.x=a.v;m.y=a.A;m.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;c.Aa(q.e00,q.e10,q.e20);h.Aa(q.e01,q.e11,q.e21);g.Aa(q.e02,q.e12,q.e22);var p=b.x,r=b.y,v=b.z,aa=this.p,w=0==aa.c?new t:aa.b[--aa.c];w.x=m.x;w.y=m.y;w.z=m.z;var B=-p,u=w.y+c.y*B,D=w.z+c.z*B;w.x+=c.x*B;w.y=u;w.z=D;var V=-r,A=w.y+h.y*V,E=w.z+h.z*V;w.x+=h.x*V;w.y=A;w.z=E;var x=-v,Bb=w.y+g.y*x,N=w.z+g.z*x;w.x+=g.x*x;w.y=Bb;w.z=N;var I=this.p,F=0==I.c?new t:I.b[--I.c];F.x=m.x;F.y=m.y;F.z=m.z;var C=-p,L=F.y+c.y*C,M=F.z+c.z*C;F.x+=c.x*C;F.y=L;F.z=M;var ga=-r,Ub=F.y+h.y*ga,na=F.z+h.z*ga;F.x+=h.x*ga;F.y=Ub;F.z=na;var ka=F.y+g.y*v,bb=F.z+g.z*v;F.x+=g.x*v;F.y=ka;F.z=bb;var U=this.p,R=0==U.c?new t:U.b[--U.c];R.x=m.x;R.y=m.y;R.z=m.z;var lc=-p,Na=R.y+c.y*lc,Ra=R.z+c.z*lc;R.x+=c.x*lc;R.y=Na;R.z=Ra;var yc=R.y+h.y*r,Pa=R.z+h.z*r;R.x+=h.x*r;R.y=yc;R.z=Pa;var Ba=-v,Hb=R.y+g.y*Ba,H=R.z+g.z*Ba;R.x+=g.x*Ba;R.y=Hb;R.z=H;var Qa=this.p,ba=0==Qa.c?new t:Qa.b[--Qa.c];ba.x=m.x;ba.y=m.y;ba.z=m.z;var Q=-p,P=ba.y+c.y*Q,ya=ba.z+c.z*Q;ba.x+=c.x*Q;ba.y=P;ba.z=ya;var ta=ba.y+h.y*r,W=ba.z+h.z*r;ba.x+=h.x*r;ba.y=ta;ba.z=W;var pa=ba.y+g.y*v,y=ba.z+g.z*v;ba.x+=g.x*v;ba.y=pa;ba.z=y;var Ia=this.p,ca=0==Ia.c?new t:Ia.b[--Ia.c];ca.x=m.x;ca.y=m.y;ca.z=m.z;var Ea=ca.y+c.y*p,za=ca.z+c.z*p;ca.x+=c.x*p;ca.y=Ea;ca.z=za;var Fa=-r,Sa=ca.y+h.y*Fa,la=ca.z+h.z*Fa;ca.x+=h.x*Fa;ca.y=Sa;ca.z=la;var Z=-v,Ga=ca.y+g.y*Z,ra=ca.z+g.z*Z;ca.x+=g.x*Z;ca.y=Ga;ca.z=ra;var va=this.p,J=0==va.c?new t:va.b[--va.c];J.x=m.x;J.y=m.y;J.z=m.z;var La=J.y+c.y*p,Xa=J.z+c.z*p;J.x+=c.x*p;J.y=La;J.z=Xa;var S=-r,Ya=J.y+h.y*S,T=J.z+h.z*S;J.x+=h.x*S;J.y=Ya;J.z=T;var K=J.y+g.y*v,ia=J.z+g.z*v;J.x+=g.x*v;J.y=K;J.z=ia;var gb=this.p,da=0==gb.c?new t:gb.b[--gb.c];da.x=m.x;da.y=m.y;da.z=m.z;var qa=da.y+c.y*p,sa=da.z+c.z*p;da.x+=c.x*p;da.y=qa;da.z=sa;var fb=da.y+h.y*r,jb=da.z+h.z*r;da.x+=h.x*r;da.y=fb;da.z=jb;var Za=-v,ma=da.y+g.y*Za,oa=da.z+g.z*Za;da.x+=g.x*Za;da.y=ma;da.z=oa;var Ja=this.p,Ha=0==Ja.c?new t:Ja.b[--Ja.c];Ha.x=m.x;Ha.y=m.y;Ha.z=m.z;var ob=Ha.y+c.y*p,fa=Ha.z+c.z*p;Ha.x+=c.x*p;Ha.y=ob;Ha.z=fa;var ea=Ha.y+h.y*r,ja=Ha.z+h.z*r;Ha.x+=h.x*r;Ha.y=ea;Ha.z=ja;var cb=Ha.y+g.y*v,Aa=Ha.z+g.z*v;Ha.x+=g.x*v;Ha.y=cb;Ha.z=Aa;if(!this.wireframe){var sb=this.p,Ua=0==sb.c?new t:sb.b[--sb.c];Ua.x=c.x;Ua.y=c.y;Ua.z=c.z;var qb=-Ua.y,rb=-Ua.z;Ua.x=-Ua.x;Ua.y=qb;Ua.z=rb;var tb=this.p,Va=0==tb.c?new t:tb.b[--tb.c];Va.x=h.x;Va.y=h.y;Va.z=h.z;var xb=-Va.y,rc=-Va.z;Va.x=-Va.x;Va.y=xb;Va.z=rc;var $a=this.p,ua=0==$a.c?new t:$a.b[--$a.c];ua.x=g.x;ua.y=g.y;ua.z=g.z;var Yb=-ua.y,G=-ua.z;ua.x=-ua.x;ua.y=Yb;ua.z=G;this.rect(w,F,ba,R,Ua,Ua,Ua,Ua,e);this.rect(ca,da,Ha,J,c,c,c,c,e);this.rect(w,ca,J,F,Va,Va,Va,Va,e);this.rect(R,ba,Ha,da,h,h,h,h,e);this.rect(w,R,da,ca,ua,ua,ua,ua,e);this.rect(F,J,Ha,ba,g,g,g,g,e);var pb=this.p;if(null!=Ua){Ua.Z();if(pb.c==pb.b.length){for(var db=Array(pb.c<<1),oc=0,ab=pb.c;oc<ab;){var hb=oc++;db[hb]=pb.b[hb];pb.b[hb]=null}pb.b=db}pb.b[pb.c++]=Ua}var z=this.p;if(null!=Va){Va.Z();if(z.c==z.b.length){for(var Db=Array(z.c<<1),wa=0,xa=z.c;wa<xa;){var Fb=wa++;Db[Fb]=z.b[Fb];z.b[Fb]=null}z.b=Db}z.b[z.c++]=Va}var Oa=this.p;if(null!=ua){ua.Z();if(Oa.c==Oa.b.length){for(var nb=Array(Oa.c<<1),wb=0,yb=Oa.c;wb<yb;){var eb=wb++;nb[eb]=Oa.b[eb];Oa.b[eb]=null}Oa.b=nb}Oa.b[Oa.c++]=ua}}var Y=this.p;if(null!=w){w.Z();if(Y.c==Y.b.length){for(var Ma=Array(Y.c<<1),kb=0,Ta=Y.c;kb<Ta;){var ib=kb++;Ma[ib]=Y.b[ib];Y.b[ib]=null}Y.b=Ma}Y.b[Y.c++]=w}var Ka=this.p;if(null!=F){F.Z();if(Ka.c==Ka.b.length){for(var Kb=Array(Ka.c<<1),Da=0,X=Ka.c;Da<X;){var Cb=Da++;Kb[Cb]=Ka.b[Cb];Ka.b[Cb]=null}Ka.b=Kb}Ka.b[Ka.c++]=F}var Ca=this.p;if(null!=R){R.Z();if(Ca.c==Ca.b.length){for(var mb=Array(Ca.c<<1),vb=0,ec=Ca.c;vb<ec;){var Ab=vb++;mb[Ab]=Ca.b[Ab];Ca.b[Ab]=null}Ca.b=mb}Ca.b[Ca.c++]=R}var Wa=this.p;if(null!=ba){ba.Z();if(Wa.c==Wa.b.length){for(var ub=Array(Wa.c<<1),xc=0,Lb=Wa.c;xc<Lb;){var jc=xc++;ub[jc]=Wa.b[jc];Wa.b[jc]=null}Wa.b=ub}Wa.b[Wa.c++]=ba}var pc=this.p;if(null!=ca){ca.Z();if(pc.c==pc.b.length){for(var kc=Array(pc.c<<1),ac=0,Vb=pc.c;ac<Vb;){var Wb=ac++;kc[Wb]=pc.b[Wb];pc.b[Wb]=null}pc.b=kc}pc.b[pc.c++]=ca}var Qb=this.p;if(null!=J){J.Z();if(Qb.c==Qb.b.length){for(var fc=Array(Qb.c<<1),Rb=0,Ob=Qb.c;Rb<Ob;){var Xb=Rb++;fc[Xb]=Qb.b[Xb];Qb.b[Xb]=null}Qb.b=fc}Qb.b[Qb.c++]=J}var gc=this.p;if(null!=da){da.Z();if(gc.c==gc.b.length){for(var Ib=Array(gc.c<<1),Zb=0,lb=gc.c;Zb<lb;){var Gb=Zb++;Ib[Gb]=gc.b[Gb];gc.b[Gb]=null}gc.b=Ib}gc.b[gc.c++]=da}var zb=this.p;if(null!=Ha){Ha.Z();if(zb.c==zb.b.length){for(var Mb=Array(zb.c<<1),qc=0,mc=zb.c;qc<mc;){var Nb=qc++;Mb[Nb]=zb.b[Nb];zb.b[Nb]=null}zb.b=Mb}zb.b[zb.c++]=Ha}var Ic=this.p;if(null!=m){m.Z();if(Ic.c==Ic.b.length){for(var Sb=Array(Ic.c<<1),sc=0,vc=Ic.c;sc<vc;){var Tb=sc++;Sb[Tb]=Ic.b[Tb];Ic.b[Tb]=null}Ic.b=Sb}Ic.b[Ic.c++]=m}var Eb=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(Eb.qb==Eb.ob.length){for(var bc=Array(Eb.qb<<1),ic=0,tc=Eb.qb;ic<tc;){var cc=ic++;bc[cc]=Eb.ob[cc];Eb.ob[cc]=null}Eb.ob=bc}Eb.ob[Eb.qb++]=q}var Jb=this.p;if(null!=c){c.Z();if(Jb.c==Jb.b.length){for(var $b=Array(Jb.c<<1),nc=0,hc=Jb.c;nc<hc;){var uc=nc++;$b[uc]=Jb.b[uc];Jb.b[uc]=null}Jb.b=$b}Jb.b[Jb.c++]=c}var Pb=this.p;if(null!=h){h.Z();if(Pb.c==Pb.b.length){for(var zc=Array(Pb.c<<1),Ac=0,Bc=Pb.c;Ac<Bc;){var wc=Ac++;zc[wc]=Pb.b[wc];Pb.b[wc]=null}Pb.b=zc}Pb.b[Pb.c++]=h}var dc=this.p;if(null!=g){g.Z();if(dc.c==dc.b.length){for(var Cc=Array(dc.c<<1),Ec=0,Gc=dc.c;Ec<Gc;){var Dc=Ec++;Cc[Dc]=dc.b[Dc];dc.b[Dc]=null}dc.b=Cc}dc.b[dc.c++]=g}},rect:function(){},bb:function(){},tb:function(){},Qa:function(){},ra:Tb};Qe.aa=!0;Qe.prototype={ra:Qe};cd.aa=!0;Sb.aa=!0;Sb.prototype={jh:function(){},sh:function(){},nh:function(){},vi:function(){},Gg:function(){},mh:function(){},lh:function(){},$e:function(){},ra:Sb};ic.aa=!0;bd.aa=!0;bd.prototype={Vd:function(a,b){b.Ce=this.C;b.De=this.D;var e,d,c,f,h,l,g,k,m;e=this.Ka.mg;d=this.Ka.ng;c=this.Ka.og;f=this.Ka.Xi;h=this.Ka.Yi;l=this.Ka.Zi;g=this.Ka.Gi;k=this.Ka.Hi;m=this.Ka.Ii;for(var n=Math.sqrt(this.uc.Fj*this.vc.Fj),q=Math.sqrt(this.uc.Pj*this.vc.Pj),p=this.Ka.Xd,r=b.La=0;r<p;){var v=r++,v=this.Ka.tc[v];if(0>v.Dc)v.Jf=!0,v=v.Wd,v.Zc=0,v.yc=0,v.xc=0,v.ub=0,v.Ue=0,v.Ve=0,v.We=0;else{v.Jf=!1;var t=b.rows[b.La++];t.friction=n;t.Na=0;var w=t.Eg;w.wa=e;w.xa=d;w.ya=c;w.Ca=e;w.Da=d;w.Ea=c;w.ba=v.Eb*c-v.Fb*d;w.ca=v.Fb*e-v.Db*c;w.da=v.Db*d-v.Eb*e;w.fa=v.cc*c-v.dc*d;w.ga=v.dc*e-v.bc*c;w.ha=v.bc*d-v.cc*e;w=t.vj;w.wa=f;w.xa=h;w.ya=l;w.Ca=f;w.Da=h;w.Ea=l;w.ba=v.Eb*l-v.Fb*h;w.ca=v.Fb*f-v.Db*l;w.da=v.Db*h-v.Eb*f;w.fa=v.cc*l-v.dc*h;w.ga=v.dc*f-v.bc*l;w.ha=v.bc*h-v.cc*f;w=t.uj;w.wa=g;w.xa=k;w.ya=m;w.Ca=g;w.Da=k;w.Ea=m;w.ba=v.Eb*m-v.Fb*k;w.ca=v.Fb*g-v.Db*m;w.da=v.Db*k-v.Eb*g;w.fa=v.cc*m-v.dc*k;w.ga=v.dc*g-v.bc*m;w.ha=v.bc*k-v.cc*g;w=t.Eg;w=w.wa*this.C.eb+w.xa*this.C.fb+w.ya*this.C.gb+(w.ba*this.C.ib+w.ca*this.C.jb+w.da*this.C.kb)-(w.Ca*this.D.eb+w.Da*this.D.fb+w.Ea*this.D.gb+(w.fa*this.D.ib+w.ga*this.D.jb+w.ha*this.D.kb));t.Ga=w<-F.contactEnableBounceThreshold&&!v.Se?-w*q:0;this.Ec==ic.BAUMGARTE&&v.Dc>F.linearSlop&&(w=(v.Dc-F.linearSlop)*F.velocityBaumgarte*a.invDt,t.Ga<w&&(t.Ga=w));v.Se||(w=v.Wd,w.Zc=0,w.yc=0,w.xc=0,w.ub=0,w.Ue=0,w.Ve=0,w.We=0);t.va=v.Wd}}},dd:function(a){a.Ce=this.C;a.De=this.D;var b,e,d;b=this.Ka.mg;e=this.Ka.ng;d=this.Ka.og;for(var c=this.Ka.Xd,f=a.La=0;f<c;){var h=f++,h=this.Ka.tc[h];if(!h.Jf){var l=a.rows[a.La++],g=l.Eg;g.wa=b;g.xa=e;g.ya=d;g.Ca=b;g.Da=e;g.Ea=d;g.ba=h.Eb*d-h.Fb*e;g.ca=h.Fb*b-h.Db*d;g.da=h.Db*e-h.Eb*b;g.fa=h.cc*d-h.dc*e;g.ga=h.dc*b-h.bc*d;g.ha=h.bc*e-h.cc*b;l.Ga=h.Dc-F.linearSlop;0>l.Ga&&(l.Ga=0);l.va=h.Wd}}},Ik:function(){this.Ka.Kl(this.aj,this.bj)},bb:function(){return this.uc},tb:function(){return this.vc},Qa:function(){return this.Ka},Zj:function(){for(var a=0,b=this.Ka.Xd;a<b;){var e=a++;if(0<=this.Ka.tc[e].Dc)return!0}return!1},ra:bd};kj.aa=!0;kj.prototype={Zd:function(a){this.Zc=a.Zc;this.yc=a.yc;this.xc=a.xc;this.Ue=a.Ue;this.Ve=a.Ve;this.We=a.We},ra:kj};Pb.aa=!0;Pb.prototype={Je:function(){for(var a=0,b=this.Xd;a<b;){var e=a++,e=this.tc[e];e.bf=0;e.cf=0;e.df=0;e.ef=0;e.ff=0;e.gf=0;e.Db=0;e.Eb=0;e.Fb=0;e.bc=0;e.cc=0;e.dc=0;e.Fd=0;e.Gd=0;e.Hd=0;e.Id=0;e.Jd=0;e.Kd=0;e.Dc=0;var d=e.Wd;d.Zc=0;d.yc=0;d.xc=0;d.ub=0;d.Ue=0;d.Ve=0;d.We=0;e.Se=!1;e.Jf=!1;e.sc=-1}this.Xd=0},Jm:function(a){this.mg=a.x;this.ng=a.y;this.og=a.z;var b=a.x,e=a.y;a=a.z;var d=b*b,c=e*e,f=a*a,h;d<c?d<f?(f=1/Math.sqrt(c+f),d=0,c=-a*f,f*=e,h=e*f-a*c,a=-b*f,b*=c):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d):c<f?(f=1/Math.sqrt(d+f),d=a*f,c=0,f*=-b,h=e*f,a=a*d-b*f,b=-e*d):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d);this.Xi=d;this.Yi=c;this.Zi=f;this.Gi=h;this.Hi=a;this.Ii=b},Kl:function(a,b){for(var e=0,d=this.Xd;e<d;){var c=e++,c=this.tc[c],f,h,l;f=a.o*c.bf+a.f*c.cf+a.h*c.df;h=a.i*c.bf+a.m*c.cf+a.j*c.df;l=a.l*c.bf+a.g*c.cf+a.s*c.df;c.Db=f;c.Eb=h;c.Fb=l;f=b.o*c.ef+b.f*c.ff+b.h*c.gf;h=b.i*c.ef+b.m*c.ff+b.j*c.gf;l=b.l*c.ef+b.g*c.ff+b.s*c.gf;c.bc=f;c.cc=h;c.dc=l;c.Fd=c.Db+a.v;c.Gd=c.Eb+a.A;c.Hd=c.Fb+a.B;c.Id=c.bc+b.v;c.Jd=c.cc+b.A;c.Kd=c.dc+b.B;c.Dc=-((c.Fd-c.Id)*this.mg+(c.Gd-c.Jd)*this.ng+(c.Hd-c.Kd)*this.og)}},tb:function(){var a=new t;a.x=this.mg;a.y=this.ng;a.z=this.og;return a},Lb:function(a){a.x=this.mg;a.y=this.ng;a.z=this.og},qc:function(){var a=new t;a.x=this.Xi;a.y=this.Yi;a.z=this.Zi;return a},rc:function(a){a.x=this.Xi;a.y=this.Yi;a.z=this.Zi},Qa:function(){var a=new t;a.x=this.Gi;a.y=this.Hi;a.z=this.Ii;return a},bb:function(a){a.x=this.Gi;a.y=this.Hi;a.z=this.Ii},mc:function(){return this.tc},lc:function(){return this.Xd},ra:Pb};hc.aa=!0;hc.prototype={Lb:function(){var a=new t;a.x=this.Fd;a.y=this.Gd;a.z=this.Hd;return a},lc:function(a){a.x=this.Fd;a.y=this.Gd;a.z=this.Hd},mc:function(){var a=new t;a.x=this.Id;a.y=this.Jd;a.z=this.Kd;return a},qc:function(a){a.x=this.Id;a.y=this.Jd;a.z=this.Kd},bb:function(){return this.Dc},zc:function(){return this.Se},tb:function(){return this.Wd.Zc},rc:function(){return this.Wd.yc},Qa:function(){return this.Wd.xc},Cc:function(){return!this.Jf},ra:hc};jj.aa=!0;jj.prototype={Hn:function(){for(var a=this.Ka.Xd;0<=--a;){var b=this.Ka.tc[a],e,d;e=b.Fd-b.Id;d=b.Gd-b.Jd;var b=b.Hd-b.Kd,c=this.Ka.mg*e+this.Ka.ng*d+this.Ka.og*b;c>F.contactPersistenceThreshold?this.xm(a):(e+=this.Ka.mg*-c,d+=this.Ka.ng*-c,b+=this.Ka.og*-c,e*e+d*d+b*b>F.contactPersistenceThreshold*F.contactPersistenceThreshold&&this.xm(a))}},xm:function(a){var b=--this.Ka.Xd;if(a!=b){var e=this.Ka.tc[a];this.Ka.tc[a]=this.Ka.tc[b];this.Ka.tc[b]=e}a=this.Ka.tc[b];a.bf=0;a.cf=0;a.df=0;a.ef=0;a.ff=0;a.gf=0;a.Db=0;a.Eb=0;a.Fb=0;a.bc=0;a.cc=0;a.dc=0;a.Fd=0;a.Gd=0;a.Hd=0;a.Id=0;a.Jd=0;a.Kd=0;a.Dc=0;b=a.Wd;b.Zc=0;b.yc=0;b.xc=0;b.ub=0;b.Ue=0;b.Ve=0;b.We=0;a.Se=!1;a.Jf=!1;a.sc=-1},Wm:function(a,b,e){var d=this.Ka.Xd;if(d==F.maxManifoldPoints){var d=this.Ka.tc[this.an(a,b,e)],c=a.position1;d.Fd=c.x;d.Gd=c.y;d.Hd=c.z;c=a.position2;d.Id=c.x;d.Jd=c.y;d.Kd=c.z;d.Db=d.Fd-b.v;d.Eb=d.Gd-b.A;d.Fb=d.Hd-b.B;d.bc=d.Id-e.v;d.cc=d.Jd-e.A;d.dc=d.Kd-e.B;var f,c=b.o*d.Db+b.i*d.Eb+b.l*d.Fb;f=b.f*d.Db+b.m*d.Eb+b.g*d.Fb;b=b.h*d.Db+b.j*d.Eb+b.s*d.Fb;d.bf=c;d.cf=f;d.df=b;b=e.o*d.bc+e.i*d.cc+e.l*d.dc;c=e.f*d.bc+e.m*d.cc+e.g*d.dc;e=e.h*d.bc+e.j*d.cc+e.s*d.dc;d.ef=b;d.ff=c;d.gf=e;d.Dc=a.depth;e=d.Wd;e.Zc=0;e.yc=0;e.xc=0;e.ub=0;e.Ue=0;e.Ve=0;e.We=0;d.sc=a.id;d.Se=!1;d.Jf=!1}else d=this.Ka.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Db=d.Fd-b.v,d.Eb=d.Gd-b.A,d.Fb=d.Hd-b.B,d.bc=d.Id-e.v,d.cc=d.Jd-e.A,d.dc=d.Kd-e.B,c=b.o*d.Db+b.i*d.Eb+b.l*d.Fb,f=b.f*d.Db+b.m*d.Eb+b.g*d.Fb,b=b.h*d.Db+b.j*d.Eb+b.s*d.Fb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.bc+e.i*d.cc+e.l*d.dc,c=e.f*d.bc+e.m*d.cc+e.g*d.dc,e=e.h*d.bc+e.j*d.cc+e.s*d.dc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth,e=d.Wd,e.Zc=0,e.yc=0,e.xc=0,e.ub=0,e.Ue=0,e.Ve=0,e.We=0,d.sc=a.id,d.Se=!1,d.Jf=!1,this.Ka.Xd++},an:function(a,b){var e=this.Ka.tc[0],d=this.Ka.tc[1],c=this.Ka.tc[2],f=this.Ka.tc[3],h=e.Dc,l=0;d.Dc>h&&(h=d.Dc,l=1);c.Dc>h&&(h=c.Dc,l=2);f.Dc>h&&(h=f.Dc,l=3);var g,k,m,n=a.position1;g=n.x;k=n.y;m=n.z;g-=b.v;k-=b.A;m-=b.B;var q=d.Db,p=d.Eb,r=d.Fb,v=c.Db,t=c.Eb,w=c.Fb,B=f.Db,u=f.Eb,D=f.Fb,V,A,E,x,F,N,I,C,L,M,O,ga,Ub,na,ka,bb,U,R;V=v-q;A=t-p;E=w-r;x=g-B;F=k-u;N=m-D;I=B-q;C=u-p;L=D-r;M=g-v;O=k-t;ga=m-w;Ub=g-q;na=k-p;ka=m-r;bb=B-v;U=u-t;R=D-w;var lc,Na,Ra,yc,Pa,Ba,Hb,H,Qa;lc=A*N-E*F;Na=E*x-V*N;Ra=V*F-A*x;yc=C*ga-L*O;Pa=L*M-I*ga;Ba=I*O-C*M;Hb=na*R-ka*U;H=ka*bb-Ub*R;Qa=Ub*U-na*bb;var ba=lc*lc+Na*Na+Ra*Ra,Q=yc*yc+Pa*Pa+Ba*Ba,P=Hb*Hb+H*H+Qa*Qa,ya=ba>Q?ba>P?ba:P:Q>P?Q:P,ta=e.Db,W=e.Eb,pa=e.Fb,y=c.Db,Ia=c.Eb,ca=c.Fb,Ea=f.Db,za=f.Eb,Fa=f.Fb,Sa,la,Z,Ga,ra,va,J,La,Xa,S,Ya,T,K,ia,gb,da,qa,sa;Sa=y-ta;la=Ia-W;Z=ca-pa;Ga=g-Ea;ra=k-za;va=m-Fa;J=Ea-ta;La=za-W;Xa=Fa-pa;S=g-y;Ya=k-Ia;T=m-ca;K=g-ta;ia=k-W;gb=m-pa;da=Ea-y;qa=za-Ia;sa=Fa-ca;var fb,jb,Za,ma,oa,Ja,Ha,ob,fa;fb=la*va-Z*ra;jb=Z*Ga-Sa*va;Za=Sa*ra-la*Ga;ma=La*T-Xa*Ya;oa=Xa*S-J*T;Ja=J*Ya-La*S;Ha=ia*sa-gb*qa;ob=gb*da-K*sa;fa=K*qa-ia*da;var ea=fb*fb+jb*jb+Za*Za,ja=ma*ma+oa*oa+Ja*Ja,cb=Ha*Ha+ob*ob+fa*fa,Aa=ea>ja?ea>cb?ea:cb:ja>cb?ja:cb,sb=e.Db,Ua=e.Eb,qb=e.Fb,rb=d.Db,tb=d.Eb,Va=d.Fb,xb=f.Db,rc=f.Eb,$a=f.Fb,ua,Yb,G,pb,db,wa,ab,hb,z,Db,Ca,xa,Fb,Oa,nb,wb,yb,eb;ua=rb-sb;Yb=tb-Ua;G=Va-qb;pb=g-xb;db=k-rc;wa=m-$a;ab=xb-sb;hb=rc-Ua;z=$a-qb;Db=g-rb;Ca=k-tb;xa=m-Va;Fb=g-sb;Oa=k-Ua;nb=m-qb;wb=xb-rb;yb=rc-tb;eb=$a-Va;var Y,Ma,kb,Ta,ib,Ka,Da,Wa,X;Y=Yb*wa-G*db;Ma=G*pb-ua*wa;kb=ua*db-Yb*pb;Ta=hb*xa-z*Ca;ib=z*Db-ab*xa;Ka=ab*Ca-hb*Db;Da=Oa*eb-nb*yb;Wa=nb*wb-Fb*eb;X=Fb*yb-Oa*wb;var Cb=Y*Y+Ma*Ma+kb*kb,mb=Ta*Ta+ib*ib+Ka*Ka,vb=Da*Da+Wa*Wa+X*X,Ab=Cb>mb?Cb>vb?Cb:vb:mb>vb?mb:vb,ec=e.Db,ub=e.Eb,zb=e.Fb,Eb=d.Db,xc=d.Eb,Lb=d.Fb,jc=c.Db,pc=c.Eb,kc=c.Fb,ac,Vb,Wb,Qb,fc,Rb,Ob,Xb,gc,Ib,Zb,lb,Gb,Jb,Nb,qc,mc,Pb;ac=Eb-ec;Vb=xc-ub;Wb=Lb-zb;Qb=g-jc;fc=k-pc;Rb=m-kc;Ob=jc-ec;Xb=pc-ub;gc=kc-zb;Ib=g-Eb;Zb=k-xc;lb=m-Lb;Gb=g-ec;Jb=k-ub;Nb=m-zb;qc=jc-Eb;mc=pc-xc;Pb=kc-Lb;var Tb,Mb,sc,vc,Sb,bc,cc,dc,ic;Tb=Vb*Rb-Wb*fc;Mb=Wb*Qb-ac*Rb;sc=ac*fc-Vb*Qb;vc=Xb*lb-gc*Zb;Sb=gc*Ib-Ob*lb;bc=Ob*Zb-Xb*Ib;cc=Jb*Pb-Nb*mc;dc=Nb*qc-Gb*Pb;ic=Gb*mc-Jb*qc;var $b=Tb*Tb+Mb*Mb+sc*sc,tc=vc*vc+Sb*Sb+bc*bc,nc=cc*cc+dc*dc+ic*ic,uc=$b>tc?$b>nc?$b:nc:tc>nc?tc:nc,hc=ya,wc=0;if(Aa>hc&&1!=l||!l)hc=Aa,wc=1;Ab>hc&&2!=l&&(hc=Ab,wc=2);uc>hc&&3!=l&&(hc=uc,wc=3);return wc},dn:function(a,b,e){for(var d=F.contactPersistenceThreshold*F.contactPersistenceThreshold,c=-1,f=0,h=this.Ka.Xd;f<h;){var l=f++,g=this.Ka.tc[l],k,m,n,q,p,r;p=a.position1;k=p.x;m=p.y;n=p.z;r=a.position2;q=r.x;p=r.y;r=r.z;k-=b.v;m-=b.A;n-=b.B;q-=e.v;p-=e.A;r-=e.B;k=g.Db-k;m=g.Eb-m;n=g.Fb-n;q=g.bc-q;p=g.cc-p;g=g.dc-r;r=k*k+m*m+n*n;g=q*q+p*p+g*g;g=r<g?r:g;g<d&&(d=g,c=l)}return c},Pn:function(a,b,e){this.ol=this.Ka.Xd;for(var d=0,c=this.ol;d<c;){var f=d++,h=this.pl[f],f=this.Ka.tc[f];h.bf=f.bf;h.cf=f.cf;h.df=f.df;h.ef=f.ef;h.ff=f.ff;h.gf=f.gf;h.Db=f.Db;h.Eb=f.Eb;h.Fb=f.Fb;h.bc=f.bc;h.cc=f.cc;h.dc=f.dc;h.Fd=f.Fd;h.Gd=f.Gd;h.Hd=f.Hd;h.Id=f.Id;h.Jd=f.Jd;h.Kd=f.Kd;h.Dc=f.Dc;h.Wd.Zd(f.Wd);h.sc=f.sc;h.Se=f.Se;h.Jf=!1}d=a.numPoints;this.Ka.Xd=d;for(c=0;c<d;){var f=c++,h=this.Ka.tc[f],f=a.points[f],l=f.position1;h.Fd=l.x;h.Gd=l.y;h.Hd=l.z;l=f.position2;h.Id=l.x;h.Jd=l.y;h.Kd=l.z;h.Db=h.Fd-b.v;h.Eb=h.Gd-b.A;h.Fb=h.Hd-b.B;h.bc=h.Id-e.v;h.cc=h.Jd-e.A;h.dc=h.Kd-e.B;var g,k,l=b.o*h.Db+b.i*h.Eb+b.l*h.Fb;g=b.f*h.Db+b.m*h.Eb+b.g*h.Fb;k=b.h*h.Db+b.j*h.Eb+b.s*h.Fb;h.bf=l;h.cf=g;h.df=k;l=e.o*h.bc+e.i*h.cc+e.l*h.dc;g=e.f*h.bc+e.m*h.cc+e.g*h.dc;k=e.h*h.bc+e.j*h.cc+e.s*h.dc;h.ef=l;h.ff=g;h.gf=k;h.Dc=f.depth;l=h.Wd;l.Zc=0;l.yc=0;l.xc=0;l.ub=0;l.Ue=0;l.Ve=0;l.We=0;h.sc=f.id;h.Se=!1;h.Jf=!1;f=0;for(l=this.ol;f<l;)if(g=f++,g=this.pl[g],h.sc==g.sc){h.Wd.Zd(g.Wd);h.Se=!0;break}}},Bn:function(a,b,e){this.Ka.Kl(b,e);for(var d=0,c=this.Ka.Xd;d<c;){var f=d++;this.Ka.tc[f].Se=!0}if(1!=a.numPoints)throw Error("assertion error: result.numPoints == 1 is false");a=a.points[0];d=this.dn(a,b,e);-1==d?this.Wm(a,b,e):(d=this.Ka.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Db=d.Fd-b.v,d.Eb=d.Gd-b.A,d.Fb=d.Hd-b.B,d.bc=d.Id-e.v,d.cc=d.Jd-e.A,d.dc=d.Kd-e.B,c=b.o*d.Db+b.i*d.Eb+b.l*d.Fb,f=b.f*d.Db+b.m*d.Eb+b.g*d.Fb,b=b.h*d.Db+b.j*d.Eb+b.s*d.Fb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.bc+e.i*d.cc+e.l*d.dc,c=e.f*d.bc+e.m*d.cc+e.g*d.dc,e=e.h*d.bc+e.j*d.cc+e.s*d.dc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth);this.Hn()},ra:jj};ld.aa=!0;ld.prototype={Bm:function(){this.wc=0;if(0!=this.wa||0!=this.xa||0!=this.ya||0!=this.Ca||0!=this.Da||0!=this.Ea)this.wc|=1;if(0!=this.ba||0!=this.ca||0!=this.da||0!=this.fa||0!=this.ga||0!=this.ha)this.wc|=2},ra:ld};Tf.aa=!0;Tf.prototype={ra:Tf};ij.aa=!0;ij.prototype={ra:ij};Ne.aa=!0;Ne.prototype={ra:Ne};hj.aa=!0;hj.prototype={ra:hj};L.aa=!0;L.prototype={ed:function(){var a=this.C.a,b=this.D.a,e,d,c;e=a.o*this.Pi+a.f*this.Qi+a.h*this.Ri;d=a.i*this.Pi+a.m*this.Qi+a.j*this.Ri;c=a.l*this.Pi+a.g*this.Qi+a.s*this.Ri;this.Qb=e;this.Rb=d;this.Sb=c;e=b.o*this.Si+b.f*this.Ti+b.h*this.Ui;d=b.i*this.Si+b.m*this.Ti+b.j*this.Ui;c=b.l*this.Si+b.g*this.Ti+b.s*this.Ui;this.Tb=e;this.Ub=d;this.Vb=c;this.Df=this.Qb+a.v;this.Ef=this.Rb+a.A;this.Ff=this.Sb+a.B;this.Gf=this.Tb+b.v;this.Hf=this.Ub+b.A;this.If=this.Vb+b.B;e=a.o*this.sa+a.f*this.ta+a.h*this.ua;d=a.i*this.sa+a.m*this.ta+a.j*this.ua;c=a.l*this.sa+a.g*this.ta+a.s*this.ua;this.vb=e;this.wb=d;this.xb=c;e=a.o*this.Ab+a.f*this.Bb+a.h*this.Cb;d=a.i*this.Ab+a.m*this.Bb+a.j*this.Cb;c=a.l*this.Ab+a.g*this.Bb+a.s*this.Cb;this.xe=e;this.ye=d;this.ze=c;e=a.o*this.hc+a.f*this.ic+a.h*this.jc;d=a.i*this.hc+a.m*this.ic+a.j*this.jc;a=a.l*this.hc+a.g*this.ic+a.s*this.jc;this.th=e;this.uh=d;this.vh=a;a=b.o*this.lb+b.f*this.mb+b.h*this.nb;e=b.i*this.lb+b.m*this.mb+b.j*this.nb;d=b.l*this.lb+b.g*this.mb+b.s*this.nb;this.Zb=a;this.$b=e;this.ac=d;a=b.o*this.Wg+b.f*this.Xg+b.h*this.Yg;e=b.i*this.Wg+b.m*this.Xg+b.j*this.Yg;d=b.l*this.Wg+b.g*this.Xg+b.s*this.Yg;this.ne=a;this.oe=e;this.pe=d;a=b.o*this.Kc+b.f*this.Lc+b.h*this.Mc;e=b.i*this.Kc+b.m*this.Lc+b.j*this.Mc;b=b.l*this.Kc+b.g*this.Lc+b.s*this.Mc;this.Rg=a;this.Sg=e;this.Tg=b},Vd:function(a,b){b.Ce=this.C;b.De=this.D;b.La=0},dd:function(a){a.Ce=this.C;a.De=this.D;a.La=0},Cl:function(){var a=this.Ai*this.Ai+this.Bi*this.Bi+this.Ci*this.Ci,b=this.Di*this.Di+this.Ei*this.Ei+this.Fi*this.Fi;0<this.Ji&&a>this.Ji*this.Ji?this.kc.sl(this):0<this.Ki&&b>this.Ki*this.Ki&&this.kc.sl(this)},ge:function(){return this.C},Ge:function(){return this.D},Jg:function(){return this.Xb},bb:function(){var a=new t;a.x=this.Df;a.y=this.Ef;a.z=this.Ff;return a},Lb:function(){var a=new t;a.x=this.Gf;a.y=this.Hf;a.z=this.If;return a},tb:function(a){a.x=this.Df;a.y=this.Ef;a.z=this.Ff},lc:function(a){a.x=this.Gf;a.y=this.Hf;a.z=this.If},be:function(){var a=new t;a.x=this.Pi;a.y=this.Qi;a.z=this.Ri;return a},de:function(){var a=new t;a.x=this.Si;a.y=this.Ti;a.z=this.Ui;return a},ce:function(a){a.x=this.Pi;a.y=this.Qi;a.z=this.Ri},ee:function(a){a.x=this.Si;a.y=this.Ti;a.z=this.Ui},Cc:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.vb;e=this.xe;d=this.th;c=this.wb;f=this.ye;h=this.uh;l=this.xb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Ic:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.Zb;e=this.ne;d=this.Rg;c=this.$b;f=this.oe;h=this.Sg;l=this.ac;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Hc:function(a){var b,e,d,c,f,h,l,g,k;b=this.vb;e=this.xe;d=this.th;c=this.wb;f=this.ye;h=this.uh;l=this.xb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Jc:function(a){var b,e,d,c,f,h,l,g,k;b=this.Zb;e=this.ne;d=this.Rg;c=this.$b;f=this.oe;h=this.Sg;l=this.ac;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Qa:function(){return this.gk},Kg:function(a){this.gk=a},cd:function(){return this.Ji},Lg:function(a){this.Ji=a},Pd:function(){return this.Ki},Mg:function(a){this.Ki=a},fe:function(){return this.Ec},Ng:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Ec=a},mc:function(){var a=new t;a.x=this.Ai;a.y=this.Bi;a.z=this.Ci;return a},qc:function(a){a.x=this.Ai;a.y=this.Bi;a.z=this.Ci},rc:function(){var a=new t;a.x=this.Di;a.y=this.Ei;a.z=this.Fi;return a},zc:function(a){a.x=this.Di;a.y=this.Ei;a.z=this.Fi},Bf:function(){return this.ja},He:function(){return this.M},ra:L};vb.aa=!0;vb.Kb=L;vb.prototype=mb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorY*d,d=this.angularErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,B;l=-this.Sb;g=this.Rb;k=this.Sb;m=-this.Qb;n=-this.Rb;q=this.Qb;p=-this.Vb;r=this.Ub;v=this.Vb;t=-this.Tb;w=-this.Ub;B=this.Tb;var u,D=1/(this.C.$a+this.D.$a),V=this.ea.$c,A=this.ea.ad,E=this.ea.bd,x=(this.C.P*V+this.C.R*A+this.C.S*E)*V+(this.C.T*V+this.C.U*A+this.C.V*E)*A+(this.C.W*V+this.C.X*A+this.C.Y*E)*E;u=(this.D.P*V+this.D.R*A+this.D.S*E)*V+(this.D.T*V+this.D.U*A+this.D.V*E)*A+(this.D.W*V+this.D.X*A+this.D.Y*E)*E;if(0<x){var C=V*this.Qb+A*this.Rb+E*this.Sb,C=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-C*C;0<C&&(x=0<this.C.$a?1/(1/x+this.C.Nc*C):0)}0<u&&(V=V*this.Tb+A*this.Ub+E*this.Vb,V=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-V*V,0<V&&(u=0<this.D.$a?1/(1/u+this.D.Nc*V):0));x=x+u?1/(x+u):0;if(0>=this.Lk.frequency||!e){u=this.Ob[0];V=a.rows[a.La++];A=V.Ba;A.wa=0;A.xa=0;A.ya=0;A.Ca=0;A.Da=0;A.Ea=0;A.ba=0;A.ca=0;A.da=0;A.fa=0;A.ga=0;A.ha=0;V.Ga=0;V.Na=0;V.Ja=0;V.Ia=0;V.motorSpeed=0;V.cb=0;V.va=null;V.va=u;u=V;var V=this.Vf,C=this.Kk,E=this.Lk,N,A=F.linearSlop;if(e)E=0,N=1;else{if(0<E.frequency){var A=0,I=6.28318530717958*E.frequency,L=E.dampingRatio;L<F.minSpringDamperDampingRatio&&(L=F.minSpringDamperDampingRatio);N=b.dt;L=2*L*I;I*=I;E.useSymplecticEuler?(E=1/(N*L),N=I/L):(E=1/(N*(N*I+L)),N=I/(N*I+L))}else E=0,N=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<C.motorForce?(u.motorSpeed=C.motorSpeed,u.cb=C.motorForce*b.dt):(u.motorSpeed=0,u.cb=0)}var L=C.lowerLimit,M=C.upperLimit;L>M?V=I=C=0:L==M?(C=-1/0,I=1/0,V-=L):V<L?(C=-1/0,I=0,V=V-L+A,0<V&&(V=0)):V>M?(C=0,I=1/0,V=V-M-A,0>V&&(V=0)):V=I=C=0;u.Ja=C;u.Ia=I;u.Na=E*(D?1/D:0);u.Ga=V*N;u=u.Ba;u.wa=this.ea.$c;u.xa=this.ea.ad;u.ya=this.ea.bd;u.Ca=this.ea.$c;u.Da=this.ea.ad;u.Ea=this.ea.bd;u.ba=-0;u.ca=-l;u.da=-g;u.fa=-0;u.ga=-p;u.ha=-r}u=this.Ob[1];l=a.rows[a.La++];g=l.Ba;g.wa=0;g.xa=0;g.ya=0;g.Ca=0;g.Da=0;g.Ea=0;g.ba=0;g.ca=0;g.da=0;g.fa=0;g.ga=0;g.ha=0;l.Ga=0;l.Na=0;l.Ja=0;l.Ia=0;l.motorSpeed=0;l.cb=0;l.va=u;u=l;u.Ga=c;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=this.ea.Md;u.xa=this.ea.Nd;u.ya=this.ea.Od;u.Ca=this.ea.Md;u.Da=this.ea.Nd;u.Ea=this.ea.Od;u.ba=-k;u.ca=-0;u.da=-m;u.fa=-v;u.ga=-0;u.ha=-t;c=this.Ob[2];u=a.rows[a.La++];k=u.Ba;k.wa=0;k.xa=0;k.ya=0;k.Ca=0;k.Da=0;k.Ea=0;k.ba=0;k.ca=0;k.da=0;k.fa=0;k.ga=0;k.ha=0;u.Ga=0;u.Na=0;u.Ja=0;u.Ia=0;u.motorSpeed=0;u.cb=0;u.va=c;u.Ga=f;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=this.ea.ke;u.xa=this.ea.le;u.ya=this.ea.me;u.Ca=this.ea.ke;u.Da=this.ea.le;u.Ea=this.ea.me;u.ba=-n;u.ca=-q;u.da=-0;u.fa=-w;u.ga=-B;u.ha=-0;if(0>=this.Ek.frequency||!e)f=this.Ob[3],n=a.rows[a.La++],q=n.Ba,q.wa=0,q.xa=0,q.ya=0,q.Ca=0,q.Da=0,q.Ea=0,q.ba=0,q.ca=0,q.da=0,q.fa=0,q.ga=0,q.ha=0,n.Ga=0,n.Na=0,n.Ja=0,n.Ia=0,n.motorSpeed=0,n.cb=0,n.va=f,u=n,f=this.angle,q=this.Dk,w=this.Ek,n=F.angularSlop,e?(e=0,w=1):(0<w.frequency?(n=0,e=6.28318530717958*w.frequency,c=w.dampingRatio,c<F.minSpringDamperDampingRatio&&(c=F.minSpringDamperDampingRatio),B=b.dt,c=2*c*e,k=e*e,w.useSymplecticEuler?(e=1/(B*c),w=k/c):(e=1/(B*(B*k+c)),w=k/(B*k+c))):(e=0,w=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<q.motorTorque?(u.motorSpeed=q.motorSpeed,u.cb=q.motorTorque*b.dt):(u.motorSpeed=0,u.cb=0)),b=q.lowerLimit,q=q.upperLimit,B=.5*(b+q),f=((f-B+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+B,b>q?b=c=B=0:b==q?(B=-1/0,c=1/0,b=f-b):f<b?(B=-1/0,c=0,b=f-b+n,0<b&&(b=0)):f>q?(B=0,c=1/0,b=f-q-n,0>b&&(b=0)):b=c=B=0,u.Ja=B,u.Ia=c,u.Na=e*(x?1/x:0),u.Ga=b*w,u=u.Ba,u.ba=this.ea.$c,u.ca=this.ea.ad,u.da=this.ea.bd,u.fa=this.ea.$c,u.ga=this.ea.ad,u.ha=this.ea.bd;b=this.Ob[4];x=a.rows[a.La++];e=x.Ba;e.wa=0;e.xa=0;e.ya=0;e.Ca=0;e.Da=0;e.Ea=0;e.ba=0;e.ca=0;e.da=0;e.fa=0;e.ga=0;e.ha=0;x.Ga=0;x.Na=0;x.Ja=0;x.Ia=0;x.motorSpeed=0;x.cb=0;x.va=b;u=x;u.Ga=h;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.ba=this.ea.Md;u.ca=this.ea.Nd;u.da=this.ea.Od;u.fa=this.ea.Md;u.ga=this.ea.Nd;u.ha=this.ea.Od;h=this.Ob[5];a=a.rows[a.La++];b=a.Ba;b.wa=0;b.xa=0;b.ya=0;b.Ca=0;b.Da=0;b.Ea=0;b.ba=0;b.ca=0;b.da=0;b.fa=0;b.ga=0;b.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=h;u=a;u.Ga=d;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.ba=this.ea.ke;u.ca=this.ea.le;u.da=this.ea.me;u.fa=this.ea.ke;u.ga=this.ea.le;u.ha=this.ea.me},ed:function(){L.prototype.ed.call(this);var a=this.ea,b=a.$.C.$a,e=a.$.D.$a,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,V,A,E,x,F,C,I,M,O,ga,ha,na,Ub=a.$.vb*a.$.Zb+a.$.wb*a.$.$b+a.$.xb*a.$.ac;if(-1.000001<Ub&&-.999999>Ub){var qa,ka,bb,U=a.$.vb,R=a.$.wb,lc=a.$.xb,Na=U*U,Ra=R*R,yc=lc*lc,Pa;Na<Ra?Na<yc?(Pa=1/Math.sqrt(Ra+yc),qa=0,ka=lc*Pa,bb=-R*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0):Ra<yc?(Pa=1/Math.sqrt(yc+Na),qa=-lc*Pa,ka=0,bb=U*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0);d=qa;c=ka;f=bb;h=0}else{var Ba,Hb,H;Ba=a.$.wb*a.$.ac-a.$.xb*a.$.$b;Hb=a.$.xb*a.$.Zb-a.$.vb*a.$.ac;H=a.$.vb*a.$.$b-a.$.wb*a.$.Zb;var Qa=Math.sqrt(.5*(1+Ub)),Ub=.5/Qa;Ba*=Ub;Hb*=Ub;H*=Ub;d=Ba;c=Hb;f=H;h=Qa}var ba,Q,P,ya,ta,W,pa,y;P=Q=ba=0;ya=1;ta=d;W=c;pa=f;y=h;var Ia=ba*ta+Q*W+P*pa+ya*y;0>Ia&&(Ia=-Ia,ta=-ta,W=-W,pa=-pa,y=-y);if(.999999<Ia){var ca,Ea,za,Fa;ca=ta-ba;Ea=W-Q;za=pa-P;Fa=y-ya;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ea;pa=P+b/(b+e)*za;y=ya+b/(b+e)*Fa;var Sa=ta*ta+W*W+pa*pa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=pa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ia);ta+=ba*-Ia;W+=Q*-Ia;pa+=P*-Ia;y+=ya*-Ia;var Z=ta*ta+W*W+pa*pa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;pa*=Z;y*=Z;var Ga=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;ya*=ra;l=ba+ta*Ga;g=Q+W*Ga;k=P+pa*Ga;m=ya+y*Ga}var va=l,J=g,La=k,Xa=m,S=2*va,Ya=2*J,T=2*La,K=va*S,ia=J*Ya,gb=La*T,da=va*Ya,wa=J*T,sa=va*T,fb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-gb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-gb;t=wa-fb;w=sa-jb;B=wa+fb;u=1-K-ia;var ma,oa;ma=n*a.$.vb+q*a.$.wb+p*a.$.xb;oa=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=w*a.$.vb+B*a.$.wb+u*a.$.xb;I=a.$c;M=a.ad;O=a.bd;ga=a.Md;ha=a.Nd;na=a.Od;var Ja=I*ma+M*oa+O*D;if(-1.000001<Ja&&-.999999>Ja){var Ha,ob,fa,ea=I*I,ja=M*M,cb=O*O,Aa;ea<ja?ea<cb?(Aa=1/Math.sqrt(ja+cb),Ha=0,ob=O*Aa,fa=-M*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-I*Aa,fa=0):ja<cb?(Aa=1/Math.sqrt(cb+ea),Ha=-O*Aa,ob=0,fa=I*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-I*Aa,fa=0);l=Ha;g=ob;k=fa;m=0}else{var sb,Ua,qb;sb=M*D-O*oa;Ua=O*ma-I*D;qb=I*oa-M*ma;var rb=Math.sqrt(.5*(1+Ja)),Ja=.5/rb;sb*=Ja;Ua*=Ja;qb*=Ja;l=sb;g=Ua;k=qb;m=rb}var tb=l,Va=g,xb=k,Ca=m,$a=2*tb,ua=2*Va,xa=2*xb,G=tb*$a,pb=Va*ua,db=xb*xa,Da=tb*ua,ab=Va*xa,hb=tb*xa,z=Ca*$a,Db=Ca*ua,Wa=Ca*xa;n=1-pb-db;q=Da-Wa;p=hb+Db;r=Da+Wa;v=1-G-db;t=ab-z;w=hb-Db;B=ab+z;u=1-G-pb;var mb,Fb,Oa;mb=n*ga+q*ha+p*na;Fb=r*ga+v*ha+t*na;Oa=w*ga+B*ha+u*na;V=mb;A=Fb;E=Oa;x=oa*E-D*A;F=D*V-ma*E;C=ma*A-oa*V;if(1E-6<x*x+F*F+C*C){var nb=x*x+F*F+C*C;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;F*=nb;C*=nb}else{var wb=ma*ma,yb=oa*oa,eb=D*D,Y;wb<yb?wb<eb?(Y=1/Math.sqrt(yb+eb),x=0,F=D*Y,C=-oa*Y):(Y=1/Math.sqrt(wb+yb),x=oa*Y,F=-ma*Y,C=0):yb<eb?(Y=1/Math.sqrt(eb+wb),x=-D*Y,F=0,C=ma*Y):(Y=1/Math.sqrt(wb+yb),x=oa*Y,F=-ma*Y,C=0)}V=F*D-C*oa;A=C*ma-x*D;E=x*oa-F*ma;a.$c=ma;a.ad=oa;a.bd=D;a.Md=V;a.Nd=A;a.Od=E;a.ke=x;a.le=F;a.me=C;var Ma,kb,Ta;Ma=this.wb*this.ac-this.xb*this.$b;kb=this.xb*this.Zb-this.vb*this.ac;Ta=this.vb*this.$b-this.wb*this.Zb;var ib=this.vb*this.Zb+this.wb*this.$b+this.xb*this.ac,Ka=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib),Kb=Ma*Ma+kb*kb+Ta*Ta;0<Kb&&(Kb=1/Math.sqrt(Kb));Ma*=Kb;kb*=Kb;Ta*=Kb;Ma*=Ka;kb*=Ka;Ta*=Ka;this.angularErrorY=Ma*this.ea.Md+kb*this.ea.Nd+Ta*this.ea.Od;this.angularErrorZ=Ma*this.ea.ke+kb*this.ea.le+Ta*this.ea.me;var vb,X,Cb;vb=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Cb=this.xe*this.oe-this.ye*this.ne;ib=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib);0>vb*this.ea.$c+X*this.ea.ad+Cb*this.ea.bd&&(this.angle=-this.angle);var Ab,ub,zb;Ab=this.Gf-this.Df;ub=this.Hf-this.Ef;zb=this.If-this.Ff;this.Vf=Ab*this.ea.$c+ub*this.ea.ad+zb*this.ea.bd;this.linearErrorY=Ab*this.ea.Md+ub*this.ea.Nd+zb*this.ea.Od;this.linearErrorZ=Ab*this.ea.ke+ub*this.ea.le+zb*this.ea.me},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},vn:function(){return this.Lk},nn:function(){return this.Ek},un:function(){return this.Kk},mn:function(){return this.Dk},Xk:function(){return this.angle},$k:function(){return this.Vf},ra:vb});$b.aa=!0;$b.prototype={Vg:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var d=this.rigidBody1,c,f,h;c=e.x;f=e.y;h=e.z;c-=d.a.v;f-=d.a.A;h-=d.a.B;a=d.a.o*c+d.a.i*f+d.a.l*h;b=d.a.f*c+d.a.m*f+d.a.g*h;d=d.a.h*c+d.a.j*f+d.a.s*h;c=this.localAnchor1;c.x=a;c.y=b;c.z=d;b=this.rigidBody2;d=e.x;c=e.y;f=e.z;d-=b.a.v;c-=b.a.A;f-=b.a.B;e=b.a.o*d+b.a.i*c+b.a.l*f;a=b.a.f*d+b.a.m*c+b.a.g*f;b=b.a.h*d+b.a.j*c+b.a.s*f;d=this.localAnchor2;d.x=e;d.y=a;d.z=b},ra:$b};re.aa=!0;re.Kb=$b;re.prototype=mb($b.prototype,{Aa:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},ra:re});Pe.aa=!0;Pe.prototype={ra:Pe};Ck.aa=!0;Ck.prototype={ra:Ck};Lc.aa=!0;Lc.prototype={Qa:function(){return this.wk},tb:function(){return this.Oc},Lb:function(){return this.ja},bb:function(){return this.M},ra:Lc};uc.aa=!0;Gb.aa=!0;Gb.Kb=L;Gb.prototype=mb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorX*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,B,u;g=-this.Sb;k=this.Rb;m=this.Sb;n=-this.Qb;q=-this.Rb;p=this.Qb;r=-this.Vb;v=this.Ub;t=this.Vb;w=-this.Tb;B=-this.Ub;u=this.Tb;var D,V;V=1/(this.C.$a+this.D.$a);if(0>=this.ue.frequency||!e){D=this.Ob[0];var A=a.rows[a.La++],E=A.Ba;E.wa=0;E.xa=0;E.ya=0;E.Ca=0;E.Da=0;E.Ea=0;E.ba=0;E.ca=0;E.da=0;E.fa=0;E.ga=0;E.ha=0;A.Ga=0;A.Na=0;A.Ja=0;A.Ia=0;A.motorSpeed=0;A.cb=0;A.va=D;D=A;var A=this.Vf,x=this.Ch,C=this.ue,E=F.linearSlop;if(e)C=0,e=1;else{if(0<C.frequency){var E=0,N=6.28318530717958*C.frequency,I=C.dampingRatio;I<F.minSpringDamperDampingRatio&&(I=F.minSpringDamperDampingRatio);e=b.dt;I=2*I*N;N*=N;C.useSymplecticEuler?(C=1/(e*I),e=N/I):(C=1/(e*(e*N+I)),e=N/(e*N+I))}else C=0,e=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<x.motorForce?(D.motorSpeed=x.motorSpeed,D.cb=x.motorForce*b.dt):(D.motorSpeed=0,D.cb=0)}b=x.lowerLimit;N=x.upperLimit;b>N?b=I=x=0:b==N?(x=-1/0,I=1/0,b=A-b):A<b?(x=-1/0,I=0,b=A-b+E,0<b&&(b=0)):A>N?(x=0,I=1/0,b=A-N-E,0>b&&(b=0)):b=I=x=0;D.Ja=x;D.Ia=I;D.Na=C*(V?1/V:0);D.Ga=b*e;V=D.Ba;V.wa=this.ea.$c;V.xa=this.ea.ad;V.ya=this.ea.bd;V.Ca=this.ea.$c;V.Da=this.ea.ad;V.Ea=this.ea.bd;V.ba=-0;V.ca=-g;V.da=-k;V.fa=-0;V.ga=-r;V.ha=-v}g=this.Ob[1];k=a.rows[a.La++];r=k.Ba;r.wa=0;r.xa=0;r.ya=0;r.Ca=0;r.Da=0;r.Ea=0;r.ba=0;r.ca=0;r.da=0;r.fa=0;r.ga=0;r.ha=0;k.Ga=0;k.Na=0;k.Ja=0;k.Ia=0;k.motorSpeed=0;k.cb=0;k.va=g;D=k;D.Ga=c;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.wa=this.ea.Md;V.xa=this.ea.Nd;V.ya=this.ea.Od;V.Ca=this.ea.Md;V.Da=this.ea.Nd;V.Ea=this.ea.Od;V.ba=-m;V.ca=-0;V.da=-n;V.fa=-t;V.ga=-0;V.ha=-w;c=this.Ob[2];m=a.rows[a.La++];n=m.Ba;n.wa=0;n.xa=0;n.ya=0;n.Ca=0;n.Da=0;n.Ea=0;n.ba=0;n.ca=0;n.da=0;n.fa=0;n.ga=0;n.ha=0;m.Ga=0;m.Na=0;m.Ja=0;m.Ia=0;m.motorSpeed=0;m.cb=0;m.va=c;D=m;D.Ga=f;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.wa=this.ea.ke;V.xa=this.ea.le;V.ya=this.ea.me;V.Ca=this.ea.ke;V.Da=this.ea.le;V.Ea=this.ea.me;V.ba=-q;V.ca=-p;V.da=-0;V.fa=-B;V.ga=-u;V.ha=-0;f=this.Ob[3];q=a.rows[a.La++];p=q.Ba;p.wa=0;p.xa=0;p.ya=0;p.Ca=0;p.Da=0;p.Ea=0;p.ba=0;p.ca=0;p.da=0;p.fa=0;p.ga=0;p.ha=0;q.Ga=0;q.Na=0;q.Ja=0;q.Ia=0;q.motorSpeed=0;q.cb=0;q.va=f;D=q;D.Ga=h;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.ba=1;V.ca=0;V.da=0;V.fa=1;V.ga=0;V.ha=0;h=this.Ob[4];f=a.rows[a.La++];q=f.Ba;q.wa=0;q.xa=0;q.ya=0;q.Ca=0;q.Da=0;q.Ea=0;q.ba=0;q.ca=0;q.da=0;q.fa=0;q.ga=0;q.ha=0;f.Ga=0;f.Na=0;f.Ja=0;f.Ia=0;f.motorSpeed=0;f.cb=0;f.va=h;D=f;D.Ga=l;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.ba=0;V.ca=1;V.da=0;V.fa=0;V.ga=1;V.ha=0;l=this.Ob[5];a=a.rows[a.La++];h=a.Ba;h.wa=0;h.xa=0;h.ya=0;h.Ca=0;h.Da=0;h.Ea=0;h.ba=0;h.ca=0;h.da=0;h.fa=0;h.ga=0;h.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=l;D=a;D.Ga=d;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.ba=0;V.ca=0;V.da=1;V.fa=0;V.ga=0;V.ha=1},ed:function(){L.prototype.ed.call(this);var a=this.ea,b=a.$.C.$a,e=a.$.D.$a,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,F,A,E,x,C,N,I,M,O,ga,ha,na,Ub=a.$.vb*a.$.Zb+a.$.wb*a.$.$b+a.$.xb*a.$.ac;if(-1.000001<Ub&&-.999999>Ub){var qa,ka,bb,U=a.$.vb,R=a.$.wb,Ca=a.$.xb,Na=U*U,Ra=R*R,xa=Ca*Ca,Pa;Na<Ra?Na<xa?(Pa=1/Math.sqrt(Ra+xa),qa=0,ka=Ca*Pa,bb=-R*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0):Ra<xa?(Pa=1/Math.sqrt(xa+Na),qa=-Ca*Pa,ka=0,bb=U*Pa):(Pa=1/Math.sqrt(Na+Ra),qa=R*Pa,ka=-U*Pa,bb=0);d=qa;c=ka;f=bb;h=0}else{var Ba,Hb,H;Ba=a.$.wb*a.$.ac-a.$.xb*a.$.$b;Hb=a.$.xb*a.$.Zb-a.$.vb*a.$.ac;H=a.$.vb*a.$.$b-a.$.wb*a.$.Zb;var Qa=Math.sqrt(.5*(1+Ub)),Ub=.5/Qa;Ba*=Ub;Hb*=Ub;H*=Ub;d=Ba;c=Hb;f=H;h=Qa}var ba,Q,P,ya,ta,W,pa,y;P=Q=ba=0;ya=1;ta=d;W=c;pa=f;y=h;var Ia=ba*ta+Q*W+P*pa+ya*y;0>Ia&&(Ia=-Ia,ta=-ta,W=-W,pa=-pa,y=-y);if(.999999<Ia){var ca,Ea,za,Fa;ca=ta-ba;Ea=W-Q;za=pa-P;Fa=y-ya;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ea;pa=P+b/(b+e)*za;y=ya+b/(b+e)*Fa;var Sa=ta*ta+W*W+pa*pa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=pa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ia);ta+=ba*-Ia;W+=Q*-Ia;pa+=P*-Ia;y+=ya*-Ia;var Z=ta*ta+W*W+pa*pa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;pa*=Z;y*=Z;var Ga=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;ya*=ra;l=ba+ta*Ga;g=Q+W*Ga;k=P+pa*Ga;m=ya+y*Ga}var va=l,J=g,La=k,Xa=m,S=2*va,Ya=2*J,T=2*La,K=va*S,ia=J*Ya,gb=La*T,da=va*Ya,wa=J*T,sa=va*T,fb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-gb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-gb;t=wa-fb;w=sa-jb;B=wa+fb;u=1-K-ia;var ma,oa;ma=n*a.$.vb+q*a.$.wb+p*a.$.xb;oa=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=w*a.$.vb+B*a.$.wb+u*a.$.xb;I=a.$c;M=a.ad;O=a.bd;ga=a.Md;ha=a.Nd;na=a.Od;var Ja=I*ma+M*oa+O*D;if(-1.000001<Ja&&-.999999>Ja){var Ha,ob,fa,ea=I*I,ja=M*M,cb=O*O,Aa;ea<ja?ea<cb?(Aa=1/Math.sqrt(ja+cb),Ha=0,ob=O*Aa,fa=-M*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-I*Aa,fa=0):ja<cb?(Aa=1/Math.sqrt(cb+ea),Ha=-O*Aa,ob=0,fa=I*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-I*Aa,fa=0);l=Ha;g=ob;k=fa;m=0}else{var sb,Ua,qb;sb=M*D-O*oa;Ua=O*ma-I*D;qb=I*oa-M*ma;var rb=Math.sqrt(.5*(1+Ja)),Ja=.5/rb;sb*=Ja;Ua*=Ja;qb*=Ja;l=sb;g=Ua;k=qb;m=rb}var tb=l,Va=g,xb=k,Da=m,$a=2*tb,ua=2*Va,Yb=2*xb,G=tb*$a,pb=Va*ua,db=xb*Yb,Wa=tb*ua,ab=Va*Yb,hb=tb*Yb,z=Da*$a,Db=Da*ua,mb=Da*Yb;n=1-pb-db;q=Wa-mb;p=hb+Db;r=Wa+mb;v=1-G-db;t=ab-z;w=hb-Db;B=ab+z;u=1-G-pb;var vb,Fb,Oa;vb=n*ga+q*ha+p*na;Fb=r*ga+v*ha+t*na;Oa=w*ga+B*ha+u*na;F=vb;A=Fb;E=Oa;x=oa*E-D*A;C=D*F-ma*E;N=ma*A-oa*F;if(1E-6<x*x+C*C+N*N){var nb=x*x+C*C+N*N;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;C*=nb;N*=nb}else{var wb=ma*ma,yb=oa*oa,eb=D*D,Y;wb<yb?wb<eb?(Y=1/Math.sqrt(yb+eb),x=0,C=D*Y,N=-oa*Y):(Y=1/Math.sqrt(wb+yb),x=oa*Y,C=-ma*Y,N=0):yb<eb?(Y=1/Math.sqrt(eb+wb),x=-D*Y,C=0,N=ma*Y):(Y=1/Math.sqrt(wb+yb),x=oa*Y,C=-ma*Y,N=0)}F=C*D-N*oa;A=N*ma-x*D;E=x*oa-C*ma;a.$c=ma;a.ad=oa;a.bd=D;a.Md=F;a.Nd=A;a.Od=E;a.ke=x;a.le=C;a.me=N;var Ma,kb,Ta,ib,Ka,Kb,Ab,X,Cb,ub,zb,Eb,ec,Lb,Gb,Jb,xc,Nb;Ma=this.vb;kb=this.xe;Ta=this.th;ib=this.wb;Ka=this.ye;Kb=this.uh;Ab=this.xb;X=this.ze;Cb=this.vh;ub=this.Zb;zb=this.ne;Eb=this.Rg;ec=this.$b;Lb=this.oe;Gb=this.Sg;Jb=this.ac;xc=this.pe;Nb=this.Tg;var jc,pc,kc,ac,Vb,Wb,Qb,fc;jc=ub*Ma+zb*kb+Eb*Ta;pc=ub*ib+zb*Ka+Eb*Kb;kc=ub*Ab+zb*X+Eb*Cb;ac=ec*Ma+Lb*kb+Gb*Ta;Vb=ec*ib+Lb*Ka+Gb*Kb;Wb=ec*Ab+Lb*X+Gb*Cb;Qb=Jb*Ma+xc*kb+Nb*Ta;fc=Jb*ib+xc*Ka+Nb*Kb;var Rb,Ob,Xb,gc,Ib=Jb*Ab+xc*X+Nb*Cb,Zb=jc+Vb+Ib,lb;0<Zb?(lb=Math.sqrt(Zb+1),gc=.5*lb,lb=.5/lb,Rb=(fc-Wb)*lb,Ob=(kc-Qb)*lb,Xb=(ac-pc)*lb):jc>Vb?jc>Ib?(lb=Math.sqrt(jc-Vb-Ib+1),Rb=.5*lb,lb=.5/lb,Ob=(pc+ac)*lb,Xb=(kc+Qb)*lb,gc=(fc-Wb)*lb):(lb=Math.sqrt(Ib-jc-Vb+1),Xb=.5*lb,lb=.5/lb,Rb=(kc+Qb)*lb,Ob=(Wb+fc)*lb,gc=(ac-pc)*lb):Vb>Ib?(lb=Math.sqrt(Vb-Ib-jc+1),Ob=.5*lb,lb=.5/lb,Rb=(pc+ac)*lb,Xb=(Wb+fc)*lb,gc=(kc-Qb)*lb):(lb=Math.sqrt(Ib-jc-Vb+1),Xb=.5*lb,lb=.5/lb,Rb=(kc+Qb)*lb,Ob=(Wb+fc)*lb,gc=(ac-pc)*lb);var Pb=gc,Tb=2*(-1>=Pb?3.14159265358979:1<=Pb?0:Math.acos(Pb));this.angularErrorX=Rb;this.angularErrorY=Ob;this.angularErrorZ=Xb;var Mb=this.angularErrorX*this.angularErrorX+this.angularErrorY*this.angularErrorY+this.angularErrorZ*this.angularErrorZ;0<Mb&&(Mb=1/Math.sqrt(Mb));this.angularErrorX*=Mb;this.angularErrorY*=Mb;this.angularErrorZ*=Mb;this.angularErrorX*=Tb;this.angularErrorY*=Tb;this.angularErrorZ*=Tb;var qc,mc,Sb;qc=this.Gf-this.Df;mc=this.Hf-this.Ef;Sb=this.If-this.Ff;this.Vf=qc*this.ea.$c+mc*this.ea.ad+Sb*this.ea.bd;this.linearErrorY=qc*this.ea.Md+mc*this.ea.Nd+Sb*this.ea.Od;this.linearErrorZ=qc*this.ea.ke+mc*this.ea.le+Sb*this.ea.me},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},nj:function(){return this.ue},Zk:function(){return this.Ch},$k:function(){return this.Vf},ra:Gb});Be.aa=!0;Be.Kb=$b;Be.prototype=mb($b.prototype,{Aa:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},ra:Be});Ab.aa=!0;Ab.Kb=L;Ab.prototype=mb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,B;l=-this.Sb;g=this.Rb;k=this.Sb;m=-this.Qb;n=-this.Rb;q=this.Qb;p=-this.Vb;r=this.Ub;v=this.Vb;t=-this.Tb;w=-this.Ub;B=this.Tb;var u=this.swingAxisX,D=this.swingAxisY,C=this.swingAxisZ,d=(this.C.P*u+this.C.R*D+this.C.S*C)*u+(this.C.T*u+this.C.U*D+this.C.V*C)*D+(this.C.W*u+this.C.X*D+this.C.Y*C)*C,A=(this.D.P*u+this.D.R*D+this.D.S*C)*u+(this.D.T*u+this.D.U*D+this.D.V*C)*D+(this.D.W*u+this.D.X*D+this.D.Y*C)*C;if(0<d){var E=u*this.Qb+D*this.Rb+C*this.Sb,E=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-E*E;0<E&&(d=0<this.C.$a?1/(1/d+this.C.Nc*E):0)}0<A&&(u=u*this.Tb+D*this.Ub+C*this.Vb,u=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-u*u,0<u&&(A=0<this.D.$a?1/(1/A+this.D.Nc*u):0));A=d+A?1/(d+A):0;D=this.Zb;C=this.$b;E=this.ac;d=(this.C.P*D+this.C.R*C+this.C.S*E)*D+(this.C.T*D+this.C.U*C+this.C.V*E)*C+(this.C.W*D+this.C.X*C+this.C.Y*E)*E;u=(this.D.P*D+this.D.R*C+this.D.S*E)*D+(this.D.T*D+this.D.U*C+this.D.V*E)*C+(this.D.W*D+this.D.X*C+this.D.Y*E)*E;if(0<d){var x=D*this.Qb+C*this.Rb+E*this.Sb,x=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-x*x;0<x&&(d=0<this.C.$a?1/(1/d+this.C.Nc*x):0)}0<u&&(D=D*this.Tb+C*this.Ub+E*this.Vb,D=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-D*D,0<D&&(u=0<this.D.$a?1/(1/u+this.D.Nc*D):0));d=d+u?1/(d+u):0;u=this.Ob[0];D=a.rows[a.La++];C=D.Ba;C.wa=0;C.xa=0;C.ya=0;C.Ca=0;C.Da=0;C.Ea=0;C.ba=0;C.ca=0;C.da=0;C.fa=0;C.ga=0;C.ha=0;D.Ga=0;D.Na=0;D.Ja=0;D.Ia=0;D.motorSpeed=0;D.cb=0;D.va=u;u=D;u.Ga=c;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=1;u.xa=0;u.ya=0;u.Ca=1;u.Da=0;u.Ea=0;u.ba=-0;u.ca=-l;u.da=-g;u.fa=-0;u.ga=-p;u.ha=-r;u=this.Ob[1];c=a.rows[a.La++];l=c.Ba;l.wa=0;l.xa=0;l.ya=0;l.Ca=0;l.Da=0;l.Ea=0;l.ba=0;l.ca=0;l.da=0;l.fa=0;l.ga=0;l.ha=0;c.Ga=0;c.Na=0;c.Ja=0;c.Ia=0;c.motorSpeed=0;c.cb=0;c.va=u;u=c;u.Ga=f;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=0;u.xa=1;u.ya=0;u.Ca=0;u.Da=1;u.Ea=0;u.ba=-k;u.ca=-0;u.da=-m;u.fa=-v;u.ga=-0;u.ha=-t;u=this.Ob[2];f=a.rows[a.La++];k=f.Ba;k.wa=0;k.xa=0;k.ya=0;k.Ca=0;k.Da=0;k.Ea=0;k.ba=0;k.ca=0;k.da=0;k.fa=0;k.ga=0;k.ha=0;f.Ga=0;f.Na=0;f.Ja=0;f.Ia=0;f.motorSpeed=0;f.cb=0;f.va=u;u=f;u.Ga=h;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=0;u.xa=0;u.ya=1;u.Ca=0;u.Da=0;u.Ea=1;u.ba=-n;u.ca=-q;u.da=-0;u.fa=-w;u.ga=-B;u.ha=-0;0<this.swingError&&(0>=this.Hk.frequency||!e)&&(u=this.Ob[3],h=a.rows[a.La++],n=h.Ba,n.wa=0,n.xa=0,n.ya=0,n.Ca=0,n.Da=0,n.Ea=0,n.ba=0,n.ca=0,n.da=0,n.fa=0,n.ga=0,n.ha=0,h.Ga=0,h.Na=0,h.Ja=0,h.Ia=0,h.motorSpeed=0,h.cb=0,h.va=u,u=h,h=this.swingError,w=this.Wk,q=this.Hk,n=F.angularSlop,e?(q=0,B=1):(0<q.frequency?(n=0,k=6.28318530717958*q.frequency,f=q.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),B=b.dt,f=2*f*k,k*=k,q.useSymplecticEuler?(q=1/(B*f),B=k/f):(q=1/(B*(B*k+f)),B=k/(B*k+f))):(q=0,B=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<w.motorTorque?(u.motorSpeed=w.motorSpeed,u.cb=w.motorTorque*b.dt):(u.motorSpeed=0,u.cb=0)),f=w.lowerLimit,w=w.upperLimit,k=.5*(f+w),h=((h-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,h+=k,f>w?h=m=k=0:f==w?(k=-1/0,m=1/0,h-=f):h<f?(k=-1/0,m=0,h=h-f+n,0<h&&(h=0)):h>w?(k=0,m=1/0,h=h-w-n,0>h&&(h=0)):h=m=k=0,u.Ja=k,u.Ia=m,u.Na=q*(A?1/A:0),u.Ga=h*B,u=u.Ba,u.ba=this.swingAxisX,u.ca=this.swingAxisY,u.da=this.swingAxisZ,u.fa=this.swingAxisX,u.ga=this.swingAxisY,u.ha=this.swingAxisZ);if(0>=this.Nk.frequency||!e)A=this.Ob[4],a=a.rows[a.La++],u=a.Ba,u.wa=0,u.xa=0,u.ya=0,u.Ca=0,u.Da=0,u.Ea=0,u.ba=0,u.ca=0,u.da=0,u.fa=0,u.ga=0,u.ha=0,a.Ga=0,a.Na=0,a.Ja=0,a.Ia=0,a.motorSpeed=0,a.cb=0,a.va=A,u=a,a=this.ej,h=this.Mk,n=this.Nk,A=F.angularSlop,e?(e=0,n=1):(0<n.frequency?(A=0,e=6.28318530717958*n.frequency,w=n.dampingRatio,w<F.minSpringDamperDampingRatio&&(w=F.minSpringDamperDampingRatio),q=b.dt,w=2*w*e,B=e*e,n.useSymplecticEuler?(e=1/(q*w),n=B/w):(e=1/(q*(q*B+w)),n=B/(q*B+w))):(e=0,n=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<h.motorTorque?(u.motorSpeed=h.motorSpeed,u.cb=h.motorTorque*b.dt):(u.motorSpeed=0,u.cb=0)),b=h.lowerLimit,h=h.upperLimit,q=.5*(b+h),a=((a-q+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,a+=q,b>h?b=w=q=0:b==h?(q=-1/0,w=1/0,b=a-b):a<b?(q=-1/0,w=0,b=a-b+A,0<b&&(b=0)):a>h?(q=0,w=1/0,b=a-h-A,0>b&&(b=0)):b=w=q=0,u.Ja=q,u.Ia=w,u.Na=e*(d?1/d:0),u.Ga=b*n,u=u.Ba,u.ba=this.twistAxisX,u.ca=this.twistAxisY,u.da=this.twistAxisZ,u.fa=this.twistAxisX,u.ga=this.twistAxisY,u.ha=this.twistAxisZ},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f;a=this.vb;b=this.wb;e=this.xb;d=this.Zb;c=this.$b;f=this.ac;var h,l,g,k,m,n,q,p,r;h=this.vb;l=this.xe;g=this.th;k=this.wb;m=this.ye;n=this.uh;q=this.xb;p=this.ze;r=this.vh;var v,t,w,B,u,D,C,A;D=a*d+b*c+e*f;-1.000001<D&&-.999999>D?(u=a*a,d=b*b,c=e*e,u<d?u<c?(d=1/Math.sqrt(d+c),u=0,e*=d,a=-b*d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0):d<c?(d=1/Math.sqrt(c+u),u=-e*d,e=0,a*=d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0),v=u,t=e,w=a,B=0):(u=Math.sqrt(.5*(1+D)),D=.5/u,v=(b*f-e*c)*D,t=(e*d-a*f)*D,w=(a*c-b*d)*D,B=u);D=v;f=t;u=w;a=B;c=2*D;e=2*f;b=2*u;C=D*c;A=f*e;d=u*b;u=D*e;f*=b;D*=b;var E=a*c,x=a*e;c=a*b;a=1-A-d;b=u-c;e=D+x;u+=c;d=1-C-d;c=f-E;D-=x;f+=E;C=1-C-A;this.Wi=2*(-1>=B?3.14159265358979:1<=B?0:Math.acos(B));B=v;A=w;w=a*this.ne+u*this.oe+D*this.pe;E=b*this.ne+d*this.oe+f*this.pe;v=e*this.ne+c*this.oe+C*this.pe;this.ej=Math.atan2(this.th*w+this.uh*E+this.vh*v,this.xe*w+this.ye*E+this.ze*v);this.twistAxisX=this.vb+this.Zb;this.twistAxisY=this.wb+this.$b;this.twistAxisZ=this.xb+this.ac;v=this.twistAxisX*this.twistAxisX+this.twistAxisY*this.twistAxisY+this.twistAxisZ*this.twistAxisZ;0<v&&(v=1/Math.sqrt(v));this.twistAxisX*=v;this.twistAxisY*=v;this.twistAxisZ*=v;w=Math.sqrt(B*B+t*t+A*A);0<w&&(w=1/w);B*=w*this.Wi;t*=w*this.Wi;A*=w*this.Wi;v=l*B+m*t+p*A;t=g*B+n*t+r*A;w=this.Jj;B=this.Kj;w=1/(w*w);A=1/(B*B);(B=v*v*w+t*t*A)?(E=Math.sqrt(1/B),B=v*E,E*=t,x=B*w,A*=E,w=1/Math.sqrt(x*x+A*A),x*=w,A*=w,v=(v-B)*x+(t-E)*A,0<v?(this.swingError=v,this.swingAxisX=0,this.swingAxisY=x,this.swingAxisZ=A,h=h*this.swingAxisX+l*this.swingAxisY+g*this.swingAxisZ,k=k*this.swingAxisX+m*this.swingAxisY+n*this.swingAxisZ,q=q*this.swingAxisX+p*this.swingAxisY+r*this.swingAxisZ,this.swingAxisX=h,this.swingAxisY=k,this.swingAxisZ=q,q=a*this.swingAxisX+b*this.swingAxisY+e*this.swingAxisZ,p=u*this.swingAxisX+d*this.swingAxisY+c*this.swingAxisZ,r=D*this.swingAxisX+f*this.swingAxisY+C*this.swingAxisZ,this.swingAxisX=q,this.swingAxisY=p,this.swingAxisZ=r,this.swingConstraintAxisX=this.swingAxisX,this.swingConstraintAxisY=this.swingAxisY,this.swingConstraintAxisZ=this.swingAxisZ):this.swingError=0):this.swingError=this.swingAxisZ=this.swingAxisY=this.swingAxisX=0;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},zn:function(){return this.Nk},yn:function(){return this.Mk},tn:function(){return this.Hk},rn:function(){var a=new t;a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ;return a},sn:function(a){a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ},qn:function(){return this.Wi},xn:function(){return this.ej},ra:Ab});Rd.aa=!0;Rd.Kb=$b;Rd.prototype=mb($b.prototype,{Aa:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;var g;e=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;h=this.localTwistAxis1;h.x=e;h.y=g;h.z=f;g=d.x;f=d.y;h=d.z;d=b.a.o*g+b.a.i*f+b.a.l*h;e=b.a.f*g+b.a.m*f+b.a.g*h;b=b.a.h*g+b.a.j*f+b.a.s*h;g=this.localTwistAxis2;g.x=d;g.y=e;g.z=b;d=c.x;e=c.y;g=c.z;c=a.a.o*d+a.a.i*e+a.a.l*g;b=a.a.f*d+a.a.m*e+a.a.g*g;a=a.a.h*d+a.a.j*e+a.a.s*g;d=this.localSwingAxis1;d.x=c;d.y=b;d.z=a;return this},ra:Rd});Lb.aa=!0;Lb.Kb=L;Lb.prototype=mb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,B,u;g=-this.Sb;k=this.Rb;m=this.Sb;n=-this.Qb;q=-this.Rb;p=this.Qb;r=-this.Vb;v=this.Ub;t=this.Vb;w=-this.Tb;B=-this.Ub;u=this.Tb;var D=this.ea.$c,C=this.ea.ad,A=this.ea.bd,E=(this.C.P*D+this.C.R*C+this.C.S*A)*D+(this.C.T*D+this.C.U*C+this.C.V*A)*C+(this.C.W*D+this.C.X*C+this.C.Y*A)*A,x=(this.D.P*D+this.D.R*C+this.D.S*A)*D+(this.D.T*D+this.D.U*C+this.D.V*A)*C+(this.D.W*D+this.D.X*C+this.D.Y*A)*A;if(0<E){var L=D*this.Qb+C*this.Rb+A*this.Sb,L=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-L*L;0<L&&(E=0<this.C.$a?1/(1/E+this.C.Nc*L):0)}0<x&&(D=D*this.Tb+C*this.Ub+A*this.Vb,D=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-D*D,0<D&&(x=0<this.D.$a?1/(1/x+this.D.Nc*D):0));E=E+x?1/(E+x):0;x=this.Ob[0];D=a.rows[a.La++];C=D.Ba;C.wa=0;C.xa=0;C.ya=0;C.Ca=0;C.Da=0;C.Ea=0;C.ba=0;C.ca=0;C.da=0;C.fa=0;C.ga=0;C.ha=0;D.Ga=0;D.Na=0;D.Ja=0;D.Ia=0;D.motorSpeed=0;D.cb=0;D.va=x;x=D;x.Ga=c;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.wa=1;x.xa=0;x.ya=0;x.Ca=1;x.Da=0;x.Ea=0;x.ba=-0;x.ca=-g;x.da=-k;x.fa=-0;x.ga=-r;x.ha=-v;x=this.Ob[1];c=a.rows[a.La++];g=c.Ba;g.wa=0;g.xa=0;g.ya=0;g.Ca=0;g.Da=0;g.Ea=0;g.ba=0;g.ca=0;g.da=0;g.fa=0;g.ga=0;g.ha=0;c.Ga=0;c.Na=0;c.Ja=0;c.Ia=0;c.motorSpeed=0;c.cb=0;c.va=x;x=c;x.Ga=f;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.wa=0;x.xa=1;x.ya=0;x.Ca=0;x.Da=1;x.Ea=0;x.ba=-m;x.ca=-0;x.da=-n;x.fa=-t;x.ga=-0;x.ha=-w;f=this.Ob[2];x=a.rows[a.La++];m=x.Ba;m.wa=0;m.xa=0;m.ya=0;m.Ca=0;m.Da=0;m.Ea=0;m.ba=0;m.ca=0;m.da=0;m.fa=0;m.ga=0;m.ha=0;x.Ga=0;x.Na=0;x.Ja=0;x.Ia=0;x.motorSpeed=0;x.cb=0;x.va=f;x.Ga=h;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.wa=0;x.xa=0;x.ya=1;x.Ca=0;x.Da=0;x.Ea=1;x.ba=-q;x.ca=-p;x.da=-0;x.fa=-B;x.ga=-u;x.ha=-0;if(0>=this.ue.frequency||!e)h=this.Ob[3],q=a.rows[a.La++],p=q.Ba,p.wa=0,p.xa=0,p.ya=0,p.Ca=0,p.Da=0,p.Ea=0,p.ba=0,p.ca=0,p.da=0,p.fa=0,p.ga=0,p.ha=0,q.Ga=0,q.Na=0,q.Ja=0,q.Ia=0,q.motorSpeed=0,q.cb=0,q.va=h,x=q,h=this.angle,p=this.Ch,B=this.ue,q=F.angularSlop,e?(e=0,B=1):(0<B.frequency?(q=0,e=6.28318530717958*B.frequency,f=B.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),u=b.dt,f=2*f*e,m=e*e,B.useSymplecticEuler?(e=1/(u*f),B=m/f):(e=1/(u*(u*m+f)),B=m/(u*m+f))):(e=0,B=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<p.motorTorque?(x.motorSpeed=p.motorSpeed,x.cb=p.motorTorque*b.dt):(x.motorSpeed=0,x.cb=0)),b=p.lowerLimit,p=p.upperLimit,u=.5*(b+p),h=((h-u+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+u,b>p?b=f=u=0:b==p?(u=-1/0,f=1/0,b=h-b):h<b?(u=-1/0,f=0,b=h-b+q,0<b&&(b=0)):h>p?(u=0,f=1/0,b=h-p-q,0>b&&(b=0)):b=f=u=0,x.Ja=u,x.Ia=f,x.Na=e*(E?1/E:0),x.Ga=b*B,x=x.Ba,x.ba=this.ea.$c,x.ca=this.ea.ad,x.da=this.ea.bd,x.fa=this.ea.$c,x.ga=this.ea.ad,x.ha=this.ea.bd;b=this.Ob[4];E=a.rows[a.La++];e=E.Ba;e.wa=0;e.xa=0;e.ya=0;e.Ca=0;e.Da=0;e.Ea=0;e.ba=0;e.ca=0;e.da=0;e.fa=0;e.ga=0;e.ha=0;E.Ga=0;E.Na=0;E.Ja=0;E.Ia=0;E.motorSpeed=0;E.cb=0;E.va=b;x=E;x.Ga=l;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.ba=this.ea.Md;x.ca=this.ea.Nd;x.da=this.ea.Od;x.fa=this.ea.Md;x.ga=this.ea.Nd;x.ha=this.ea.Od;l=this.Ob[5];a=a.rows[a.La++];b=a.Ba;b.wa=0;b.xa=0;b.ya=0;b.Ca=0;b.Da=0;b.Ea=0;b.ba=0;b.ca=0;b.da=0;b.fa=0;b.ga=0;b.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=l;x=a;x.Ga=d;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.ba=this.ea.ke;x.ca=this.ea.le;x.da=this.ea.me;x.fa=this.ea.ke;x.ga=this.ea.le;x.ha=this.ea.me},ed:function(){L.prototype.ed.call(this);var a=this.ea,b=a.$.C.$a,e=a.$.D.$a,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,C,A,E,x,F,N,I,M,O,ga,ha,na,qa=a.$.vb*a.$.Zb+a.$.wb*a.$.$b+a.$.xb*a.$.ac;if(-1.000001<qa&&-.999999>qa){var Ca,ka,bb,U=a.$.vb,R=a.$.wb,xa=a.$.xb,Na=U*U,Ra=R*R,wa=xa*xa,Pa;Na<Ra?Na<wa?(Pa=1/Math.sqrt(Ra+wa),Ca=0,ka=xa*Pa,bb=-R*Pa):(Pa=1/Math.sqrt(Na+Ra),Ca=R*Pa,ka=-U*Pa,bb=0):Ra<wa?(Pa=1/Math.sqrt(wa+Na),Ca=-xa*Pa,ka=0,bb=U*Pa):(Pa=1/Math.sqrt(Na+Ra),Ca=R*Pa,ka=-U*Pa,bb=0);d=Ca;c=ka;f=bb;h=0}else{var Ba,Hb,H;Ba=a.$.wb*a.$.ac-a.$.xb*a.$.$b;Hb=a.$.xb*a.$.Zb-a.$.vb*a.$.ac;H=a.$.vb*a.$.$b-a.$.wb*a.$.Zb;var Qa=Math.sqrt(.5*(1+qa)),qa=.5/Qa;Ba*=qa;Hb*=qa;H*=qa;d=Ba;c=Hb;f=H;h=Qa}var ba,Q,P,ya,ta,W,pa,y;P=Q=ba=0;ya=1;ta=d;W=c;pa=f;y=h;var Ia=ba*ta+Q*W+P*pa+ya*y;0>Ia&&(Ia=-Ia,ta=-ta,W=-W,pa=-pa,y=-y);if(.999999<Ia){var ca,Ea,za,Fa;ca=ta-ba;Ea=W-Q;za=pa-P;Fa=y-ya;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ea;pa=P+b/(b+e)*za;y=ya+b/(b+e)*Fa;var Sa=ta*ta+W*W+pa*pa+y*y;1E-32<Sa&&(Sa=1/Math.sqrt(Sa));l=ta*Sa;g=W*Sa;k=pa*Sa;m=y*Sa}else{var la=b/(b+e)*Math.acos(Ia);ta+=ba*-Ia;W+=Q*-Ia;pa+=P*-Ia;y+=ya*-Ia;var Z=ta*ta+W*W+pa*pa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;pa*=Z;y*=Z;var Ga=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;ya*=ra;l=ba+ta*Ga;g=Q+W*Ga;k=P+pa*Ga;m=ya+y*Ga}var va=l,J=g,La=k,Xa=m,S=2*va,Ya=2*J,T=2*La,K=va*S,ia=J*Ya,gb=La*T,da=va*Ya,Da=J*T,sa=va*T,fb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-gb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-gb;t=Da-fb;w=sa-jb;B=Da+fb;u=1-K-ia;var ma,oa;ma=n*a.$.vb+q*a.$.wb+p*a.$.xb;oa=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=w*a.$.vb+B*a.$.wb+u*a.$.xb;I=a.$c;M=a.ad;O=a.bd;ga=a.Md;ha=a.Nd;na=a.Od;var Ja=I*ma+M*oa+O*D;if(-1.000001<Ja&&-.999999>Ja){var Ha,ob,fa,ea=I*I,ja=M*M,cb=O*O,Aa;ea<ja?ea<cb?(Aa=1/Math.sqrt(ja+cb),Ha=0,ob=O*Aa,fa=-M*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-I*Aa,fa=0):ja<cb?(Aa=1/Math.sqrt(cb+ea),Ha=-O*Aa,ob=0,fa=I*Aa):(Aa=1/Math.sqrt(ea+ja),Ha=M*Aa,ob=-I*Aa,fa=0);l=Ha;g=ob;k=fa;m=0}else{var sb,Ua,qb;sb=M*D-O*oa;Ua=O*ma-I*D;qb=I*oa-M*ma;var rb=Math.sqrt(.5*(1+Ja)),Ja=.5/rb;sb*=Ja;Ua*=Ja;qb*=Ja;l=sb;g=Ua;k=qb;m=rb}var tb=l,Va=g,xb=k,Wa=m,$a=2*tb,ua=2*Va,mb=2*xb,G=tb*$a,pb=Va*ua,db=xb*mb,Ab=tb*ua,ab=Va*mb,hb=tb*mb,z=Wa*$a,Db=Wa*ua,ub=Wa*mb;n=1-pb-db;q=Ab-ub;p=hb+Db;r=Ab+ub;v=1-G-db;t=ab-z;w=hb-Db;B=ab+z;u=1-G-pb;var vb,Fb,Oa;vb=n*ga+q*ha+p*na;Fb=r*ga+v*ha+t*na;Oa=w*ga+B*ha+u*na;C=vb;A=Fb;E=Oa;x=oa*E-D*A;F=D*C-ma*E;N=ma*A-oa*C;if(1E-6<x*x+F*F+N*N){var nb=x*x+F*F+N*N;0<nb&&(nb=1/Math.sqrt(nb));x*=nb;F*=nb;N*=nb}else{var wb=ma*ma,yb=oa*oa,eb=D*D,Y;wb<yb?wb<eb?(Y=1/Math.sqrt(yb+eb),x=0,F=D*Y,N=-oa*Y):(Y=1/Math.sqrt(wb+yb),x=oa*Y,F=-ma*Y,N=0):yb<eb?(Y=1/Math.sqrt(eb+wb),x=-D*Y,F=0,N=ma*Y):(Y=1/Math.sqrt(wb+yb),x=oa*Y,F=-ma*Y,N=0)}C=F*D-N*oa;A=N*ma-x*D;E=x*oa-F*ma;a.$c=ma;a.ad=oa;a.bd=D;a.Md=C;a.Nd=A;a.Od=E;a.ke=x;a.le=F;a.me=N;var Ma,kb,Ta;Ma=this.wb*this.ac-this.xb*this.$b;kb=this.xb*this.Zb-this.vb*this.ac;Ta=this.vb*this.$b-this.wb*this.Zb;var ib=this.vb*this.Zb+this.wb*this.$b+this.xb*this.ac,Ka=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib),Kb=Ma*Ma+kb*kb+Ta*Ta;0<Kb&&(Kb=1/Math.sqrt(Kb));Ma*=Kb;kb*=Kb;Ta*=Kb;Ma*=Ka;kb*=Ka;Ta*=Ka;this.angularErrorY=Ma*this.ea.Md+kb*this.ea.Nd+Ta*this.ea.Od;this.angularErrorZ=Ma*this.ea.ke+kb*this.ea.le+Ta*this.ea.me;var zb,X,Cb;zb=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Cb=this.xe*this.oe-this.ye*this.ne;ib=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib);0>zb*this.ea.$c+X*this.ea.ad+Cb*this.ea.bd&&(this.angle=-this.angle);this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},nj:function(){return this.ue},Zk:function(){return this.Ch},Xk:function(){return this.angle},ra:Lb});qe.aa=!0;qe.Kb=$b;qe.prototype=mb($b.prototype,{Aa:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},ra:qe});Ec.aa=!0;Ec.prototype={Qa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},bb:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new Ec;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a},ra:Ec};pe.aa=!0;pe.Kb=L;pe.prototype=mb(L.prototype,{Rd:function(a,b,e){if(!(0<this.ue.frequency&&e)){var d,c,f;d=this.Gf-this.Df;c=this.Hf-this.Ef;f=this.If-this.Ff;var h;if(0<this.ue.frequency){h=6.28318530717958*this.ue.frequency;e=this.ue.dampingRatio;e<F.minSpringDamperDampingRatio&&(e=F.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.ue.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.$a+this.D.$a}else h=0,b=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;var g,k,m,n,q,p,r,v,t,w;g=-this.Sb;k=this.Rb;m=this.Sb;n=-this.Qb;e=-this.Rb;l=this.Qb;q=-this.Vb;p=this.Ub;r=this.Vb;v=-this.Tb;t=-this.Ub;w=this.Tb;var B=this.Ob[0],u=a.rows[a.La++],D=u.Ba;D.wa=0;D.xa=0;D.ya=0;D.Ca=0;D.Da=0;D.Ea=0;D.ba=0;D.ca=0;D.da=0;D.fa=0;D.ga=0;D.ha=0;u.Ga=0;u.Na=0;u.Ja=0;u.Ia=0;u.motorSpeed=0;u.cb=0;u.va=B;B=u;B.Ga=d*b;B.Na=h;B.Ja=-1/0;B.Ia=1/0;d=B.Ba;d.wa=1;d.xa=0;d.ya=0;d.Ca=1;d.Da=0;d.Ea=0;d.ba=-0;d.ca=-g;d.da=-k;d.fa=-0;d.ga=-q;d.ha=-p;d=this.Ob[1];g=a.rows[a.La++];k=g.Ba;k.wa=0;k.xa=0;k.ya=0;k.Ca=0;k.Da=0;k.Ea=0;k.ba=0;k.ca=0;k.da=0;k.fa=0;k.ga=0;k.ha=0;g.Ga=0;g.Na=0;g.Ja=0;g.Ia=0;g.motorSpeed=0;g.cb=0;g.va=d;B=g;B.Ga=c*b;B.Na=h;B.Ja=-1/0;B.Ia=1/0;d=B.Ba;d.wa=0;d.xa=1;d.ya=0;d.Ca=0;d.Da=1;d.Ea=0;d.ba=-m;d.ca=-0;d.da=-n;d.fa=-r;d.ga=-0;d.ha=-v;c=this.Ob[2];a=a.rows[a.La++];d=a.Ba;d.wa=0;d.xa=0;d.ya=0;d.Ca=0;d.Da=0;d.Ea=0;d.ba=0;d.ca=0;d.da=0;d.fa=0;d.ga=0;d.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=c;B=a;B.Ga=f*b;B.Na=h;B.Ja=-1/0;B.Ia=1/0;d=B.Ba;d.wa=0;d.xa=0;d.ya=1;d.Ca=0;d.Da=0;d.Ea=1;d.ba=-e;d.ca=-l;d.da=-0;d.fa=-t;d.ga=-w;d.ha=-0}},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},nj:function(){return this.ue},ra:pe});oe.aa=!0;oe.Kb=$b;oe.prototype=mb($b.prototype,{Aa:function(a,b,e){this.Vg(a,b,e);return this},ra:oe});nc.aa=!0;nc.prototype={Qa:function(a,b){this.frequency=a;this.dampingRatio=b;return this},bb:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new nc;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a},ra:nc};zc.aa=!0;zc.prototype={Qa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},bb:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new zc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a},ra:zc};ub.aa=!0;ub.Kb=L;ub.prototype=mb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.zl*d,g,k,m,n,q,p,r,v,t,w,B,u,D,C,A,E,x,L;g=0;k=-this.Sb;m=this.Rb;n=this.Sb;q=0;p=-this.Qb;r=-this.Rb;v=this.Qb;w=t=0;B=-this.Vb;u=this.Ub;D=this.Vb;C=0;A=-this.Tb;E=-this.Ub;x=this.Tb;L=0;g=-g;k=-k;m=-m;n=-n;q=-q;p=-p;r=-r;v=-v;t=-t;w=-w;B=-B;u=-u;D=-D;C=-C;A=-A;E=-E;x=-x;L=-L;var N=this.Wf,I=this.Xf,M=this.Yf,O=(this.C.P*N+this.C.R*I+this.C.S*M)*N+(this.C.T*N+this.C.U*I+this.C.V*M)*I+(this.C.W*N+this.C.X*I+this.C.Y*M)*M,ga=(this.D.P*N+this.D.R*I+this.D.S*M)*N+(this.D.T*N+this.D.U*I+this.D.V*M)*I+(this.D.W*N+this.D.X*I+this.D.Y*M)*M;if(0<O){var ha=N*this.Qb+I*this.Rb+M*this.Sb,na=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-ha*ha;0<na&&(O=0<this.C.$a?1/(1/O+this.C.Nc*na):0)}if(0<ga){var qa=N*this.Tb+I*this.Ub+M*this.Vb,Ca=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-qa*qa;0<Ca&&(ga=0<this.D.$a?1/(1/ga+this.D.Nc*Ca):0)}var ka=O+ga?1/(O+ga):0,bb=this.Zf,U=this.$f,R=this.ag,xa=(this.C.P*bb+this.C.R*U+this.C.S*R)*bb+(this.C.T*bb+this.C.U*U+this.C.V*R)*U+(this.C.W*bb+this.C.X*U+this.C.Y*R)*R,Na=(this.D.P*bb+this.D.R*U+this.D.S*R)*bb+(this.D.T*bb+this.D.U*U+this.D.V*R)*U+(this.D.W*bb+this.D.X*U+this.D.Y*R)*R;if(0<xa){var Ra=bb*this.Qb+U*this.Rb+R*this.Sb,wa=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-Ra*Ra;0<wa&&(xa=0<this.C.$a?1/(1/xa+this.C.Nc*wa):0)}if(0<Na){var Pa=bb*this.Tb+U*this.Ub+R*this.Vb,Ba=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-Pa*Pa;0<Ba&&(Na=0<this.D.$a?1/(1/Na+this.D.Nc*Ba):0)}var Da=xa+Na?1/(xa+Na):0,H=this.Ob[0],Qa=a.rows[a.La++],ba=Qa.Ba;ba.wa=0;ba.xa=0;ba.ya=0;ba.Ca=0;ba.Da=0;ba.Ea=0;ba.ba=0;ba.ca=0;ba.da=0;ba.fa=0;ba.ga=0;ba.ha=0;Qa.Ga=0;Qa.Na=0;Qa.Ja=0;Qa.Ia=0;Qa.motorSpeed=0;Qa.cb=0;Qa.va=H;var Q=Qa;Q.Ga=c;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;var P=Q.Ba;P.wa=1;P.xa=0;P.ya=0;P.Ca=1;P.Da=0;P.Ea=0;P.ba=g;P.ca=k;P.da=m;P.fa=w;P.ga=B;P.ha=u;var ya=this.Ob[1],ta=a.rows[a.La++],W=ta.Ba;W.wa=0;W.xa=0;W.ya=0;W.Ca=0;W.Da=0;W.Ea=0;W.ba=0;W.ca=0;W.da=0;W.fa=0;W.ga=0;W.ha=0;ta.Ga=0;ta.Na=0;ta.Ja=0;ta.Ia=0;ta.motorSpeed=0;ta.cb=0;ta.va=ya;Q=ta;Q.Ga=f;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;P=Q.Ba;P.wa=0;P.xa=1;P.ya=0;P.Ca=0;P.Da=1;P.Ea=0;P.ba=n;P.ca=q;P.da=p;P.fa=D;P.ga=C;P.ha=A;var pa=this.Ob[2],y=a.rows[a.La++],Ia=y.Ba;Ia.wa=0;Ia.xa=0;Ia.ya=0;Ia.Ca=0;Ia.Da=0;Ia.Ea=0;Ia.ba=0;Ia.ca=0;Ia.da=0;Ia.fa=0;Ia.ga=0;Ia.ha=0;y.Ga=0;y.Na=0;y.Ja=0;y.Ia=0;y.motorSpeed=0;y.cb=0;y.va=pa;Q=y;Q.Ga=h;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;P=Q.Ba;P.wa=0;P.xa=0;P.ya=1;P.Ca=0;P.Da=0;P.Ea=1;P.ba=r;P.ca=v;P.da=t;P.fa=E;P.ga=x;P.ha=L;if(!this.Cm&&(0>=this.Fk.frequency||!e)){var ca=this.Ob[3],Ea=a.rows[a.La++],za=Ea.Ba;za.wa=0;za.xa=0;za.ya=0;za.Ca=0;za.Da=0;za.Ea=0;za.ba=0;za.ca=0;za.da=0;za.fa=0;za.ga=0;za.ha=0;Ea.Ga=0;Ea.Na=0;Ea.Ja=0;Ea.Ia=0;Ea.motorSpeed=0;Ea.cb=0;Ea.va=ca;var Q=Ea,Fa=this.yi,Sa=this.xk,la=this.Fk,Z,Ga,ra=F.angularSlop;if(e)Z=0,Ga=1;else{if(0<la.frequency){var ra=0,va=6.28318530717958*la.frequency,J=la.dampingRatio;J<F.minSpringDamperDampingRatio&&(J=F.minSpringDamperDampingRatio);var La=b.dt,Xa=2*J*va,S=va*va;la.useSymplecticEuler?(Z=1/(La*Xa),Ga=S/Xa):(Z=1/(La*(La*S+Xa)),Ga=S/(La*S+Xa))}else Z=0,Ga=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Sa.motorTorque?(Q.motorSpeed=Sa.motorSpeed,Q.cb=Sa.motorTorque*b.dt):(Q.motorSpeed=0,Q.cb=0)}var Ya=Sa.lowerLimit,T=Sa.upperLimit,K=.5*(Ya+T),Fa=Fa-K,Fa=((Fa+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Fa=Fa+K,ia,gb,da;Ya>T?da=gb=ia=0:Ya==T?(ia=-1/0,gb=1/0,da=Fa-Ya):Fa<Ya?(ia=-1/0,gb=0,da=Fa-Ya+ra,0<da&&(da=0)):Fa>T?(ia=0,gb=1/0,da=Fa-T-ra,0>da&&(da=0)):da=gb=ia=0;var mb=ka?1/ka:0;Q.Ja=ia;Q.Ia=gb;Q.Na=Z*mb;Q.Ga=da*Ga;P=Q.Ba;P.ba=this.Wf;P.ca=this.Xf;P.da=this.Yf;P.fa=this.Wf;P.ga=this.Xf;P.ha=this.Yf}if(!this.Dm){var sa=this.Ob[4],fb=a.rows[a.La++],jb=fb.Ba;jb.wa=0;jb.xa=0;jb.ya=0;jb.Ca=0;jb.Da=0;jb.Ea=0;jb.ba=0;jb.ca=0;jb.da=0;jb.fa=0;jb.ga=0;jb.ha=0;fb.Ga=0;fb.Na=0;fb.Ja=0;fb.Ia=0;fb.motorSpeed=0;fb.cb=0;fb.va=sa;Q=fb;Q.Ga=l;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;P=Q.Ba;P.ba=this.Og;P.ca=this.Pg;P.da=this.Qg;P.fa=this.Og;P.ga=this.Pg;P.ha=this.Qg}if(!this.Em&&(0>=this.Gk.frequency||!e)){var Za=this.Ob[5],ma=a.rows[a.La++],oa=ma.Ba;oa.wa=0;oa.xa=0;oa.ya=0;oa.Ca=0;oa.Da=0;oa.Ea=0;oa.ba=0;oa.ca=0;oa.da=0;oa.fa=0;oa.ga=0;oa.ha=0;ma.Ga=0;ma.Na=0;ma.Ja=0;ma.Ia=0;ma.motorSpeed=0;ma.cb=0;ma.va=Za;var Q=ma,Ja=this.zi,Ha=this.yk,ob=this.Gk,fa,ea,ja=F.angularSlop;if(e)fa=0,ea=1;else{if(0<ob.frequency){var ja=0,cb=6.28318530717958*ob.frequency,Aa=ob.dampingRatio;Aa<F.minSpringDamperDampingRatio&&(Aa=F.minSpringDamperDampingRatio);var sb=b.dt,Ua=2*Aa*cb,qb=cb*cb;ob.useSymplecticEuler?(fa=1/(sb*Ua),ea=qb/Ua):(fa=1/(sb*(sb*qb+Ua)),ea=qb/(sb*qb+Ua))}else fa=0,ea=this.Ec==ic.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Ha.motorTorque?(Q.motorSpeed=Ha.motorSpeed,Q.cb=Ha.motorTorque*b.dt):(Q.motorSpeed=0,Q.cb=0)}var rb=Ha.lowerLimit,tb=Ha.upperLimit,Va=.5*(rb+tb),Ja=Ja-Va,Ja=((Ja+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Ja=Ja+Va,xb,Wa,$a;rb>tb?$a=Wa=xb=0:rb==tb?(xb=-1/0,Wa=1/0,$a=Ja-rb):Ja<rb?(xb=-1/0,Wa=0,$a=Ja-rb+ja,0<$a&&($a=0)):Ja>tb?(xb=0,Wa=1/0,$a=Ja-tb-ja,0>$a&&($a=0)):$a=Wa=xb=0;var ua=Da?1/Da:0;Q.Ja=xb;Q.Ia=Wa;Q.Na=fa*ua;Q.Ga=$a*ea;P=Q.Ba;P.ba=this.Zf;P.ca=this.$f;P.da=this.ag;P.fa=this.Zf;P.ga=this.$f;P.ha=this.ag}},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f,h,l,g;a=this.vb;b=this.wb;e=this.xb;h=this.Rg;l=this.Sg;g=this.Tg;d=l*e-g*b;c=g*a-h*e;f=h*b-l*a;this.Wf=c*g-f*l;this.Xf=f*h-d*g;this.Yf=d*l-c*h;this.Og=d;this.Pg=c;this.Qg=f;this.Zf=b*f-e*c;this.$f=e*d-a*f;this.ag=a*c-b*d;a=this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf;0<a&&(a=1/Math.sqrt(a));this.Wf*=a;this.Xf*=a;this.Yf*=a;a=this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg;0<a&&(a=1/Math.sqrt(a));this.Og*=a;this.Pg*=a;this.Qg*=a;a=this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag;0<a&&(a=1/Math.sqrt(a));this.Zf*=a;this.$f*=a;this.ag*=a;this.Cm=!(this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf);this.Dm=!(this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg);this.Em=!(this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag);var k,m,n,q,p,r,v,t,w;k=this.vb;a=this.xe;b=this.th;m=this.wb;e=this.ye;d=this.uh;n=this.xb;c=this.ze;f=this.vh;q=this.Zb;p=this.ne;h=this.Rg;r=this.$b;v=this.oe;l=this.Sg;t=this.ac;w=this.pe;g=this.Tg;var B,u,D;B=k*h+m*l+n*g;u=a*p+e*v+c*w;D=b*p+d*v+f*w;-1>=B?(e=Math.atan2(D,u),a=.5*e,b=-1.570796326794895,e=.5*-e):1<=B?(e=Math.atan2(D,u),a=.5*e,b=1.570796326794895,e*=.5):(B=Math.asin(B),k=Math.atan2(-(k*p+m*v+n*w),k*q+m*r+n*t),a=Math.atan2(-(a*h+e*l+c*g),b*h+d*l+f*g),b=B,e=k);this.yi=a;this.zl=b;this.zi=e;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Rg;a.y=this.Sg;a.z=this.Tg;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Rg;a.y=this.Sg;a.z=this.Tg},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.Kc;a.y=this.Lc;a.z=this.Mc;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.Kc;a.y=this.Lc;a.z=this.Mc},on:function(){return this.Fk},pn:function(){return this.Gk},kn:function(){return this.xk},ln:function(){return this.yk},en:function(){return this.yi},fn:function(){return this.zi},ra:ub});Qd.aa=!0;Qd.Kb=$b;Qd.prototype=mb($b.prototype,{Aa:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;d=a.a.o*f+a.a.i*h+a.a.l*l;e=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;f=this.localAxis1;f.x=d;f.y=e;f.z=a;d=c.x;e=c.y;f=c.z;c=b.a.o*d+b.a.i*e+b.a.l*f;a=b.a.f*d+b.a.m*e+b.a.g*f;b=b.a.h*d+b.a.j*e+b.a.s*f;d=this.localAxis2;d.x=c;d.y=a;d.z=b;return this},ra:Qd});ne.aa=!0;of.aa=!0;of.prototype={ra:of};Oe.aa=!0;Oe.prototype={ra:Oe};ak.aa=!0;ak.prototype={Aa:function(a){this.Pc=a.Pc;for(var b=0,e=this.Pc;b<e;){var d=b++;this.gh[d]=a.gh[d];this.kh[d]=a.kh[d]}this.je=a.je;b=0;for(e=this.je;b<e;)d=b++,this.Dg[d]=a.Dg[d]},Tk:function(a,b,e,d,c,f,h){for(var l=0,g=this.je;l<g;){var k=l++,k=this.Dg[k],m=a.rows[k];this.Rk[k]=m.Ga*f-e[k]-m.Na*d[k]}l=b.Oi;g=0;for(k=this.Pc;g<k;){var n=g++,m=this.gh[n],n=this.kh[n],q=a.rows[m],n=(0>n?q.Ja:0<n?q.Ia:0)-d[m];if(c[m]=n)for(var q=0,p=this.je;q<p;){var r=q++,v=r=this.Dg[r],t=this.Rk;t[v]-=l[m][r]*n}}g=this.Dg;k=this.je;for(n=m=0;n<k;)q=n++,m|=1<<g[q];b.zj[m]||(b.$m(m,g,k),b.zj[m]=!0);g=b.ik[m];b=!0;k=0;for(m=this.je;k<m;){for(var n=k++,q=this.Dg[n],p=a.rows[q],v=r=d[q],t=0,w=this.je;t<w;)var B=t++,v=v+this.Rk[this.Dg[B]]*g[n][B];if(v<p.Ja-F.directMlcpSolverEps||v>p.Ia+F.directMlcpSolverEps){b=!1;break}c[q]=v-r}if(h)return!0;if(!b)return!1;h=0;for(g=this.Pc;h<g;){n=h++;k=this.gh[n];m=a.rows[k];n=this.kh[n];q=d[k]+c[k];p=e[k];r=0;for(v=a.La;r<v;)t=r++,p+=l[k][t]*c[t];k=m.Ga*f-p-m.Na*q;if(0>n&&k>F.directMlcpSolverEps||0<n&&k<-F.directMlcpSolverEps){b=!1;break}}return b},ra:ak};tg.aa=!0;tg.prototype={ra:tg};Bk.aa=!0;Bk.prototype={Fh:function(a,b){if(b==a.La)null==this.Eh[this.Ze]&&(this.Eh[this.Ze]=new ak(this.Dn)),this.Eh[this.Ze++].Aa(this.Te);else{var e=a.rows[b],d=e.Ja>-1/0,c=e.Ia<1/0;0==e.Ja&&0==e.Ia?(c=this.Te,c.gh[c.Pc]=b,c.kh[c.Pc]=0,c.Pc++,this.Fh(a,b+1),this.Te.Pc--):(e=this.Te,e.Dg[e.je]=b,e.je++,this.Fh(a,b+1),this.Te.je--,d&&(d=this.Te,d.gh[d.Pc]=b,d.kh[d.Pc]=-1,d.Pc++,this.Fh(a,b+1),this.Te.Pc--),c&&(c=this.Te,c.gh[c.Pc]=b,c.kh[c.Pc]=1,c.Pc++,this.Fh(a,b+1),this.Te.Pc--))}},ra:Bk};Md.aa=!0;Md.prototype={ra:Md};wc.aa=!0;wc.Kb=Sb;wc.prototype=mb(Sb.prototype,{jh:function(a){this.$.ed();this.$.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;this.Rh.Uk(this.info,this.Yb);a=this.Ee;a.Ze=0;var b=a.Te;b.Pc=0;b.je=0;a.Fh(this.info,0);a=this.ul;for(var b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b},sh:function(a){var b=this.$.Ec==ic.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.La;b<a;){var e=b++,e=this.info.rows[e].va;e.va=0;e.Yc=0;e.ub=0}else{a=0;for(e=this.info.La;a<e;){var d=a++,c=this.info.rows[d],f=c.va,h=f.va*b;h<c.Ja?h=c.Ja:h>c.Ia&&(h=c.Ia);f.va=h;0<c.cb?(h=f.Yc*b,c=c.cb,h<-c?h=-c:h>c&&(h=c),f.Yc=h):f.Yc=0;this.sf[d]=f.va+f.Yc}var b=this.sf,e=a=!1,l,g,k,m,n,q,p,r,d=this.C.eb,f=this.C.fb,c=this.C.gb,h=this.D.eb;l=this.D.fb;g=this.D.gb;k=this.C.ib;m=this.C.jb;n=this.C.kb;q=this.D.ib;p=this.D.jb;r=this.D.kb;for(var v=0,t=this.info.La;v<t;){var w=v++,B=this.info.rows[w].Ba,u=this.Yb[w],w=b[w];B.wc&1&&(d+=u.md*w,f+=u.nd*w,c+=u.od*w,h+=u.pd*-w,l+=u.qd*-w,g+=u.rd*-w,a=!0);B.wc&2&&(k+=u.fd*w,m+=u.gd*w,n+=u.hd*w,q+=u.jd*-w,p+=u.kd*-w,r+=u.ld*-w,e=!0)}a&&(this.C.eb=d,this.C.fb=f,this.C.gb=c,this.D.eb=h,this.D.fb=l,this.D.gb=g);e&&(this.C.ib=k,this.C.jb=m,this.C.kb=n,this.D.ib=q,this.D.jb=p,this.D.kb=r)}},nh:function(){var a=this.info.La,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.ib;g=this.C.jb;k=this.C.kb;m=this.D.ib;n=this.D.jb;q=this.D.kb;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.va,v=v.Ba,w=0,w=w+(b*v.wa+e*v.xa+d*v.ya),w=w-(c*v.Ca+f*v.Da+h*v.Ea),w=w+(l*v.ba+g*v.ca+k*v.da),w=w-(m*v.fa+n*v.ga+q*v.ha);this.Hg[r]=w;this.Kh[r]=t.va;this.lj[r]=0}b=this.Rh.Oi;for(e=0;e<a;)if(d=e++,h=this.info.rows[d],c=h.va,l=this.Yb[d],0<h.cb)for(f=c.Yc,h=f+l.tf*(-h.motorSpeed-this.Hg[d]),l=c.Yc,h<-l?h=-l:h>l&&(h=l),c.Yc=h,c=h-f,this.lj[d]=c,f=0,h=a;f<h;)g=l=f++,k=this.Hg,k[g]+=c*b[d][l];e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ul.oc[b],this.Ee.Eh[b].Tk(this.info,this.Rh,this.Hg,this.Kh,this.sf,1,!1)){for(e=0;e<a;)c=e++,d=this.sf[c],this.info.rows[c].va.va+=d,f=this.lj,f[c]+=d;a=this.lj;d=e=!1;c=this.C.eb;f=this.C.fb;h=this.C.gb;l=this.D.eb;g=this.D.fb;k=this.D.gb;m=this.C.ib;n=this.C.jb;q=this.C.kb;p=this.D.ib;r=this.D.jb;t=this.D.kb;v=0;for(w=this.info.La;v<w;){var B=v++,u=this.info.rows[B].Ba,D=this.Yb[B],B=a[B];u.wc&1&&(c+=D.md*B,f+=D.nd*B,h+=D.od*B,l+=D.pd*-B,g+=D.qd*-B,k+=D.rd*-B,e=!0);u.wc&2&&(m+=D.fd*B,n+=D.gd*B,q+=D.hd*B,p+=D.jd*-B,r+=D.kd*-B,t+=D.ld*-B,d=!0)}e&&(this.C.eb=c,this.C.fb=f,this.C.gb=h,this.D.eb=l,this.D.fb=g,this.D.gb=k);d&&(this.C.ib=m,this.C.jb=n,this.C.kb=q,this.D.ib=p,this.D.jb=r,this.D.kb=t);a=this.ul;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.La;l<g;){var k=l++,m=this.info.rows[k],k=m.va,m=m.Ba;m.wc&1?(b+=m.wa*k.va,e+=m.xa*k.va,d+=m.ya*k.va):m.wc&2&&(c+=m.ba*k.va,f+=m.ca*k.va,h+=m.da*k.va)}this.$.Ai=b*a.invDt;this.$.Bi=e*a.invDt;this.$.Ci=d*a.invDt;this.$.Di=c*a.invDt;this.$.Ei=f*a.invDt;this.$.Fi=h*a.invDt},Gg:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.Rh.Uk(this.info,this.Yb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Pc=0;b.je=0;a.Fh(this.info,0);for(var a=this.ui,b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b;a=0;for(b=this.info.La;a<b;)e=a++,this.info.rows[e].va.ub=0},mh:function(){var a=this.info.La,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.Uc;e=this.C.Vc;d=this.C.Wc;c=this.D.Uc;f=this.D.Vc;h=this.D.Wc;l=this.C.Qc;g=this.C.Rc;k=this.C.Sc;m=this.D.Qc;n=this.D.Rc;q=this.D.Sc;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.va,v=v.Ba,w=0,w=w+(b*v.wa+e*v.xa+d*v.ya),w=w-(c*v.Ca+f*v.Da+h*v.Ea),w=w+(l*v.ba+g*v.ca+k*v.da),w=w-(m*v.fa+n*v.ga+q*v.ha);this.Hg[r]=w;this.Kh[r]=t.ub}e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ui.oc[b],this.Ee.Eh[b].Tk(this.info,this.Rh,this.Hg,this.Kh,this.sf,F.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)d=e++,this.info.rows[d].va.ub+=this.sf[d];a=this.sf;d=e=!1;c=this.C.Uc;f=this.C.Vc;h=this.C.Wc;l=this.D.Uc;g=this.D.Vc;k=this.D.Wc;m=this.C.Qc;n=this.C.Rc;q=this.C.Sc;p=this.D.Qc;r=this.D.Rc;t=this.D.Sc;v=0;for(w=this.info.La;v<w;){var B=v++,u=this.info.rows[B].Ba,D=this.Yb[B],B=a[B];u.wc&1&&(c+=D.md*B,f+=D.nd*B,h+=D.od*B,l+=D.pd*-B,g+=D.qd*-B,k+=D.rd*-B,e=!0);u.wc&2&&(m+=D.fd*B,n+=D.gd*B,q+=D.hd*B,p+=D.jd*-B,r+=D.kd*-B,t+=D.ld*-B,d=!0)}e&&(this.C.Uc=c,this.C.Vc=f,this.C.Wc=h,this.D.Uc=l,this.D.Vc=g,this.D.Wc=k);d&&(this.C.Qc=m,this.C.Rc=n,this.C.Sc=q,this.D.Qc=p,this.D.Rc=r,this.D.Sc=t);a=this.ui;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},lh:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.Rh.Uk(this.info,this.Yb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Pc=0;b.je=0;a.Fh(this.info,0);for(var e=this.ui,d=this.Ee.Ze,c=0,f=0,h=0,l=e.n;h<l;){var g=h++,k=e.oc[g];k<d?(e.af[c]=k,++c):(e.af[d+f]=k,++f)}var m=e.oc;e.oc=e.af;e.af=m;for(var n=this.info.La,q=0;q<n;){var p=q++,r=this.info.rows[p].va;this.Hg[p]=0;this.Kh[p]=r.ub}for(var v=!1,t=0,w=this.Ee.Ze;t<w;){var B=t++,u=this.ui.oc[B];if(this.Ee.Eh[u].Tk(this.info,this.Rh,this.Hg,this.Kh,this.sf,F.positionNgsBaumgarte,!1)){for(var D=0,C=n;D<C;){var A=D++;this.info.rows[A].va.ub+=this.sf[A]}for(var E=this.sf,x=!1,L=!1,N,I,M,O,ga,ha,na,qa,xa,ka,bb,U,R=U=bb=ka=xa=qa=na=ha=ga=O=M=I=N=0,Ca=this.info.La;R<Ca;){var Na=R++,Ra=this.info.rows[Na].Ba,wa=this.Yb[Na],Pa=E[Na];Ra.wc&1&&(N+=wa.md*Pa,I+=wa.nd*Pa,M+=wa.od*Pa,O+=wa.pd*-Pa,ga+=wa.qd*-Pa,ha+=wa.rd*-Pa,x=!0);Ra.wc&2&&(na+=wa.fd*Pa,qa+=wa.gd*Pa,xa+=wa.hd*Pa,ka+=wa.jd*-Pa,bb+=wa.kd*-Pa,U+=wa.ld*-Pa,L=!0)}if(x){var Ba=this.C;Ba.a.v+=N;Ba.a.A+=I;Ba.a.B+=M;var Da=this.D;Da.a.v+=O;Da.a.A+=ga;Da.a.B+=ha}if(L){var H=this.C,Qa=Math.sqrt(na*na+qa*qa+xa*xa),ba=.5*Qa,Q,P;if(.5>ba){var ya=ba*ba;Q=.5*(1-.16666666666666666*ya+ya*ya*.008333333333333333);P=1-.5*ya+ya*ya*.041666666666666664}else Q=Math.sin(ba)/Qa,P=Math.cos(ba);var ta,W,pa;ta=na*Q;W=qa*Q;pa=xa*Q;var y,Ia,ca,Ea;y=ta;Ia=W;ca=pa;Ea=P;var za,Fa,Sa,la,Z=H.a.o,Ga=H.a.m,ra=H.a.s,va=Z+Ga+ra,J;0<va?(J=Math.sqrt(va+1),la=.5*J,J=.5/J,za=(H.a.g-H.a.j)*J,Fa=(H.a.h-H.a.l)*J,Sa=(H.a.i-H.a.f)*J):Z>Ga?Z>ra?(J=Math.sqrt(Z-Ga-ra+1),za=.5*J,J=.5/J,Fa=(H.a.f+H.a.i)*J,Sa=(H.a.h+H.a.l)*J,la=(H.a.g-H.a.j)*J):(J=Math.sqrt(ra-Z-Ga+1),Sa=.5*J,J=.5/J,za=(H.a.h+H.a.l)*J,Fa=(H.a.j+H.a.g)*J,la=(H.a.i-H.a.f)*J):Ga>ra?(J=Math.sqrt(Ga-ra-Z+1),Fa=.5*J,J=.5/J,za=(H.a.f+H.a.i)*J,Sa=(H.a.j+H.a.g)*J,la=(H.a.h-H.a.l)*J):(J=Math.sqrt(ra-Z-Ga+1),Sa=.5*J,J=.5/J,za=(H.a.h+H.a.l)*J,Fa=(H.a.j+H.a.g)*J,la=(H.a.i-H.a.f)*J);za=Ea*za+y*la+Ia*Sa-ca*Fa;Fa=Ea*Fa-y*Sa+Ia*la+ca*za;Sa=Ea*Sa+y*Fa-Ia*za+ca*la;la=Ea*la-y*za-Ia*Fa-ca*Sa;var La=za*za+Fa*Fa+Sa*Sa+la*la;1E-32<La&&(La=1/Math.sqrt(La));za*=La;Fa*=La;Sa*=La;la*=La;var Xa=za,S=Fa,Ya=Sa,T=la,K=2*Xa,ia=2*S,gb=2*Ya,da=Xa*K,Wa=S*ia,sa=Ya*gb,fb=Xa*ia,jb=S*gb,Za=Xa*gb,ma=T*K,oa=T*ia,Ja=T*gb;H.a.o=1-Wa-sa;H.a.f=fb-Ja;H.a.h=Za+oa;H.a.i=fb+Ja;H.a.m=1-da-sa;H.a.j=jb-ma;H.a.l=Za-oa;H.a.g=jb+ma;H.a.s=1-da-Wa;var Ha,ob,fa,ea,ja,cb,Aa,sb,Ua;Ha=H.a.o*H.Ra+H.a.f*H.Ua+H.a.h*H.Xa;ob=H.a.o*H.Sa+H.a.f*H.Va+H.a.h*H.Ya;fa=H.a.o*H.Ta+H.a.f*H.Wa+H.a.h*H.Za;ea=H.a.i*H.Ra+H.a.m*H.Ua+H.a.j*H.Xa;ja=H.a.i*H.Sa+H.a.m*H.Va+H.a.j*H.Ya;cb=H.a.i*H.Ta+H.a.m*H.Wa+H.a.j*H.Za;Aa=H.a.l*H.Ra+H.a.g*H.Ua+H.a.s*H.Xa;sb=H.a.l*H.Sa+H.a.g*H.Va+H.a.s*H.Ya;Ua=H.a.l*H.Ta+H.a.g*H.Wa+H.a.s*H.Za;H.P=Ha;H.R=ob;H.S=fa;H.T=ea;H.U=ja;H.V=cb;H.W=Aa;H.X=sb;H.Y=Ua;var qb,rb,tb,Va,xb,mb,$a,ua,Ab;qb=H.P*H.a.o+H.R*H.a.f+H.S*H.a.h;rb=H.P*H.a.i+H.R*H.a.m+H.S*H.a.j;tb=H.P*H.a.l+H.R*H.a.g+H.S*H.a.s;Va=H.T*H.a.o+H.U*H.a.f+H.V*H.a.h;xb=H.T*H.a.i+H.U*H.a.m+H.V*H.a.j;mb=H.T*H.a.l+H.U*H.a.g+H.V*H.a.s;$a=H.W*H.a.o+H.X*H.a.f+H.Y*H.a.h;ua=H.W*H.a.i+H.X*H.a.m+H.Y*H.a.j;Ab=H.W*H.a.l+H.X*H.a.g+H.Y*H.a.s;H.P=qb;H.R=rb;H.S=tb;H.T=Va;H.U=xb;H.V=mb;H.W=$a;H.X=ua;H.Y=Ab;H.P*=H.N.x;H.R*=H.N.x;H.S*=H.N.x;H.T*=H.N.y;H.U*=H.N.y;H.V*=H.N.y;H.W*=H.N.z;H.X*=H.N.z;H.Y*=H.N.z;var G=this.D,pb=Math.sqrt(ka*ka+bb*bb+U*U),db=.5*pb,ub,ab;if(.5>db){var hb=db*db;ub=.5*(1-.16666666666666666*hb+hb*hb*.008333333333333333);ab=1-.5*hb+hb*hb*.041666666666666664}else ub=Math.sin(db)/pb,ab=Math.cos(db);var z,Db,vb;z=ka*ub;Db=bb*ub;vb=U*ub;var zb,Fb,Oa,nb;zb=z;Fb=Db;Oa=vb;nb=ab;var wb,yb,eb,Y,Ma=G.a.o,kb=G.a.m,Ta=G.a.s,ib=Ma+kb+Ta,Ka;0<ib?(Ka=Math.sqrt(ib+1),Y=.5*Ka,Ka=.5/Ka,wb=(G.a.g-G.a.j)*Ka,yb=(G.a.h-G.a.l)*Ka,eb=(G.a.i-G.a.f)*Ka):Ma>kb?Ma>Ta?(Ka=Math.sqrt(Ma-kb-Ta+1),wb=.5*Ka,Ka=.5/Ka,yb=(G.a.f+G.a.i)*Ka,eb=(G.a.h+G.a.l)*Ka,Y=(G.a.g-G.a.j)*Ka):(Ka=Math.sqrt(Ta-Ma-kb+1),eb=.5*Ka,Ka=.5/Ka,wb=(G.a.h+G.a.l)*Ka,yb=(G.a.j+G.a.g)*Ka,Y=(G.a.i-G.a.f)*Ka):kb>Ta?(Ka=Math.sqrt(kb-Ta-Ma+1),yb=.5*Ka,Ka=.5/Ka,wb=(G.a.f+G.a.i)*Ka,eb=(G.a.j+G.a.g)*Ka,Y=(G.a.h-G.a.l)*Ka):(Ka=Math.sqrt(Ta-Ma-kb+1),eb=.5*Ka,Ka=.5/Ka,wb=(G.a.h+G.a.l)*Ka,yb=(G.a.j+G.a.g)*Ka,Y=(G.a.i-G.a.f)*Ka);wb=nb*wb+zb*Y+Fb*eb-Oa*yb;yb=nb*yb-zb*eb+Fb*Y+Oa*wb;eb=nb*eb+zb*yb-Fb*wb+Oa*Y;Y=nb*Y-zb*wb-Fb*yb-Oa*eb;var Kb=wb*wb+yb*yb+eb*eb+Y*Y;1E-32<Kb&&(Kb=1/Math.sqrt(Kb));wb*=Kb;yb*=Kb;eb*=Kb;Y*=Kb;var Eb=wb,X=yb,Cb=eb,Lb=Y,Gb=2*Eb,Jb=2*X,ec=2*Cb,Mb=Eb*Gb,Nb=X*Jb,Sb=Cb*ec,Pb=Eb*Jb,Tb=X*ec,jc=Eb*ec,pc=Lb*Gb,kc=Lb*Jb,ac=Lb*ec;G.a.o=1-Nb-Sb;G.a.f=Pb-ac;G.a.h=jc+kc;G.a.i=Pb+ac;G.a.m=1-Mb-Sb;G.a.j=Tb-pc;G.a.l=jc-kc;G.a.g=Tb+pc;G.a.s=1-Mb-Nb;var Vb,Wb,Qb,fc,Rb,Ob,Xb,gc,Ib;Vb=G.a.o*G.Ra+G.a.f*G.Ua+G.a.h*G.Xa;Wb=G.a.o*G.Sa+G.a.f*G.Va+G.a.h*G.Ya;Qb=G.a.o*G.Ta+G.a.f*G.Wa+G.a.h*G.Za;fc=G.a.i*G.Ra+G.a.m*G.Ua+G.a.j*G.Xa;Rb=G.a.i*G.Sa+G.a.m*G.Va+G.a.j*G.Ya;Ob=G.a.i*G.Ta+G.a.m*G.Wa+G.a.j*G.Za;Xb=G.a.l*G.Ra+G.a.g*G.Ua+G.a.s*G.Xa;gc=G.a.l*G.Sa+G.a.g*G.Va+G.a.s*G.Ya;Ib=G.a.l*G.Ta+G.a.g*G.Wa+G.a.s*G.Za;G.P=Vb;G.R=Wb;G.S=Qb;G.T=fc;G.U=Rb;G.V=Ob;G.W=Xb;G.X=gc;G.Y=Ib;var Zb,lb,bc,cc,dc,qc,mc,hc,ic;Zb=G.P*G.a.o+G.R*G.a.f+G.S*G.a.h;lb=G.P*G.a.i+G.R*G.a.m+G.S*G.a.j;bc=G.P*G.a.l+G.R*G.a.g+G.S*G.a.s;cc=G.T*G.a.o+G.U*G.a.f+G.V*G.a.h;dc=G.T*G.a.i+G.U*G.a.m+G.V*G.a.j;qc=G.T*G.a.l+G.U*G.a.g+G.V*G.a.s;mc=G.W*G.a.o+G.X*G.a.f+G.Y*G.a.h;hc=G.W*G.a.i+G.X*G.a.m+G.Y*G.a.j;ic=G.W*G.a.l+G.X*G.a.g+G.Y*G.a.s;G.P=Zb;G.R=lb;G.S=bc;G.T=cc;G.U=dc;G.V=qc;G.W=mc;G.X=hc;G.Y=ic;G.P*=G.N.x;G.R*=G.N.x;G.S*=G.N.x;G.T*=G.N.y;G.U*=G.N.y;G.V*=G.N.y;G.W*=G.N.z;G.X*=G.N.z;G.Y*=G.N.z}for(var $b=this.ui,sc=0;$b.oc[sc]!=u;)++sc;for(;0<sc;){var vc=$b.oc[sc];$b.oc[sc]=$b.oc[sc-1];$b.oc[sc-1]=vc;--sc}v=!0;break}}v||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},$e:function(){this.$.ed();this.$.Cl()},ra:wc});Uf.aa=!0;Uf.prototype={$m:function(a,b,e){for(var d=0;d<e;)for(var c=d++,f=b[c],h=0,l=e;h<l;){var g=h++;this.ck[c][g]=this.$a[f][b[g]]}d=this.ck;a=this.ik[a];var k;switch(e){case 4:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[5];k=a[5];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=c[5]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=c[5]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=c[5]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=c[5]*g[4];g=d[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=c[5]*g[4];c=d[5];b=a[5];e=1/c[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[5];g=d[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=d[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=d[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=d[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;c=d[h];b=a[h];l=1/c[h];b[h]=l;g=0;for(k=h;g<k;){var m=g++;b[m]*=l}g=h+1;for(k=e;g<k;)m=g++,c[m]*=l;for(var m=0,n=h;m<n;){var q=m++,g=d[q];k=a[q];for(var p=0,q=q+1;p<q;){var r=p++;k[r]-=b[r]*g[h]}k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}m=h+1;for(n=e;m<n;){k=m++;g=d[k];k=a[k];p=0;for(q=h;p<q;)r=p++,k[r]-=b[r]*g[h];k[h]=-l*g[h];k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}}for(d=1;d<e;)for(c=d++,b=a[c],f=0,h=c;f<h;)l=f++,a[l][c]=b[l]}},Uk:function(a,b){var e=this.$a,d=this.Oi,c=a.La,f=a.Ce,h=a.De,l=f.$a,g=h.$a,k,m,n,q,p,r,v,t,w,B,u,D,C,A,E,x;k=f.P;m=f.R;n=f.S;q=f.T;p=f.U;r=f.V;v=f.W;t=f.X;f=f.Y;w=h.P;B=h.R;u=h.S;D=h.T;C=h.U;A=h.V;E=h.W;x=h.X;for(var h=h.Y,F=0;F<c;){var N=F++,I=a.rows[N].Ba,N=b[N];I.Bm();I.wc&1?(N.md=I.wa*l,N.nd=I.xa*l,N.od=I.ya*l,N.pd=I.Ca*g,N.qd=I.Da*g,N.rd=I.Ea*g):(N.md=0,N.nd=0,N.od=0,N.pd=0,N.qd=0,N.rd=0);if(I.wc&2){var L,M,O;L=k*I.ba+m*I.ca+n*I.da;M=q*I.ba+p*I.ca+r*I.da;O=v*I.ba+t*I.ca+f*I.da;N.fd=L;N.gd=M;N.hd=O;L=w*I.fa+B*I.ga+u*I.ha;M=D*I.fa+C*I.ga+A*I.ha;I=E*I.fa+x*I.ga+h*I.ha;N.jd=L;N.kd=M;N.ld=I}else N.fd=0,N.gd=0,N.hd=0,N.jd=0,N.kd=0,N.ld=0}for(l=0;l<c;)for(g=l++,k=a.rows[g].Ba,m=g,n=c;m<n;)q=m++,p=b[q],r=k.wa*p.md+k.xa*p.nd+k.ya*p.od+(k.ba*p.fd+k.ca*p.gd+k.da*p.hd)+(k.Ca*p.pd+k.Da*p.qd+k.Ea*p.rd)+(k.fa*p.jd+k.ga*p.kd+k.ha*p.ld),g==q?(e[g][q]=r+a.rows[g].Na,d[g][q]=r,p.mass=r+a.rows[g].Na,p.tf=r,0!=p.mass&&(p.mass=1/p.mass),p.tf&&(p.tf=1/p.tf)):(e[g][q]=r,e[q][g]=r,d[g][q]=r,d[q][g]=r);a=0;for(b=this.Ij;a<b;)e=a++,this.zj[e]=!1},ra:Uf};zb.aa=!0;zb.Kb=Sb;zb.prototype=mb(Sb.prototype,{jh:function(a){this.ti.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.$a;var b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.info.rows[A],A=this.Yb[A],x=E.Eg;A.Lh=x.wa*a;A.Mh=x.xa*a;A.Nh=x.ya*a;A.Oh=x.Ca*b;A.Ph=x.Da*b;A.Qh=x.Ea*b;var F,N,I;F=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;A.Nf=F;A.Of=N;A.Pf=I;F=n*x.fa+q*x.ga+p*x.ha;N=r*x.fa+v*x.ga+t*x.ha;I=w*x.fa+B*x.ga+u*x.ha;A.Qf=F;A.Rf=N;A.Sf=I;A.ie=a+b+(A.Nf*x.ba+A.Of*x.ca+A.Pf*x.da)+(A.Qf*x.fa+A.Rf*x.ga+A.Sf*x.ha);0!=A.ie&&(A.ie=1/A.ie);x=E.vj;E=E.uj;A.gl=x.wa*a;A.hl=x.xa*a;A.il=x.ya*a;A.jl=x.Ca*b;A.kl=x.Da*b;A.ll=x.Ea*b;A.al=E.wa*a;A.bl=E.xa*a;A.cl=E.ya*a;A.dl=E.Ca*b;A.el=E.Da*b;A.fl=E.Ea*b;F=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;A.oj=F;A.pj=N;A.qj=I;F=n*x.fa+q*x.ga+p*x.ha;N=r*x.fa+v*x.ga+t*x.ha;I=w*x.fa+B*x.ga+u*x.ha;A.rj=F;A.sj=N;A.tj=I;F=e*E.ba+d*E.ca+c*E.da;N=f*E.ba+h*E.ca+l*E.da;I=g*E.ba+k*E.ca+m*E.da;A.Tj=F;A.Uj=N;A.Vj=I;F=n*E.fa+q*E.ga+p*E.ha;N=r*E.fa+v*E.ga+t*E.ha;I=w*E.fa+B*E.ga+u*E.ha;A.Wj=F;A.Xj=N;A.Yj=I;x=a+b+(A.oj*x.ba+A.pj*x.ca+A.qj*x.da)+(A.rj*x.fa+A.sj*x.ga+A.tj*x.ha);N=F=A.oj*E.ba+A.pj*E.ca+A.qj*E.da+(A.rj*E.fa+A.sj*E.ga+A.tj*E.ha);E=a+b+(A.Tj*E.ba+A.Uj*E.ca+A.Vj*E.da)+(A.Wj*E.fa+A.Xj*E.ga+A.Yj*E.ha);(I=x*E-F*N)&&(I=1/I);A.om=E*I;A.pm=-F*I;A.qm=-N*I;A.rm=x*I}},sh:function(a){var b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.ib;g=this.C.jb;k=this.C.kb;m=this.D.ib;n=this.D.jb;q=this.D.kb;for(var p=0,r=this.info.La;p<r;){var v=p++,t=this.info.rows[v],w=t.va,v=this.Yb[v],B=t.vj,u=t.uj,t=w.Zc,B=w.Ue*B.wa+w.Ve*B.xa+w.We*B.ya,u=w.Ue*u.wa+w.Ve*u.xa+w.We*u.ya;w.yc=B;w.xc=u;w.Zc*=a.dtRatio;w.yc*=a.dtRatio;w.xc*=a.dtRatio;b+=v.Lh*t;e+=v.Mh*t;d+=v.Nh*t;b+=v.gl*B;e+=v.hl*B;d+=v.il*B;b+=v.al*u;e+=v.bl*u;d+=v.cl*u;c+=v.Oh*-t;f+=v.Ph*-t;h+=v.Qh*-t;c+=v.jl*-B;f+=v.kl*-B;h+=v.ll*-B;c+=v.dl*-u;f+=v.el*-u;h+=v.fl*-u;l+=v.Nf*t;g+=v.Of*t;k+=v.Pf*t;l+=v.oj*B;g+=v.pj*B;k+=v.qj*B;l+=v.Tj*u;g+=v.Uj*u;k+=v.Vj*u;m+=v.Qf*-t;n+=v.Rf*-t;q+=v.Sf*-t;m+=v.rj*-B;n+=v.sj*-B;q+=v.tj*-B;m+=v.Wj*-u;n+=v.Xj*-u;q+=v.Yj*-u}this.C.eb=b;this.C.fb=e;this.C.gb=d;this.D.eb=c;this.D.fb=f;this.D.gb=h;this.C.ib=l;this.C.jb=g;this.C.kb=k;this.D.ib=m;this.D.jb=n;this.D.kb=q},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.eb;b=this.C.fb;e=this.C.gb;d=this.D.eb;c=this.D.fb;f=this.D.gb;h=this.C.ib;l=this.C.jb;g=this.C.kb;k=this.D.ib;m=this.D.jb;n=this.D.kb;for(var q=0,p=this.info.La;q<p;){var r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=0,B=v.vj,w=w+(a*B.wa+b*B.xa+e*B.ya),w=w-(d*B.Ca+c*B.Da+f*B.Ea),w=w+(h*B.ba+l*B.ca+g*B.da),w=w-(k*B.fa+m*B.ga+n*B.ha),u=0,B=v.uj,u=u+(a*B.wa+b*B.xa+e*B.ya),u=u-(d*B.Ca+c*B.Da+f*B.Ea),u=u+(h*B.ba+l*B.ca+g*B.da),u=u-(k*B.fa+m*B.ga+n*B.ha),B=-(w*r.om+u*r.pm),D=-(w*r.qm+u*r.rm),w=t.yc,u=t.xc;t.yc+=B;t.xc+=D;(v=v.friction*t.Zc)?(B=t.yc*t.yc+t.xc*t.xc,B>v*v&&(v/=Math.sqrt(B),t.yc*=v,t.xc*=v)):(t.yc=0,t.xc=0);B=t.yc-w;D=t.xc-u;a+=r.gl*B;b+=r.hl*B;e+=r.il*B;a+=r.al*D;b+=r.bl*D;e+=r.cl*D;d+=r.jl*-B;c+=r.kl*-B;f+=r.ll*-B;d+=r.dl*-D;c+=r.el*-D;f+=r.fl*-D;h+=r.oj*B;l+=r.pj*B;g+=r.qj*B;h+=r.Tj*D;l+=r.Uj*D;g+=r.Vj*D;k+=r.rj*-B;m+=r.sj*-B;n+=r.tj*-B;k+=r.Wj*-D;m+=r.Xj*-D;n+=r.Yj*-D}q=0;for(p=this.info.La;q<p;)r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=0,u=v.Eg,w+=a*u.wa+b*u.xa+e*u.ya,w-=d*u.Ca+c*u.Da+f*u.Ea,w+=h*u.ba+l*u.ca+g*u.da,w-=k*u.fa+m*u.ga+n*u.ha,v=(v.Ga-w)*r.ie,w=t.Zc,t.Zc+=v,0>t.Zc&&(t.Zc=0),v=t.Zc-w,a+=r.Lh*v,b+=r.Mh*v,e+=r.Nh*v,d+=r.Oh*-v,c+=r.Ph*-v,f+=r.Qh*-v,h+=r.Nf*v,l+=r.Of*v,g+=r.Pf*v,k+=r.Qf*-v,m+=r.Rf*-v,n+=r.Sf*-v;this.C.eb=a;this.C.fb=b;this.C.gb=e;this.D.eb=d;this.D.fb=c;this.D.gb=f;this.C.ib=h;this.C.jb=l;this.C.kb=g;this.D.ib=k;this.D.jb=m;this.D.kb=n},Gg:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.Yb[A],A=this.info.rows[A].Eg;E.Lh=A.wa*a;E.Mh=A.xa*a;E.Nh=A.ya*a;E.Oh=A.Ca*b;E.Ph=A.Da*b;E.Qh=A.Ea*b;var x,F,N;x=e*A.ba+d*A.ca+c*A.da;F=f*A.ba+h*A.ca+l*A.da;N=g*A.ba+k*A.ca+m*A.da;E.Nf=x;E.Of=F;E.Pf=N;x=n*A.fa+q*A.ga+p*A.ha;F=r*A.fa+v*A.ga+t*A.ha;N=w*A.fa+B*A.ga+u*A.ha;E.Qf=x;E.Rf=F;E.Sf=N;E.ie=a+b+(E.Nf*A.ba+E.Of*A.ca+E.Pf*A.da)+(E.Qf*A.fa+E.Rf*A.ga+E.Sf*A.ha);0!=E.ie&&(E.ie=1/E.ie)}a=0;for(b=this.info.La;a<b;)e=a++,this.info.rows[e].va.ub=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Uc;b=this.C.Vc;e=this.C.Wc;d=this.D.Uc;c=this.D.Vc;f=this.D.Wc;h=this.C.Qc;l=this.C.Rc;g=this.C.Sc;k=this.D.Qc;m=this.D.Rc;n=this.D.Sc;for(var q=0,p=this.info.La;q<p;){var r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=v.Eg,B=0,B=B+(a*w.wa+b*w.xa+e*w.ya),B=B-(d*w.Ca+c*w.Da+f*w.Ea),B=B+(h*w.ba+l*w.ca+g*w.da),B=B-(k*w.fa+m*w.ga+n*w.ha),v=(v.Ga-B)*r.ie*F.positionSplitImpulseBaumgarte,w=t.ub;t.ub+=v;0>t.ub&&(t.ub=0);v=t.ub-w;a+=r.Lh*v;b+=r.Mh*v;e+=r.Nh*v;d+=r.Oh*-v;c+=r.Ph*-v;f+=r.Qh*-v;h+=r.Nf*v;l+=r.Of*v;g+=r.Pf*v;k+=r.Qf*-v;m+=r.Rf*-v;n+=r.Sf*-v}this.C.Uc=a;this.C.Vc=b;this.C.Wc=e;this.D.Uc=d;this.D.Vc=c;this.D.Wc=f;this.C.Qc=h;this.C.Rc=l;this.C.Sc=g;this.D.Qc=k;this.D.Rc=m;this.D.Sc=n},lh:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.Yb[A],x=this.info.rows[A].Eg;E.Lh=x.wa*a;E.Mh=x.xa*a;E.Nh=x.ya*a;E.Oh=x.Ca*b;E.Ph=x.Da*b;E.Qh=x.Ea*b;var L,N,I;L=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;E.Nf=L;E.Of=N;E.Pf=I;var M,O,ga;M=n*x.fa+q*x.ga+p*x.ha;O=r*x.fa+v*x.ga+t*x.ha;ga=w*x.fa+B*x.ga+u*x.ha;E.Qf=M;E.Rf=O;E.Sf=ga;E.ie=a+b+(E.Nf*x.ba+E.Of*x.ca+E.Pf*x.da)+(E.Qf*x.fa+E.Rf*x.ga+E.Sf*x.ha);0!=E.ie&&(E.ie=1/E.ie)}for(var ha,na,qa,wa,ka,xa,U,R,Ca,Na,Ra,Da,Pa=Da=Ra=Na=Ca=R=U=xa=ka=wa=qa=na=ha=0,Ba=this.info.La;Pa<Ba;){var Wa=Pa++,H=this.info.rows[Wa],Qa=this.Yb[Wa],ba=H.va,Q=H.Eg,P=0,P=P+(ha*Q.wa+na*Q.xa+qa*Q.ya),P=P-(wa*Q.Ca+ka*Q.Da+xa*Q.Ea),P=P+(U*Q.ba+R*Q.ca+Ca*Q.da),P=P-(Na*Q.fa+Ra*Q.ga+Da*Q.ha),ya=(H.Ga-P)*Qa.ie*F.positionNgsBaumgarte,ta=ba.ub;ba.ub+=ya;0>ba.ub&&(ba.ub=0);ya=ba.ub-ta;ha+=Qa.Lh*ya;na+=Qa.Mh*ya;qa+=Qa.Nh*ya;wa+=Qa.Oh*-ya;ka+=Qa.Ph*-ya;xa+=Qa.Qh*-ya;U+=Qa.Nf*ya;R+=Qa.Of*ya;Ca+=Qa.Pf*ya;Na+=Qa.Qf*-ya;Ra+=Qa.Rf*-ya;Da+=Qa.Sf*-ya}var W=this.C;W.a.v+=ha;W.a.A+=na;W.a.B+=qa;var pa=this.D;pa.a.v+=wa;pa.a.A+=ka;pa.a.B+=xa;var y=this.C,Ia=Math.sqrt(U*U+R*R+Ca*Ca),ca=.5*Ia,Ea,za;if(.5>ca){var Fa=ca*ca;Ea=.5*(1-.16666666666666666*Fa+Fa*Fa*.008333333333333333);za=1-.5*Fa+Fa*Fa*.041666666666666664}else Ea=Math.sin(ca)/Ia,za=Math.cos(ca);var Sa,la;Sa=U*Ea;la=R*Ea;var Z,Ga;Z=Ca*Ea;Ga=za;var ra,va,J,La,Xa=y.a.o,S=y.a.m,Ya=y.a.s,T=Xa+S+Ya,K;0<T?(K=Math.sqrt(T+1),La=.5*K,K=.5/K,ra=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,J=(y.a.i-y.a.f)*K):Xa>S?Xa>Ya?(K=Math.sqrt(Xa-S-Ya+1),ra=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,J=(y.a.h+y.a.l)*K,La=(y.a.g-y.a.j)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K):S>Ya?(K=Math.sqrt(S-Ya-Xa+1),va=.5*K,K=.5/K,ra=(y.a.f+y.a.i)*K,J=(y.a.j+y.a.g)*K,La=(y.a.h-y.a.l)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K);ra=Ga*ra+Sa*La+la*J-Z*va;va=Ga*va-Sa*J+la*La+Z*ra;J=Ga*J+Sa*va-la*ra+Z*La;La=Ga*La-Sa*ra-la*va-Z*J;var ia=ra*ra+va*va+J*J+La*La;1E-32<ia&&(ia=1/Math.sqrt(ia));ra*=ia;va*=ia;J*=ia;La*=ia;var gb=ra,da=va,mb=J,sa=La,fb=2*gb,jb=2*da,Za=2*mb,ma=gb*fb,oa=da*jb,Ja=mb*Za,Ha=gb*jb,ob=da*Za,fa=gb*Za,ea=sa*fb,ja=sa*jb,cb=sa*Za;y.a.o=1-oa-Ja;y.a.f=Ha-cb;y.a.h=fa+ja;y.a.i=Ha+cb;y.a.m=1-ma-Ja;y.a.j=ob-ea;y.a.l=fa-ja;y.a.g=ob+ea;y.a.s=1-ma-oa;var Aa,sb,Ua,qb,rb,tb,Va,xb,ub;Aa=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;sb=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;Ua=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;qb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;rb=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;tb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;Va=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;xb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;ub=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;y.P=Aa;y.R=sb;y.S=Ua;y.T=qb;y.U=rb;y.V=tb;y.W=Va;y.X=xb;y.Y=ub;var $a,ua,zb,G,pb,db,Ab,ab,hb;$a=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;ua=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;zb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;G=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;pb=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;db=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;Ab=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;ab=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;hb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=$a;y.R=ua;y.S=zb;y.T=G;y.U=pb;y.V=db;y.W=Ab;y.X=ab;y.Y=hb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var z=this.D,Db=Math.sqrt(Na*Na+Ra*Ra+Da*Da),vb=.5*Db,Eb,Fb;if(.5>vb){var Oa=vb*vb;Eb=.5*(1-.16666666666666666*Oa+Oa*Oa*.008333333333333333);Fb=1-.5*Oa+Oa*Oa*.041666666666666664}else Eb=Math.sin(vb)/Db,Fb=Math.cos(vb);var nb,wb;nb=Na*Eb;wb=Ra*Eb;var yb,eb;yb=Da*Eb;eb=Fb;var Y,Ma,kb,Ta,ib=z.a.o,Ka=z.a.m,Kb=z.a.s,Lb=ib+Ka+Kb,X;0<Lb?(X=Math.sqrt(Lb+1),Ta=.5*X,X=.5/X,Y=(z.a.g-z.a.j)*X,Ma=(z.a.h-z.a.l)*X,kb=(z.a.i-z.a.f)*X):ib>Ka?ib>Kb?(X=Math.sqrt(ib-Ka-Kb+1),Y=.5*X,X=.5/X,Ma=(z.a.f+z.a.i)*X,kb=(z.a.h+z.a.l)*X,Ta=(z.a.g-z.a.j)*X):(X=Math.sqrt(Kb-ib-Ka+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,Ma=(z.a.j+z.a.g)*X,Ta=(z.a.i-z.a.f)*X):Ka>Kb?(X=Math.sqrt(Ka-Kb-ib+1),Ma=.5*X,X=.5/X,Y=(z.a.f+z.a.i)*X,kb=(z.a.j+z.a.g)*X,Ta=(z.a.h-z.a.l)*X):(X=Math.sqrt(Kb-ib-Ka+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,Ma=(z.a.j+z.a.g)*X,Ta=(z.a.i-z.a.f)*X);Y=eb*Y+nb*Ta+wb*kb-yb*Ma;Ma=eb*Ma-nb*kb+wb*Ta+yb*Y;kb=eb*kb+nb*Ma-wb*Y+yb*Ta;Ta=eb*Ta-nb*Y-wb*Ma-yb*kb;var Cb=Y*Y+Ma*Ma+kb*kb+Ta*Ta;1E-32<Cb&&(Cb=1/Math.sqrt(Cb));Y*=Cb;Ma*=Cb;kb*=Cb;Ta*=Cb;var Gb=Y,Jb=Ma,Mb=kb,ec=Ta,Nb=2*Gb,Sb=2*Jb,Pb=2*Mb,Tb=Gb*Nb,$b=Jb*Sb,jc=Mb*Pb,pc=Gb*Sb,kc=Jb*Pb,ac=Gb*Pb,Vb=ec*Nb,Wb=ec*Sb,Qb=ec*Pb;z.a.o=1-$b-jc;z.a.f=pc-Qb;z.a.h=ac+Wb;z.a.i=pc+Qb;z.a.m=1-Tb-jc;z.a.j=kc-Vb;z.a.l=ac-Wb;z.a.g=kc+Vb;z.a.s=1-Tb-$b;var fc,Rb,Ob,Xb,gc,Ib,Zb,lb,bc;fc=z.a.o*z.Ra+z.a.f*z.Ua+z.a.h*z.Xa;Rb=z.a.o*z.Sa+z.a.f*z.Va+z.a.h*z.Ya;Ob=z.a.o*z.Ta+z.a.f*z.Wa+z.a.h*z.Za;Xb=z.a.i*z.Ra+z.a.m*z.Ua+z.a.j*z.Xa;gc=z.a.i*z.Sa+z.a.m*z.Va+z.a.j*z.Ya;Ib=z.a.i*z.Ta+z.a.m*z.Wa+z.a.j*z.Za;Zb=z.a.l*z.Ra+z.a.g*z.Ua+z.a.s*z.Xa;lb=z.a.l*z.Sa+z.a.g*z.Va+z.a.s*z.Ya;bc=z.a.l*z.Ta+z.a.g*z.Wa+z.a.s*z.Za;z.P=fc;z.R=Rb;z.S=Ob;z.T=Xb;z.U=gc;z.V=Ib;z.W=Zb;z.X=lb;z.Y=bc;var cc,dc,qc,mc,hc,ic,nc,sc,vc;cc=z.P*z.a.o+z.R*z.a.f+z.S*z.a.h;dc=z.P*z.a.i+z.R*z.a.m+z.S*z.a.j;qc=z.P*z.a.l+z.R*z.a.g+z.S*z.a.s;mc=z.T*z.a.o+z.U*z.a.f+z.V*z.a.h;hc=z.T*z.a.i+z.U*z.a.m+z.V*z.a.j;ic=z.T*z.a.l+z.U*z.a.g+z.V*z.a.s;nc=z.W*z.a.o+z.X*z.a.f+z.Y*z.a.h;sc=z.W*z.a.i+z.X*z.a.m+z.Y*z.a.j;vc=z.W*z.a.l+z.X*z.a.g+z.Y*z.a.s;z.P=cc;z.R=dc;z.S=qc;z.T=mc;z.U=hc;z.V=ic;z.W=nc;z.X=sc;z.Y=vc;z.P*=z.N.x;z.R*=z.N.x;z.S*=z.N.x;z.T*=z.N.y;z.U*=z.N.y;z.V*=z.N.y;z.W*=z.N.z;z.X*=z.N.z;z.Y*=z.N.z},$e:function(){for(var a=0,b=this.info.La;a<b;){var e=a++,d=this.info.rows[e],e=d.va,c=d.vj,d=d.uj,f,h,l;l=h=f=0;f+=c.wa*e.yc;h+=c.xa*e.yc;l+=c.ya*e.yc;f+=d.wa*e.xc;h+=d.xa*e.xc;l+=d.ya*e.xc;e.Ue=f;e.Ve=h;e.We=l}this.ti.Ik()},ra:zb});bc.aa=!0;bc.Kb=Sb;bc.prototype=mb(Sb.prototype,{jh:function(a){this.$.ed();this.$.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.$a;var b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.info.rows[A],A=this.Yb[A],x=E.Ba;x.Bm();x.wc&1?(A.md=x.wa*a,A.nd=x.xa*a,A.od=x.ya*a,A.pd=x.Ca*b,A.qd=x.Da*b,A.rd=x.Ea*b):(A.md=0,A.nd=0,A.od=0,A.pd=0,A.qd=0,A.rd=0);if(x.wc&2){var F,N,I;F=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;A.fd=F;A.gd=N;A.hd=I;F=n*x.fa+q*x.ga+p*x.ha;N=r*x.fa+v*x.ga+t*x.ha;I=w*x.fa+B*x.ga+u*x.ha;A.jd=F;A.kd=N;A.ld=I}else A.fd=0,A.gd=0,A.hd=0,A.jd=0,A.kd=0,A.ld=0;A.tf=A.md*x.wa+A.nd*x.xa+A.od*x.ya+(A.pd*x.Ca+A.qd*x.Da+A.rd*x.Ea)+(A.fd*x.ba+A.gd*x.ca+A.hd*x.da)+(A.jd*x.fa+A.kd*x.ga+A.ld*x.ha);A.mass=A.tf+E.Na;A.tf&&(A.tf=1/A.tf);0!=A.mass&&(A.mass=1/A.mass)}},sh:function(a){var b=this.$.Ec==ic.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.La;b<a;){var e=b++,e=this.info.rows[e].va;e.va=0;e.Yc=0;e.ub=0}else{var d,c,f,h,l,g,k,m,n,q;a=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.ib;g=this.C.jb;k=this.C.kb;m=this.D.ib;n=this.D.jb;q=this.D.kb;for(var p=0,r=this.info.La;p<r;){var v=p++,t=this.Yb[v],v=this.info.rows[v].va;v.va*=b;v.Yc*=b;v=v.va+v.Yc;a+=t.md*v;e+=t.nd*v;d+=t.od*v;c+=t.pd*-v;f+=t.qd*-v;h+=t.rd*-v;l+=t.fd*v;g+=t.gd*v;k+=t.hd*v;m+=t.jd*-v;n+=t.kd*-v;q+=t.ld*-v}this.C.eb=a;this.C.fb=e;this.C.gb=d;this.D.eb=c;this.D.fb=f;this.D.gb=h;this.C.ib=l;this.C.jb=g;this.C.kb=k;this.D.ib=m;this.D.jb=n;this.D.kb=q}},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.eb;b=this.C.fb;e=this.C.gb;d=this.D.eb;c=this.D.fb;f=this.D.gb;h=this.C.ib;l=this.C.jb;g=this.C.kb;k=this.D.ib;m=this.D.jb;n=this.D.kb;for(var q=0,p=this.info.La;q<p;){var r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=v.Ba;if(0!=v.cb){var B=0,B=B+(a*w.wa+b*w.xa+e*w.ya),B=B-(d*w.Ca+c*w.Da+f*w.Ea),B=B+(h*w.ba+l*w.ca+g*w.da),B=B-(k*w.fa+m*w.ga+n*w.ha),B=(-v.motorSpeed-B)*r.tf,u=t.Yc;t.Yc+=B;t.Yc<-v.cb?t.Yc=-v.cb:t.Yc>v.cb&&(t.Yc=v.cb);B=t.Yc-u;w.wc&1&&(a+=r.md*B,b+=r.nd*B,e+=r.od*B,d+=r.pd*-B,c+=r.qd*-B,f+=r.rd*-B);w.wc&2&&(h+=r.fd*B,l+=r.gd*B,g+=r.hd*B,k+=r.jd*-B,m+=r.kd*-B,n+=r.ld*-B)}}q=0;for(p=this.info.La;q<p;)r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=v.Ba,B=0,B+=a*w.wa+b*w.xa+e*w.ya,B-=d*w.Ca+c*w.Da+f*w.Ea,B+=h*w.ba+l*w.ca+g*w.da,B-=k*w.fa+m*w.ga+n*w.ha,B=(v.Ga-B-t.va*v.Na)*r.mass,u=t.va,t.va+=B,t.va<v.Ja?t.va=v.Ja:t.va>v.Ia&&(t.va=v.Ia),B=t.va-u,w.wc&1&&(a+=r.md*B,b+=r.nd*B,e+=r.od*B,d+=r.pd*-B,c+=r.qd*-B,f+=r.rd*-B),w.wc&2&&(h+=r.fd*B,l+=r.gd*B,g+=r.hd*B,k+=r.jd*-B,m+=r.kd*-B,n+=r.ld*-B);this.C.eb=a;this.C.fb=b;this.C.gb=e;this.D.eb=d;this.D.fb=c;this.D.gb=f;this.C.ib=h;this.C.jb=l;this.C.kb=g;this.D.ib=k;this.D.jb=m;this.D.kb=n},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.La;l<g;){var k=l++,m=this.info.rows[k],k=m.va,m=m.Ba;m.wc&1?(b+=m.wa*k.va,e+=m.xa*k.va,d+=m.ya*k.va):m.wc&2&&(c+=m.ba*k.va,f+=m.ca*k.va,h+=m.da*k.va)}this.$.Ai=b*a.invDt;this.$.Bi=e*a.invDt;this.$.Ci=d*a.invDt;this.$.Di=c*a.invDt;this.$.Ei=f*a.invDt;this.$.Fi=h*a.invDt},Gg:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.Yb[A],A=this.info.rows[A].Ba;E.md=A.wa*a;E.nd=A.xa*a;E.od=A.ya*a;E.pd=A.Ca*b;E.qd=A.Da*b;E.rd=A.Ea*b;var x,F,N;x=e*A.ba+d*A.ca+c*A.da;F=f*A.ba+h*A.ca+l*A.da;N=g*A.ba+k*A.ca+m*A.da;E.fd=x;E.gd=F;E.hd=N;x=n*A.fa+q*A.ga+p*A.ha;F=r*A.fa+v*A.ga+t*A.ha;N=w*A.fa+B*A.ga+u*A.ha;E.jd=x;E.kd=F;E.ld=N;E.mass=E.md*A.wa+E.nd*A.xa+E.od*A.ya+(E.pd*A.Ca+E.qd*A.Da+E.rd*A.Ea)+(E.fd*A.ba+E.gd*A.ca+E.hd*A.da)+(E.jd*A.fa+E.kd*A.ga+E.ld*A.ha);E.mass&&(E.mass=1/E.mass)}a=0;for(b=this.info.La;a<b;)e=a++,this.info.rows[e].va.ub=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Uc;b=this.C.Vc;e=this.C.Wc;d=this.D.Uc;c=this.D.Vc;f=this.D.Wc;h=this.C.Qc;l=this.C.Rc;g=this.C.Sc;k=this.D.Qc;m=this.D.Rc;n=this.D.Sc;for(var q=0,p=this.info.La;q<p;){var r=q++,t=this.info.rows[r],r=this.Yb[r],C=t.va,w=t.Ba,B=0,B=B+(a*w.wa+b*w.xa+e*w.ya),B=B-(d*w.Ca+c*w.Da+f*w.Ea),B=B+(h*w.ba+l*w.ca+g*w.da),B=B-(k*w.fa+m*w.ga+n*w.ha),w=(t.Ga*F.positionSplitImpulseBaumgarte-B)*r.mass,B=C.ub;C.ub+=w;C.ub<t.Ja?C.ub=t.Ja:C.ub>t.Ia&&(C.ub=t.Ia);w=C.ub-B;a+=r.md*w;b+=r.nd*w;e+=r.od*w;d+=r.pd*-w;c+=r.qd*-w;f+=r.rd*-w;h+=r.fd*w;l+=r.gd*w;g+=r.hd*w;k+=r.jd*-w;m+=r.kd*-w;n+=r.ld*-w}this.C.Uc=a;this.C.Vc=b;this.C.Wc=e;this.D.Uc=d;this.D.Vc=c;this.D.Wc=f;this.C.Qc=h;this.C.Rc=l;this.C.Sc=g;this.D.Qc=k;this.D.Rc=m;this.D.Sc=n},lh:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,t,C,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;C=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,L=this.info.La;D<L;){var A=D++,E=this.Yb[A],x=this.info.rows[A].Ba;E.md=x.wa*a;E.nd=x.xa*a;E.od=x.ya*a;E.pd=x.Ca*b;E.qd=x.Da*b;E.rd=x.Ea*b;var M,N,I;M=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;E.fd=M;E.gd=N;E.hd=I;var O,ga,na;O=n*x.fa+q*x.ga+p*x.ha;ga=r*x.fa+t*x.ga+C*x.ha;na=w*x.fa+B*x.ga+u*x.ha;E.jd=O;E.kd=ga;E.ld=na;E.mass=E.md*x.wa+E.nd*x.xa+E.od*x.ya+(E.pd*x.Ca+E.qd*x.Da+E.rd*x.Ea)+(E.fd*x.ba+E.gd*x.ca+E.hd*x.da)+(E.jd*x.fa+E.kd*x.ga+E.ld*x.ha);E.mass&&(E.mass=1/E.mass)}for(var ha,qa,wa,xa,ka,Ca,U,R,Da,Na,Ra,Wa,Pa=Wa=Ra=Na=Da=R=U=Ca=ka=xa=wa=qa=ha=0,Ba=this.info.La;Pa<Ba;){var mb=Pa++,H=this.info.rows[mb],Qa=this.Yb[mb],ba=H.va,Q=H.Ba,P=0,P=P+(ha*Q.wa+qa*Q.xa+wa*Q.ya),P=P-(xa*Q.Ca+ka*Q.Da+Ca*Q.Ea),P=P+(U*Q.ba+R*Q.ca+Da*Q.da),P=P-(Na*Q.fa+Ra*Q.ga+Wa*Q.ha),ya=(H.Ga*F.positionNgsBaumgarte-P)*Qa.mass,ta=ba.ub;ba.ub+=ya;ba.ub<H.Ja?ba.ub=H.Ja:ba.ub>H.Ia&&(ba.ub=H.Ia);ya=ba.ub-ta;ha+=Qa.md*ya;qa+=Qa.nd*ya;wa+=Qa.od*ya;xa+=Qa.pd*-ya;ka+=Qa.qd*-ya;Ca+=Qa.rd*-ya;U+=Qa.fd*ya;R+=Qa.gd*ya;Da+=Qa.hd*ya;Na+=Qa.jd*-ya;Ra+=Qa.kd*-ya;Wa+=Qa.ld*-ya}var W=this.C;W.a.v+=ha;W.a.A+=qa;W.a.B+=wa;var pa=this.D;pa.a.v+=xa;pa.a.A+=ka;pa.a.B+=Ca;var y=this.C,Ia=Math.sqrt(U*U+R*R+Da*Da),ca=.5*Ia,Ea,za;if(.5>ca){var Fa=ca*ca;Ea=.5*(1-.16666666666666666*Fa+Fa*Fa*.008333333333333333);za=1-.5*Fa+Fa*Fa*.041666666666666664}else Ea=Math.sin(ca)/Ia,za=Math.cos(ca);var Sa,la;Sa=U*Ea;la=R*Ea;var Z,Ga;Z=Da*Ea;Ga=za;var ra,va,J,La,Xa=y.a.o,S=y.a.m,Ya=y.a.s,T=Xa+S+Ya,K;0<T?(K=Math.sqrt(T+1),La=.5*K,K=.5/K,ra=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,J=(y.a.i-y.a.f)*K):Xa>S?Xa>Ya?(K=Math.sqrt(Xa-S-Ya+1),ra=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,J=(y.a.h+y.a.l)*K,La=(y.a.g-y.a.j)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K):S>Ya?(K=Math.sqrt(S-Ya-Xa+1),va=.5*K,K=.5/K,ra=(y.a.f+y.a.i)*K,J=(y.a.j+y.a.g)*K,La=(y.a.h-y.a.l)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,La=(y.a.i-y.a.f)*K);ra=Ga*ra+Sa*La+la*J-Z*va;va=Ga*va-Sa*J+la*La+Z*ra;J=Ga*J+Sa*va-la*ra+Z*La;La=Ga*La-Sa*ra-la*va-Z*J;var ia=ra*ra+va*va+J*J+La*La;1E-32<ia&&(ia=1/Math.sqrt(ia));ra*=ia;va*=ia;J*=ia;La*=ia;var gb=ra,da=va,ub=J,sa=La,fb=2*gb,jb=2*da,Za=2*ub,ma=gb*fb,oa=da*jb,Ja=ub*Za,Ha=gb*jb,ob=da*Za,fa=gb*Za,ea=sa*fb,ja=sa*jb,cb=sa*Za;y.a.o=1-oa-Ja;y.a.f=Ha-cb;y.a.h=fa+ja;y.a.i=Ha+cb;y.a.m=1-ma-Ja;y.a.j=ob-ea;y.a.l=fa-ja;y.a.g=ob+ea;y.a.s=1-ma-oa;var Aa,sb,Ua,qb,rb,tb,Va,xb,vb;Aa=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;sb=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;Ua=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;qb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;rb=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;tb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;Va=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;xb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;vb=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;y.P=Aa;y.R=sb;y.S=Ua;y.T=qb;y.U=rb;y.V=tb;y.W=Va;y.X=xb;y.Y=vb;var $a,ua,zb,G,pb,db,Ab,ab,hb;$a=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;ua=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;zb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;G=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;pb=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;db=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;Ab=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;ab=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;hb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=$a;y.R=ua;y.S=zb;y.T=G;y.U=pb;y.V=db;y.W=Ab;y.X=ab;y.Y=hb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var z=this.D,Db=Math.sqrt(Na*Na+Ra*Ra+Wa*Wa),Eb=.5*Db,Gb,Fb;if(.5>Eb){var Oa=Eb*Eb;Gb=.5*(1-.16666666666666666*Oa+Oa*Oa*.008333333333333333);Fb=1-.5*Oa+Oa*Oa*.041666666666666664}else Gb=Math.sin(Eb)/Db,Fb=Math.cos(Eb);var nb,wb;nb=Na*Gb;wb=Ra*Gb;var yb,eb;yb=Wa*Gb;eb=Fb;var Y,Ma,kb,Ta,ib=z.a.o,Ka=z.a.m,Kb=z.a.s,Lb=ib+Ka+Kb,X;0<Lb?(X=Math.sqrt(Lb+1),Ta=.5*X,X=.5/X,Y=(z.a.g-z.a.j)*X,Ma=(z.a.h-z.a.l)*X,kb=(z.a.i-z.a.f)*X):ib>Ka?ib>Kb?(X=Math.sqrt(ib-Ka-Kb+1),Y=.5*X,X=.5/X,Ma=(z.a.f+z.a.i)*X,kb=(z.a.h+z.a.l)*X,Ta=(z.a.g-z.a.j)*X):(X=Math.sqrt(Kb-ib-Ka+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,Ma=(z.a.j+z.a.g)*X,Ta=(z.a.i-z.a.f)*X):Ka>Kb?(X=Math.sqrt(Ka-Kb-ib+1),Ma=.5*X,X=.5/X,Y=(z.a.f+z.a.i)*X,kb=(z.a.j+z.a.g)*X,Ta=(z.a.h-z.a.l)*X):(X=Math.sqrt(Kb-ib-Ka+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,Ma=(z.a.j+z.a.g)*X,Ta=(z.a.i-z.a.f)*X);Y=eb*Y+nb*Ta+wb*kb-yb*Ma;Ma=eb*Ma-nb*kb+wb*Ta+yb*Y;kb=eb*kb+nb*Ma-wb*Y+yb*Ta;Ta=eb*Ta-nb*Y-wb*Ma-yb*kb;var Cb=Y*Y+Ma*Ma+kb*kb+Ta*Ta;1E-32<Cb&&(Cb=1/Math.sqrt(Cb));Y*=Cb;Ma*=Cb;kb*=Cb;Ta*=Cb;var Jb=Y,Mb=Ma,Pb=kb,Nb=Ta,Sb=2*Jb,Tb=2*Mb,$b=2*Pb,bc=Jb*Sb,cc=Mb*Tb,jc=Pb*$b,dc=Jb*Tb,kc=Mb*$b,ac=Jb*$b,Vb=Nb*Sb,Wb=Nb*Tb,Qb=Nb*$b;z.a.o=1-cc-jc;z.a.f=dc-Qb;z.a.h=ac+Wb;z.a.i=dc+Qb;z.a.m=1-bc-jc;z.a.j=kc-Vb;z.a.l=ac-Wb;z.a.g=kc+Vb;z.a.s=1-bc-cc;var fc,Rb,Ob,Xb,gc,Ib,Zb,lb,hc;fc=z.a.o*z.Ra+z.a.f*z.Ua+z.a.h*z.Xa;Rb=z.a.o*z.Sa+z.a.f*z.Va+z.a.h*z.Ya;Ob=z.a.o*z.Ta+z.a.f*z.Wa+z.a.h*z.Za;Xb=z.a.i*z.Ra+z.a.m*z.Ua+z.a.j*z.Xa;gc=z.a.i*z.Sa+z.a.m*z.Va+z.a.j*z.Ya;Ib=z.a.i*z.Ta+z.a.m*z.Wa+z.a.j*z.Za;Zb=z.a.l*z.Ra+z.a.g*z.Ua+z.a.s*z.Xa;lb=z.a.l*z.Sa+z.a.g*z.Va+z.a.s*z.Ya;hc=z.a.l*z.Ta+z.a.g*z.Wa+z.a.s*z.Za;z.P=fc;z.R=Rb;z.S=Ob;z.T=Xb;z.U=gc;z.V=Ib;z.W=Zb;z.X=lb;z.Y=hc;var ic,nc,qc,mc,tc,uc,wc,sc,vc;ic=z.P*z.a.o+z.R*z.a.f+z.S*z.a.h;nc=z.P*z.a.i+z.R*z.a.m+z.S*z.a.j;qc=z.P*z.a.l+z.R*z.a.g+z.S*z.a.s;mc=z.T*z.a.o+z.U*z.a.f+z.V*z.a.h;tc=z.T*z.a.i+z.U*z.a.m+z.V*z.a.j;uc=z.T*z.a.l+z.U*z.a.g+z.V*z.a.s;wc=z.W*z.a.o+z.X*z.a.f+z.Y*z.a.h;sc=z.W*z.a.i+z.X*z.a.m+z.Y*z.a.j;vc=z.W*z.a.l+z.X*z.a.g+z.Y*z.a.s;z.P=ic;z.R=nc;z.S=qc;z.T=mc;z.U=tc;z.V=uc;z.W=wc;z.X=sc;z.Y=vc;z.P*=z.N.x;z.R*=z.N.x;z.S*=z.N.x;z.T*=z.N.y;z.U*=z.N.y;z.V*=z.N.y;z.W*=z.N.z;z.X*=z.N.z;z.Y*=z.N.z},$e:function(){this.$.ed();this.$.Cl()},ra:bc});Me.aa=!0;Me.prototype={ra:Me};C.aa=!0;C.prototype={Hl:function(a){switch(this.Xb){case 1:this.Sc=this.Rc=this.Qc=this.Wc=this.Vc=this.Uc=this.kb=this.jb=this.ib=this.gb=this.fb=this.eb=0;break;case 0:case 2:var b,e,d,c,f;b=this.eb*a;e=this.fb*a;d=this.gb*a;c=this.ib*a;f=this.jb*a;a=this.kb*a;var h=b*b+e*e+d*d,l=c*c+f*f+a*a;if(h||l){h>F.maxTranslationPerStep*F.maxTranslationPerStep&&(h=F.maxTranslationPerStep/Math.sqrt(h),this.eb*=h,this.fb*=h,this.gb*=h,b*=h,e*=h,d*=h);l>F.maxRotationPerStep*F.maxRotationPerStep&&(l=F.maxRotationPerStep/Math.sqrt(l),this.ib*=l,this.jb*=l,this.kb*=l,c*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(c*c+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));c*=b;f*=b;a*=b;b=e;e=this.a.o;d=this.a.m;var l=this.a.s,h=e+d+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+c*e+f*d-a*l;l=b*l-c*d+f*e+a*h;d=b*d+c*l-f*h+a*e;e=b*e-c*h-f*l-a*d;a=h*h+l*l+d*d+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;d*=a;b=e*a;var k=2*f;g=2*h;e=2*d;a=f*k;c=h*g;d*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-c-d;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-d;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-c;f=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=f;this.R=a;this.S=c;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;f=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;c=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=f;this.R=a;this.S=c;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}}},Rm:function(){var a=this.Qc*this.Qc+this.Rc*this.Rc+this.Sc*this.Sc;if(this.Uc*this.Uc+this.Vc*this.Vc+this.Wc*this.Wc||a)switch(this.Xb){case 1:this.Sc=this.Rc=this.Qc=this.Wc=this.Vc=this.Uc=0;break;case 0:case 2:var b,e,d,c,f;b=this.Uc;e=this.Vc;d=this.Wc;a=this.Qc;c=this.Rc;f=this.Sc;this.Sc=this.Rc=this.Qc=this.Wc=this.Vc=this.Uc=0;this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(a*a+c*c+f*f);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));a*=b;c*=b;f*=b;b=e;var h,l;e=this.a.o;d=this.a.m;l=this.a.s;h=e+d+l;var g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+a*e+c*d-f*l;l=b*l-a*d+c*e+f*h;d=b*d+a*l-c*h+f*e;e=b*e-a*h-c*l-f*d;c=h*h+l*l+d*d+e*e;1E-32<c&&(c=1/Math.sqrt(c));a=h*c;h=l*c;d*=c;b=e*c;var k=2*a;g=2*h;e=2*d;c=a*k;f=h*g;d*=e;l=a*g;h*=e;a*=e;k*=b;g*=b;b*=e;this.a.o=1-f-d;this.a.f=l-b;this.a.h=a+g;this.a.i=l+b;this.a.m=1-c-d;this.a.j=h-k;this.a.l=a-g;this.a.g=h+k;this.a.s=1-c-f;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=c;this.S=f;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;c=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=c;this.S=f;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}},wj:function(){for(var a,b,e,d,c,f,h,l,g,k=g=l=h=f=c=d=e=b=a=0,m=this.Ac;null!=m;){var n=m.M,q=m.Jb;q.Be();var p=m.jk*q.nf,r,t,C,w,B,u,D,F;r=m.ia.o*q.cg+m.ia.f*q.fg+m.ia.h*q.ig;t=m.ia.o*q.dg+m.ia.f*q.gg+m.ia.h*q.jg;C=m.ia.o*q.eg+m.ia.f*q.hg+m.ia.h*q.kg;w=m.ia.i*q.cg+m.ia.m*q.fg+m.ia.j*q.ig;B=m.ia.i*q.dg+m.ia.m*q.gg+m.ia.j*q.jg;u=m.ia.i*q.eg+m.ia.m*q.hg+m.ia.j*q.kg;D=m.ia.l*q.cg+m.ia.g*q.fg+m.ia.s*q.ig;F=m.ia.l*q.dg+m.ia.g*q.gg+m.ia.s*q.jg;var q=m.ia.l*q.eg+m.ia.g*q.hg+m.ia.s*q.kg,A,E,x,L,N,I;A=r*m.ia.o+t*m.ia.f+C*m.ia.h;E=r*m.ia.i+t*m.ia.m+C*m.ia.j;C=r*m.ia.l+t*m.ia.g+C*m.ia.s;x=w*m.ia.o+B*m.ia.f+u*m.ia.h;L=w*m.ia.i+B*m.ia.m+u*m.ia.j;u=w*m.ia.l+B*m.ia.g+u*m.ia.s;N=D*m.ia.o+F*m.ia.f+q*m.ia.h;I=D*m.ia.i+F*m.ia.m+q*m.ia.j;q=D*m.ia.l+F*m.ia.g+q*m.ia.s;r=A;t=E;w=x;B=L;D=N;F=I;r*=p;t*=p;C*=p;w*=p;B*=p;u*=p;D*=p;F*=p;var q=q*p,M,O,ga;x=m.ia.v*m.ia.v;L=m.ia.A*m.ia.A;M=m.ia.B*m.ia.B;N=-m.ia.v*m.ia.A;I=-m.ia.A*m.ia.B;ga=-m.ia.B*m.ia.v;m=L+M;A=N;E=ga;M=x+M;O=I;x+=L;r+=m*p;t+=A*p;C+=E*p;w+=N*p;B+=M*p;u+=O*p;D+=ga*p;F+=I*p;q+=x*p;k+=p;a+=r;b+=t;e+=C;d+=w;c+=B;f+=u;h+=D;l+=F;g+=q;m=n}this.Nc=k;this.wd=a;this.xd=b;this.yd=e;this.zd=d;this.Ad=c;this.Bd=f;this.Cd=h;this.Dd=l;this.Ed=g;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Nc&&0<a&&0==this.Xb){this.$a=1/this.Nc;a=this.Ad*this.Ed-this.Bd*this.Dd;b=this.zd*this.Ed-this.Bd*this.Cd;e=this.zd*this.Dd-this.Ad*this.Cd;d=this.xd*this.Ed-this.yd*this.Dd;c=this.wd*this.Ed-this.yd*this.Cd;f=this.wd*this.Dd-this.xd*this.Cd;h=this.xd*this.Bd-this.yd*this.Ad;l=this.wd*this.Bd-this.yd*this.zd;g=this.wd*this.Ad-this.xd*this.zd;k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-d*k;this.Ta=h*k;this.Ua=-b*k;this.Va=c*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.Zh=this.Ra;this.$h=this.Sa;this.ai=this.Ta;this.bi=this.Ua;this.ci=this.Va;this.di=this.Wa;this.ei=this.Xa;this.fi=this.Ya;this.gi=this.Za;this.Ra=this.Zh*this.N.x;this.Sa=this.$h*this.N.x;this.Ta=this.ai*this.N.x;this.Ua=this.bi*this.N.y;this.Va=this.ci*this.N.y;this.Wa=this.di*this.N.y;this.Xa=this.ei*this.N.z;this.Ya=this.fi*this.N.z;this.Za=this.gi*this.N.z}else this.gi=this.fi=this.ei=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Xb&&(this.Xb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},Xl:function(){var a=new t;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},Zl:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},tm:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.qa;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){var b=a.M,e=a.qa,d=a.ia,c=this.qa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;c=a.u.oa;d=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,c=a.a.A-a.qa.A,d=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}this.Gb=!1;this.yb=0},ym:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.qa;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Ac;null!=b;){e=b.M;a=b.qa;var d=b.ia,c=this.qa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;a=b.a;d=b.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;b.Jb.Mb(b.u,b.qa);a=b.u.na;c=b.u.oa;d=b.u.pa;f=b.u.ka;h=b.u.la;l=b.u.ma;b.Jb.Mb(b.u,b.a);b.u.na=a<b.u.na?a:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.pa=d<b.u.pa?d:b.u.pa;b.u.ka=f>b.u.ka?f:b.u.ka;b.u.la=h>b.u.la?h:b.u.la;b.u.ma=l>b.u.ma?l:b.u.ma;null!=b.Oa&&(a=b.a.v-b.qa.v,c=b.a.A-b.qa.A,d=b.a.B-b.qa.B,f=b.nc,f.x=a,f.y=c,f.z=d,b.Wb.kc.ec.sd(b.Oa,b.u,b.nc));b=e}this.Gb=!1;this.yb=0},bm:function(){var a=new O;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},gm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},um:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,d,c,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.qa;c=a.ia;d=this.qa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ia;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;d=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,d=a.a.A-a.qa.A,c=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}this.Gb=!1;this.yb=0},vm:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.a.o=e*d;this.a.f=-e*f;this.a.h=c;this.a.i=b*f+d*a*c;this.a.m=b*d-a*c*f;this.a.j=-e*a;this.a.l=a*f-b*d*c;this.a.g=d*a+b*c*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;b=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=c;this.S=f;this.T=e;this.U=d;this.V=b;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;c=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;e=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;b=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=c;this.S=f;this.T=e;this.U=d;this.V=b;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;c=this.a;a.v=c.v;a.A=c.A;a.B=c.B;a.o=c.o;a.f=c.f;a.h=c.h;a.i=c.i;a.m=c.m;a.j=c.j;a.l=c.l;a.g=c.g;a.s=c.s;for(a=this.Ac;null!=a;){c=a.M;f=a.qa;d=a.ia;e=this.qa;var k,m,n,q,p;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;f=a.a;d=a.ia;e=this.a;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;a.Jb.Mb(a.u,a.qa);f=a.u.na;e=a.u.oa;d=a.u.pa;b=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=f<a.u.na?f:a.u.na;a.u.oa=e<a.u.oa?e:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=b>a.u.ka?b:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(f=a.a.v-a.qa.v,e=a.a.A-a.qa.A,d=a.a.B-a.qa.B,b=a.nc,b.x=f,b.y=e,b.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=c}this.Gb=!1;this.yb=0},mm:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+d*this.a.l;m=b*this.a.f+e*this.a.m+d*this.a.g;b=b*this.a.h+e*this.a.j+d*this.a.s;e=c*this.a.o+f*this.a.i+h*this.a.l;d=c*this.a.f+f*this.a.m+h*this.a.g;c=c*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=d;this.a.j=c;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;m=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;k=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=c;this.W=f;this.X=h;this.Y=b;l=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;a=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;m=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;k=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;c=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;f=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=c;this.W=f;this.X=h;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;l=this.qa;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Ac;null!=l;){g=l.M;a=l.qa;k=l.ia;m=this.qa;var n,q,p;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;a=l.a;k=l.ia;m=this.a;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;l.Jb.Mb(l.u,l.qa);a=l.u.na;m=l.u.oa;k=l.u.pa;c=l.u.ka;f=l.u.la;h=l.u.ma;l.Jb.Mb(l.u,l.a);l.u.na=a<l.u.na?a:l.u.na;l.u.oa=m<l.u.oa?m:l.u.oa;l.u.pa=k<l.u.pa?k:l.u.pa;l.u.ka=c>l.u.ka?c:l.u.ka;l.u.la=f>l.u.la?f:l.u.la;l.u.ma=h>l.u.ma?h:l.u.ma;null!=l.Oa&&(a=l.a.v-l.qa.v,m=l.a.A-l.qa.A,k=l.a.B-l.qa.B,c=l.nc,c.x=a,c.y=m,c.z=k,l.Wb.kc.ec.sd(l.Oa,l.u,l.nc));l=g}this.Gb=!1;this.yb=0},nm:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);d=l*n;c=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=d*this.a.o+c*this.a.i+g*this.a.l;m=d*this.a.f+c*this.a.m+g*this.a.g;g=d*this.a.h+c*this.a.j+g*this.a.s;d=a*this.a.o+b*this.a.i+f*this.a.l;c=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=d;this.a.m=c;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;h=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;g=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;k=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;m=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;e=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;b=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;f=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;g=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;k=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;m=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;l=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;e=this.qa;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Ac;null!=e;){a=e.M;b=e.qa;h=e.ia;f=this.qa;var q,p,g=f.o*h.o+f.f*h.i+f.h*h.l,k=f.o*h.f+f.f*h.m+f.h*h.g,m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;b=e.a;h=e.ia;f=this.a;g=f.o*h.o+f.f*h.i+f.h*h.l;k=f.o*h.f+f.f*h.m+f.h*h.g;m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;e.Jb.Mb(e.u,e.qa);b=e.u.na;f=e.u.oa;h=e.u.pa;g=e.u.ka;k=e.u.la;m=e.u.ma;e.Jb.Mb(e.u,e.a);e.u.na=b<e.u.na?b:e.u.na;e.u.oa=f<e.u.oa?f:e.u.oa;e.u.pa=h<e.u.pa?h:e.u.pa;e.u.ka=g>e.u.ka?g:e.u.ka;e.u.la=k>e.u.la?k:e.u.la;e.u.ma=m>e.u.ma?m:e.u.ma;null!=e.Oa&&(b=e.a.v-e.qa.v,f=e.a.A-e.qa.A,h=e.a.B-e.qa.B,g=e.nc,g.x=b,g.y=f,g.z=h,e.Wb.kc.ec.sd(e.Oa,e.u,e.nc));e=a}this.Gb=!1;this.yb=0},Ol:function(){var a=new ga,b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},Ql:function(a){var b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},sm:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.a.o=1-g-d;this.a.f=k-c;this.a.h=b+h;this.a.i=k+c;this.a.m=1-a-d;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;l=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;e=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=g;this.S=c;this.T=l;this.U=d;this.V=k;this.W=h;this.X=e;this.Y=b;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;c=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;l=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;k=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;e=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=g;this.S=c;this.T=l;this.U=d;this.V=k;this.W=h;this.X=e;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Ac;null!=a;){g=a.M;c=a.qa;d=a.ia;var l=this.qa,m,n,q,p,k=l.o*d.o+l.f*d.i+l.h*d.l,h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;c=a.a;d=a.ia;l=this.a;k=l.o*d.o+l.f*d.i+l.h*d.l;h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;a.Jb.Mb(a.u,a.qa);c=a.u.na;l=a.u.oa;d=a.u.pa;k=a.u.ka;h=a.u.la;e=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=c<a.u.na?c:a.u.na;a.u.oa=l<a.u.oa?l:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=k>a.u.ka?k:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=e>a.u.ma?e:a.u.ma;null!=a.Oa&&(c=a.a.v-a.qa.v,l=a.a.A-a.qa.A,d=a.a.B-a.qa.B,k=a.nc,k.x=c,k.y=l,k.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=g}this.Gb=!1;this.yb=0},hm:function(){var a=this.a,b=new Ca;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},km:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},wm:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,d,c,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.qa;c=a.ia;d=this.qa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ia;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;d=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,d=a.a.A-a.qa.A,c=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}this.Gb=!1;this.yb=0},He:function(){return this.Nc},ce:function(){var a=new O;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed;return a},de:function(a){a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Bf:function(){var a=new Me;a.mass=this.Nc;var b=a.localInertia;b.e00=this.wd;b.e01=this.xd;b.e02=this.yd;b.e10=this.zd;b.e11=this.Ad;b.e12=this.Bd;b.e20=this.Cd;b.e21=this.Dd;b.e22=this.Ed;return a},Jg:function(a){a.mass=this.Nc;a=a.localInertia;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Vn:function(a){this.Nc=a.mass;a=a.localInertia;this.wd=a.e00;this.xd=a.e01;this.yd=a.e02;this.zd=a.e10;this.Ad=a.e11;this.Bd=a.e12;this.Cd=a.e20;this.Dd=a.e21;this.Ed=a.e22;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Nc&&0<a&&0==this.Xb){this.$a=1/this.Nc;a=this.Ad*this.Ed-this.Bd*this.Dd;var b=this.zd*this.Ed-this.Bd*this.Cd,e=this.zd*this.Dd-this.Ad*this.Cd,d=this.xd*this.Ed-this.yd*this.Dd,c=this.wd*this.Ed-this.yd*this.Cd,f=this.wd*this.Dd-this.xd*this.Cd,h=this.xd*this.Bd-this.yd*this.Ad,l=this.wd*this.Bd-this.yd*this.zd,g=this.wd*this.Ad-this.xd*this.zd,k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-d*k;this.Ta=h*k;this.Ua=-b*k;this.Va=c*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.Zh=this.Ra;this.$h=this.Sa;this.ai=this.Ta;this.bi=this.Ua;this.ci=this.Va;this.di=this.Wa;this.ei=this.Xa;this.fi=this.Ya;this.gi=this.Za;this.Ra=this.Zh*this.N.x;this.Sa=this.$h*this.N.x;this.Ta=this.ai*this.N.x;this.Ua=this.bi*this.N.y;this.Va=this.ci*this.N.y;this.Wa=this.di*this.N.y;this.Xa=this.ei*this.N.z;this.Ya=this.fi*this.N.z;this.Za=this.gi*this.N.z}else this.gi=this.fi=this.ei=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Xb&&(this.Xb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},Mg:function(){var a=this.N;return new t(a.x,a.y,a.z)},Wn:function(a){var b=this.N;b.x=a.x;b.y=a.y;b.z=a.z;var e,d,c,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},Pd:function(){var a=new t;a.x=this.eb;a.y=this.fb;a.z=this.gb;return a},be:function(a){a.x=this.eb;a.y=this.fb;a.z=this.gb},Un:function(a){1==this.Xb?this.gb=this.fb=this.eb=0:(this.eb=a.x,this.fb=a.y,this.gb=a.z);this.Gb=!1;this.yb=0},Cc:function(){var a=new t;a.x=this.ib;a.y=this.jb;a.z=this.kb;return a},Hc:function(a){a.x=this.eb;a.y=this.fb;a.z=this.gb},Qn:function(a){1==this.Xb?this.kb=this.jb=this.ib=0:(this.ib=a.x,this.jb=a.y,this.kb=a.z);this.Gb=!1;this.yb=0},bb:function(a){if(1!=this.Xb){var b,e;b=a.x;e=a.y;a=a.z;this.eb+=b;this.fb+=e;this.gb+=a}this.Gb=!1;this.yb=0},Qa:function(a){if(1!=this.Xb){var b,e;b=a.x;e=a.y;a=a.z;this.ib+=b;this.jb+=e;this.kb+=a}this.Gb=!1;this.yb=0},qc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.eb+=e*this.$a;this.fb+=d*this.$a;this.gb+=a*this.$a;var c,f,h;c=b.x;f=b.y;h=b.z;c-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*d;a=h*e-c*a;c=c*d-f*e;e=this.P*b+this.R*a+this.S*c;d=this.T*b+this.U*a+this.V*c;b=this.W*b+this.X*a+this.Y*c;this.ib+=e;this.jb+=d;this.kb+=b;this.Gb=!1;this.yb=0},rc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.eb+=b*this.$a;this.fb+=e*this.$a;this.gb+=a*this.$a;this.Gb=!1;this.yb=0},Lb:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c;a=this.P*b+this.R*e+this.S*d;c=this.T*b+this.U*e+this.V*d;b=this.W*b+this.X*e+this.Y*d;this.ib+=a;this.jb+=c;this.kb+=b;this.Gb=!1;this.yb=0},lc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.yh+=e;this.zh+=d;this.Ah+=a;var c,f;c=b.x;f=b.y;b=b.z;c-=this.a.v;f-=this.a.A;b-=this.a.B;this.kf+=f*a-b*d;this.lf+=b*e-c*a;this.mf+=c*d-f*e;this.Gb=!1;this.yb=0},mc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.yh+=b;this.zh+=e;this.Ah+=a;this.Gb=!1;this.yb=0},zc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.kf+=b;this.lf+=e;this.mf+=a;this.Gb=!1;this.yb=0},Jc:function(){return this.Ug},Tn:function(a){this.Ug=a;this.Gb=!1;this.yb=0},ee:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},fe:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;e-=this.a.v;d-=this.a.A;c-=this.a.B;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},ge:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},Ge:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Uh:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d+this.a.v;e=c+this.a.A;a+=this.a.B;d=new t;d.x=b;d.y=e;d.z=a;return d},Vh:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;c=this.a.l*e+this.a.g*d+this.a.s*c;e=a+this.a.v;d=f+this.a.A;c+=this.a.B;b.x=e;b.y=d;b.z=c},xj:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},wl:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;e=this.a.l*e+this.a.g*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Nl:function(){return this.pg},Ng:function(){return this.Ac},Kg:function(){return this.se},Ic:function(){return this.Nb},Lg:function(){return this.$g},cd:function(){return this.re},tb:function(a){null==this.Ac?this.Ac=a:(this.ni.M=a,a.ja=this.ni);this.ni=a;this.pg++;a.Wb=this;if(null!=this.kc){var b=this.kc;a.Oa=b.ec.Gh(a,a.u);a.sc=b.Jl++;b.pg++}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.qa,d=a.ia,c=this.qa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;c=a.u.oa;d=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,c=a.a.A-a.qa.A,d=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}},Ln:function(a){var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.Ac&&(this.Ac=this.Ac.M);a==this.ni&&(this.ni=this.ni.ja);a.M=null;a.ja=null;this.pg--;a.Wb=null;if(null!=this.kc){b=this.kc;b.ec.Hh(a.Oa);a.Oa=null;a.sc=-1;for(var d=a.Wb.Nb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Oc;d.Gb=!1;d.yb=0;var d=b.wh,f=c.ja,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ja);c.M=null;c.ja=null;f=c.rb.ja;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.rb==c.C.Nb&&(c.C.Nb=c.C.Nb.M);c.rb==c.C.fc&&(c.C.fc=c.C.fc.ja);c.rb.M=null;c.rb.ja=null;f=c.sb.ja;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.sb==c.D.Nb&&(c.D.Nb=c.D.Nb.M);c.sb==c.D.fc&&(c.D.fc=c.D.fc.ja);c.sb.M=null;c.sb.ja=null;c.C.se--;c.D.se--;c.rb.Oc=null;c.sb.Oc=null;c.rb.Ud=null;c.sb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ka.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}b.pg--}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.qa,d=a.ia,c=this.qa,l,g,k,m,n,q,p,f=c.o*d.o+c.f*d.i+c.h*d.l,h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;c=a.u.oa;d=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,c=a.a.A-a.qa.A,d=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}},lm:function(){return this.Xb},Fm:function(a){this.Xb=a;this.wj()},Hm:function(){this.Gb=!1;this.yb=0},Gm:function(){this.Gb=!0;this.yb=0},Th:function(){return this.yb},Rn:function(a){this.hk=a;this.Gb=!1;this.yb=0},$l:function(){return this.ja},vl:function(){return this.M},ra:C};Zj.aa=!0;Zj.prototype={ra:Zj};vd.aa=!0;wa.aa=!0;wa.prototype={qc:function(){return this.Fj},ge:function(a){this.Fj=a},Hc:function(){return this.Pj},He:function(a){this.Pj=a},zc:function(){var a=this.ia,b=new Ca;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Cc:function(a){var b=this.ia;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Pd:function(){var a=this.a,b=new Ca;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},be:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Ge:function(a){var b=this.ia;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Wb)for(a=this.Wb,a.wj(),b=a.Ac;null!=b;){var e=b.M,d=b.qa,c=b.ia,f=a.qa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ia;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Jb.Mb(b.u,b.qa);d=b.u.na;f=b.u.oa;c=b.u.pa;h=b.u.ka;l=b.u.la;g=b.u.ma;b.Jb.Mb(b.u,b.a);b.u.na=d<b.u.na?d:b.u.na;b.u.oa=f<b.u.oa?f:b.u.oa;b.u.pa=c<b.u.pa?c:b.u.pa;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;b.u.ma=g>b.u.ma?g:b.u.ma;null!=b.Oa&&(d=b.a.v-b.qa.v,f=b.a.A-b.qa.A,c=b.a.B-b.qa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Wb.kc.ec.sd(b.Oa,b.u,b.nc));b=e}},mc:function(){return this.jk},fe:function(a){this.jk=a;if(null!=this.Wb){a=this.Wb;a.wj();for(var b=a.Ac;null!=b;){var e=b.M,d=b.qa,c=b.ia,f=a.qa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ia;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Jb.Mb(b.u,b.qa);d=b.u.na;f=b.u.oa;c=b.u.pa;h=b.u.ka;l=b.u.la;g=b.u.ma;b.Jb.Mb(b.u,b.a);b.u.na=d<b.u.na?d:b.u.na;b.u.oa=f<b.u.oa?f:b.u.oa;b.u.pa=c<b.u.pa?c:b.u.pa;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;b.u.ma=g>b.u.ma?g:b.u.ma;null!=b.Oa&&(d=b.a.v-b.qa.v,f=b.a.A-b.qa.A,c=b.a.B-b.qa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Wb.kc.ec.sd(b.Oa,b.u,b.nc));b=e}}},Qa:function(){return this.u.clone()},bb:function(a){a.Zd(this.u)},rc:function(){return this.Jb},Ic:function(){return this.Wb},tb:function(){return this.Aj},ce:function(a){this.Aj=a},Lb:function(){return this.Bj},de:function(a){this.Bj=a},lc:function(){return this.Cj},ee:function(a){this.Cj=a},cd:function(){return this.ja},Jc:function(){return this.M},ra:wa};Og.aa=!0;Og.prototype={ra:Og};String.prototype.ra=String;String.aa=!0;Array.aa=!0;Date.prototype.ra=Date;Date.aa=["Date"];var nl={},ll={},ml=Number,kl=Boolean,ol={},pl={};dc.rc={}.toString;pd.Ng=1;pd.Th=2;pd.BRUTE_FORCE=1;pd.BVH=2;Nc.sm=0;Nc.Mg=1;Nc.wl=2;Nc.Vh=3;Nc.Uh=4;Nc.xj=5;Nc.SPHERE=0;Nc.BOX=1;Nc.CYLINDER=2;Nc.CONE=3;Nc.CAPSULE=4;Nc.CONVEX_HULL=5;Mc.Cc=0;t.numCreations=0;F.defaultFriction=.2;F.defaultRestitution=.2;F.defaultDensity=1;F.defaultCollisionGroup=1;F.defaultCollisionMask=1;F.maxTranslationPerStep=20;F.maxRotationPerStep=3.14159265358979;F.bvhProxyPadding=.1;F.bvhIncrementalCollisionThreshold=.45;F.defaultGJKMargin=.05;F.enableGJKCaching=!0;F.maxEPAVertices=128;F.maxEPAPolyhedronFaces=128;F.contactEnableBounceThreshold=.5;F.velocityBaumgarte=.2;F.positionSplitImpulseBaumgarte=.4;F.positionNgsBaumgarte=1;F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;F.defaultContactPositionCorrectionAlgorithm=0;F.alternativeContactPositionCorrectionAlgorithm=1;F.contactPersistenceThreshold=.05;F.maxManifoldPoints=4;F.defaultJointConstraintSolverType=0;F.defaultJointPositionCorrectionAlgorithm=0;F.jointWarmStartingFactorForBaungarte=.8;F.jointWarmStartingFactor=.95;F.minSpringDamperDampingRatio=1E-6;F.minRagdollMaxSwingAngle=1E-6;F.maxJacobianRows=6;F.directMlcpSolverEps=1E-9;F.islandInitialRigidBodyArraySize=128;F.islandInitialConstraintArraySize=128;F.sleepingVelocityThreshold=.2;F.sleepingAngularVelocityThreshold=.5;F.sleepingTimeThreshold=1;F.disableSleeping=!1;F.linearSlop=.005;F.angularSlop=.017453292519943278;Jb.Qa=new Jb;Nb.wm=0;Nb.bm=1;Nb.$l=2;Nb.Zl=257;Nb.Xl=258;Nb.Ql=259;Nb.SUCCEEDED=0;Nb.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;Nb.GJK_DID_NOT_CONVERGE=2;Nb.EPA_FAILED_TO_INIT=257;Nb.EPA_FAILED_TO_ADD_VERTEX=258;Nb.EPA_DID_NOT_CONVERGE=259;O.numCreations=0;M.numCreations=0;na.POSITIVE_INFINITY=1/0;na.NEGATIVE_INFINITY=-1/0;na.PI=3.14159265358979;na.TWO_PI=6.28318530717958;na.HALF_PI=1.570796326794895;na.TO_RADIANS=.017453292519943278;na.TO_DEGREES=57.29577951308238;ga.numCreations=0;Tb.Jg=8;Tb.Kg=4;Tb.Bf=8;cd.broadPhaseCollisionTime=0;cd.narrowPhaseCollisionTime=0;cd.dynamicsTime=0;cd.totalTime=0;ic.Lg=0;ic.um=1;ic.km=2;ic.BAUMGARTE=0;ic.SPLIT_IMPULSE=1;ic.NGS=2;ld.He=1;ld.Ge=2;uc.tm=0;uc.nm=1;uc.vl=2;uc.lm=3;uc.ym=4;uc.mm=5;uc.SPHERICAL=0;uc.REVOLUTE=1;uc.CYLINDRICAL=2;uc.PRISMATIC=3;uc.UNIVERSAL=4;uc.RAGDOLL=5;ne.gm=0;ne.Nl=1;ne.ITERATIVE=0;ne.DIRECT=1;vd.Ol=0;vd.vm=1;vd.hm=2;vd.DYNAMIC=0;vd.STATIC=1;vd.KINEMATIC=2;window.OIMO={};window.OIMO.DebugDraw=Tb;Tb.prototype.aabb=Tb.prototype.Pk;Tb.prototype.ellipse=Tb.prototype.ellipse;Tb.prototype.arc=Tb.prototype.arc;Tb.prototype.cone=Tb.prototype.Tl;Tb.prototype.cylinder=Tb.prototype.Wl;Tb.prototype.capsule=Tb.prototype.Rl;Tb.prototype.sphere=Tb.prototype.Am;Tb.prototype.box=Tb.prototype.Pl;Tb.prototype.rect=Tb.prototype.rect;Tb.prototype.point=Tb.prototype.bb;Tb.prototype.triangle=Tb.prototype.tb;Tb.prototype.line=Tb.prototype.Qa;window.OIMO.BroadPhase=Wa;Wa.prototype.createProxy=Wa.prototype.Gh;Wa.prototype.destroyProxy=Wa.prototype.Hh;Wa.prototype.moveProxy=Wa.prototype.sd;Wa.prototype.isOverlapping=Wa.prototype.Lb;Wa.prototype.collectPairs=Wa.prototype.si;Wa.prototype.getProxyPairList=Wa.prototype.Qa;Wa.prototype.isIncremental=Wa.prototype.tb;Wa.prototype.getTestCount=Wa.prototype.bb;Wa.prototype.rayCast=Wa.prototype.Sd;Wa.prototype.convexCast=Wa.prototype.rf;Wa.prototype.aabbTest=Wa.prototype.eh;window.OIMO.Geometry=Bc;Bc.prototype.getType=Bc.prototype.bb;Bc.prototype.getVolume=Bc.prototype.Qa;Bc.prototype.rayCast=Bc.prototype.Sd;window.OIMO.ConvexGeometry=xa;xa.prototype.getGjkMergin=xa.prototype.gn;xa.prototype.setGjkMergin=xa.prototype.Jn;xa.prototype.computeLocalSupportingVertex=xa.prototype.Ld;xa.prototype.rayCast=xa.prototype.Sd;window.OIMO.BroadPhaseProxyCallback=Yc;Yc.prototype.process=Yc.prototype.td;window.OIMO.BroadPhaseType=pd;window.OIMO.Proxy=Jc;Jc.prototype.getId=Jc.prototype.tb;Jc.prototype.getFatAabb=Jc.prototype.Qa;Jc.prototype.getFatAabbTo=Jc.prototype.bb;window.OIMO.ProxyPair=Cc;Cc.prototype.getProxy1=Cc.prototype.Qa;Cc.prototype.getProxy2=Cc.prototype.bb;Cc.prototype.getNext=Cc.prototype.tb;window.OIMO.BruteForceBroadPhase=Eb;Eb.prototype.createProxy=Eb.prototype.Gh;Eb.prototype.destroyProxy=Eb.prototype.Hh;Eb.prototype.moveProxy=Eb.prototype.sd;Eb.prototype.collectPairs=Eb.prototype.si;Eb.prototype.rayCast=Eb.prototype.Sd;Eb.prototype.convexCast=Eb.prototype.rf;Eb.prototype.aabbTest=Eb.prototype.eh;window.OIMO.BvhBroadPhase=tc;tc.prototype.createProxy=tc.prototype.Gh;tc.prototype.destroyProxy=tc.prototype.Hh;tc.prototype.moveProxy=tc.prototype.sd;tc.prototype.collectPairs=tc.prototype.si;tc.prototype.rayCast=tc.prototype.Sd;tc.prototype.convexCast=tc.prototype.rf;tc.prototype.aabbTest=tc.prototype.eh;tc.prototype.getTreeBalance=tc.prototype.wn;window.OIMO.Aabb=Da;Da.prototype.init=Da.prototype.Aa;Da.prototype.getMin=Da.prototype.Hc;Da.prototype.getMinTo=Da.prototype.Ic;Da.prototype.setMin=Da.prototype.Pd;Da.prototype.getMax=Da.prototype.zc;Da.prototype.getMaxTo=Da.prototype.Cc;Da.prototype.setMax=Da.prototype.cd;Da.prototype.getCenter=Da.prototype.tb;Da.prototype.getCenterTo=Da.prototype.Lb;Da.prototype.getExtents=Da.prototype.lc;Da.prototype.getExtentsTo=Da.prototype.mc;Da.prototype.combine=Da.prototype.Qa;Da.prototype.combined=Da.prototype.bb;Da.prototype.overlap=Da.prototype.Jc;Da.prototype.getIntersection=Da.prototype.qc;Da.prototype.getIntersectionTo=Da.prototype.rc;Da.prototype.copyFrom=Da.prototype.Zd;Da.prototype.clone=Da.prototype.clone;window.OIMO.BoxGeometry=fd;fd.prototype.getHalfExtents=fd.prototype.hn;fd.prototype.getHalfExtentsTo=fd.prototype.jn;fd.prototype.computeLocalSupportingVertex=fd.prototype.Ld;window.OIMO.CapsuleGeometry=od;od.prototype.getRadius=od.prototype.Jh;od.prototype.getHalfHeight=od.prototype.mj;od.prototype.computeLocalSupportingVertex=od.prototype.Ld;window.OIMO.ConeGeometry=ed;ed.prototype.getRadius=ed.prototype.Jh;ed.prototype.getHalfHeight=ed.prototype.mj;ed.prototype.computeLocalSupportingVertex=ed.prototype.Ld;window.OIMO.ConvexHullGeometry=Hd;Hd.prototype.getVertices=Hd.prototype.An;Hd.prototype.computeLocalSupportingVertex=Hd.prototype.Ld;window.OIMO.CylinderGeometry=Dc;Dc.prototype.getRadius=Dc.prototype.Jh;Dc.prototype.getHalfHeight=Dc.prototype.mj;Dc.prototype.computeLocalSupportingVertex=Dc.prototype.Ld;window.OIMO.GeometryType=Nc;window.OIMO.RayCastHit=Wd;window.OIMO.SphereGeometry=Nd;Nd.prototype.getRadius=Nd.prototype.Jh;Nd.prototype.computeLocalSupportingVertex=Nd.prototype.Ld;window.OIMO.CollisionMatrix=Ed;Ed.prototype.getDetector=Ed.prototype.Qa;window.OIMO.DetectorResult=dd;dd.prototype.getMaxDepth=dd.prototype.cm;dd.prototype.clear=dd.prototype.clear;window.OIMO.DetectorResultPoint=nj;window.OIMO.Detector=Xc;Xc.prototype.detect=Xc.prototype.Yl;window.OIMO.CapsuleCapsuleDetector=yd;window.OIMO.GjkEpaDetector=Sd;window.OIMO.SphereBoxDetector=Gd;window.OIMO.SphereCapsuleDetector=Fd;window.OIMO.SphereSphereDetector=Se;window.OIMO.Vec3=t;t.prototype.init=t.prototype.Aa;t.prototype.zero=t.prototype.Z;t.prototype.add=t.prototype.Jc;t.prototype.addScaled=t.prototype.Qa;t.prototype.sub=t.prototype.ge;t.prototype.scale=t.prototype.ee;t.prototype.scale3=t.prototype.He;t.prototype.dot=t.prototype.Pd;t.prototype.cross=t.prototype.tb;t.prototype.addEq=t.prototype.cd;t.prototype.addScaledEq=t.prototype.bb;t.prototype.subEq=t.prototype.Ge;t.prototype.scaleEq=t.prototype.fe;t.prototype.scale3Eq=t.prototype.Bf;t.prototype.crossEq=t.prototype.Lb;t.prototype.mulMat3=t.prototype.lc;t.prototype.mulMat4=t.prototype.qc;t.prototype.mulTransform=t.prototype.zc;t.prototype.mulMat3Eq=t.prototype.mc;t.prototype.mulMat4Eq=t.prototype.rc;t.prototype.mulTransformEq=t.prototype.Cc;t.prototype.length=t.prototype.length;t.prototype.lengthSq=t.prototype.be;t.prototype.normalized=t.prototype.de;t.prototype.normalize=t.prototype.ce;t.prototype.negate=t.prototype.Hc;t.prototype.negateEq=t.prototype.Ic;t.prototype.copyFrom=t.prototype.Zd;t.prototype.clone=t.prototype.clone;t.prototype.toString=t.prototype.toString;window.OIMO.Transform=Ca;Ca.prototype.identity=Ca.prototype.Mf;Ca.prototype.getPosition=Ca.prototype.tb;Ca.prototype.getPositionTo=Ca.prototype.Lb;Ca.prototype.setPosition=Ca.prototype.Cc;Ca.prototype.translate=Ca.prototype.Jc;Ca.prototype.getRotation=Ca.prototype.lc;Ca.prototype.getRotationTo=Ca.prototype.mc;Ca.prototype.setRotation=Ca.prototype.Hc;Ca.prototype.setRotationXyz=Ca.prototype.Ic;Ca.prototype.rotate=Ca.prototype.qc;Ca.prototype.rotateXyz=Ca.prototype.rc;Ca.prototype.getOrientation=Ca.prototype.Qa;Ca.prototype.getOrientationTo=Ca.prototype.bb;Ca.prototype.setOrientation=Ca.prototype.zc;Ca.prototype.clone=Ca.prototype.clone;Ca.prototype.copyFrom=Ca.prototype.Zd;window.OIMO.Setting=F;window.OIMO.GjkEpa=Jb;Jb.prototype.computeClosestPoints=Jb.prototype.Qa;Jb.prototype.computeDistance=Jb.prototype.bb;Jb.prototype.convexCast=Jb.prototype.rf;Jb.prototype.rayCast=Jb.prototype.Sd;Jb.getInstance=Jb.Ic;window.OIMO.GjkEpaResultState=Nb;window.OIMO.SimplexUtil=xd;xd.projectOrigin2=xd.Jc;xd.projectOrigin3=xd.cd;xd.projectOrigin4=xd.Pd;window.OIMO.Mat3=O;O.prototype.init=O.prototype.Aa;O.prototype.identity=O.prototype.Mf;O.prototype.add=O.prototype.zc;O.prototype.sub=O.prototype.Kg;O.prototype.scale=O.prototype.Bf;O.prototype.mul=O.prototype.de;O.prototype.addEq=O.prototype.Cc;O.prototype.subEq=O.prototype.Lg;O.prototype.scaleEq=O.prototype.Jg;O.prototype.mulEq=O.prototype.ee;O.prototype.prependScale=O.prototype.Ge;O.prototype.appendScale=O.prototype.Jc;O.prototype.prependRotation=O.prototype.fe;O.prototype.appendRotation=O.prototype.Hc;O.prototype.prependScaleEq=O.prototype.He;O.prototype.appendScaleEq=O.prototype.cd;O.prototype.prependRotationEq=O.prototype.ge;O.prototype.appendRotationEq=O.prototype.Ic;O.prototype.transpose=O.prototype.Th;O.prototype.transposeEq=O.prototype.Uh;O.prototype.determinant=O.prototype.Pd;O.prototype.trace=O.prototype.Ng;O.prototype.inverse=O.prototype.be;O.prototype.inverseEq=O.prototype.ce;O.prototype.toArray=O.prototype.Mg;O.prototype.copyFrom=O.prototype.Zd;O.prototype.clone=O.prototype.clone;O.prototype.fromQuat=O.prototype.tb;O.prototype.toQuat=O.prototype.xj;O.prototype.fromEulerXyz=O.prototype.bb;O.prototype.toEulerXyz=O.prototype.Vh;O.prototype.getRow=O.prototype.qc;O.prototype.getCol=O.prototype.lc;O.prototype.getRowTo=O.prototype.rc;O.prototype.getColTo=O.prototype.mc;O.prototype.fromRows=O.prototype.Lb;O.prototype.fromCols=O.prototype.Qa;O.prototype.toString=O.prototype.toString;window.OIMO.Mat4=M;M.prototype.init=M.prototype.Aa;M.prototype.identity=M.prototype.Mf;M.prototype.add=M.prototype.lc;M.prototype.sub=M.prototype.Bf;M.prototype.scale=M.prototype.Ge;M.prototype.mul=M.prototype.Pd;M.prototype.addEq=M.prototype.mc;M.prototype.subEq=M.prototype.Jg;M.prototype.scaleEq=M.prototype.He;M.prototype.mulEq=M.prototype.be;M.prototype.prependScale=M.prototype.fe;M.prototype.appendScale=M.prototype.zc;M.prototype.prependRotation=M.prototype.de;M.prototype.appendRotation=M.prototype.qc;M.prototype.prependTranslation=M.prototype.Uh;M.prototype.appendTranslation=M.prototype.Qa;M.prototype.prependScaleEq=M.prototype.ge;M.prototype.appendScaleEq=M.prototype.Cc;M.prototype.prependRotationEq=M.prototype.ee;M.prototype.appendRotationEq=M.prototype.rc;M.prototype.prependTranslationEq=M.prototype.Vh;M.prototype.appendTranslationEq=M.prototype.bb;M.prototype.transpose=M.prototype.Mg;M.prototype.transposeEq=M.prototype.Ng;M.prototype.determinant=M.prototype.Hc;M.prototype.trace=M.prototype.Lg;M.prototype.inverse=M.prototype.Jc;M.prototype.inverseEq=M.prototype.cd;M.prototype.lookAt=M.prototype.Lb;M.prototype.perspective=M.prototype.ce;M.prototype.ortho=M.prototype.Th;M.prototype.toArray=M.prototype.Kg;M.prototype.copyFrom=M.prototype.Zd;M.prototype.fromMat3=M.prototype.Ic;M.prototype.fromTransform=M.prototype.tb;M.prototype.clone=M.prototype.clone;M.prototype.toString=M.prototype.toString;window.OIMO.MathUtil=na;na.abs=na.abs;na.sin=na.sin;na.cos=na.cos;na.tan=na.tan;na.asin=na.asin;na.acos=na.acos;na.atan=na.atan;na.safeAsin=na.ge;na.safeAcos=na.fe;na.atan2=na.atan2;na.sqrt=na.sqrt;na.clamp=na.zc;na.rand=na.be;na.randIn=na.ce;na.randVec3In=na.ee;na.randVec3=na.de;window.OIMO.Pool=Mb;Mb.prototype.vec3=Mb.prototype.zc;Mb.prototype.mat3=Mb.prototype.mc;Mb.prototype.mat4=Mb.prototype.qc;Mb.prototype.quat=Mb.prototype.rc;Mb.prototype.dispose=Mb.prototype.Qa;Mb.prototype.disposeVec3=Mb.prototype.lc;Mb.prototype.disposeMat3=Mb.prototype.bb;Mb.prototype.disposeMat4=Mb.prototype.tb;Mb.prototype.disposeQuat=Mb.prototype.Lb;window.OIMO.Quat=ga;ga.prototype.identity=ga.prototype.Mf;ga.prototype.init=ga.prototype.Aa;ga.prototype.add=ga.prototype.Qa;ga.prototype.sub=ga.prototype.Cc;ga.prototype.scale=ga.prototype.rc;ga.prototype.addEq=ga.prototype.bb;ga.prototype.subEq=ga.prototype.Hc;ga.prototype.scaleEq=ga.prototype.zc;ga.prototype.length=ga.prototype.length;ga.prototype.lengthSq=ga.prototype.lc;ga.prototype.dot=ga.prototype.tb;ga.prototype.normalized=ga.prototype.qc;ga.prototype.normalize=ga.prototype.mc;ga.prototype.setArc=ga.prototype.Ic;ga.prototype.slerp=ga.prototype.Jc;ga.prototype.copyFrom=ga.prototype.Zd;ga.prototype.clone=ga.prototype.clone;ga.prototype.fromMat3=ga.prototype.Lb;ga.prototype.toMat3=ga.prototype.cd;ga.prototype.toString=ga.prototype.toString;window.OIMO.Contact=cc;cc.prototype.getShape1=cc.prototype.lc;cc.prototype.getShape2=cc.prototype.mc;cc.prototype.isTouching=cc.prototype.Zj;cc.prototype.getManifold=cc.prototype.bb;cc.prototype.getContactConstraint=cc.prototype.Qa;cc.prototype.getPrev=cc.prototype.Lb;cc.prototype.getNext=cc.prototype.tb;window.OIMO.ContactLink=Gc;Gc.prototype.getContact=Gc.prototype.Qa;Gc.prototype.getOther=Gc.prototype.tb;Gc.prototype.getPrev=Gc.prototype.Lb;Gc.prototype.getNext=Gc.prototype.bb;window.OIMO.ContactManager=Qc;Qc.prototype.getNumContacts=Qc.prototype.bb;Qc.prototype.getContactList=Qc.prototype.Qa;window.OIMO.TimeStep=lj;window.OIMO.World=qa;qa.prototype.step=qa.prototype.be;qa.prototype.addRigidBody=qa.prototype.bb;qa.prototype.removeRigidBody=qa.prototype.ce;qa.prototype.addJoint=qa.prototype.Qa;qa.prototype.removeJoint=qa.prototype.sl;qa.prototype.setDebugDraw=qa.prototype.de;qa.prototype.getDebugDraw=qa.prototype.mc;qa.prototype.debugDraw=qa.prototype.tb;qa.prototype.rayCast=qa.prototype.Sd;qa.prototype.convexCast=qa.prototype.rf;qa.prototype.aabbTest=qa.prototype.eh;qa.prototype.getRigidBodyList=qa.prototype.cd;qa.prototype.getJointList=qa.prototype.rc;qa.prototype.getBroadPhase=qa.prototype.Lb;qa.prototype.getContactManager=qa.prototype.lc;qa.prototype.getNumRigidBodies=qa.prototype.Ic;qa.prototype.getNumJoints=qa.prototype.Cc;qa.prototype.getNumShapes=qa.prototype.Pd;qa.prototype.getNumIslands=qa.prototype.zc;qa.prototype.getNumVelocityIterations=qa.prototype.Jc;qa.prototype.setNumVelocityIterations=qa.prototype.ge;qa.prototype.getNumPositionIterations=qa.prototype.Hc;qa.prototype.setNumPositionIterations=qa.prototype.fe;qa.prototype.getGravity=qa.prototype.qc;qa.prototype.setGravity=qa.prototype.ee;window.OIMO.AabbTestCallback=nd;nd.prototype.process=nd.prototype.td;window.OIMO.ContactCallback=wd;wd.prototype.beginContact=wd.prototype.Qa;wd.prototype.preSolve=wd.prototype.tb;wd.prototype.postSolve=wd.prototype.$e;wd.prototype.endContact=wd.prototype.bb;window.OIMO.RayCastCallback=md;md.prototype.process=md.prototype.td;window.OIMO.RayCastClosest=Dd;Dd.prototype.clear=Dd.prototype.clear;Dd.prototype.process=Dd.prototype.td;window.OIMO.DebugDrawStyle=Qe;window.OIMO.Performance=cd;window.OIMO.ConstraintSolver=Sb;Sb.prototype.preSolveVelocity=Sb.prototype.jh;Sb.prototype.warmStart=Sb.prototype.sh;Sb.prototype.solveVelocity=Sb.prototype.nh;Sb.prototype.postSolveVelocity=Sb.prototype.vi;Sb.prototype.preSolvePosition=Sb.prototype.Gg;Sb.prototype.solvePositionSplitImpulse=Sb.prototype.mh;Sb.prototype.solvePositionNgs=Sb.prototype.lh;Sb.prototype.postSolve=Sb.prototype.$e;window.OIMO.PositionCorrectionAlgorithm=ic;window.OIMO.ContactConstraint=bd;bd.prototype.getShape1=bd.prototype.bb;bd.prototype.getShape2=bd.prototype.tb;bd.prototype.getManifold=bd.prototype.Qa;bd.prototype.isTouching=bd.prototype.Zj;window.OIMO.Manifold=Pb;Pb.prototype.getNormal=Pb.prototype.tb;Pb.prototype.getNormalTo=Pb.prototype.Lb;Pb.prototype.getTangent=Pb.prototype.qc;Pb.prototype.getTangentTo=Pb.prototype.rc;Pb.prototype.getBinormal=Pb.prototype.Qa;Pb.prototype.getBinormalTo=Pb.prototype.bb;Pb.prototype.getPoints=Pb.prototype.mc;Pb.prototype.getNumPoints=Pb.prototype.lc;window.OIMO.ManifoldPoint=hc;hc.prototype.getPosition1=hc.prototype.Lb;hc.prototype.getPosition1To=hc.prototype.lc;hc.prototype.getPosition2=hc.prototype.mc;hc.prototype.getPosition2To=hc.prototype.qc;hc.prototype.getDepth=hc.prototype.bb;hc.prototype.isWarmStarted=hc.prototype.zc;hc.prototype.getNormalImpulse=hc.prototype.tb;hc.prototype.getTangentImpulse=hc.prototype.rc;hc.prototype.getBinormalImpulse=hc.prototype.Qa;hc.prototype.isEnabled=hc.prototype.Cc;window.OIMO.Joint=L;L.prototype.getRigidBody1=L.prototype.ge;L.prototype.getRigidBody2=L.prototype.Ge;L.prototype.getType=L.prototype.Jg;L.prototype.getAnchor1=L.prototype.bb;L.prototype.getAnchor2=L.prototype.Lb;L.prototype.getAnchor1To=L.prototype.tb;L.prototype.getAnchor2To=L.prototype.lc;L.prototype.getLocalAnchor1=L.prototype.be;L.prototype.getLocalAnchor2=L.prototype.de;L.prototype.getLocalAnchor1To=L.prototype.ce;L.prototype.getLocalAnchor2To=L.prototype.ee;L.prototype.getBasis1=L.prototype.Cc;L.prototype.getBasis2=L.prototype.Ic;L.prototype.getBasis1To=L.prototype.Hc;L.prototype.getBasis2To=L.prototype.Jc;L.prototype.getAllowCollision=L.prototype.Qa;L.prototype.setAllowCollision=L.prototype.Kg;L.prototype.getBreakForce=L.prototype.cd;L.prototype.setBreakForce=L.prototype.Lg;L.prototype.getBreakTorque=L.prototype.Pd;L.prototype.setBreakTorque=L.prototype.Mg;L.prototype.getPositionCorrectionAlgorithm=L.prototype.fe;L.prototype.setPositionCorrectionAlgorithm=L.prototype.Ng;L.prototype.getAppliedForce=L.prototype.mc;L.prototype.getAppliedForceTo=L.prototype.qc;L.prototype.getAppliedTorque=L.prototype.rc;L.prototype.getAppliedTorqueTo=L.prototype.zc;L.prototype.getPrev=L.prototype.Bf;L.prototype.getNext=L.prototype.He;window.OIMO.CylindricalJoint=vb;vb.prototype.getAxis1=vb.prototype.vg;vb.prototype.getAxis2=vb.prototype.xg;vb.prototype.getAxis1To=vb.prototype.wg;vb.prototype.getAxis2To=vb.prototype.yg;vb.prototype.getLocalAxis1=vb.prototype.zg;vb.prototype.getLocalAxis2=vb.prototype.Bg;vb.prototype.getLocalAxis1To=vb.prototype.Ag;vb.prototype.getLocalAxis2To=vb.prototype.Cg;vb.prototype.getTranslationalSpringDamper=vb.prototype.vn;vb.prototype.getRotationalSpringDamper=vb.prototype.nn;vb.prototype.getTranslationalLimitMotor=vb.prototype.un;vb.prototype.getRotationalLimitMotor=vb.prototype.mn;vb.prototype.getAngle=vb.prototype.Xk;vb.prototype.getTranslation=vb.prototype.$k;window.OIMO.JointConfig=$b;window.OIMO.CylindricalJointConfig=re;re.prototype.init=re.prototype.Aa;window.OIMO.JointLink=Lc;Lc.prototype.getContact=Lc.prototype.Qa;Lc.prototype.getOther=Lc.prototype.tb;Lc.prototype.getPrev=Lc.prototype.Lb;Lc.prototype.getNext=Lc.prototype.bb;window.OIMO.JointType=uc;window.OIMO.PrismaticJoint=Gb;Gb.prototype.getAxis1=Gb.prototype.vg;Gb.prototype.getAxis2=Gb.prototype.xg;Gb.prototype.getAxis1To=Gb.prototype.wg;Gb.prototype.getAxis2To=Gb.prototype.yg;Gb.prototype.getLocalAxis1=Gb.prototype.zg;Gb.prototype.getLocalAxis2=Gb.prototype.Bg;Gb.prototype.getLocalAxis1To=Gb.prototype.Ag;Gb.prototype.getLocalAxis2To=Gb.prototype.Cg;Gb.prototype.getSpringDamper=Gb.prototype.nj;Gb.prototype.getLimitMotor=Gb.prototype.Zk;Gb.prototype.getTranslation=Gb.prototype.$k;window.OIMO.PrismaticJointConfig=Be;Be.prototype.init=Be.prototype.Aa;window.OIMO.RagdollJoint=Ab;Ab.prototype.getAxis1=Ab.prototype.vg;Ab.prototype.getAxis2=Ab.prototype.xg;Ab.prototype.getAxis1To=Ab.prototype.wg;Ab.prototype.getAxis2To=Ab.prototype.yg;Ab.prototype.getLocalAxis1=Ab.prototype.zg;Ab.prototype.getLocalAxis2=Ab.prototype.Bg;Ab.prototype.getLocalAxis1To=Ab.prototype.Ag;Ab.prototype.getLocalAxis2To=Ab.prototype.Cg;Ab.prototype.getTwistSpringDamper=Ab.prototype.zn;Ab.prototype.getTwistLimitMotor=Ab.prototype.yn;Ab.prototype.getSwingSpringDamper=Ab.prototype.tn;Ab.prototype.getSwingAxis=Ab.prototype.rn;Ab.prototype.getSwingAxisTo=Ab.prototype.sn;Ab.prototype.getSwingAngle=Ab.prototype.qn;Ab.prototype.getTwistAngle=Ab.prototype.xn;window.OIMO.RagdollJointConfig=Rd;Rd.prototype.init=Rd.prototype.Aa;window.OIMO.RevoluteJoint=Lb;Lb.prototype.getAxis1=Lb.prototype.vg;Lb.prototype.getAxis2=Lb.prototype.xg;Lb.prototype.getAxis1To=Lb.prototype.wg;Lb.prototype.getAxis2To=Lb.prototype.yg;Lb.prototype.getLocalAxis1=Lb.prototype.zg;Lb.prototype.getLocalAxis2=Lb.prototype.Bg;Lb.prototype.getLocalAxis1To=Lb.prototype.Ag;Lb.prototype.getLocalAxis2To=Lb.prototype.Cg;Lb.prototype.getSpringDamper=Lb.prototype.nj;Lb.prototype.getLimitMotor=Lb.prototype.Zk;Lb.prototype.getAngle=Lb.prototype.Xk;window.OIMO.RevoluteJointConfig=qe;qe.prototype.init=qe.prototype.Aa;window.OIMO.RotationalLimitMotor=Ec;Ec.prototype.setLimits=Ec.prototype.Qa;Ec.prototype.setMotor=Ec.prototype.bb;Ec.prototype.clone=Ec.prototype.clone;window.OIMO.SphericalJoint=pe;pe.prototype.getSpringDamper=pe.prototype.nj;window.OIMO.SphericalJointConfig=oe;oe.prototype.init=oe.prototype.Aa;window.OIMO.SpringDamper=nc;nc.prototype.setSpring=nc.prototype.Qa;nc.prototype.setSymplecticEuler=nc.prototype.bb;nc.prototype.clone=nc.prototype.clone;window.OIMO.TranslationalLimitMotor=zc;zc.prototype.setLimits=zc.prototype.Qa;zc.prototype.setMotor=zc.prototype.bb;zc.prototype.clone=zc.prototype.clone;window.OIMO.UniversalJoint=ub;ub.prototype.getAxis1=ub.prototype.vg;ub.prototype.getAxis2=ub.prototype.xg;ub.prototype.getAxis1To=ub.prototype.wg;ub.prototype.getAxis2To=ub.prototype.yg;ub.prototype.getLocalAxis1=ub.prototype.zg;ub.prototype.getLocalAxis2=ub.prototype.Bg;ub.prototype.getLocalAxis1To=ub.prototype.Ag;ub.prototype.getLocalAxis2To=ub.prototype.Cg;ub.prototype.getSpringDamper1=ub.prototype.on;ub.prototype.getSpringDamper2=ub.prototype.pn;ub.prototype.getLimitMotor1=ub.prototype.kn;ub.prototype.getLimitMotor2=ub.prototype.ln;ub.prototype.getAngle1=ub.prototype.en;ub.prototype.getAngle2=ub.prototype.fn;window.OIMO.UniversalJointConfig=Qd;Qd.prototype.init=Qd.prototype.Aa;window.OIMO.ConstraintSolverType=ne;window.OIMO.DirectJointConstraintSolver=wc;wc.prototype.preSolveVelocity=wc.prototype.jh;wc.prototype.warmStart=wc.prototype.sh;wc.prototype.solveVelocity=wc.prototype.nh;wc.prototype.postSolveVelocity=wc.prototype.vi;wc.prototype.preSolvePosition=wc.prototype.Gg;wc.prototype.solvePositionSplitImpulse=wc.prototype.mh;wc.prototype.solvePositionNgs=wc.prototype.lh;wc.prototype.postSolve=wc.prototype.$e;window.OIMO.PgsContactConstraintSolver=zb;zb.prototype.preSolveVelocity=zb.prototype.jh;zb.prototype.warmStart=zb.prototype.sh;zb.prototype.solveVelocity=zb.prototype.nh;zb.prototype.preSolvePosition=zb.prototype.Gg;zb.prototype.solvePositionSplitImpulse=zb.prototype.mh;zb.prototype.solvePositionNgs=zb.prototype.lh;zb.prototype.postSolve=zb.prototype.$e;window.OIMO.PgsJointConstraintSolver=bc;bc.prototype.preSolveVelocity=bc.prototype.jh;bc.prototype.warmStart=bc.prototype.sh;bc.prototype.solveVelocity=bc.prototype.nh;bc.prototype.postSolveVelocity=bc.prototype.vi;bc.prototype.preSolvePosition=bc.prototype.Gg;bc.prototype.solvePositionSplitImpulse=bc.prototype.mh;bc.prototype.solvePositionNgs=bc.prototype.lh;bc.prototype.postSolve=bc.prototype.$e;window.OIMO.MassData=Me;window.OIMO.RigidBody=C;C.prototype.getPosition=C.prototype.Xl;C.prototype.getPositionTo=C.prototype.Zl;C.prototype.setPosition=C.prototype.tm;C.prototype.translate=C.prototype.ym;C.prototype.getRotation=C.prototype.bm;C.prototype.getRotationTo=C.prototype.gm;C.prototype.setRotation=C.prototype.um;C.prototype.setRotationXyz=C.prototype.vm;C.prototype.rotate=C.prototype.mm;C.prototype.rotateXyz=C.prototype.nm;C.prototype.getOrientation=C.prototype.Ol;C.prototype.getOrientationTo=C.prototype.Ql;C.prototype.setOrientation=C.prototype.sm;C.prototype.getTransform=C.prototype.hm;C.prototype.getTransformTo=C.prototype.km;C.prototype.setTransform=C.prototype.wm;C.prototype.getMass=C.prototype.He;C.prototype.getLocalInertia=C.prototype.ce;C.prototype.getLocalInertiaTo=C.prototype.de;C.prototype.getMassData=C.prototype.Bf;C.prototype.getMassDataTo=C.prototype.Jg;C.prototype.setMassData=C.prototype.Vn;C.prototype.getRotationFactor=C.prototype.Mg;C.prototype.setRotationFactor=C.prototype.Wn;C.prototype.getLinearVelocity=C.prototype.Pd;C.prototype.getLinearVelocityTo=C.prototype.be;C.prototype.setLinearVelocity=C.prototype.Un;C.prototype.getAngularVelocity=C.prototype.Cc;C.prototype.getAngularVelocityTo=C.prototype.Hc;C.prototype.setAngularVelocity=C.prototype.Qn;C.prototype.addLinearVelocity=C.prototype.bb;C.prototype.addAngularVelocity=C.prototype.Qa;C.prototype.applyImpulse=C.prototype.qc;C.prototype.applyLinearImpulse=C.prototype.rc;C.prototype.applyAngularImpulse=C.prototype.Lb;C.prototype.applyForce=C.prototype.lc;C.prototype.applyForceToCenter=C.prototype.mc;C.prototype.applyTorque=C.prototype.zc;C.prototype.getGravityScale=C.prototype.Jc;C.prototype.setGravityScale=C.prototype.Tn;C.prototype.getLocalPoint=C.prototype.ee;C.prototype.getLocalPointTo=C.prototype.fe;C.prototype.getLocalVector=C.prototype.ge;C.prototype.getLocalVectorTo=C.prototype.Ge;C.prototype.getWorldPoint=C.prototype.Uh;C.prototype.getWorldPointTo=C.prototype.Vh;C.prototype.getWorldVector=C.prototype.xj;C.prototype.getWorldVectorTo=C.prototype.wl;C.prototype.getNumShapes=C.prototype.Nl;C.prototype.getShapeList=C.prototype.Ng;C.prototype.getNumContectLinks=C.prototype.Kg;C.prototype.getContactLinkList=C.prototype.Ic;C.prototype.getNumJointLinks=C.prototype.Lg;C.prototype.getJointLinkList=C.prototype.cd;C.prototype.addShape=C.prototype.tb;C.prototype.removeShape=C.prototype.Ln;C.prototype.getType=C.prototype.lm;C.prototype.setType=C.prototype.Fm;C.prototype.wakeUp=C.prototype.Hm;C.prototype.sleep=C.prototype.Gm;C.prototype.getSleepTime=C.prototype.Th;C.prototype.setAutoSleep=C.prototype.Rn;C.prototype.getPrev=C.prototype.$l;C.prototype.getNext=C.prototype.vl;window.OIMO.RigidBodyConfig=Zj;window.OIMO.RigidBodyType=vd;window.OIMO.Shape=wa;wa.prototype.getFriction=wa.prototype.qc;wa.prototype.setFriction=wa.prototype.ge;wa.prototype.getRestitution=wa.prototype.Hc;wa.prototype.setRestitution=wa.prototype.He;wa.prototype.getLocalTransform=wa.prototype.zc;wa.prototype.getLocalTransformTo=wa.prototype.Cc;wa.prototype.getTransform=wa.prototype.Pd;wa.prototype.getTransformTo=wa.prototype.be;wa.prototype.setLocalTransform=wa.prototype.Ge;wa.prototype.getDensity=wa.prototype.mc;wa.prototype.setDensity=wa.prototype.fe;wa.prototype.getAabb=wa.prototype.Qa;wa.prototype.getAabbTo=wa.prototype.bb;wa.prototype.getGeometry=wa.prototype.rc;wa.prototype.getRigidBody=wa.prototype.Ic;wa.prototype.getCollisionGroup=wa.prototype.tb;wa.prototype.setCollisionGroup=wa.prototype.ce;wa.prototype.getCollisionMask=wa.prototype.Lb;wa.prototype.setCollisionMask=wa.prototype.de;wa.prototype.getContactCallback=wa.prototype.lc;wa.prototype.setContactCallback=wa.prototype.ee;wa.prototype.getPrev=wa.prototype.cd;wa.prototype.getNext=wa.prototype.Jc;window.OIMO.ShapeConfig=Og})();
