/* OimoPhysics 1.0.0 (c) 2018 saharan, The MIT License */'use strict';(function(){function Ng(){this.position=new t;this.rotation=new O;this.friction=F.defaultFriction;this.restitution=F.defaultRestitution;this.density=F.defaultDensity;this.collisionGroup=F.defaultCollisionGroup;this.collisionMask=F.defaultCollisionMask;this.contactCallback=this.geometry=null}function pa(a){this.sc=-1;this.ia=new ya;this.qa=new ya;this.a=new ya;var b=a.position;this.ia.v=b.x;this.ia.A=b.y;this.ia.B=b.z;b=a.rotation;this.ia.o=b.e00;this.ia.f=b.e01;this.ia.h=b.e02;this.ia.i=b.e10;this.ia.m=b.e11;this.ia.j=b.e12;this.ia.l=b.e20;this.ia.g=b.e21;this.ia.s=b.e22;var b=this.qa,e=this.ia;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ia;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Pj=a.restitution;this.Fj=a.friction;this.jk=a.density;this.Jb=a.geometry;this.Aj=a.collisionGroup;this.Bj=a.collisionMask;this.Cj=a.contactCallback;this.u=new Aa;this.Oa=null;this.nc=new t}function Qd(){}function Yj(){this.position=new t;this.rotation=new O;this.linearVelocity=new t;this.angularVelocity=new t;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0}function C(a){this.ni=this.Ac=this.ja=this.M=null;this.pg=0;this.fc=this.Nb=null;this.se=0;this.Oe=this.re=null;this.$g=0;var b=a.linearVelocity;this.eb=b.x;this.fb=b.y;this.gb=b.z;b=a.angularVelocity;this.ib=b.x;this.jb=b.y;this.kb=b.z;this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;this.qa=new ya;this.a=new ya;b=a.position;this.qa.v=b.x;this.qa.A=b.y;this.qa.B=b.z;b=a.rotation;this.qa.o=b.e00;this.qa.f=b.e01;this.qa.h=b.e02;this.qa.i=b.e10;this.qa.m=b.e11;this.qa.j=b.e12;this.qa.l=b.e20;this.qa.g=b.e21;this.qa.s=b.e22;var b=this.a,e=this.qa;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Xb=a.type;this.yb=0;this.Gb=!1;this.hk=a.autoSleep;this.Y=this.X=this.W=this.V=this.U=this.T=this.S=this.R=this.P=this.gi=this.fi=this.ei=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.zd=this.yd=this.xd=this.wd=this.$a=this.Lc=0;this.Il=a.linearDamping;this.Al=a.angularDamping;this.mf=this.lf=this.kf=this.Ah=this.zh=this.yh=0;this.N=new t(1,1,1);this.Cf=!1;this.Ug=1;this.kc=null}function Ne(){this.mass=0;this.localInertia=new O}function dc(a){Gb.call(this);this.$=a;this.info=new Oe;this.Yb=Array(F.maxJacobianRows);a=0;for(var b=this.Yb.length;a<b;){var e=a++;this.Yb[e]=new Pe}}function Tb(a){Gb.call(this);this.ti=a;this.info=new Sf;this.Yb=Array(F.maxManifoldPoints);a=0;for(var b=this.Yb.length;a<b;){var e=a++;this.Yb[e]=new of}}function Tf(a){this.sg=a;this.ck=Array(this.sg);this.$a=Array(this.sg);this.Oi=Array(this.sg);a=0;for(var b=this.sg;a<b;){var e=a++;this.ck[e]=Array(this.sg);this.$a[e]=Array(this.sg);this.Oi[e]=Array(this.sg);for(var d=0,c=this.sg;d<c;){var f=d++;this.ck[e][f]=0;this.$a[e][f]=0;this.Oi[e][f]=0}}this.Ij=1<<this.sg;this.zj=Array(this.Ij);this.ik=Array(this.Ij);a=0;for(b=this.Ij;a<b;){for(var d=e=a++,d=(d&85)+(d>>1&85),d=(d&51)+(d>>2&51),d=(d&15)+(d>>4&15),c=Array(d),f=0,h=d;f<h;){var l=f++;c[l]=Array(d);for(var g=0,k=d;g<k;){var m=g++;c[l][m]=0}}this.zj[e]=!1;this.ik[e]=c}}function Ec(a){Gb.call(this);this.$=a;this.info=new Oe;a=F.maxJacobianRows;this.Rh=new Tf(a);this.Ee=new Bk(a);this.Yb=Array(a);for(var b=0,e=this.Yb.length;b<e;){var d=b++;this.Yb[d]=new Pe}b=this.Ee.Eh.length;this.ul=new Rd(b);this.ui=new Rd(b);this.Hg=Array(a);this.Kh=Array(a);this.sf=Array(a);this.lj=Array(a);for(b=0;b<a;)e=b++,this.Hg[e]=0,this.Kh[e]=0,this.sf[e]=0,this.lj[e]=0}function Rd(a){this.n=a;this.oc=Array(a);this.af=Array(a);for(var b=0;b<a;){var e=b++;this.oc[e]=e}}function Bk(a){this.Dn=a;this.Ze=0;this.Eh=Array(1<<a);this.Te=new sg(a)}function sg(a){this.size=a;this.Nc=0;this.gh=Array(a);this.kh=Array(a);this.ie=0;this.Dg=Array(a)}function Zj(a){this.gh=Array(a);this.Dg=Array(a);this.kh=Array(a);this.Rk=Array(a);this.ie=this.Nc=0}function Pe(){this.tf=this.mass=this.ld=this.kd=this.jd=this.hd=this.gd=this.fd=this.rd=this.qd=this.pd=this.od=this.nd=this.md=0}function of(){this.rm=this.qm=this.pm=this.om=this.he=this.Yj=this.Xj=this.Wj=this.Vj=this.Uj=this.Tj=this.fl=this.el=this.dl=this.cl=this.bl=this.al=this.tj=this.sj=this.rj=this.qj=this.pj=this.oj=this.ll=this.kl=this.jl=this.il=this.hl=this.gl=this.Sf=this.Rf=this.Qf=this.Pf=this.Of=this.Nf=this.Qh=this.Ph=this.Oh=this.Nh=this.Mh=this.Lh=0}function pe(){}function qe(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper1=new Lb;this.springDamper2=new Lb;this.limitMotor1=new Jc;this.limitMotor2=new Jc}function pb(a){L.call(this,a,nc.UNIVERSAL);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.Ic=b.x;this.Jc=b.y;this.Kc=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.Ic*this.Ic+this.Jc*this.Jc+this.Kc*this.Kc?(b=this.Ic*this.Ic+this.Jc*this.Jc+this.Kc*this.Kc,0<b&&(b=1/Math.sqrt(b)),this.Ic*=b,this.Jc*=b,this.Kc*=b):(this.Jc=this.Ic=0,this.Kc=1);var e=this.C.a,b=this.D.a,d,c,f,h,l,g,k,m,n,q,p,r,v;r=e.o*this.sa+e.f*this.ta+e.h*this.ua;v=e.i*this.sa+e.m*this.ta+e.j*this.ua;d=e.l*this.sa+e.g*this.ta+e.s*this.ua;var aa,w;aa=b.o*this.Ic+b.f*this.Jc+b.h*this.Kc;w=b.i*this.Ic+b.m*this.Jc+b.j*this.Kc;p=b.l*this.Ic+b.g*this.Jc+b.s*this.Kc;l=w*d-p*v;g=p*r-aa*d;k=aa*v-w*r;l*l+g*g+k*k||(l=r*r,g=v*v,k=d*d,l<g?l<k?(k=1/Math.sqrt(g+k),l=0,g=d*k,k*=-v):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0):g<k?(k=1/Math.sqrt(k+l),l=-d*k,g=0,k*=r):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0));c=v*k-d*g;f=d*l-r*k;h=r*g-v*l;m=g*p-k*w;n=k*aa-l*p;q=l*w-g*aa;var B,u;B=e.o*r+e.i*v+e.l*d;u=e.f*r+e.m*v+e.g*d;d=e.h*r+e.j*v+e.s*d;this.sa=B;this.ta=u;this.ua=d;d=e.o*l+e.i*g+e.l*k;r=e.f*l+e.m*g+e.g*k;v=e.h*l+e.j*g+e.s*k;this.Ab=d;this.Bb=r;this.Cb=v;d=e.o*c+e.i*f+e.l*h;r=e.f*c+e.m*f+e.g*h;e=e.h*c+e.j*f+e.s*h;this.hc=d;this.ic=r;this.jc=e;e=b.o*m+b.i*n+b.l*q;c=b.f*m+b.m*n+b.g*q;m=b.h*m+b.j*n+b.s*q;this.lb=e;this.mb=c;this.nb=m;e=b.o*l+b.i*g+b.l*k;m=b.f*l+b.m*g+b.g*k;l=b.h*l+b.j*g+b.s*k;this.Wg=e;this.Xg=m;this.Yg=l;l=b.o*aa+b.i*w+b.l*p;g=b.f*aa+b.m*w+b.g*p;b=b.h*aa+b.j*w+b.s*p;this.Ic=l;this.Jc=g;this.Kc=b;this.zi=this.zl=this.yi=0;this.Em=this.Dm=this.Cm=!1;this.Fk=a.springDamper1.clone();this.Gk=a.springDamper2.clone();this.xk=a.limitMotor1.clone();this.yk=a.limitMotor2.clone()}function Hc(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function Lb(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function re(){Fc.call(this);this.springDamper=new Lb}function se(a){L.call(this,a,0);this.ue=a.springDamper.clone()}function Jc(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function Ce(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper=new Lb;this.limitMotor=new Jc}function Ob(a){L.call(this,a,1);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.lb*this.lb+this.mb*this.mb+this.nb*this.nb?(b=this.lb*this.lb+this.mb*this.mb+this.nb*this.nb,0<b&&(b=1/Math.sqrt(b)),this.lb*=b,this.mb*=b,this.nb*=b):(this.lb=1,this.nb=this.mb=0);var e,d,c,f,h,l,g,k;d=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<d&&-.999999>d?(b=this.sa,e=this.ta,c=this.ua,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.sa,m=this.ta,q=this.ua,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;n=b*this.sa+e*this.ta+c*this.ua;m=d*this.sa+f*this.ta+h*this.ua;q=l*this.sa+g*this.ta+k*this.ua;this.lb=n;this.mb=m;this.nb=q;n=b*this.Ab+e*this.Bb+c*this.Cb;m=d*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.hc+e*this.ic+c*this.jc;e=d*this.hc+f*this.ic+h*this.jc;c=l*this.hc+g*this.ic+k*this.jc;this.Ic=b;this.Jc=e;this.Kc=c;this.angularErrorZ=this.angularErrorY=this.angle=0;this.ea=new Qe(this);this.ue=a.springDamper.clone();this.Ch=a.limitMotor.clone()}function Wd(){Fc.call(this);this.localTwistAxis1=new t(1,0,0);this.localTwistAxis2=new t(1,0,0);this.localSwingAxis1=new t(0,1,0);this.twistSpringDamper=new Lb;this.swingSpringDamper=new Lb;this.twistLimitMotor=new Jc;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function Mb(a){L.call(this,a,nc.RAGDOLL);var b=a.localTwistAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localSwingAxis1;this.Ab=b.x;this.Bb=b.y;this.Cb=b.z;b=a.localTwistAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;if(this.hc*this.hc+this.ic*this.ic+this.jc*this.jc)b=this.hc*this.hc+this.ic*this.ic+this.jc*this.jc,0<b&&(b=1/Math.sqrt(b)),this.hc*=b,this.ic*=b,this.jc*=b,this.Ab=this.ic*this.ua-this.jc*this.ta,this.Bb=this.jc*this.sa-this.hc*this.ua,this.Cb=this.hc*this.ta-this.ic*this.sa;else{var b=this.sa,e=this.ta,d=this.ua,c=b*b,f=e*e,h=d*d;c<f?c<h?(c=1/Math.sqrt(f+h),this.Ab=0,this.Bb=d*c,this.Cb=-e*c):(c=1/Math.sqrt(c+f),this.Ab=e*c,this.Bb=-b*c,this.Cb=0):f<h?(c=1/Math.sqrt(h+c),this.Ab=-d*c,this.Bb=0,this.Cb=b*c):(c=1/Math.sqrt(c+f),this.Ab=e*c,this.Bb=-b*c,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab}var l,g,k,m,c=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<c&&-.999999>c?(b=this.sa,e=this.ta,d=this.ua,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);k=e;var h=c,e=d,n=2*b;g=2*k;d=2*h;c=b*n;f=k*g;l=h*d;h=b*g;m=k*d;k=b*d;var n=e*n,q=e*g;g=e*d;b=1-f-l;e=h-g;d=k+q;h+=g;l=1-c-l;g=m-n;k-=q;m+=n;c=1-c-f;f=b*this.sa+e*this.ta+d*this.ua;n=h*this.sa+l*this.ta+g*this.ua;q=k*this.sa+m*this.ta+c*this.ua;this.lb=f;this.mb=n;this.nb=q;f=b*this.Ab+e*this.Bb+d*this.Cb;n=h*this.Ab+l*this.Bb+g*this.Cb;q=k*this.Ab+m*this.Bb+c*this.Cb;this.Wg=f;this.Xg=n;this.Yg=q;b=b*this.hc+e*this.ic+d*this.jc;e=h*this.hc+l*this.ic+g*this.jc;d=k*this.hc+m*this.ic+c*this.jc;this.Ic=b;this.Jc=e;this.Kc=d;this.Nk=a.twistSpringDamper.clone();this.Mk=a.twistLimitMotor.clone();this.Hk=a.swingSpringDamper.clone();this.Jj=a.maxSwingAngle1;this.Kj=a.maxSwingAngle2;this.Jj<F.minRagdollMaxSwingAngle&&(this.Jj=F.minRagdollMaxSwingAngle);this.Kj<F.minRagdollMaxSwingAngle&&(this.Kj=F.minRagdollMaxSwingAngle);this.Wk=new Jc;this.Wk.lowerLimit=-1;this.swingConstraintAxisZ=this.swingConstraintAxisY=this.swingConstraintAxisX=this.swingConstraintAxis1Z=this.swingConstraintAxis1Y=this.swingConstraintAxis1X=this.twistAxisZ=this.twistAxisY=this.twistAxisX=this.swingAxisZ=this.swingAxisY=this.swingAxisX=this.swingError=this.ej=this.Wi=this.Wk.upperLimit=0}function Dd(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.limitMotor=new Hc;this.springDamper=new Lb}function Nb(a){L.call(this,a,nc.PRISMATIC);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.lb*this.lb+this.mb*this.mb+this.nb*this.nb?(b=this.lb*this.lb+this.mb*this.mb+this.nb*this.nb,0<b&&(b=1/Math.sqrt(b)),this.lb*=b,this.mb*=b,this.nb*=b):(this.lb=1,this.nb=this.mb=0);var e,d,c,f,h,l,g,k;d=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<d&&-.999999>d?(b=this.sa,e=this.ta,c=this.ua,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.sa,m=this.ta,q=this.ua,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;n=b*this.sa+e*this.ta+c*this.ua;m=d*this.sa+f*this.ta+h*this.ua;q=l*this.sa+g*this.ta+k*this.ua;this.lb=n;this.mb=m;this.nb=q;n=b*this.Ab+e*this.Bb+c*this.Cb;m=d*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.hc+e*this.ic+c*this.jc;e=d*this.hc+f*this.ic+h*this.jc;c=l*this.hc+g*this.ic+k*this.jc;this.Ic=b;this.Jc=e;this.Kc=c;this.ea=new Qe(this);this.angularErrorZ=this.angularErrorY=this.angularErrorX=this.linearErrorZ=this.linearErrorY=this.Vf=0;this.ue=a.springDamper.clone();this.Ch=a.limitMotor.clone()}function nc(){}function Oc(a){this.wk=a}function Ck(){this.ub=this.Wc=this.va=0}function Qe(a){this.$=a;this.le=this.ke=this.je=this.Od=this.Nd=this.Md=this.$c=this.Zc=this.Yc=0}function te(){Fc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.translationalLimitMotor=new Hc;this.translationalSpringDamper=new Lb;this.rotationalLimitMotor=new Jc;this.rotationalSpringDamper=new Lb}function Fc(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new t;this.localAnchor2=new t;this.allowCollision=!1;this.solverType=F.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=F.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function wb(a){L.call(this,a,2);var b=a.localAxis1;this.sa=b.x;this.ta=b.y;this.ua=b.z;b=a.localAxis2;this.lb=b.x;this.mb=b.y;this.nb=b.z;this.sa*this.sa+this.ta*this.ta+this.ua*this.ua?(b=this.sa*this.sa+this.ta*this.ta+this.ua*this.ua,0<b&&(b=1/Math.sqrt(b)),this.sa*=b,this.ta*=b,this.ua*=b):(this.sa=1,this.ua=this.ta=0);this.lb*this.lb+this.mb*this.mb+this.nb*this.nb?(b=this.lb*this.lb+this.mb*this.mb+this.nb*this.nb,0<b&&(b=1/Math.sqrt(b)),this.lb*=b,this.mb*=b,this.nb*=b):(this.lb=1,this.nb=this.mb=0);var e,d,c,f,h,l,g,k;d=this.sa*this.lb+this.ta*this.mb+this.ua*this.nb;-1.000001<d&&-.999999>d?(b=this.sa,e=this.ta,c=this.ua,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ta*this.nb-this.ua*this.mb,e=this.ua*this.lb-this.sa*this.nb,f=this.sa*this.mb-this.ta*this.lb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.sa,m=this.ta,q=this.ua,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Ab=0,this.Bb=q*p,this.Cb=-m*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0):r<v?(p=1/Math.sqrt(v+p),this.Ab=-q*p,this.Bb=0,this.Cb=n*p):(p=1/Math.sqrt(p+r),this.Ab=m*p,this.Bb=-n*p,this.Cb=0);this.hc=this.ta*this.Cb-this.ua*this.Bb;this.ic=this.ua*this.Ab-this.sa*this.Cb;this.jc=this.sa*this.Bb-this.ta*this.Ab;n=b*this.sa+e*this.ta+c*this.ua;m=d*this.sa+f*this.ta+h*this.ua;q=l*this.sa+g*this.ta+k*this.ua;this.lb=n;this.mb=m;this.nb=q;n=b*this.Ab+e*this.Bb+c*this.Cb;m=d*this.Ab+f*this.Bb+h*this.Cb;q=l*this.Ab+g*this.Bb+k*this.Cb;this.Wg=n;this.Xg=m;this.Yg=q;b=b*this.hc+e*this.ic+c*this.jc;e=d*this.hc+f*this.ic+h*this.jc;c=l*this.hc+g*this.ic+k*this.jc;this.Ic=b;this.Jc=e;this.Kc=c;this.linearErrorZ=this.linearErrorY=this.Vf=this.angularErrorZ=this.angularErrorY=this.angle=0;this.ea=new Qe(this);this.Lk=a.translationalSpringDamper.clone();this.Kk=a.translationalLimitMotor.clone();this.Ek=a.rotationalSpringDamper.clone();this.Dk=a.rotationalLimitMotor.clone()}function L(a,b){this.rb=new Oc(this);this.sb=new Oc(this);this.Ec=F.defaultJointPositionCorrectionAlgorithm;this.Xb=b;this.kc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.gk=a.allowCollision;this.Ji=a.breakForce;this.Ki=a.breakTorque;switch(a.solverType){case 0:this.Rj=new dc(this);break;case 1:this.Rj=new Ec(this)}b=a.localAnchor1;this.Pi=b.x;this.Qi=b.y;this.Ri=b.z;a=a.localAnchor2;this.Si=a.x;this.Ti=a.y;this.Ui=a.z;this.Kc=this.Jc=this.Ic=this.Yg=this.Xg=this.Wg=this.nb=this.mb=this.lb=this.jc=this.ic=this.hc=this.Cb=this.Bb=this.Ab=this.ua=this.ta=this.sa=this.If=this.Hf=this.Gf=this.Ff=this.Ef=this.Df=this.Vb=this.Ub=this.Tb=this.Sb=this.Rb=this.Qb=0;this.Ob=Array(F.maxJacobianRows);a=0;for(b=F.maxJacobianRows;a<b;){var e=a++;this.Ob[e]=new Ck}}function fj(){this.Ba=new dd;this.cb=this.motorSpeed=this.Ia=this.Ja=this.Na=this.Ga=0;this.va=null}function Oe(){this.De=this.Ce=null;this.La=0;this.rows=Array(F.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new fj}}function gj(){this.Eg=new dd;this.vj=new dd;this.uj=new dd;this.friction=this.Na=this.Ga=0;this.va=null}function Sf(){this.De=this.Ce=null;this.La=0;this.rows=Array(F.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new gj}}function dd(){this.wc=this.ha=this.ga=this.fa=this.da=this.ca=this.ba=this.Ea=this.Da=this.Ca=this.ya=this.xa=this.wa=0}function hj(a){this.Ka=a;this.ol=0;this.pl=Array(F.maxManifoldPoints);a=0;for(var b=F.maxManifoldPoints;a<b;){var e=a++;this.pl[e]=new Zb}}function Zb(){this.Dc=this.Kd=this.Jd=this.Id=this.Hd=this.Gd=this.Fd=this.dc=this.cc=this.bc=this.Fb=this.Eb=this.Db=this.gf=this.ff=this.ef=this.df=this.cf=this.bf=0;this.Wd=new ij;this.Jf=this.Se=!1;this.sc=-1}function yc(){this.Xd=this.Ii=this.Hi=this.Gi=this.Zi=this.Yi=this.Xi=this.og=this.ng=this.mg=0;this.tc=Array(F.maxManifoldPoints);for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.tc[e]=new Zb}}function ij(){this.We=this.Ve=this.Ue=this.ub=this.xc=this.yc=this.Xc=0}function md(a){this.Rj=new Tb(this);this.Ka=a}function ec(){}function Gb(){this.D=this.C=null;this.Cf=!1}function Rc(){}function Re(){this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new t(1,.1,.1);this.jointLineColor=new t(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new t(.2,.2,1);this.contactTangentColor=new t(.1,.8,.1);this.contactNormalColor=new t(1,.1,.1);this.disabledContactColor=new t(.5,.1,.1);this.newContactColor=new t(1,1,.1);this.contactColor=new t(1,.1,.1);this.pairColor=new t(1,1,.1);this.bvhNodeColor=new t(.4,.4,.4);this.aabbColor=new t(1,.1,.1);this.kinematicShapeColor=new t(1,.5,.1);this.staticShapeColor=new t(.7,.7,.7);this.sleepingShapeColor2=new t(.2,.8,.5);this.sleepingShapeColor1=new t(.3,.3,.8);this.sleepyShapeColor2=new t(.6,.8,.3);this.sleepyShapeColor1=new t(.5,.25,.6);this.shapeColor2=new t(1,.8,.1);this.shapeColor1=new t(.7,.2,.4)}function Fb(){this.p=new Ib;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.bk=Array(5);this.rh=Array(5);this.dk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.bk[b]=Array(e);this.rh[b]=Array(e);this.dk[b]=Array(e);for(e=0;8>e;){var d=e++,c=.7853981633974475*b,f=.7853981633974475*d;this.bk[b][d]=new t(Math.sin(c)*Math.cos(f),Math.cos(c),-Math.sin(c)*Math.sin(f));this.rh[b][d]=new t;this.dk[b][d]=new t}}this.jj=Array(8);this.Sl=Array(8);this.ae=Array(8);this.Fe=Array(8);this.Af=Array(8);for(a=0;8>a;)b=a++,this.jj[b]=new t(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.Sl[b]=new t(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.ae[b]=new t,this.Fe[b]=new t,this.Af[b]=new t;this.style=new Re}function wd(){this.position=new t;this.normal=new t;this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1}function Mc(){}function Xc(){}function ed(){}function pf(){this.u=new Aa;this.Bl=null}function ue(){this.wi=new Ed;this.gj=new ya;this.Vf=new t;this.Z=new t;this.Ul=this.ij=null}function Se(){this.wi=new Ed;this.gj=new t;this.end=new t;this.ij=null}function Ha(a,b){null==a&&(a=2);switch(a){case 1:this.ec=new ub;break;case 2:this.ec=new fc}this.wh=new Fd(this.ec);null==b&&(b=new t(0,-9.80665,0));this.lk=new t(b.x,b.y,b.z);this.hi=this.Bh=this.mi=this.jf=null;this.Mj=this.zk=this.pg=this.Vi=0;this.Bk=10;this.Ak=5;this.Oj=new Se;this.Mi=new ue;this.ek=new pf;this.lg=new Dk;this.Qe=Array(F.islandInitialConstraintArraySize);this.dh=Array(F.islandInitialRigidBodyArraySize);this.Dh=new jj;this.Ha=new Ib;this.Jl=0}function jj(){this.invDt=this.dt=0;this.dtRatio=1}function Dk(){this.xf=Array(F.islandInitialRigidBodyArraySize);this.yf=Array(F.islandInitialConstraintArraySize);this.ph=Array(F.islandInitialConstraintArraySize);this.oh=Array(F.islandInitialConstraintArraySize);this.hh=this.ih=this.wf=this.vf=0}function Fd(a){this.ec=a;this.Km=new Sd;this.ji=0}function Cc(){this.Mc=this.Ud=this.M=this.ja=null}function oc(){this.ja=this.M=null;this.rb=new Cc;this.sb=new Cc;this.xh=this.D=this.C=this.vc=this.uc=null;this.Li=new ak;this.Lm=new nd;this.Qj=this.Hj=!1;this.Ka=new yc;this.Ll=new hj(this.Ka);this.Ke=new md(this.Ka);this.ug=!1}function ha(a,b,e,d){null==d&&(d=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=d;ha.numCreations++}function Ib(){this.b=Array(256);this.c=0;this.ob=Array(256);this.qb=0;this.zf=Array(256);this.Uf=0;this.Td=Array(256);this.$d=0}function qa(){}function M(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){null==v&&(v=1);null==r&&(r=0);null==p&&(p=0);null==q&&(q=0);null==n&&(n=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==c&&(c=0);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;M.numCreations++}function O(a,b,e,d,c,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==c&&(c=1);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;O.numCreations++}function fd(){}function lc(){}function Pb(){this.Pa=Array(4);this.hb=Array(4);this.pb=Array(4);this.fj=Array(3);this.fj[0]=new t(1,0,0);this.fj[1]=new t(0,1,0);this.fj[2]=new t(0,0,1);this.Nn=new t;this.On=new t;this.Gn=new t;this.Fn=new t;this.Mn=new ya;for(var a=0;4>a;){var b=a++;this.Pa[b]=new t;this.hb[b]=new t;this.pb[b]=new t}this.dir=new t;this.closest=new t;this.closestPoint1=new t;this.closestPoint2=new t;this.Fg=new kj}function F(){}function ya(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function t(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;t.numCreations++}function Ek(){this.ql=new t}function Yc(){this.ud=new t;this.hb=new t;this.pb=new t}function od(){this.id=++od.Cc;this.ja=this.M=null;this.Lj=new t;this.Jk=this.Ej=0;this.cj=!1;this.zb=Array(3);this.we=Array(3);this.Ie=Array(3);this.Sh=new t;this.ii=Array(3);this.ii[0]=1;this.ii[1]=2;this.ii[2]=0}function kj(){this.zb=Array(F.maxEPAVertices);this.Wh=new t;this.Ae=0;this.Fc=this.Vc=null;this.ah=0;this.Re=this.ve=null}function Te(){this.qh=!1}function Nd(a){this.qh=a}function xd(a){this.qh=a}function ee(){this.qh=!1}function Gd(){this.qh=!1}function gd(a){this.qh=a}function ak(){}function lj(){this.position1=new t;this.position2=new t;this.id=this.depth=0}function nd(){this.numPoints=0;this.normal=new t;this.points=Array(F.maxManifoldPoints);this.incremental=!1;for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.points[e]=new lj}}function Sd(){this.Ib=Array(8);for(var a=0;6>a;){var b=a++;this.Ib[b]=Array(8)}a=new ee;this.Ib[0][0]=new Te;this.Ib[0][1]=new xd(!1);this.Ib[0][2]=a;this.Ib[0][3]=a;this.Ib[0][4]=new Nd(!1);this.Ib[0][5]=a;this.Ib[1][0]=new xd(!0);this.Ib[1][1]=a;this.Ib[1][2]=a;this.Ib[1][3]=a;this.Ib[1][4]=a;this.Ib[1][5]=a;this.Ib[2][0]=a;this.Ib[2][1]=a;this.Ib[2][2]=a;this.Ib[2][3]=a;this.Ib[2][4]=a;this.Ib[2][5]=a;this.Ib[3][0]=a;this.Ib[3][1]=a;this.Ib[3][2]=a;this.Ib[3][3]=a;this.Ib[3][4]=a;this.Ib[3][5]=a;this.Ib[4][0]=new Nd(!0);this.Ib[4][1]=a;this.Ib[4][2]=a;this.Ib[4][3]=a;this.Ib[4][4]=new Gd;this.Ib[4][5]=a;this.Ib[5][0]=a;this.Ib[5][1]=a;this.Ib[5][2]=a;this.Ib[5][3]=a;this.Ib[5][4]=a;this.Ib[5][5]=a}function yd(a){bb.call(this,0);this.gc=this.ab=a;this.Be()}function Ed(){this.position=new t;this.normal=new t;this.fraction=0}function Bc(){}function ad(a,b){bb.call(this,2);this.ab=a;this.Hb=b;this.Be()}function pd(a){bb.call(this,5);this.Ae=a.length;this.zb=Array(this.Ae);this.tg=Array(this.Ae);for(var b=0,e=this.Ae;b<e;){var d=b++;this.zb[d]=a[d];this.tg[d]=new t}this.Ml=!0;this.Be()}function bd(a,b){bb.call(this,3);this.ab=a;this.Hb=b;this.ak=a/Math.sqrt(a*a+4*b*b);this.Sj=2*b/Math.sqrt(a*a+4*b*b);this.Be()}function hd(a,b){bb.call(this,4);this.ab=a;this.Hb=b;this.gc=this.ab;this.Be()}function id(a){bb.call(this,1);this.Le=a.x;this.Me=a.y;this.Ne=a.z;this.mk=this.Le;this.qk=this.pk=this.nk=0;this.rk=this.Me;this.uk=this.tk=this.sk=0;this.vk=this.Ne;this.Be()}function Aa(){this.ma=this.la=this.ka=this.pa=this.oa=this.na=0}function Fk(){this.Pb=null;this.Nj=0;this.oi=new mj;this.Xe=this.Tf=this.Rc=null;this.Sh=Array(1024)}function mj(){this.Gl=0;this.yj=!1}function nj(a,b){pc.call(this,a,b);this.Qd=null;this.Zg=!1}function fe(){this.Kf=this.Lf=this.M=null;this.F=Array(2);this.Ma=0;this.Fa=null;this.O=0;this.Oa=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function fc(){Ua.call(this);this.Gj=!0;this.ge=new Fk;this.Ye=Array(1024);this.uf=0}function ub(){Ua.call(this);this.Gj=!1}function Kc(){this.rg=this.qg=null}function pc(a,b){this.userData=a;this.sc=b;this.M=this.ja=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function Hd(){}function wc(){}function Cf(){bb.call(this,-1);this.min=new t;this.max=new t}function De(){bb.call(this,-1)}function bb(a){Ub.call(this,a);this.gc=F.defaultGJKMargin;this.Ml=!1}function Ub(a){this.Xb=a;this.nf=0}function Ua(){this.ki=0;this.Yd=this.Pe=this.te=null;this.Gj=!1;this.$i=0;this.bh=null;this.Fl=0;this.Dj=new De;this.u=new Cf;this.Mf=new ya;this.Z=new t;this.wi=new Ed}function bc(){}function qd(a){this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,qd)}function sb(a,b){function e(){}e.prototype=a;a=new e;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}Math.aa=!0;qd.aa=!0;qd.Qa=function(a){return a instanceof Error?a:new qd(a)};qd.Kb=Error;qd.prototype=sb(Error.prototype,{ra:qd});bc.aa=!0;bc.Hc=function(a){if(a instanceof Array&&null==a.xl)return Array;var b=a.ra;if(null!=b)return b;a=bc.Lb(a);return null!=a?bc.qc(a):null};bc.tb=function(a,b){if(null==a)return!1;if(a==b)return!0;var e=a.Yn;if(null!=e)for(var d=0,c=e.length;d<c;){var f=d++,f=e[f];if(f==b||bc.tb(f,b))return!0}return bc.tb(a.Kb,b)};bc.bb=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.xl:!1;case kl:return"boolean"==typeof a;case ll:return!0;case ml:return"number"==typeof a;case nl:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||bc.tb(bc.Hc(a),b))return!0}else{if("object"==typeof b&&bc.mc(b)&&a instanceof b)return!0}else return!1;return b==ol&&null!=a.aa||b==pl&&null!=a.Xn?!0:a.xl==b}};bc.lc=function(a,b){if(bc.bb(a,b))return a;throw new qd("Cannot cast "+a+" to "+b);};bc.Lb=function(a){a=bc.rc.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};bc.mc=function(a){return null!=bc.Lb(a)};bc.qc=function(a){return window[a]};Ua.aa=!0;Ua.prototype={Gh:function(){return null},Hh:function(){},sd:function(){},Lb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},si:function(){},Qa:function(){return this.Yd},tb:function(){return this.Gj},bb:function(){return this.$i},Sd:function(){},rf:function(){},eh:function(){},ra:Ua};Ub.aa=!0;Ub.prototype={Be:function(){},Mb:function(){},li:function(){return!1},bb:function(){return this.Xb},Qa:function(){return this.nf},Sd:function(a,b,e,d){var c,f,h,l;c=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;c-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.li(e.o*c+e.i*f+e.l*a,e.f*c+e.m*f+e.g*a,e.h*c+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,d)){var g,k;b=d.position;c=b.x;f=b.y;h=b.z;b=d.normal;l=b.x;g=b.y;k=b.z;var m,n;m=e.o*c+e.f*f+e.h*h;n=e.i*c+e.m*f+e.j*h;h=e.l*c+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;c=m+e.v;f=n+e.A;h+=e.B;e=d.position;e.x=c;e.y=f;e.z=h;d=d.normal;d.x=b;d.y=a;d.z=l;return!0}return!1},ra:Ub};bb.aa=!0;bb.Kb=Ub;bb.prototype=sb(Ub.prototype,{gn:function(){return this.gc},Jn:function(a){0>a&&(a=0);this.gc=a},Ld:function(){},Sd:function(a,b,e,d){return this.Ml?Pb.Qa.Sd(this,e,a,b,d):Ub.prototype.Sd.call(this,a,b,e,d)},ra:bb});De.aa=!0;De.Kb=bb;De.prototype=sb(bb.prototype,{Aa:function(a,b,e){this.Ym=a;var d,c,f;d=e.x;c=e.y;f=e.z;var h;e=b.o*d+b.i*c+b.l*f;h=b.f*d+b.m*c+b.g*f;b=b.h*d+b.j*c+b.s*f;d=this.nl=new t;d.x=e;d.y=h;d.z=b;this.gc=a.gc},Ld:function(a,b){this.Ym.Ld(a,b);var e=this.nl;if(0<a.x*e.x+a.y*e.y+a.z*e.z){a=this.nl;var e=b.y+a.y,d=b.z+a.z;b.x+=a.x;b.y=e;b.z=d}},ra:De});Cf.aa=!0;Cf.Kb=bb;Cf.prototype=sb(bb.prototype,{Ld:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z},ra:Cf});wc.aa=!0;wc.prototype={td:function(){},ra:wc};Hd.aa=!0;pc.aa=!0;pc.prototype={tb:function(){return this.sc},Qa:function(){var a=new Aa;a.na=this.J;a.oa=this.K;a.pa=this.L;a.ka=this.G;a.la=this.H;a.ma=this.I;return a},bb:function(a){a.na=this.J;a.oa=this.K;a.pa=this.L;a.ka=this.G;a.la=this.H;a.ma=this.I},ra:pc};Kc.aa=!0;Kc.prototype={Qa:function(){return this.qg},bb:function(){return this.rg},tb:function(){return this.M},ra:Kc};ub.aa=!0;ub.Kb=Ua;ub.prototype=sb(Ua.prototype,{Gh:function(a,b){a=new pc(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ja=this.Pe);this.Pe=a;a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;return a},Hh:function(a){this.ki--;var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ja);a.M=null;a.ja=null;a.userData=null},sd:function(a,b){a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;for(a=this.te;null!=a;){for(var b=a.M,e=a.M;null!=e;){var d=e.M;this.$i++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var c=this.bh;null!=c?(this.bh=c.M,c.M=null):c=new Kc;null!=this.Yd&&(c.M=this.Yd);this.Yd=c;c.qg=a;c.rg=e}e=d}a=b}},Sd:function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.te;null!=l;){var g=l.M,k=d,m=c,n=a,q=f,p=h,r=b,v=k<q?k:q,aa=m<p?m:p,w=n<r?n:r,B=m>p?m:p,u=n>r?n:r,D=l.J,t=l.K,A=l.L,E=l.G,x=l.H,Ab=l.I;if(D>(k>q?k:q)||E<v||t>B||x<aa||A>u||Ab<w)n=!1;else{var q=q-k,p=p-m,N=r-n,r=0>q?-q:q,v=0>p?-p:p,B=0>N?-N:N,aa=.5*(E-D),w=.5*(x-t),u=.5*(Ab-A),k=k-.5*(E+D),m=m-.5*(x+t),n=n-.5*(Ab+A),A=m*N-n*p;0<(0>A?-A:A)-(w*B+u*v)?n=!0:(n=n*q-k*N,n=0<(0>n?-n:n)-(u*r+aa*B));n?n=!0:(n=k*p-m*q,n=0<(0>n?-n:n)-(aa*v+w*r));n=n?!1:!0}n&&e.td(l);l=g}},rf:function(a,b,e,d){for(var c=this.te;null!=c;){var f=c.M,h=this.u.min;h.x=c.J;h.y=c.K;h.z=c.L;h=this.u.max;h.x=c.G;h.y=c.H;h.z=c.I;this.Dj.Aa(a,b,e);h=Pb.Qa;0==h.kj(this.Dj,this.u,b,this.Mf,null,!1)&&0>=h.distance&&d.td(c);c=f}},eh:function(a,b){for(var e=this.te;null!=e;){var d=e.M;a.na<e.G&&a.ka>e.J&&a.oa<e.H&&a.la>e.K&&a.pa<e.I&&a.ma>e.L&&b.td(e);e=d}},ra:ub});fc.aa=!0;fc.Kb=Ua;fc.prototype=sb(Ua.prototype,{fh:function(a,b){this.$i++;var e=0==a.O,d=0==b.O;a==b?e||(this.fh(a.F[0],b),this.fh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&d?(a=a.Oa,b=b.Oa,e=this.bh,null!=e?(this.bh=e.M,e.M=null):e=new Kc,null!=this.Yd&&(e.M=this.Yd),this.Yd=e,e.qg=a,e.rg=b):d||a.O>b.O?(this.fh(a.F[0],b),this.fh(a.F[1],b)):(this.fh(b.F[0],a),this.fh(b.F[1],a)))},rl:function(a,b,e,d,c,f,h,l){var g=a.J,k=a.K,m=a.L,n=a.G,q=a.H,p=a.I,r;if(g>(b>c?b:c)||n<(b<c?b:c)||k>(e>f?e:f)||q<(e<f?e:f)||m>(d>h?d:h)||p<(d<h?d:h))r=!1;else{var v=c-b,aa=f-e,w=h-d;r=0>v?-v:v;var B=0>aa?-aa:aa,u=0>w?-w:w,D=.5*(n-g),t=.5*(q-k),A=.5*(p-m),g=b-.5*(n+g),k=e-.5*(q+k),m=d-.5*(p+m),p=k*w-m*aa;0<(0>p?-p:p)-(t*u+A*B)?u=!0:(w=m*v-g*w,u=0<(0>w?-w:w)-(A*r+D*u));u?r=!0:(v=g*aa-k*v,r=0<(0>v?-v:v)-(D*B+t*r));r=r?!1:!0}r&&(0==a.O?l.td(a.Oa):(this.rl(a.F[0],b,e,d,c,f,h,l),this.rl(a.F[1],b,e,d,c,f,h,l)))},Vk:function(a,b,e,d,c){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.Dj.Aa(b,e,d);f=Pb.Qa;0==f.kj(this.Dj,this.u,e,this.Mf,null,!1)&&0>=f.distance&&(0==a.O?c.td(a.Oa):(this.Vk(a.F[0],b,e,d,c),this.Vk(a.F[1],b,e,d,c)))},Qk:function(a,b,e){a.J<b.ka&&a.G>b.na&&a.K<b.la&&a.H>b.oa&&a.L<b.ma&&a.I>b.pa&&(0==a.O?e.td(a.Oa):(this.Qk(a.F[0],b,e),this.Qk(a.F[1],b,e)))},Gh:function(a,b){a=new nj(a,this.Fl++);this.ki++;null==this.te?this.te=a:(this.Pe.M=a,a.ja=this.Pe);this.Pe=a;a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.ge;var e=b.Rc;null!=e?(b.Rc=e.M,e.M=null):e=new fe;var d=e;d.Oa=a;a.Qd=d;d.J=a.J;d.K=a.K;d.L=a.L;d.G=a.G;d.H=a.H;d.I=a.I;b.Nj++;null==b.Tf?b.Tf=d:(b.Xe.Kf=d,d.Lf=b.Xe);b.Xe=d;if(null==d.Oa||d.Oa.Qd!=d||null!=d.F[0]||null!=d.F[1]||0!=d.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==b.Pb)b.Pb=d;else{for(var c=b.Pb;0<c.O&&(e=b.oi.Dl(c,d),-1!=e);)c=c.F[e];var f=c.Fa,e=b.Rc;null!=e?(b.Rc=e.M,e.M=null):e=new fe;if(null==f)b.Pb=e;else{var h=c.Ma;f.F[h]=e;e.Fa=f;e.Ma=h}f=c.Ma;e.F[f]=c;c.Fa=e;c.Ma=f;c=c.Ma^1;e.F[c]=d;d.Fa=e;for(d.Ma=c;null!=e;){if(b.oi.yj&&!(2>e.O)){var d=e.Fa,f=e.F[0],h=e.F[1],l=f.O-h.O,c=e.Ma;1<l?(h=f.F[0],l=f.F[1],h.O>l.O?(f.F[1]=e,e.Fa=f,e.Ma=1,e.F[0]=l,l.Fa=e,l.Ma=0):(f.F[0]=e,e.Fa=f,e.Ma=0,e.F[0]=h,h.Fa=e,h.Ma=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].O,l=f.F[1].O,f.O=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].O,l=e.F[1].O,e.O=(h>l?h:l)+1,null!=d?(d.F[c]=f,f.Fa=d,f.Ma=c):(b.Pb=f,f.Fa=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.O>l.O?(h.F[1]=e,e.Fa=h,e.Ma=1,e.F[1]=l,l.Fa=e,l.Ma=1):(h.F[0]=e,e.Fa=h,e.Ma=0,e.F[1]=f,f.Fa=e,f.Ma=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].O,l=h.F[1].O,h.O=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].O,l=e.F[1].O,e.O=(f>l?f:l)+1,null!=d?(d.F[c]=h,h.Fa=d,h.Ma=c):(b.Pb=h,h.Fa=null),e=h)}d=e.F[0].O;c=e.F[1].O;e.O=(d>c?d:c)+1;d=e.F[0];c=e.F[1];e.J=d.J<c.J?d.J:c.J;e.K=d.K<c.K?d.K:c.K;e.L=d.L<c.L?d.L:c.L;e.G=d.G>c.G?d.G:c.G;e.H=d.H>c.H?d.H:c.H;e.I=d.I>c.I?d.I:c.I;e=e.Fa}}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){b=Array(this.uf<<1);e=0;for(d=this.uf;e<d;)c=e++,b[c]=this.Ye[c],this.Ye[c]=null;this.Ye=b}this.Ye[this.uf++]=a}return a},Hh:function(a){this.ki--;var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.te&&(this.te=this.te.M);a==this.Pe&&(this.Pe=this.Pe.ja);a.M=null;a.ja=null;b=this.ge;e=a.Qd;b.Nj--;var d=e.Lf,c=e.Kf;null!=d&&(d.Kf=c);null!=c&&(c.Lf=d);e==b.Tf&&(b.Tf=b.Tf.Kf);e==b.Xe&&(b.Xe=b.Xe.Lf);e.Kf=null;e.Lf=null;if(null==e.Oa||e.Oa.Qd!=e||null!=e.F[0]||null!=e.F[1]||0!=e.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(b.Pb==e)b.Pb=null;else{var d=e.Fa,c=d.F[e.Ma^1],f=d.Fa;if(null==f){c.Fa=null;c.Ma=0;b.Pb=c;if(null!=d.Oa&&null!=d.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.Ma=0;d.Fa=null;d.O=0;d.Oa=null;d.M=b.Rc;b.Rc=d}else{var h=d.Ma;f.F[h]=c;c.Fa=f;c.Ma=h;if(null!=d.Oa&&null!=d.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");d.F[0]=null;d.F[1]=null;d.Ma=0;d.Fa=null;d.O=0;d.Oa=null;d.M=b.Rc;b.Rc=d;for(d=f;null!=d;){if(b.oi.yj&&!(2>d.O)){var c=d.Fa,h=d.F[0],l=d.F[1],g=h.O-l.O,f=d.Ma;1<g?(l=h.F[0],g=h.F[1],l.O>g.O?(h.F[1]=d,d.Fa=h,d.Ma=1,d.F[0]=g,g.Fa=d,g.Ma=0):(h.F[0]=d,d.Fa=h,d.Ma=0,d.F[0]=l,l.Fa=d,l.Ma=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].O,g=h.F[1].O,h.O=(l>g?l:g)+1,l=d.F[0],g=d.F[1],d.J=l.J<g.J?l.J:g.J,d.K=l.K<g.K?l.K:g.K,d.L=l.L<g.L?l.L:g.L,d.G=l.G>g.G?l.G:g.G,d.H=l.H>g.H?l.H:g.H,d.I=l.I>g.I?l.I:g.I,l=d.F[0].O,g=d.F[1].O,d.O=(l>g?l:g)+1,null!=c?(c.F[f]=h,h.Fa=c,h.Ma=f):(b.Pb=h,h.Fa=null),d=h):-1>g&&(h=l.F[0],g=l.F[1],h.O>g.O?(l.F[1]=d,d.Fa=l,d.Ma=1,d.F[1]=g,g.Fa=d,g.Ma=1):(l.F[0]=d,d.Fa=l,d.Ma=0,d.F[1]=h,h.Fa=d,h.Ma=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].O,g=l.F[1].O,l.O=(h>g?h:g)+1,h=d.F[0],g=d.F[1],d.J=h.J<g.J?h.J:g.J,d.K=h.K<g.K?h.K:g.K,d.L=h.L<g.L?h.L:g.L,d.G=h.G>g.G?h.G:g.G,d.H=h.H>g.H?h.H:g.H,d.I=h.I>g.I?h.I:g.I,h=d.F[0].O,g=d.F[1].O,d.O=(h>g?h:g)+1,null!=c?(c.F[f]=l,l.Fa=c,l.Ma=f):(b.Pb=l,l.Fa=null),d=l)}c=d.F[0].O;f=d.F[1].O;d.O=(c>f?c:f)+1;c=d.F[0];f=d.F[1];d.J=c.J<f.J?c.J:f.J;d.K=c.K<f.K?c.K:f.K;d.L=c.L<f.L?c.L:f.L;d.G=c.G>f.G?c.G:f.G;d.H=c.H>f.H?c.H:f.H;d.I=c.I>f.I?c.I:f.I;d=d.Fa}}}a.Qd=null;if(null!=e.Oa&&null!=e.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");e.F[0]=null;e.F[1]=null;e.Ma=0;e.Fa=null;e.O=0;e.Oa=null;e.M=b.Rc;b.Rc=e;a.userData=null;a.M=null;a.ja=null;a.Zg&&(a.Zg=!1)},sd:function(a,b,e){if(!(a.J<=b.na&&a.G>=b.ka&&a.K<=b.oa&&a.H>=b.la&&a.L<=b.pa&&a.I>=b.ma)){a.J=b.na;a.K=b.oa;a.L=b.pa;a.G=b.ka;a.H=b.la;a.I=b.ma;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var d;b=e.x;d=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<d?0:d;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>d?0:d;a.I+=0>e?0:e}if(!a.Zg){a.Zg=!0;if(this.Ye.length==this.uf){e=Array(this.uf<<1);b=0;for(d=this.uf;b<d;){var c=b++;e[c]=this.Ye[c];this.Ye[c]=null}this.Ye=e}this.Ye[this.uf++]=a}}},si:function(){var a=this.Yd;if(null!=a){for(;a.qg=null,a.rg=null,a=a.M,null!=a;);this.Yd.M=this.bh;this.bh=this.Yd;this.Yd=null}this.$i=0;if(!(2>this.ki)){for(var b=this.uf/this.ki<F.bvhIncrementalCollisionThreshold,e=0,d=this.uf;e<d;){var c=e++,f=this.Ye[c];if(f.Zg){var h=this.ge,l=f.Qd;h.Nj--;var g=l.Lf,k=l.Kf;null!=g&&(g.Kf=k);null!=k&&(k.Lf=g);l==h.Tf&&(h.Tf=h.Tf.Kf);l==h.Xe&&(h.Xe=h.Xe.Lf);l.Kf=null;l.Lf=null;if(null==l.Oa||l.Oa.Qd!=l||null!=l.F[0]||null!=l.F[1]||0!=l.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(h.Pb==l)h.Pb=null;else{var m=l.Fa,n=m.F[l.Ma^1],q=m.Fa;if(null==q){n.Fa=null;n.Ma=0;h.Pb=n;if(null!=m.Oa&&null!=m.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.Ma=0;m.F[0]=null;m.F[1]=null;m.Ma=0;m.Fa=null;m.O=0;m.Oa=null;m.M=h.Rc;h.Rc=m}else{n.Fa=q;var p=m.Ma;q.F[p]=n;n.Fa=q;n.Ma=p;if(null!=m.Oa&&null!=m.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");m.M=null;m.Ma=0;m.F[0]=null;m.F[1]=null;m.Ma=0;m.Fa=null;m.O=0;m.Oa=null;m.M=h.Rc;h.Rc=m;for(var r=q;null!=r;){if(h.oi.yj&&!(2>r.O)){var v=r.Fa,aa=r.F[0],w=r.F[1],B=aa.O-w.O,u=r.Ma;if(1<B){var D=aa.F[0],t=aa.F[1];if(D.O>t.O){aa.F[1]=r;r.Fa=aa;r.Ma=1;r.F[0]=t;t.Fa=r;t.Ma=0;var A=aa.F[0],E=aa.F[1];aa.J=A.J<E.J?A.J:E.J;aa.K=A.K<E.K?A.K:E.K;aa.L=A.L<E.L?A.L:E.L;aa.G=A.G>E.G?A.G:E.G;aa.H=A.H>E.H?A.H:E.H;aa.I=A.I>E.I?A.I:E.I;var x=aa.F[0].O,Ab=aa.F[1].O;aa.O=(x>Ab?x:Ab)+1;var N=r.F[0],I=r.F[1];r.J=N.J<I.J?N.J:I.J;r.K=N.K<I.K?N.K:I.K;r.L=N.L<I.L?N.L:I.L;r.G=N.G>I.G?N.G:I.G;r.H=N.H>I.H?N.H:I.H;r.I=N.I>I.I?N.I:I.I;var al=r.F[0].O,Gl=r.F[1].O;r.O=(al>Gl?al:Gl)+1}else{aa.F[0]=r;r.Fa=aa;r.Ma=0;r.F[0]=D;D.Fa=r;D.Ma=0;var C=aa.F[0],ga=aa.F[1];aa.J=C.J<ga.J?C.J:ga.J;aa.K=C.K<ga.K?C.K:ga.K;aa.L=C.L<ga.L?C.L:ga.L;aa.G=C.G>ga.G?C.G:ga.G;aa.H=C.H>ga.H?C.H:ga.H;aa.I=C.I>ga.I?C.I:ga.I;var O=aa.F[0].O,Vb=aa.F[1].O;aa.O=(O>Vb?O:Vb)+1;var L=r.F[0],ka=r.F[1];r.J=L.J<ka.J?L.J:ka.J;r.K=L.K<ka.K?L.K:ka.K;r.L=L.L<ka.L?L.L:ka.L;r.G=L.G>ka.G?L.G:ka.G;r.H=L.H>ka.H?L.H:ka.H;r.I=L.I>ka.I?L.I:ka.I;var Va=r.F[0].O,U=r.F[1].O;r.O=(Va>U?Va:U)+1}null!=v?(v.F[u]=aa,aa.Fa=v,aa.Ma=u):(h.Pb=aa,aa.Fa=null);r=aa}else if(-1>B){var R=w.F[0],cc=w.F[1];if(R.O>cc.O){w.F[1]=r;r.Fa=w;r.Ma=1;r.F[1]=cc;cc.Fa=r;cc.Ma=1;var Ma=w.F[0],Qa=w.F[1];w.J=Ma.J<Qa.J?Ma.J:Qa.J;w.K=Ma.K<Qa.K?Ma.K:Qa.K;w.L=Ma.L<Qa.L?Ma.L:Qa.L;w.G=Ma.G>Qa.G?Ma.G:Qa.G;w.H=Ma.H>Qa.H?Ma.H:Qa.H;w.I=Ma.I>Qa.I?Ma.I:Qa.I;var M=w.F[0].O,Oa=w.F[1].O;w.O=(M>Oa?M:Oa)+1;var Ba=r.F[0],Bb=r.F[1];r.J=Ba.J<Bb.J?Ba.J:Bb.J;r.K=Ba.K<Bb.K?Ba.K:Bb.K;r.L=Ba.L<Bb.L?Ba.L:Bb.L;r.G=Ba.G>Bb.G?Ba.G:Bb.G;r.H=Ba.H>Bb.H?Ba.H:Bb.H;r.I=Ba.I>Bb.I?Ba.I:Bb.I;var H=r.F[0].O,Pa=r.F[1].O;r.O=(H>Pa?H:Pa)+1}else{w.F[0]=r;r.Fa=w;r.Ma=0;r.F[1]=R;R.Fa=r;R.Ma=1;var ba=w.F[0],Q=w.F[1];w.J=ba.J<Q.J?ba.J:Q.J;w.K=ba.K<Q.K?ba.K:Q.K;w.L=ba.L<Q.L?ba.L:Q.L;w.G=ba.G>Q.G?ba.G:Q.G;w.H=ba.H>Q.H?ba.H:Q.H;w.I=ba.I>Q.I?ba.I:Q.I;var P=w.F[0].O,wa=w.F[1].O;w.O=(P>wa?P:wa)+1;var ta=r.F[0],W=r.F[1];r.J=ta.J<W.J?ta.J:W.J;r.K=ta.K<W.K?ta.K:W.K;r.L=ta.L<W.L?ta.L:W.L;r.G=ta.G>W.G?ta.G:W.G;r.H=ta.H>W.H?ta.H:W.H;r.I=ta.I>W.I?ta.I:W.I;var oa=r.F[0].O,y=r.F[1].O;r.O=(oa>y?oa:y)+1}null!=v?(v.F[u]=w,w.Fa=v,w.Ma=u):(h.Pb=w,w.Fa=null);r=w}}var Ga=r.F[0].O,ca=r.F[1].O;r.O=(Ga>ca?Ga:ca)+1;var Ca=r.F[0],xa=r.F[1];r.J=Ca.J<xa.J?Ca.J:xa.J;r.K=Ca.K<xa.K?Ca.K:xa.K;r.L=Ca.L<xa.L?Ca.L:xa.L;r.G=Ca.G>xa.G?Ca.G:xa.G;r.H=Ca.H>xa.H?Ca.H:xa.H;r.I=Ca.I>xa.I?Ca.I:xa.I;r=r.Fa}}}f.Qd=null;if(null!=l.Oa&&null!=l.Oa.Qd)throw Error("assertion error: node._proxy == null || node._proxy._leaf == null is false");l.M=null;l.Ma=0;l.F[0]=null;l.F[1]=null;l.Ma=0;l.Fa=null;l.O=0;l.Oa=null;l.M=h.Rc;h.Rc=l;var Da=this.ge,Ra=Da.Rc;null!=Ra?(Da.Rc=Ra.M,Ra.M=null):Ra=new fe;var la=Ra;la.Oa=f;f.Qd=la;la.J=f.J;la.K=f.K;la.L=f.L;la.G=f.G;la.H=f.H;la.I=f.I;Da.Nj++;null==Da.Tf?Da.Tf=la:(Da.Xe.Kf=la,la.Lf=Da.Xe);Da.Xe=la;if(null==la.Oa||la.Oa.Qd!=la||null!=la.F[0]||null!=la.F[1]||0!=la.O)throw Error("assertion error: leaf._proxy != null && leaf._proxy._leaf == leaf && leaf._children[0] == null && leaf._children[1] == null && leaf._height == 0 is false");if(null==Da.Pb)Da.Pb=la;else{for(var Z=Da.Pb;0<Z.O;){var Ea=Da.oi.Dl(Z,la);if(-1==Ea)break;else Z=Z.F[Ea]}var ra=Z.Fa,va=Da.Rc;null!=va?(Da.Rc=va.M,va.M=null):va=new fe;var J=va;if(null==ra)Da.Pb=J;else{var Ka=Z.Ma;ra.F[Ka]=J;J.Fa=ra;J.Ma=Ka}var Xa=Z.Ma;J.F[Xa]=Z;Z.Fa=J;Z.Ma=Xa;var S=Z.Ma^1;J.F[S]=la;la.Fa=J;for(la.Ma=S;null!=J;){if(Da.oi.yj&&!(2>J.O)){var Ya=J.Fa,T=J.F[0],K=J.F[1],ia=T.O-K.O,gb=J.Ma;if(1<ia){var da=T.F[0],Ic=T.F[1];if(da.O>Ic.O){T.F[1]=J;J.Fa=T;J.Ma=1;J.F[0]=Ic;Ic.Fa=J;Ic.Ma=0;var sa=T.F[0],fb=T.F[1];T.J=sa.J<fb.J?sa.J:fb.J;T.K=sa.K<fb.K?sa.K:fb.K;T.L=sa.L<fb.L?sa.L:fb.L;T.G=sa.G>fb.G?sa.G:fb.G;T.H=sa.H>fb.H?sa.H:fb.H;T.I=sa.I>fb.I?sa.I:fb.I;var jb=T.F[0].O,Za=T.F[1].O;T.O=(jb>Za?jb:Za)+1;var ma=J.F[0],na=J.F[1];J.J=ma.J<na.J?ma.J:na.J;J.K=ma.K<na.K?ma.K:na.K;J.L=ma.L<na.L?ma.L:na.L;J.G=ma.G>na.G?ma.G:na.G;J.H=ma.H>na.H?ma.H:na.H;J.I=ma.I>na.I?ma.I:na.I;var Ia=J.F[0].O,Fa=J.F[1].O;J.O=(Ia>Fa?Ia:Fa)+1}else{T.F[0]=J;J.Fa=T;J.Ma=0;J.F[0]=da;da.Fa=J;da.Ma=0;var nb=T.F[0],fa=T.F[1];T.J=nb.J<fa.J?nb.J:fa.J;T.K=nb.K<fa.K?nb.K:fa.K;T.L=nb.L<fa.L?nb.L:fa.L;T.G=nb.G>fa.G?nb.G:fa.G;T.H=nb.H>fa.H?nb.H:fa.H;T.I=nb.I>fa.I?nb.I:fa.I;var ea=T.F[0].O,ja=T.F[1].O;T.O=(ea>ja?ea:ja)+1;var cb=J.F[0],za=J.F[1];J.J=cb.J<za.J?cb.J:za.J;J.K=cb.K<za.K?cb.K:za.K;J.L=cb.L<za.L?cb.L:za.L;J.G=cb.G>za.G?cb.G:za.G;J.H=cb.H>za.H?cb.H:za.H;J.I=cb.I>za.I?cb.I:za.I;var tb=J.F[0].O,Ta=J.F[1].O;J.O=(tb>Ta?tb:Ta)+1}null!=Ya?(Ya.F[gb]=T,T.Fa=Ya,T.Ma=gb):(Da.Pb=T,T.Fa=null);J=T}else if(-1>ia){var qb=K.F[0],rb=K.F[1];if(qb.O>rb.O){K.F[1]=J;J.Fa=K;J.Ma=1;J.F[1]=rb;rb.Fa=J;rb.Ma=1;var vb=K.F[0],Wa=K.F[1];K.J=vb.J<Wa.J?vb.J:Wa.J;K.K=vb.K<Wa.K?vb.K:Wa.K;K.L=vb.L<Wa.L?vb.L:Wa.L;K.G=vb.G>Wa.G?vb.G:Wa.G;K.H=vb.H>Wa.H?vb.H:Wa.H;K.I=vb.I>Wa.I?vb.I:Wa.I;var yb=K.F[0].O,rc=K.F[1].O;K.O=(yb>rc?yb:rc)+1;var $a=J.F[0],ua=J.F[1];J.J=$a.J<ua.J?$a.J:ua.J;J.K=$a.K<ua.K?$a.K:ua.K;J.L=$a.L<ua.L?$a.L:ua.L;J.G=$a.G>ua.G?$a.G:ua.G;J.H=$a.H>ua.H?$a.H:ua.H;J.I=$a.I>ua.I?$a.I:ua.I;var Jb=J.F[0].O,G=J.F[1].O;J.O=(Jb>G?Jb:G)+1}else{K.F[0]=J;J.Fa=K;J.Ma=0;J.F[1]=qb;qb.Fa=J;qb.Ma=1;var ob=K.F[0],db=K.F[1];K.J=ob.J<db.J?ob.J:db.J;K.K=ob.K<db.K?ob.K:db.K;K.L=ob.L<db.L?ob.L:db.L;K.G=ob.G>db.G?ob.G:db.G;K.H=ob.H>db.H?ob.H:db.H;K.I=ob.I>db.I?ob.I:db.I;var qc=K.F[0].O,ab=K.F[1].O;K.O=(qc>ab?qc:ab)+1;var hb=J.F[0],z=J.F[1];J.J=hb.J<z.J?hb.J:z.J;J.K=hb.K<z.K?hb.K:z.K;J.L=hb.L<z.L?hb.L:z.L;J.G=hb.G>z.G?hb.G:z.G;J.H=hb.H>z.H?hb.H:z.H;J.I=hb.I>z.I?hb.I:z.I;var Db=J.F[0].O,Xd=J.F[1].O;J.O=(Db>Xd?Db:Xd)+1}null!=Ya?(Ya.F[gb]=K,K.Fa=Ya,K.Ma=gb):(Da.Pb=K,K.Fa=null);J=K}}var Tc=J.F[0].O,Eb=J.F[1].O;J.O=(Tc>Eb?Tc:Eb)+1;var Na=J.F[0],mb=J.F[1];J.J=Na.J<mb.J?Na.J:mb.J;J.K=Na.K<mb.K?Na.K:mb.K;J.L=Na.L<mb.L?Na.L:mb.L;J.G=Na.G>mb.G?Na.G:mb.G;J.H=Na.H>mb.H?Na.H:mb.H;J.I=Na.I>mb.I?Na.I:mb.I;J=J.Fa}}b&&this.fh(this.ge.Pb,f.Qd);f.Zg=!1}this.Ye[c]=null}b||this.fh(this.ge.Pb,this.ge.Pb);this.uf=0}},Sd:function(a,b,e){null!=this.ge.Pb&&this.rl(this.ge.Pb,a.x,a.y,a.z,b.x,b.y,b.z,e)},rf:function(a,b,e,d){null!=this.ge.Pb&&this.Vk(this.ge.Pb,a,b,e,d)},eh:function(a,b){null!=this.ge.Pb&&this.Qk(this.ge.Pb,a,b)},wn:function(){return this.ge.Qm()},ra:fc});fe.aa=!0;fe.prototype={ra:fe};nj.aa=!0;nj.Kb=pc;nj.prototype=sb(pc.prototype,{ra:nj});mj.aa=!0;mj.prototype={Dl:function(a,b){switch(this.Gl){case 0:var e,d,c;e=b.J+b.G;d=b.K+b.H;c=b.L+b.I;var f=a.F[0],h=a.F[1],l,g;b=f.J+f.G;a=f.K+f.H;f=f.L+f.I;l=h.J+h.G;g=h.K+h.H;h=h.L+h.I;b-=e;a-=d;f-=c;l-=e;g-=d;h-=c;return b*b+a*a+f*f<l*l+g*g+h*h?0:1;case 1:f=a.F[0];e=a.F[1];d=a.H-a.K;c=a.I-a.L;var h=2*((a.G-a.J)*(d+c)+d*c),k,m;d=a.J<b.J?a.J:b.J;k=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;c=a.G>b.G?a.G:b.G;m=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;a=m-k;l=g-l;d=2*((c-d)*(a+l)+a*l);a=2*d;var n=2*(d-h),h=n;d=f.J<b.J?f.J:b.J;k=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;c=f.G>b.G?f.G:b.G;m=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.O?(f=m-k,l=g-l,h+=2*((c-d)*(f+l)+f*l)):(k=m-k,l=g-l,g=f.H-f.K,m=f.I-f.L,h+=2*((c-d)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m));f=n;d=e.J<b.J?e.J:b.J;k=e.K<b.K?e.K:b.K;l=e.L<b.L?e.L:b.L;c=e.G>b.G?e.G:b.G;m=e.H>b.H?e.H:b.H;g=e.I>b.I?e.I:b.I;0==e.O?(e=m-k,b=g-l,f+=2*((c-d)*(e+b)+e*b)):(b=m-k,l=g-l,g=e.H-e.K,n=e.I-e.L,f+=2*((c-d)*(b+l)+b*l)-2*((e.G-e.J)*(g+n)+g*n));return a<h?a<f?-1:1:h<f?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Gl),-1}},ra:mj};Fk.aa=!0;Fk.prototype={Qm:function(){return this.Yk(this.Pb)},Yk:function(a){if(null==a||0==a.O)return 0;var b=a.F[0].O-a.F[1].O;0>b&&(b=-b);return b+this.Yk(a.F[0])+this.Yk(a.F[1])},ra:Fk};Aa.aa=!0;Aa.prototype={Aa:function(a,b){this.na=a.x;this.oa=a.y;this.pa=a.z;this.ka=b.x;this.la=b.y;this.ma=b.z;return this},Hc:function(){var a=new t;a.x=this.na;a.y=this.oa;a.z=this.pa;return a},ad:function(a){a.x=this.na;a.y=this.oa;a.z=this.pa},Pd:function(a){this.na=a.x;this.oa=a.y;this.pa=a.z;return this},zc:function(){var a=new t;a.x=this.ka;a.y=this.la;a.z=this.ma;return a},Cc:function(a){a.x=this.ka;a.y=this.la;a.z=this.ma},cd:function(a){this.ka=a.x;this.la=a.y;this.ma=a.z;return this},tb:function(){var a=new t,b,e,d;b=this.na+this.ka;e=this.oa+this.la;d=this.pa+this.ma;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},Lb:function(a){var b,e,d;b=this.na+this.ka;e=this.oa+this.la;d=this.pa+this.ma;a.x=.5*b;a.y=.5*e;a.z=.5*d},lc:function(){var a=new t,b,e,d;b=this.ka-this.na;e=this.la-this.oa;d=this.ma-this.pa;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},mc:function(a){var b,e,d;b=this.ka-this.na;e=this.la-this.oa;d=this.ma-this.pa;a.x=.5*b;a.y=.5*e;a.z=.5*d},Qa:function(a){this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.pa=this.pa<a.pa?this.pa:a.pa;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;this.ma=this.ma>a.ma?this.ma:a.ma;return this},bb:function(a){var b=new Aa;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.pa=this.pa<a.pa?this.pa:a.pa;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;b.ma=this.ma>a.ma?this.ma:a.ma;return b},bd:function(a){return this.na<a.ka&&this.ka>a.na&&this.oa<a.la&&this.la>a.oa&&this.pa<a.ma?this.ma>a.pa:!1},qc:function(a){var b=new Aa;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.pa=this.pa>a.pa?this.pa:a.pa;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;b.ma=this.ma<a.ma?this.ma:a.ma;return b},rc:function(a,b){b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.pa=this.pa>a.pa?this.pa:a.pa;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;b.ma=this.ma<a.ma?this.ma:a.ma},Zd:function(a){this.na=a.na;this.oa=a.oa;this.pa=a.pa;this.ka=a.ka;this.la=a.la;this.ma=a.ma;return this},clone:function(){var a=new Aa;a.na=this.na;a.oa=this.oa;a.pa=this.pa;a.ka=this.ka;a.la=this.la;a.ma=this.ma;return a},ra:Aa};id.aa=!0;id.Kb=bb;id.prototype=sb(bb.prototype,{hn:function(){var a=new t;a.x=this.Le;a.y=this.Me;a.z=this.Ne;return a},jn:function(a){a.x=this.Le;a.y=this.Me;a.z=this.Ne},Be:function(){this.nf=8*this.Le*this.Me*this.Ne;var a,b,e;a=this.Le*this.Le;b=this.Me*this.Me;e=this.Ne*this.Ne;this.cg=.3333333333333333*(b+e);this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(e+a);this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(a+b)},Mb:function(a,b){var e,d,c,f,h;f=b.o*this.mk+b.f*this.nk+b.h*this.pk;h=b.i*this.mk+b.m*this.nk+b.j*this.pk;e=b.l*this.mk+b.g*this.nk+b.s*this.pk;var l,g;l=b.o*this.qk+b.f*this.rk+b.h*this.sk;g=b.i*this.qk+b.m*this.rk+b.j*this.sk;d=b.l*this.qk+b.g*this.rk+b.s*this.sk;var k,m;k=b.o*this.tk+b.f*this.uk+b.h*this.vk;m=b.i*this.tk+b.m*this.uk+b.j*this.vk;c=b.l*this.tk+b.g*this.uk+b.s*this.vk;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>d?-d:d)+(0>c?-c:c);a.na=b.v-f;a.oa=b.A-h;a.pa=b.B-e;a.ka=b.v+f;a.la=b.A+h;a.ma=b.B+e},Ld:function(a,b){var e,d,c;c=d=e=this.gc;e=e<this.Le?e:this.Le;d=d<this.Me?d:this.Me;c=c<this.Ne?c:this.Ne;e=this.Le-e;d=this.Me-d;c=this.Ne-c;b.x=0<a.x?e:-e;b.y=0<a.y?d:-d;b.z=0<a.z?c:-c},li:function(a,b,e,d,c,f,h){var l=this.Le,g=this.Me,k=this.Ne;d-=a;c-=b;f-=e;var m=0,n=0,q=0,p=1,r=1,v=1;if(-1E-6<d&&1E-6>d){if(a<=-l||a>=l)return!1}else{var aa=1/d,w=(-l-a)*aa,l=(l-a)*aa;w>l&&(aa=w,w=l,l=aa);0<w&&(m=w);1>l&&(p=l)}if(-1E-6<c&&1E-6>c){if(b<=-g||b>=g)return!1}else w=1/c,l=(-g-b)*w,g=(g-b)*w,l>g&&(w=l,l=g,g=w),0<l&&(n=l),1>g&&(r=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(q=g),1>k&&(v=k);if(1<=m||1<=n||1<=q||0>=p||0>=r||0>=v)return!1;k=m;m=0;n>k&&(k=n,m=1);q>k&&(k=q,m=2);r<p&&(p=r);v<p&&(p=v);if(k>p||!k)return!1;switch(m){case 0:h.normal.Aa(0<d?-1:1,0,0);break;case 1:h.normal.Aa(0,0<c?-1:1,0);break;case 2:h.normal.Aa(0,0,0<f?-1:1)}h.position.Aa(a+k*d,b+k*c,e+k*f);h.fraction=k;return!0},ra:id});hd.aa=!0;hd.Kb=bb;hd.prototype=sb(bb.prototype,{Jh:function(){return this.ab},mj:function(){return this.Hb},Be:function(){var a=this.ab*this.ab,b=this.Hb*this.Hb,e=6.28318530717958*a*this.Hb,d=3.14159265358979*a*this.ab*4/3,c=(this.nf=e+d)?1/this.nf:0;this.cg=b=c*(e*(.25*a+b/3)+d*(.4*a+this.Hb*this.ab*.75+b));this.fg=this.eg=this.dg=0;this.gg=c*(e*a*.5+d*a*.4);this.jg=this.ig=this.hg=0;this.kg=b},Mb:function(a,b){var e,d,c;c=d=e=this.ab;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Hb;h=(0>h?-h:h)*this.Hb;l=(0>l?-l:l)*this.Hb;e+=f;d+=h;c+=l;a.na=b.v-e;a.oa=b.A-d;a.pa=b.B-c;a.ka=b.v+e;a.la=b.A+d;a.ma=b.B+c},Ld:function(a,b){0<a.y?b.Aa(0,this.Hb,0):b.Aa(0,-this.Hb,0)},li:function(a,b,e,d,c,f,h){var l=this.Hb,g=d-a,k=f-e,m,n=g*g+k*k,q=a*g+e*k;m=a*a+e*e-this.ab*this.ab;var p=q*q-n*m;if(0>p)return!1;if(0<n){if(p=Math.sqrt(p),m=(-q-p)/n,1<=m||0>=(-q+p)/n)return!1}else{if(0<=m)return!1;m=0}n=b+(c-b)*m;if(n>-l&&n<l)return 0<m?(f=m,q=h.normal.Aa(a+g*f,0,e+k*f),b=Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),0<b&&(b=1/b),c=q.y*b,d=q.z*b,q.x=q.x*b,q.y=c,q.z=d,h.position.Aa(a+f*g,n,e+f*k),h.fraction=f,!0):!1;var g=0>n?-l:l,r;r=a-0;l=b-g;k=e-0;a=d-a;b=c-b;e=f-e;n=a*a+b*b+e*e;q=r*a+l*b+k*e;m=r*r+l*l+k*k-this.ab*this.ab;p=q*q-n*m;if(0>p)return!1;f=(-q-Math.sqrt(p))/n;if(0>f||1<f)return!1;a=r+a*f;n=l+b*f;e=k+e*f;q=a*a+n*n+e*e;0<q&&(q=1/Math.sqrt(q));b=h.position;b.x=a+0;b.y=n+g;b.z=e+0;g=h.normal;g.x=a*q;g.y=n*q;g.z=e*q;h.fraction=f;return!0},ra:hd});bd.aa=!0;bd.Kb=bb;bd.prototype=sb(bb.prototype,{Jh:function(){return this.ab},mj:function(){return this.Hb},Be:function(){var a=this.ab*this.ab,b=this.Hb*this.Hb*4;this.nf=3.14159265358979*a*this.Hb*2/3;this.cg=.05*(3*a+2*b);this.fg=this.eg=this.dg=0;this.gg=.3*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+2*b)},Mb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Hb;d*=this.Hb;c*=this.Hb;var g,k,m,n,q,p;g=-e-f;k=-d-h;m=-c-l;n=-e+f;q=-d+h;p=-c+l;l=g>n?g:n;h=k>q?k:q;f=m>p?m:p;g=g<n?g:n;k=k<q?k:q;m=m<p?m:p;a.na=b.v+(g<e?g:e);a.oa=b.A+(k<d?k:d);a.pa=b.B+(m<c?m:c);a.ka=b.v+(l>e?l:e);a.la=b.A+(h>d?h:d);a.ma=b.B+(f>c?f:c)},Ld:function(a,b){var e=a.x,d=a.y,c=a.z;0<d&&d*d>this.ak*this.ak*(e*e+d*d+c*c)?(b.Aa(0,this.Hb-this.gc/this.ak,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,d=e*e+a*a,c=2*this.Hb,c=(c-this.gc)/c*this.ab-this.gc/this.Sj,0>c&&(c=0),d=0<d?c/Math.sqrt(d):0,c=this.Hb-this.gc,0>c&&(c=0),b.x=e*d,b.y=-c,b.z=a*d)},li:function(a,b,e,d,c,f,h){var l=this.Hb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,m=(l-b)*m;if(n>m)var q=n,n=m,m=q;0<n&&(g=n);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var q=this.Sj*this.Sj,m=q*(d*d+c*c+f*f)-c*c,n=q*(a*d+b*c+e*f)-b*c,q=q*(a*a+b*b+e*e)-b*b,p=n*n-m*q;if(m){if(0>p)return!1;p=Math.sqrt(p);if(0>m)if(0<c){if(q=0,n=(-n+p)/m,0>=n)return!1}else{if(q=(-n-p)/m,n=1,1<=q)return!1}else if(q=(-n-p)/m,n=(-n+p)/m,1<=q||0>=n)return!1}else if(m=-q/(2*n),0<n){if(q=0,n=m,0>=m)return!1}else if(q=m,n=1,1<=m)return!1;b+=l;if(n<=g||k<=q)return!1;if(q<g){l=g;if(!l)return!1;h.normal.Aa(0,0<c?-1:1,0)}else{l=q;if(!l)return!1;g=h.normal.Aa(a+d*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;k=this.Sj;n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;h.normal.y+=this.ak}h.position.Aa(a+l*d,b+l*c,e+l*f);h.fraction=l;return!0},ra:bd});pd.aa=!0;pd.Kb=bb;pd.prototype=sb(bb.prototype,{An:function(){return this.zb},Be:function(){this.cg=this.nf=1;this.fg=this.eg=this.dg=0;this.gg=1;this.jg=this.ig=this.hg=0;this.kg=1;for(var a=this.zb[0].x,b=this.zb[0].y,e=this.zb[0].z,d=this.zb[0].x,c=this.zb[0].y,f=this.zb[0].z,h=1,l=this.Ae;h<l;){var g=h++,k=this.zb[g].x,m=this.zb[g].y,g=this.zb[g].z;k<a?a=k:k>d&&(d=k);m<b?b=m:m>c&&(c=m);g<e?e=g:g>f&&(f=g)}h=d-a;l=c-b;k=f-e;this.nf=h*l*k;a=.25*((a+d)*(a+d)+(b+c)*(b+c)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.cg=.3333333333333333*(l+k)+a;this.fg=this.eg=this.dg=0;this.gg=.3333333333333333*(k+h)+a;this.jg=this.ig=this.hg=0;this.kg=.3333333333333333*(h+l)+a},Mb:function(a,b){var e,d,c,f,h,l,g,k,m;m=k=g=this.gc;var n,q,p;e=this.zb[0];n=e.x;q=e.y;p=e.z;d=b.o*n+b.f*q+b.h*p;e=b.i*n+b.m*q+b.j*p;c=b.l*n+b.g*q+b.s*p;n=d+b.v;q=e+b.A;p=c+b.B;e=n;d=q;c=p;f=n;h=q;l=p;for(var r=1,v=this.Ae;r<v;){n=r++;p=this.zb[n];n=p.x;q=p.y;p=p.z;var aa,w;aa=b.o*n+b.f*q+b.h*p;w=b.i*n+b.m*q+b.j*p;p=b.l*n+b.g*q+b.s*p;n=aa;q=w;n+=b.v;q+=b.A;p+=b.B;e=e<n?e:n;d=d<q?d:q;c=c<p?c:p;f=f>n?f:n;h=h>q?h:q;l=l>p?l:p}a.na=e-g;a.oa=d-k;a.pa=c-m;a.ka=f+g;a.la=h+k;a.ma=l+m},Ld:function(a,b){for(var e=this.zb[0],e=e.x*a.x+e.y*a.y+e.z*a.z,d=0,c=1,f=this.Ae;c<f;){var h=c++,l=this.zb[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,d=h)}a=this.zb[d];b.x=a.x;b.y=a.y;b.z=a.z},ra:pd});ad.aa=!0;ad.Kb=bb;ad.prototype=sb(bb.prototype,{Jh:function(){return this.ab},mj:function(){return this.Hb},Be:function(){var a=this.ab*this.ab,b=this.Hb*this.Hb*4;this.nf=3.14159265358979*a*this.Hb*2;this.cg=.08333333333333333*(3*a+b);this.fg=this.eg=this.dg=0;this.gg=.5*a;this.jg=this.ig=this.hg=0;this.kg=.08333333333333333*(3*a+b)},Mb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;e=0>e?-e:e;d=0>d?-d:d;c=0>c?-c:c;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.ab;h*=this.ab;l*=this.ab;e*=this.Hb;d*=this.Hb;c*=this.Hb;f+=e;h+=d;l+=c;a.na=b.v-f;a.oa=b.A-h;a.pa=b.B-l;a.ka=b.v+f;a.la=b.A+h;a.ma=b.B+l},Ld:function(a,b){var e=a.x,d=a.z,c=e*e+d*d,f=this.ab-this.gc;0>f&&(f=0);c=0<c?f/Math.sqrt(c):0;f=this.Hb-this.gc;0>f&&(f=0);b.x=e*c;b.y=0<a.y?f:-f;b.z=d*c},li:function(a,b,e,d,c,f,h){var l=this.Hb;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,l=(l-b)*m;n>l&&(m=n,n=l,l=m);0<n&&(g=n);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=d*d+f*f,n=a*d+e*f,m=a*a+e*e-this.ab*this.ab,q=n*n-l*m;if(0>q)return!1;if(0<l){if(q=Math.sqrt(q),m=(-n-q)/l,l=(-n+q)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.Aa(0,0<c?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.Aa(a+d*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);n=k.y*l;m=k.z*l;k.x=k.x*l;k.y=n;k.z=m}h.position.Aa(a+g*d,b+g*c,e+g*f);h.fraction=g;return!0},ra:ad});Bc.aa=!0;Ed.aa=!0;Ed.prototype={ra:Ed};yd.aa=!0;yd.Kb=bb;yd.prototype=sb(bb.prototype,{Jh:function(){return this.ab},Be:function(){this.nf=4.188790204786386*this.ab*this.ab*this.ab;this.cg=.4*this.ab*this.ab;this.fg=this.eg=this.dg=0;this.gg=.4*this.ab*this.ab;this.jg=this.ig=this.hg=0;this.kg=.4*this.ab*this.ab},Mb:function(a,b){var e,d,c;c=d=e=this.ab;a.na=b.v-e;a.oa=b.A-d;a.pa=b.B-c;a.ka=b.v+e;a.la=b.A+d;a.ma=b.B+c},Ld:function(a,b){b.Z()},li:function(a,b,e,d,c,f,h){var l;d-=a;c-=b;l=f-e;f=d*d+c*c+l*l;var g=a*d+b*c+e*l,k=g*g-f*(a*a+b*b+e*e-this.ab*this.ab);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=d*f;b+=c*f;e+=l*f;d=a*a+b*b+e*e;0<d&&(d=1/Math.sqrt(d));c=h.position;c.x=a;c.y=b;c.z=e;c=h.normal;c.x=a*d;c.y=b*d;c.z=e*d;h.fraction=f;return!0},ra:yd});Sd.aa=!0;Sd.prototype={Qa:function(a,b){return this.Ib[a][b]},ra:Sd};nd.aa=!0;nd.prototype={cm:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var d=b++;this.points[d].depth>a&&(a=this.points[d].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.Z();e.position2.Z();e.depth=0;e.id=0}this.normal.Z()},ra:nd};lj.aa=!0;lj.prototype={ra:lj};ak.aa=!0;ak.prototype={Je:function(){null!=this.Yh&&this.Yh.clear()},ra:ak};gd.aa=!0;gd.prototype={xi:function(a,b,e,d){var c=a.normal;c.x=b;c.y=e;c.z=d;this.qh&&(a=a.normal,b=-a.y,e=-a.z,a.x=-a.x,a.y=b,a.z=e)},ri:function(a,b,e,d,c,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.qh?(l=a.position1,l.x=c,l.y=f,l.z=h,c=a.position2,c.x=b,c.y=e,c.z=d):(l=a.position1,l.x=b,l.y=e,l.z=d,b=a.position2,b.x=c,b.y=f,b.z=h)},Ih:function(){},Yl:function(a,b,e,d,c,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.Z();g.position2.Z();g.depth=0;g.id=0}a.normal.Z();this.qh?this.Ih(a,e,b,c,d,f):this.Ih(a,b,e,d,c,f)},ra:gd};Gd.aa=!0;Gd.Kb=gd;Gd.prototype=sb(gd.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k,m;f=d.f;h=d.m;l=d.g;g=c.f;k=c.m;m=c.g;var n=b.Hb,q=e.Hb;b=b.ab;e=e.ab;var p,r,v,aa,w,B;p=d.v+f*-n;r=d.A+h*-n;v=d.B+l*-n;f=d.v+f*n;aa=d.A+h*n;w=d.B+l*n;h=c.v+g*-q;l=c.A+k*-q;d=c.B+m*-q;g=c.v+g*q;k=c.A+k*q;B=c.B+m*q;var u,D,t;u=p-h;D=r-l;t=v-d;f-=p;aa-=r;c=w-v;m=g-h;w=k-l;g=B-d;k=-(u*f+D*aa+t*c);u=u*m+D*w+t*g;D=n*n*4;t=f*m+aa*w+c*g;B=q*q*4;D||B?D?B?((q=D*B-t*t)?(n=t*u+B*k,n=0>n?0:n>q?1:n/q):n=0,q=n*t+u,0>q?(q=0,n=k,n=0>n?0:n>D?1:n/D):q>B?(q=1,n=t+k,n=0>n?0:n>D?1:n/D):q/=B):(q=0,n=k,n=0>n?0:n>D?1:n/D):(n=0,q=u,q=0>q?0:q>B?1:q/B):q=n=0;p+=f*n;r+=aa*n;v+=c*n;h+=m*q;l+=w*q;d+=g*q;aa=p-h;f=r-l;q=v-d;n=aa*aa+f*f+q*q;n>=(b+e)*(b+e)||(n=Math.sqrt(n),0<n?(aa*=1/n,f*=1/n,q*=1/n):(aa=1,q=f=0),this.xi(a,aa,f,q),this.ri(a,p+aa*-b,r+f*-b,v+q*-b,h+aa*e,l+f*e,d+q*e,b+e-n,0))},ra:Gd});ee.aa=!0;ee.Kb=gd;ee.prototype=sb(gd.prototype,{Ih:function(a,b,e,d,c,f){var h=Pb.Qa;d=h.kj(b,e,d,c,F.enableGJKCaching?f:null,!0);a.incremental=!0;if(d!=lc.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+d);else if(!(h.distance>b.gc+e.gc)){var l,g,k;f=h.closestPoint1;d=f.x;c=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,n,q;m=d-l;n=c-g;q=f-k;if(m*m+n*n+q*q){0>h.distance&&(m=-m,n=-n,q=-q);var p=m*m+n*n+q*q;0<p&&(p=1/Math.sqrt(p));m*=p;n*=p;q*=p;this.xi(a,m,n,q);d+=m*-b.gc;c+=n*-b.gc;f+=q*-b.gc;l+=m*e.gc;g+=n*e.gc;k+=q*e.gc;this.ri(a,d,c,f,l,g,k,b.gc+e.gc-h.distance,0)}}},ra:ee});xd.aa=!0;xd.Kb=gd;xd.prototype=sb(gd.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k;f=e.Le;h=e.Me;e=e.Ne;l=-f;g=-h;k=-e;b=b.ab;var m,n,q;m=d.v-c.v;n=d.A-c.A;q=d.B-c.B;var p,r;p=c.o*m+c.i*n+c.l*q;r=c.f*m+c.m*n+c.g*q;m=c.h*m+c.j*n+c.s*q;if(l<p&&f>p&&g<r&&h>r&&k<m&&e>m){var v;n=f-(0>p?-p:p);v=h-(0>r?-r:r);var aa=e-(0>m?-m:m),w,B;n<v?n<aa?(l=0<p?1:-1,w=k=g=0,q=B=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),B=w=1,q=0,n=aa):v<aa?(0<r?(l=0,g=1):(l=0,g=-1),k=0,w=1,B=0,q=1,n=v):(0<m?(g=l=0,k=1):(g=l=0,k=-1),B=w=1,q=0,n=aa);p=l*f+w*p;h=g*h+B*r;m=k*e+q*m;e=c.o*p+c.f*h+c.h*m;r=c.i*p+c.m*h+c.j*m;h=c.l*p+c.g*h+c.s*m;m=c.o*l+c.f*g+c.h*k;p=c.i*l+c.m*g+c.j*k;f=c.l*l+c.g*g+c.s*k;this.xi(a,m,p,f);this.ri(a,d.v+m*-b,d.A+p*-b,d.B+f*-b,c.v+e,c.A+r,c.B+h,n,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=p<f?p:f,n=r<h?r:h,q=m<e?m:e,f=f>l?f:l,n=n>g?n:g,q=q>k?q:k,p-=f,l=r-n,g=m-q,e=p*p+l*l+g*g,e>=b*b||(e=Math.sqrt(e),r=c.o*f+c.f*n+c.h*q,h=c.i*f+c.m*n+c.j*q,m=c.l*f+c.g*n+c.s*q,k=c.o*p+c.f*l+c.h*g,f=c.i*p+c.m*l+c.j*g,p=c.l*p+c.g*l+c.s*g,g=k*k+f*f+p*p,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,p*=g,this.xi(a,l,f,p),this.ri(a,d.v+l*-b,d.A+f*-b,d.B+p*-b,c.v+r,c.A+h,c.B+m,b-e,0))},ra:xd});Nd.aa=!0;Nd.Kb=gd;Nd.prototype=sb(gd.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f=e.Hb;b=b.ab;e=e.ab;var h,l,g;h=c.f;l=c.m;g=c.g;var k,m;k=d.v;m=d.A;d=d.B;var n,q,p,r;n=c.v+h*-f;q=c.A+l*-f;p=c.B+g*-f;h=c.v+h*f;l=c.A+l*f;r=c.B+g*f;c=h-n;g=l-q;l=r-p;f=f*f*4;h=(k-n)*c+(m-q)*g+(d-p)*l;h=0>h?0:h>f?1:h/f;f=n+c*h;q+=g*h;p+=l*h;l=k-f;g=m-q;n=d-p;c=l*l+g*g+n*n;c>=(b+e)*(b+e)||(c=Math.sqrt(c),0<c?(l*=1/c,g*=1/c,n*=1/c):(l=1,n=g=0),this.xi(a,l,g,n),this.ri(a,k+l*-b,m+g*-b,d+n*-b,f+l*e,q+g*e,p+n*e,b+e-c,0))},ra:Nd});Te.aa=!0;Te.Kb=gd;Te.prototype=sb(gd.prototype,{Ih:function(a,b,e,d,c){a.incremental=!1;var f,h,l;f=d.v-c.v;h=d.A-c.A;l=d.B-c.B;b=b.ab;e=e.ab;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.xi(a,f,h,l),this.ri(a,d.v+f*-b,d.A+h*-b,d.B+l*-b,c.v+f*e,c.A+h*e,c.B+l*e,b+e-g,0))},ra:Te});kj.aa=!0;kj.prototype={Sn:function(){for(var a=this.Vc;null!=a;){for(var b=a.M,e=0;3>e;){var d=e++;a.zb[d].dj=null;a.zb[d].pi=null;if(-1==a.Ie[d])return this.Bc=2,!1;if(null==a.we[d])return this.Bc=3,!1}a=b}return!0},am:function(a,b,e){if(b.Jk!=a){b.Jk=a;var d=b.Sh;d.x=e.x;d.y=e.y;d.z=e.z;var c=b.zb[0].ud,f=d.y-c.y,h=d.z-c.z;d.x=d.x-c.x;d.y=f;d.z=h;d=b.Sh;c=b.Lj;b.cj=0<d.x*c.x+d.y*c.y+d.z*c.z;if(b.cj){for(d=0;3>d;)if(c=d++,f=b.we[c],null!=f){h=f.Sh;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.zb[0].ud,g=h.y-l.y,k=h.z-l.z;h.x=h.x-l.x;h.y=g;h.z=k;h=f.Sh;l=f.Lj;f.cj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.cj?this.am(a,f,e):(h=b.zb[c],h.pi=b.zb[b.ii[c]],h.dj=f)}for(a=0;3>a;)e=a++,d=b.we[e],null!=d&&(c=b.Ie[e],d.we[c]=null,d.Ie[c]=-1,b.we[e]=null,b.Ie[e]=-1);this.ah--;a=b.ja;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ja=a);b==this.Vc&&(this.Vc=this.Vc.M);b==this.Fc&&(this.Fc=this.Fc.ja);b.M=null;b.ja=null;b.$j();b.M=this.ve;this.ve=b}else this.Bc=6}},Vg:function(a,b,e,d){this.Bc=0;this.Ae=4;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;this.zb[3]=d;var c=this.Wh,f=a.ud;c.x=f.x;c.y=f.y;c.z=f.z;var f=b.ud,h=c.y+f.y,l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=e.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=d.ud;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=.25*c.y;h=.25*c.z;c.x=.25*c.x;c.y=f;c.z=h;c=this.ve;null!=c?(this.ve=c.M,c.M=null):c=new od;f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new od;h=this.ve;null!=h?(this.ve=h.M,h.M=null):h=new od;l=this.ve;null!=l?(this.ve=l.M,l.M=null):l=new od;c.Aa(a,b,e,this.Wh,!0)||(this.Bc=1);f.Aa(a,b,d,this.Wh,!0)||(this.Bc=1);h.Aa(a,e,d,this.Wh,!0)||(this.Bc=1);l.Aa(b,e,d,this.Wh,!0)||(this.Bc=1);c.Ig(f)||(this.Bc=1);c.Ig(h)||(this.Bc=1);c.Ig(l)||(this.Bc=1);f.Ig(h)||(this.Bc=1);f.Ig(l)||(this.Bc=1);h.Ig(l)||(this.Bc=1);this.ah++;null==this.Vc?this.Vc=c:(this.Fc.M=c,c.ja=this.Fc);this.Fc=c;this.ah++;null==this.Vc?this.Vc=f:(this.Fc.M=f,f.ja=this.Fc);this.Fc=f;this.ah++;null==this.Vc?this.Vc=h:(this.Fc.M=h,h.ja=this.Fc);this.Fc=h;this.ah++;null==this.Vc?this.Vc=l:(this.Fc.M=l,l.ja=this.Fc);this.Fc=l;return!this.Bc},Im:function(a,b){this.zb[this.Ae++]=a;var e=b.zb[0];this.am(this.Ae,b,a.ud);if(0!=this.Bc)return!1;b=e;for(var d=null,c=null;;){if(null==b.pi)return this.Bc=4,!1;if(null==b.dj)return this.Bc=5,!1;var f=this.ve;null!=f?(this.ve=f.M,f.M=null):f=new od;null==c&&(c=f);f.Aa(b,b.pi,a,this.Wh,!1)||(this.Bc=1);if(0!=this.Bc)return!1;this.ah++;null==this.Vc?this.Vc=f:(this.Fc.M=f,f.ja=this.Fc);this.Fc=f;f.Ig(b.dj)||(this.Bc=1);null==d||f.Ig(d)||(this.Bc=1);d=f;b=b.pi;if(b==e)break}d.Ig(c)||(this.Bc=1);return 0==this.Bc?this.Sn():!1},ra:kj};od.aa=!0;od.prototype={Aa:function(a,b,e,d,c){null==c&&(c=!1);var f,h,l,g,k,m,n,q,p,r,v,aa,w=a.ud;f=w.x;h=w.y;l=w.z;var B=b.ud;g=B.x;k=B.y;m=B.z;var u=e.ud;n=u.x;q=u.y;p=u.z;r=d.x;v=d.y;aa=d.z;var D,t,A,E,x,Ab,N,I,al;D=g-f;t=k-h;A=m-l;E=n-f;x=q-h;Ab=p-l;N=f-r;I=h-v;al=l-aa;var F,C,ga;F=t*Ab-A*x;C=A*E-D*Ab;ga=D*x-t*E;var O=!1;if(0>N*F+I*C+al*ga)if(c){var Vb=b;b=e;e=Vb;F*=-1;C*=-1;ga*=-1}else O=!0;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;var L=this.Lj;L.x=F;L.y=C;L.z=ga;var ka=a.ud,Va=b.ud,U=e.ud,R=this.Sh,M,Ma,Qa,vc,Oa,Ba,Bb,H,Pa,ba,Q,P,wa,ta,W,oa,y,Ga;M=ka.x;Ma=ka.y;Qa=ka.z;vc=Va.x;Oa=Va.y;Ba=Va.z;Bb=U.x;H=U.y;Pa=U.z;ba=vc-M;Q=Oa-Ma;P=Ba-Qa;wa=Bb-vc;ta=H-Oa;W=Pa-Ba;oa=M-Bb;y=Ma-H;Ga=Qa-Pa;var ca,Ca,xa;ca=Q*W-P*ta;Ca=P*wa-ba*W;xa=ba*ta-Q*wa;var Da=M*(Q*xa-P*Ca)+Ma*(P*ca-ba*xa)+Qa*(ba*Ca-Q*ca),Ra=vc*(ta*xa-W*Ca)+Oa*(W*ca-wa*xa)+Ba*(wa*Ca-ta*ca),la=Bb*(y*xa-Ga*Ca)+H*(Ga*ca-oa*xa)+Pa*(oa*Ca-y*ca),Z=-1,Ea,ra,va;va=ra=Ea=0;if(0>Da){var J,Ka,Xa,S,Ya,T;J=ka.x;Ka=ka.y;Xa=ka.z;S=Va.x;Ya=Va.y;T=Va.z;var K,ia,gb;K=S-J;ia=Ya-Ka;gb=T-Xa;var da=K*J+ia*Ka+gb*Xa,da=-da/(K*K+ia*ia+gb*gb);if(0>da)R.x=J,R.y=Ka,R.z=Xa;else if(1<da)R.x=S,R.y=Ya,R.z=T;else{var Ic,sa,fb;Ic=J+K*da;sa=Ka+ia*da;fb=Xa+gb*da;R.x=Ic;R.y=sa;R.z=fb}Z=R.x*R.x+R.y*R.y+R.z*R.z;Ea=R.x;ra=R.y;va=R.z}if(0>Ra){var jb,Za,ma,na,Ia,Fa;jb=Va.x;Za=Va.y;ma=Va.z;na=U.x;Ia=U.y;Fa=U.z;var nb,fa,ea;nb=na-jb;fa=Ia-Za;ea=Fa-ma;var ja=nb*jb+fa*Za+ea*ma,ja=-ja/(nb*nb+fa*fa+ea*ea);if(0>ja)R.x=jb,R.y=Za,R.z=ma;else if(1<ja)R.x=na,R.y=Ia,R.z=Fa;else{var cb,za,tb;cb=jb+nb*ja;za=Za+fa*ja;tb=ma+ea*ja;R.x=cb;R.y=za;R.z=tb}var Ta=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||Ta<Z)Z=Ta,Ea=R.x,ra=R.y,va=R.z}if(0>la){var qb,rb,vb,Wa,yb,rc;qb=ka.x;rb=ka.y;vb=ka.z;Wa=U.x;yb=U.y;rc=U.z;var $a,ua,Jb;$a=Wa-qb;ua=yb-rb;Jb=rc-vb;var G=$a*qb+ua*rb+Jb*vb,G=-G/($a*$a+ua*ua+Jb*Jb);if(0>G)R.x=qb,R.y=rb,R.z=vb;else if(1<G)R.x=Wa,R.y=yb,R.z=rc;else{var ob,db,qc;ob=qb+$a*G;db=rb+ua*G;qc=vb+Jb*G;R.x=ob;R.y=db;R.z=qc}var ab=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Z||ab<Z)Z=ab,Ea=R.x,ra=R.y,va=R.z}if(0<Z)R.x=Ea,R.y=ra,R.z=va;else{var hb=ca*ca+Ca*Ca+xa*xa;0<hb&&(hb=1/Math.sqrt(hb));ca*=hb;Ca*=hb;xa*=hb;var z=ca*ca+Ca*Ca+xa*xa,z=(M*ca+Ma*Ca+Qa*xa)/z;Ea=ca*z;ra=Ca*z;va=xa*z;R.x=Ea;R.y=ra;R.z=va}var Db=this.Sh;this.Ej=Db.x*Db.x+Db.y*Db.y+Db.z*Db.z;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=-1;this.Ie[1]=-1;this.Ie[2]=-1;return!O},Ig:function(a){for(var b=0,e=0;3>e;)for(var d=e++,c=0;3>c;){var f=c++,h=this.ii[d];this.zb[d]==a.zb[this.ii[f]]&&this.zb[h]==a.zb[f]&&(this.we[d]=a,this.Ie[d]=f,a.we[f]=this,a.Ie[f]=d,++b)}return 1!=b?!1:!0},$j:function(){this.ja=this.M=null;this.Jk=0;this.cj=!1;this.Ej=0;this.zb[0]=null;this.zb[1]=null;this.zb[2]=null;this.we[0]=null;this.we[1]=null;this.we[2]=null;this.Ie[0]=0;this.Ie[1]=0;this.Ie[2]=0},ra:od};Yc.aa=!0;Yc.prototype={Aa:function(a,b,e){var d=this.ud;d.x=a.x;d.y=a.y;d.z=a.z;a=this.hb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.pb;b.x=e.x;b.y=e.y;b.z=e.z;this.dj=this.pi=this.M=null;return this},$j:function(){this.dj=this.pi=this.M=null},ra:Yc};Ek.aa=!0;Ek.prototype={clear:function(){this.ql.Z()},ra:Ek};t.aa=!0;t.prototype={Aa:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},Z:function(){this.z=this.y=this.x=0;return this},bd:function(a){return new t(this.x+a.x,this.y+a.y,this.z+a.z)},Qa:function(a,b){return new t(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},me:function(a){return new t(this.x-a.x,this.y-a.y,this.z-a.z)},ee:function(a){return new t(this.x*a,this.y*a,this.z*a)},He:function(a,b,e){return new t(this.x*a,this.y*b,this.z*e)},Pd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},tb:function(a){return new t(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},cd:function(a){var b=this.y+a.y,e=this.z+a.z;this.x+=a.x;this.y=b;this.z=e;return this},bb:function(a,b){var e=this.y+a.y*b,d=this.z+a.z*b;this.x+=a.x*b;this.y=e;this.z=d;return this},Ge:function(a){var b=this.y-a.y,e=this.z-a.z;this.x=this.x-a.x;this.y=b;this.z=e;return this},fe:function(a){var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Bf:function(a,b,e){b=this.y*b;e=this.z*e;this.x=this.x*a;this.y=b;this.z=e;return this},Lb:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},lc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},qc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},zc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;a=new t;a.x=b;a.y=e;a.z=d;return a},mc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},rc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Cc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;this.x=b;this.y=e;this.z=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},be:function(){return this.x*this.x+this.y*this.y+this.z*this.z},de:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new t(this.x*a,this.y*a,this.z*a)},ce:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Hc:function(){return new t(-this.x,-this.y,-this.z)},ad:function(){var a=-this.y,b=-this.z;this.x=-this.x;this.y=a;this.z=b;return this},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new t(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"},ra:t};ya.aa=!0;ya.prototype={Mf:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},tb:function(){var a=new t;a.x=this.v;a.y=this.A;a.z=this.B;return a},Lb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},zc:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Hc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},lc:function(){var a=new O;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},mc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Cc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},qc:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+d*this.l;m=b*this.f+e*this.m+d*this.g;b=b*this.h+e*this.j+d*this.s;e=c*this.o+f*this.i+h*this.l;d=c*this.f+f*this.m+h*this.g;c=c*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=d;this.j=c;this.l=f;this.g=h;this.s=l},Qa:function(){var a=new ha,b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},bb:function(a){var b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},rc:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.o=1-g-d;this.f=k-c;this.h=b+h;this.i=k+c;this.m=1-a-d;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new ya;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},Zd:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this},ra:ya};F.aa=!0;Pb.aa=!0;Pb.ad=function(){return Pb.Qa};Pb.prototype={kj:function(a,b,e,d,c,f){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var h=this.Pa,l=this.hb,g=this.pb,k=this.closest,m=this.dir;null!=c?(null==c.Yh&&(c.Yh=new Ek),this.Cn(c.Yh)):m.Z();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var n,q,p;n=d.v-e.v;q=d.A-e.A;p=d.B-e.B;m.x=n;m.y=q;m.z=p;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.Aa(1,0,0)}this.za=0;this.pf(!1);this.qf(!1);var r=this.Pa[this.za],v=this.hb[this.za];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.pb[this.za],w=r.y-aa.y,B=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=B;this.za=1;for(var u=0;40>u;){var D=0;switch(this.za){case 1:var t=h[0];k.x=t.x;k.y=t.y;k.z=t.z;D=1;break;case 2:var A,E,x,Ab,N,I,F=h[0];A=F.x;E=F.y;x=F.z;var C=h[1];Ab=C.x;N=C.y;I=C.z;var O,ga,L;O=Ab-A;ga=N-E;L=I-x;var Vb=O*A+ga*E+L*x,Vb=-Vb/(O*O+ga*ga+L*L);if(0>Vb){var M=k;M.x=A;M.y=E;M.z=x;D=1}else if(1<Vb){var ka=k;ka.x=Ab;ka.y=N;ka.z=I;D=2}else{var Va,U,R;Va=A+O*Vb;U=E+ga*Vb;R=x+L*Vb;var cc=k;cc.x=Va;cc.y=U;cc.z=R;D=3}break;case 3:var Ma=h[0],Qa=h[1],vc=h[2],Oa,Ba,Bb,H,Pa,ba,Q,P,wa,ta,W,oa,y,Ga,ca,Ca,xa,Da,Ra=Ma;Oa=Ra.x;Ba=Ra.y;Bb=Ra.z;var la=Qa;H=la.x;Pa=la.y;ba=la.z;var Z=vc;Q=Z.x;P=Z.y;wa=Z.z;ta=H-Oa;W=Pa-Ba;oa=ba-Bb;y=Q-H;Ga=P-Pa;ca=wa-ba;Ca=Oa-Q;xa=Ba-P;Da=Bb-wa;var Ea,ra,va;Ea=W*ca-oa*Ga;ra=oa*y-ta*ca;va=ta*Ga-W*y;var J=Oa*(W*va-oa*ra)+Ba*(oa*Ea-ta*va)+Bb*(ta*ra-W*Ea),Ka=H*(Ga*va-ca*ra)+Pa*(ca*Ea-y*va)+ba*(y*ra-Ga*Ea),Xa=Q*(xa*va-Da*ra)+P*(Da*Ea-Ca*va)+wa*(Ca*ra-xa*Ea),S=-1,Ya,T,K,ia=0;K=T=Ya=0;if(0>J){var gb,da,Ic,sa,fb,jb,Za=Ma;gb=Za.x;da=Za.y;Ic=Za.z;var ma=Qa;sa=ma.x;fb=ma.y;jb=ma.z;var na,Ia,Fa;na=sa-gb;Ia=fb-da;Fa=jb-Ic;var nb=na*gb+Ia*da+Fa*Ic,nb=-nb/(na*na+Ia*Ia+Fa*Fa),fa;if(0>nb){var ea=k;ea.x=gb;ea.y=da;ea.z=Ic;fa=1}else if(1<nb){var ja=k;ja.x=sa;ja.y=fb;ja.z=jb;fa=2}else{var cb,za,tb;cb=gb+na*nb;za=da+Ia*nb;tb=Ic+Fa*nb;var Ta=k;Ta.x=cb;Ta.y=za;Ta.z=tb;fa=3}var qb=k.x*k.x+k.y*k.y+k.z*k.z,ia=fa,S=qb,rb=k;Ya=rb.x;T=rb.y;K=rb.z}if(0>Ka){var vb,Wa,yb,rc,$a,ua,Jb=Qa;vb=Jb.x;Wa=Jb.y;yb=Jb.z;var G=vc;rc=G.x;$a=G.y;ua=G.z;var ob,db,qc;ob=rc-vb;db=$a-Wa;qc=ua-yb;var ab=ob*vb+db*Wa+qc*yb,ab=-ab/(ob*ob+db*db+qc*qc),hb;if(0>ab){var z=k;z.x=vb;z.y=Wa;z.z=yb;hb=1}else if(1<ab){var Db=k;Db.x=rc;Db.y=$a;Db.z=ua;hb=2}else{var Xd,Tc,Eb;Xd=vb+ob*ab;Tc=Wa+db*ab;Eb=yb+qc*ab;var Na=k;Na.x=Xd;Na.y=Tc;Na.z=Eb;hb=3}var mb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||mb<S){var ia=hb<<1,S=mb,xb=k;Ya=xb.x;T=xb.y;K=xb.z}}if(0>Xa){var zb,eb,Y,La,kb,Sa,ib=Ma;zb=ib.x;eb=ib.y;Y=ib.z;var Ja=vc;La=Ja.x;kb=Ja.y;Sa=Ja.z;var Hb,bl,X;Hb=La-zb;bl=kb-eb;X=Sa-Y;var Cb=Hb*zb+bl*eb+X*Y,Cb=-Cb/(Hb*Hb+bl*bl+X*X),Dc;if(0>Cb){var Pc=k;Pc.x=zb;Pc.y=eb;Pc.z=Y;Dc=1}else if(1<Cb){var rl=k;rl.x=La;rl.y=kb;rl.z=Sa;Dc=2}else{var gc,Nc,ha;gc=zb+Hb*Cb;Nc=eb+bl*Cb;ha=Y+X*Cb;var bk=k;bk.x=gc;bk.y=Nc;bk.z=ha;Dc=3}var zc=k.x*k.x+k.y*k.y+k.z*k.z;if(0>S||zc<S){var ia=Dc&1|(Dc&2)<<1,S=zc,qa=k;Ya=qa.x;T=qa.y;K=qa.z}}if(0<S){var jc=k;jc.x=Ya;jc.y=T;jc.z=K;D=ia}else{var tc=Ea*Ea+ra*ra+va*va;0<tc&&(tc=1/Math.sqrt(tc));Ea*=tc;ra*=tc;va*=tc;var kc=Ea*Ea+ra*ra+va*va,kc=(Oa*Ea+Ba*ra+Bb*va)/kc;Ya=Ea*kc;T=ra*kc;K=va*kc;var ac=k;ac.x=Ya;ac.y=T;ac.z=K;D=7}break;case 4:var Wb=h[0],Xb=h[1],Rb=h[2],hc=h[3],Sb,Qb,Yb,ic,Kb,$b,lb,Ha,pa,Aa,uc,mc,jd,rd,ya,sc,xc,bb,Uf,sb,Zc,Gc,Mb,Ue,pb,Id,Og,sl=Wb;Sb=sl.x;Qb=sl.y;Yb=sl.z;var wb=Xb;ic=wb.x;Kb=wb.y;$b=wb.z;var Ua=Rb;lb=Ua.x;Ha=Ua.y;pa=Ua.z;var Ac=hc;Aa=Ac.x;uc=Ac.y;mc=Ac.z;jd=ic-Sb;rd=Kb-Qb;ya=$b-Yb;sc=lb-Sb;xc=Ha-Qb;bb=pa-Yb;Uf=Aa-Sb;sb=uc-Qb;Zc=mc-Yb;Gc=lb-ic;Mb=Ha-Kb;Ue=pa-$b;pb=Aa-ic;Id=uc-Kb;Og=mc-$b;var Fb,Gb,Gk,Ob,Qc,Hl,Nb,ec,Zb,Ib,fc,Pb;Fb=rd*bb-ya*xc;Gb=ya*sc-jd*bb;Gk=jd*xc-rd*sc;Ob=xc*Zc-bb*sb;Qc=bb*Uf-sc*Zc;Hl=sc*sb-xc*Uf;Nb=sb*ya-Zc*rd;ec=Zc*jd-Uf*ya;Zb=Uf*rd-sb*jd;Ib=Id*Ue-Og*Mb;fc=Og*Gc-pb*Ue;Pb=pb*Mb-Id*Gc;var dc=0<jd*Ib+rd*fc+ya*Pb?1:-1,Ec=Sb*Fb+Qb*Gb+Yb*Gk,Fc=Sb*Ob+Qb*Qc+Yb*Hl,bc=Sb*Nb+Qb*ec+Yb*Zb,yc=ic*Ib+Kb*fc+$b*Pb,tg=-1,Tb,Lb,oj,ub=0;oj=Lb=Tb=0;if(0>Ec*dc){var sd,Uc,Vf,oc,lc,Jc,Df,hl,uh,cl,nc,td,Pg,Qg,ug,vh,Jd,tl,wh=Wb;sd=wh.x;Uc=wh.y;Vf=wh.z;var gd=Xb;oc=gd.x;lc=gd.y;Jc=gd.z;var ck=Rb;Df=ck.x;hl=ck.y;uh=ck.z;cl=oc-sd;nc=lc-Uc;td=Jc-Vf;Pg=Df-oc;Qg=hl-lc;ug=uh-Jc;vh=sd-Df;Jd=Uc-hl;tl=Vf-uh;var Lc,kd,ld;Lc=nc*ug-td*Qg;kd=td*Pg-cl*ug;ld=cl*Qg-nc*Pg;var Oc=sd*(nc*ld-td*kd)+Uc*(td*Lc-cl*ld)+Vf*(cl*kd-nc*Lc),Ql=oc*(Qg*ld-ug*kd)+lc*(ug*Lc-Pg*ld)+Jc*(Pg*kd-Qg*Lc),Vc=Df*(Jd*ld-tl*kd)+hl*(tl*Lc-vh*ld)+uh*(vh*kd-Jd*Lc),Wc=-1,$c,ud,cd,Sc=0;cd=ud=$c=0;if(0>Oc){var Ee,Ve,We,Kd,pj,ve,we=Wb;Ee=we.x;Ve=we.y;We=we.z;var Cc=Xb;Kd=Cc.x;pj=Cc.y;ve=Cc.z;var dl,el,fl;dl=Kd-Ee;el=pj-Ve;fl=ve-We;var vg=dl*Ee+el*Ve+fl*We,vg=-vg/(dl*dl+el*el+fl*fl),Bc;if(0>vg){var pc=k;pc.x=Ee;pc.y=Ve;pc.z=We;Bc=1}else if(1<vg){var xh=k;xh.x=Kd;xh.y=pj;xh.z=ve;Bc=2}else{var Ub,Fe,dk;Ub=Ee+dl*vg;Fe=Ve+el*vg;dk=We+fl*vg;var Hc=k;Hc.x=Ub;Hc.y=Fe;Hc.z=dk;Bc=3}var md=k.x*k.x+k.y*k.y+k.z*k.z,Sc=Bc,Wc=md,Xc=k;$c=Xc.x;ud=Xc.y;cd=Xc.z}if(0>Ql){var Kc,wc,Xe,fd,ek,yh,zh=Xb;Kc=zh.x;wc=zh.y;Xe=zh.z;var Ah=Rb;fd=Ah.x;ek=Ah.y;yh=Ah.z;var Ye,Ze,$e;Ye=fd-Kc;Ze=ek-wc;$e=yh-Xe;var $d=Ye*Kc+Ze*wc+$e*Xe,$d=-$d/(Ye*Ye+Ze*Ze+$e*$e),qj;if(0>$d){var ul=k;ul.x=Kc;ul.y=wc;ul.z=Xe;qj=1}else if(1<$d){var vl=k;vl.x=fd;vl.y=ek;vl.z=yh;qj=2}else{var ad,Ef,Ff;ad=Kc+Ye*$d;Ef=wc+Ze*$d;Ff=Xe+$e*$d;var Gf=k;Gf.x=ad;Gf.y=Ef;Gf.z=Ff;qj=3}var Il=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||Il<Wc){var Sc=qj<<1,Wc=Il,bd=k;$c=bd.x;ud=bd.y;cd=bd.z}}if(0>Vc){var Wf,Xf,af,Yf,Hf,xe,bf=Wb;Wf=bf.x;Xf=bf.y;af=bf.z;var Zf=Rb;Yf=Zf.x;Hf=Zf.y;xe=Zf.z;var $f,ag,bg;$f=Yf-Wf;ag=Hf-Xf;bg=xe-af;var Ge=$f*Wf+ag*Xf+bg*af,Ge=-Ge/($f*$f+ag*ag+bg*bg),He;if(0>Ge){var cf=k;cf.x=Wf;cf.y=Xf;cf.z=af;He=1}else if(1<Ge){var cg=k;cg.x=Yf;cg.y=Hf;cg.z=xe;He=2}else{var qf,Ie,rf;qf=Wf+$f*Ge;Ie=Xf+ag*Ge;rf=af+bg*Ge;var dg=k;dg.x=qf;dg.y=Ie;dg.z=rf;He=3}var hd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Wc||hd<Wc){var Sc=He&1|(He&2)<<1,Wc=hd,id=k;$c=id.x;ud=id.y;cd=id.z}}var wl;if(0<Wc){var xl=k;xl.x=$c;xl.y=ud;xl.z=cd;wl=Sc}else{var df=Lc*Lc+kd*kd+ld*ld;0<df&&(df=1/Math.sqrt(df));Lc*=df;kd*=df;ld*=df;var sf=Lc*Lc+kd*kd+ld*ld,sf=(sd*Lc+Uc*kd+Vf*ld)/sf;$c=Lc*sf;ud=kd*sf;cd=ld*sf;var If=k;If.x=$c;If.y=ud;If.z=cd;wl=7}var Rl=k.x*k.x+k.y*k.y+k.z*k.z,ub=wl,tg=Rl,Jf=k;Tb=Jf.x;Lb=Jf.y;oj=Jf.z}if(0>Fc*dc){var ge,ye,Kf,Rc,eg,zd,Ad,Bd,il,fg,gg,ae,he,ie,be,tf,ef,ff,gf=Wb;ge=gf.x;ye=gf.y;Kf=gf.z;var Lf=Rb;Rc=Lf.x;eg=Lf.y;zd=Lf.z;var yl=hc;Ad=yl.x;Bd=yl.y;il=yl.z;fg=Rc-ge;gg=eg-ye;ae=zd-Kf;he=Ad-Rc;ie=Bd-eg;be=il-zd;tf=ge-Ad;ef=ye-Bd;ff=Kf-il;var Td,Ld,Md;Td=gg*be-ae*ie;Ld=ae*he-fg*be;Md=fg*ie-gg*he;var Sl=ge*(gg*Md-ae*Ld)+ye*(ae*Td-fg*Md)+Kf*(fg*Ld-gg*Td),Mf=Rc*(ie*Md-be*Ld)+eg*(be*Td-he*Md)+zd*(he*Ld-ie*Td),Yd=Ad*(ef*Md-ff*Ld)+Bd*(ff*Td-tf*Md)+il*(tf*Ld-ef*Td),vd=-1,Cd,hg,Bh,ig=0;Bh=hg=Cd=0;if(0>Sl){var Zd,ce,ze,hf,jg,jf,kf=Wb;Zd=kf.x;ce=kf.y;ze=kf.z;var lf=Rb;hf=lf.x;jg=lf.y;jf=lf.z;var Ae,uf,kg;Ae=hf-Zd;uf=jg-ce;kg=jf-ze;var vf=Ae*Zd+uf*ce+kg*ze,vf=-vf/(Ae*Ae+uf*uf+kg*kg),wg;if(0>vf){var lg=k;lg.x=Zd;lg.y=ce;lg.z=ze;wg=1}else if(1<vf){var mf=k;mf.x=hf;mf.y=jg;mf.z=jf;wg=2}else{var wf,Je,xg;wf=Zd+Ae*vf;Je=ce+uf*vf;xg=ze+kg*vf;var yg=k;yg.x=wf;yg.y=Je;yg.z=xg;wg=3}var od=k.x*k.x+k.y*k.y+k.z*k.z,ig=wg,vd=od,mg=k;Cd=mg.x;hg=mg.y;Bh=mg.z}if(0>Mf){var xf,yf,Be,zg,zl,ng,og=Rb;xf=og.x;yf=og.y;Be=og.z;var pg=hc;zg=pg.x;zl=pg.y;ng=pg.z;var Nf,Ke,nf;Nf=zg-xf;Ke=zl-yf;nf=ng-Be;var zf=Nf*xf+Ke*yf+nf*Be,zf=-zf/(Nf*Nf+Ke*Ke+nf*nf),dd;if(0>zf){var wd=k;wd.x=xf;wd.y=yf;wd.z=Be;dd=1}else if(1<zf){var Fd=k;Fd.x=zg;Fd.y=zl;Fd.z=ng;dd=2}else{var nd,Rg,yd;nd=xf+Nf*zf;Rg=yf+Ke*zf;yd=Be+nf*zf;var pd=k;pd.x=nd;pd.y=Rg;pd.z=yd;dd=3}var Qd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>vd||Qd<vd){var ig=dd<<1,vd=Qd,Mc=k;Cd=Mc.x;hg=Mc.y;Bh=Mc.z}}if(0>Yd){var Yc,qd,Ch,qe,re,Dh,Eh=Wb;Yc=Eh.x;qd=Eh.y;Ch=Eh.z;var Fh=hc;qe=Fh.x;re=Fh.y;Dh=Fh.z;var Gh,Hh,Ih;Gh=qe-Yc;Hh=re-qd;Ih=Dh-Ch;var Ag=Gh*Yc+Hh*qd+Ih*Ch,Ag=-Ag/(Gh*Gh+Hh*Hh+Ih*Ih),Jh;if(0>Ag){var Kh=k;Kh.x=Yc;Kh.y=qd;Kh.z=Ch;Jh=1}else if(1<Ag){var Lh=k;Lh.x=qe;Lh.y=re;Lh.z=Dh;Jh=2}else{var rj,Sg,sj;rj=Yc+Gh*Ag;Sg=qd+Hh*Ag;sj=Ch+Ih*Ag;var se=k;se.x=rj;se.y=Sg;se.z=sj;Jh=3}var Ce=k.x*k.x+k.y*k.y+k.z*k.z;if(0>vd||Ce<vd){var ig=Jh&1|(Jh&2)<<1,vd=Ce,Wd=k;Cd=Wd.x;hg=Wd.y;Bh=Wd.z}}var Dd;if(0<vd){var te=k;te.x=Cd;te.y=hg;te.z=Bh;Dd=ig}else{var Tg=Td*Td+Ld*Ld+Md*Md;0<Tg&&(Tg=1/Math.sqrt(Tg));Td*=Tg;Ld*=Tg;Md*=Tg;var tj=Td*Td+Ld*Ld+Md*Md,tj=(ge*Td+ye*Ld+Kf*Md)/tj;Cd=Td*tj;hg=Ld*tj;Bh=Md*tj;var Ed=k;Ed.x=Cd;Ed.y=hg;Ed.z=Bh;Dd=7}var Sd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>tg||Sd<tg){var ub=Dd&1|(Dd&6)<<1,tg=Sd,Nd=k;Tb=Nd.x;Lb=Nd.y;oj=Nd.z}}if(0>bc*dc){var qg,Bg,Mh,xd,uj,Ug,Vg,Wg,Nh,Xg,Yg,Zg,$g,ah,Cg,Oh,Ph,Qh,Rh=Wb;qg=Rh.x;Bg=Rh.y;Mh=Rh.z;var Sh=Xb;xd=Sh.x;uj=Sh.y;Ug=Sh.z;var fe=hc;Vg=fe.x;Wg=fe.y;Nh=fe.z;Xg=xd-qg;Yg=uj-Bg;Zg=Ug-Mh;$g=Vg-xd;ah=Wg-uj;Cg=Nh-Ug;Oh=qg-Vg;Ph=Bg-Wg;Qh=Mh-Nh;var je,ke,le;je=Yg*Cg-Zg*ah;ke=Zg*$g-Xg*Cg;le=Xg*ah-Yg*$g;var pe=qg*(Yg*le-Zg*ke)+Bg*(Zg*je-Xg*le)+Mh*(Xg*ke-Yg*je),Qe=xd*(ah*le-Cg*ke)+uj*(Cg*je-$g*le)+Ug*($g*ke-ah*je),Le=Vg*(Ph*le-Qh*ke)+Wg*(Qh*je-Oh*le)+Nh*(Oh*ke-Ph*je),Od=-1,Ud,Th,Uh,ed=0;Uh=Th=Ud=0;if(0>pe){var Af,Of,Pf,Dg,vj,Vh,Wh=Wb;Af=Wh.x;Of=Wh.y;Pf=Wh.z;var Xh=Xb;Dg=Xh.x;vj=Xh.y;Vh=Xh.z;var Yh,Zh,$h;Yh=Dg-Af;Zh=vj-Of;$h=Vh-Pf;var Eg=Yh*Af+Zh*Of+$h*Pf,Eg=-Eg/(Yh*Yh+Zh*Zh+$h*$h),wj;if(0>Eg){var ai=k;ai.x=Af;ai.y=Of;ai.z=Pf;wj=1}else if(1<Eg){var bi=k;bi.x=Dg;bi.y=vj;bi.z=Vh;wj=2}else{var xj,bh,fk;xj=Af+Yh*Eg;bh=Of+Zh*Eg;fk=Pf+$h*Eg;var gk=k;gk.x=xj;gk.y=bh;gk.z=fk;wj=3}var Te=k.x*k.x+k.y*k.y+k.z*k.z,ed=wj,Od=Te,ee=k;Ud=ee.x;Th=ee.y;Uh=ee.z}if(0>Qe){var yj,zj,ci,Gd,hk,di,ei=Xb;yj=ei.x;zj=ei.y;ci=ei.z;var fi=hc;Gd=fi.x;hk=fi.y;di=fi.z;var gi,hi,ii;gi=Gd-yj;hi=hk-zj;ii=di-ci;var Fg=gi*yj+hi*zj+ii*ci,Fg=-Fg/(gi*gi+hi*hi+ii*ii),Aj;if(0>Fg){var ji=k;ji.x=yj;ji.y=zj;ji.z=ci;Aj=1}else if(1<Fg){var ki=k;ki.x=Gd;ki.y=hk;ki.z=di;Aj=2}else{var Bj,ch,ik;Bj=yj+gi*Fg;ch=zj+hi*Fg;ik=ci+ii*Fg;var jk=k;jk.x=Bj;jk.y=ch;jk.z=ik;Aj=3}var Hd=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||Hd<Od){var ed=Aj<<1,Od=Hd,Hk=k;Ud=Hk.x;Th=Hk.y;Uh=Hk.z}}if(0>Le){var Cj,Dj,li,Ik,kk,mi,ni=Wb;Cj=ni.x;Dj=ni.y;li=ni.z;var oi=hc;Ik=oi.x;kk=oi.y;mi=oi.z;var pi,qi,ri;pi=Ik-Cj;qi=kk-Dj;ri=mi-li;var Gg=pi*Cj+qi*Dj+ri*li,Gg=-Gg/(pi*pi+qi*qi+ri*ri),si;if(0>Gg){var ti=k;ti.x=Cj;ti.y=Dj;ti.z=li;si=1}else if(1<Gg){var ui=k;ui.x=Ik;ui.y=kk;ui.z=mi;si=2}else{var Ej,dh,Fj;Ej=Cj+pi*Gg;dh=Dj+qi*Gg;Fj=li+ri*Gg;var lk=k;lk.x=Ej;lk.y=dh;lk.z=Fj;si=3}var Jk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Od||Jk<Od){var ed=si&1|(si&2)<<1,Od=Jk,Kk=k;Ud=Kk.x;Th=Kk.y;Uh=Kk.z}}var mk;if(0<Od){var Lk=k;Lk.x=Ud;Lk.y=Th;Lk.z=Uh;mk=ed}else{var eh=je*je+ke*ke+le*le;0<eh&&(eh=1/Math.sqrt(eh));je*=eh;ke*=eh;le*=eh;var Gj=je*je+ke*ke+le*le,Gj=(qg*je+Bg*ke+Mh*le)/Gj;Ud=je*Gj;Th=ke*Gj;Uh=le*Gj;var nk=k;nk.x=Ud;nk.y=Th;nk.z=Uh;mk=7}var ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>tg||ok<tg){var ub=mk&3|(mk&4)<<1,tg=ok,pk=k;Tb=pk.x;Lb=pk.y;oj=pk.z}}if(0>yc*dc){var rg,Hg,vi,qk,Hj,fh,gh,hh,wi,ih,jh,kh,lh,mh,Ig,xi,yi,zi,Ai=Xb;rg=Ai.x;Hg=Ai.y;vi=Ai.z;var Bi=Rb;qk=Bi.x;Hj=Bi.y;fh=Bi.z;var rk=hc;gh=rk.x;hh=rk.y;wi=rk.z;ih=qk-rg;jh=Hj-Hg;kh=fh-vi;lh=gh-qk;mh=hh-Hj;Ig=wi-fh;xi=rg-gh;yi=Hg-hh;zi=vi-wi;var me,ne,oe;me=jh*Ig-kh*mh;ne=kh*lh-ih*Ig;oe=ih*mh-jh*lh;var Ne=rg*(jh*oe-kh*ne)+Hg*(kh*me-ih*oe)+vi*(ih*ne-jh*me),Oe=qk*(mh*oe-Ig*ne)+Hj*(Ig*me-lh*oe)+fh*(lh*ne-mh*me),Me=gh*(yi*oe-zi*ne)+hh*(zi*me-xi*oe)+wi*(xi*ne-yi*me),Pd=-1,Vd,Ci,Di,Mk=0;Di=Ci=Vd=0;if(0>Ne){var Bf,Qf,Rf,Jg,Ij,Ei,Fi=Xb;Bf=Fi.x;Qf=Fi.y;Rf=Fi.z;var Gi=Rb;Jg=Gi.x;Ij=Gi.y;Ei=Gi.z;var Hi,Ii,Ji;Hi=Jg-Bf;Ii=Ij-Qf;Ji=Ei-Rf;var Kg=Hi*Bf+Ii*Qf+Ji*Rf,Kg=-Kg/(Hi*Hi+Ii*Ii+Ji*Ji),Jj;if(0>Kg){var Ki=k;Ki.x=Bf;Ki.y=Qf;Ki.z=Rf;Jj=1}else if(1<Kg){var Li=k;Li.x=Jg;Li.y=Ij;Li.z=Ei;Jj=2}else{var Kj,nh,sk;Kj=Bf+Hi*Kg;nh=Qf+Ii*Kg;sk=Rf+Ji*Kg;var tk=k;tk.x=Kj;tk.y=nh;tk.z=sk;Jj=3}var Pe=k.x*k.x+k.y*k.y+k.z*k.z,Mk=Jj,Pd=Pe,Nk=k;Vd=Nk.x;Ci=Nk.y;Di=Nk.z}if(0>Oe){var Lj,Mj,Mi,Rd,uk,Ni,Oi=Rb;Lj=Oi.x;Mj=Oi.y;Mi=Oi.z;var Pi=hc;Rd=Pi.x;uk=Pi.y;Ni=Pi.z;var Qi,Ri,Si;Qi=Rd-Lj;Ri=uk-Mj;Si=Ni-Mi;var Lg=Qi*Lj+Ri*Mj+Si*Mi,Lg=-Lg/(Qi*Qi+Ri*Ri+Si*Si),Nj;if(0>Lg){var Ti=k;Ti.x=Lj;Ti.y=Mj;Ti.z=Mi;Nj=1}else if(1<Lg){var Ui=k;Ui.x=Rd;Ui.y=uk;Ui.z=Ni;Nj=2}else{var Oj,oh,vk;Oj=Lj+Qi*Lg;oh=Mj+Ri*Lg;vk=Mi+Si*Lg;var wk=k;wk.x=Oj;wk.y=oh;wk.z=vk;Nj=3}var Ok=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Ok<Pd){var Mk=Nj<<1,Pd=Ok,Pk=k;Vd=Pk.x;Ci=Pk.y;Di=Pk.z}}if(0>Me){var Pj,Qj,Vi,Qk,xk,Wi,Xi=Xb;Pj=Xi.x;Qj=Xi.y;Vi=Xi.z;var Yi=hc;Qk=Yi.x;xk=Yi.y;Wi=Yi.z;var Zi,$i,aj;Zi=Qk-Pj;$i=xk-Qj;aj=Wi-Vi;var Mg=Zi*Pj+$i*Qj+aj*Vi,Mg=-Mg/(Zi*Zi+$i*$i+aj*aj),bj;if(0>Mg){var cj=k;cj.x=Pj;cj.y=Qj;cj.z=Vi;bj=1}else if(1<Mg){var dj=k;dj.x=Qk;dj.y=xk;dj.z=Wi;bj=2}else{var Rj,ph,Sj;Rj=Pj+Zi*Mg;ph=Qj+$i*Mg;Sj=Vi+aj*Mg;var yk=k;yk.x=Rj;yk.y=ph;yk.z=Sj;bj=3}var Rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Pd||Rk<Pd){var Mk=bj&1|(bj&2)<<1,Pd=Rk,Sk=k;Vd=Sk.x;Ci=Sk.y;Di=Sk.z}}var Tk;if(0<Pd){var Uk=k;Uk.x=Vd;Uk.y=Ci;Uk.z=Di;Tk=Mk}else{var qh=me*me+ne*ne+oe*oe;0<qh&&(qh=1/Math.sqrt(qh));me*=qh;ne*=qh;oe*=qh;var Tj=me*me+ne*ne+oe*oe,Tj=(rg*me+Hg*ne+vi*oe)/Tj;Vd=me*Tj;Ci=ne*Tj;Di=oe*Tj;var zk=k;zk.x=Vd;zk.y=Ci;zk.z=Di;Tk=7}var Vk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>tg||Vk<tg){var ub=Tk<<1,tg=Vk,Ak=k;Tb=Ak.x;Lb=Ak.y;oj=Ak.z}}if(0<tg){var rh=k;rh.x=Tb;rh.y=Lb;rh.z=oj;D=ub}else k.Z(),D=15}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.za){case 1:this.En();break;case 2:this.ml();break;case 3:this.tl()}if(4==this.za){var Uj=this.Zm(a,b,e,d,h,l,g);if(0!=Uj)return this.distance=0,Uj;this.distance=-this.depth;return 0}this.distance=0;return 1}this.zm(D);m.x=k.x;m.y=k.y;m.z=k.z;var sh=m,Re=-sh.y,pf=-sh.z;sh.x=-sh.x;sh.y=Re;sh.z=pf;this.pf(!1);this.qf(!1);var Vj=this.Pa[this.za],Wj=this.hb[this.za];Vj.x=Wj.x;Vj.y=Wj.y;Vj.z=Wj.z;var de=Vj,th=this.pb[this.za],ue=de.y-th.y,Se=de.z-th.z;de.x=de.x-th.x;de.y=ue;de.z=Se;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var Xj=h[this.za];if(1E-8>Xj.x*m.x+Xj.y*m.y+Xj.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.im(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=c&&null!=c.Yh&&this.In(c.Yh),0;this.za++;++u}return 2},Vl:function(a,b,e,d,c,f,h){this.hj=a;this.Sk=b;this.pc=e;this.Gc=d;var l=this.Pa,g=this.closest,k=this.dir,m,n,q;m=d.v-e.v;n=d.A-e.A;q=d.B-e.B;k.x=m;k.y=n;k.z=q;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.Aa(1,0,0);this.za=0;if(null!=this.hj)this.pf(!0);else{var p=this.hb[this.za];p.x=this.pc.v;p.y=this.pc.A;p.z=this.pc.B}this.qf(!0);var r=this.Pa[this.za],v=this.hb[this.za];r.x=v.x;r.y=v.y;r.z=v.z;var aa=this.pb[this.za],w=r.y-aa.y,B=r.z-aa.z;r.x=r.x-aa.x;r.y=w;r.z=B;this.za=1;var u=0,D=0,t=this.Gn,A=this.Fn;t.Z();A.x=f.x;A.y=f.y;A.z=f.z;var E=A.y-c.y,x=A.z-c.z;A.x=A.x-c.x;A.y=E;for(A.z=x;40>u;){var Ab=0;switch(this.za){case 1:var N=l[0];g.x=N.x;g.y=N.y;g.z=N.z;Ab=1;break;case 2:var I,F,C,O,ga,L,Vb=l[0];I=Vb.x;F=Vb.y;C=Vb.z;var M=l[1];O=M.x;ga=M.y;L=M.z;var ka,Va,U;ka=O-I;Va=ga-F;U=L-C;var R=ka*I+Va*F+U*C,R=-R/(ka*ka+Va*Va+U*U);if(0>R){var cc=g;cc.x=I;cc.y=F;cc.z=C;Ab=1}else if(1<R){var Ma=g;Ma.x=O;Ma.y=ga;Ma.z=L;Ab=2}else{var Qa,vc,Oa;Qa=I+ka*R;vc=F+Va*R;Oa=C+U*R;var Ba=g;Ba.x=Qa;Ba.y=vc;Ba.z=Oa;Ab=3}break;case 3:var Bb=l[0],H=l[1],Pa=l[2],ba,Q,P,wa,ta,W,oa,y,Ga,ca,Ca,xa,Da,Ra,la,Z,Ea,ra,va=Bb;ba=va.x;Q=va.y;P=va.z;var J=H;wa=J.x;ta=J.y;W=J.z;var Ka=Pa;oa=Ka.x;y=Ka.y;Ga=Ka.z;ca=wa-ba;Ca=ta-Q;xa=W-P;Da=oa-wa;Ra=y-ta;la=Ga-W;Z=ba-oa;Ea=Q-y;ra=P-Ga;var Xa,S,Ya;Xa=Ca*la-xa*Ra;S=xa*Da-ca*la;Ya=ca*Ra-Ca*Da;var T=ba*(Ca*Ya-xa*S)+Q*(xa*Xa-ca*Ya)+P*(ca*S-Ca*Xa),K=wa*(Ra*Ya-la*S)+ta*(la*Xa-Da*Ya)+W*(Da*S-Ra*Xa),ia=oa*(Ea*Ya-ra*S)+y*(ra*Xa-Z*Ya)+Ga*(Z*S-Ea*Xa),gb=-1,da,Ic,sa,fb=0;sa=Ic=da=0;if(0>T){var jb,Za,ma,na,Ia,Fa,nb=Bb;jb=nb.x;Za=nb.y;ma=nb.z;var fa=H;na=fa.x;Ia=fa.y;Fa=fa.z;var ea,ja,cb;ea=na-jb;ja=Ia-Za;cb=Fa-ma;var za=ea*jb+ja*Za+cb*ma,za=-za/(ea*ea+ja*ja+cb*cb),tb;if(0>za){var Ta=g;Ta.x=jb;Ta.y=Za;Ta.z=ma;tb=1}else if(1<za){var qb=g;qb.x=na;qb.y=Ia;qb.z=Fa;tb=2}else{var rb,vb,Wa;rb=jb+ea*za;vb=Za+ja*za;Wa=ma+cb*za;var yb=g;yb.x=rb;yb.y=vb;yb.z=Wa;tb=3}var rc=g.x*g.x+g.y*g.y+g.z*g.z,fb=tb,gb=rc,$a=g;da=$a.x;Ic=$a.y;sa=$a.z}if(0>K){var ua,Jb,G,ob,db,qc,ab=H;ua=ab.x;Jb=ab.y;G=ab.z;var hb=Pa;ob=hb.x;db=hb.y;qc=hb.z;var z,Db,Xd;z=ob-ua;Db=db-Jb;Xd=qc-G;var Tc=z*ua+Db*Jb+Xd*G,Tc=-Tc/(z*z+Db*Db+Xd*Xd),Eb;if(0>Tc){var Na=g;Na.x=ua;Na.y=Jb;Na.z=G;Eb=1}else if(1<Tc){var mb=g;mb.x=ob;mb.y=db;mb.z=qc;Eb=2}else{var xb,zb,eb;xb=ua+z*Tc;zb=Jb+Db*Tc;eb=G+Xd*Tc;var Y=g;Y.x=xb;Y.y=zb;Y.z=eb;Eb=3}var La=g.x*g.x+g.y*g.y+g.z*g.z;if(0>gb||La<gb){var fb=Eb<<1,gb=La,kb=g;da=kb.x;Ic=kb.y;sa=kb.z}}if(0>ia){var Sa,ib,Ja,Hb,ha,X,Cb=Bb;Sa=Cb.x;ib=Cb.y;Ja=Cb.z;var Dc=Pa;Hb=Dc.x;ha=Dc.y;X=Dc.z;var Pc,qa,gc;Pc=Hb-Sa;qa=ha-ib;gc=X-Ja;var Nc=Pc*Sa+qa*ib+gc*Ja,Nc=-Nc/(Pc*Pc+qa*qa+gc*gc),Ha;if(0>Nc){var bk=g;bk.x=Sa;bk.y=ib;bk.z=Ja;Ha=1}else if(1<Nc){var zc=g;zc.x=Hb;zc.y=ha;zc.z=X;Ha=2}else{var pa,jc,tc;pa=Sa+Pc*Nc;jc=ib+qa*Nc;tc=Ja+gc*Nc;var kc=g;kc.x=pa;kc.y=jc;kc.z=tc;Ha=3}var ac=g.x*g.x+g.y*g.y+g.z*g.z;if(0>gb||ac<gb){var fb=Ha&1|(Ha&2)<<1,gb=ac,Wb=g;da=Wb.x;Ic=Wb.y;sa=Wb.z}}if(0<gb){var Xb=g;Xb.x=da;Xb.y=Ic;Xb.z=sa;Ab=fb}else{var Rb=Xa*Xa+S*S+Ya*Ya;0<Rb&&(Rb=1/Math.sqrt(Rb));Xa*=Rb;S*=Rb;Ya*=Rb;var hc=Xa*Xa+S*S+Ya*Ya,hc=(ba*Xa+Q*S+P*Ya)/hc;da=Xa*hc;Ic=S*hc;sa=Ya*hc;var Sb=g;Sb.x=da;Sb.y=Ic;Sb.z=sa;Ab=7}break;case 4:var Qb=l[0],Yb=l[1],ic=l[2],Kb=l[3],$b,lb,ya,Aa,bb,uc,mc,jd,rd,sb,sc,xc,Mb,Uf,pb,Zc,Gc,wb,Ue,Ua,Id,Og,Fb,Gb,Ob,Ac,Nb,ec=Qb;$b=ec.x;lb=ec.y;ya=ec.z;var Gk=Yb;Aa=Gk.x;bb=Gk.y;uc=Gk.z;var Zb=ic;mc=Zb.x;jd=Zb.y;rd=Zb.z;var Qc=Kb;sb=Qc.x;sc=Qc.y;xc=Qc.z;Mb=Aa-$b;Uf=bb-lb;pb=uc-ya;Zc=mc-$b;Gc=jd-lb;wb=rd-ya;Ue=sb-$b;Ua=sc-lb;Id=xc-ya;Og=mc-Aa;Fb=jd-bb;Gb=rd-uc;Ob=sb-Aa;Ac=sc-bb;Nb=xc-uc;var Ib,fc,dc,Tb,Lb,Pb,ub,Ec,Fc,oc,lc,bc;Ib=Uf*wb-pb*Gc;fc=pb*Zc-Mb*wb;dc=Mb*Gc-Uf*Zc;Tb=Gc*Id-wb*Ua;Lb=wb*Ue-Zc*Id;Pb=Zc*Ua-Gc*Ue;ub=Ua*pb-Id*Uf;Ec=Id*Mb-Ue*pb;Fc=Ue*Uf-Ua*Mb;oc=Ac*Gb-Nb*Fb;lc=Nb*Og-Ob*Gb;bc=Ob*Fb-Ac*Og;var nc=0<Mb*oc+Uf*lc+pb*bc?1:-1,yc=$b*Ib+lb*fc+ya*dc,Jc=$b*Tb+lb*Lb+ya*Pb,oj=$b*ub+lb*Ec+ya*Fc,gd=Aa*oc+bb*lc+uc*bc,sd=-1,Uc,Vf,Bc,Cc=0;Bc=Vf=Uc=0;if(0>yc*nc){var pc,Df,Kc,uh,wc,Hc,td,Pg,Qg,ug,vh,Jd,Ub,wh,Oc,ck,Lc,kd,ld=Qb;pc=ld.x;Df=ld.y;Kc=ld.z;var Xc=Yb;uh=Xc.x;wc=Xc.y;Hc=Xc.z;var md=ic;td=md.x;Pg=md.y;Qg=md.z;ug=uh-pc;vh=wc-Df;Jd=Hc-Kc;Ub=td-uh;wh=Pg-wc;Oc=Qg-Hc;ck=pc-td;Lc=Df-Pg;kd=Kc-Qg;var Vc,Wc,$c;Vc=vh*Oc-Jd*wh;Wc=Jd*Ub-ug*Oc;$c=ug*wh-vh*Ub;var ud=pc*(vh*$c-Jd*Wc)+Df*(Jd*Vc-ug*$c)+Kc*(ug*Wc-vh*Vc),cd=uh*(wh*$c-Oc*Wc)+wc*(Oc*Vc-Ub*$c)+Hc*(Ub*Wc-wh*Vc),Sc=td*(Lc*$c-kd*Wc)+Pg*(kd*Vc-ck*$c)+Qg*(ck*Wc-Lc*Vc),Ee=-1,Ve,We,Kd,pj=0;Kd=We=Ve=0;if(0>ud){var ve,we,Rc,fd,bd,id,vg=Qb;ve=vg.x;we=vg.y;Rc=vg.z;var dd=Yb;fd=dd.x;bd=dd.y;id=dd.z;var Yc,xh,ad;Yc=fd-ve;xh=bd-we;ad=id-Rc;var Fe=Yc*ve+xh*we+ad*Rc,Fe=-Fe/(Yc*Yc+xh*xh+ad*ad),dk;if(0>Fe){var hd=g;hd.x=ve;hd.y=we;hd.z=Rc;dk=1}else if(1<Fe){var qd=g;qd.x=fd;qd.y=bd;qd.z=id;dk=2}else{var wd,Fd,pd;wd=ve+Yc*Fe;Fd=we+xh*Fe;pd=Rc+ad*Fe;var Xe=g;Xe.x=wd;Xe.y=Fd;Xe.z=pd;dk=3}var Dd=g.x*g.x+g.y*g.y+g.z*g.z,pj=dk,Ee=Dd,ek=g;Ve=ek.x;We=ek.y;Kd=ek.z}if(0>cd){var yh,zh,Ah,Ye,Ze,$e,$d=Yb;yh=$d.x;zh=$d.y;Ah=$d.z;var qj=ic;Ye=qj.x;Ze=qj.y;$e=qj.z;var Mc,nd,od;Mc=Ye-yh;nd=Ze-zh;od=$e-Ah;var Ef=Mc*yh+nd*zh+od*Ah,Ef=-Ef/(Mc*Mc+nd*nd+od*od),Ff;if(0>Ef){var Gf=g;Gf.x=yh;Gf.y=zh;Gf.z=Ah;Ff=1}else if(1<Ef){var xd=g;xd.x=Ye;xd.y=Ze;xd.z=$e;Ff=2}else{var yd,Wf,Xf;yd=yh+Mc*Ef;Wf=zh+nd*Ef;Xf=Ah+od*Ef;var af=g;af.x=yd;af.y=Wf;af.z=Xf;Ff=3}var Yf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||Yf<Ee){var pj=Ff<<1,Ee=Yf,Hf=g;Ve=Hf.x;We=Hf.y;Kd=Hf.z}}if(0>Sc){var xe,bf,Zf,$f,ag,bg,Ge=Qb;xe=Ge.x;bf=Ge.y;Zf=Ge.z;var He=ic;$f=He.x;ag=He.y;bg=He.z;var cf,cg,qf;cf=$f-xe;cg=ag-bf;qf=bg-Zf;var Ie=cf*xe+cg*bf+qf*Zf,Ie=-Ie/(cf*cf+cg*cg+qf*qf),rf;if(0>Ie){var dg=g;dg.x=xe;dg.y=bf;dg.z=Zf;rf=1}else if(1<Ie){var Qd=g;Qd.x=$f;Qd.y=ag;Qd.z=bg;rf=2}else{var qe,re,se;qe=xe+cf*Ie;re=bf+cg*Ie;se=Zf+qf*Ie;var df=g;df.x=qe;df.y=re;df.z=se;rf=3}var sf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Ee||sf<Ee){var pj=rf&1|(rf&2)<<1,Ee=sf,If=g;Ve=If.x;We=If.y;Kd=If.z}}var Wd;if(0<Ee){var Jf=g;Jf.x=Ve;Jf.y=We;Jf.z=Kd;Wd=pj}else{var ge=Vc*Vc+Wc*Wc+$c*$c;0<ge&&(ge=1/Math.sqrt(ge));Vc*=ge;Wc*=ge;$c*=ge;var ye=Vc*Vc+Wc*Wc+$c*$c,ye=(pc*Vc+Df*Wc+Kc*$c)/ye;Ve=Vc*ye;We=Wc*ye;Kd=$c*ye;var Kf=g;Kf.x=Ve;Kf.y=We;Kf.z=Kd;Wd=7}var te=g.x*g.x+g.y*g.y+g.z*g.z,Cc=Wd,sd=te,eg=g;Uc=eg.x;Vf=eg.y;Bc=eg.z}if(0>Jc*nc){var zd,Ad,Bd,ed,fg,gg,ae,he,ie,be,tf,ef,ff,gf,Lf,Ed,Td,Ld,Md=Qb;zd=Md.x;Ad=Md.y;Bd=Md.z;var Nd=ic;ed=Nd.x;fg=Nd.y;gg=Nd.z;var Mf=Kb;ae=Mf.x;he=Mf.y;ie=Mf.z;be=ed-zd;tf=fg-Ad;ef=gg-Bd;ff=ae-ed;gf=he-fg;Lf=ie-gg;Ed=zd-ae;Td=Ad-he;Ld=Bd-ie;var Yd,vd,Cd;Yd=tf*Lf-ef*gf;vd=ef*ff-be*Lf;Cd=be*gf-tf*ff;var hg=zd*(tf*Cd-ef*vd)+Ad*(ef*Yd-be*Cd)+Bd*(be*vd-tf*Yd),fe=ed*(gf*Cd-Lf*vd)+fg*(Lf*Yd-ff*Cd)+gg*(ff*vd-gf*Yd),ig=ae*(Td*Cd-Ld*vd)+he*(Ld*Yd-Ed*Cd)+ie*(Ed*vd-Td*Yd),Zd=-1,ce,ze,hf,jg=0;hf=ze=ce=0;if(0>hg){var jf,kf,lf,Ae,uf,kg,vf=Qb;jf=vf.x;kf=vf.y;lf=vf.z;var wg=ic;Ae=wg.x;uf=wg.y;kg=wg.z;var lg,mf,wf;lg=Ae-jf;mf=uf-kf;wf=kg-lf;var Je=lg*jf+mf*kf+wf*lf,Je=-Je/(lg*lg+mf*mf+wf*wf),xg;if(0>Je){var yg=g;yg.x=jf;yg.y=kf;yg.z=lf;xg=1}else if(1<Je){var Ce=g;Ce.x=Ae;Ce.y=uf;Ce.z=kg;xg=2}else{var mg,xf,yf;mg=jf+lg*Je;xf=kf+mf*Je;yf=lf+wf*Je;var Be=g;Be.x=mg;Be.y=xf;Be.z=yf;xg=3}var zg=g.x*g.x+g.y*g.y+g.z*g.z,jg=xg,Zd=zg,Sd=g;ce=Sd.x;ze=Sd.y;hf=Sd.z}if(0>fe){var ng,og,pg,Nf,Ke,nf,zf=ic;ng=zf.x;og=zf.y;pg=zf.z;var ee=Kb;Nf=ee.x;Ke=ee.y;nf=ee.z;var Gd,Rd,Hd;Gd=Nf-ng;Rd=Ke-og;Hd=nf-pg;var Rg=Gd*ng+Rd*og+Hd*pg,Rg=-Rg/(Gd*Gd+Rd*Rd+Hd*Hd),pe;if(0>Rg){var Qe=g;Qe.x=ng;Qe.y=og;Qe.z=pg;pe=1}else if(1<Rg){var Te=g;Te.x=Nf;Te.y=Ke;Te.z=nf;pe=2}else{var Ne,Oe,Pe;Ne=ng+Gd*Rg;Oe=og+Rd*Rg;Pe=pg+Hd*Rg;var Ch=g;Ch.x=Ne;Ch.y=Oe;Ch.z=Pe;pe=3}var Re=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zd||Re<Zd){var jg=pe<<1,Zd=Re,pf=g;ce=pf.x;ze=pf.y;hf=pf.z}}if(0>ig){var Dh,Eh,Fh,Gh,Hh,Ih,Ag=Qb;Dh=Ag.x;Eh=Ag.y;Fh=Ag.z;var Jh=Kb;Gh=Jh.x;Hh=Jh.y;Ih=Jh.z;var Kh,Lh,rj;Kh=Gh-Dh;Lh=Hh-Eh;rj=Ih-Fh;var Sg=Kh*Dh+Lh*Eh+rj*Fh,Sg=-Sg/(Kh*Kh+Lh*Lh+rj*rj),sj;if(0>Sg){var ue=g;ue.x=Dh;ue.y=Eh;ue.z=Fh;sj=1}else if(1<Sg){var Se=g;Se.x=Gh;Se.y=Hh;Se.z=Ih;sj=2}else{var jj,lj,nj;jj=Dh+Kh*Sg;lj=Eh+Lh*Sg;nj=Fh+rj*Sg;var Tg=g;Tg.x=jj;Tg.y=lj;Tg.z=nj;sj=3}var tj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zd||tj<Zd){var jg=sj&1|(sj&2)<<1,Zd=tj,Cf=g;ce=Cf.x;ze=Cf.y;hf=Cf.z}}var De;if(0<Zd){var Ng=g;Ng.x=ce;Ng.y=ze;Ng.z=hf;De=jg}else{var qg=Yd*Yd+vd*vd+Cd*Cd;0<qg&&(qg=1/Math.sqrt(qg));Yd*=qg;vd*=qg;Cd*=qg;var Bg=Yd*Yd+vd*vd+Cd*Cd,Bg=(zd*Yd+Ad*vd+Bd*Cd)/Bg;ce=Yd*Bg;ze=vd*Bg;hf=Cd*Bg;var Mh=g;Mh.x=ce;Mh.y=ze;Mh.z=hf;De=7}var Yj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>sd||Yj<sd){var Cc=De&1|(De&6)<<1,sd=Yj,uj=g;Uc=uj.x;Vf=uj.y;Bc=uj.z}}if(0>oj*nc){var Ug,Vg,Wg,Nh,Xg,Yg,Zg,$g,ah,Cg,Oh,Ph,Qh,Rh,Sh,Sf,je,ke,le=Qb;Ug=le.x;Vg=le.y;Wg=le.z;var of=Yb;Nh=of.x;Xg=of.y;Yg=of.z;var Tf=Kb;Zg=Tf.x;$g=Tf.y;ah=Tf.z;Cg=Nh-Ug;Oh=Xg-Vg;Ph=Yg-Wg;Qh=Zg-Nh;Rh=$g-Xg;Sh=ah-Yg;Sf=Ug-Zg;je=Vg-$g;ke=Wg-ah;var Le,Od,Ud;Le=Oh*Sh-Ph*Rh;Od=Ph*Qh-Cg*Sh;Ud=Cg*Rh-Oh*Qh;var Th=Ug*(Oh*Ud-Ph*Od)+Vg*(Ph*Le-Cg*Ud)+Wg*(Cg*Od-Oh*Le),Uh=Nh*(Rh*Ud-Sh*Od)+Xg*(Sh*Le-Qh*Ud)+Yg*(Qh*Od-Rh*Le),Bk=Zg*(je*Ud-ke*Od)+$g*(ke*Le-Sf*Ud)+ah*(Sf*Od-je*Le),Af=-1,Of,Pf,Dg,vj=0;Dg=Pf=Of=0;if(0>Th){var Vh,Wh,Xh,Yh,Zh,$h,Eg=Qb;Vh=Eg.x;Wh=Eg.y;Xh=Eg.z;var wj=Yb;Yh=wj.x;Zh=wj.y;$h=wj.z;var ai,bi,xj;ai=Yh-Vh;bi=Zh-Wh;xj=$h-Xh;var bh=ai*Vh+bi*Wh+xj*Xh,bh=-bh/(ai*ai+bi*bi+xj*xj),fk;if(0>bh){var gk=g;gk.x=Vh;gk.y=Wh;gk.z=Xh;fk=1}else if(1<bh){var sg=g;sg.x=Yh;sg.y=Zh;sg.z=$h;fk=2}else{var Zj,yj,zj;Zj=Vh+ai*bh;yj=Wh+bi*bh;zj=Xh+xj*bh;var ci=g;ci.x=Zj;ci.y=yj;ci.z=zj;fk=3}var Ck=g.x*g.x+g.y*g.y+g.z*g.z,vj=fk,Af=Ck,hk=g;Of=hk.x;Pf=hk.y;Dg=hk.z}if(0>Uh){var di,ei,fi,gi,hi,ii,Fg=Yb;di=Fg.x;ei=Fg.y;fi=Fg.z;var Aj=Kb;gi=Aj.x;hi=Aj.y;ii=Aj.z;var ji,ki,Bj;ji=gi-di;ki=hi-ei;Bj=ii-fi;var ch=ji*di+ki*ei+Bj*fi,ch=-ch/(ji*ji+ki*ki+Bj*Bj),ik;if(0>ch){var jk=g;jk.x=di;jk.y=ei;jk.z=fi;ik=1}else if(1<ch){var fj=g;fj.x=gi;fj.y=hi;fj.z=ii;ik=2}else{var Hk,Cj,Dj;Hk=di+ji*ch;Cj=ei+ki*ch;Dj=fi+Bj*ch;var li=g;li.x=Hk;li.y=Cj;li.z=Dj;ik=3}var Ik=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Ik<Af){var vj=ik<<1,Af=Ik,kk=g;Of=kk.x;Pf=kk.y;Dg=kk.z}}if(0>Bk){var mi,ni,oi,pi,qi,ri,Gg=Qb;mi=Gg.x;ni=Gg.y;oi=Gg.z;var si=Kb;pi=si.x;qi=si.y;ri=si.z;var ti,ui,Ej;ti=pi-mi;ui=qi-ni;Ej=ri-oi;var dh=ti*mi+ui*ni+Ej*oi,dh=-dh/(ti*ti+ui*ui+Ej*Ej),Fj;if(0>dh){var lk=g;lk.x=mi;lk.y=ni;lk.z=oi;Fj=1}else if(1<dh){var Jk=g;Jk.x=pi;Jk.y=qi;Jk.z=ri;Fj=2}else{var Kk,mk,Lk;Kk=mi+ti*dh;mk=ni+ui*dh;Lk=oi+Ej*dh;var eh=g;eh.x=Kk;eh.y=mk;eh.z=Lk;Fj=3}var Gj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Af||Gj<Af){var vj=Fj&1|(Fj&2)<<1,Af=Gj,nk=g;Of=nk.x;Pf=nk.y;Dg=nk.z}}var ok;if(0<Af){var pk=g;pk.x=Of;pk.y=Pf;pk.z=Dg;ok=vj}else{var rg=Le*Le+Od*Od+Ud*Ud;0<rg&&(rg=1/Math.sqrt(rg));Le*=rg;Od*=rg;Ud*=rg;var Hg=Le*Le+Od*Od+Ud*Ud,Hg=(Ug*Le+Vg*Od+Wg*Ud)/Hg;Of=Le*Hg;Pf=Od*Hg;Dg=Ud*Hg;var vi=g;vi.x=Of;vi.y=Pf;vi.z=Dg;ok=7}var qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>sd||qk<sd){var Cc=ok&3|(ok&4)<<1,sd=qk,Hj=g;Uc=Hj.x;Vf=Hj.y;Bc=Hj.z}}if(0>gd*nc){var fh,gh,hh,wi,ih,jh,kh,lh,mh,Ig,xi,yi,zi,Ai,Bi,rk,me,ne,oe=Yb;fh=oe.x;gh=oe.y;hh=oe.z;var gj=ic;wi=gj.x;ih=gj.y;jh=gj.z;var hj=Kb;kh=hj.x;lh=hj.y;mh=hj.z;Ig=wi-fh;xi=ih-gh;yi=jh-hh;zi=kh-wi;Ai=lh-ih;Bi=mh-jh;rk=fh-kh;me=gh-lh;ne=hh-mh;var Me,Pd,Vd;Me=xi*Bi-yi*Ai;Pd=yi*zi-Ig*Bi;Vd=Ig*Ai-xi*zi;var Ci=fh*(xi*Vd-yi*Pd)+gh*(yi*Me-Ig*Vd)+hh*(Ig*Pd-xi*Me),Di=wi*(Ai*Vd-Bi*Pd)+ih*(Bi*Me-zi*Vd)+jh*(zi*Pd-Ai*Me),Mk=kh*(me*Vd-ne*Pd)+lh*(ne*Me-rk*Vd)+mh*(rk*Pd-me*Me),Bf=-1,Qf,Rf,Jg,Ij=0;Jg=Rf=Qf=0;if(0>Ci){var Ei,Fi,Gi,Hi,Ii,Ji,Kg=Yb;Ei=Kg.x;Fi=Kg.y;Gi=Kg.z;var Jj=ic;Hi=Jj.x;Ii=Jj.y;Ji=Jj.z;var Ki,Li,Kj;Ki=Hi-Ei;Li=Ii-Fi;Kj=Ji-Gi;var nh=Ki*Ei+Li*Fi+Kj*Gi,nh=-nh/(Ki*Ki+Li*Li+Kj*Kj),sk;if(0>nh){var tk=g;tk.x=Ei;tk.y=Fi;tk.z=Gi;sk=1}else if(1<nh){var ij=g;ij.x=Hi;ij.y=Ii;ij.z=Ji;sk=2}else{var Nk,Lj,Mj;Nk=Ei+Ki*nh;Lj=Fi+Li*nh;Mj=Gi+Kj*nh;var Mi=g;Mi.x=Nk;Mi.y=Lj;Mi.z=Mj;sk=3}var Dk=g.x*g.x+g.y*g.y+g.z*g.z,Ij=sk,Bf=Dk,uk=g;Qf=uk.x;Rf=uk.y;Jg=uk.z}if(0>Di){var Ni,Oi,Pi,Qi,Ri,Si,Lg=ic;Ni=Lg.x;Oi=Lg.y;Pi=Lg.z;var Nj=Kb;Qi=Nj.x;Ri=Nj.y;Si=Nj.z;var Ti,Ui,Oj;Ti=Qi-Ni;Ui=Ri-Oi;Oj=Si-Pi;var oh=Ti*Ni+Ui*Oi+Oj*Pi,oh=-oh/(Ti*Ti+Ui*Ui+Oj*Oj),vk;if(0>oh){var wk=g;wk.x=Ni;wk.y=Oi;wk.z=Pi;vk=1}else if(1<oh){var Ok=g;Ok.x=Qi;Ok.y=Ri;Ok.z=Si;vk=2}else{var Pk,Pj,Qj;Pk=Ni+Ti*oh;Pj=Oi+Ui*oh;Qj=Pi+Oj*oh;var Vi=g;Vi.x=Pk;Vi.y=Pj;Vi.z=Qj;vk=3}var Qk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Qk<Bf){var Ij=vk<<1,Bf=Qk,xk=g;Qf=xk.x;Rf=xk.y;Jg=xk.z}}if(0>Mk){var Wi,Xi,Yi,Zi,$i,aj,Mg=Yb;Wi=Mg.x;Xi=Mg.y;Yi=Mg.z;var bj=Kb;Zi=bj.x;$i=bj.y;aj=bj.z;var cj,dj,Rj;cj=Zi-Wi;dj=$i-Xi;Rj=aj-Yi;var ph=cj*Wi+dj*Xi+Rj*Yi,ph=-ph/(cj*cj+dj*dj+Rj*Rj),Sj;if(0>ph){var yk=g;yk.x=Wi;yk.y=Xi;yk.z=Yi;Sj=1}else if(1<ph){var Rk=g;Rk.x=Zi;Rk.y=$i;Rk.z=aj;Sj=2}else{var Sk,Tk,Uk;Sk=Wi+cj*ph;Tk=Xi+dj*ph;Uk=Yi+Rj*ph;var qh=g;qh.x=Sk;qh.y=Tk;qh.z=Uk;Sj=3}var Tj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bf||Tj<Bf){var Ij=Sj&1|(Sj&2)<<1,Bf=Tj,zk=g;Qf=zk.x;Rf=zk.y;Jg=zk.z}}var Vk;if(0<Bf){var Ak=g;Ak.x=Qf;Ak.y=Rf;Ak.z=Jg;Vk=Ij}else{var rh=Me*Me+Pd*Pd+Vd*Vd;0<rh&&(rh=1/Math.sqrt(rh));Me*=rh;Pd*=rh;Vd*=rh;var Uj=Me*Me+Pd*Pd+Vd*Vd,Uj=(fh*Me+gh*Pd+hh*Vd)/Uj;Qf=Me*Uj;Rf=Pd*Uj;Jg=Vd*Uj;var sh=g;sh.x=Qf;sh.y=Rf;sh.z=Jg;Vk=7}var ak=g.x*g.x+g.y*g.y+g.z*g.z;if(0>sd||ak<sd){var Cc=Vk<<1,sd=ak,kj=g;Uc=kj.x;Vf=kj.y;Bc=kj.z}}if(0<sd){var Vj=g;Vj.x=Uc;Vj.y=Vf;Vj.z=Bc;Ab=Cc}else g.Z(),Ab=15}this.zm(Ab);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!D||4==this.za){h.fraction=D;break}this.im();h.fraction=D;var Wj=h.normal;Wj.x=k.x;Wj.y=k.y;Wj.z=k.z;var de=Wj,th=Math.sqrt(de.x*de.x+de.y*de.y+de.z*de.z);0<th&&(th=1/th);var Ek=de.y*th,Fk=de.z*th;de.x=de.x*th;de.y=Ek;de.z=Fk;var Xj=h.position,mj=this.closestPoint1;Xj.x=mj.x;Xj.y=mj.y;Xj.z=mj.z;var Wk=Xj,kl=Wk.y+c.y*D,ll=Wk.z+c.z*D;Wk.x+=c.x*D;Wk.y=kl;Wk.z=ll;return!0}k.x=g.x;k.y=g.y;k.z=g.z;var Xk=k,ml=-Xk.y,nl=-Xk.z;Xk.x=-Xk.x;Xk.y=ml;Xk.z=nl;if(null!=this.hj)this.pf(!0);else{var Al=this.hb[this.za];Al.x=this.pc.v;Al.y=this.pc.A;Al.z=this.pc.B}this.qf(!0);var jl=this.Pa[this.za],Bl=this.hb[this.za];jl.x=Bl.x;jl.y=Bl.y;jl.z=Bl.z;var Yk=jl,Cl=this.pb[this.za],ol=Yk.y-Cl.y,pl=Yk.z-Cl.z;Yk.x=Yk.x-Cl.x;Yk.y=ol;Yk.z=pl;var Zk=l[this.za],Tl=Zk.y-t.y,Ul=Zk.z-t.z;Zk.x=Zk.x-t.x;Zk.y=Tl;Zk.z=Ul;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var Dl=l[this.za],ej=k,Jl=Dl.x*ej.x+Dl.y*ej.y+Dl.z*ej.z;if(0>Jl){if(0<=A.x*ej.x+A.y*ej.y+A.z*ej.z)break;var gl=Jl/(A.x*ej.x+A.y*ej.y+A.z*ej.z),D=D+gl;if(1<=D)break;var Vl=t.y+A.y*gl,Wl=t.z+A.z*gl;t.x=t.x+A.x*gl;t.y=Vl;t.z=Wl;for(var Kl=0,Xl=this.za+1;Kl<Xl;){var Yl=Kl++,$k=l[Yl],El=-gl,Zl=$k.y+A.y*El,$l=$k.z+A.z*El;$k.x=$k.x+A.x*El;$k.y=Zl;$k.z=$l}}for(var Ll=!1,Ml=0,am=this.za;Ml<am;){var Fl=Ml++,Nl=l[Fl].x-l[this.za].x,Ol=l[Fl].y-l[this.za].y,Pl=l[Fl].z-l[this.za].z;if(1E-8>Nl*Nl+Ol*Ol+Pl*Pl){Ll=!0;break}}Ll||this.za++;++u}return!1},im:function(){switch(this.za){case 1:var a=this.closestPoint1,b=this.hb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,d=this.pb[0];e.x=d.x;e.y=d.y;e.z=d.z;break;case 2:var c,f,h,l=this.closest;c=l.x;f=l.y;h=l.z;var g,k,m,n,q,p,r,v,aa,w,B,u,D,t,A,E,x,Ab,N=this.Pa[0];g=N.x;k=N.y;m=N.z;var I=this.hb[0];n=I.x;q=I.y;p=I.z;var F=this.pb[0];r=F.x;v=F.y;aa=F.z;var C=this.Pa[1];w=C.x;B=C.y;u=C.z;var O=this.hb[1];D=O.x;t=O.y;A=O.z;var ga=this.pb[1];E=ga.x;x=ga.y;Ab=ga.z;var L,Vb,M;L=w-g;Vb=B-k;M=u-m;var ka=L*L+Vb*Vb+M*M;ka&&(ka=1/ka);var Va=((c-g)*L+(f-k)*Vb+(h-m)*M)*ka,U,R,cc,Ma,Qa,vc,Oa,Ba,Bb;U=D-n;R=t-q;cc=A-p;Ma=n+U*Va;Qa=q+R*Va;vc=p+cc*Va;U=E-r;R=x-v;cc=Ab-aa;Oa=r+U*Va;Ba=v+R*Va;Bb=aa+cc*Va;var H=this.closestPoint1;H.x=Ma;H.y=Qa;H.z=vc;var Pa=this.closestPoint2;Pa.x=Oa;Pa.y=Ba;Pa.z=Bb;break;case 3:var ba,Q,P,wa=this.closest;ba=wa.x;Q=wa.y;P=wa.z;var ta,W,oa,y,Ga,ca,Ca,xa,Da,Ra,la,Z,Ea,ra,va,J,Ka,Xa,S,Ya,T,K,ia,gb,da,Ic,sa,fb=this.Pa[0];ta=fb.x;W=fb.y;oa=fb.z;var jb=this.hb[0];y=jb.x;Ga=jb.y;ca=jb.z;var Za=this.pb[0];Ca=Za.x;xa=Za.y;Da=Za.z;var ma=this.Pa[1];Ra=ma.x;la=ma.y;Z=ma.z;var na=this.hb[1];Ea=na.x;ra=na.y;va=na.z;var Ia=this.pb[1];J=Ia.x;Ka=Ia.y;Xa=Ia.z;var Fa=this.Pa[2];S=Fa.x;Ya=Fa.y;T=Fa.z;var nb=this.hb[2];K=nb.x;ia=nb.y;gb=nb.z;var fa=this.pb[2];da=fa.x;Ic=fa.y;sa=fa.z;var ea,ja,cb,za,tb,Ta,qb,rb,vb;ea=Ra-ta;ja=la-W;cb=Z-oa;za=S-ta;tb=Ya-W;Ta=T-oa;qb=ba-ta;rb=Q-W;vb=P-oa;var Wa=ea*ea+ja*ja+cb*cb,yb=ea*za+ja*tb+cb*Ta,rc=za*za+tb*tb+Ta*Ta,$a=ea*qb+ja*rb+cb*vb,ua=za*qb+tb*rb+Ta*vb,Jb=Wa*rc-yb*yb;Jb&&(Jb=1/Jb);var G=($a*rc-ua*yb)*Jb,ob=(-$a*yb+ua*Wa)*Jb,db,qc,ab,hb,z,Db,Xd,Tc,Eb;db=Ea-y;qc=ra-Ga;ab=va-ca;hb=y+db*G;z=Ga+qc*G;Db=ca+ab*G;db=K-y;qc=ia-Ga;ab=gb-ca;hb+=db*ob;z+=qc*ob;Db+=ab*ob;db=J-Ca;qc=Ka-xa;ab=Xa-Da;Xd=Ca+db*G;Tc=xa+qc*G;Eb=Da+ab*G;db=da-Ca;qc=Ic-xa;ab=sa-Da;Xd+=db*ob;Tc+=qc*ob;Eb+=ab*ob;var Na=this.closestPoint1;Na.x=hb;Na.y=z;Na.z=Db;var mb=this.closestPoint2;mb.x=Xd;mb.y=Tc;mb.z=Eb;break;default:throw Error("!?");}},Cn:function(a){var b=this.dir;a=a.ql;b.x=a.x;b.y=a.y;b.z=a.z},In:function(a){a=a.ql;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;var b=-a.y,e=-a.z;a.x=-a.x;a.y=b;a.z=e},zm:function(a){this.za=a;this.za=(this.za&5)+(this.za>>1&5);this.za=(this.za&3)+(this.za>>2&3);switch(a){case 2:a=this.Pa[0];var b=this.Pa[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.Pa[0];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.Pa[1];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.Pa[0];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.Pa[0];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.Pa[1];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.Pa[0];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.Pa[2];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[2];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[2];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.Pa[0];b=this.Pa[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[0];b=this.hb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[0];b=this.pb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.Pa[1];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.Pa[1];b=this.Pa[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.hb[1];b=this.hb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.pb[1];b=this.pb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.Pa[0],b=this.Pa[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.hb[0],b=this.hb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.pb[0],b=this.pb[3],a.x=b.x,a.y=b.y,a.z=b.z}},pf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;e=this.pc.o*c+this.pc.i*f+this.pc.l*h;l=this.pc.f*c+this.pc.m*f+this.pc.g*h;b=this.pc.h*c+this.pc.j*f+this.pc.s*h;d=this.dir;d.x=e;d.y=l;d.z=b;this.hj.Ld(this.dir,this.hb[this.za]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.hb[this.za],b=this.dir,e=this.hj.gc,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.hb[this.za];b=a.x;e=a.y;d=a.z;l=this.pc.o*b+this.pc.f*e+this.pc.h*d;a=this.pc.i*b+this.pc.m*e+this.pc.j*d;e=this.pc.l*b+this.pc.g*e+this.pc.s*d;b=l+this.pc.v;a+=this.pc.A;e+=this.pc.B;l=this.hb[this.za];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},qf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;b=this.Gc.o*c+this.Gc.i*f+this.Gc.l*h;e=this.Gc.f*c+this.Gc.m*f+this.Gc.g*h;l=this.Gc.h*c+this.Gc.j*f+this.Gc.s*h;d=this.dir;d.x=-b;d.y=-e;d.z=-l;this.Sk.Ld(this.dir,this.pb[this.za]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.pb[this.za],b=this.dir,e=this.Sk.gc,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.pb[this.za];b=a.x;e=a.y;d=a.z;l=this.Gc.o*b+this.Gc.f*e+this.Gc.h*d;a=this.Gc.i*b+this.Gc.m*e+this.Gc.j*d;e=this.Gc.l*b+this.Gc.g*e+this.Gc.s*d;b=l+this.Gc.v;a+=this.Gc.A;e+=this.Gc.B;l=this.pb[this.za];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},En:function(){for(var a=0;3>a;){var b=a++,e=this.dir,b=this.fj[b];e.x=b.x;e.y=b.y;e.z=b.z;this.pf(!1);this.qf(!1);e=this.Pa[this.za];b=this.hb[this.za];e.x=b.x;e.y=b.y;e.z=b.z;var b=this.pb[this.za],d=e.y-b.y,c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.za++;this.ml();if(4==this.za)break;this.za--;e=this.dir;b=-e.y;d=-e.z;e.x=-e.x;e.y=b;e.z=d;this.pf(!1);this.qf(!1);e=this.Pa[this.za];b=this.hb[this.za];e.x=b.x;e.y=b.y;e.z=b.z;b=this.pb[this.za];d=e.y-b.y;c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.za++;this.ml();if(4==this.za)break;this.za--}},ml:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var d,c,f,h,l,g;f=this.Pa[0];d=f.x;c=f.y;f=f.z;g=this.Pa[1];h=g.x;l=g.y;g=g.z;d-=h;c-=l;f-=g;for(l=0;3>l;){g=l++;var k,m;g=this.fj[g];h=g.x;k=g.y;m=g.z;g=c*m-f*k;m=f*h-d*m;h=d*k-c*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.pf(!1);this.qf(!1);g=this.Pa[this.za];h=this.hb[this.za];g.x=h.x;g.y=h.y;g.z=h.z;h=this.pb[this.za];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.za++;this.tl();if(4==this.za)break;this.za--;g=this.dir;h=-g.y;k=-g.z;g.x=-g.x;g.y=h;g.z=k;this.pf(!1);this.qf(!1);g=this.Pa[this.za];h=this.hb[this.za];g.x=h.x;g.y=h.y;g.z=h.z;h=this.pb[this.za];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.za++;this.tl();if(4==this.za)break;this.za--}d=this.dir;d.x=a;d.y=b;d.z=e},tl:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var d,c,f,h,l,g,k,m,n;f=this.Pa[0];d=f.x;c=f.y;f=f.z;m=this.Pa[1];h=m.x;l=m.y;g=m.z;n=this.Pa[2];k=n.x;m=n.y;n=n.z;h-=d;l-=c;g-=f;d=k-d;c=m-c;m=n-f;f=l*m-g*c;m=g*d-h*m;c=h*c-l*d;h=this.dir;h.x=f;h.y=m;h.z=c;this.pf(!1);this.qf(!1);c=this.Pa[this.za];f=this.hb[this.za];c.x=f.x;c.y=f.y;c.z=f.z;f=this.pb[this.za];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.za++;if(this.jm())break;this.za--;c=this.dir;f=-c.y;h=-c.z;c.x=-c.x;c.y=f;c.z=h;this.pf(!1);this.qf(!1);c=this.Pa[this.za];f=this.hb[this.za];c.x=f.x;c.y=f.y;c.z=f.z;f=this.pb[this.za];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.za++;if(this.jm())break;this.za--;break}c=this.dir;c.x=a;c.y=b;c.z=e},jm:function(){var a=this.Pa[2].x-this.Pa[0].x,b=this.Pa[2].y-this.Pa[0].y,e=this.Pa[2].z-this.Pa[0].z,d=this.Pa[3].x-this.Pa[0].x,c=this.Pa[3].y-this.Pa[0].y,f=this.Pa[3].z-this.Pa[0].z,a=(this.Pa[1].x-this.Pa[0].x)*(b*f-e*c)-(this.Pa[1].y-this.Pa[0].y)*(a*f-e*d)+(this.Pa[1].z-this.Pa[0].z)*(a*c-b*d);return 1E-12<a?!0:-1E-12>a},Zm:function(a,b,e,d,c,f,h){for(var l=this.Fg;0<l.ah;){var g=l.Vc;l.ah--;var k=g.ja,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ja=k);g==l.Vc&&(l.Vc=l.Vc.M);g==l.Fc&&(l.Fc=l.Fc.ja);g.M=null;g.ja=null;g.$j();g.M=l.ve;l.ve=g}if(null!=l.Vc)throw Error("assertion error: _triangleList == null is false");if(null!=l.Fc)throw Error("assertion error: _triangleListLast == null is false");for(;0<l.Ae;){var n=l.zb[--l.Ae];n.$j();n.M=l.Re;l.Re=n}var q=this.Fg,p=this.Fg,r=p.Re;null!=r?(p.Re=r.M,r.M=null):r=new Yc;var v=r.Aa(c[0],f[0],h[0]),aa=this.Fg,w=aa.Re;null!=w?(aa.Re=w.M,w.M=null):w=new Yc;var B=w.Aa(c[1],f[1],h[1]),u=this.Fg,D=u.Re;null!=D?(u.Re=D.M,D.M=null):D=new Yc;var t=D.Aa(c[2],f[2],h[2]),A=this.Fg,E=A.Re;null!=E?(A.Re=E.M,E.M=null):E=new Yc;if(!q.Vg(v,B,t,E.Aa(c[3],f[3],h[3])))return lc.EPA_FAILED_TO_INIT;this.za=0;for(var x=this.Pa[0],Ab=this.hb[0],N=this.pb[0],I=0;40>I;){for(var F=this.Fg.Vc,C=1/0,O=null;null!=F;){var ga=F.M;F.Ej<C&&(C=F.Ej,O=F);F=ga}var L=O,M=this.dir,ql=L.Lj;M.x=ql.x;M.y=ql.y;M.z=ql.z;var ka=M,Va=Math.sqrt(ka.x*ka.x+ka.y*ka.y+ka.z*ka.z);0<Va&&(Va=1/Va);var U=ka.y*Va,R=ka.z*Va;ka.x=ka.x*Va;ka.y=U;ka.z=R;this.pf(!1);this.qf(!1);var cc=this.Pa[this.za],Ma=this.hb[this.za];cc.x=Ma.x;cc.y=Ma.y;cc.z=Ma.z;var Qa=cc,vc=this.pb[this.za],Oa=Qa.y-vc.y,Ba=Qa.z-vc.z;Qa.x=Qa.x-vc.x;Qa.y=Oa;Qa.z=Ba;var Bb=L.zb[0],H=L.zb[1],Pa=L.zb[2],ba=Bb.ud,Q=this.dir,P=this.dir;if(1E-6>x.x*P.x+x.y*P.y+x.z*P.z-(ba.x*Q.x+ba.y*Q.y+ba.z*Q.z)||39==I){var wa=this.closest,ta=this.dir;wa.x=ta.x;wa.y=ta.y;wa.z=ta.z;var W=wa,oa=this.dir,y=Bb.ud,Ga=this.dir,ca=(oa.x*y.x+oa.y*y.y+oa.z*y.z)/(Ga.x*Ga.x+Ga.y*Ga.y+Ga.z*Ga.z),Ca=W.y*ca,xa=W.z*ca;W.x=W.x*ca;W.y=Ca;W.z=xa;var Da,Ra,la,Z=this.closest;Da=Z.x;Ra=Z.y;la=Z.z;var Ea,ra,va,J,Ka,Xa,S,Ya,T,K,ia,gb,da,Ic,sa,fb,jb,Za,ma,na,Ia,Fa,nb,fa,ea,ja,cb,za=Bb.ud;Ea=za.x;ra=za.y;va=za.z;var tb=Bb.hb;J=tb.x;Ka=tb.y;Xa=tb.z;var Ta=Bb.pb;S=Ta.x;Ya=Ta.y;T=Ta.z;var qb=H.ud;K=qb.x;ia=qb.y;gb=qb.z;var rb=H.hb;da=rb.x;Ic=rb.y;sa=rb.z;var vb=H.pb;fb=vb.x;jb=vb.y;Za=vb.z;var Wa=Pa.ud;ma=Wa.x;na=Wa.y;Ia=Wa.z;var yb=Pa.hb;Fa=yb.x;nb=yb.y;fa=yb.z;var rc=Pa.pb;ea=rc.x;ja=rc.y;cb=rc.z;var $a,ua,Jb,G,ob,db,qc,ab,hb;$a=K-Ea;ua=ia-ra;Jb=gb-va;G=ma-Ea;ob=na-ra;db=Ia-va;qc=Da-Ea;ab=Ra-ra;hb=la-va;var z=$a*$a+ua*ua+Jb*Jb,Db=$a*G+ua*ob+Jb*db,Xd=G*G+ob*ob+db*db,Tc=$a*qc+ua*ab+Jb*hb,Eb=G*qc+ob*ab+db*hb,Na=z*Xd-Db*Db;Na&&(Na=1/Na);var mb=(Tc*Xd-Eb*Db)*Na,xb=(-Tc*Db+Eb*z)*Na,zb,eb,Y,La,kb,Sa,ib,Ja,Hb;zb=da-J;eb=Ic-Ka;Y=sa-Xa;La=J+zb*mb;kb=Ka+eb*mb;Sa=Xa+Y*mb;zb=Fa-J;eb=nb-Ka;Y=fa-Xa;La+=zb*xb;kb+=eb*xb;Sa+=Y*xb;zb=fb-S;eb=jb-Ya;Y=Za-T;ib=S+zb*mb;Ja=Ya+eb*mb;Hb=T+Y*mb;zb=ea-S;eb=ja-Ya;Y=cb-T;ib+=zb*xb;Ja+=eb*xb;Hb+=Y*xb;var ha=this.closestPoint1;ha.x=La;ha.y=kb;ha.z=Sa;var X=this.closestPoint2;X.x=ib;X.y=Ja;X.z=Hb;var Cb=this.closest;this.depth=Math.sqrt(Cb.x*Cb.x+Cb.y*Cb.y+Cb.z*Cb.z);return lc.SUCCEEDED}var Dc=this.Fg,Pc=Dc.Re;null!=Pc?(Dc.Re=Pc.M,Pc.M=null):Pc=new Yc;var qa=Pc.Aa(x,Ab,N);if(!this.Fg.Im(qa,L))return lc.EPA_FAILED_TO_ADD_VERTEX;++I}return lc.EPA_DID_NOT_CONVERGE},Qa:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!0)},bb:function(a,b,e,d,c){return this.kj(a,b,e,d,c,!1)},rf:function(a,b,e,d,c,f,h){return this.Vl(a,b,e,d,c,f,h)},Sd:function(a,b,e,d,c){var f=this.Mn;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.Nn,l=this.On;h.x=d.x;h.y=d.y;h.z=d.z;d=h.y-e.y;var g=h.z-e.z;h.x=h.x-e.x;h.y=d;h.z=g;l.Z();return this.Vl(null,a,f,b,h,l,c)},ra:Pb};lc.aa=!0;fd.aa=!0;fd.bd=function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-d;g=h-c;k=b-a;var m;m=-(l*d+g*c+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=d,e.y=c,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=d+l*m;e.y=c+g*m;e.z=a+k*m;return 3};fd.cd=function(a,b,e,d){var c,f,h,l,g,k,m,n,q,p,r,v,aa,w,B,u,D,t;c=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;n=e.y;q=e.z;p=l-c;r=g-f;v=k-h;aa=m-l;w=n-g;B=q-k;u=c-m;D=f-n;t=h-q;var A,E,x;A=r*B-v*w;E=v*aa-p*B;x=p*w-r*aa;var Ab=-1,N,I,F,C=0;F=I=N=0;if(0>c*(r*x-v*E)+f*(v*A-p*x)+h*(p*E-r*A)){var L;p=a.x;Ab=a.y;N=a.z;r=b.x;v=b.y;L=b.z;var ga;ga=r-p;F=v-Ab;I=L-N;C=-(ga*p+F*Ab+I*N)/(ga*ga+F*F+I*I);0>C?(d.x=p,d.y=Ab,d.z=N,I=1):1<C?(d.x=r,d.y=v,d.z=L,I=2):(p+=ga*C,Ab+=F*C,N+=I*C,d.x=p,d.y=Ab,d.z=N,I=3);N=d.x*d.x+d.y*d.y+d.z*d.z;C=I;Ab=N;N=d.x;I=d.y;F=d.z}0>l*(w*x-B*E)+g*(B*A-aa*x)+k*(aa*E-w*A)&&(aa=b.x,l=b.y,b=b.z,B=e.x,p=e.y,r=e.z,v=B-aa,w=p-l,g=r-b,k=-(v*aa+w*l+g*b)/(v*v+w*w+g*g),0>k?(d.x=aa,d.y=l,d.z=b,b=1):1<k?(d.x=B,d.y=p,d.z=r,b=2):(aa+=v*k,l+=w*k,b+=g*k,d.x=aa,d.y=l,d.z=b,b=3),l=d.x*d.x+d.y*d.y+d.z*d.z,0>Ab||l<Ab)&&(C=b<<1,Ab=l,N=d.x,I=d.y,F=d.z);0>m*(D*x-t*E)+n*(t*A-u*x)+q*(u*E-D*A)&&(n=a.x,m=a.y,a=a.z,u=e.x,D=e.y,b=e.z,l=u-n,t=D-m,e=b-a,q=-(l*n+t*m+e*a)/(l*l+t*t+e*e),0>q?(d.x=n,d.y=m,d.z=a,e=1):1<q?(d.x=u,d.y=D,d.z=b,e=2):(n+=l*q,m+=t*q,e=a+e*q,d.x=n,d.y=m,d.z=e,e=3),a=d.x*d.x+d.y*d.y+d.z*d.z,0>Ab||a<Ab)&&(C=e&1|(e&2)<<1,Ab=a,N=d.x,I=d.y,F=d.z);if(0<Ab)return d.x=N,d.y=I,d.z=F,C;e=A*A+E*E+x*x;0<e&&(e=1/Math.sqrt(e));A*=e;E*=e;x*=e;c=(c*A+f*E+h*x)/(A*A+E*E+x*x);N=A*c;I=E*c;F=x*c;d.x=N;d.y=I;d.z=F;return 7};fd.Pd=function(a,b,e,d,c){var f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,V,A,E,x,Ab,N,I,F,C,L,ga;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;n=e.x;q=e.y;p=e.z;r=d.x;v=d.y;t=d.z;w=g-f;B=k-h;u=m-l;D=n-f;V=q-h;A=p-l;E=r-f;x=v-h;Ab=t-l;N=n-g;I=q-k;F=p-m;C=r-g;L=v-k;ga=t-m;var O,M,ha,ka,Va,U,R,cc,Ma,Qa,vc,Oa;O=B*A-u*V;M=u*D-w*A;ha=w*V-B*D;ka=V*Ab-A*x;Va=A*E-D*Ab;U=D*x-V*E;R=x*u-Ab*B;cc=Ab*w-E*u;Ma=E*B-x*w;Qa=L*F-ga*I;vc=ga*N-C*F;Oa=C*I-L*N;var Ba=0<w*Qa+B*vc+u*Oa?1:-1,Bb=f*O+h*M+l*ha,H=f*ka+h*Va+l*U,Pa=f*R+h*cc+l*Ma,ba=g*Qa+k*vc+m*Oa,Q=-1,P,wa,ta,W=0;ta=wa=P=0;if(0>Bb*Ba){var oa,y,Ga,ca,Ca,xa,Da,Ra,la,Z,Ea,ra,va,J,Ka,Xa,S,Ya;oa=a.x;y=a.y;Ga=a.z;ca=b.x;Ca=b.y;xa=b.z;Da=e.x;Ra=e.y;la=e.z;Z=ca-oa;Ea=Ca-y;ra=xa-Ga;va=Da-ca;J=Ra-Ca;Ka=la-xa;Xa=oa-Da;S=y-Ra;Ya=Ga-la;var T,K,ia;T=Ea*Ka-ra*J;K=ra*va-Z*Ka;ia=Z*J-Ea*va;var gb=oa*(Ea*ia-ra*K)+y*(ra*T-Z*ia)+Ga*(Z*K-Ea*T),da=ca*(J*ia-Ka*K)+Ca*(Ka*T-va*ia)+xa*(va*K-J*T),Ic=Da*(S*ia-Ya*K)+Ra*(Ya*T-Xa*ia)+la*(Xa*K-S*T),sa=-1,fb,jb,Za,ma=0;Za=jb=fb=0;if(0>gb){var na,Ia,Fa,nb,fa,ea;na=a.x;Ia=a.y;Fa=a.z;nb=b.x;fa=b.y;ea=b.z;var ja,cb,za;ja=nb-na;cb=fa-Ia;za=ea-Fa;var tb=ja*na+cb*Ia+za*Fa,tb=-tb/(ja*ja+cb*cb+za*za),Ta;if(0>tb)c.x=na,c.y=Ia,c.z=Fa,Ta=1;else if(1<tb)c.x=nb,c.y=fa,c.z=ea,Ta=2;else{var qb,rb,vb;qb=na+ja*tb;rb=Ia+cb*tb;vb=Fa+za*tb;c.x=qb;c.y=rb;c.z=vb;Ta=3}var Wa=c.x*c.x+c.y*c.y+c.z*c.z,ma=Ta,sa=Wa;fb=c.x;jb=c.y;Za=c.z}if(0>da){var yb,rc,$a,ua,Jb,G;yb=b.x;rc=b.y;$a=b.z;ua=e.x;Jb=e.y;G=e.z;var ob,db,qc;ob=ua-yb;db=Jb-rc;qc=G-$a;var ab=ob*yb+db*rc+qc*$a,ab=-ab/(ob*ob+db*db+qc*qc),hb;if(0>ab)c.x=yb,c.y=rc,c.z=$a,hb=1;else if(1<ab)c.x=ua,c.y=Jb,c.z=G,hb=2;else{var z,Db,Xd;z=yb+ob*ab;Db=rc+db*ab;Xd=$a+qc*ab;c.x=z;c.y=Db;c.z=Xd;hb=3}var Tc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||Tc<sa)ma=hb<<1,sa=Tc,fb=c.x,jb=c.y,Za=c.z}if(0>Ic){var Eb,Na,mb,xb,zb,eb;Eb=a.x;Na=a.y;mb=a.z;xb=e.x;zb=e.y;eb=e.z;var Y,La,kb;Y=xb-Eb;La=zb-Na;kb=eb-mb;var Sa=Y*Eb+La*Na+kb*mb,Sa=-Sa/(Y*Y+La*La+kb*kb),ib;if(0>Sa)c.x=Eb,c.y=Na,c.z=mb,ib=1;else if(1<Sa)c.x=xb,c.y=zb,c.z=eb,ib=2;else{var Ja,Hb,qa;Ja=Eb+Y*Sa;Hb=Na+La*Sa;qa=mb+kb*Sa;c.x=Ja;c.y=Hb;c.z=qa;ib=3}var X=c.x*c.x+c.y*c.y+c.z*c.z;if(0>sa||X<sa)ma=ib&1|(ib&2)<<1,sa=X,fb=c.x,jb=c.y,Za=c.z}var Cb;if(0<sa)c.x=fb,c.y=jb,c.z=Za,Cb=ma;else{var Dc=T*T+K*K+ia*ia;0<Dc&&(Dc=1/Math.sqrt(Dc));T*=Dc;K*=Dc;ia*=Dc;var Pc=T*T+K*K+ia*ia,Pc=(oa*T+y*K+Ga*ia)/Pc;fb=T*Pc;jb=K*Pc;Za=ia*Pc;c.x=fb;c.y=jb;c.z=Za;Cb=7}var Ha=c.x*c.x+c.y*c.y+c.z*c.z,W=Cb,Q=Ha;P=c.x;wa=c.y;ta=c.z}if(0>H*Ba){var gc,Nc,ya,pa,zc,Aa,jc,tc,kc,ac,Wb,Xb,Rb,hc,Sb,Qb,Yb,ic;gc=a.x;Nc=a.y;ya=a.z;pa=e.x;zc=e.y;Aa=e.z;jc=d.x;tc=d.y;kc=d.z;ac=pa-gc;Wb=zc-Nc;Xb=Aa-ya;Rb=jc-pa;hc=tc-zc;Sb=kc-Aa;Qb=gc-jc;Yb=Nc-tc;ic=ya-kc;var Kb,$b,lb;Kb=Wb*Sb-Xb*hc;$b=Xb*Rb-ac*Sb;lb=ac*hc-Wb*Rb;var bb=gc*(Wb*lb-Xb*$b)+Nc*(Xb*Kb-ac*lb)+ya*(ac*$b-Wb*Kb),sb=pa*(hc*lb-Sb*$b)+zc*(Sb*Kb-Rb*lb)+Aa*(Rb*$b-hc*Kb),Mb=jc*(Yb*lb-ic*$b)+tc*(ic*Kb-Qb*lb)+kc*(Qb*$b-Yb*Kb),uc=-1,mc,jd,rd,pb=0;rd=jd=mc=0;if(0>bb){var sc,xc,wb,Ua,Fb,Zc;sc=a.x;xc=a.y;wb=a.z;Ua=e.x;Fb=e.y;Zc=e.z;var Gc,Gb,Ue;Gc=Ua-sc;Gb=Fb-xc;Ue=Zc-wb;var Ob=Gc*sc+Gb*xc+Ue*wb,Ob=-Ob/(Gc*Gc+Gb*Gb+Ue*Ue),Id;if(0>Ob)c.x=sc,c.y=xc,c.z=wb,Id=1;else if(1<Ob)c.x=Ua,c.y=Fb,c.z=Zc,Id=2;else{var Og,Nb,ec;Og=sc+Gc*Ob;Nb=xc+Gb*Ob;ec=wb+Ue*Ob;c.x=Og;c.y=Nb;c.z=ec;Id=3}var Zb=c.x*c.x+c.y*c.y+c.z*c.z,pb=Id,uc=Zb;mc=c.x;jd=c.y;rd=c.z}if(0>sb){var Ac,Ib,fc,dc,Tb,Qc;Ac=e.x;Ib=e.y;fc=e.z;dc=d.x;Tb=d.y;Qc=d.z;var Lb,Pb,ub;Lb=dc-Ac;Pb=Tb-Ib;ub=Qc-fc;var nc=Lb*Ac+Pb*Ib+ub*fc,nc=-nc/(Lb*Lb+Pb*Pb+ub*ub),oc;if(0>nc)c.x=Ac,c.y=Ib,c.z=fc,oc=1;else if(1<nc)c.x=dc,c.y=Tb,c.z=Qc,oc=2;else{var lc,bc,Ec;lc=Ac+Lb*nc;bc=Ib+Pb*nc;Ec=fc+ub*nc;c.x=lc;c.y=bc;c.z=Ec;oc=3}var Fc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>uc||Fc<uc)pb=oc<<1,uc=Fc,mc=c.x,jd=c.y,rd=c.z}if(0>Mb){var Bc,yc,Jc,Cc,pc,Kc;Bc=a.x;yc=a.y;Jc=a.z;Cc=d.x;pc=d.y;Kc=d.z;var wc,Ub,sd;wc=Cc-Bc;Ub=pc-yc;sd=Kc-Jc;var Uc=wc*Bc+Ub*yc+sd*Jc,Uc=-Uc/(wc*wc+Ub*Ub+sd*sd),Hc;if(0>Uc)c.x=Bc,c.y=yc,c.z=Jc,Hc=1;else if(1<Uc)c.x=Cc,c.y=pc,c.z=Kc,Hc=2;else{var Oc,gd,Rc;Oc=Bc+wc*Uc;gd=yc+Ub*Uc;Rc=Jc+sd*Uc;c.x=Oc;c.y=gd;c.z=Rc;Hc=3}var Df=c.x*c.x+c.y*c.y+c.z*c.z;if(0>uc||Df<uc)pb=Hc&1|(Hc&2)<<1,uc=Df,mc=c.x,jd=c.y,rd=c.z}var Xc;if(0<uc)c.x=mc,c.y=jd,c.z=rd,Xc=pb;else{var Yc=Kb*Kb+$b*$b+lb*lb;0<Yc&&(Yc=1/Math.sqrt(Yc));Kb*=Yc;$b*=Yc;lb*=Yc;var ad=Kb*Kb+$b*$b+lb*lb,ad=(gc*Kb+Nc*$b+ya*lb)/ad;mc=Kb*ad;jd=$b*ad;rd=lb*ad;c.x=mc;c.y=jd;c.z=rd;Xc=7}var md=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||md<Q)W=Xc&1|(Xc&6)<<1,Q=md,P=c.x,wa=c.y,ta=c.z}if(0>Pa*Ba){var td,fd,bd,id,dd,Jd,Mc,nd,od,hd,Lc,kd,ld,qd,wd,Vc,Wc,$c;td=a.x;fd=a.y;bd=a.z;id=b.x;dd=b.y;Jd=b.z;Mc=d.x;nd=d.y;od=d.z;hd=id-td;Lc=dd-fd;kd=Jd-bd;ld=Mc-id;qd=nd-dd;wd=od-Jd;Vc=td-Mc;Wc=fd-nd;$c=bd-od;var ud,cd,Sc;ud=Lc*wd-kd*qd;cd=kd*ld-hd*wd;Sc=hd*qd-Lc*ld;var Ee=td*(Lc*Sc-kd*cd)+fd*(kd*ud-hd*Sc)+bd*(hd*cd-Lc*ud),Ve=id*(qd*Sc-wd*cd)+dd*(wd*ud-ld*Sc)+Jd*(ld*cd-qd*ud),We=Mc*(Wc*Sc-$c*cd)+nd*($c*ud-Vc*Sc)+od*(Vc*cd-Wc*ud),Kd=-1,ed,ve,we,Fd=0;we=ve=ed=0;if(0>Ee){var xd,Gd,pd,Qd,Rd,Wd;xd=a.x;Gd=a.y;pd=a.z;Qd=b.x;Rd=b.y;Wd=b.z;var Ed,Nd,Fe;Ed=Qd-xd;Nd=Rd-Gd;Fe=Wd-pd;var yd=Ed*xd+Nd*Gd+Fe*pd,yd=-yd/(Ed*Ed+Nd*Nd+Fe*Fe),Hd;if(0>yd)c.x=xd,c.y=Gd,c.z=pd,Hd=1;else if(1<yd)c.x=Qd,c.y=Rd,c.z=Wd,Hd=2;else{var qe,re,se;qe=xd+Ed*yd;re=Gd+Nd*yd;se=pd+Fe*yd;c.x=qe;c.y=re;c.z=se;Hd=3}var Ce=c.x*c.x+c.y*c.y+c.z*c.z,Fd=Hd,Kd=Ce;ed=c.x;ve=c.y;we=c.z}if(0>Ve){var Xe,Dd,Sd,ee,pe,te;Xe=b.x;Dd=b.y;Sd=b.z;ee=d.x;pe=d.y;te=d.z;var Ye,Ze,$e;Ye=ee-Xe;Ze=pe-Dd;$e=te-Sd;var $d=Ye*Xe+Ze*Dd+$e*Sd,$d=-$d/(Ye*Ye+Ze*Ze+$e*$e),fe;if(0>$d)c.x=Xe,c.y=Dd,c.z=Sd,fe=1;else if(1<$d)c.x=ee,c.y=pe,c.z=te,fe=2;else{var Qe,Te,pf;Qe=Xe+Ye*$d;Te=Dd+Ze*$d;pf=Sd+$e*$d;c.x=Qe;c.y=Te;c.z=pf;fe=3}var Ef=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Kd||Ef<Kd)Fd=fe<<1,Kd=Ef,ed=c.x,ve=c.y,we=c.z}if(0>We){var Ff,Gf,ue,Se,Wf,Xf;Ff=a.x;Gf=a.y;ue=a.z;Se=d.x;Wf=d.y;Xf=d.z;var af,Yf,Hf;af=Se-Ff;Yf=Wf-Gf;Hf=Xf-ue;var xe=af*Ff+Yf*Gf+Hf*ue,xe=-xe/(af*af+Yf*Yf+Hf*Hf),bf;if(0>xe)c.x=Ff,c.y=Gf,c.z=ue,bf=1;else if(1<xe)c.x=Se,c.y=Wf,c.z=Xf,bf=2;else{var Zf,$f,ag;Zf=Ff+af*xe;$f=Gf+Yf*xe;ag=ue+Hf*xe;c.x=Zf;c.y=$f;c.z=ag;bf=3}var bg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Kd||bg<Kd)Fd=bf&1|(bf&2)<<1,Kd=bg,ed=c.x,ve=c.y,we=c.z}var Ge;if(0<Kd)c.x=ed,c.y=ve,c.z=we,Ge=Fd;else{var He=ud*ud+cd*cd+Sc*Sc;0<He&&(He=1/Math.sqrt(He));ud*=He;cd*=He;Sc*=He;var cf=ud*ud+cd*cd+Sc*Sc,cf=(td*ud+fd*cd+bd*Sc)/cf;ed=ud*cf;ve=cd*cf;we=Sc*cf;c.x=ed;c.y=ve;c.z=we;Ge=7}var cg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||cg<Q)W=Ge&3|(Ge&4)<<1,Q=cg,P=c.x,wa=c.y,ta=c.z}if(0>ba*Ba){var qf,Ie,rf,dg,Ne,Oe,Pe,Re,df,sf,If,De,Jf,ge,ye,Kf,Cf,eg;qf=b.x;Ie=b.y;rf=b.z;dg=e.x;Ne=e.y;Oe=e.z;Pe=d.x;Re=d.y;df=d.z;sf=dg-qf;If=Ne-Ie;De=Oe-rf;Jf=Pe-dg;ge=Re-Ne;ye=df-Oe;Kf=qf-Pe;Cf=Ie-Re;eg=rf-df;var zd,Ad,Bd;zd=If*ye-De*ge;Ad=De*Jf-sf*ye;Bd=sf*ge-If*Jf;var Ng=qf*(If*Bd-De*Ad)+Ie*(De*zd-sf*Bd)+rf*(sf*Ad-If*zd),fg=dg*(ge*Bd-ye*Ad)+Ne*(ye*zd-Jf*Bd)+Oe*(Jf*Ad-ge*zd),gg=Pe*(Cf*Bd-eg*Ad)+Re*(eg*zd-Kf*Bd)+df*(Kf*Ad-Cf*zd),ae=-1,he,ie,be,tf=0;be=ie=he=0;if(0>Ng){var ef,ff,gf,Lf,Sf,Td;ef=b.x;ff=b.y;gf=b.z;Lf=e.x;Sf=e.y;Td=e.z;var Ld,Md,of;Ld=Lf-ef;Md=Sf-ff;of=Td-gf;var Mf=Ld*ef+Md*ff+of*gf,Mf=-Mf/(Ld*Ld+Md*Md+of*of),Yd;if(0>Mf)c.x=ef,c.y=ff,c.z=gf,Yd=1;else if(1<Mf)c.x=Lf,c.y=Sf,c.z=Td,Yd=2;else{var vd,Cd,hg;vd=ef+Ld*Mf;Cd=ff+Md*Mf;hg=gf+of*Mf;c.x=vd;c.y=Cd;c.z=hg;Yd=3}var Bh=c.x*c.x+c.y*c.y+c.z*c.z,tf=Yd,ae=Bh;he=c.x;ie=c.y;be=c.z}if(0>fg){var ig,Zd,ce,ze,hf,jg;ig=e.x;Zd=e.y;ce=e.z;ze=d.x;hf=d.y;jg=d.z;var jf,kf,lf;jf=ze-ig;kf=hf-Zd;lf=jg-ce;var Ae=jf*ig+kf*Zd+lf*ce,Ae=-Ae/(jf*jf+kf*kf+lf*lf),uf;if(0>Ae)c.x=ig,c.y=Zd,c.z=ce,uf=1;else if(1<Ae)c.x=ze,c.y=hf,c.z=jg,uf=2;else{var kg,vf,wg;kg=ig+jf*Ae;vf=Zd+kf*Ae;wg=ce+lf*Ae;c.x=kg;c.y=vf;c.z=wg;uf=3}var lg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>ae||lg<ae)tf=uf<<1,ae=lg,he=c.x,ie=c.y,be=c.z}if(0>gg){var mf,wf,Je,xg,yg,Tf;mf=b.x;wf=b.y;Je=b.z;xg=d.x;yg=d.y;Tf=d.z;var mg,xf,yf;mg=xg-mf;xf=yg-wf;yf=Tf-Je;var Be=mg*mf+xf*wf+yf*Je,Be=-Be/(mg*mg+xf*xf+yf*yf),zg;if(0>Be)c.x=mf,c.y=wf,c.z=Je,zg=1;else if(1<Be)c.x=xg,c.y=yg,c.z=Tf,zg=2;else{var sg,ng,og;sg=mf+mg*Be;ng=wf+xf*Be;og=Je+yf*Be;c.x=sg;c.y=ng;c.z=og;zg=3}var pg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>ae||pg<ae)tf=zg&1|(zg&2)<<1,ae=pg,he=c.x,ie=c.y,be=c.z}var Nf;if(0<ae)c.x=he,c.y=ie,c.z=be,Nf=tf;else{var Ke=zd*zd+Ad*Ad+Bd*Bd;0<Ke&&(Ke=1/Math.sqrt(Ke));zd*=Ke;Ad*=Ke;Bd*=Ke;var nf=zd*zd+Ad*Ad+Bd*Bd,nf=(qf*zd+Ie*Ad+rf*Bd)/nf;he=zd*nf;ie=Ad*nf;be=Bd*nf;c.x=he;c.y=ie;c.z=be;Nf=7}var zf=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Q||zf<Q)W=Nf<<1,Q=zf,P=c.x,wa=c.y,ta=c.z}if(0<Q)return c.x=P,c.y=wa,c.z=ta,W;c.Z();return 15};O.aa=!0;O.prototype={Aa:function(a,b,e,d,c,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Mf:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},zc:function(a){return new O(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},Kg:function(a){return new O(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},Bf:function(a){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},de:function(a){return new O(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Cc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e10+a.e10,c=this.e11+a.e11,f=this.e12+a.e12,h=this.e20+a.e20,l=this.e21+a.e21,g=this.e22+a.e22;this.e00+=a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Lg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e10-a.e10,c=this.e11-a.e11,f=this.e12-a.e12,h=this.e20-a.e20,l=this.e21-a.e21,g=this.e22-a.e22;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Jg:function(a){var b=this.e01*a,e=this.e02*a,d=this.e10*a,c=this.e11*a,f=this.e12*a,h=this.e20*a,l=this.e21*a,g=this.e22*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},ee:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,c=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Ge:function(a,b,e){return new O(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},bd:function(a,b,e){return new O(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},fe:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22)},Hc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new O(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d)},He:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e10*b,h=this.e11*b;b=this.e12*b;var l=this.e20*e,g=this.e21*e;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},cd:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e10*a,h=this.e11*b,l=this.e12*e,g=this.e20*a;b=this.e21*b;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},me:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;h=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;e=a*this.e02+l*this.e12+g*this.e22;c=k*this.e00+m*this.e10+n*this.e20;f=k*this.e01+m*this.e11+n*this.e21;k=k*this.e02+m*this.e12+n*this.e22;m=q*this.e00+b*this.e10+h*this.e20;n=q*this.e01+b*this.e11+h*this.e21;q=q*this.e02+b*this.e12+h*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=k;this.e20=m;this.e21=n;this.e22=q;return this},ad:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e10*a+this.e11*k+this.e12*q,f=this.e10*l+this.e11*m+this.e12*b,h=this.e10*g+this.e11*n+this.e12*p,r=this.e20*a+this.e21*k+this.e22*q,l=this.e20*l+this.e21*m+this.e22*b,g=this.e20*g+this.e21*n+this.e22*p;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=h;this.e20=r;this.e21=l;this.e22=g;return this},Th:function(){return new O(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},Uh:function(){var a=this.e10,b=this.e20,e=this.e01,d=this.e11,c=this.e21,f=this.e02,h=this.e12,l=this.e22;this.e00=this.e00;this.e01=a;this.e02=b;this.e10=e;this.e11=d;this.e12=c;this.e20=f;this.e21=h;this.e22=l;return this},Pd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Ng:function(){return this.e00+this.e11+this.e22},be:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);return new O(a*k,-d*k,h*k,-b*k,c*k,-l*k,e*k,-f*k,g*k)},ce:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);this.e00=a*k;this.e01=-d*k;this.e02=h*k;this.e10=-b*k;this.e11=c*k;this.e12=-l*k;this.e20=e*k;this.e21=-f*k;this.e22=g*k;return this},Mg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new O(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},tb:function(a){var b=a.x,e=a.y,d=a.z,c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h,d=d*l,k=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;this.e00=1-g-d;this.e01=k-c;this.e02=b+h;this.e10=k+c;this.e11=1-a-d;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},xj:function(){var a=new ha,b=this.e00,e=this.e11,d=this.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},bb:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),d=Math.sin(a.z),c=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*d;this.e02=e;this.e10=c*d+a*b*e;this.e11=c*a-b*e*d;this.e12=-f*b;this.e20=b*d-c*a*e;this.e21=a*b+c*e*d;this.e22=c*f;return this},Vh:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,1.570796326794895,.5*a)):new t(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},qc:function(a){return 0==a?new t(this.e00,this.e01,this.e02):1==a?new t(this.e10,this.e11,this.e12):2==a?new t(this.e20,this.e21,this.e22):null},lc:function(a){return 0==a?new t(this.e00,this.e10,this.e20):1==a?new t(this.e01,this.e11,this.e21):2==a?new t(this.e02,this.e12,this.e22):null},rc:function(a,b){0==a?b.Aa(this.e00,this.e01,this.e02):1==a?b.Aa(this.e10,this.e11,this.e12):2==a?b.Aa(this.e20,this.e21,this.e22):b.Z()},mc:function(a,b){0==a?b.Aa(this.e00,this.e10,this.e20):1==a?b.Aa(this.e01,this.e11,this.e21):2==a?b.Aa(this.e02,this.e12,this.e22):b.Z()},Lb:function(a,b,e){var d=a.y,c=a.z,f=b.x,h=b.y;b=b.z;var l=e.x,g=e.y;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},Qa:function(a,b,e){var d=b.x,c=e.x,f=a.y,h=b.y,l=e.y,g=a.z;b=b.z;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"},ra:O};M.aa=!0;M.prototype={Aa:function(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Mf:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},lc:function(a){return new M(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},Bf:function(a){return new M(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},Ge:function(a){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},Pd:function(a){return new M(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},mc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e03+a.e03,c=this.e10+a.e10,f=this.e11+a.e11,h=this.e12+a.e12,l=this.e13+a.e13,g=this.e20+a.e20,k=this.e21+a.e21,m=this.e22+a.e22,n=this.e23+a.e23,q=this.e30+a.e30,p=this.e31+a.e31,r=this.e32+a.e32,v=this.e33+a.e33;this.e00+=a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Jg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e03-a.e03,c=this.e10-a.e10,f=this.e11-a.e11,h=this.e12-a.e12,l=this.e13-a.e13,g=this.e20-a.e20,k=this.e21-a.e21,m=this.e22-a.e22,n=this.e23-a.e23,q=this.e30-a.e30,p=this.e31-a.e31,r=this.e32-a.e32,v=this.e33-a.e33;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},He:function(a){var b=this.e01*a,e=this.e02*a,d=this.e03*a,c=this.e10*a,f=this.e11*a,h=this.e12*a,l=this.e13*a,g=this.e20*a,k=this.e21*a,m=this.e22*a,n=this.e23*a,q=this.e30*a,p=this.e31*a,r=this.e32*a,v=this.e33*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},be:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,d=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,n=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,q=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,p=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,r=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,v=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},fe:function(a,b,e){return new M(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},zc:function(a,b,e){return new M(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},de:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,k*this.e03+m*this.e13+n*this.e23,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22,q*this.e03+b*this.e13+d*this.e23,this.e30,this.e31,this.e32,this.e33)},qc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e03,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e13,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d,this.e23,this.e30*a+this.e31*k+this.e32*q,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*n+this.e32*d,this.e33)},Uh:function(a,b,e){return new M(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},Qa:function(a,b,e){return new M(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},me:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e03*a,h=this.e10*b,l=this.e11*b,g=this.e12*b;b=this.e13*b;var k=this.e20*e,m=this.e21*e,n=this.e22*e;e=this.e23*e;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Cc:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e03,h=this.e10*a,l=this.e11*b,g=this.e12*e,k=this.e13,m=this.e20*a,n=this.e21*b,q=this.e22*e,p=this.e23,r=this.e30*a;b=this.e31*b;e=this.e32*e;var v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=b;this.e32=e;this.e33=v;return this},ee:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c,p=d*e*h+b*c,r=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;b=a*this.e02+l*this.e12+g*this.e22;e=a*this.e03+l*this.e13+g*this.e23;var c=k*this.e00+m*this.e10+n*this.e20,f=k*this.e01+m*this.e11+n*this.e21,h=k*this.e02+m*this.e12+n*this.e22,k=k*this.e03+m*this.e13+n*this.e23,m=q*this.e00+p*this.e10+r*this.e20,n=q*this.e01+p*this.e11+r*this.e21,v=q*this.e02+p*this.e12+r*this.e22,q=q*this.e03+p*this.e13+r*this.e23,p=this.e30,r=this.e31,t=this.e32,w=this.e33;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=b;this.e03=e;this.e10=c;this.e11=f;this.e12=h;this.e13=k;this.e20=m;this.e21=n;this.e22=v;this.e23=q;this.e30=p;this.e31=r;this.e32=t;this.e33=w;return this},rc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e03,f=this.e10*a+this.e11*k+this.e12*q,h=this.e10*l+this.e11*m+this.e12*b,r=this.e10*g+this.e11*n+this.e12*p,v=this.e13,t=this.e20*a+this.e21*k+this.e22*q,w=this.e20*l+this.e21*m+this.e22*b,B=this.e20*g+this.e21*n+this.e22*p,u=this.e23,D=this.e30*a+this.e31*k+this.e32*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*n+this.e32*p,n=this.e33;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e03=c;this.e10=f;this.e11=h;this.e12=r;this.e13=v;this.e20=t;this.e21=w;this.e22=B;this.e23=u;this.e30=D;this.e31=l;this.e32=g;this.e33=n;return this},Vh:function(a,b,e){var d=this.e01+a*this.e31,c=this.e02+a*this.e32,f=this.e03+a*this.e33,h=this.e10+b*this.e30,l=this.e11+b*this.e31,g=this.e12+b*this.e32;b=this.e13+b*this.e33;var k=this.e20+e*this.e30,m=this.e21+e*this.e31,n=this.e22+e*this.e32;e=this.e23+e*this.e33;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00+=a*this.e30;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},bb:function(a,b,e){var d=this.e01,c=this.e02,f=this.e00*a+this.e01*b+this.e02*e+this.e03,h=this.e10,l=this.e11,g=this.e12,k=this.e10*a+this.e11*b+this.e12*e+this.e13,m=this.e20,n=this.e21,q=this.e22,p=this.e20*a+this.e21*b+this.e22*e+this.e23,r=this.e30,v=this.e31,t=this.e32;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=v;this.e32=t;this.e33=a;return this},Mg:function(){return new M(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Ng:function(){var a=this.e10,b=this.e20,e=this.e30,d=this.e01,c=this.e11,f=this.e21,h=this.e31,l=this.e02,g=this.e12,k=this.e22,m=this.e32,n=this.e03,q=this.e13,p=this.e23,r=this.e33;this.e00=this.e00;this.e01=a;this.e02=b;this.e03=e;this.e10=d;this.e11=c;this.e12=f;this.e13=h;this.e20=l;this.e21=g;this.e22=k;this.e23=m;this.e30=n;this.e31=q;this.e32=p;this.e33=r;return this},Hc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,d=this.e21*this.e32-this.e22*this.e31,c=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*c+this.e13*d)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*c-this.e11*e+this.e13*a)-this.e03*(this.e10*d-this.e11*b+this.e12*a)},Lg:function(){return this.e00+this.e11+this.e22+this.e33},bd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,B=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);return new M(q*b,-t*b,l*b,-B*b,-p*b,n*b,-k*b,f*b,r*b,-g*b,m*b,-e*b,-v*b,h*b,-w*b,a*b)},cd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,w=this.e30*d-this.e31*b+this.e32*a,B=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);this.e00=q*b;this.e01=-t*b;this.e02=l*b;this.e03=-B*b;this.e10=-p*b;this.e11=n*b;this.e12=-k*b;this.e13=f*b;this.e20=r*b;this.e21=-g*b;this.e22=m*b;this.e23=-e*b;this.e30=-v*b;this.e31=h*b;this.e32=-w*b;this.e33=a*b;return this},Lb:function(a,b,e,d,c,f,h,l,g){d=a-d;c=b-c;f=e-f;var k=1/Math.sqrt(d*d+c*c+f*f);d*=k;c*=k;f*=k;var m=l*f-g*c;g=g*d-h*f;h=h*c-l*d;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=c*h-f*g;var k=f*m-d*h,n=d*g-c*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=n;this.e13=-(l*a+k*b+n*e);this.e20=d;this.e21=c;this.e22=f;this.e23=-(d*a+c*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},ce:function(a,b,e,d){a=1/Math.tan(.5*a);d/=e-d;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},Th:function(a,b,e,d){d=1/(e-d);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e33=this.e32=this.e31=this.e30=0;return this},Kg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},Zd:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},ad:function(a){var b=a.e01,e=a.e02,d=a.e10,c=a.e11,f=a.e12,h=a.e20,l=a.e21,g=a.e22;this.e00=a.e00;this.e01=b;this.e02=e;this.e03=0;this.e10=d;this.e11=c;this.e12=f;this.e13=0;this.e20=h;this.e21=l;this.e22=g;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},tb:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new M(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"},ra:M};qa.aa=!0;qa.abs=function(a){return 0<a?a:-a};qa.sin=function(a){return Math.sin(a)};qa.cos=function(a){return Math.cos(a)};qa.tan=function(a){return Math.tan(a)};qa.asin=function(a){return Math.asin(a)};qa.acos=function(a){return Math.acos(a)};qa.atan=function(a){return Math.atan(a)};qa.fe=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};qa.ee=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};qa.atan2=function(a,b){return Math.atan2(a,b)};qa.sqrt=function(a){return Math.sqrt(a)};qa.zc=function(a,b,e){return a<b?b:a>e?e:a};qa.be=function(){return Math.random()};qa.ce=function(a,b){return a+Math.random()*(b-a)};qa.de=function(a,b){return new t(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};qa.ym=function(){return new t(-1+2*Math.random(),-1+2*Math.random(),-1+2*Math.random())};Ib.aa=!0;Ib.prototype={zc:function(){return 0==this.c?new t:this.b[--this.c]},mc:function(){return 0==this.qb?new O:this.ob[--this.qb]},qc:function(){return 0==this.Uf?new M:this.zf[--this.Uf]},rc:function(){return 0==this.$d?new ha:this.Td[--this.$d]},Qa:function(a,b,e,d){if(null!=a){a.Z();if(this.c==this.b.length){for(var c=Array(this.c<<1),f=0,h=this.c;f<h;){var l=f++;c[l]=this.b[l];this.b[l]=null}this.b=c}this.b[this.c++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.qb==this.ob.length){a=Array(this.qb<<1);c=0;for(f=this.qb;c<f;)h=c++,a[h]=this.ob[h],this.ob[h]=null;this.ob=a}this.ob[this.qb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.Uf==this.zf.length){b=Array(this.Uf<<1);a=0;for(c=this.Uf;a<c;)f=a++,b[f]=this.zf[f],this.zf[f]=null;this.zf=b}this.zf[this.Uf++]=e}if(null!=d){d.x=0;d.y=0;d.z=0;d.w=1;if(this.$d==this.Td.length){e=Array(this.$d<<1);b=0;for(a=this.$d;b<a;)c=b++,e[c]=this.Td[c],this.Td[c]=null;this.Td=e}this.Td[this.$d++]=d}},lc:function(a){a.Z();if(this.c==this.b.length){for(var b=Array(this.c<<1),e=0,d=this.c;e<d;){var c=e++;b[c]=this.b[c];this.b[c]=null}this.b=b}this.b[this.c++]=a},bb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.qb==this.ob.length){for(var b=Array(this.qb<<1),e=0,d=this.qb;e<d;){var c=e++;b[c]=this.ob[c];this.ob[c]=null}this.ob=b}this.ob[this.qb++]=a},tb:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.Uf==this.zf.length){for(var b=Array(this.Uf<<1),e=0,d=this.Uf;e<d;){var c=e++;b[c]=this.zf[c];this.zf[c]=null}this.zf=b}this.zf[this.Uf++]=a},Lb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.$d==this.Td.length){for(var b=Array(this.$d<<1),e=0,d=this.$d;e<d;){var c=e++;b[c]=this.Td[c];this.Td[c]=null}this.Td=b}this.Td[this.$d++]=a},ra:Ib};ha.aa=!0;ha.prototype={Mf:function(){this.z=this.y=this.x=0;this.w=1;return this},Aa:function(a,b,e,d){this.x=a;this.y=b;this.z=e;this.w=d;return this},Qa:function(a){return new ha(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Cc:function(a){return new ha(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},rc:function(a){return new ha(this.x*a,this.y*a,this.z*a,this.w*a)},bb:function(a){var b=this.y+a.y,e=this.z+a.z,d=this.w+a.w;this.x+=a.x;this.y=b;this.z=e;this.w=d;return this},Hc:function(a){var b=this.y-a.y,e=this.z-a.z,d=this.w-a.w;this.x=this.x-a.x;this.y=b;this.z=e;this.w=d;return this},zc:function(a){var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},tb:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},qc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new ha(this.x*a,this.y*a,this.z*a,this.w*a)},mc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},ad:function(a,b){var e=a.x,d=a.y;a=a.z;var c=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*c+d*f+a*b)));if(!this.w)return c=e*e,f=d*d,b=a*a,c<f?c<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-d*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+c),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h),this;h=.5/this.w;this.x=(d*b-a*f)*h;this.y=(a*c-e*b)*h;this.z=(e*f-d*c)*h;return this},bd:function(a,b){var e,d,c,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,d=-a.y,c=-a.z,a=-a.w):(e=a.x,d=a.y,c=a.z,a=a.w);if(.999999<f)return e=new ha(this.x+(e-this.x)*b,this.y+(d-this.y)*b,this.z+(c-this.z)*b,this.w+(a-this.w)*b),d=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<d&&(d=1/d),c=e.y*d,a=e.z*d,f=e.w*d,e.x=e.x*d,e.y=c,e.z=a,e.w=f,e;b*=Math.acos(f);e-=this.x*f;d-=this.y*f;c-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+d*d+c*c+a*a),h=Math.sin(b);b=Math.cos(b);return new ha(this.x*b+e*f*h,this.y*b+d*f*h,this.z*b+c*f*h,this.w*b+a*f*h)},Zd:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new ha(this.x,this.y,this.z,this.w)},Lb:function(a){var b=a.e00,e=a.e11,d=a.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},cd:function(){var a=new O,b=this.x,e=this.y,d=this.z,c=this.w,f=2*b,h=2*e,l=2*d,g=b*f,k=e*h,d=d*l,m=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;a.e00=1-k-d;a.e01=m-c;a.e02=b+h;a.e10=m+c;a.e11=1-g-d;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"},ra:ha};oc.aa=!0;oc.prototype={Vm:function(){if(null!=this.xh){var a=this.Lm;this.xh.Yl(a,this.uc.Jb,this.vc.Jb,this.uc.a,this.vc.a,this.Li);(this.ug=0<a.numPoints)?(this.Ka.Jm(a.normal),this.Ke.Ec=a.cm()>F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?F.alternativeContactPositionCorrectionAlgorithm:F.defaultContactPositionCorrectionAlgorithm,a.incremental?this.Ll.Bn(a,this.C.a,this.D.a):this.Ll.Pn(a,this.C.a,this.D.a)):this.Ka.Je()}},Ck:function(){var a=this.uc.Cj,b=this.vc.Cj;a==b&&(b=null);null!=a&&a.$e(this);null!=b&&b.$e(this)},lc:function(){return this.uc},mc:function(){return this.vc},Zj:function(){return this.ug},bb:function(){return this.Ka},Qa:function(){return this.Ke},Lb:function(){return this.ja},tb:function(){return this.M},ra:oc};Cc.aa=!0;Cc.prototype={Qa:function(){return this.Ud},tb:function(){return this.Mc},Lb:function(){return this.ja},bb:function(){return this.M},ra:Cc};Fd.aa=!0;Fd.prototype={bn:function(){for(var a=this.ec.Yd;null!=a;){for(var b=a.M;;){var e;if(a.qg.sc==a.rg.sc)throw Error("assertion error: pp._p1._id != pp._p2._id is false");a.qg.sc<a.rg.sc?(e=a.qg.userData,a=a.rg.userData):(e=a.rg.userData,a=a.qg.userData);if(!this.Kn(e,a))break;var d=e.Wb,c=a.Wb,f;f=d.se<c.se?d.Nb:c.Nb;for(var d=e.sc,c=a.sc,h=!1;null!=f;){var l=f.M;f=f.Ud;if(f.uc.sc==d&&f.vc.sc==c){h=f.Hj=!0;break}f=l}h||(d=this.bg,null!=d?(this.bg=d.M,d.M=null):d=new oc,null==this.vd?this.vd=d:(this.qe.M=d,d.ja=this.qe),this.qe=d,d.Hj=!0,c=this.Km.Ib[e.Jb.Xb][a.Jb.Xb],d.uc=e,d.vc=a,d.C=e.Wb,d.D=a.Wb,d.ug=!1,null==d.C.Nb?d.C.Nb=d.rb:(d.C.fc.M=d.rb,d.rb.ja=d.C.fc),d.C.fc=d.rb,null==d.D.Nb?d.D.Nb=d.sb:(d.D.fc.M=d.sb,d.sb.ja=d.D.fc),d.D.fc=d.sb,d.C.se++,d.D.se++,d.rb.Mc=d.D,d.sb.Mc=d.C,d.rb.Ud=d,d.sb.Ud=d,d.xh=c,d=d.Ke,d.uc=e,d.vc=a,d.C=d.uc.Wb,d.D=d.vc.Wb,d.aj=d.C.a,d.bj=d.D.a,this.ji++);break}a=b}},cn:function(){for(var a=this.ec.Gj,b=this.vd;null!=b;){for(var e=b.M;;){if(b.Hj){b.Hj=!1;b.Qj=!1;break}if(!a){var d=b.ja,c=b.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ja);b.M=null;b.ja=null;d=b.rb.ja;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.rb==b.C.Nb&&(b.C.Nb=b.C.Nb.M);b.rb==b.C.fc&&(b.C.fc=b.C.fc.ja);b.rb.M=null;b.rb.ja=null;d=b.sb.ja;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.sb==b.D.Nb&&(b.D.Nb=b.D.Nb.M);b.sb==b.D.fc&&(b.D.fc=b.D.fc.ja);b.sb.M=null;b.sb.ja=null;b.C.se--;b.D.se--;b.rb.Mc=null;b.sb.Mc=null;b.rb.Ud=null;b.sb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ka.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}var c=b.uc,d=b.vc,f=c.Wb,h=d.Wb,h=!h.Gb&&1!=h.Xb;if((f.Gb||1==f.Xb)&&!h){b.Qj=!0;break}f=c.u;h=d.u;c=c.Oa;d=d.Oa;if(!(c.J<d.G&&c.G>d.J&&c.K<d.H&&c.H>d.K&&c.L<d.I&&c.I>d.L)){d=b.ja;c=b.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b==this.vd&&(this.vd=this.vd.M);b==this.qe&&(this.qe=this.qe.ja);b.M=null;b.ja=null;d=b.rb.ja;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.rb==b.C.Nb&&(b.C.Nb=b.C.Nb.M);b.rb==b.C.fc&&(b.C.fc=b.C.fc.ja);b.rb.M=null;b.rb.ja=null;d=b.sb.ja;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ja=d);b.sb==b.D.Nb&&(b.D.Nb=b.D.Nb.M);b.sb==b.D.fc&&(b.D.fc=b.D.fc.ja);b.sb.M=null;b.sb.ja=null;b.C.se--;b.D.se--;b.rb.Mc=null;b.sb.Mc=null;b.rb.Ud=null;b.sb.Ud=null;b.uc=null;b.vc=null;b.C=null;b.D=null;b.ug=!1;b.Li.Je();b.Ka.Je();b.xh=null;d=b.Ke;d.uc=null;d.vc=null;d.C=null;d.D=null;d.aj=null;d.bj=null;b.M=this.bg;this.bg=b;this.ji--;break}b.Qj=!(f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa&&f.pa<h.ma&&f.ma>h.pa);break}b=e}},Kn:function(a,b){var e=a.Wb,d=b.Wb;if(e==d||0!=e.Xb&&0!=d.Xb||!(a.Aj&b.Bj&&b.Aj&a.Bj))return!1;e.$g<d.$g?(a=e.re,e=d):a=d.re;for(;null!=a;){if(a.Mc==e&&!a.wk.gk)return!1;a=a.M}return!0},Ok:function(){this.ec.si();this.bn();this.cn()},Ck:function(){for(var a=this.vd;null!=a;){var b=a.M;a.ug&&a.Ck();a=b}},bb:function(){return this.ji},Qa:function(){return this.vd},ra:Fd};Dk.aa=!0;Dk.prototype={Je:function(){for(;0<this.vf;)this.xf[--this.vf]=null;for(;0<this.wf;)this.yf[--this.wf]=null;for(;0<this.ih;)this.ph[--this.ih]=null;for(;0<this.hh;)this.oh[--this.hh]=null},fk:function(a){if(this.vf==this.xf.length){for(var b=Array(this.vf<<1),e=0,d=this.vf;e<d;){var c=e++;b[c]=this.xf[c];this.xf[c]=null}this.xf=b}a.Cf=!0;this.xf[this.vf++]=a},yl:function(a,b){if(this.wf==this.yf.length){for(var e=Array(this.wf<<1),d=0,c=this.wf;d<c;){var f=d++;e[f]=this.yf[f];this.yf[f]=null}this.yf=e}a.Cf=!0;this.yf[this.wf++]=a;if(b==ec.SPLIT_IMPULSE){if(this.ih==this.ph.length){e=Array(this.ih<<1);d=0;for(c=this.ih;d<c;)f=d++,e[f]=this.ph[f],this.ph[f]=null;this.ph=e}this.ph[this.ih++]=a}if(b==ec.NGS){if(this.hh==this.oh.length){b=Array(this.hh<<1);e=0;for(d=this.hh;e<d;)c=e++,b[c]=this.oh[c],this.oh[c]=null;this.oh=b}this.oh[this.hh++]=a}},Um:function(a,b){a=a.dt;var e=b.qa,d=b.a;e.v=d.v;e.A=d.A;e.B=d.B;e.o=d.o;e.f=d.f;e.h=d.h;e.i=d.i;e.m=d.m;e.j=d.j;e.l=d.l;e.g=d.g;e.s=d.s;b.hk&&b.eb*b.eb+b.fb*b.fb+b.gb*b.gb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&b.ib*b.ib+b.jb*b.jb+b.kb*b.kb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?(b.yb+=a,b.yb>F.sleepingTimeThreshold&&(b.Gb=!0,b.yb=0)):b.yb=0;if(!b.Gb){if(0==b.Xb){var e=a*b.Il,d=e*e,e=1/(1+e+d*(.5+.16666666666666666*e+.041666666666666664*d)),d=a*b.Al,c=d*d,d=1/(1+d+c*(.5+.16666666666666666*d+.041666666666666664*c)),f,h,l,c=this.dm*b.Ug;f=this.em*b.Ug;h=this.fm*b.Ug;c+=b.yh*b.$a;f+=b.zh*b.$a;h+=b.Ah*b.$a;var g,k;g=b.P*b.kf+b.R*b.lf+b.S*b.mf;k=b.T*b.kf+b.U*b.lf+b.V*b.mf;l=b.W*b.kf+b.X*b.lf+b.Y*b.mf;b.eb+=c*a;b.fb+=f*a;b.gb+=h*a;b.eb*=e;b.fb*=e;b.gb*=e;b.ib+=g*a;b.jb+=k*a;b.kb+=l*a;b.ib*=d;b.jb*=d;b.kb*=d}b.Hl(a);for(a=b.Ac;null!=a;){e=a.M;d=a.qa;f=a.ia;var c=b.qa,m,n,q,p,r;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;d=a.a;f=a.ia;c=b.a;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;a.Jb.Mb(a.u,a.qa);d=a.u.na;c=a.u.oa;f=a.u.pa;h=a.u.ka;l=a.u.la;g=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=f<a.u.pa?f:a.u.pa;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;a.u.ma=g>a.u.ma?g:a.u.ma;null!=a.Oa&&(d=a.a.v-a.qa.v,c=a.a.A-a.qa.A,f=a.a.B-a.qa.B,h=a.nc,h.x=d,h.y=c,h.z=f,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=e}}},Tm:function(a,b,e){for(var d=a.dt,c=!0,f=0,h=this.vf;f<h;){var l=f++,g=this.xf[l],k=g.qa,m=g.a;k.v=m.v;k.A=m.A;k.B=m.B;k.o=m.o;k.f=m.f;k.h=m.h;k.i=m.i;k.m=m.m;k.j=m.j;k.l=m.l;k.g=m.g;k.s=m.s;g.Gb=!1;g.hk&&g.eb*g.eb+g.fb*g.fb+g.gb*g.gb<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&g.ib*g.ib+g.jb*g.jb+g.kb*g.kb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?g.yb+=d:g.yb=0;g.yb<F.sleepingTimeThreshold&&(c=!1);if(0==g.Xb){var n=d*g.Il,q=n*n,p=1/(1+n+q*(.5+.16666666666666666*n+.041666666666666664*q)),r=d*g.Al,v=r*r,t=1/(1+r+v*(.5+.16666666666666666*r+.041666666666666664*v)),w,B,u,D,V,A;w=this.dm*g.Ug;B=this.em*g.Ug;u=this.fm*g.Ug;w+=g.yh*g.$a;B+=g.zh*g.$a;u+=g.Ah*g.$a;var E,x,Ab;E=g.P*g.kf+g.R*g.lf+g.S*g.mf;x=g.T*g.kf+g.U*g.lf+g.V*g.mf;Ab=g.W*g.kf+g.X*g.lf+g.Y*g.mf;D=E;V=x;A=Ab;g.eb+=w*d;g.fb+=B*d;g.gb+=u*d;g.eb*=p;g.fb*=p;g.gb*=p;g.ib+=D*d;g.jb+=V*d;g.kb+=A*d;g.ib*=t;g.jb*=t;g.kb*=t}}if(c)for(var N=0,I=this.vf;N<I;){var C=N++,L=this.xf[C];L.Gb=!0;L.yb=0}else{for(var O=0,ga=this.wf;O<ga;){var M=O++;this.yf[M].jh(a)}for(var Vb=0,ha=this.wf;Vb<ha;){var ka=Vb++;this.yf[ka].sh(a)}for(var Va=0;Va<b;){Va++;for(var U=0,R=this.wf;U<R;){var cc=U++;this.yf[cc].nh()}}for(var Ma=0,Qa=this.wf;Ma<Qa;){var vc=Ma++;this.yf[vc].vi(a)}for(var Oa=0,Ba=this.vf;Oa<Ba;){var Bb=Oa++;this.xf[Bb].Hl(d)}for(var H=0,Pa=this.ih;H<Pa;){var ba=H++;this.ph[ba].Gg(a)}for(var Q=0;Q<e;){Q++;for(var P=0,wa=this.ih;P<wa;){var ta=P++;this.ph[ta].mh()}}for(var W=0,oa=this.vf;W<oa;){var y=W++;this.xf[y].Rm()}for(var Ga=0,ca=this.hh;Ga<ca;){var Ca=Ga++;this.oh[Ca].Gg(a)}for(var xa=0;xa<e;){xa++;for(var Da=0,Ra=this.hh;Da<Ra;){var la=Da++;this.oh[la].lh(a)}}for(var Z=0,Ea=this.wf;Z<Ea;){var ra=Z++;this.yf[ra].$e()}for(var va=0,J=this.vf;va<J;)for(var Ka=va++,Xa=this.xf[Ka],S=Xa.Ac;null!=S;){var Ya=S.M,T=S.qa,K=S.ia,ia=Xa.qa,gb,da,Ic,sa,fb,jb,Za,ma,na;gb=ia.o*K.o+ia.f*K.i+ia.h*K.l;da=ia.o*K.f+ia.f*K.m+ia.h*K.g;Ic=ia.o*K.h+ia.f*K.j+ia.h*K.s;sa=ia.i*K.o+ia.m*K.i+ia.j*K.l;fb=ia.i*K.f+ia.m*K.m+ia.j*K.g;jb=ia.i*K.h+ia.m*K.j+ia.j*K.s;Za=ia.l*K.o+ia.g*K.i+ia.s*K.l;ma=ia.l*K.f+ia.g*K.m+ia.s*K.g;na=ia.l*K.h+ia.g*K.j+ia.s*K.s;T.o=gb;T.f=da;T.h=Ic;T.i=sa;T.m=fb;T.j=jb;T.l=Za;T.g=ma;T.s=na;var Ia,Fa,nb;Ia=ia.o*K.v+ia.f*K.A+ia.h*K.B;Fa=ia.i*K.v+ia.m*K.A+ia.j*K.B;nb=ia.l*K.v+ia.g*K.A+ia.s*K.B;T.v=Ia;T.A=Fa;T.B=nb;T.v+=ia.v;T.A+=ia.A;T.B+=ia.B;var fa=S.a,ea=S.ia,ja=Xa.a,cb,za,tb,Ta,qb,rb,vb,Wa,yb;cb=ja.o*ea.o+ja.f*ea.i+ja.h*ea.l;za=ja.o*ea.f+ja.f*ea.m+ja.h*ea.g;tb=ja.o*ea.h+ja.f*ea.j+ja.h*ea.s;Ta=ja.i*ea.o+ja.m*ea.i+ja.j*ea.l;qb=ja.i*ea.f+ja.m*ea.m+ja.j*ea.g;rb=ja.i*ea.h+ja.m*ea.j+ja.j*ea.s;vb=ja.l*ea.o+ja.g*ea.i+ja.s*ea.l;Wa=ja.l*ea.f+ja.g*ea.m+ja.s*ea.g;yb=ja.l*ea.h+ja.g*ea.j+ja.s*ea.s;fa.o=cb;fa.f=za;fa.h=tb;fa.i=Ta;fa.m=qb;fa.j=rb;fa.l=vb;fa.g=Wa;fa.s=yb;var rc,$a,ua;rc=ja.o*ea.v+ja.f*ea.A+ja.h*ea.B;$a=ja.i*ea.v+ja.m*ea.A+ja.j*ea.B;ua=ja.l*ea.v+ja.g*ea.A+ja.s*ea.B;fa.v=rc;fa.A=$a;fa.B=ua;fa.v+=ja.v;fa.A+=ja.A;fa.B+=ja.B;var Jb,G,ob,db,qc,ab;S.Jb.Mb(S.u,S.qa);Jb=S.u.na;G=S.u.oa;ob=S.u.pa;db=S.u.ka;qc=S.u.la;ab=S.u.ma;S.Jb.Mb(S.u,S.a);S.u.na=Jb<S.u.na?Jb:S.u.na;S.u.oa=G<S.u.oa?G:S.u.oa;S.u.pa=ob<S.u.pa?ob:S.u.pa;S.u.ka=db>S.u.ka?db:S.u.ka;S.u.la=qc>S.u.la?qc:S.u.la;S.u.ma=ab>S.u.ma?ab:S.u.ma;if(null!=S.Oa){var hb,z,Db;hb=S.a.v-S.qa.v;z=S.a.A-S.qa.A;Db=S.a.B-S.qa.B;var qa=S.nc;qa.x=hb;qa.y=z;qa.z=Db;S.Wb.kc.ec.sd(S.Oa,S.u,S.nc)}S=Ya}}},ra:Dk};jj.aa=!0;jj.prototype={ra:jj};Ha.aa=!0;Ha.prototype={Ok:function(){var a=(new Date).getTime()/1E3;this.wh.Ok();Rc.broadPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a);for(var a=(new Date).getTime()/1E3,b=this.wh.vd;null!=b;){var e=b.M;b.Qj||b.Vm();b=e}Rc.narrowPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a)},Sm:function(){var a=(new Date).getTime()/1E3;if(F.disableSleeping)for(var b=this.jf;null!=b;){var e=b.M;b.Gb=!1;b.yb=0;b=e}if(this.dh.length<this.Vi){for(b=this.dh.length<<1;b<this.Vi;)b<<=1;this.dh=Array(b)}this.Mj=0;b=this.lg;e=this.lk;b.dm=e.x;b.em=e.y;b.fm=e.z;b=this.jf;for(this.hf=0;null!=b;){for(e=b.M;!b.Cf&&!b.Gb&&1!=b.Xb;){if(0==b.se&&0==b.$g){this.lg.Um(this.Dh,b);this.Mj++;break}this.Xm(b);this.lg.Tm(this.Dh,this.Bk,this.Ak);this.lg.Je();this.Mj++;break}b=e}this.wh.Ck();for(b=this.jf;null!=b;)e=b.M,b.Cf=!1,b=e;for(b=this.jf;null!=b;)e=b.M,b.yh=0,b.zh=0,b.Ah=0,b.kf=0,b.lf=0,b.mf=0,b=e;for(;0<this.hf;)this.Qe[--this.hf].Cf=!1,this.Qe[this.hf]=null;Rc.dynamicsTime=1E3*((new Date).getTime()/1E3-a)},Xm:function(a){var b=1;this.lg.fk(a);for(this.dh[0]=a;0<b;)if(a=this.dh[--b],this.dh[b]=null,1!=a.Xb){for(var e=a.Nb;null!=e;){var d=e.M,c=e.Ud.Ke,f=e.Ud.Ke.Rj;if(c.Zj()&&!f.Cf){if(this.Qe.length==this.hf){for(var h=Array(this.hf<<1),l=0,g=this.hf;l<g;){var k=l++;h[k]=this.Qe[k];this.Qe[k]=null}this.Qe=h}this.Qe[this.hf++]=f;this.lg.yl(f,c.Ec);e=e.Mc;e.Cf||(this.lg.fk(e),this.dh[b++]=e)}e=d}for(d=a.re;null!=d;){a=d.M;e=d.wk;c=e.Rj;if(!c.Cf){if(this.Qe.length==this.hf){f=Array(this.hf<<1);h=0;for(l=this.hf;h<l;)g=h++,f[g]=this.Qe[g],this.Qe[g]=null;this.Qe=f}this.Qe[this.hf++]=c;this.lg.yl(c,e.Ec);d=d.Mc;d.Cf||(this.lg.fk(d),this.dh[b++]=d)}d=a}}},Mm:function(a,b){a.drawBvh&&this.kk(a,b.Pb,0,a.style.bvhNodeColor)},kk:function(a,b,e,d){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var c=this.Ha,f=0==c.c?new t:c.b[--c.c],c=this.Ha,c=0==c.c?new t:c.b[--c.c];f.x=b.J;f.y=b.K;f.z=b.L;c.x=b.G;c.y=b.H;c.z=b.I;a.Pk(f,c,d);var h=this.Ha;if(null!=f){f.Z();if(h.c==h.b.length){for(var l=Array(h.c<<1),g=0,k=h.c;g<k;){var m=g++;l[m]=h.b[m];h.b[m]=null}h.b=l}h.b[h.c++]=f}f=this.Ha;if(null!=c){c.Z();if(f.c==f.b.length){h=Array(f.c<<1);l=0;for(g=f.c;l<g;)k=l++,h[k]=f.b[k],f.b[k]=null;f.b=h}f.b[f.c++]=c}}this.kk(a,b.F[0],e+1,d);this.kk(a,b.F[1],e+1,d)}},Pm:function(a){for(var b=a.style,e=this.jf;null!=e;){var d=e.M,c=null,f=0==e.Xb;f||(c=2==e.Xb?b.kinematicShapeColor:b.staticShapeColor);for(var h=e.Ac;null!=h;){var l=h.M;f&&(c=h.sc&1?e.Gb?b.sleepingShapeColor2:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Gb?b.sleepingShapeColor1:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var g=h.Jb,k=h.a;switch(g.Xb){case 0:a.Am(k,g.ab,c);break;case 1:var m=g,n=this.Ha,q=0==n.c?new t:n.b[--n.c],p=q;p.x=m.Le;p.y=m.Me;p.z=m.Ne;a.Pl(k,q,c);var r=this.Ha;if(null!=q){q.Z();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var B=aa++;v[B]=r.b[B];r.b[B]=null}r.b=v}r.b[r.c++]=q}break;case 2:var u=g;a.Wl(k,u.ab,u.Hb,c);break;case 3:var D=g;a.Tl(k,D.ab,D.Hb,c);break;case 4:var V=g;a.Rl(k,V.ab,V.Hb,c);break;case 5:var A=g,E=A.Ae,x=this.Ha,Ab=0==x.c?new t:x.b[--x.c],N=this.Ha,I=0==N.c?new t:N.b[--N.c],C=this.Ha,L=0==C.c?new t:C.b[--C.c],M=this.Ha,ga=0==M.c?new t:M.b[--M.c],ha=this.Ha,Vb=0==ha.c?new t:ha.b[--ha.c],qa=this.Ha,ka=0==qa.c?new t:qa.b[--qa.c],Va=this.Ha,U=0==Va.qb?new O:Va.ob[--Va.qb],R=this.Ha,cc=0==R.c?new t:R.b[--R.c],Ma=U;Ma.e00=k.o;Ma.e01=k.f;Ma.e02=k.h;Ma.e10=k.i;Ma.e11=k.m;Ma.e12=k.j;Ma.e20=k.l;Ma.e21=k.g;Ma.e22=k.s;var Qa=cc;Qa.x=k.v;Qa.y=k.A;Qa.z=k.B;for(var vc=0,Oa=E;vc<Oa;){var Ba=vc++,Bb=A.tg[Ba],H=A.zb[Ba];Bb.x=H.x;Bb.y=H.y;Bb.z=H.z;var Pa=Bb,ba=Pa.x*U.e10+Pa.y*U.e11+Pa.z*U.e12,Q=Pa.x*U.e20+Pa.y*U.e21+Pa.z*U.e22;Pa.x=Pa.x*U.e00+Pa.y*U.e01+Pa.z*U.e02;Pa.y=ba;Pa.z=Q;var P=Pa,wa=P.y+cc.y,ta=P.z+cc.z;P.x=P.x+cc.x;P.y=wa;P.z=ta}if(30<E)for(var W=0,oa=E;W<oa;){var y=W++,Ga=A.tg[y];Ab.x=Ga.x;Ab.y=Ga.y;Ab.z=Ga.z;var ca=A.tg[(y+1)%E];I.x=ca.x;I.y=ca.y;I.z=ca.z}else if(this.Xh.wireframe||10<E)for(var Ca=0,xa=E;Ca<xa;){var Da=Ca++,Ra=A.tg[Da];Ab.x=Ra.x;Ab.y=Ra.y;Ab.z=Ra.z;for(var la=0,Z=Da;la<Z;){var Ea=la++,ra=A.tg[Ea];I.x=ra.x;I.y=ra.y;I.z=ra.z}}else for(var va=0,J=E;va<J;){var Ka=va++,Xa=A.tg[Ka];Ab.x=Xa.x;Ab.y=Xa.y;Ab.z=Xa.z;for(var S=0,Ya=Ka;S<Ya;){var T=S++,K=A.tg[T];I.x=K.x;I.y=K.y;I.z=K.z;for(var ia=0,gb=T;ia<gb;){var da=ia++,Ic=A.tg[da];L.x=Ic.x;L.y=Ic.y;L.z=Ic.z;ga.x=I.x;ga.y=I.y;ga.z=I.z;var sa=ga,fb=sa.y-Ab.y,jb=sa.z-Ab.z;sa.x=sa.x-Ab.x;sa.y=fb;sa.z=jb;Vb.x=L.x;Vb.y=L.y;Vb.z=L.z;var Za=Vb,ma=Za.y-Ab.y,na=Za.z-Ab.z;Za.x=Za.x-Ab.x;Za.y=ma;Za.z=na;ka.x=ga.x;ka.y=ga.y;ka.z=ga.z;var Ia=ka,Fa=Ia.z*Vb.x-Ia.x*Vb.z,nb=Ia.x*Vb.y-Ia.y*Vb.x;Ia.x=Ia.y*Vb.z-Ia.z*Vb.y;Ia.y=Fa;Ia.z=nb;var fa=Ia,ea=Math.sqrt(fa.x*fa.x+fa.y*fa.y+fa.z*fa.z);0<ea&&(ea=1/ea);var ja=fa.y*ea,cb=fa.z*ea;fa.x=fa.x*ea;fa.y=ja;fa.z=cb;var za=-ka.y,tb=-ka.z;ka.x=-ka.x;ka.y=za;ka.z=tb}}}var Ta=this.Ha;if(null!=Ab){Ab.Z();if(Ta.c==Ta.b.length){for(var qb=Array(Ta.c<<1),rb=0,vb=Ta.c;rb<vb;){var Wa=rb++;qb[Wa]=Ta.b[Wa];Ta.b[Wa]=null}Ta.b=qb}Ta.b[Ta.c++]=Ab}var yb=this.Ha;if(null!=I){I.Z();if(yb.c==yb.b.length){for(var rc=Array(yb.c<<1),$a=0,ua=yb.c;$a<ua;){var Jb=$a++;rc[Jb]=yb.b[Jb];yb.b[Jb]=null}yb.b=rc}yb.b[yb.c++]=I}var G=this.Ha;if(null!=L){L.Z();if(G.c==G.b.length){for(var ob=Array(G.c<<1),db=0,qc=G.c;db<qc;){var ab=db++;ob[ab]=G.b[ab];G.b[ab]=null}G.b=ob}G.b[G.c++]=L}var hb=this.Ha;if(null!=ga){ga.Z();if(hb.c==hb.b.length){for(var z=Array(hb.c<<1),Db=0,Ha=hb.c;Db<Ha;){var Tc=Db++;z[Tc]=hb.b[Tc];hb.b[Tc]=null}hb.b=z}hb.b[hb.c++]=ga}var Eb=this.Ha;if(null!=Vb){Vb.Z();if(Eb.c==Eb.b.length){for(var Na=Array(Eb.c<<1),mb=0,xb=Eb.c;mb<xb;){var zb=mb++;Na[zb]=Eb.b[zb];Eb.b[zb]=null}Eb.b=Na}Eb.b[Eb.c++]=Vb}var eb=this.Ha;if(null!=ka){ka.Z();if(eb.c==eb.b.length){for(var Y=Array(eb.c<<1),La=0,kb=eb.c;La<kb;){var Sa=La++;Y[Sa]=eb.b[Sa];eb.b[Sa]=null}eb.b=Y}eb.b[eb.c++]=ka}var ib=this.Ha;if(null!=U){U.e00=1;U.e01=0;U.e02=0;U.e10=0;U.e11=1;U.e12=0;U.e20=0;U.e21=0;U.e22=1;if(ib.qb==ib.ob.length){for(var Ja=Array(ib.qb<<1),Hb=0,ya=ib.qb;Hb<ya;){var X=Hb++;Ja[X]=ib.ob[X];ib.ob[X]=null}ib.ob=Ja}ib.ob[ib.qb++]=U}var Cb=this.Ha;if(null!=cc){cc.Z();if(Cb.c==Cb.b.length){for(var Dc=Array(Cb.c<<1),Pc=0,pa=Cb.c;Pc<pa;){var gc=Pc++;Dc[gc]=Cb.b[gc];Cb.b[gc]=null}Cb.b=Dc}Cb.b[Cb.c++]=cc}}}if(a.drawAabbs){var Nc=h.u,Aa=b.aabbColor,bb=this.Ha,zc=0==bb.c?new t:bb.b[--bb.c],pb=this.Ha,jc=0==pb.c?new t:pb.b[--pb.c],tc=zc;tc.x=Nc.na;tc.y=Nc.oa;tc.z=Nc.pa;var kc=jc;kc.x=Nc.ka;kc.y=Nc.la;kc.z=Nc.ma;a.Pk(zc,jc,Aa);var ac=this.Ha;if(null!=zc){zc.Z();if(ac.c==ac.b.length){for(var Wb=Array(ac.c<<1),Xb=0,Rb=ac.c;Xb<Rb;){var hc=Xb++;Wb[hc]=ac.b[hc];ac.b[hc]=null}ac.b=Wb}ac.b[ac.c++]=zc}var Sb=this.Ha;if(null!=jc){jc.Z();if(Sb.c==Sb.b.length){for(var Qb=Array(Sb.c<<1),Yb=0,ic=Sb.c;Yb<ic;){var Kb=Yb++;Qb[Kb]=Sb.b[Kb];Sb.b[Kb]=null}Sb.b=Qb}Sb.b[Sb.c++]=jc}}h=l}e=d}},Nm:function(a){if(a.drawPairs||a.drawContacts)for(var b=this.wh.vd;null!=b;){var e=b.M;if(a.drawPairs){var d=this.Ha,c=0==d.c?new t:d.b[--d.c],f=this.Ha,h=0==f.c?new t:f.b[--f.c],l=c;l.x=b.uc.a.v;l.y=b.uc.a.A;l.z=b.uc.a.B;var g=h;g.x=b.vc.a.v;g.y=b.vc.a.A;g.z=b.vc.a.B;var k=this.Ha;if(null!=c){c.Z();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=c}var r=this.Ha;if(null!=h){h.Z();if(r.c==r.b.length){for(var v=Array(r.c<<1),aa=0,w=r.c;aa<w;){var B=aa++;v[B]=r.b[B];r.b[B]=null}r.b=v}r.b[r.c++]=h}}if(a.drawContacts)for(var u=b.Ke,D=b.Ke.Ka.tc,V=0,A=b.Ke.Ka.Xd;V<A;){var E=V++,x=D[E],Ab=a.style,N=this.Ha,I=0==N.c?new t:N.b[--N.c],F=this.Ha,C=0==F.c?new t:F.b[--F.c],L=this.Ha,ga=0==L.c?new t:L.b[--L.c],O=this.Ha,M=0==O.c?new t:O.b[--O.c],ha=this.Ha,ka=0==ha.c?new t:ha.b[--ha.c],Va=I;Va.x=x.Fd;Va.y=x.Gd;Va.z=x.Hd;var U=C;U.x=x.Id;U.y=x.Jd;U.z=x.Kd;var R=ga;R.x=u.Ka.mg;R.y=u.Ka.ng;R.z=u.Ka.og;var cc=M;cc.x=u.Ka.Xi;cc.y=u.Ka.Yi;cc.z=u.Ka.Zi;var Ma=ka;Ma.x=u.Ka.Gi;Ma.y=u.Ka.Hi;Ma.z=u.Ka.Ii;C.x=I.x;C.y=I.y;C.z=I.z;var Qa=C,vc=Ab.contactNormalLength,Oa=Qa.y+ga.y*vc,Ba=Qa.z+ga.z*vc;Qa.x=Qa.x+ga.x*vc;Qa.y=Oa;Qa.z=Ba;if(a.drawContactBases){C.x=I.x;C.y=I.y;C.z=I.z;var Bb=C,H=Ab.contactTangentLength,Pa=Bb.y+M.y*H,ba=Bb.z+M.z*H;Bb.x=Bb.x+M.x*H;Bb.y=Pa;Bb.z=ba;C.x=I.x;C.y=I.y;C.z=I.z;var Q=C,P=Ab.contactBinormalLength,wa=Q.y+ka.y*P,ta=Q.z+ka.z*P;Q.x=Q.x+ka.x*P;Q.y=wa;Q.z=ta}var W=this.Ha;if(null!=I){I.Z();if(W.c==W.b.length){for(var oa=Array(W.c<<1),y=0,Ga=W.c;y<Ga;){var ca=y++;oa[ca]=W.b[ca];W.b[ca]=null}W.b=oa}W.b[W.c++]=I}var Ca=this.Ha;if(null!=C){C.Z();if(Ca.c==Ca.b.length){for(var xa=Array(Ca.c<<1),Da=0,Ra=Ca.c;Da<Ra;){var la=Da++;xa[la]=Ca.b[la];Ca.b[la]=null}Ca.b=xa}Ca.b[Ca.c++]=C}var Z=this.Ha;if(null!=ga){ga.Z();if(Z.c==Z.b.length){for(var Ea=Array(Z.c<<1),ra=0,va=Z.c;ra<va;){var J=ra++;Ea[J]=Z.b[J];Z.b[J]=null}Z.b=Ea}Z.b[Z.c++]=ga}var Ka=this.Ha;if(null!=M){M.Z();if(Ka.c==Ka.b.length){for(var Xa=Array(Ka.c<<1),S=0,Ya=Ka.c;S<Ya;){var T=S++;Xa[T]=Ka.b[T];Ka.b[T]=null}Ka.b=Xa}Ka.b[Ka.c++]=M}var K=this.Ha;if(null!=ka){ka.Z();if(K.c==K.b.length){for(var ia=Array(K.c<<1),gb=0,da=K.c;gb<da;){var qa=gb++;ia[qa]=K.b[qa];K.b[qa]=null}K.b=ia}K.b[K.c++]=ka}}b=e}if(a.drawJoints)for(var sa=this.Bh;null!=sa;){var fb=sa.M,jb=this.Ha,Za=0==jb.c?new t:jb.b[--jb.c],ma=this.Ha,na=0==ma.c?new t:ma.b[--ma.c],Ia=Za;Ia.x=sa.C.a.v;Ia.y=sa.C.a.A;Ia.z=sa.C.a.B;var Fa=na;Fa.x=sa.D.a.v;Fa.y=sa.D.a.A;Fa.z=sa.D.a.B;var nb=this.Ha,fa=0==nb.c?new t:nb.b[--nb.c],ea=this.Ha,ja=0==ea.c?new t:ea.b[--ea.c],cb=this.Ha,za=0==cb.c?new t:cb.b[--cb.c],tb=this.Ha,Ta=0==tb.c?new t:tb.b[--tb.c],qb=this.Ha,rb=0==qb.c?new t:qb.b[--qb.c],vb=this.Ha,Wa=0==vb.c?new t:vb.b[--vb.c],yb=this.Ha,rc=0==yb.c?new t:yb.b[--yb.c],$a=this.Ha,ua=0==$a.c?new t:$a.b[--$a.c],Jb=fa;Jb.x=sa.Df;Jb.y=sa.Ef;Jb.z=sa.Ff;var G=ja;G.x=sa.Gf;G.y=sa.Hf;G.z=sa.If;var ob=za;ob.x=sa.vb;ob.y=sa.wb;ob.z=sa.xb;var db=Ta;db.x=sa.xe;db.y=sa.ye;db.z=sa.ze;var qc=rb;qc.x=sa.th;qc.y=sa.uh;qc.z=sa.vh;var ab=Wa;ab.x=sa.Zb;ab.y=sa.$b;ab.z=sa.ac;var hb=rc;hb.x=sa.ne;hb.y=sa.oe;hb.z=sa.pe;var z=ua;z.x=sa.Rg;z.y=sa.Sg;z.z=sa.Tg;if(a.drawJointLimits)switch(sa.Xb){case 1:var Db=sa.Ch;this.Ni(a,fa,Ta,rb,rc,a.style.jointRotationalConstraintRadius,Db.lowerLimit,Db.upperLimit,a.style.jointLineColor);break;case 2:var Ha=sa,Tc=a.style.jointLineColor,Eb=Ha.Dk,Na=Ha.Kk;this.Ni(a,ja,Ta,rb,rc,a.style.jointRotationalConstraintRadius,Eb.lowerLimit,Eb.upperLimit,Tc);this.El(a,fa,za,Na.lowerLimit,Na.upperLimit,Tc);break;case 3:var mb=sa.Ch;this.El(a,fa,za,mb.lowerLimit,mb.upperLimit,a.style.jointLineColor);break;case 4:var xb=sa,zb=a.style.jointRotationalConstraintRadius,eb=a.style.jointLineColor,Y=xb.xk,La=xb.yk;this.Ni(a,fa,Ta,rb,Ta,zb,xb.yi-Y.upperLimit,xb.yi-Y.lowerLimit,eb);this.Ni(a,ja,Wa,rc,Wa,zb,La.lowerLimit-xb.zi,La.upperLimit-xb.zi,eb);break;case 5:var kb=sa,Sa=a.style.jointRotationalConstraintRadius,ib=a.style.jointLineColor,Ja=kb.Mk;this.Ni(a,ja,rc,ua,rc,Sa,Ja.lowerLimit-kb.ej,Ja.upperLimit-kb.ej,ib);this.Om(a,fa,za,Ta,rb,kb.Jj,kb.Kj,Sa,ib);var Hb=this.Ha,ya=0==Hb.c?new t:Hb.b[--Hb.c];ya.x=ja.x;ya.y=ja.y;ya.z=ja.z;var X=ya,Cb=X.y+Wa.y*Sa,Dc=X.z+Wa.z*Sa;X.x=X.x+Wa.x*Sa;X.y=Cb;X.z=Dc;var Pc=X,pa=this.Ha;if(null!=Pc){Pc.Z();if(pa.c==pa.b.length){for(var gc=Array(pa.c<<1),Aa=0,bb=pa.c;Aa<bb;){var pb=Aa++;gc[pb]=pa.b[pb];pa.b[pb]=null}pa.b=gc}pa.b[pa.c++]=Pc}}var zc=this.Ha;if(null!=Za){Za.Z();if(zc.c==zc.b.length){for(var wb=Array(zc.c<<1),jc=0,tc=zc.c;jc<tc;){var kc=jc++;wb[kc]=zc.b[kc];zc.b[kc]=null}zc.b=wb}zc.b[zc.c++]=Za}var ac=this.Ha;if(null!=na){na.Z();if(ac.c==ac.b.length){for(var Wb=Array(ac.c<<1),Xb=0,Rb=ac.c;Xb<Rb;){var hc=Xb++;Wb[hc]=ac.b[hc];ac.b[hc]=null}ac.b=Wb}ac.b[ac.c++]=na}var Sb=this.Ha;if(null!=fa){fa.Z();if(Sb.c==Sb.b.length){for(var Qb=Array(Sb.c<<1),Yb=0,ic=Sb.c;Yb<ic;){var Kb=Yb++;Qb[Kb]=Sb.b[Kb];Sb.b[Kb]=null}Sb.b=Qb}Sb.b[Sb.c++]=fa}var $b=this.Ha;if(null!=ja){ja.Z();if($b.c==$b.b.length){for(var lb=Array($b.c<<1),sb=0,Mb=$b.c;sb<Mb;){var Ua=sb++;lb[Ua]=$b.b[Ua];$b.b[Ua]=null}$b.b=lb}$b.b[$b.c++]=ja}var uc=this.Ha;if(null!=za){za.Z();if(uc.c==uc.b.length){for(var mc=Array(uc.c<<1),jd=0,rd=uc.c;jd<rd;){var Gb=jd++;mc[Gb]=uc.b[Gb];uc.b[Gb]=null}uc.b=mc}uc.b[uc.c++]=za}var sc=this.Ha;if(null!=Ta){Ta.Z();if(sc.c==sc.b.length){for(var xc=Array(sc.c<<1),Ob=0,Fb=sc.c;Ob<Fb;){var Nb=Ob++;xc[Nb]=sc.b[Nb];sc.b[Nb]=null}sc.b=xc}sc.b[sc.c++]=Ta}var Zc=this.Ha;if(null!=rb){rb.Z();if(Zc.c==Zc.b.length){for(var Gc=Array(Zc.c<<1),ec=0,Ib=Zc.c;ec<Ib;){var fc=ec++;Gc[fc]=Zc.b[fc];Zc.b[fc]=null}Zc.b=Gc}Zc.b[Zc.c++]=rb}var Id=this.Ha;if(null!=Wa){Wa.Z();if(Id.c==Id.b.length){for(var Lb=Array(Id.c<<1),nc=0,Pb=Id.c;nc<Pb;){var Zb=nc++;Lb[Zb]=Id.b[Zb];Id.b[Zb]=null}Id.b=Lb}Id.b[Id.c++]=Wa}var Ac=this.Ha;if(null!=rc){rc.Z();if(Ac.c==Ac.b.length){for(var ub=Array(Ac.c<<1),dc=0,Tb=Ac.c;dc<Tb;){var oc=dc++;ub[oc]=Ac.b[oc];Ac.b[oc]=null}Ac.b=ub}Ac.b[Ac.c++]=rc}var Qc=this.Ha;if(null!=ua){ua.Z();if(Qc.c==Qc.b.length){for(var Bc=Array(Qc.c<<1),yc=0,lc=Qc.c;yc<lc;){var bc=yc++;Bc[bc]=Qc.b[bc];Qc.b[bc]=null}Qc.b=Bc}Qc.b[Qc.c++]=ua}sa=fb}},Ni:function(a,b,e,d,c,f,h,l,g){if(h!=l){var k=this.Ha,k=0==k.c?new t:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;var m=k.y+c.y*f,n=k.z+c.z*f;k.x+=c.x*f;k.y=m;k.z=n;c=this.Ha;if(null!=k){k.Z();if(c.c==c.b.length){for(var m=Array(c.c<<1),n=0,q=c.c;n<q;){var p=n++;m[p]=c.b[p];c.b[p]=null}c.b=m}c.b[c.c++]=k}}h>l?a.ellipse(b,e,d,f,f,g):a.arc(b,e,d,f,f,h,l,!0,g)},El:function(a,b,e,d,c){if(d<c){a=this.Ha;a=0==a.c?new t:a.b[--a.c];a.x=b.x;a.y=b.y;a.z=b.z;var f=a.y+e.y*d,h=a.z+e.z*d;a.x+=e.x*d;a.y=f;a.z=h;d=this.Ha;d=0==d.c?new t:d.b[--d.c];d.x=b.x;d.y=b.y;d.z=b.z;b=d.y+e.y*c;f=d.z+e.z*c;d.x+=e.x*c;d.y=b;d.z=f;e=this.Ha;if(null!=a){a.Z();if(e.c==e.b.length){c=Array(e.c<<1);b=0;for(f=e.c;b<f;)h=b++,c[h]=e.b[h],e.b[h]=null;e.b=c}e.b[e.c++]=a}a=this.Ha;if(null!=d){d.Z();if(a.c==a.b.length){e=Array(a.c<<1);c=0;for(b=a.c;c<b;)f=c++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=d}}},Om:function(a,b,e,d,c,f,h,l){var g=0;a=this.Ha;var k=0==a.c?new t:a.b[--a.c];a=this.Ha;var m=0==a.$d?new ha:a.Td[--a.$d];a=this.Ha;var n=0==a.qb?new O:a.ob[--a.qb];a=this.Ha;a=0==a.c?new t:a.b[--a.c];for(var q=0;17>q;){q++;var p=Math.cos(g)*f,r=Math.sin(g)*h,v=Math.sqrt(p*p+r*r),aa=Math.sin(.5*v),w=Math.cos(.5*v),B=k.Z(),u=B.y+d.y*p,D=B.z+d.z*p;B.x=B.x+d.x*p;B.y=u;B.z=D;p=B;B=p.y+c.y*r;u=p.z+c.z*r;p.x=p.x+c.x*r;p.y=B;p.z=u;r=1/v*aa;v=k.y*r;aa=k.z*r;k.x=k.x*r;k.y=v;k.z=aa;m.x=k.x;m.y=k.y;m.z=k.z;m.w=w;var V=m.x,D=m.y,p=m.z,v=m.w,A=2*V,u=2*D,aa=2*p,w=V*A,r=D*u,p=p*aa,B=V*u,D=D*aa,V=V*aa,A=v*A,u=v*u,v=v*aa;n.e00=1-r-p;n.e01=B-v;n.e02=V+u;n.e10=B+v;n.e11=1-w-p;n.e12=D-A;n.e20=V-u;n.e21=D+A;n.e22=1-w-r;w=this.Ha;w=0==w.c?new t:w.b[--w.c];r=w.y+e.y*l;v=w.z+e.z*l;w.x=w.x+e.x*l;w.y=r;w.z=v;r=w.x*n.e10+w.y*n.e11+w.z*n.e12;v=w.x*n.e20+w.y*n.e21+w.z*n.e22;w.x=w.x*n.e00+w.y*n.e01+w.z*n.e02;w.y=r;w.z=v;r=w;v=r.y+b.y;aa=r.z+b.z;r.x=r.x+b.x;r.y=v;r.z=aa;r=this.Ha;if(null!=a){a.Z();if(r.c==r.b.length){v=Array(r.c<<1);aa=0;for(p=r.c;aa<p;)B=aa++,v[B]=r.b[B],r.b[B]=null;r.b=v}r.b[r.c++]=a}a=w;g+=.39269908169872375}b=this.Ha;if(null!=k){k.Z();if(b.c==b.b.length){e=Array(b.c<<1);d=0;for(c=b.c;d<c;)f=d++,e[f]=b.b[f],b.b[f]=null;b.b=e}b.b[b.c++]=k}k=this.Ha;if(null!=m){m.x=0;m.y=0;m.z=0;m.w=1;if(k.$d==k.Td.length){b=Array(k.$d<<1);e=0;for(d=k.$d;e<d;)c=e++,b[c]=k.Td[c],k.Td[c]=null;k.Td=b}k.Td[k.$d++]=m}m=this.Ha;if(null!=n){n.e00=1;n.e01=0;n.e02=0;n.e10=0;n.e11=1;n.e12=0;n.e20=0;n.e21=0;n.e22=1;if(m.qb==m.ob.length){k=Array(m.qb<<1);b=0;for(e=m.qb;b<e;)d=b++,k[d]=m.ob[d],m.ob[d]=null;m.ob=k}m.ob[m.qb++]=n}n=this.Ha;if(null!=a){a.Z();if(n.c==n.b.length){m=Array(n.c<<1);k=0;for(b=n.c;k<b;)e=k++,m[e]=n.b[e],n.b[e]=null;n.b=m}n.b[n.c++]=a}},be:function(a){0<this.Dh.dt&&(this.Dh.dtRatio=a/this.Dh.dt);this.Dh.dt=a;this.Dh.invDt=1/a;a=(new Date).getTime()/1E3;this.Ok();this.Sm();Rc.totalTime=1E3*((new Date).getTime()/1E3-a)},bb:function(a){if(null!=a.kc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.jf?this.jf=a:(this.mi.M=a,a.ja=this.mi);this.mi=a;a.kc=this;for(a=a.Ac;null!=a;){var b=a.M;a.Oa=this.ec.Gh(a,a.u);a.sc=this.Jl++;this.pg++;a=b}this.Vi++},ce:function(a){if(a.kc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.jf&&(this.jf=this.jf.M);a==this.mi&&(this.mi=this.mi.ja);a.M=null;a.ja=null;a.kc=null;for(a=a.Ac;null!=a;){b=a.M;this.ec.Hh(a.Oa);a.Oa=null;a.sc=-1;for(var d=a.Wb.Nb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Mc;d.Gb=!1;d.yb=0;var d=this.wh,f=c.ja,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ja);c.M=null;c.ja=null;f=c.rb.ja;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.rb==c.C.Nb&&(c.C.Nb=c.C.Nb.M);c.rb==c.C.fc&&(c.C.fc=c.C.fc.ja);c.rb.M=null;c.rb.ja=null;f=c.sb.ja;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.sb==c.D.Nb&&(c.D.Nb=c.D.Nb.M);c.sb==c.D.fc&&(c.D.fc=c.D.fc.ja);c.sb.M=null;c.sb.ja=null;c.C.se--;c.D.se--;c.rb.Mc=null;c.sb.Mc=null;c.rb.Ud=null;c.sb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ka.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}this.pg--;a=b}this.Vi--},Qa:function(a){if(null!=a.kc)throw Error("A joint cannot belong to multiple worlds.");null==this.Bh?this.Bh=a:(this.hi.M=a,a.ja=this.hi);this.hi=a;a.kc=this;a.rb.Mc=a.D;a.sb.Mc=a.C;null==a.C.re?a.C.re=a.rb:(a.C.Oe.M=a.rb,a.rb.ja=a.C.Oe);a.C.Oe=a.rb;null==a.D.re?a.D.re=a.sb:(a.D.Oe.M=a.sb,a.sb.ja=a.D.Oe);a.D.Oe=a.sb;a.C.$g++;a.D.$g++;var b=a.C;b.Gb=!1;b.yb=0;b=a.D;b.Gb=!1;b.yb=0;a.ed();this.zk++},sl:function(a){if(a.kc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.Bh&&(this.Bh=this.Bh.M);a==this.hi&&(this.hi=this.hi.ja);a.M=null;a.ja=null;a.kc=null;b=a.rb.ja;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a.rb==a.C.re&&(a.C.re=a.C.re.M);a.rb==a.C.Oe&&(a.C.Oe=a.C.Oe.ja);a.rb.M=null;a.rb.ja=null;b=a.sb.ja;e=a.sb.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a.sb==a.D.re&&(a.D.re=a.D.re.M);a.sb==a.D.Oe&&(a.D.Oe=a.D.Oe.ja);a.sb.M=null;a.sb.ja=null;a.rb.Mc=null;a.sb.Mc=null;a.C.$g--;a.D.$g--;b=a.C;b.Gb=!1;b.yb=0;a=a.D;a.Gb=!1;a.yb=0;this.zk--},de:function(a){this.Xh=a},mc:function(){return this.Xh},tb:function(){null!=this.Xh&&(bc.bb(this.ec,fc)&&this.Mm(this.Xh,bc.lc(this.ec,fc).ge),this.Pm(this.Xh),this.Nm(this.Xh))},Sd:function(a,b,e){var d=this.Oj.gj;d.x=a.x;d.y=a.y;d.z=a.z;d=this.Oj.end;d.x=b.x;d.y=b.y;d.z=b.z;this.Oj.ij=e;this.ec.Sd(a,b,this.Oj)},rf:function(a,b,e,d){this.Mi.Ul=a;var c=this.Mi.gj;c.v=b.v;c.A=b.A;c.B=b.B;c.o=b.o;c.f=b.f;c.h=b.h;c.i=b.i;c.m=b.m;c.j=b.j;c.l=b.l;c.g=b.g;c.s=b.s;c=this.Mi.Vf;c.x=e.x;c.y=e.y;c.z=e.z;this.Mi.ij=d;this.ec.rf(a,b,e,this.Mi)},eh:function(a,b){this.ek.u.Zd(a);this.ek.Bl=b;this.ec.eh(a,this.ek)},cd:function(){return this.jf},rc:function(){return this.Bh},Lb:function(){return this.ec},lc:function(){return this.wh},ad:function(){return this.Vi},Cc:function(){return this.zk},Pd:function(){return this.pg},zc:function(){return this.Mj},bd:function(){return this.Bk},me:function(a){this.Bk=a},Hc:function(){return this.Ak},fe:function(a){this.Ak=a},qc:function(){return this.lk},ee:function(a){var b=this.lk;b.x=a.x;b.y=a.y;b.z=a.z},ra:Ha};Se.aa=!0;Se.Kb=wc;Se.prototype=sb(wc.prototype,{td:function(a){a=a.userData;a.Jb.Sd(this.gj,this.end,a.a,this.wi)&&this.ij.td(a,this.wi)},ra:Se});ue.aa=!0;ue.Kb=wc;ue.prototype=sb(wc.prototype,{td:function(a){a=a.userData;bc.bb(a.Jb,bb)&&Pb.Qa.rf(this.Ul,a.Jb,this.gj,a.a,this.Vf,this.Z,this.wi)&&this.ij.td(a,this.wi)},ra:ue});pf.aa=!0;pf.Kb=wc;pf.prototype=sb(wc.prototype,{td:function(a){a=a.userData;var b=a.u;b.na<this.u.ka&&b.ka>this.u.na&&b.oa<this.u.la&&b.la>this.u.oa&&b.pa<this.u.ma&&b.ma>this.u.pa&&this.Bl.td(a)},ra:pf});ed.aa=!0;ed.prototype={td:function(){},ra:ed};Xc.aa=!0;Xc.prototype={Qa:function(){},tb:function(){},$e:function(){},bb:function(){},ra:Xc};Mc.aa=!0;Mc.prototype={td:function(){},ra:Mc};wd.aa=!0;wd.Kb=Mc;wd.prototype=sb(Mc.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1},td:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}},ra:wd});Fb.aa=!0;Fb.prototype={Pk:function(a,b){var e=this.p,d=(0==e.c?new t:e.b[--e.c]).Aa(a.x,a.y,a.z),e=this.p,c=(0==e.c?new t:e.b[--e.c]).Aa(a.x,a.y,b.z),e=this.p,f=(0==e.c?new t:e.b[--e.c]).Aa(a.x,b.y,a.z),e=this.p,h=(0==e.c?new t:e.b[--e.c]).Aa(a.x,b.y,b.z),e=this.p,l=(0==e.c?new t:e.b[--e.c]).Aa(b.x,a.y,a.z),e=this.p,e=(0==e.c?new t:e.b[--e.c]).Aa(b.x,a.y,b.z),g=this.p;a=(0==g.c?new t:g.b[--g.c]).Aa(b.x,b.y,a.z);g=this.p;b=(0==g.c?new t:g.b[--g.c]).Aa(b.x,b.y,b.z);g=this.p;if(null!=d){d.Z();if(g.c==g.b.length){for(var k=Array(g.c<<1),m=0,n=g.c;m<n;){var q=m++;k[q]=g.b[q];g.b[q]=null}g.b=k}g.b[g.c++]=d}d=this.p;if(null!=c){c.Z();if(d.c==d.b.length){g=Array(d.c<<1);k=0;for(m=d.c;k<m;)n=k++,g[n]=d.b[n],d.b[n]=null;d.b=g}d.b[d.c++]=c}c=this.p;if(null!=f){f.Z();if(c.c==c.b.length){d=Array(c.c<<1);g=0;for(k=c.c;g<k;)m=g++,d[m]=c.b[m],c.b[m]=null;c.b=d}c.b[c.c++]=f}f=this.p;if(null!=h){h.Z();if(f.c==f.b.length){c=Array(f.c<<1);d=0;for(g=f.c;d<g;)k=d++,c[k]=f.b[k],f.b[k]=null;f.b=c}f.b[f.c++]=h}h=this.p;if(null!=l){l.Z();if(h.c==h.b.length){f=Array(h.c<<1);c=0;for(d=h.c;c<d;)g=c++,f[g]=h.b[g],h.b[g]=null;h.b=f}h.b[h.c++]=l}l=this.p;if(null!=e){e.Z();if(l.c==l.b.length){h=Array(l.c<<1);f=0;for(c=l.c;f<c;)d=f++,h[d]=l.b[d],l.b[d]=null;l.b=h}l.b[l.c++]=e}e=this.p;if(null!=a){a.Z();if(e.c==e.b.length){l=Array(e.c<<1);h=0;for(f=e.c;h<f;)c=h++,l[c]=e.b[c],e.b[c]=null;e.b=l}e.b[e.c++]=a}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){e=Array(a.c<<1);l=0;for(h=a.c;l<h;)f=l++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=b}},ellipse:function(a,b,e,d,c,f){this.arc(a,b,e,d,c,0,6.28318530717958,!1,f)},arc:function(a,b,e,d,c,f,h){var l=this.p,l=0==l.c?new t:l.b[--l.c];l.x=b.x;l.y=b.y;l.z=b.z;b=l.y*d;var g=l.z*d;l.x=l.x*d;l.y=b;l.z=g;b=l;d=this.p;d=0==d.c?new t:d.b[--d.c];d.x=e.x;d.y=e.y;d.z=e.z;e=d.y*c;l=d.z*c;d.x=d.x*c;d.y=e;d.z=l;e=d;c=h-f;0>c&&(c=-c);(l=c/.5235987755982984+.5|0)||(l=1);c=f;f=(h-f)/l;h=this.p;h=0==h.c?new t:h.b[--h.c];h.x=a.x;h.y=a.y;h.z=a.z;d=Math.cos(c);var g=h.y+b.y*d,k=h.z+b.z*d;h.x+=b.x*d;h.y=g;h.z=k;d=Math.sin(c);g=h.y+e.y*d;k=h.z+e.z*d;h.x+=e.x*d;h.y=g;h.z=k;for(d=0;d<l;){d++;c+=f;g=this.p;g=0==g.c?new t:g.b[--g.c];g.x=a.x;g.y=a.y;g.z=a.z;var k=Math.cos(c),m=g.y+b.y*k,n=g.z+b.z*k;g.x=g.x+b.x*k;g.y=m;g.z=n;k=Math.sin(c);m=g.y+e.y*k;n=g.z+e.z*k;g.x=g.x+e.x*k;g.y=m;g.z=n;k=this.p;if(null!=h){h.Z();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=h}h=g}a=this.p;if(null!=h){h.Z();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(d=a.c;f<d;)l=f++,c[l]=a.b[l],a.b[l]=null;a.b=c}a.b[a.c++]=h}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(h=a.c;f<h;)d=f++,c[d]=a.b[d],a.b[d]=null;a.b=c}a.b[a.c++]=b}b=this.p;if(null!=e){e.Z();if(b.c==b.b.length){a=Array(b.c<<1);c=0;for(f=b.c;c<f;)h=c++,a[h]=b.b[h],b.b[h]=null;b.b=a}b.b[b.c++]=e}},Tl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.qb?new O:q.ob[--q.qb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.Aa(p.e00,p.e10,p.e20);l.Aa(p.e01,p.e11,p.e21);k.Aa(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var B=this.p,u=0==B.c?new t:B.b[--B.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,A=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=A;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=u.x;x.y=u.y;x.z=u.z;var Ab=-b,N=x.y+f.y*Ab,I=x.z+f.z*Ab;x.x+=f.x*Ab;x.y=N;x.z=I;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ga=0==L.c?new t:L.b[--L.c];ga.x=u.x;ga.y=u.y;ga.z=u.z;var M=ga.y+f.y*b,Vb=ga.z+f.z*b;ga.x+=f.x*b;ga.y=M;ga.z=Vb;var ha=ga.y+0*k.y,ka=ga.z+0*k.z;ga.x+=0*k.x;ga.y=ha;ga.z=ka;var Va=this.p,U=0==Va.c?new t:Va.b[--Va.c];U.x=u.x;U.y=u.y;U.z=u.z;var R=U.y+0*f.y,cc=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=cc;var Ma=-b,Qa=U.y+k.y*Ma,vc=U.z+k.z*Ma;U.x+=k.x*Ma;U.y=Qa;U.z=vc;var Oa=this.p,Ba=0==Oa.c?new t:Oa.b[--Oa.c];Ba.x=u.x;Ba.y=u.y;Ba.z=u.z;var Bb=Ba.y+0*f.y,H=Ba.z+0*f.z;Ba.x+=0*f.x;Ba.y=Bb;Ba.z=H;var Pa=Ba.y+k.y*b,ba=Ba.z+k.z*b;Ba.x+=k.x*b;Ba.y=Pa;Ba.z=ba;this.ellipse(u,f,k,b,b,d);var Q=this.p;if(null!=x){x.Z();if(Q.c==Q.b.length){for(var P=Array(Q.c<<1),wa=0,ta=Q.c;wa<ta;){var W=wa++;P[W]=Q.b[W];Q.b[W]=null}Q.b=P}Q.b[Q.c++]=x}var oa=this.p;if(null!=ga){ga.Z();if(oa.c==oa.b.length){for(var y=Array(oa.c<<1),Ga=0,ca=oa.c;Ga<ca;){var Ca=Ga++;y[Ca]=oa.b[Ca];oa.b[Ca]=null}oa.b=y}oa.b[oa.c++]=ga}var xa=this.p;if(null!=U){U.Z();if(xa.c==xa.b.length){for(var Da=Array(xa.c<<1),Ra=0,la=xa.c;Ra<la;){var Z=Ra++;Da[Z]=xa.b[Z];xa.b[Z]=null}xa.b=Da}xa.b[xa.c++]=U}var Ea=this.p;if(null!=Ba){Ba.Z();if(Ea.c==Ea.b.length){for(var ra=Array(Ea.c<<1),va=0,J=Ea.c;va<J;){var Ka=va++;ra[Ka]=Ea.b[Ka];Ea.b[Ka]=null}Ea.b=ra}Ea.b[Ea.c++]=Ba}}else{for(var Xa=1/Math.sqrt(b*b+4*e*e),S=2*e*Xa,Ya=b*Xa,T=0;8>T;){var K=T++,ia=this.Af[K],gb=this.jj[K];ia.x=gb.x;ia.y=gb.y;ia.z=gb.z;var da=ia,qa=da.y*S,sa=da.z*S;da.x=da.x*S;da.y=qa;da.z=sa;da.y+=Ya;var fb=this.Af[K],jb=fb.x*p.e10+fb.y*p.e11+fb.z*p.e12,Za=fb.x*p.e20+fb.y*p.e21+fb.z*p.e22;fb.x=fb.x*p.e00+fb.y*p.e01+fb.z*p.e02;fb.y=jb;fb.z=Za;var ma=this.ae[K],na=this.Sl[K];ma.x=na.x;ma.y=na.y;ma.z=na.z;var Ia=ma,Fa=Ia.y*S,nb=Ia.z*S;Ia.x=Ia.x*S;Ia.y=Fa;Ia.z=nb;Ia.y+=Ya;var fa=this.ae[K],ea=fa.x*p.e10+fa.y*p.e11+fa.z*p.e12,ja=fa.x*p.e20+fa.y*p.e21+fa.z*p.e22;fa.x=fa.x*p.e00+fa.y*p.e01+fa.z*p.e02;fa.y=ea;fa.z=ja;var cb=this.Fe[K],za=this.jj[K];cb.x=za.x;cb.y=za.y;cb.z=za.z;var tb=cb,Ta=tb.x*p.e10+tb.y*p.e11+tb.z*p.e12,qb=tb.x*p.e20+tb.y*p.e21+tb.z*p.e22;tb.x=tb.x*p.e00+tb.y*p.e01+tb.z*p.e02;tb.y=Ta;tb.z=qb;var rb=tb,vb=rb.y*b,Wa=rb.z*b;rb.x=rb.x*b;rb.y=vb;rb.z=Wa;var yb=rb,rc=yb.y+n.y,$a=yb.z+n.z;yb.x=yb.x+n.x;yb.y=rc;yb.z=$a;var ua=this.Fe[K],Jb=-e,G=ua.y+l.y*Jb,ob=ua.z+l.z*Jb;ua.x=ua.x+l.x*Jb;ua.y=G;ua.z=ob}for(var db=0;8>db;){var qc=db++,ab=this.ae[qc],hb=this.p,z=0==hb.c?new t:hb.b[--hb.c];z.x=l.x;z.y=l.y;z.z=l.z;var Db=z,pa=-Db.y,ya=-Db.z;Db.x=-Db.x;Db.y=pa;Db.z=ya;var ab=Db,Eb=this.p;if(null!=ab){ab.Z();if(Eb.c==Eb.b.length){for(var Na=Array(Eb.c<<1),mb=0,xb=Eb.c;mb<xb;){var zb=mb++;Na[zb]=Eb.b[zb];Eb.b[zb]=null}Eb.b=Na}Eb.b[Eb.c++]=ab}}}var eb=this.p;if(null!=v){v.Z();if(eb.c==eb.b.length){for(var Y=Array(eb.c<<1),La=0,kb=eb.c;La<kb;){var Sa=La++;Y[Sa]=eb.b[Sa];eb.b[Sa]=null}eb.b=Y}eb.b[eb.c++]=v}var ib=this.p;if(null!=u){u.Z();if(ib.c==ib.b.length){for(var Ja=Array(ib.c<<1),Hb=0,Ha=ib.c;Hb<Ha;){var X=Hb++;Ja[X]=ib.b[X];ib.b[X]=null}ib.b=Ja}ib.b[ib.c++]=u}var Cb=this.p;if(null!=n){n.Z();if(Cb.c==Cb.b.length){for(var Dc=Array(Cb.c<<1),Aa=0,bb=Cb.c;Aa<bb;){var gc=Aa++;Dc[gc]=Cb.b[gc];Cb.b[gc]=null}Cb.b=Dc}Cb.b[Cb.c++]=n}var Nc=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Nc.qb==Nc.ob.length){for(var pb=Array(Nc.qb<<1),wb=0,zc=Nc.qb;wb<zc;){var sb=wb++;pb[sb]=Nc.ob[sb];Nc.ob[sb]=null}Nc.ob=pb}Nc.ob[Nc.qb++]=p}var jc=this.p;if(null!=f){f.Z();if(jc.c==jc.b.length){for(var tc=Array(jc.c<<1),kc=0,ac=jc.c;kc<ac;){var Wb=kc++;tc[Wb]=jc.b[Wb];jc.b[Wb]=null}jc.b=tc}jc.b[jc.c++]=f}var Xb=this.p;if(null!=l){l.Z();if(Xb.c==Xb.b.length){for(var Rb=Array(Xb.c<<1),hc=0,Sb=Xb.c;hc<Sb;){var Qb=hc++;Rb[Qb]=Xb.b[Qb];Xb.b[Qb]=null}Xb.b=Rb}Xb.b[Xb.c++]=l}var Yb=this.p;if(null!=k){k.Z();if(Yb.c==Yb.b.length){for(var ic=Array(Yb.c<<1),Kb=0,$b=Yb.c;Kb<$b;){var lb=Kb++;ic[lb]=Yb.b[lb];Yb.b[lb]=null}Yb.b=ic}Yb.b[Yb.c++]=k}},Wl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.qb?new O:q.ob[--q.qb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.Aa(p.e00,p.e10,p.e20);l.Aa(p.e01,p.e11,p.e21);k.Aa(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var aa=v.y+l.y*e,w=v.z+l.z*e;v.x+=l.x*e;v.y=aa;v.z=w;var B=this.p,u=0==B.c?new t:B.b[--B.c];u.x=n.x;u.y=n.y;u.z=n.z;var D=-e,V=u.y+l.y*D,A=u.z+l.z*D;u.x+=l.x*D;u.y=V;u.z=A;if(this.wireframe){var E=this.p,x=0==E.c?new t:E.b[--E.c];x.x=v.x;x.y=v.y;x.z=v.z;var Ab=-b,N=x.y+f.y*Ab,I=x.z+f.z*Ab;x.x+=f.x*Ab;x.y=N;x.z=I;var F=x.y+0*k.y,C=x.z+0*k.z;x.x+=0*k.x;x.y=F;x.z=C;var L=this.p,ga=0==L.c?new t:L.b[--L.c];ga.x=v.x;ga.y=v.y;ga.z=v.z;var M=ga.y+f.y*b,Vb=ga.z+f.z*b;ga.x+=f.x*b;ga.y=M;ga.z=Vb;var ha=ga.y+0*k.y,ka=ga.z+0*k.z;ga.x+=0*k.x;ga.y=ha;ga.z=ka;var Va=this.p,U=0==Va.c?new t:Va.b[--Va.c];U.x=v.x;U.y=v.y;U.z=v.z;var R=U.y+0*f.y,cc=U.z+0*f.z;U.x+=0*f.x;U.y=R;U.z=cc;var Ma=-b,Qa=U.y+k.y*Ma,vc=U.z+k.z*Ma;U.x+=k.x*Ma;U.y=Qa;U.z=vc;var Oa=this.p,Ba=0==Oa.c?new t:Oa.b[--Oa.c];Ba.x=v.x;Ba.y=v.y;Ba.z=v.z;var Bb=Ba.y+0*f.y,H=Ba.z+0*f.z;Ba.x+=0*f.x;Ba.y=Bb;Ba.z=H;var Pa=Ba.y+k.y*b,ba=Ba.z+k.z*b;Ba.x+=k.x*b;Ba.y=Pa;Ba.z=ba;var Q=this.p,P=0==Q.c?new t:Q.b[--Q.c];P.x=u.x;P.y=u.y;P.z=u.z;var wa=-b,ta=P.y+f.y*wa,W=P.z+f.z*wa;P.x+=f.x*wa;P.y=ta;P.z=W;var oa=P.y+0*k.y,y=P.z+0*k.z;P.x+=0*k.x;P.y=oa;P.z=y;var Ga=this.p,ca=0==Ga.c?new t:Ga.b[--Ga.c];ca.x=u.x;ca.y=u.y;ca.z=u.z;var Ca=ca.y+f.y*b,xa=ca.z+f.z*b;ca.x+=f.x*b;ca.y=Ca;ca.z=xa;var Da=ca.y+0*k.y,Ra=ca.z+0*k.z;ca.x+=0*k.x;ca.y=Da;ca.z=Ra;var la=this.p,Z=0==la.c?new t:la.b[--la.c];Z.x=u.x;Z.y=u.y;Z.z=u.z;var Ea=Z.y+0*f.y,ra=Z.z+0*f.z;Z.x+=0*f.x;Z.y=Ea;Z.z=ra;var va=-b,J=Z.y+k.y*va,Ka=Z.z+k.z*va;Z.x+=k.x*va;Z.y=J;Z.z=Ka;var Xa=this.p,S=0==Xa.c?new t:Xa.b[--Xa.c];S.x=u.x;S.y=u.y;S.z=u.z;var Ya=S.y+0*f.y,T=S.z+0*f.z;S.x+=0*f.x;S.y=Ya;S.z=T;var K=S.y+k.y*b,ia=S.z+k.z*b;S.x+=k.x*b;S.y=K;S.z=ia;this.ellipse(v,f,k,b,b,d);this.ellipse(u,f,k,b,b,d);var gb=this.p;if(null!=x){x.Z();if(gb.c==gb.b.length){for(var da=Array(gb.c<<1),qa=0,sa=gb.c;qa<sa;){var fb=qa++;da[fb]=gb.b[fb];gb.b[fb]=null}gb.b=da}gb.b[gb.c++]=x}var jb=this.p;if(null!=ga){ga.Z();if(jb.c==jb.b.length){for(var Za=Array(jb.c<<1),ma=0,na=jb.c;ma<na;){var Ia=ma++;Za[Ia]=jb.b[Ia];jb.b[Ia]=null}jb.b=Za}jb.b[jb.c++]=ga}var Fa=this.p;if(null!=U){U.Z();if(Fa.c==Fa.b.length){for(var nb=Array(Fa.c<<1),fa=0,ea=Fa.c;fa<ea;){var ja=fa++;nb[ja]=Fa.b[ja];Fa.b[ja]=null}Fa.b=nb}Fa.b[Fa.c++]=U}var cb=this.p;if(null!=Ba){Ba.Z();if(cb.c==cb.b.length){for(var za=Array(cb.c<<1),tb=0,Ta=cb.c;tb<Ta;){var qb=tb++;za[qb]=cb.b[qb];cb.b[qb]=null}cb.b=za}cb.b[cb.c++]=Ba}var rb=this.p;if(null!=P){P.Z();if(rb.c==rb.b.length){for(var vb=Array(rb.c<<1),Wa=0,yb=rb.c;Wa<yb;){var rc=Wa++;vb[rc]=rb.b[rc];rb.b[rc]=null}rb.b=vb}rb.b[rb.c++]=P}var $a=this.p;if(null!=ca){ca.Z();if($a.c==$a.b.length){for(var ua=Array($a.c<<1),Jb=0,G=$a.c;Jb<G;){var ob=Jb++;ua[ob]=$a.b[ob];$a.b[ob]=null}$a.b=ua}$a.b[$a.c++]=ca}var db=this.p;if(null!=Z){Z.Z();if(db.c==db.b.length){for(var qc=Array(db.c<<1),ab=0,hb=db.c;ab<hb;){var z=ab++;qc[z]=db.b[z];db.b[z]=null}db.b=qc}db.b[db.c++]=Z}var Db=this.p;if(null!=S){S.Z();if(Db.c==Db.b.length){for(var pa=Array(Db.c<<1),ya=0,Eb=Db.c;ya<Eb;){var Na=ya++;pa[Na]=Db.b[Na];Db.b[Na]=null}Db.b=pa}Db.b[Db.c++]=S}}else{for(var mb=0;8>mb;){var xb=mb++,zb=this.Af[xb],eb=this.jj[xb];zb.x=eb.x;zb.y=eb.y;zb.z=eb.z;var Y=zb,La=Y.x*p.e10+Y.y*p.e11+Y.z*p.e12,kb=Y.x*p.e20+Y.y*p.e21+Y.z*p.e22;Y.x=Y.x*p.e00+Y.y*p.e01+Y.z*p.e02;Y.y=La;Y.z=kb;var Sa=this.ae[xb],ib=this.Af[xb];Sa.x=ib.x;Sa.y=ib.y;Sa.z=ib.z;var Ja=Sa,Hb=Ja.y*b,Ha=Ja.z*b;Ja.x=Ja.x*b;Ja.y=Hb;Ja.z=Ha;var X=Ja,Cb=X.y+n.y,Aa=X.z+n.z;X.x=X.x+n.x;X.y=Cb;X.z=Aa;var Pc=this.Fe[xb],pb=this.ae[xb];Pc.x=pb.x;Pc.y=pb.y;Pc.z=pb.z;var gc=this.ae[xb],bb=gc.y+l.y*e,sb=gc.z+l.z*e;gc.x=gc.x+l.x*e;gc.y=bb;gc.z=sb;var wb=this.Fe[xb],zc=-e,Mb=wb.y+l.y*zc,jc=wb.z+l.z*zc;wb.x=wb.x+l.x*zc;wb.y=Mb;wb.z=jc}for(var tc=0;8>tc;){var kc=tc++,ac=v,Wb=this.ae[kc],Xb=this.ae[(kc+1)%8],Rb=l,ac=u,Wb=this.Fe[(kc+1)%8],Xb=this.Fe[kc],hc=this.p,Sb=0==hc.c?new t:hc.b[--hc.c];Sb.x=l.x;Sb.y=l.y;Sb.z=l.z;var Qb=Sb,Yb=-Qb.y,ic=-Qb.z;Qb.x=-Qb.x;Qb.y=Yb;Qb.z=ic;var Rb=Qb,Kb=this.p;if(null!=Rb){Rb.Z();if(Kb.c==Kb.b.length){for(var $b=Array(Kb.c<<1),lb=0,Ua=Kb.c;lb<Ua;){var Gb=lb++;$b[Gb]=Kb.b[Gb];Kb.b[Gb]=null}Kb.b=$b}Kb.b[Kb.c++]=Rb}var ac=this.ae[kc],Wb=this.Fe[kc],Xb=this.Fe[(kc+1)%8],Ob=this.ae[(kc+1)%8],Rb=this.Af[kc],uc=this.Af[(kc+1)%8];this.rect(ac,Wb,Xb,Ob,Rb,Rb,uc,uc,d)}}var mc=this.p;if(null!=v){v.Z();if(mc.c==mc.b.length){for(var jd=Array(mc.c<<1),rd=0,Fb=mc.c;rd<Fb;){var sc=rd++;jd[sc]=mc.b[sc];mc.b[sc]=null}mc.b=jd}mc.b[mc.c++]=v}var xc=this.p;if(null!=u){u.Z();if(xc.c==xc.b.length){for(var Nb=Array(xc.c<<1),fc=0,ec=xc.c;fc<ec;){var Zc=fc++;Nb[Zc]=xc.b[Zc];xc.b[Zc]=null}xc.b=Nb}xc.b[xc.c++]=u}var Gc=this.p;if(null!=n){n.Z();if(Gc.c==Gc.b.length){for(var Lb=Array(Gc.c<<1),nc=0,Zb=Gc.c;nc<Zb;){var Ib=nc++;Lb[Ib]=Gc.b[Ib];Gc.b[Ib]=null}Gc.b=Lb}Gc.b[Gc.c++]=n}var ub=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(ub.qb==ub.ob.length){for(var Pb=Array(ub.qb<<1),dc=0,oc=ub.qb;dc<oc;){var Ac=dc++;Pb[Ac]=ub.ob[Ac];ub.ob[Ac]=null}ub.ob=Pb}ub.ob[ub.qb++]=p}var Tb=this.p;if(null!=f){f.Z();if(Tb.c==Tb.b.length){for(var Bc=Array(Tb.c<<1),bc=0,yc=Tb.c;bc<yc;){var Qc=bc++;Bc[Qc]=Tb.b[Qc];Tb.b[Qc]=null}Tb.b=Bc}Tb.b[Tb.c++]=f}var lc=this.p;if(null!=l){l.Z();if(lc.c==lc.b.length){for(var Ec=Array(lc.c<<1),Fc=0,Jc=lc.c;Fc<Jc;){var wc=Fc++;Ec[wc]=lc.b[wc];lc.b[wc]=null}lc.b=Ec}lc.b[lc.c++]=l}var Ub=this.p;if(null!=k){k.Z();if(Ub.c==Ub.b.length){for(var Hc=Array(Ub.c<<1),Cc=0,pc=Ub.c;Cc<pc;){var Kc=Cc++;Hc[Kc]=Ub.b[Kc];Ub.b[Kc]=null}Ub.b=Hc}Ub.b[Ub.c++]=k}},Rl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.qb?new O:q.ob[--q.qb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.Aa(p.e00,p.e10,p.e20);l.Aa(p.e01,p.e11,p.e21);k.Aa(p.e02,p.e12,p.e22);for(var r=this.rh,v=this.dk,aa=0;5>aa;)for(var w=aa++,B=0,u=this.rh[w].length;B<u;){var D=B++,V=v[w][D],A=this.bk[w][D];V.x=A.x;V.y=A.y;V.z=A.z;var E=V,x=E.x*p.e10+E.y*p.e11+E.z*p.e12,Ab=E.x*p.e20+E.y*p.e21+E.z*p.e22;E.x=E.x*p.e00+E.y*p.e01+E.z*p.e02;E.y=x;E.z=Ab}for(var N=0;4>N;){var I=N++;if(!I)for(var F=0;3>F;)for(var C=F++,L=0,M=this.rh[C].length;L<M;){var qa=L++,Vb=r[C][qa],ha=v[C][qa];Vb.x=ha.x;Vb.y=ha.y;Vb.z=ha.z;var ka=Vb,Va=ka.y*b,U=ka.z*b;ka.x=ka.x*b;ka.y=Va;ka.z=U;var R=ka,cc=R.y+n.y,Ma=R.z+n.z;R.x=R.x+n.x;R.y=cc;R.z=Ma;var Qa=R,vc=Qa.y+l.y*e,Oa=Qa.z+l.z*e;Qa.x=Qa.x+l.x*e;Qa.y=vc;Qa.z=Oa}if(2==I)for(var Ba=2;5>Ba;)for(var Bb=Ba++,H=0,Pa=this.rh[Bb].length;H<Pa;){var ba=H++,Q=r[Bb][ba],P=v[Bb][ba];Q.x=P.x;Q.y=P.y;Q.z=P.z;var wa=Q,ta=wa.y*b,W=wa.z*b;wa.x=wa.x*b;wa.y=ta;wa.z=W;var oa=wa,y=oa.y+n.y,Ga=oa.z+n.z;oa.x=oa.x+n.x;oa.y=y;oa.z=Ga;var ca=oa,Ca=-e,xa=ca.y+l.y*Ca,Da=ca.z+l.z*Ca;ca.x=ca.x+l.x*Ca;ca.y=xa;ca.z=Da}for(var Ra=0;8>Ra;){var la=Ra++,Z,Ea,ra,va,J,Ka,Xa,S;I?3==I?this.wireframe?(Z=r[4][0],Ea=r[I][(la+1)%8],ra=r[I][la]):(Z=r[4][0],Ea=r[I][(la+1)%8],ra=r[I][la],J=v[4][0],Ka=v[I][(la+1)%8],Xa=v[I][la]):this.wireframe?(Z=r[I][la],Ea=r[I][(la+1)%8],ra=r[I+1][la]):(Z=r[I][la],Ea=r[I][(la+1)%8],ra=r[I+1][la],va=r[I+1][(la+1)%8],J=v[I][la],Ka=v[I][(la+1)%8],Xa=v[I+1][la],S=v[I+1][(la+1)%8],this.rect(Z,ra,va,Ea,J,Xa,S,Ka,d)):this.wireframe?(Z=r[0][0],Ea=r[1][la]):(Z=r[0][0],Ea=r[1][la],ra=r[1][(la+1)%8],J=v[0][0],Ka=v[1][la],Xa=v[1][(la+1)%8])}}var Ya=this.p,T=0==Ya.c?new t:Ya.b[--Ya.c];T.x=n.x;T.y=n.y;T.z=n.z;var K=T.y+l.y*e,ia=T.z+l.z*e;T.x+=l.x*e;T.y=K;T.z=ia;var gb=this.p,da=0==gb.c?new t:gb.b[--gb.c];da.x=n.x;da.y=n.y;da.z=n.z;var pa=-e,sa=da.y+l.y*pa,fb=da.z+l.z*pa;da.x+=l.x*pa;da.y=sa;da.z=fb;if(this.wireframe){var jb=this.p,Za=0==jb.c?new t:jb.b[--jb.c];Za.x=T.x;Za.y=T.y;Za.z=T.z;var ma=-b,na=Za.y+f.y*ma,Ia=Za.z+f.z*ma;Za.x+=f.x*ma;Za.y=na;Za.z=Ia;var Fa=Za.y+0*k.y,nb=Za.z+0*k.z;Za.x+=0*k.x;Za.y=Fa;Za.z=nb;var fa=this.p,ea=0==fa.c?new t:fa.b[--fa.c];ea.x=T.x;ea.y=T.y;ea.z=T.z;var ja=ea.y+f.y*b,cb=ea.z+f.z*b;ea.x+=f.x*b;ea.y=ja;ea.z=cb;var za=ea.y+0*k.y,tb=ea.z+0*k.z;ea.x+=0*k.x;ea.y=za;ea.z=tb;var Ta=this.p,qb=0==Ta.c?new t:Ta.b[--Ta.c];qb.x=T.x;qb.y=T.y;qb.z=T.z;var rb=qb.y+0*f.y,vb=qb.z+0*f.z;qb.x+=0*f.x;qb.y=rb;qb.z=vb;var Wa=-b,yb=qb.y+k.y*Wa,rc=qb.z+k.z*Wa;qb.x+=k.x*Wa;qb.y=yb;qb.z=rc;var $a=this.p,ua=0==$a.c?new t:$a.b[--$a.c];ua.x=T.x;ua.y=T.y;ua.z=T.z;var Jb=ua.y+0*f.y,G=ua.z+0*f.z;ua.x+=0*f.x;ua.y=Jb;ua.z=G;var ob=ua.y+k.y*b,db=ua.z+k.z*b;ua.x+=k.x*b;ua.y=ob;ua.z=db;var qc=this.p,ab=0==qc.c?new t:qc.b[--qc.c];ab.x=da.x;ab.y=da.y;ab.z=da.z;var hb=-b,z=ab.y+f.y*hb,Db=ab.z+f.z*hb;ab.x+=f.x*hb;ab.y=z;ab.z=Db;var ya=ab.y+0*k.y,Ha=ab.z+0*k.z;ab.x+=0*k.x;ab.y=ya;ab.z=Ha;var Eb=this.p,Na=0==Eb.c?new t:Eb.b[--Eb.c];Na.x=da.x;Na.y=da.y;Na.z=da.z;var mb=Na.y+f.y*b,xb=Na.z+f.z*b;Na.x+=f.x*b;Na.y=mb;Na.z=xb;var zb=Na.y+0*k.y,eb=Na.z+0*k.z;Na.x+=0*k.x;Na.y=zb;Na.z=eb;var Y=this.p,La=0==Y.c?new t:Y.b[--Y.c];La.x=da.x;La.y=da.y;La.z=da.z;var kb=La.y+0*f.y,Sa=La.z+0*f.z;La.x+=0*f.x;La.y=kb;La.z=Sa;var ib=-b,Ja=La.y+k.y*ib,Hb=La.z+k.z*ib;La.x+=k.x*ib;La.y=Ja;La.z=Hb;var Aa=this.p,X=0==Aa.c?new t:Aa.b[--Aa.c];X.x=da.x;X.y=da.y;X.z=da.z;var Cb=X.y+0*f.y,Dc=X.z+0*f.z;X.x+=0*f.x;X.y=Cb;X.z=Dc;var pb=X.y+k.y*b,wb=X.z+k.z*b;X.x+=k.x*b;X.y=pb;X.z=wb;this.ellipse(T,f,k,b,b,d);this.ellipse(da,f,k,b,b,d);var gc=this.p;if(null!=Za){Za.Z();if(gc.c==gc.b.length){for(var bb=Array(gc.c<<1),sb=0,Mb=gc.c;sb<Mb;){var zc=sb++;bb[zc]=gc.b[zc];gc.b[zc]=null}gc.b=bb}gc.b[gc.c++]=Za}var Ua=this.p;if(null!=ea){ea.Z();if(Ua.c==Ua.b.length){for(var jc=Array(Ua.c<<1),tc=0,kc=Ua.c;tc<kc;){var ac=tc++;jc[ac]=Ua.b[ac];Ua.b[ac]=null}Ua.b=jc}Ua.b[Ua.c++]=ea}var Wb=this.p;if(null!=qb){qb.Z();if(Wb.c==Wb.b.length){for(var Xb=Array(Wb.c<<1),Rb=0,hc=Wb.c;Rb<hc;){var Sb=Rb++;Xb[Sb]=Wb.b[Sb];Wb.b[Sb]=null}Wb.b=Xb}Wb.b[Wb.c++]=qb}var Qb=this.p;if(null!=ua){ua.Z();if(Qb.c==Qb.b.length){for(var Yb=Array(Qb.c<<1),ic=0,Kb=Qb.c;ic<Kb;){var $b=ic++;Yb[$b]=Qb.b[$b];Qb.b[$b]=null}Qb.b=Yb}Qb.b[Qb.c++]=ua}var lb=this.p;if(null!=ab){ab.Z();if(lb.c==lb.b.length){for(var Gb=Array(lb.c<<1),ub=0,Ob=lb.c;ub<Ob;){var uc=ub++;Gb[uc]=lb.b[uc];lb.b[uc]=null}lb.b=Gb}lb.b[lb.c++]=ab}var mc=this.p;if(null!=Na){Na.Z();if(mc.c==mc.b.length){for(var jd=Array(mc.c<<1),rd=0,Tb=mc.c;rd<Tb;){var sc=rd++;jd[sc]=mc.b[sc];mc.b[sc]=null}mc.b=jd}mc.b[mc.c++]=Na}var xc=this.p;if(null!=La){La.Z();if(xc.c==xc.b.length){for(var Fb=Array(xc.c<<1),Nb=0,fc=xc.c;Nb<fc;){var Ib=Nb++;Fb[Ib]=xc.b[Ib];xc.b[Ib]=null}xc.b=Fb}xc.b[xc.c++]=La}var Gc=this.p;if(null!=X){X.Z();if(Gc.c==Gc.b.length){for(var lc=Array(Gc.c<<1),Lb=0,nc=Gc.c;Lb<nc;){var ec=Lb++;lc[ec]=Gc.b[ec];Gc.b[ec]=null}Gc.b=lc}Gc.b[Gc.c++]=X}}else{for(var Zb=0;8>Zb;){var Pb=Zb++,dc=this.Af[Pb],oc=this.jj[Pb];dc.x=oc.x;dc.y=oc.y;dc.z=oc.z;var Ac=dc,Ub=Ac.x*p.e10+Ac.y*p.e11+Ac.z*p.e12,Bc=Ac.x*p.e20+Ac.y*p.e21+Ac.z*p.e22;Ac.x=Ac.x*p.e00+Ac.y*p.e01+Ac.z*p.e02;Ac.y=Ub;Ac.z=Bc;var bc=this.ae[Pb],yc=this.Af[Pb];bc.x=yc.x;bc.y=yc.y;bc.z=yc.z;var Qc=bc,Ec=Qc.y*b,Fc=Qc.z*b;Qc.x=Qc.x*b;Qc.y=Ec;Qc.z=Fc;var wc=Qc,Jc=wc.y+n.y,Kc=wc.z+n.z;wc.x=wc.x+n.x;wc.y=Jc;wc.z=Kc;var Hc=this.Fe[Pb],Cc=this.ae[Pb];Hc.x=Cc.x;Hc.y=Cc.y;Hc.z=Cc.z;var pc=this.ae[Pb],Yc=pc.y+l.y*e,ad=pc.z+l.z*e;pc.x=pc.x+l.x*e;pc.y=Yc;pc.z=ad;var Oc=this.Fe[Pb],Xc=-e,fd=Oc.y+l.y*Xc,gd=Oc.z+l.z*Xc;Oc.x=Oc.x+l.x*Xc;Oc.y=fd;Oc.z=gd}for(var bd=0;8>bd;){var Rc=bd++,ed=this.Af[Rc],sd=this.Af[(Rc+1)%8];this.rect(this.ae[Rc],this.Fe[Rc],this.Fe[(Rc+1)%8],this.ae[(Rc+1)%8],ed,ed,sd,sd,d)}}var Uc=this.p;if(null!=T){T.Z();if(Uc.c==Uc.b.length){for(var hd=Array(Uc.c<<1),id=0,qd=Uc.c;id<qd;){var dd=id++;hd[dd]=Uc.b[dd];Uc.b[dd]=null}Uc.b=hd}Uc.b[Uc.c++]=T}var Mc=this.p;if(null!=da){da.Z();if(Mc.c==Mc.b.length){for(var nd=Array(Mc.c<<1),od=0,yd=Mc.c;od<yd;){var md=od++;nd[md]=Mc.b[md];Mc.b[md]=null}Mc.b=nd}Mc.b[Mc.c++]=da}var td=this.p;if(null!=n){n.Z();if(td.c==td.b.length){for(var wd=Array(td.c<<1),xd=0,Gd=td.c;xd<Gd;){var pd=xd++;wd[pd]=td.b[pd];td.b[pd]=null}td.b=wd}td.b[td.c++]=n}var Jd=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Jd.qb==Jd.ob.length){for(var Ed=Array(Jd.qb<<1),Fd=0,Nd=Jd.qb;Fd<Nd;){var Dd=Fd++;Ed[Dd]=Jd.ob[Dd];Jd.ob[Dd]=null}Jd.ob=Ed}Jd.ob[Jd.qb++]=p}var Lc=this.p;if(null!=f){f.Z();if(Lc.c==Lc.b.length){for(var kd=Array(Lc.c<<1),ld=0,Sd=Lc.c;ld<Sd;){var Hd=ld++;kd[Hd]=Lc.b[Hd];Lc.b[Hd]=null}Lc.b=kd}Lc.b[Lc.c++]=f}var Vc=this.p;if(null!=l){l.Z();if(Vc.c==Vc.b.length){for(var Wc=Array(Vc.c<<1),$c=0,ud=Vc.c;$c<ud;){var cd=$c++;Wc[cd]=Vc.b[cd];Vc.b[cd]=null}Vc.b=Wc}Vc.b[Vc.c++]=l}var Sc=this.p;if(null!=k){k.Z();if(Sc.c==Sc.b.length){for(var Qd=Array(Sc.c<<1),Rd=0,Wd=Sc.c;Rd<Wd;){var Kd=Rd++;Qd[Kd]=Sc.b[Kd];Sc.b[Kd]=null}Sc.b=Qd}Sc.b[Sc.c++]=k}},Am:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],d=this.p,d=0==d.qb?new O:d.ob[--d.qb];c.x=a.v;c.y=a.A;c.z=a.B;d.e00=a.o;d.e01=a.f;d.e02=a.h;d.e10=a.i;d.e11=a.m;d.e12=a.j;d.e20=a.l;d.e21=a.g;d.e22=a.s;a=this.rh;for(var f=this.dk,h=0;5>h;)for(var l=h++,g=0,k=this.rh[l].length;g<k;){var m=g++,n=f[l][m],q=this.bk[l][m];n.x=q.x;n.y=q.y;n.z=q.z;var q=n.x*d.e10+n.y*d.e11+n.z*d.e12,p=n.x*d.e20+n.y*d.e21+n.z*d.e22;n.x=n.x*d.e00+n.y*d.e01+n.z*d.e02;n.y=q;n.z=p;n=a[l][m];m=f[l][m];n.x=m.x;n.y=m.y;n.z=m.z;m=n;n=m.y*b;q=m.z*b;m.x=m.x*b;m.y=n;m.z=q;n=m.y+c.y;q=m.z+c.z;m.x=m.x+c.x;m.y=n;m.z=q}for(b=0;4>b;)for(h=b++,l=0;8>l;){var r=l++,v;h&&3!=h&&!this.wireframe&&(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],n=a[h+1][(r+1)%8],q=f[h][r],p=f[h][(r+1)%8],v=f[h+1][r],r=f[h+1][(r+1)%8],this.rect(g,m,n,k,q,v,r,p,e))}e=this.p;if(null!=c){c.Z();if(e.c==e.b.length){a=Array(e.c<<1);f=0;for(b=e.c;f<b;)h=f++,a[h]=e.b[h],e.b[h]=null;e.b=a}e.b[e.c++]=c}c=this.p;if(null!=d){d.e00=1;d.e01=0;d.e02=0;d.e10=0;d.e11=1;d.e12=0;d.e20=0;d.e21=0;d.e22=1;if(c.qb==c.ob.length){e=Array(c.qb<<1);a=0;for(f=c.qb;a<f;)b=a++,e[b]=c.ob[b],c.ob[b]=null;c.ob=e}c.ob[c.qb++]=d}},Pl:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],f=this.p,h=0==f.c?new t:f.b[--f.c],l=this.p,g=0==l.c?new t:l.b[--l.c],k=this.p,m=0==k.c?new t:k.b[--k.c],n=this.p,q=0==n.qb?new O:n.ob[--n.qb];m.x=a.v;m.y=a.A;m.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;c.Aa(q.e00,q.e10,q.e20);h.Aa(q.e01,q.e11,q.e21);g.Aa(q.e02,q.e12,q.e22);var p=b.x,r=b.y,v=b.z,aa=this.p,w=0==aa.c?new t:aa.b[--aa.c];w.x=m.x;w.y=m.y;w.z=m.z;var B=-p,u=w.y+c.y*B,D=w.z+c.z*B;w.x+=c.x*B;w.y=u;w.z=D;var V=-r,A=w.y+h.y*V,E=w.z+h.z*V;w.x+=h.x*V;w.y=A;w.z=E;var x=-v,Ab=w.y+g.y*x,N=w.z+g.z*x;w.x+=g.x*x;w.y=Ab;w.z=N;var I=this.p,F=0==I.c?new t:I.b[--I.c];F.x=m.x;F.y=m.y;F.z=m.z;var C=-p,L=F.y+c.y*C,M=F.z+c.z*C;F.x+=c.x*C;F.y=L;F.z=M;var ha=-r,Vb=F.y+h.y*ha,qa=F.z+h.z*ha;F.x+=h.x*ha;F.y=Vb;F.z=qa;var ka=F.y+g.y*v,Va=F.z+g.z*v;F.x+=g.x*v;F.y=ka;F.z=Va;var U=this.p,R=0==U.c?new t:U.b[--U.c];R.x=m.x;R.y=m.y;R.z=m.z;var cc=-p,Ma=R.y+c.y*cc,Qa=R.z+c.z*cc;R.x+=c.x*cc;R.y=Ma;R.z=Qa;var vc=R.y+h.y*r,Oa=R.z+h.z*r;R.x+=h.x*r;R.y=vc;R.z=Oa;var Ba=-v,Bb=R.y+g.y*Ba,H=R.z+g.z*Ba;R.x+=g.x*Ba;R.y=Bb;R.z=H;var Pa=this.p,ba=0==Pa.c?new t:Pa.b[--Pa.c];ba.x=m.x;ba.y=m.y;ba.z=m.z;var Q=-p,P=ba.y+c.y*Q,wa=ba.z+c.z*Q;ba.x+=c.x*Q;ba.y=P;ba.z=wa;var ta=ba.y+h.y*r,W=ba.z+h.z*r;ba.x+=h.x*r;ba.y=ta;ba.z=W;var oa=ba.y+g.y*v,y=ba.z+g.z*v;ba.x+=g.x*v;ba.y=oa;ba.z=y;var Ga=this.p,ca=0==Ga.c?new t:Ga.b[--Ga.c];ca.x=m.x;ca.y=m.y;ca.z=m.z;var Ca=ca.y+c.y*p,xa=ca.z+c.z*p;ca.x+=c.x*p;ca.y=Ca;ca.z=xa;var Da=-r,Ra=ca.y+h.y*Da,la=ca.z+h.z*Da;ca.x+=h.x*Da;ca.y=Ra;ca.z=la;var Z=-v,Ea=ca.y+g.y*Z,ra=ca.z+g.z*Z;ca.x+=g.x*Z;ca.y=Ea;ca.z=ra;var va=this.p,J=0==va.c?new t:va.b[--va.c];J.x=m.x;J.y=m.y;J.z=m.z;var Ka=J.y+c.y*p,Xa=J.z+c.z*p;J.x+=c.x*p;J.y=Ka;J.z=Xa;var S=-r,Ya=J.y+h.y*S,T=J.z+h.z*S;J.x+=h.x*S;J.y=Ya;J.z=T;var K=J.y+g.y*v,ia=J.z+g.z*v;J.x+=g.x*v;J.y=K;J.z=ia;var gb=this.p,da=0==gb.c?new t:gb.b[--gb.c];da.x=m.x;da.y=m.y;da.z=m.z;var pa=da.y+c.y*p,sa=da.z+c.z*p;da.x+=c.x*p;da.y=pa;da.z=sa;var fb=da.y+h.y*r,jb=da.z+h.z*r;da.x+=h.x*r;da.y=fb;da.z=jb;var Za=-v,ma=da.y+g.y*Za,na=da.z+g.z*Za;da.x+=g.x*Za;da.y=ma;da.z=na;var Ia=this.p,Fa=0==Ia.c?new t:Ia.b[--Ia.c];Fa.x=m.x;Fa.y=m.y;Fa.z=m.z;var nb=Fa.y+c.y*p,fa=Fa.z+c.z*p;Fa.x+=c.x*p;Fa.y=nb;Fa.z=fa;var ea=Fa.y+h.y*r,ja=Fa.z+h.z*r;Fa.x+=h.x*r;Fa.y=ea;Fa.z=ja;var cb=Fa.y+g.y*v,za=Fa.z+g.z*v;Fa.x+=g.x*v;Fa.y=cb;Fa.z=za;if(!this.wireframe){var tb=this.p,Ta=0==tb.c?new t:tb.b[--tb.c];Ta.x=c.x;Ta.y=c.y;Ta.z=c.z;var qb=-Ta.y,rb=-Ta.z;Ta.x=-Ta.x;Ta.y=qb;Ta.z=rb;var vb=this.p,Wa=0==vb.c?new t:vb.b[--vb.c];Wa.x=h.x;Wa.y=h.y;Wa.z=h.z;var yb=-Wa.y,rc=-Wa.z;Wa.x=-Wa.x;Wa.y=yb;Wa.z=rc;var $a=this.p,ua=0==$a.c?new t:$a.b[--$a.c];ua.x=g.x;ua.y=g.y;ua.z=g.z;var Jb=-ua.y,G=-ua.z;ua.x=-ua.x;ua.y=Jb;ua.z=G;this.rect(w,F,ba,R,Ta,Ta,Ta,Ta,e);this.rect(ca,da,Fa,J,c,c,c,c,e);this.rect(w,ca,J,F,Wa,Wa,Wa,Wa,e);this.rect(R,ba,Fa,da,h,h,h,h,e);this.rect(w,R,da,ca,ua,ua,ua,ua,e);this.rect(F,J,Fa,ba,g,g,g,g,e);var ob=this.p;if(null!=Ta){Ta.Z();if(ob.c==ob.b.length){for(var db=Array(ob.c<<1),qc=0,ab=ob.c;qc<ab;){var hb=qc++;db[hb]=ob.b[hb];ob.b[hb]=null}ob.b=db}ob.b[ob.c++]=Ta}var z=this.p;if(null!=Wa){Wa.Z();if(z.c==z.b.length){for(var Db=Array(z.c<<1),ya=0,Ha=z.c;ya<Ha;){var Eb=ya++;Db[Eb]=z.b[Eb];z.b[Eb]=null}z.b=Db}z.b[z.c++]=Wa}var Na=this.p;if(null!=ua){ua.Z();if(Na.c==Na.b.length){for(var mb=Array(Na.c<<1),xb=0,zb=Na.c;xb<zb;){var eb=xb++;mb[eb]=Na.b[eb];Na.b[eb]=null}Na.b=mb}Na.b[Na.c++]=ua}}var Y=this.p;if(null!=w){w.Z();if(Y.c==Y.b.length){for(var La=Array(Y.c<<1),kb=0,Sa=Y.c;kb<Sa;){var ib=kb++;La[ib]=Y.b[ib];Y.b[ib]=null}Y.b=La}Y.b[Y.c++]=w}var Ja=this.p;if(null!=F){F.Z();if(Ja.c==Ja.b.length){for(var Hb=Array(Ja.c<<1),Aa=0,X=Ja.c;Aa<X;){var Cb=Aa++;Hb[Cb]=Ja.b[Cb];Ja.b[Cb]=null}Ja.b=Hb}Ja.b[Ja.c++]=F}var Dc=this.p;if(null!=R){R.Z();if(Dc.c==Dc.b.length){for(var pb=Array(Dc.c<<1),bb=0,gc=Dc.c;bb<gc;){var wb=bb++;pb[wb]=Dc.b[wb];Dc.b[wb]=null}Dc.b=pb}Dc.b[Dc.c++]=R}var Ua=this.p;if(null!=ba){ba.Z();if(Ua.c==Ua.b.length){for(var sb=Array(Ua.c<<1),zc=0,Mb=Ua.c;zc<Mb;){var jc=zc++;sb[jc]=Ua.b[jc];Ua.b[jc]=null}Ua.b=sb}Ua.b[Ua.c++]=ba}var tc=this.p;if(null!=ca){ca.Z();if(tc.c==tc.b.length){for(var kc=Array(tc.c<<1),ac=0,Wb=tc.c;ac<Wb;){var Xb=ac++;kc[Xb]=tc.b[Xb];tc.b[Xb]=null}tc.b=kc}tc.b[tc.c++]=ca}var Rb=this.p;if(null!=J){J.Z();if(Rb.c==Rb.b.length){for(var hc=Array(Rb.c<<1),Sb=0,Qb=Rb.c;Sb<Qb;){var Yb=Sb++;hc[Yb]=Rb.b[Yb];Rb.b[Yb]=null}Rb.b=hc}Rb.b[Rb.c++]=J}var ic=this.p;if(null!=da){da.Z();if(ic.c==ic.b.length){for(var Kb=Array(ic.c<<1),$b=0,lb=ic.c;$b<lb;){var Gb=$b++;Kb[Gb]=ic.b[Gb];ic.b[Gb]=null}ic.b=Kb}ic.b[ic.c++]=da}var ub=this.p;if(null!=Fa){Fa.Z();if(ub.c==ub.b.length){for(var Pb=Array(ub.c<<1),uc=0,mc=ub.c;uc<mc;){var Ob=uc++;Pb[Ob]=ub.b[Ob];ub.b[Ob]=null}ub.b=Pb}ub.b[ub.c++]=Fa}var Fb=this.p;if(null!=m){m.Z();if(Fb.c==Fb.b.length){for(var Tb=Array(Fb.c<<1),sc=0,xc=Fb.c;sc<xc;){var Nb=sc++;Tb[Nb]=Fb.b[Nb];Fb.b[Nb]=null}Fb.b=Tb}Fb.b[Fb.c++]=m}var Ib=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(Ib.qb==Ib.ob.length){for(var ec=Array(Ib.qb<<1),fc=0,lc=Ib.qb;fc<lc;){var dc=fc++;ec[dc]=Ib.ob[dc];Ib.ob[dc]=null}Ib.ob=ec}Ib.ob[Ib.qb++]=q}var Lb=this.p;if(null!=c){c.Z();if(Lb.c==Lb.b.length){for(var nc=Array(Lb.c<<1),Zb=0,oc=Lb.c;Zb<oc;){var bc=Zb++;nc[bc]=Lb.b[bc];Lb.b[bc]=null}Lb.b=nc}Lb.b[Lb.c++]=c}var Ub=this.p;if(null!=h){h.Z();if(Ub.c==Ub.b.length){for(var yc=Array(Ub.c<<1),Ac=0,Bc=Ub.c;Ac<Bc;){var wc=Ac++;yc[wc]=Ub.b[wc];Ub.b[wc]=null}Ub.b=yc}Ub.b[Ub.c++]=h}var pc=this.p;if(null!=g){g.Z();if(pc.c==pc.b.length){for(var Ec=Array(pc.c<<1),Fc=0,Hc=pc.c;Fc<Hc;){var Cc=Fc++;Ec[Cc]=pc.b[Cc];pc.b[Cc]=null}pc.b=Ec}pc.b[pc.c++]=g}},rect:function(){},bb:function(){},tb:function(){},Qa:function(){},ra:Fb};Re.aa=!0;Re.prototype={ra:Re};Rc.aa=!0;Gb.aa=!0;Gb.prototype={jh:function(){},sh:function(){},nh:function(){},vi:function(){},Gg:function(){},mh:function(){},lh:function(){},$e:function(){},ra:Gb};ec.aa=!0;md.aa=!0;md.prototype={Vd:function(a,b){b.Ce=this.C;b.De=this.D;var e,d,c,f,h,l,g,k,m;e=this.Ka.mg;d=this.Ka.ng;c=this.Ka.og;f=this.Ka.Xi;h=this.Ka.Yi;l=this.Ka.Zi;g=this.Ka.Gi;k=this.Ka.Hi;m=this.Ka.Ii;for(var n=Math.sqrt(this.uc.Fj*this.vc.Fj),q=Math.sqrt(this.uc.Pj*this.vc.Pj),p=this.Ka.Xd,r=b.La=0;r<p;){var v=r++,v=this.Ka.tc[v];if(0>v.Dc)v.Jf=!0,v=v.Wd,v.Xc=0,v.yc=0,v.xc=0,v.ub=0,v.Ue=0,v.Ve=0,v.We=0;else{v.Jf=!1;var t=b.rows[b.La++];t.friction=n;t.Na=0;var w=t.Eg;w.wa=e;w.xa=d;w.ya=c;w.Ca=e;w.Da=d;w.Ea=c;w.ba=v.Eb*c-v.Fb*d;w.ca=v.Fb*e-v.Db*c;w.da=v.Db*d-v.Eb*e;w.fa=v.cc*c-v.dc*d;w.ga=v.dc*e-v.bc*c;w.ha=v.bc*d-v.cc*e;w=t.vj;w.wa=f;w.xa=h;w.ya=l;w.Ca=f;w.Da=h;w.Ea=l;w.ba=v.Eb*l-v.Fb*h;w.ca=v.Fb*f-v.Db*l;w.da=v.Db*h-v.Eb*f;w.fa=v.cc*l-v.dc*h;w.ga=v.dc*f-v.bc*l;w.ha=v.bc*h-v.cc*f;w=t.uj;w.wa=g;w.xa=k;w.ya=m;w.Ca=g;w.Da=k;w.Ea=m;w.ba=v.Eb*m-v.Fb*k;w.ca=v.Fb*g-v.Db*m;w.da=v.Db*k-v.Eb*g;w.fa=v.cc*m-v.dc*k;w.ga=v.dc*g-v.bc*m;w.ha=v.bc*k-v.cc*g;w=t.Eg;w=w.wa*this.C.eb+w.xa*this.C.fb+w.ya*this.C.gb+(w.ba*this.C.ib+w.ca*this.C.jb+w.da*this.C.kb)-(w.Ca*this.D.eb+w.Da*this.D.fb+w.Ea*this.D.gb+(w.fa*this.D.ib+w.ga*this.D.jb+w.ha*this.D.kb));t.Ga=w<-F.contactEnableBounceThreshold&&!v.Se?-w*q:0;this.Ec==ec.BAUMGARTE&&v.Dc>F.linearSlop&&(w=(v.Dc-F.linearSlop)*F.velocityBaumgarte*a.invDt,t.Ga<w&&(t.Ga=w));v.Se||(w=v.Wd,w.Xc=0,w.yc=0,w.xc=0,w.ub=0,w.Ue=0,w.Ve=0,w.We=0);t.va=v.Wd}}},dd:function(a){a.Ce=this.C;a.De=this.D;var b,e,d;b=this.Ka.mg;e=this.Ka.ng;d=this.Ka.og;for(var c=this.Ka.Xd,f=a.La=0;f<c;){var h=f++,h=this.Ka.tc[h];if(!h.Jf){var l=a.rows[a.La++],g=l.Eg;g.wa=b;g.xa=e;g.ya=d;g.Ca=b;g.Da=e;g.Ea=d;g.ba=h.Eb*d-h.Fb*e;g.ca=h.Fb*b-h.Db*d;g.da=h.Db*e-h.Eb*b;g.fa=h.cc*d-h.dc*e;g.ga=h.dc*b-h.bc*d;g.ha=h.bc*e-h.cc*b;l.Ga=h.Dc-F.linearSlop;0>l.Ga&&(l.Ga=0);l.va=h.Wd}}},Ik:function(){this.Ka.Kl(this.aj,this.bj)},bb:function(){return this.uc},tb:function(){return this.vc},Qa:function(){return this.Ka},Zj:function(){for(var a=0,b=this.Ka.Xd;a<b;){var e=a++;if(0<=this.Ka.tc[e].Dc)return!0}return!1},ra:md};ij.aa=!0;ij.prototype={Zd:function(a){this.Xc=a.Xc;this.yc=a.yc;this.xc=a.xc;this.Ue=a.Ue;this.Ve=a.Ve;this.We=a.We},ra:ij};yc.aa=!0;yc.prototype={Je:function(){for(var a=0,b=this.Xd;a<b;){var e=a++,e=this.tc[e];e.bf=0;e.cf=0;e.df=0;e.ef=0;e.ff=0;e.gf=0;e.Db=0;e.Eb=0;e.Fb=0;e.bc=0;e.cc=0;e.dc=0;e.Fd=0;e.Gd=0;e.Hd=0;e.Id=0;e.Jd=0;e.Kd=0;e.Dc=0;var d=e.Wd;d.Xc=0;d.yc=0;d.xc=0;d.ub=0;d.Ue=0;d.Ve=0;d.We=0;e.Se=!1;e.Jf=!1;e.sc=-1}this.Xd=0},Jm:function(a){this.mg=a.x;this.ng=a.y;this.og=a.z;var b=a.x,e=a.y;a=a.z;var d=b*b,c=e*e,f=a*a,h;d<c?d<f?(f=1/Math.sqrt(c+f),d=0,c=-a*f,f*=e,h=e*f-a*c,a=-b*f,b*=c):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d):c<f?(f=1/Math.sqrt(d+f),d=a*f,c=0,f*=-b,h=e*f,a=a*d-b*f,b=-e*d):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d);this.Xi=d;this.Yi=c;this.Zi=f;this.Gi=h;this.Hi=a;this.Ii=b},Kl:function(a,b){for(var e=0,d=this.Xd;e<d;){var c=e++,c=this.tc[c],f,h,l;f=a.o*c.bf+a.f*c.cf+a.h*c.df;h=a.i*c.bf+a.m*c.cf+a.j*c.df;l=a.l*c.bf+a.g*c.cf+a.s*c.df;c.Db=f;c.Eb=h;c.Fb=l;f=b.o*c.ef+b.f*c.ff+b.h*c.gf;h=b.i*c.ef+b.m*c.ff+b.j*c.gf;l=b.l*c.ef+b.g*c.ff+b.s*c.gf;c.bc=f;c.cc=h;c.dc=l;c.Fd=c.Db+a.v;c.Gd=c.Eb+a.A;c.Hd=c.Fb+a.B;c.Id=c.bc+b.v;c.Jd=c.cc+b.A;c.Kd=c.dc+b.B;c.Dc=-((c.Fd-c.Id)*this.mg+(c.Gd-c.Jd)*this.ng+(c.Hd-c.Kd)*this.og)}},tb:function(){var a=new t;a.x=this.mg;a.y=this.ng;a.z=this.og;return a},Lb:function(a){a.x=this.mg;a.y=this.ng;a.z=this.og},qc:function(){var a=new t;a.x=this.Xi;a.y=this.Yi;a.z=this.Zi;return a},rc:function(a){a.x=this.Xi;a.y=this.Yi;a.z=this.Zi},Qa:function(){var a=new t;a.x=this.Gi;a.y=this.Hi;a.z=this.Ii;return a},bb:function(a){a.x=this.Gi;a.y=this.Hi;a.z=this.Ii},mc:function(){return this.tc},lc:function(){return this.Xd},ra:yc};Zb.aa=!0;Zb.prototype={Lb:function(){var a=new t;a.x=this.Fd;a.y=this.Gd;a.z=this.Hd;return a},lc:function(a){a.x=this.Fd;a.y=this.Gd;a.z=this.Hd},mc:function(){var a=new t;a.x=this.Id;a.y=this.Jd;a.z=this.Kd;return a},qc:function(a){a.x=this.Id;a.y=this.Jd;a.z=this.Kd},bb:function(){return this.Dc},zc:function(){return this.Se},tb:function(){return this.Wd.Xc},rc:function(){return this.Wd.yc},Qa:function(){return this.Wd.xc},Cc:function(){return!this.Jf},ra:Zb};hj.aa=!0;hj.prototype={Hn:function(){for(var a=this.Ka.Xd;0<=--a;){var b=this.Ka.tc[a],e,d;e=b.Fd-b.Id;d=b.Gd-b.Jd;var b=b.Hd-b.Kd,c=this.Ka.mg*e+this.Ka.ng*d+this.Ka.og*b;c>F.contactPersistenceThreshold?this.xm(a):(e+=this.Ka.mg*-c,d+=this.Ka.ng*-c,b+=this.Ka.og*-c,e*e+d*d+b*b>F.contactPersistenceThreshold*F.contactPersistenceThreshold&&this.xm(a))}},xm:function(a){var b=--this.Ka.Xd;if(a!=b){var e=this.Ka.tc[a];this.Ka.tc[a]=this.Ka.tc[b];this.Ka.tc[b]=e}a=this.Ka.tc[b];a.bf=0;a.cf=0;a.df=0;a.ef=0;a.ff=0;a.gf=0;a.Db=0;a.Eb=0;a.Fb=0;a.bc=0;a.cc=0;a.dc=0;a.Fd=0;a.Gd=0;a.Hd=0;a.Id=0;a.Jd=0;a.Kd=0;a.Dc=0;b=a.Wd;b.Xc=0;b.yc=0;b.xc=0;b.ub=0;b.Ue=0;b.Ve=0;b.We=0;a.Se=!1;a.Jf=!1;a.sc=-1},Wm:function(a,b,e){var d=this.Ka.Xd;if(d==F.maxManifoldPoints){var d=this.Ka.tc[this.an(a,b,e)],c=a.position1;d.Fd=c.x;d.Gd=c.y;d.Hd=c.z;c=a.position2;d.Id=c.x;d.Jd=c.y;d.Kd=c.z;d.Db=d.Fd-b.v;d.Eb=d.Gd-b.A;d.Fb=d.Hd-b.B;d.bc=d.Id-e.v;d.cc=d.Jd-e.A;d.dc=d.Kd-e.B;var f,c=b.o*d.Db+b.i*d.Eb+b.l*d.Fb;f=b.f*d.Db+b.m*d.Eb+b.g*d.Fb;b=b.h*d.Db+b.j*d.Eb+b.s*d.Fb;d.bf=c;d.cf=f;d.df=b;b=e.o*d.bc+e.i*d.cc+e.l*d.dc;c=e.f*d.bc+e.m*d.cc+e.g*d.dc;e=e.h*d.bc+e.j*d.cc+e.s*d.dc;d.ef=b;d.ff=c;d.gf=e;d.Dc=a.depth;e=d.Wd;e.Xc=0;e.yc=0;e.xc=0;e.ub=0;e.Ue=0;e.Ve=0;e.We=0;d.sc=a.id;d.Se=!1;d.Jf=!1}else d=this.Ka.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Db=d.Fd-b.v,d.Eb=d.Gd-b.A,d.Fb=d.Hd-b.B,d.bc=d.Id-e.v,d.cc=d.Jd-e.A,d.dc=d.Kd-e.B,c=b.o*d.Db+b.i*d.Eb+b.l*d.Fb,f=b.f*d.Db+b.m*d.Eb+b.g*d.Fb,b=b.h*d.Db+b.j*d.Eb+b.s*d.Fb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.bc+e.i*d.cc+e.l*d.dc,c=e.f*d.bc+e.m*d.cc+e.g*d.dc,e=e.h*d.bc+e.j*d.cc+e.s*d.dc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth,e=d.Wd,e.Xc=0,e.yc=0,e.xc=0,e.ub=0,e.Ue=0,e.Ve=0,e.We=0,d.sc=a.id,d.Se=!1,d.Jf=!1,this.Ka.Xd++},an:function(a,b){var e=this.Ka.tc[0],d=this.Ka.tc[1],c=this.Ka.tc[2],f=this.Ka.tc[3],h=e.Dc,l=0;d.Dc>h&&(h=d.Dc,l=1);c.Dc>h&&(h=c.Dc,l=2);f.Dc>h&&(h=f.Dc,l=3);var g,k,m,n=a.position1;g=n.x;k=n.y;m=n.z;g-=b.v;k-=b.A;m-=b.B;var q=d.Db,p=d.Eb,r=d.Fb,v=c.Db,t=c.Eb,w=c.Fb,B=f.Db,u=f.Eb,D=f.Fb,V,A,E,x,F,N,I,C,L,M,O,ha,Vb,qa,ka,Va,U,R;V=v-q;A=t-p;E=w-r;x=g-B;F=k-u;N=m-D;I=B-q;C=u-p;L=D-r;M=g-v;O=k-t;ha=m-w;Vb=g-q;qa=k-p;ka=m-r;Va=B-v;U=u-t;R=D-w;var cc,Ma,Qa,vc,Oa,Ba,Bb,H,Pa;cc=A*N-E*F;Ma=E*x-V*N;Qa=V*F-A*x;vc=C*ha-L*O;Oa=L*M-I*ha;Ba=I*O-C*M;Bb=qa*R-ka*U;H=ka*Va-Vb*R;Pa=Vb*U-qa*Va;var ba=cc*cc+Ma*Ma+Qa*Qa,Q=vc*vc+Oa*Oa+Ba*Ba,P=Bb*Bb+H*H+Pa*Pa,wa=ba>Q?ba>P?ba:P:Q>P?Q:P,ta=e.Db,W=e.Eb,oa=e.Fb,y=c.Db,Ga=c.Eb,ca=c.Fb,Ca=f.Db,xa=f.Eb,Da=f.Fb,Ra,la,Z,Ea,ra,va,J,Ka,Xa,S,Ya,T,K,ia,gb,da,pa,sa;Ra=y-ta;la=Ga-W;Z=ca-oa;Ea=g-Ca;ra=k-xa;va=m-Da;J=Ca-ta;Ka=xa-W;Xa=Da-oa;S=g-y;Ya=k-Ga;T=m-ca;K=g-ta;ia=k-W;gb=m-oa;da=Ca-y;pa=xa-Ga;sa=Da-ca;var fb,jb,Za,ma,na,Ia,Fa,nb,fa;fb=la*va-Z*ra;jb=Z*Ea-Ra*va;Za=Ra*ra-la*Ea;ma=Ka*T-Xa*Ya;na=Xa*S-J*T;Ia=J*Ya-Ka*S;Fa=ia*sa-gb*pa;nb=gb*da-K*sa;fa=K*pa-ia*da;var ea=fb*fb+jb*jb+Za*Za,ja=ma*ma+na*na+Ia*Ia,cb=Fa*Fa+nb*nb+fa*fa,za=ea>ja?ea>cb?ea:cb:ja>cb?ja:cb,tb=e.Db,Ta=e.Eb,qb=e.Fb,rb=d.Db,vb=d.Eb,Wa=d.Fb,yb=f.Db,rc=f.Eb,$a=f.Fb,ua,Jb,G,ob,db,ya,ab,hb,z,Db,Ha,Aa,Eb,Na,mb,xb,zb,eb;ua=rb-tb;Jb=vb-Ta;G=Wa-qb;ob=g-yb;db=k-rc;ya=m-$a;ab=yb-tb;hb=rc-Ta;z=$a-qb;Db=g-rb;Ha=k-vb;Aa=m-Wa;Eb=g-tb;Na=k-Ta;mb=m-qb;xb=yb-rb;zb=rc-vb;eb=$a-Wa;var Y,La,kb,Sa,ib,Ja,Hb,Ua,X;Y=Jb*ya-G*db;La=G*ob-ua*ya;kb=ua*db-Jb*ob;Sa=hb*Aa-z*Ha;ib=z*Db-ab*Aa;Ja=ab*Ha-hb*Db;Hb=Na*eb-mb*zb;Ua=mb*xb-Eb*eb;X=Eb*zb-Na*xb;var Cb=Y*Y+La*La+kb*kb,pb=Sa*Sa+ib*ib+Ja*Ja,wb=Hb*Hb+Ua*Ua+X*X,bb=Cb>pb?Cb>wb?Cb:wb:pb>wb?pb:wb,gc=e.Db,sb=e.Eb,ub=e.Fb,Fb=d.Db,zc=d.Eb,Gb=d.Fb,jc=c.Db,tc=c.Eb,kc=c.Fb,ac,Wb,Xb,Rb,hc,Sb,Qb,Yb,ic,Kb,$b,lb,Ib,Mb,Lb,uc,mc,Ob;ac=Fb-gc;Wb=zc-sb;Xb=Gb-ub;Rb=g-jc;hc=k-tc;Sb=m-kc;Qb=jc-gc;Yb=tc-sb;ic=kc-ub;Kb=g-Fb;$b=k-zc;lb=m-Gb;Ib=g-gc;Mb=k-sb;Lb=m-ub;uc=jc-Fb;mc=tc-zc;Ob=kc-Gb;var Pb,Tb,sc,xc,Nb,Ub,dc,ec,fc;Pb=Wb*Sb-Xb*hc;Tb=Xb*Rb-ac*Sb;sc=ac*hc-Wb*Rb;xc=Yb*lb-ic*$b;Nb=ic*Kb-Qb*lb;Ub=Qb*$b-Yb*Kb;dc=Mb*Ob-Lb*mc;ec=Lb*uc-Ib*Ob;fc=Ib*mc-Mb*uc;var lc=Pb*Pb+Tb*Tb+sc*sc,nc=xc*xc+Nb*Nb+Ub*Ub,Zb=dc*dc+ec*ec+fc*fc,pc=lc>nc?lc>Zb?lc:Zb:nc>Zb?nc:Zb,bc=wa,oc=0;if(za>bc&&1!=l||!l)bc=za,oc=1;bb>bc&&2!=l&&(bc=bb,oc=2);pc>bc&&3!=l&&(bc=pc,oc=3);return oc},dn:function(a,b,e){for(var d=F.contactPersistenceThreshold*F.contactPersistenceThreshold,c=-1,f=0,h=this.Ka.Xd;f<h;){var l=f++,g=this.Ka.tc[l],k,m,n,q,p,r;p=a.position1;k=p.x;m=p.y;n=p.z;r=a.position2;q=r.x;p=r.y;r=r.z;k-=b.v;m-=b.A;n-=b.B;q-=e.v;p-=e.A;r-=e.B;k=g.Db-k;m=g.Eb-m;n=g.Fb-n;q=g.bc-q;p=g.cc-p;g=g.dc-r;r=k*k+m*m+n*n;g=q*q+p*p+g*g;g=r<g?r:g;g<d&&(d=g,c=l)}return c},Pn:function(a,b,e){this.ol=this.Ka.Xd;for(var d=0,c=this.ol;d<c;){var f=d++,h=this.pl[f],f=this.Ka.tc[f];h.bf=f.bf;h.cf=f.cf;h.df=f.df;h.ef=f.ef;h.ff=f.ff;h.gf=f.gf;h.Db=f.Db;h.Eb=f.Eb;h.Fb=f.Fb;h.bc=f.bc;h.cc=f.cc;h.dc=f.dc;h.Fd=f.Fd;h.Gd=f.Gd;h.Hd=f.Hd;h.Id=f.Id;h.Jd=f.Jd;h.Kd=f.Kd;h.Dc=f.Dc;h.Wd.Zd(f.Wd);h.sc=f.sc;h.Se=f.Se;h.Jf=!1}d=a.numPoints;this.Ka.Xd=d;for(c=0;c<d;){var f=c++,h=this.Ka.tc[f],f=a.points[f],l=f.position1;h.Fd=l.x;h.Gd=l.y;h.Hd=l.z;l=f.position2;h.Id=l.x;h.Jd=l.y;h.Kd=l.z;h.Db=h.Fd-b.v;h.Eb=h.Gd-b.A;h.Fb=h.Hd-b.B;h.bc=h.Id-e.v;h.cc=h.Jd-e.A;h.dc=h.Kd-e.B;var g,k,l=b.o*h.Db+b.i*h.Eb+b.l*h.Fb;g=b.f*h.Db+b.m*h.Eb+b.g*h.Fb;k=b.h*h.Db+b.j*h.Eb+b.s*h.Fb;h.bf=l;h.cf=g;h.df=k;l=e.o*h.bc+e.i*h.cc+e.l*h.dc;g=e.f*h.bc+e.m*h.cc+e.g*h.dc;k=e.h*h.bc+e.j*h.cc+e.s*h.dc;h.ef=l;h.ff=g;h.gf=k;h.Dc=f.depth;l=h.Wd;l.Xc=0;l.yc=0;l.xc=0;l.ub=0;l.Ue=0;l.Ve=0;l.We=0;h.sc=f.id;h.Se=!1;h.Jf=!1;f=0;for(l=this.ol;f<l;)if(g=f++,g=this.pl[g],h.sc==g.sc){h.Wd.Zd(g.Wd);h.Se=!0;break}}},Bn:function(a,b,e){this.Ka.Kl(b,e);for(var d=0,c=this.Ka.Xd;d<c;){var f=d++;this.Ka.tc[f].Se=!0}if(1!=a.numPoints)throw Error("assertion error: result.numPoints == 1 is false");a=a.points[0];d=this.dn(a,b,e);-1==d?this.Wm(a,b,e):(d=this.Ka.tc[d],c=a.position1,d.Fd=c.x,d.Gd=c.y,d.Hd=c.z,c=a.position2,d.Id=c.x,d.Jd=c.y,d.Kd=c.z,d.Db=d.Fd-b.v,d.Eb=d.Gd-b.A,d.Fb=d.Hd-b.B,d.bc=d.Id-e.v,d.cc=d.Jd-e.A,d.dc=d.Kd-e.B,c=b.o*d.Db+b.i*d.Eb+b.l*d.Fb,f=b.f*d.Db+b.m*d.Eb+b.g*d.Fb,b=b.h*d.Db+b.j*d.Eb+b.s*d.Fb,d.bf=c,d.cf=f,d.df=b,b=e.o*d.bc+e.i*d.cc+e.l*d.dc,c=e.f*d.bc+e.m*d.cc+e.g*d.dc,e=e.h*d.bc+e.j*d.cc+e.s*d.dc,d.ef=b,d.ff=c,d.gf=e,d.Dc=a.depth);this.Hn()},ra:hj};dd.aa=!0;dd.prototype={Bm:function(){this.wc=0;if(0!=this.wa||0!=this.xa||0!=this.ya||0!=this.Ca||0!=this.Da||0!=this.Ea)this.wc|=1;if(0!=this.ba||0!=this.ca||0!=this.da||0!=this.fa||0!=this.ga||0!=this.ha)this.wc|=2},ra:dd};Sf.aa=!0;Sf.prototype={ra:Sf};gj.aa=!0;gj.prototype={ra:gj};Oe.aa=!0;Oe.prototype={ra:Oe};fj.aa=!0;fj.prototype={ra:fj};L.aa=!0;L.prototype={ed:function(){var a=this.C.a,b=this.D.a,e,d,c;e=a.o*this.Pi+a.f*this.Qi+a.h*this.Ri;d=a.i*this.Pi+a.m*this.Qi+a.j*this.Ri;c=a.l*this.Pi+a.g*this.Qi+a.s*this.Ri;this.Qb=e;this.Rb=d;this.Sb=c;e=b.o*this.Si+b.f*this.Ti+b.h*this.Ui;d=b.i*this.Si+b.m*this.Ti+b.j*this.Ui;c=b.l*this.Si+b.g*this.Ti+b.s*this.Ui;this.Tb=e;this.Ub=d;this.Vb=c;this.Df=this.Qb+a.v;this.Ef=this.Rb+a.A;this.Ff=this.Sb+a.B;this.Gf=this.Tb+b.v;this.Hf=this.Ub+b.A;this.If=this.Vb+b.B;e=a.o*this.sa+a.f*this.ta+a.h*this.ua;d=a.i*this.sa+a.m*this.ta+a.j*this.ua;c=a.l*this.sa+a.g*this.ta+a.s*this.ua;this.vb=e;this.wb=d;this.xb=c;e=a.o*this.Ab+a.f*this.Bb+a.h*this.Cb;d=a.i*this.Ab+a.m*this.Bb+a.j*this.Cb;c=a.l*this.Ab+a.g*this.Bb+a.s*this.Cb;this.xe=e;this.ye=d;this.ze=c;e=a.o*this.hc+a.f*this.ic+a.h*this.jc;d=a.i*this.hc+a.m*this.ic+a.j*this.jc;a=a.l*this.hc+a.g*this.ic+a.s*this.jc;this.th=e;this.uh=d;this.vh=a;a=b.o*this.lb+b.f*this.mb+b.h*this.nb;e=b.i*this.lb+b.m*this.mb+b.j*this.nb;d=b.l*this.lb+b.g*this.mb+b.s*this.nb;this.Zb=a;this.$b=e;this.ac=d;a=b.o*this.Wg+b.f*this.Xg+b.h*this.Yg;e=b.i*this.Wg+b.m*this.Xg+b.j*this.Yg;d=b.l*this.Wg+b.g*this.Xg+b.s*this.Yg;this.ne=a;this.oe=e;this.pe=d;a=b.o*this.Ic+b.f*this.Jc+b.h*this.Kc;e=b.i*this.Ic+b.m*this.Jc+b.j*this.Kc;b=b.l*this.Ic+b.g*this.Jc+b.s*this.Kc;this.Rg=a;this.Sg=e;this.Tg=b},Vd:function(a,b){b.Ce=this.C;b.De=this.D;b.La=0},dd:function(a){a.Ce=this.C;a.De=this.D;a.La=0},Cl:function(){var a=this.Ai*this.Ai+this.Bi*this.Bi+this.Ci*this.Ci,b=this.Di*this.Di+this.Ei*this.Ei+this.Fi*this.Fi;0<this.Ji&&a>this.Ji*this.Ji?this.kc.sl(this):0<this.Ki&&b>this.Ki*this.Ki&&this.kc.sl(this)},me:function(){return this.C},Ge:function(){return this.D},Jg:function(){return this.Xb},bb:function(){var a=new t;a.x=this.Df;a.y=this.Ef;a.z=this.Ff;return a},Lb:function(){var a=new t;a.x=this.Gf;a.y=this.Hf;a.z=this.If;return a},tb:function(a){a.x=this.Df;a.y=this.Ef;a.z=this.Ff},lc:function(a){a.x=this.Gf;a.y=this.Hf;a.z=this.If},be:function(){var a=new t;a.x=this.Pi;a.y=this.Qi;a.z=this.Ri;return a},de:function(){var a=new t;a.x=this.Si;a.y=this.Ti;a.z=this.Ui;return a},ce:function(a){a.x=this.Pi;a.y=this.Qi;a.z=this.Ri},ee:function(a){a.x=this.Si;a.y=this.Ti;a.z=this.Ui},Cc:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.vb;e=this.xe;d=this.th;c=this.wb;f=this.ye;h=this.uh;l=this.xb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},ad:function(){var a=new O,b,e,d,c,f,h,l,g,k;b=this.Zb;e=this.ne;d=this.Rg;c=this.$b;f=this.oe;h=this.Sg;l=this.ac;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Hc:function(a){var b,e,d,c,f,h,l,g,k;b=this.vb;e=this.xe;d=this.th;c=this.wb;f=this.ye;h=this.uh;l=this.xb;g=this.ze;k=this.vh;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},bd:function(a){var b,e,d,c,f,h,l,g,k;b=this.Zb;e=this.ne;d=this.Rg;c=this.$b;f=this.oe;h=this.Sg;l=this.ac;g=this.pe;k=this.Tg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},Qa:function(){return this.gk},Kg:function(a){this.gk=a},cd:function(){return this.Ji},Lg:function(a){this.Ji=a},Pd:function(){return this.Ki},Mg:function(a){this.Ki=a},fe:function(){return this.Ec},Ng:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Ec=a},mc:function(){var a=new t;a.x=this.Ai;a.y=this.Bi;a.z=this.Ci;return a},qc:function(a){a.x=this.Ai;a.y=this.Bi;a.z=this.Ci},rc:function(){var a=new t;a.x=this.Di;a.y=this.Ei;a.z=this.Fi;return a},zc:function(a){a.x=this.Di;a.y=this.Ei;a.z=this.Fi},Bf:function(){return this.ja},He:function(){return this.M},ra:L};wb.aa=!0;wb.Kb=L;wb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorY*d,d=this.angularErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,B;l=-this.Sb;g=this.Rb;k=this.Sb;m=-this.Qb;n=-this.Rb;q=this.Qb;p=-this.Vb;r=this.Ub;v=this.Vb;t=-this.Tb;w=-this.Ub;B=this.Tb;var u,D=1/(this.C.$a+this.D.$a),V=this.ea.Yc,A=this.ea.Zc,E=this.ea.$c,x=(this.C.P*V+this.C.R*A+this.C.S*E)*V+(this.C.T*V+this.C.U*A+this.C.V*E)*A+(this.C.W*V+this.C.X*A+this.C.Y*E)*E;u=(this.D.P*V+this.D.R*A+this.D.S*E)*V+(this.D.T*V+this.D.U*A+this.D.V*E)*A+(this.D.W*V+this.D.X*A+this.D.Y*E)*E;if(0<x){var C=V*this.Qb+A*this.Rb+E*this.Sb,C=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-C*C;0<C&&(x=0<this.C.$a?1/(1/x+this.C.Lc*C):0)}0<u&&(V=V*this.Tb+A*this.Ub+E*this.Vb,V=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-V*V,0<V&&(u=0<this.D.$a?1/(1/u+this.D.Lc*V):0));x=x+u?1/(x+u):0;if(0>=this.Lk.frequency||!e){u=this.Ob[0];V=a.rows[a.La++];A=V.Ba;A.wa=0;A.xa=0;A.ya=0;A.Ca=0;A.Da=0;A.Ea=0;A.ba=0;A.ca=0;A.da=0;A.fa=0;A.ga=0;A.ha=0;V.Ga=0;V.Na=0;V.Ja=0;V.Ia=0;V.motorSpeed=0;V.cb=0;V.va=null;V.va=u;u=V;var V=this.Vf,C=this.Kk,E=this.Lk,N,A=F.linearSlop;if(e)E=0,N=1;else{if(0<E.frequency){var A=0,I=6.28318530717958*E.frequency,L=E.dampingRatio;L<F.minSpringDamperDampingRatio&&(L=F.minSpringDamperDampingRatio);N=b.dt;L=2*L*I;I*=I;E.useSymplecticEuler?(E=1/(N*L),N=I/L):(E=1/(N*(N*I+L)),N=I/(N*I+L))}else E=0,N=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<C.motorForce?(u.motorSpeed=C.motorSpeed,u.cb=C.motorForce*b.dt):(u.motorSpeed=0,u.cb=0)}var L=C.lowerLimit,M=C.upperLimit;L>M?V=I=C=0:L==M?(C=-1/0,I=1/0,V-=L):V<L?(C=-1/0,I=0,V=V-L+A,0<V&&(V=0)):V>M?(C=0,I=1/0,V=V-M-A,0>V&&(V=0)):V=I=C=0;u.Ja=C;u.Ia=I;u.Na=E*(D?1/D:0);u.Ga=V*N;u=u.Ba;u.wa=this.ea.Yc;u.xa=this.ea.Zc;u.ya=this.ea.$c;u.Ca=this.ea.Yc;u.Da=this.ea.Zc;u.Ea=this.ea.$c;u.ba=-0;u.ca=-l;u.da=-g;u.fa=-0;u.ga=-p;u.ha=-r}u=this.Ob[1];l=a.rows[a.La++];g=l.Ba;g.wa=0;g.xa=0;g.ya=0;g.Ca=0;g.Da=0;g.Ea=0;g.ba=0;g.ca=0;g.da=0;g.fa=0;g.ga=0;g.ha=0;l.Ga=0;l.Na=0;l.Ja=0;l.Ia=0;l.motorSpeed=0;l.cb=0;l.va=u;u=l;u.Ga=c;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=this.ea.Md;u.xa=this.ea.Nd;u.ya=this.ea.Od;u.Ca=this.ea.Md;u.Da=this.ea.Nd;u.Ea=this.ea.Od;u.ba=-k;u.ca=-0;u.da=-m;u.fa=-v;u.ga=-0;u.ha=-t;c=this.Ob[2];u=a.rows[a.La++];k=u.Ba;k.wa=0;k.xa=0;k.ya=0;k.Ca=0;k.Da=0;k.Ea=0;k.ba=0;k.ca=0;k.da=0;k.fa=0;k.ga=0;k.ha=0;u.Ga=0;u.Na=0;u.Ja=0;u.Ia=0;u.motorSpeed=0;u.cb=0;u.va=c;u.Ga=f;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=this.ea.je;u.xa=this.ea.ke;u.ya=this.ea.le;u.Ca=this.ea.je;u.Da=this.ea.ke;u.Ea=this.ea.le;u.ba=-n;u.ca=-q;u.da=-0;u.fa=-w;u.ga=-B;u.ha=-0;if(0>=this.Ek.frequency||!e)f=this.Ob[3],n=a.rows[a.La++],q=n.Ba,q.wa=0,q.xa=0,q.ya=0,q.Ca=0,q.Da=0,q.Ea=0,q.ba=0,q.ca=0,q.da=0,q.fa=0,q.ga=0,q.ha=0,n.Ga=0,n.Na=0,n.Ja=0,n.Ia=0,n.motorSpeed=0,n.cb=0,n.va=f,u=n,f=this.angle,q=this.Dk,w=this.Ek,n=F.angularSlop,e?(e=0,w=1):(0<w.frequency?(n=0,e=6.28318530717958*w.frequency,c=w.dampingRatio,c<F.minSpringDamperDampingRatio&&(c=F.minSpringDamperDampingRatio),B=b.dt,c=2*c*e,k=e*e,w.useSymplecticEuler?(e=1/(B*c),w=k/c):(e=1/(B*(B*k+c)),w=k/(B*k+c))):(e=0,w=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<q.motorTorque?(u.motorSpeed=q.motorSpeed,u.cb=q.motorTorque*b.dt):(u.motorSpeed=0,u.cb=0)),b=q.lowerLimit,q=q.upperLimit,B=.5*(b+q),f=((f-B+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+B,b>q?b=c=B=0:b==q?(B=-1/0,c=1/0,b=f-b):f<b?(B=-1/0,c=0,b=f-b+n,0<b&&(b=0)):f>q?(B=0,c=1/0,b=f-q-n,0>b&&(b=0)):b=c=B=0,u.Ja=B,u.Ia=c,u.Na=e*(x?1/x:0),u.Ga=b*w,u=u.Ba,u.ba=this.ea.Yc,u.ca=this.ea.Zc,u.da=this.ea.$c,u.fa=this.ea.Yc,u.ga=this.ea.Zc,u.ha=this.ea.$c;b=this.Ob[4];x=a.rows[a.La++];e=x.Ba;e.wa=0;e.xa=0;e.ya=0;e.Ca=0;e.Da=0;e.Ea=0;e.ba=0;e.ca=0;e.da=0;e.fa=0;e.ga=0;e.ha=0;x.Ga=0;x.Na=0;x.Ja=0;x.Ia=0;x.motorSpeed=0;x.cb=0;x.va=b;u=x;u.Ga=h;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.ba=this.ea.Md;u.ca=this.ea.Nd;u.da=this.ea.Od;u.fa=this.ea.Md;u.ga=this.ea.Nd;u.ha=this.ea.Od;h=this.Ob[5];a=a.rows[a.La++];b=a.Ba;b.wa=0;b.xa=0;b.ya=0;b.Ca=0;b.Da=0;b.Ea=0;b.ba=0;b.ca=0;b.da=0;b.fa=0;b.ga=0;b.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=h;u=a;u.Ga=d;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.ba=this.ea.je;u.ca=this.ea.ke;u.da=this.ea.le;u.fa=this.ea.je;u.ga=this.ea.ke;u.ha=this.ea.le},ed:function(){L.prototype.ed.call(this);var a=this.ea,b=a.$.C.$a,e=a.$.D.$a,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,V,A,E,x,F,C,I,M,O,ha,ga,qa,Vb=a.$.vb*a.$.Zb+a.$.wb*a.$.$b+a.$.xb*a.$.ac;if(-1.000001<Vb&&-.999999>Vb){var pa,ka,Va,U=a.$.vb,R=a.$.wb,cc=a.$.xb,Ma=U*U,Qa=R*R,vc=cc*cc,Oa;Ma<Qa?Ma<vc?(Oa=1/Math.sqrt(Qa+vc),pa=0,ka=cc*Oa,Va=-R*Oa):(Oa=1/Math.sqrt(Ma+Qa),pa=R*Oa,ka=-U*Oa,Va=0):Qa<vc?(Oa=1/Math.sqrt(vc+Ma),pa=-cc*Oa,ka=0,Va=U*Oa):(Oa=1/Math.sqrt(Ma+Qa),pa=R*Oa,ka=-U*Oa,Va=0);d=pa;c=ka;f=Va;h=0}else{var Ba,Bb,H;Ba=a.$.wb*a.$.ac-a.$.xb*a.$.$b;Bb=a.$.xb*a.$.Zb-a.$.vb*a.$.ac;H=a.$.vb*a.$.$b-a.$.wb*a.$.Zb;var Pa=Math.sqrt(.5*(1+Vb)),Vb=.5/Pa;Ba*=Vb;Bb*=Vb;H*=Vb;d=Ba;c=Bb;f=H;h=Pa}var ba,Q,P,wa,ta,W,oa,y;P=Q=ba=0;wa=1;ta=d;W=c;oa=f;y=h;var Ga=ba*ta+Q*W+P*oa+wa*y;0>Ga&&(Ga=-Ga,ta=-ta,W=-W,oa=-oa,y=-y);if(.999999<Ga){var ca,Ca,xa,Da;ca=ta-ba;Ca=W-Q;xa=oa-P;Da=y-wa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ca;oa=P+b/(b+e)*xa;y=wa+b/(b+e)*Da;var Ra=ta*ta+W*W+oa*oa+y*y;1E-32<Ra&&(Ra=1/Math.sqrt(Ra));l=ta*Ra;g=W*Ra;k=oa*Ra;m=y*Ra}else{var la=b/(b+e)*Math.acos(Ga);ta+=ba*-Ga;W+=Q*-Ga;oa+=P*-Ga;y+=wa*-Ga;var Z=ta*ta+W*W+oa*oa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;oa*=Z;y*=Z;var Ea=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;wa*=ra;l=ba+ta*Ea;g=Q+W*Ea;k=P+oa*Ea;m=wa+y*Ea}var va=l,J=g,Ka=k,Xa=m,S=2*va,Ya=2*J,T=2*Ka,K=va*S,ia=J*Ya,gb=Ka*T,da=va*Ya,ya=J*T,sa=va*T,fb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-gb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-gb;t=ya-fb;w=sa-jb;B=ya+fb;u=1-K-ia;var ma,na;ma=n*a.$.vb+q*a.$.wb+p*a.$.xb;na=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=w*a.$.vb+B*a.$.wb+u*a.$.xb;I=a.Yc;M=a.Zc;O=a.$c;ha=a.Md;ga=a.Nd;qa=a.Od;var Ia=I*ma+M*na+O*D;if(-1.000001<Ia&&-.999999>Ia){var Fa,nb,fa,ea=I*I,ja=M*M,cb=O*O,za;ea<ja?ea<cb?(za=1/Math.sqrt(ja+cb),Fa=0,nb=O*za,fa=-M*za):(za=1/Math.sqrt(ea+ja),Fa=M*za,nb=-I*za,fa=0):ja<cb?(za=1/Math.sqrt(cb+ea),Fa=-O*za,nb=0,fa=I*za):(za=1/Math.sqrt(ea+ja),Fa=M*za,nb=-I*za,fa=0);l=Fa;g=nb;k=fa;m=0}else{var tb,Ta,qb;tb=M*D-O*na;Ta=O*ma-I*D;qb=I*na-M*ma;var rb=Math.sqrt(.5*(1+Ia)),Ia=.5/rb;tb*=Ia;Ta*=Ia;qb*=Ia;l=tb;g=Ta;k=qb;m=rb}var vb=l,Wa=g,yb=k,Ha=m,$a=2*vb,ua=2*Wa,Jb=2*yb,G=vb*$a,ob=Wa*ua,db=yb*Jb,Aa=vb*ua,ab=Wa*Jb,hb=vb*Jb,z=Ha*$a,Db=Ha*ua,Ua=Ha*Jb;n=1-ob-db;q=Aa-Ua;p=hb+Db;r=Aa+Ua;v=1-G-db;t=ab-z;w=hb-Db;B=ab+z;u=1-G-ob;var pb,Eb,Na;pb=n*ha+q*ga+p*qa;Eb=r*ha+v*ga+t*qa;Na=w*ha+B*ga+u*qa;V=pb;A=Eb;E=Na;x=na*E-D*A;F=D*V-ma*E;C=ma*A-na*V;if(1E-6<x*x+F*F+C*C){var mb=x*x+F*F+C*C;0<mb&&(mb=1/Math.sqrt(mb));x*=mb;F*=mb;C*=mb}else{var xb=ma*ma,zb=na*na,eb=D*D,Y;xb<zb?xb<eb?(Y=1/Math.sqrt(zb+eb),x=0,F=D*Y,C=-na*Y):(Y=1/Math.sqrt(xb+zb),x=na*Y,F=-ma*Y,C=0):zb<eb?(Y=1/Math.sqrt(eb+xb),x=-D*Y,F=0,C=ma*Y):(Y=1/Math.sqrt(xb+zb),x=na*Y,F=-ma*Y,C=0)}V=F*D-C*na;A=C*ma-x*D;E=x*na-F*ma;a.Yc=ma;a.Zc=na;a.$c=D;a.Md=V;a.Nd=A;a.Od=E;a.je=x;a.ke=F;a.le=C;var La,kb,Sa;La=this.wb*this.ac-this.xb*this.$b;kb=this.xb*this.Zb-this.vb*this.ac;Sa=this.vb*this.$b-this.wb*this.Zb;var ib=this.vb*this.Zb+this.wb*this.$b+this.xb*this.ac,Ja=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib),Hb=La*La+kb*kb+Sa*Sa;0<Hb&&(Hb=1/Math.sqrt(Hb));La*=Hb;kb*=Hb;Sa*=Hb;La*=Ja;kb*=Ja;Sa*=Ja;this.angularErrorY=La*this.ea.Md+kb*this.ea.Nd+Sa*this.ea.Od;this.angularErrorZ=La*this.ea.je+kb*this.ea.ke+Sa*this.ea.le;var wb,X,Cb;wb=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Cb=this.xe*this.oe-this.ye*this.ne;ib=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib);0>wb*this.ea.Yc+X*this.ea.Zc+Cb*this.ea.$c&&(this.angle=-this.angle);var bb,sb,ub;bb=this.Gf-this.Df;sb=this.Hf-this.Ef;ub=this.If-this.Ff;this.Vf=bb*this.ea.Yc+sb*this.ea.Zc+ub*this.ea.$c;this.linearErrorY=bb*this.ea.Md+sb*this.ea.Nd+ub*this.ea.Od;this.linearErrorZ=bb*this.ea.je+sb*this.ea.ke+ub*this.ea.le},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},vn:function(){return this.Lk},nn:function(){return this.Ek},un:function(){return this.Kk},mn:function(){return this.Dk},Xk:function(){return this.angle},$k:function(){return this.Vf},ra:wb});Fc.aa=!0;Fc.prototype={Vg:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var d=this.rigidBody1,c,f,h;c=e.x;f=e.y;h=e.z;c-=d.a.v;f-=d.a.A;h-=d.a.B;a=d.a.o*c+d.a.i*f+d.a.l*h;b=d.a.f*c+d.a.m*f+d.a.g*h;d=d.a.h*c+d.a.j*f+d.a.s*h;c=this.localAnchor1;c.x=a;c.y=b;c.z=d;b=this.rigidBody2;d=e.x;c=e.y;f=e.z;d-=b.a.v;c-=b.a.A;f-=b.a.B;e=b.a.o*d+b.a.i*c+b.a.l*f;a=b.a.f*d+b.a.m*c+b.a.g*f;b=b.a.h*d+b.a.j*c+b.a.s*f;d=this.localAnchor2;d.x=e;d.y=a;d.z=b},ra:Fc};te.aa=!0;te.Kb=Fc;te.prototype=sb(Fc.prototype,{Aa:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},ra:te});Qe.aa=!0;Qe.prototype={ra:Qe};Ck.aa=!0;Ck.prototype={ra:Ck};Oc.aa=!0;Oc.prototype={Qa:function(){return this.wk},tb:function(){return this.Mc},Lb:function(){return this.ja},bb:function(){return this.M},ra:Oc};nc.aa=!0;Nb.aa=!0;Nb.Kb=L;Nb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorX*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,B,u;g=-this.Sb;k=this.Rb;m=this.Sb;n=-this.Qb;q=-this.Rb;p=this.Qb;r=-this.Vb;v=this.Ub;t=this.Vb;w=-this.Tb;B=-this.Ub;u=this.Tb;var D,V;V=1/(this.C.$a+this.D.$a);if(0>=this.ue.frequency||!e){D=this.Ob[0];var A=a.rows[a.La++],E=A.Ba;E.wa=0;E.xa=0;E.ya=0;E.Ca=0;E.Da=0;E.Ea=0;E.ba=0;E.ca=0;E.da=0;E.fa=0;E.ga=0;E.ha=0;A.Ga=0;A.Na=0;A.Ja=0;A.Ia=0;A.motorSpeed=0;A.cb=0;A.va=D;D=A;var A=this.Vf,x=this.Ch,C=this.ue,E=F.linearSlop;if(e)C=0,e=1;else{if(0<C.frequency){var E=0,N=6.28318530717958*C.frequency,I=C.dampingRatio;I<F.minSpringDamperDampingRatio&&(I=F.minSpringDamperDampingRatio);e=b.dt;I=2*I*N;N*=N;C.useSymplecticEuler?(C=1/(e*I),e=N/I):(C=1/(e*(e*N+I)),e=N/(e*N+I))}else C=0,e=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<x.motorForce?(D.motorSpeed=x.motorSpeed,D.cb=x.motorForce*b.dt):(D.motorSpeed=0,D.cb=0)}b=x.lowerLimit;N=x.upperLimit;b>N?b=I=x=0:b==N?(x=-1/0,I=1/0,b=A-b):A<b?(x=-1/0,I=0,b=A-b+E,0<b&&(b=0)):A>N?(x=0,I=1/0,b=A-N-E,0>b&&(b=0)):b=I=x=0;D.Ja=x;D.Ia=I;D.Na=C*(V?1/V:0);D.Ga=b*e;V=D.Ba;V.wa=this.ea.Yc;V.xa=this.ea.Zc;V.ya=this.ea.$c;V.Ca=this.ea.Yc;V.Da=this.ea.Zc;V.Ea=this.ea.$c;V.ba=-0;V.ca=-g;V.da=-k;V.fa=-0;V.ga=-r;V.ha=-v}g=this.Ob[1];k=a.rows[a.La++];r=k.Ba;r.wa=0;r.xa=0;r.ya=0;r.Ca=0;r.Da=0;r.Ea=0;r.ba=0;r.ca=0;r.da=0;r.fa=0;r.ga=0;r.ha=0;k.Ga=0;k.Na=0;k.Ja=0;k.Ia=0;k.motorSpeed=0;k.cb=0;k.va=g;D=k;D.Ga=c;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.wa=this.ea.Md;V.xa=this.ea.Nd;V.ya=this.ea.Od;V.Ca=this.ea.Md;V.Da=this.ea.Nd;V.Ea=this.ea.Od;V.ba=-m;V.ca=-0;V.da=-n;V.fa=-t;V.ga=-0;V.ha=-w;c=this.Ob[2];m=a.rows[a.La++];n=m.Ba;n.wa=0;n.xa=0;n.ya=0;n.Ca=0;n.Da=0;n.Ea=0;n.ba=0;n.ca=0;n.da=0;n.fa=0;n.ga=0;n.ha=0;m.Ga=0;m.Na=0;m.Ja=0;m.Ia=0;m.motorSpeed=0;m.cb=0;m.va=c;D=m;D.Ga=f;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.wa=this.ea.je;V.xa=this.ea.ke;V.ya=this.ea.le;V.Ca=this.ea.je;V.Da=this.ea.ke;V.Ea=this.ea.le;V.ba=-q;V.ca=-p;V.da=-0;V.fa=-B;V.ga=-u;V.ha=-0;f=this.Ob[3];q=a.rows[a.La++];p=q.Ba;p.wa=0;p.xa=0;p.ya=0;p.Ca=0;p.Da=0;p.Ea=0;p.ba=0;p.ca=0;p.da=0;p.fa=0;p.ga=0;p.ha=0;q.Ga=0;q.Na=0;q.Ja=0;q.Ia=0;q.motorSpeed=0;q.cb=0;q.va=f;D=q;D.Ga=h;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.ba=1;V.ca=0;V.da=0;V.fa=1;V.ga=0;V.ha=0;h=this.Ob[4];f=a.rows[a.La++];q=f.Ba;q.wa=0;q.xa=0;q.ya=0;q.Ca=0;q.Da=0;q.Ea=0;q.ba=0;q.ca=0;q.da=0;q.fa=0;q.ga=0;q.ha=0;f.Ga=0;f.Na=0;f.Ja=0;f.Ia=0;f.motorSpeed=0;f.cb=0;f.va=h;D=f;D.Ga=l;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.ba=0;V.ca=1;V.da=0;V.fa=0;V.ga=1;V.ha=0;l=this.Ob[5];a=a.rows[a.La++];h=a.Ba;h.wa=0;h.xa=0;h.ya=0;h.Ca=0;h.Da=0;h.Ea=0;h.ba=0;h.ca=0;h.da=0;h.fa=0;h.ga=0;h.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=l;D=a;D.Ga=d;D.Na=0;D.Ja=-1/0;D.Ia=1/0;V=D.Ba;V.ba=0;V.ca=0;V.da=1;V.fa=0;V.ga=0;V.ha=1},ed:function(){L.prototype.ed.call(this);var a=this.ea,b=a.$.C.$a,e=a.$.D.$a,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,F,A,E,x,C,N,I,M,O,ha,ga,qa,Vb=a.$.vb*a.$.Zb+a.$.wb*a.$.$b+a.$.xb*a.$.ac;if(-1.000001<Vb&&-.999999>Vb){var pa,ka,Va,U=a.$.vb,R=a.$.wb,cc=a.$.xb,Ma=U*U,Qa=R*R,ya=cc*cc,Oa;Ma<Qa?Ma<ya?(Oa=1/Math.sqrt(Qa+ya),pa=0,ka=cc*Oa,Va=-R*Oa):(Oa=1/Math.sqrt(Ma+Qa),pa=R*Oa,ka=-U*Oa,Va=0):Qa<ya?(Oa=1/Math.sqrt(ya+Ma),pa=-cc*Oa,ka=0,Va=U*Oa):(Oa=1/Math.sqrt(Ma+Qa),pa=R*Oa,ka=-U*Oa,Va=0);d=pa;c=ka;f=Va;h=0}else{var Ba,Bb,H;Ba=a.$.wb*a.$.ac-a.$.xb*a.$.$b;Bb=a.$.xb*a.$.Zb-a.$.vb*a.$.ac;H=a.$.vb*a.$.$b-a.$.wb*a.$.Zb;var Pa=Math.sqrt(.5*(1+Vb)),Vb=.5/Pa;Ba*=Vb;Bb*=Vb;H*=Vb;d=Ba;c=Bb;f=H;h=Pa}var ba,Q,P,wa,ta,W,oa,y;P=Q=ba=0;wa=1;ta=d;W=c;oa=f;y=h;var Ga=ba*ta+Q*W+P*oa+wa*y;0>Ga&&(Ga=-Ga,ta=-ta,W=-W,oa=-oa,y=-y);if(.999999<Ga){var ca,Ca,xa,Da;ca=ta-ba;Ca=W-Q;xa=oa-P;Da=y-wa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ca;oa=P+b/(b+e)*xa;y=wa+b/(b+e)*Da;var Ra=ta*ta+W*W+oa*oa+y*y;1E-32<Ra&&(Ra=1/Math.sqrt(Ra));l=ta*Ra;g=W*Ra;k=oa*Ra;m=y*Ra}else{var la=b/(b+e)*Math.acos(Ga);ta+=ba*-Ga;W+=Q*-Ga;oa+=P*-Ga;y+=wa*-Ga;var Z=ta*ta+W*W+oa*oa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;oa*=Z;y*=Z;var Ea=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;wa*=ra;l=ba+ta*Ea;g=Q+W*Ea;k=P+oa*Ea;m=wa+y*Ea}var va=l,J=g,Ka=k,Xa=m,S=2*va,Ya=2*J,T=2*Ka,K=va*S,ia=J*Ya,gb=Ka*T,da=va*Ya,Ha=J*T,sa=va*T,fb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-gb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-gb;t=Ha-fb;w=sa-jb;B=Ha+fb;u=1-K-ia;var ma,na;ma=n*a.$.vb+q*a.$.wb+p*a.$.xb;na=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=w*a.$.vb+B*a.$.wb+u*a.$.xb;I=a.Yc;M=a.Zc;O=a.$c;ha=a.Md;ga=a.Nd;qa=a.Od;var Ia=I*ma+M*na+O*D;if(-1.000001<Ia&&-.999999>Ia){var Fa,nb,fa,ea=I*I,ja=M*M,cb=O*O,za;ea<ja?ea<cb?(za=1/Math.sqrt(ja+cb),Fa=0,nb=O*za,fa=-M*za):(za=1/Math.sqrt(ea+ja),Fa=M*za,nb=-I*za,fa=0):ja<cb?(za=1/Math.sqrt(cb+ea),Fa=-O*za,nb=0,fa=I*za):(za=1/Math.sqrt(ea+ja),Fa=M*za,nb=-I*za,fa=0);l=Fa;g=nb;k=fa;m=0}else{var tb,Ta,qb;tb=M*D-O*na;Ta=O*ma-I*D;qb=I*na-M*ma;var rb=Math.sqrt(.5*(1+Ia)),Ia=.5/rb;tb*=Ia;Ta*=Ia;qb*=Ia;l=tb;g=Ta;k=qb;m=rb}var vb=l,Wa=g,yb=k,Aa=m,$a=2*vb,ua=2*Wa,Jb=2*yb,G=vb*$a,ob=Wa*ua,db=yb*Jb,Ua=vb*ua,ab=Wa*Jb,hb=vb*Jb,z=Aa*$a,Db=Aa*ua,pb=Aa*Jb;n=1-ob-db;q=Ua-pb;p=hb+Db;r=Ua+pb;v=1-G-db;t=ab-z;w=hb-Db;B=ab+z;u=1-G-ob;var wb,Eb,Na;wb=n*ha+q*ga+p*qa;Eb=r*ha+v*ga+t*qa;Na=w*ha+B*ga+u*qa;F=wb;A=Eb;E=Na;x=na*E-D*A;C=D*F-ma*E;N=ma*A-na*F;if(1E-6<x*x+C*C+N*N){var mb=x*x+C*C+N*N;0<mb&&(mb=1/Math.sqrt(mb));x*=mb;C*=mb;N*=mb}else{var xb=ma*ma,zb=na*na,eb=D*D,Y;xb<zb?xb<eb?(Y=1/Math.sqrt(zb+eb),x=0,C=D*Y,N=-na*Y):(Y=1/Math.sqrt(xb+zb),x=na*Y,C=-ma*Y,N=0):zb<eb?(Y=1/Math.sqrt(eb+xb),x=-D*Y,C=0,N=ma*Y):(Y=1/Math.sqrt(xb+zb),x=na*Y,C=-ma*Y,N=0)}F=C*D-N*na;A=N*ma-x*D;E=x*na-C*ma;a.Yc=ma;a.Zc=na;a.$c=D;a.Md=F;a.Nd=A;a.Od=E;a.je=x;a.ke=C;a.le=N;var La,kb,Sa,ib,Ja,Hb,bb,X,Cb,sb,ub,Fb,gc,Gb,Ib,Mb,Lb,Ob;La=this.vb;kb=this.xe;Sa=this.th;ib=this.wb;Ja=this.ye;Hb=this.uh;bb=this.xb;X=this.ze;Cb=this.vh;sb=this.Zb;ub=this.ne;Fb=this.Rg;gc=this.$b;Gb=this.oe;Ib=this.Sg;Mb=this.ac;Lb=this.pe;Ob=this.Tg;var jc,tc,kc,ac,Wb,Xb,Rb,hc;jc=sb*La+ub*kb+Fb*Sa;tc=sb*ib+ub*Ja+Fb*Hb;kc=sb*bb+ub*X+Fb*Cb;ac=gc*La+Gb*kb+Ib*Sa;Wb=gc*ib+Gb*Ja+Ib*Hb;Xb=gc*bb+Gb*X+Ib*Cb;Rb=Mb*La+Lb*kb+Ob*Sa;hc=Mb*ib+Lb*Ja+Ob*Hb;var Sb,Qb,Yb,ic,Kb=Mb*bb+Lb*X+Ob*Cb,$b=jc+Wb+Kb,lb;0<$b?(lb=Math.sqrt($b+1),ic=.5*lb,lb=.5/lb,Sb=(hc-Xb)*lb,Qb=(kc-Rb)*lb,Yb=(ac-tc)*lb):jc>Wb?jc>Kb?(lb=Math.sqrt(jc-Wb-Kb+1),Sb=.5*lb,lb=.5/lb,Qb=(tc+ac)*lb,Yb=(kc+Rb)*lb,ic=(hc-Xb)*lb):(lb=Math.sqrt(Kb-jc-Wb+1),Yb=.5*lb,lb=.5/lb,Sb=(kc+Rb)*lb,Qb=(Xb+hc)*lb,ic=(ac-tc)*lb):Wb>Kb?(lb=Math.sqrt(Wb-Kb-jc+1),Qb=.5*lb,lb=.5/lb,Sb=(tc+ac)*lb,Yb=(Xb+hc)*lb,ic=(kc-Rb)*lb):(lb=Math.sqrt(Kb-jc-Wb+1),Yb=.5*lb,lb=.5/lb,Sb=(kc+Rb)*lb,Qb=(Xb+hc)*lb,ic=(ac-tc)*lb);var Pb=ic,Tb=2*(-1>=Pb?3.14159265358979:1<=Pb?0:Math.acos(Pb));this.angularErrorX=Sb;this.angularErrorY=Qb;this.angularErrorZ=Yb;var Nb=this.angularErrorX*this.angularErrorX+this.angularErrorY*this.angularErrorY+this.angularErrorZ*this.angularErrorZ;0<Nb&&(Nb=1/Math.sqrt(Nb));this.angularErrorX*=Nb;this.angularErrorY*=Nb;this.angularErrorZ*=Nb;this.angularErrorX*=Tb;this.angularErrorY*=Tb;this.angularErrorZ*=Tb;var uc,mc,Ub;uc=this.Gf-this.Df;mc=this.Hf-this.Ef;Ub=this.If-this.Ff;this.Vf=uc*this.ea.Yc+mc*this.ea.Zc+Ub*this.ea.$c;this.linearErrorY=uc*this.ea.Md+mc*this.ea.Nd+Ub*this.ea.Od;this.linearErrorZ=uc*this.ea.je+mc*this.ea.ke+Ub*this.ea.le},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},nj:function(){return this.ue},Zk:function(){return this.Ch},$k:function(){return this.Vf},ra:Nb});Dd.aa=!0;Dd.Kb=Fc;Dd.prototype=sb(Fc.prototype,{Aa:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},ra:Dd});Mb.aa=!0;Mb.Kb=L;Mb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l,g,k,m,n,q,p,r,v,t,w,B;l=-this.Sb;g=this.Rb;k=this.Sb;m=-this.Qb;n=-this.Rb;q=this.Qb;p=-this.Vb;r=this.Ub;v=this.Vb;t=-this.Tb;w=-this.Ub;B=this.Tb;var u=this.swingAxisX,D=this.swingAxisY,C=this.swingAxisZ,d=(this.C.P*u+this.C.R*D+this.C.S*C)*u+(this.C.T*u+this.C.U*D+this.C.V*C)*D+(this.C.W*u+this.C.X*D+this.C.Y*C)*C,A=(this.D.P*u+this.D.R*D+this.D.S*C)*u+(this.D.T*u+this.D.U*D+this.D.V*C)*D+(this.D.W*u+this.D.X*D+this.D.Y*C)*C;if(0<d){var E=u*this.Qb+D*this.Rb+C*this.Sb,E=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-E*E;0<E&&(d=0<this.C.$a?1/(1/d+this.C.Lc*E):0)}0<A&&(u=u*this.Tb+D*this.Ub+C*this.Vb,u=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-u*u,0<u&&(A=0<this.D.$a?1/(1/A+this.D.Lc*u):0));A=d+A?1/(d+A):0;D=this.Zb;C=this.$b;E=this.ac;d=(this.C.P*D+this.C.R*C+this.C.S*E)*D+(this.C.T*D+this.C.U*C+this.C.V*E)*C+(this.C.W*D+this.C.X*C+this.C.Y*E)*E;u=(this.D.P*D+this.D.R*C+this.D.S*E)*D+(this.D.T*D+this.D.U*C+this.D.V*E)*C+(this.D.W*D+this.D.X*C+this.D.Y*E)*E;if(0<d){var x=D*this.Qb+C*this.Rb+E*this.Sb,x=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-x*x;0<x&&(d=0<this.C.$a?1/(1/d+this.C.Lc*x):0)}0<u&&(D=D*this.Tb+C*this.Ub+E*this.Vb,D=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-D*D,0<D&&(u=0<this.D.$a?1/(1/u+this.D.Lc*D):0));d=d+u?1/(d+u):0;u=this.Ob[0];D=a.rows[a.La++];C=D.Ba;C.wa=0;C.xa=0;C.ya=0;C.Ca=0;C.Da=0;C.Ea=0;C.ba=0;C.ca=0;C.da=0;C.fa=0;C.ga=0;C.ha=0;D.Ga=0;D.Na=0;D.Ja=0;D.Ia=0;D.motorSpeed=0;D.cb=0;D.va=u;u=D;u.Ga=c;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=1;u.xa=0;u.ya=0;u.Ca=1;u.Da=0;u.Ea=0;u.ba=-0;u.ca=-l;u.da=-g;u.fa=-0;u.ga=-p;u.ha=-r;u=this.Ob[1];c=a.rows[a.La++];l=c.Ba;l.wa=0;l.xa=0;l.ya=0;l.Ca=0;l.Da=0;l.Ea=0;l.ba=0;l.ca=0;l.da=0;l.fa=0;l.ga=0;l.ha=0;c.Ga=0;c.Na=0;c.Ja=0;c.Ia=0;c.motorSpeed=0;c.cb=0;c.va=u;u=c;u.Ga=f;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=0;u.xa=1;u.ya=0;u.Ca=0;u.Da=1;u.Ea=0;u.ba=-k;u.ca=-0;u.da=-m;u.fa=-v;u.ga=-0;u.ha=-t;u=this.Ob[2];f=a.rows[a.La++];k=f.Ba;k.wa=0;k.xa=0;k.ya=0;k.Ca=0;k.Da=0;k.Ea=0;k.ba=0;k.ca=0;k.da=0;k.fa=0;k.ga=0;k.ha=0;f.Ga=0;f.Na=0;f.Ja=0;f.Ia=0;f.motorSpeed=0;f.cb=0;f.va=u;u=f;u.Ga=h;u.Na=0;u.Ja=-1/0;u.Ia=1/0;u=u.Ba;u.wa=0;u.xa=0;u.ya=1;u.Ca=0;u.Da=0;u.Ea=1;u.ba=-n;u.ca=-q;u.da=-0;u.fa=-w;u.ga=-B;u.ha=-0;0<this.swingError&&(0>=this.Hk.frequency||!e)&&(u=this.Ob[3],h=a.rows[a.La++],n=h.Ba,n.wa=0,n.xa=0,n.ya=0,n.Ca=0,n.Da=0,n.Ea=0,n.ba=0,n.ca=0,n.da=0,n.fa=0,n.ga=0,n.ha=0,h.Ga=0,h.Na=0,h.Ja=0,h.Ia=0,h.motorSpeed=0,h.cb=0,h.va=u,u=h,h=this.swingError,w=this.Wk,q=this.Hk,n=F.angularSlop,e?(q=0,B=1):(0<q.frequency?(n=0,k=6.28318530717958*q.frequency,f=q.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),B=b.dt,f=2*f*k,k*=k,q.useSymplecticEuler?(q=1/(B*f),B=k/f):(q=1/(B*(B*k+f)),B=k/(B*k+f))):(q=0,B=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<w.motorTorque?(u.motorSpeed=w.motorSpeed,u.cb=w.motorTorque*b.dt):(u.motorSpeed=0,u.cb=0)),f=w.lowerLimit,w=w.upperLimit,k=.5*(f+w),h=((h-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,h+=k,f>w?h=m=k=0:f==w?(k=-1/0,m=1/0,h-=f):h<f?(k=-1/0,m=0,h=h-f+n,0<h&&(h=0)):h>w?(k=0,m=1/0,h=h-w-n,0>h&&(h=0)):h=m=k=0,u.Ja=k,u.Ia=m,u.Na=q*(A?1/A:0),u.Ga=h*B,u=u.Ba,u.ba=this.swingAxisX,u.ca=this.swingAxisY,u.da=this.swingAxisZ,u.fa=this.swingAxisX,u.ga=this.swingAxisY,u.ha=this.swingAxisZ);if(0>=this.Nk.frequency||!e)A=this.Ob[4],a=a.rows[a.La++],u=a.Ba,u.wa=0,u.xa=0,u.ya=0,u.Ca=0,u.Da=0,u.Ea=0,u.ba=0,u.ca=0,u.da=0,u.fa=0,u.ga=0,u.ha=0,a.Ga=0,a.Na=0,a.Ja=0,a.Ia=0,a.motorSpeed=0,a.cb=0,a.va=A,u=a,a=this.ej,h=this.Mk,n=this.Nk,A=F.angularSlop,e?(e=0,n=1):(0<n.frequency?(A=0,e=6.28318530717958*n.frequency,w=n.dampingRatio,w<F.minSpringDamperDampingRatio&&(w=F.minSpringDamperDampingRatio),q=b.dt,w=2*w*e,B=e*e,n.useSymplecticEuler?(e=1/(q*w),n=B/w):(e=1/(q*(q*B+w)),n=B/(q*B+w))):(e=0,n=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<h.motorTorque?(u.motorSpeed=h.motorSpeed,u.cb=h.motorTorque*b.dt):(u.motorSpeed=0,u.cb=0)),b=h.lowerLimit,h=h.upperLimit,q=.5*(b+h),a=((a-q+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,a+=q,b>h?b=w=q=0:b==h?(q=-1/0,w=1/0,b=a-b):a<b?(q=-1/0,w=0,b=a-b+A,0<b&&(b=0)):a>h?(q=0,w=1/0,b=a-h-A,0>b&&(b=0)):b=w=q=0,u.Ja=q,u.Ia=w,u.Na=e*(d?1/d:0),u.Ga=b*n,u=u.Ba,u.ba=this.twistAxisX,u.ca=this.twistAxisY,u.da=this.twistAxisZ,u.fa=this.twistAxisX,u.ga=this.twistAxisY,u.ha=this.twistAxisZ},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f;a=this.vb;b=this.wb;e=this.xb;d=this.Zb;c=this.$b;f=this.ac;var h,l,g,k,m,n,q,p,r;h=this.vb;l=this.xe;g=this.th;k=this.wb;m=this.ye;n=this.uh;q=this.xb;p=this.ze;r=this.vh;var v,t,w,B,u,D,C,A;D=a*d+b*c+e*f;-1.000001<D&&-.999999>D?(u=a*a,d=b*b,c=e*e,u<d?u<c?(d=1/Math.sqrt(d+c),u=0,e*=d,a=-b*d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0):d<c?(d=1/Math.sqrt(c+u),u=-e*d,e=0,a*=d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0),v=u,t=e,w=a,B=0):(u=Math.sqrt(.5*(1+D)),D=.5/u,v=(b*f-e*c)*D,t=(e*d-a*f)*D,w=(a*c-b*d)*D,B=u);D=v;f=t;u=w;a=B;c=2*D;e=2*f;b=2*u;C=D*c;A=f*e;d=u*b;u=D*e;f*=b;D*=b;var E=a*c,x=a*e;c=a*b;a=1-A-d;b=u-c;e=D+x;u+=c;d=1-C-d;c=f-E;D-=x;f+=E;C=1-C-A;this.Wi=2*(-1>=B?3.14159265358979:1<=B?0:Math.acos(B));B=v;A=w;w=a*this.ne+u*this.oe+D*this.pe;E=b*this.ne+d*this.oe+f*this.pe;v=e*this.ne+c*this.oe+C*this.pe;this.ej=Math.atan2(this.th*w+this.uh*E+this.vh*v,this.xe*w+this.ye*E+this.ze*v);this.twistAxisX=this.vb+this.Zb;this.twistAxisY=this.wb+this.$b;this.twistAxisZ=this.xb+this.ac;v=this.twistAxisX*this.twistAxisX+this.twistAxisY*this.twistAxisY+this.twistAxisZ*this.twistAxisZ;0<v&&(v=1/Math.sqrt(v));this.twistAxisX*=v;this.twistAxisY*=v;this.twistAxisZ*=v;w=Math.sqrt(B*B+t*t+A*A);0<w&&(w=1/w);B*=w*this.Wi;t*=w*this.Wi;A*=w*this.Wi;v=l*B+m*t+p*A;t=g*B+n*t+r*A;w=this.Jj;B=this.Kj;w=1/(w*w);A=1/(B*B);(B=v*v*w+t*t*A)?(E=Math.sqrt(1/B),B=v*E,E*=t,x=B*w,A*=E,w=1/Math.sqrt(x*x+A*A),x*=w,A*=w,v=(v-B)*x+(t-E)*A,0<v?(this.swingError=v,this.swingAxisX=0,this.swingAxisY=x,this.swingAxisZ=A,h=h*this.swingAxisX+l*this.swingAxisY+g*this.swingAxisZ,k=k*this.swingAxisX+m*this.swingAxisY+n*this.swingAxisZ,q=q*this.swingAxisX+p*this.swingAxisY+r*this.swingAxisZ,this.swingAxisX=h,this.swingAxisY=k,this.swingAxisZ=q,q=a*this.swingAxisX+b*this.swingAxisY+e*this.swingAxisZ,p=u*this.swingAxisX+d*this.swingAxisY+c*this.swingAxisZ,r=D*this.swingAxisX+f*this.swingAxisY+C*this.swingAxisZ,this.swingAxisX=q,this.swingAxisY=p,this.swingAxisZ=r,this.swingConstraintAxisX=this.swingAxisX,this.swingConstraintAxisY=this.swingAxisY,this.swingConstraintAxisZ=this.swingAxisZ):this.swingError=0):this.swingError=this.swingAxisZ=this.swingAxisY=this.swingAxisX=0;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},zn:function(){return this.Nk},yn:function(){return this.Mk},tn:function(){return this.Hk},rn:function(){var a=new t;a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ;return a},sn:function(a){a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ},qn:function(){return this.Wi},xn:function(){return this.ej},ra:Mb});Wd.aa=!0;Wd.Kb=Fc;Wd.prototype=sb(Fc.prototype,{Aa:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;var g;e=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;h=this.localTwistAxis1;h.x=e;h.y=g;h.z=f;g=d.x;f=d.y;h=d.z;d=b.a.o*g+b.a.i*f+b.a.l*h;e=b.a.f*g+b.a.m*f+b.a.g*h;b=b.a.h*g+b.a.j*f+b.a.s*h;g=this.localTwistAxis2;g.x=d;g.y=e;g.z=b;d=c.x;e=c.y;g=c.z;c=a.a.o*d+a.a.i*e+a.a.l*g;b=a.a.f*d+a.a.m*e+a.a.g*g;a=a.a.h*d+a.a.j*e+a.a.s*g;d=this.localSwingAxis1;d.x=c;d.y=b;d.z=a;return this},ra:Wd});Ob.aa=!0;Ob.Kb=L;Ob.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,w,B,u;g=-this.Sb;k=this.Rb;m=this.Sb;n=-this.Qb;q=-this.Rb;p=this.Qb;r=-this.Vb;v=this.Ub;t=this.Vb;w=-this.Tb;B=-this.Ub;u=this.Tb;var D=this.ea.Yc,C=this.ea.Zc,A=this.ea.$c,E=(this.C.P*D+this.C.R*C+this.C.S*A)*D+(this.C.T*D+this.C.U*C+this.C.V*A)*C+(this.C.W*D+this.C.X*C+this.C.Y*A)*A,x=(this.D.P*D+this.D.R*C+this.D.S*A)*D+(this.D.T*D+this.D.U*C+this.D.V*A)*C+(this.D.W*D+this.D.X*C+this.D.Y*A)*A;if(0<E){var L=D*this.Qb+C*this.Rb+A*this.Sb,L=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-L*L;0<L&&(E=0<this.C.$a?1/(1/E+this.C.Lc*L):0)}0<x&&(D=D*this.Tb+C*this.Ub+A*this.Vb,D=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-D*D,0<D&&(x=0<this.D.$a?1/(1/x+this.D.Lc*D):0));E=E+x?1/(E+x):0;x=this.Ob[0];D=a.rows[a.La++];C=D.Ba;C.wa=0;C.xa=0;C.ya=0;C.Ca=0;C.Da=0;C.Ea=0;C.ba=0;C.ca=0;C.da=0;C.fa=0;C.ga=0;C.ha=0;D.Ga=0;D.Na=0;D.Ja=0;D.Ia=0;D.motorSpeed=0;D.cb=0;D.va=x;x=D;x.Ga=c;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.wa=1;x.xa=0;x.ya=0;x.Ca=1;x.Da=0;x.Ea=0;x.ba=-0;x.ca=-g;x.da=-k;x.fa=-0;x.ga=-r;x.ha=-v;x=this.Ob[1];c=a.rows[a.La++];g=c.Ba;g.wa=0;g.xa=0;g.ya=0;g.Ca=0;g.Da=0;g.Ea=0;g.ba=0;g.ca=0;g.da=0;g.fa=0;g.ga=0;g.ha=0;c.Ga=0;c.Na=0;c.Ja=0;c.Ia=0;c.motorSpeed=0;c.cb=0;c.va=x;x=c;x.Ga=f;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.wa=0;x.xa=1;x.ya=0;x.Ca=0;x.Da=1;x.Ea=0;x.ba=-m;x.ca=-0;x.da=-n;x.fa=-t;x.ga=-0;x.ha=-w;f=this.Ob[2];x=a.rows[a.La++];m=x.Ba;m.wa=0;m.xa=0;m.ya=0;m.Ca=0;m.Da=0;m.Ea=0;m.ba=0;m.ca=0;m.da=0;m.fa=0;m.ga=0;m.ha=0;x.Ga=0;x.Na=0;x.Ja=0;x.Ia=0;x.motorSpeed=0;x.cb=0;x.va=f;x.Ga=h;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.wa=0;x.xa=0;x.ya=1;x.Ca=0;x.Da=0;x.Ea=1;x.ba=-q;x.ca=-p;x.da=-0;x.fa=-B;x.ga=-u;x.ha=-0;if(0>=this.ue.frequency||!e)h=this.Ob[3],q=a.rows[a.La++],p=q.Ba,p.wa=0,p.xa=0,p.ya=0,p.Ca=0,p.Da=0,p.Ea=0,p.ba=0,p.ca=0,p.da=0,p.fa=0,p.ga=0,p.ha=0,q.Ga=0,q.Na=0,q.Ja=0,q.Ia=0,q.motorSpeed=0,q.cb=0,q.va=h,x=q,h=this.angle,p=this.Ch,B=this.ue,q=F.angularSlop,e?(e=0,B=1):(0<B.frequency?(q=0,e=6.28318530717958*B.frequency,f=B.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),u=b.dt,f=2*f*e,m=e*e,B.useSymplecticEuler?(e=1/(u*f),B=m/f):(e=1/(u*(u*m+f)),B=m/(u*m+f))):(e=0,B=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<p.motorTorque?(x.motorSpeed=p.motorSpeed,x.cb=p.motorTorque*b.dt):(x.motorSpeed=0,x.cb=0)),b=p.lowerLimit,p=p.upperLimit,u=.5*(b+p),h=((h-u+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+u,b>p?b=f=u=0:b==p?(u=-1/0,f=1/0,b=h-b):h<b?(u=-1/0,f=0,b=h-b+q,0<b&&(b=0)):h>p?(u=0,f=1/0,b=h-p-q,0>b&&(b=0)):b=f=u=0,x.Ja=u,x.Ia=f,x.Na=e*(E?1/E:0),x.Ga=b*B,x=x.Ba,x.ba=this.ea.Yc,x.ca=this.ea.Zc,x.da=this.ea.$c,x.fa=this.ea.Yc,x.ga=this.ea.Zc,x.ha=this.ea.$c;b=this.Ob[4];E=a.rows[a.La++];e=E.Ba;e.wa=0;e.xa=0;e.ya=0;e.Ca=0;e.Da=0;e.Ea=0;e.ba=0;e.ca=0;e.da=0;e.fa=0;e.ga=0;e.ha=0;E.Ga=0;E.Na=0;E.Ja=0;E.Ia=0;E.motorSpeed=0;E.cb=0;E.va=b;x=E;x.Ga=l;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.ba=this.ea.Md;x.ca=this.ea.Nd;x.da=this.ea.Od;x.fa=this.ea.Md;x.ga=this.ea.Nd;x.ha=this.ea.Od;l=this.Ob[5];a=a.rows[a.La++];b=a.Ba;b.wa=0;b.xa=0;b.ya=0;b.Ca=0;b.Da=0;b.Ea=0;b.ba=0;b.ca=0;b.da=0;b.fa=0;b.ga=0;b.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=l;x=a;x.Ga=d;x.Na=0;x.Ja=-1/0;x.Ia=1/0;x=x.Ba;x.ba=this.ea.je;x.ca=this.ea.ke;x.da=this.ea.le;x.fa=this.ea.je;x.ga=this.ea.ke;x.ha=this.ea.le},ed:function(){L.prototype.ed.call(this);var a=this.ea,b=a.$.C.$a,e=a.$.D.$a,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u,D,C,A,E,x,F,N,I,M,O,ha,ga,qa,pa=a.$.vb*a.$.Zb+a.$.wb*a.$.$b+a.$.xb*a.$.ac;if(-1.000001<pa&&-.999999>pa){var ya,ka,Va,U=a.$.vb,R=a.$.wb,Ha=a.$.xb,Ma=U*U,Qa=R*R,Aa=Ha*Ha,Oa;Ma<Qa?Ma<Aa?(Oa=1/Math.sqrt(Qa+Aa),ya=0,ka=Ha*Oa,Va=-R*Oa):(Oa=1/Math.sqrt(Ma+Qa),ya=R*Oa,ka=-U*Oa,Va=0):Qa<Aa?(Oa=1/Math.sqrt(Aa+Ma),ya=-Ha*Oa,ka=0,Va=U*Oa):(Oa=1/Math.sqrt(Ma+Qa),ya=R*Oa,ka=-U*Oa,Va=0);d=ya;c=ka;f=Va;h=0}else{var Ba,Bb,H;Ba=a.$.wb*a.$.ac-a.$.xb*a.$.$b;Bb=a.$.xb*a.$.Zb-a.$.vb*a.$.ac;H=a.$.vb*a.$.$b-a.$.wb*a.$.Zb;var Pa=Math.sqrt(.5*(1+pa)),pa=.5/Pa;Ba*=pa;Bb*=pa;H*=pa;d=Ba;c=Bb;f=H;h=Pa}var ba,Q,P,wa,ta,W,oa,y;P=Q=ba=0;wa=1;ta=d;W=c;oa=f;y=h;var Ga=ba*ta+Q*W+P*oa+wa*y;0>Ga&&(Ga=-Ga,ta=-ta,W=-W,oa=-oa,y=-y);if(.999999<Ga){var ca,Ca,xa,Da;ca=ta-ba;Ca=W-Q;xa=oa-P;Da=y-wa;ta=ba+b/(b+e)*ca;W=Q+b/(b+e)*Ca;oa=P+b/(b+e)*xa;y=wa+b/(b+e)*Da;var Ra=ta*ta+W*W+oa*oa+y*y;1E-32<Ra&&(Ra=1/Math.sqrt(Ra));l=ta*Ra;g=W*Ra;k=oa*Ra;m=y*Ra}else{var la=b/(b+e)*Math.acos(Ga);ta+=ba*-Ga;W+=Q*-Ga;oa+=P*-Ga;y+=wa*-Ga;var Z=ta*ta+W*W+oa*oa+y*y;1E-32<Z&&(Z=1/Math.sqrt(Z));ta*=Z;W*=Z;oa*=Z;y*=Z;var Ea=Math.sin(la),ra=Math.cos(la);ba*=ra;Q*=ra;P*=ra;wa*=ra;l=ba+ta*Ea;g=Q+W*Ea;k=P+oa*Ea;m=wa+y*Ea}var va=l,J=g,Ka=k,Xa=m,S=2*va,Ya=2*J,T=2*Ka,K=va*S,ia=J*Ya,gb=Ka*T,da=va*Ya,Ua=J*T,sa=va*T,fb=Xa*S,jb=Xa*Ya,Za=Xa*T;n=1-ia-gb;q=da-Za;p=sa+jb;r=da+Za;v=1-K-gb;t=Ua-fb;w=sa-jb;B=Ua+fb;u=1-K-ia;var ma,na;ma=n*a.$.vb+q*a.$.wb+p*a.$.xb;na=r*a.$.vb+v*a.$.wb+t*a.$.xb;D=w*a.$.vb+B*a.$.wb+u*a.$.xb;I=a.Yc;M=a.Zc;O=a.$c;ha=a.Md;ga=a.Nd;qa=a.Od;var Ia=I*ma+M*na+O*D;if(-1.000001<Ia&&-.999999>Ia){var Fa,nb,fa,ea=I*I,ja=M*M,cb=O*O,za;ea<ja?ea<cb?(za=1/Math.sqrt(ja+cb),Fa=0,nb=O*za,fa=-M*za):(za=1/Math.sqrt(ea+ja),Fa=M*za,nb=-I*za,fa=0):ja<cb?(za=1/Math.sqrt(cb+ea),Fa=-O*za,nb=0,fa=I*za):(za=1/Math.sqrt(ea+ja),Fa=M*za,nb=-I*za,fa=0);l=Fa;g=nb;k=fa;m=0}else{var tb,Ta,qb;tb=M*D-O*na;Ta=O*ma-I*D;qb=I*na-M*ma;var rb=Math.sqrt(.5*(1+Ia)),Ia=.5/rb;tb*=Ia;Ta*=Ia;qb*=Ia;l=tb;g=Ta;k=qb;m=rb}var vb=l,Wa=g,yb=k,bb=m,$a=2*vb,ua=2*Wa,Jb=2*yb,G=vb*$a,ob=Wa*ua,db=yb*Jb,pb=vb*ua,ab=Wa*Jb,hb=vb*Jb,z=bb*$a,Db=bb*ua,wb=bb*Jb;n=1-ob-db;q=pb-wb;p=hb+Db;r=pb+wb;v=1-G-db;t=ab-z;w=hb-Db;B=ab+z;u=1-G-ob;var sb,Eb,Na;sb=n*ha+q*ga+p*qa;Eb=r*ha+v*ga+t*qa;Na=w*ha+B*ga+u*qa;C=sb;A=Eb;E=Na;x=na*E-D*A;F=D*C-ma*E;N=ma*A-na*C;if(1E-6<x*x+F*F+N*N){var mb=x*x+F*F+N*N;0<mb&&(mb=1/Math.sqrt(mb));x*=mb;F*=mb;N*=mb}else{var xb=ma*ma,zb=na*na,eb=D*D,Y;xb<zb?xb<eb?(Y=1/Math.sqrt(zb+eb),x=0,F=D*Y,N=-na*Y):(Y=1/Math.sqrt(xb+zb),x=na*Y,F=-ma*Y,N=0):zb<eb?(Y=1/Math.sqrt(eb+xb),x=-D*Y,F=0,N=ma*Y):(Y=1/Math.sqrt(xb+zb),x=na*Y,F=-ma*Y,N=0)}C=F*D-N*na;A=N*ma-x*D;E=x*na-F*ma;a.Yc=ma;a.Zc=na;a.$c=D;a.Md=C;a.Nd=A;a.Od=E;a.je=x;a.ke=F;a.le=N;var La,kb,Sa;La=this.wb*this.ac-this.xb*this.$b;kb=this.xb*this.Zb-this.vb*this.ac;Sa=this.vb*this.$b-this.wb*this.Zb;var ib=this.vb*this.Zb+this.wb*this.$b+this.xb*this.ac,Ja=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib),Hb=La*La+kb*kb+Sa*Sa;0<Hb&&(Hb=1/Math.sqrt(Hb));La*=Hb;kb*=Hb;Sa*=Hb;La*=Ja;kb*=Ja;Sa*=Ja;this.angularErrorY=La*this.ea.Md+kb*this.ea.Nd+Sa*this.ea.Od;this.angularErrorZ=La*this.ea.je+kb*this.ea.ke+Sa*this.ea.le;var ub,X,Cb;ub=this.ye*this.pe-this.ze*this.oe;X=this.ze*this.ne-this.xe*this.pe;Cb=this.xe*this.oe-this.ye*this.ne;ib=this.xe*this.ne+this.ye*this.oe+this.ze*this.pe;this.angle=-1>=ib?3.14159265358979:1<=ib?0:Math.acos(ib);0>ub*this.ea.Yc+X*this.ea.Zc+Cb*this.ea.$c&&(this.angle=-this.angle);this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Zb;a.y=this.$b;a.z=this.ac;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Zb;a.y=this.$b;a.z=this.ac},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.lb;a.y=this.mb;a.z=this.nb;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.lb;a.y=this.mb;a.z=this.nb},nj:function(){return this.ue},Zk:function(){return this.Ch},Xk:function(){return this.angle},ra:Ob});Ce.aa=!0;Ce.Kb=Fc;Ce.prototype=sb(Fc.prototype,{Aa:function(a,b,e,d){this.Vg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this},ra:Ce});Jc.aa=!0;Jc.prototype={Qa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},bb:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new Jc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a},ra:Jc};se.aa=!0;se.Kb=L;se.prototype=sb(L.prototype,{Rd:function(a,b,e){if(!(0<this.ue.frequency&&e)){var d,c,f;d=this.Gf-this.Df;c=this.Hf-this.Ef;f=this.If-this.Ff;var h;if(0<this.ue.frequency){h=6.28318530717958*this.ue.frequency;e=this.ue.dampingRatio;e<F.minSpringDamperDampingRatio&&(e=F.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.ue.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.$a+this.D.$a}else h=0,b=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;var g,k,m,n,q,p,r,v,t,w;g=-this.Sb;k=this.Rb;m=this.Sb;n=-this.Qb;e=-this.Rb;l=this.Qb;q=-this.Vb;p=this.Ub;r=this.Vb;v=-this.Tb;t=-this.Ub;w=this.Tb;var B=this.Ob[0],u=a.rows[a.La++],D=u.Ba;D.wa=0;D.xa=0;D.ya=0;D.Ca=0;D.Da=0;D.Ea=0;D.ba=0;D.ca=0;D.da=0;D.fa=0;D.ga=0;D.ha=0;u.Ga=0;u.Na=0;u.Ja=0;u.Ia=0;u.motorSpeed=0;u.cb=0;u.va=B;B=u;B.Ga=d*b;B.Na=h;B.Ja=-1/0;B.Ia=1/0;d=B.Ba;d.wa=1;d.xa=0;d.ya=0;d.Ca=1;d.Da=0;d.Ea=0;d.ba=-0;d.ca=-g;d.da=-k;d.fa=-0;d.ga=-q;d.ha=-p;d=this.Ob[1];g=a.rows[a.La++];k=g.Ba;k.wa=0;k.xa=0;k.ya=0;k.Ca=0;k.Da=0;k.Ea=0;k.ba=0;k.ca=0;k.da=0;k.fa=0;k.ga=0;k.ha=0;g.Ga=0;g.Na=0;g.Ja=0;g.Ia=0;g.motorSpeed=0;g.cb=0;g.va=d;B=g;B.Ga=c*b;B.Na=h;B.Ja=-1/0;B.Ia=1/0;d=B.Ba;d.wa=0;d.xa=1;d.ya=0;d.Ca=0;d.Da=1;d.Ea=0;d.ba=-m;d.ca=-0;d.da=-n;d.fa=-r;d.ga=-0;d.ha=-v;c=this.Ob[2];a=a.rows[a.La++];d=a.Ba;d.wa=0;d.xa=0;d.ya=0;d.Ca=0;d.Da=0;d.Ea=0;d.ba=0;d.ca=0;d.da=0;d.fa=0;d.ga=0;d.ha=0;a.Ga=0;a.Na=0;a.Ja=0;a.Ia=0;a.motorSpeed=0;a.cb=0;a.va=c;B=a;B.Ga=f*b;B.Na=h;B.Ja=-1/0;B.Ia=1/0;d=B.Ba;d.wa=0;d.xa=0;d.ya=1;d.Ca=0;d.Da=0;d.Ea=1;d.ba=-e;d.ca=-l;d.da=-0;d.fa=-t;d.ga=-w;d.ha=-0}},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},nj:function(){return this.ue},ra:se});re.aa=!0;re.Kb=Fc;re.prototype=sb(Fc.prototype,{Aa:function(a,b,e){this.Vg(a,b,e);return this},ra:re});Lb.aa=!0;Lb.prototype={Qa:function(a,b){this.frequency=a;this.dampingRatio=b;return this},bb:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new Lb;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a},ra:Lb};Hc.aa=!0;Hc.prototype={Qa:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},bb:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new Hc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a},ra:Hc};pb.aa=!0;pb.Kb=L;pb.prototype=sb(L.prototype,{Rd:function(a,b,e){var d=e?1:this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.zl*d,g,k,m,n,q,p,r,v,t,w,B,u,D,C,A,E,x,L;g=0;k=-this.Sb;m=this.Rb;n=this.Sb;q=0;p=-this.Qb;r=-this.Rb;v=this.Qb;w=t=0;B=-this.Vb;u=this.Ub;D=this.Vb;C=0;A=-this.Tb;E=-this.Ub;x=this.Tb;L=0;g=-g;k=-k;m=-m;n=-n;q=-q;p=-p;r=-r;v=-v;t=-t;w=-w;B=-B;u=-u;D=-D;C=-C;A=-A;E=-E;x=-x;L=-L;var N=this.Wf,I=this.Xf,M=this.Yf,O=(this.C.P*N+this.C.R*I+this.C.S*M)*N+(this.C.T*N+this.C.U*I+this.C.V*M)*I+(this.C.W*N+this.C.X*I+this.C.Y*M)*M,ha=(this.D.P*N+this.D.R*I+this.D.S*M)*N+(this.D.T*N+this.D.U*I+this.D.V*M)*I+(this.D.W*N+this.D.X*I+this.D.Y*M)*M;if(0<O){var ga=N*this.Qb+I*this.Rb+M*this.Sb,qa=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-ga*ga;0<qa&&(O=0<this.C.$a?1/(1/O+this.C.Lc*qa):0)}if(0<ha){var pa=N*this.Tb+I*this.Ub+M*this.Vb,ya=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-pa*pa;0<ya&&(ha=0<this.D.$a?1/(1/ha+this.D.Lc*ya):0)}var ka=O+ha?1/(O+ha):0,Va=this.Zf,U=this.$f,R=this.ag,Ha=(this.C.P*Va+this.C.R*U+this.C.S*R)*Va+(this.C.T*Va+this.C.U*U+this.C.V*R)*U+(this.C.W*Va+this.C.X*U+this.C.Y*R)*R,Ma=(this.D.P*Va+this.D.R*U+this.D.S*R)*Va+(this.D.T*Va+this.D.U*U+this.D.V*R)*U+(this.D.W*Va+this.D.X*U+this.D.Y*R)*R;if(0<Ha){var Qa=Va*this.Qb+U*this.Rb+R*this.Sb,Aa=this.Qb*this.Qb+this.Rb*this.Rb+this.Sb*this.Sb-Qa*Qa;0<Aa&&(Ha=0<this.C.$a?1/(1/Ha+this.C.Lc*Aa):0)}if(0<Ma){var Oa=Va*this.Tb+U*this.Ub+R*this.Vb,Ba=this.Tb*this.Tb+this.Ub*this.Ub+this.Vb*this.Vb-Oa*Oa;0<Ba&&(Ma=0<this.D.$a?1/(1/Ma+this.D.Lc*Ba):0)}var Bb=Ha+Ma?1/(Ha+Ma):0,H=this.Ob[0],Pa=a.rows[a.La++],ba=Pa.Ba;ba.wa=0;ba.xa=0;ba.ya=0;ba.Ca=0;ba.Da=0;ba.Ea=0;ba.ba=0;ba.ca=0;ba.da=0;ba.fa=0;ba.ga=0;ba.ha=0;Pa.Ga=0;Pa.Na=0;Pa.Ja=0;Pa.Ia=0;Pa.motorSpeed=0;Pa.cb=0;Pa.va=H;var Q=Pa;Q.Ga=c;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;var P=Q.Ba;P.wa=1;P.xa=0;P.ya=0;P.Ca=1;P.Da=0;P.Ea=0;P.ba=g;P.ca=k;P.da=m;P.fa=w;P.ga=B;P.ha=u;var wa=this.Ob[1],ta=a.rows[a.La++],W=ta.Ba;W.wa=0;W.xa=0;W.ya=0;W.Ca=0;W.Da=0;W.Ea=0;W.ba=0;W.ca=0;W.da=0;W.fa=0;W.ga=0;W.ha=0;ta.Ga=0;ta.Na=0;ta.Ja=0;ta.Ia=0;ta.motorSpeed=0;ta.cb=0;ta.va=wa;Q=ta;Q.Ga=f;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;P=Q.Ba;P.wa=0;P.xa=1;P.ya=0;P.Ca=0;P.Da=1;P.Ea=0;P.ba=n;P.ca=q;P.da=p;P.fa=D;P.ga=C;P.ha=A;var oa=this.Ob[2],y=a.rows[a.La++],Ga=y.Ba;Ga.wa=0;Ga.xa=0;Ga.ya=0;Ga.Ca=0;Ga.Da=0;Ga.Ea=0;Ga.ba=0;Ga.ca=0;Ga.da=0;Ga.fa=0;Ga.ga=0;Ga.ha=0;y.Ga=0;y.Na=0;y.Ja=0;y.Ia=0;y.motorSpeed=0;y.cb=0;y.va=oa;Q=y;Q.Ga=h;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;P=Q.Ba;P.wa=0;P.xa=0;P.ya=1;P.Ca=0;P.Da=0;P.Ea=1;P.ba=r;P.ca=v;P.da=t;P.fa=E;P.ga=x;P.ha=L;if(!this.Cm&&(0>=this.Fk.frequency||!e)){var ca=this.Ob[3],Ca=a.rows[a.La++],xa=Ca.Ba;xa.wa=0;xa.xa=0;xa.ya=0;xa.Ca=0;xa.Da=0;xa.Ea=0;xa.ba=0;xa.ca=0;xa.da=0;xa.fa=0;xa.ga=0;xa.ha=0;Ca.Ga=0;Ca.Na=0;Ca.Ja=0;Ca.Ia=0;Ca.motorSpeed=0;Ca.cb=0;Ca.va=ca;var Q=Ca,Da=this.yi,Ra=this.xk,la=this.Fk,Z,Ea,ra=F.angularSlop;if(e)Z=0,Ea=1;else{if(0<la.frequency){var ra=0,va=6.28318530717958*la.frequency,J=la.dampingRatio;J<F.minSpringDamperDampingRatio&&(J=F.minSpringDamperDampingRatio);var Ka=b.dt,Xa=2*J*va,S=va*va;la.useSymplecticEuler?(Z=1/(Ka*Xa),Ea=S/Xa):(Z=1/(Ka*(Ka*S+Xa)),Ea=S/(Ka*S+Xa))}else Z=0,Ea=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Ra.motorTorque?(Q.motorSpeed=Ra.motorSpeed,Q.cb=Ra.motorTorque*b.dt):(Q.motorSpeed=0,Q.cb=0)}var Ya=Ra.lowerLimit,T=Ra.upperLimit,K=.5*(Ya+T),Da=Da-K,Da=((Da+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Da=Da+K,ia,gb,da;Ya>T?da=gb=ia=0:Ya==T?(ia=-1/0,gb=1/0,da=Da-Ya):Da<Ya?(ia=-1/0,gb=0,da=Da-Ya+ra,0<da&&(da=0)):Da>T?(ia=0,gb=1/0,da=Da-T-ra,0>da&&(da=0)):da=gb=ia=0;var bb=ka?1/ka:0;Q.Ja=ia;Q.Ia=gb;Q.Na=Z*bb;Q.Ga=da*Ea;P=Q.Ba;P.ba=this.Wf;P.ca=this.Xf;P.da=this.Yf;P.fa=this.Wf;P.ga=this.Xf;P.ha=this.Yf}if(!this.Dm){var sa=this.Ob[4],fb=a.rows[a.La++],jb=fb.Ba;jb.wa=0;jb.xa=0;jb.ya=0;jb.Ca=0;jb.Da=0;jb.Ea=0;jb.ba=0;jb.ca=0;jb.da=0;jb.fa=0;jb.ga=0;jb.ha=0;fb.Ga=0;fb.Na=0;fb.Ja=0;fb.Ia=0;fb.motorSpeed=0;fb.cb=0;fb.va=sa;Q=fb;Q.Ga=l;Q.Na=0;Q.Ja=-1/0;Q.Ia=1/0;P=Q.Ba;P.ba=this.Og;P.ca=this.Pg;P.da=this.Qg;P.fa=this.Og;P.ga=this.Pg;P.ha=this.Qg}if(!this.Em&&(0>=this.Gk.frequency||!e)){var Za=this.Ob[5],ma=a.rows[a.La++],na=ma.Ba;na.wa=0;na.xa=0;na.ya=0;na.Ca=0;na.Da=0;na.Ea=0;na.ba=0;na.ca=0;na.da=0;na.fa=0;na.ga=0;na.ha=0;ma.Ga=0;ma.Na=0;ma.Ja=0;ma.Ia=0;ma.motorSpeed=0;ma.cb=0;ma.va=Za;var Q=ma,Ia=this.zi,Fa=this.yk,nb=this.Gk,fa,ea,ja=F.angularSlop;if(e)fa=0,ea=1;else{if(0<nb.frequency){var ja=0,cb=6.28318530717958*nb.frequency,za=nb.dampingRatio;za<F.minSpringDamperDampingRatio&&(za=F.minSpringDamperDampingRatio);var tb=b.dt,Ta=2*za*cb,qb=cb*cb;nb.useSymplecticEuler?(fa=1/(tb*Ta),ea=qb/Ta):(fa=1/(tb*(tb*qb+Ta)),ea=qb/(tb*qb+Ta))}else fa=0,ea=this.Ec==ec.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Fa.motorTorque?(Q.motorSpeed=Fa.motorSpeed,Q.cb=Fa.motorTorque*b.dt):(Q.motorSpeed=0,Q.cb=0)}var rb=Fa.lowerLimit,vb=Fa.upperLimit,Wa=.5*(rb+vb),Ia=Ia-Wa,Ia=((Ia+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Ia=Ia+Wa,yb,Ua,$a;rb>vb?$a=Ua=yb=0:rb==vb?(yb=-1/0,Ua=1/0,$a=Ia-rb):Ia<rb?(yb=-1/0,Ua=0,$a=Ia-rb+ja,0<$a&&($a=0)):Ia>vb?(yb=0,Ua=1/0,$a=Ia-vb-ja,0>$a&&($a=0)):$a=Ua=yb=0;var ua=Bb?1/Bb:0;Q.Ja=yb;Q.Ia=Ua;Q.Na=fa*ua;Q.Ga=$a*ea;P=Q.Ba;P.ba=this.Zf;P.ca=this.$f;P.da=this.ag;P.fa=this.Zf;P.ga=this.$f;P.ha=this.ag}},ed:function(){L.prototype.ed.call(this);var a,b,e,d,c,f,h,l,g;a=this.vb;b=this.wb;e=this.xb;h=this.Rg;l=this.Sg;g=this.Tg;d=l*e-g*b;c=g*a-h*e;f=h*b-l*a;this.Wf=c*g-f*l;this.Xf=f*h-d*g;this.Yf=d*l-c*h;this.Og=d;this.Pg=c;this.Qg=f;this.Zf=b*f-e*c;this.$f=e*d-a*f;this.ag=a*c-b*d;a=this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf;0<a&&(a=1/Math.sqrt(a));this.Wf*=a;this.Xf*=a;this.Yf*=a;a=this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg;0<a&&(a=1/Math.sqrt(a));this.Og*=a;this.Pg*=a;this.Qg*=a;a=this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag;0<a&&(a=1/Math.sqrt(a));this.Zf*=a;this.$f*=a;this.ag*=a;this.Cm=!(this.Wf*this.Wf+this.Xf*this.Xf+this.Yf*this.Yf);this.Dm=!(this.Og*this.Og+this.Pg*this.Pg+this.Qg*this.Qg);this.Em=!(this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag);var k,m,n,q,p,r,v,t,w;k=this.vb;a=this.xe;b=this.th;m=this.wb;e=this.ye;d=this.uh;n=this.xb;c=this.ze;f=this.vh;q=this.Zb;p=this.ne;h=this.Rg;r=this.$b;v=this.oe;l=this.Sg;t=this.ac;w=this.pe;g=this.Tg;var B,u,D;B=k*h+m*l+n*g;u=a*p+e*v+c*w;D=b*p+d*v+f*w;-1>=B?(e=Math.atan2(D,u),a=.5*e,b=-1.570796326794895,e=.5*-e):1<=B?(e=Math.atan2(D,u),a=.5*e,b=1.570796326794895,e*=.5):(B=Math.asin(B),k=Math.atan2(-(k*p+m*v+n*w),k*q+m*r+n*t),a=Math.atan2(-(a*h+e*l+c*g),b*h+d*l+f*g),b=B,e=k);this.yi=a;this.zl=b;this.zi=e;this.linearErrorX=this.Gf-this.Df;this.linearErrorY=this.Hf-this.Ef;this.linearErrorZ=this.If-this.Ff},Vd:function(a,b){L.prototype.Vd.call(this,a,b);this.Rd(b,a,!1)},dd:function(a){L.prototype.dd.call(this,a);this.Rd(a,null,!0)},vg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},xg:function(){var a=new t;a.x=this.Rg;a.y=this.Sg;a.z=this.Tg;return a},wg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},yg:function(a){a.x=this.Rg;a.y=this.Sg;a.z=this.Tg},zg:function(){var a=new t;a.x=this.sa;a.y=this.ta;a.z=this.ua;return a},Bg:function(){var a=new t;a.x=this.Ic;a.y=this.Jc;a.z=this.Kc;return a},Ag:function(a){a.x=this.sa;a.y=this.ta;a.z=this.ua},Cg:function(a){a.x=this.Ic;a.y=this.Jc;a.z=this.Kc},on:function(){return this.Fk},pn:function(){return this.Gk},kn:function(){return this.xk},ln:function(){return this.yk},en:function(){return this.yi},fn:function(){return this.zi},ra:pb});qe.aa=!0;qe.Kb=Fc;qe.prototype=sb(Fc.prototype,{Aa:function(a,b,e,d,c){this.Vg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;d=a.a.o*f+a.a.i*h+a.a.l*l;e=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;f=this.localAxis1;f.x=d;f.y=e;f.z=a;d=c.x;e=c.y;f=c.z;c=b.a.o*d+b.a.i*e+b.a.l*f;a=b.a.f*d+b.a.m*e+b.a.g*f;b=b.a.h*d+b.a.j*e+b.a.s*f;d=this.localAxis2;d.x=c;d.y=a;d.z=b;return this},ra:qe});pe.aa=!0;of.aa=!0;of.prototype={ra:of};Pe.aa=!0;Pe.prototype={ra:Pe};Zj.aa=!0;Zj.prototype={Aa:function(a){this.Nc=a.Nc;for(var b=0,e=this.Nc;b<e;){var d=b++;this.gh[d]=a.gh[d];this.kh[d]=a.kh[d]}this.ie=a.ie;b=0;for(e=this.ie;b<e;)d=b++,this.Dg[d]=a.Dg[d]},Tk:function(a,b,e,d,c,f,h){for(var l=0,g=this.ie;l<g;){var k=l++,k=this.Dg[k],m=a.rows[k];this.Rk[k]=m.Ga*f-e[k]-m.Na*d[k]}l=b.Oi;g=0;for(k=this.Nc;g<k;){var n=g++,m=this.gh[n],n=this.kh[n],q=a.rows[m],n=(0>n?q.Ja:0<n?q.Ia:0)-d[m];if(c[m]=n)for(var q=0,p=this.ie;q<p;){var r=q++,v=r=this.Dg[r],t=this.Rk;t[v]-=l[m][r]*n}}g=this.Dg;k=this.ie;for(n=m=0;n<k;)q=n++,m|=1<<g[q];b.zj[m]||(b.$m(m,g,k),b.zj[m]=!0);g=b.ik[m];b=!0;k=0;for(m=this.ie;k<m;){for(var n=k++,q=this.Dg[n],p=a.rows[q],v=r=d[q],t=0,w=this.ie;t<w;)var B=t++,v=v+this.Rk[this.Dg[B]]*g[n][B];if(v<p.Ja-F.directMlcpSolverEps||v>p.Ia+F.directMlcpSolverEps){b=!1;break}c[q]=v-r}if(h)return!0;if(!b)return!1;h=0;for(g=this.Nc;h<g;){n=h++;k=this.gh[n];m=a.rows[k];n=this.kh[n];q=d[k]+c[k];p=e[k];r=0;for(v=a.La;r<v;)t=r++,p+=l[k][t]*c[t];k=m.Ga*f-p-m.Na*q;if(0>n&&k>F.directMlcpSolverEps||0<n&&k<-F.directMlcpSolverEps){b=!1;break}}return b},ra:Zj};sg.aa=!0;sg.prototype={ra:sg};Bk.aa=!0;Bk.prototype={Fh:function(a,b){if(b==a.La)null==this.Eh[this.Ze]&&(this.Eh[this.Ze]=new Zj(this.Dn)),this.Eh[this.Ze++].Aa(this.Te);else{var e=a.rows[b],d=e.Ja>-1/0,c=e.Ia<1/0;0==e.Ja&&0==e.Ia?(c=this.Te,c.gh[c.Nc]=b,c.kh[c.Nc]=0,c.Nc++,this.Fh(a,b+1),this.Te.Nc--):(e=this.Te,e.Dg[e.ie]=b,e.ie++,this.Fh(a,b+1),this.Te.ie--,d&&(d=this.Te,d.gh[d.Nc]=b,d.kh[d.Nc]=-1,d.Nc++,this.Fh(a,b+1),this.Te.Nc--),c&&(c=this.Te,c.gh[c.Nc]=b,c.kh[c.Nc]=1,c.Nc++,this.Fh(a,b+1),this.Te.Nc--))}},ra:Bk};Rd.aa=!0;Rd.prototype={ra:Rd};Ec.aa=!0;Ec.Kb=Gb;Ec.prototype=sb(Gb.prototype,{jh:function(a){this.$.ed();this.$.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;this.Rh.Uk(this.info,this.Yb);a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.ie=0;a.Fh(this.info,0);a=this.ul;for(var b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b},sh:function(a){var b=this.$.Ec==ec.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.La;b<a;){var e=b++,e=this.info.rows[e].va;e.va=0;e.Wc=0;e.ub=0}else{a=0;for(e=this.info.La;a<e;){var d=a++,c=this.info.rows[d],f=c.va,h=f.va*b;h<c.Ja?h=c.Ja:h>c.Ia&&(h=c.Ia);f.va=h;0<c.cb?(h=f.Wc*b,c=c.cb,h<-c?h=-c:h>c&&(h=c),f.Wc=h):f.Wc=0;this.sf[d]=f.va+f.Wc}var b=this.sf,e=a=!1,l,g,k,m,n,q,p,r,d=this.C.eb,f=this.C.fb,c=this.C.gb,h=this.D.eb;l=this.D.fb;g=this.D.gb;k=this.C.ib;m=this.C.jb;n=this.C.kb;q=this.D.ib;p=this.D.jb;r=this.D.kb;for(var v=0,t=this.info.La;v<t;){var w=v++,B=this.info.rows[w].Ba,u=this.Yb[w],w=b[w];B.wc&1&&(d+=u.md*w,f+=u.nd*w,c+=u.od*w,h+=u.pd*-w,l+=u.qd*-w,g+=u.rd*-w,a=!0);B.wc&2&&(k+=u.fd*w,m+=u.gd*w,n+=u.hd*w,q+=u.jd*-w,p+=u.kd*-w,r+=u.ld*-w,e=!0)}a&&(this.C.eb=d,this.C.fb=f,this.C.gb=c,this.D.eb=h,this.D.fb=l,this.D.gb=g);e&&(this.C.ib=k,this.C.jb=m,this.C.kb=n,this.D.ib=q,this.D.jb=p,this.D.kb=r)}},nh:function(){var a=this.info.La,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.ib;g=this.C.jb;k=this.C.kb;m=this.D.ib;n=this.D.jb;q=this.D.kb;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.va,v=v.Ba,w=0,w=w+(b*v.wa+e*v.xa+d*v.ya),w=w-(c*v.Ca+f*v.Da+h*v.Ea),w=w+(l*v.ba+g*v.ca+k*v.da),w=w-(m*v.fa+n*v.ga+q*v.ha);this.Hg[r]=w;this.Kh[r]=t.va;this.lj[r]=0}b=this.Rh.Oi;for(e=0;e<a;)if(d=e++,h=this.info.rows[d],c=h.va,l=this.Yb[d],0<h.cb)for(f=c.Wc,h=f+l.tf*(-h.motorSpeed-this.Hg[d]),l=c.Wc,h<-l?h=-l:h>l&&(h=l),c.Wc=h,c=h-f,this.lj[d]=c,f=0,h=a;f<h;)g=l=f++,k=this.Hg,k[g]+=c*b[d][l];e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ul.oc[b],this.Ee.Eh[b].Tk(this.info,this.Rh,this.Hg,this.Kh,this.sf,1,!1)){for(e=0;e<a;)c=e++,d=this.sf[c],this.info.rows[c].va.va+=d,f=this.lj,f[c]+=d;a=this.lj;d=e=!1;c=this.C.eb;f=this.C.fb;h=this.C.gb;l=this.D.eb;g=this.D.fb;k=this.D.gb;m=this.C.ib;n=this.C.jb;q=this.C.kb;p=this.D.ib;r=this.D.jb;t=this.D.kb;v=0;for(w=this.info.La;v<w;){var B=v++,u=this.info.rows[B].Ba,D=this.Yb[B],B=a[B];u.wc&1&&(c+=D.md*B,f+=D.nd*B,h+=D.od*B,l+=D.pd*-B,g+=D.qd*-B,k+=D.rd*-B,e=!0);u.wc&2&&(m+=D.fd*B,n+=D.gd*B,q+=D.hd*B,p+=D.jd*-B,r+=D.kd*-B,t+=D.ld*-B,d=!0)}e&&(this.C.eb=c,this.C.fb=f,this.C.gb=h,this.D.eb=l,this.D.fb=g,this.D.gb=k);d&&(this.C.ib=m,this.C.jb=n,this.C.kb=q,this.D.ib=p,this.D.jb=r,this.D.kb=t);a=this.ul;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.La;l<g;){var k=l++,m=this.info.rows[k],k=m.va,m=m.Ba;m.wc&1?(b+=m.wa*k.va,e+=m.xa*k.va,d+=m.ya*k.va):m.wc&2&&(c+=m.ba*k.va,f+=m.ca*k.va,h+=m.da*k.va)}this.$.Ai=b*a.invDt;this.$.Bi=e*a.invDt;this.$.Ci=d*a.invDt;this.$.Di=c*a.invDt;this.$.Ei=f*a.invDt;this.$.Fi=h*a.invDt},Gg:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.Rh.Uk(this.info,this.Yb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.ie=0;a.Fh(this.info,0);for(var a=this.ui,b=this.Ee.Ze,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.oc[h];h<b?(a.af[e]=h,++e):(a.af[b+d]=h,++d)}b=a.oc;a.oc=a.af;a.af=b;a=0;for(b=this.info.La;a<b;)e=a++,this.info.rows[e].va.ub=0},mh:function(){var a=this.info.La,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.Sc;e=this.C.Tc;d=this.C.Uc;c=this.D.Sc;f=this.D.Tc;h=this.D.Uc;l=this.C.Oc;g=this.C.Pc;k=this.C.Qc;m=this.D.Oc;n=this.D.Pc;q=this.D.Qc;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.va,v=v.Ba,w=0,w=w+(b*v.wa+e*v.xa+d*v.ya),w=w-(c*v.Ca+f*v.Da+h*v.Ea),w=w+(l*v.ba+g*v.ca+k*v.da),w=w-(m*v.fa+n*v.ga+q*v.ha);this.Hg[r]=w;this.Kh[r]=t.ub}e=!1;d=0;for(c=this.Ee.Ze;d<c;)if(b=d++,b=this.ui.oc[b],this.Ee.Eh[b].Tk(this.info,this.Rh,this.Hg,this.Kh,this.sf,F.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)d=e++,this.info.rows[d].va.ub+=this.sf[d];a=this.sf;d=e=!1;c=this.C.Sc;f=this.C.Tc;h=this.C.Uc;l=this.D.Sc;g=this.D.Tc;k=this.D.Uc;m=this.C.Oc;n=this.C.Pc;q=this.C.Qc;p=this.D.Oc;r=this.D.Pc;t=this.D.Qc;v=0;for(w=this.info.La;v<w;){var B=v++,u=this.info.rows[B].Ba,D=this.Yb[B],B=a[B];u.wc&1&&(c+=D.md*B,f+=D.nd*B,h+=D.od*B,l+=D.pd*-B,g+=D.qd*-B,k+=D.rd*-B,e=!0);u.wc&2&&(m+=D.fd*B,n+=D.gd*B,q+=D.hd*B,p+=D.jd*-B,r+=D.kd*-B,t+=D.ld*-B,d=!0)}e&&(this.C.Sc=c,this.C.Tc=f,this.C.Uc=h,this.D.Sc=l,this.D.Tc=g,this.D.Uc=k);d&&(this.C.Oc=m,this.C.Pc=n,this.C.Qc=q,this.D.Oc=p,this.D.Pc=r,this.D.Qc=t);a=this.ui;for(e=0;a.oc[e]!=b;)++e;for(;0<e;)b=a.oc[e],a.oc[e]=a.oc[e-1],a.oc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},lh:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;this.Rh.Uk(this.info,this.Yb);var a=this.Ee;a.Ze=0;var b=a.Te;b.Nc=0;b.ie=0;a.Fh(this.info,0);for(var e=this.ui,d=this.Ee.Ze,c=0,f=0,h=0,l=e.n;h<l;){var g=h++,k=e.oc[g];k<d?(e.af[c]=k,++c):(e.af[d+f]=k,++f)}var m=e.oc;e.oc=e.af;e.af=m;for(var n=this.info.La,q=0;q<n;){var p=q++,r=this.info.rows[p].va;this.Hg[p]=0;this.Kh[p]=r.ub}for(var v=!1,t=0,w=this.Ee.Ze;t<w;){var B=t++,u=this.ui.oc[B];if(this.Ee.Eh[u].Tk(this.info,this.Rh,this.Hg,this.Kh,this.sf,F.positionNgsBaumgarte,!1)){for(var D=0,C=n;D<C;){var A=D++;this.info.rows[A].va.ub+=this.sf[A]}for(var E=this.sf,x=!1,L=!1,N,I,M,O,ha,ga,qa,pa,ya,ka,Va,U,R=U=Va=ka=ya=pa=qa=ga=ha=O=M=I=N=0,Ha=this.info.La;R<Ha;){var Ma=R++,Qa=this.info.rows[Ma].Ba,Aa=this.Yb[Ma],Oa=E[Ma];Qa.wc&1&&(N+=Aa.md*Oa,I+=Aa.nd*Oa,M+=Aa.od*Oa,O+=Aa.pd*-Oa,ha+=Aa.qd*-Oa,ga+=Aa.rd*-Oa,x=!0);Qa.wc&2&&(qa+=Aa.fd*Oa,pa+=Aa.gd*Oa,ya+=Aa.hd*Oa,ka+=Aa.jd*-Oa,Va+=Aa.kd*-Oa,U+=Aa.ld*-Oa,L=!0)}if(x){var Ba=this.C;Ba.a.v+=N;Ba.a.A+=I;Ba.a.B+=M;var Bb=this.D;Bb.a.v+=O;Bb.a.A+=ha;Bb.a.B+=ga}if(L){var H=this.C,Pa=Math.sqrt(qa*qa+pa*pa+ya*ya),ba=.5*Pa,Q,P;if(.5>ba){var wa=ba*ba;Q=.5*(1-.16666666666666666*wa+wa*wa*.008333333333333333);P=1-.5*wa+wa*wa*.041666666666666664}else Q=Math.sin(ba)/Pa,P=Math.cos(ba);var ta,W,oa;ta=qa*Q;W=pa*Q;oa=ya*Q;var y,Ga,ca,Ca;y=ta;Ga=W;ca=oa;Ca=P;var xa,Da,Ra,la,Z=H.a.o,Ea=H.a.m,ra=H.a.s,va=Z+Ea+ra,J;0<va?(J=Math.sqrt(va+1),la=.5*J,J=.5/J,xa=(H.a.g-H.a.j)*J,Da=(H.a.h-H.a.l)*J,Ra=(H.a.i-H.a.f)*J):Z>Ea?Z>ra?(J=Math.sqrt(Z-Ea-ra+1),xa=.5*J,J=.5/J,Da=(H.a.f+H.a.i)*J,Ra=(H.a.h+H.a.l)*J,la=(H.a.g-H.a.j)*J):(J=Math.sqrt(ra-Z-Ea+1),Ra=.5*J,J=.5/J,xa=(H.a.h+H.a.l)*J,Da=(H.a.j+H.a.g)*J,la=(H.a.i-H.a.f)*J):Ea>ra?(J=Math.sqrt(Ea-ra-Z+1),Da=.5*J,J=.5/J,xa=(H.a.f+H.a.i)*J,Ra=(H.a.j+H.a.g)*J,la=(H.a.h-H.a.l)*J):(J=Math.sqrt(ra-Z-Ea+1),Ra=.5*J,J=.5/J,xa=(H.a.h+H.a.l)*J,Da=(H.a.j+H.a.g)*J,la=(H.a.i-H.a.f)*J);xa=Ca*xa+y*la+Ga*Ra-ca*Da;Da=Ca*Da-y*Ra+Ga*la+ca*xa;Ra=Ca*Ra+y*Da-Ga*xa+ca*la;la=Ca*la-y*xa-Ga*Da-ca*Ra;var Ka=xa*xa+Da*Da+Ra*Ra+la*la;1E-32<Ka&&(Ka=1/Math.sqrt(Ka));xa*=Ka;Da*=Ka;Ra*=Ka;la*=Ka;var Xa=xa,S=Da,Ya=Ra,T=la,K=2*Xa,ia=2*S,gb=2*Ya,da=Xa*K,Ua=S*ia,sa=Ya*gb,fb=Xa*ia,jb=S*gb,Za=Xa*gb,ma=T*K,na=T*ia,Ia=T*gb;H.a.o=1-Ua-sa;H.a.f=fb-Ia;H.a.h=Za+na;H.a.i=fb+Ia;H.a.m=1-da-sa;H.a.j=jb-ma;H.a.l=Za-na;H.a.g=jb+ma;H.a.s=1-da-Ua;var Fa,nb,fa,ea,ja,cb,za,tb,Ta;Fa=H.a.o*H.Ra+H.a.f*H.Ua+H.a.h*H.Xa;nb=H.a.o*H.Sa+H.a.f*H.Va+H.a.h*H.Ya;fa=H.a.o*H.Ta+H.a.f*H.Wa+H.a.h*H.Za;ea=H.a.i*H.Ra+H.a.m*H.Ua+H.a.j*H.Xa;ja=H.a.i*H.Sa+H.a.m*H.Va+H.a.j*H.Ya;cb=H.a.i*H.Ta+H.a.m*H.Wa+H.a.j*H.Za;za=H.a.l*H.Ra+H.a.g*H.Ua+H.a.s*H.Xa;tb=H.a.l*H.Sa+H.a.g*H.Va+H.a.s*H.Ya;Ta=H.a.l*H.Ta+H.a.g*H.Wa+H.a.s*H.Za;H.P=Fa;H.R=nb;H.S=fa;H.T=ea;H.U=ja;H.V=cb;H.W=za;H.X=tb;H.Y=Ta;var qb,rb,vb,Wa,yb,bb,$a,ua,Jb;qb=H.P*H.a.o+H.R*H.a.f+H.S*H.a.h;rb=H.P*H.a.i+H.R*H.a.m+H.S*H.a.j;vb=H.P*H.a.l+H.R*H.a.g+H.S*H.a.s;Wa=H.T*H.a.o+H.U*H.a.f+H.V*H.a.h;yb=H.T*H.a.i+H.U*H.a.m+H.V*H.a.j;bb=H.T*H.a.l+H.U*H.a.g+H.V*H.a.s;$a=H.W*H.a.o+H.X*H.a.f+H.Y*H.a.h;ua=H.W*H.a.i+H.X*H.a.m+H.Y*H.a.j;Jb=H.W*H.a.l+H.X*H.a.g+H.Y*H.a.s;H.P=qb;H.R=rb;H.S=vb;H.T=Wa;H.U=yb;H.V=bb;H.W=$a;H.X=ua;H.Y=Jb;H.P*=H.N.x;H.R*=H.N.x;H.S*=H.N.x;H.T*=H.N.y;H.U*=H.N.y;H.V*=H.N.y;H.W*=H.N.z;H.X*=H.N.z;H.Y*=H.N.z;var G=this.D,ob=Math.sqrt(ka*ka+Va*Va+U*U),db=.5*ob,pb,ab;if(.5>db){var hb=db*db;pb=.5*(1-.16666666666666666*hb+hb*hb*.008333333333333333);ab=1-.5*hb+hb*hb*.041666666666666664}else pb=Math.sin(db)/ob,ab=Math.cos(db);var z,Db,wb;z=ka*pb;Db=Va*pb;wb=U*pb;var sb,Eb,Na,mb;sb=z;Eb=Db;Na=wb;mb=ab;var xb,zb,eb,Y,La=G.a.o,kb=G.a.m,Sa=G.a.s,ib=La+kb+Sa,Ja;0<ib?(Ja=Math.sqrt(ib+1),Y=.5*Ja,Ja=.5/Ja,xb=(G.a.g-G.a.j)*Ja,zb=(G.a.h-G.a.l)*Ja,eb=(G.a.i-G.a.f)*Ja):La>kb?La>Sa?(Ja=Math.sqrt(La-kb-Sa+1),xb=.5*Ja,Ja=.5/Ja,zb=(G.a.f+G.a.i)*Ja,eb=(G.a.h+G.a.l)*Ja,Y=(G.a.g-G.a.j)*Ja):(Ja=Math.sqrt(Sa-La-kb+1),eb=.5*Ja,Ja=.5/Ja,xb=(G.a.h+G.a.l)*Ja,zb=(G.a.j+G.a.g)*Ja,Y=(G.a.i-G.a.f)*Ja):kb>Sa?(Ja=Math.sqrt(kb-Sa-La+1),zb=.5*Ja,Ja=.5/Ja,xb=(G.a.f+G.a.i)*Ja,eb=(G.a.j+G.a.g)*Ja,Y=(G.a.h-G.a.l)*Ja):(Ja=Math.sqrt(Sa-La-kb+1),eb=.5*Ja,Ja=.5/Ja,xb=(G.a.h+G.a.l)*Ja,zb=(G.a.j+G.a.g)*Ja,Y=(G.a.i-G.a.f)*Ja);xb=mb*xb+sb*Y+Eb*eb-Na*zb;zb=mb*zb-sb*eb+Eb*Y+Na*xb;eb=mb*eb+sb*zb-Eb*xb+Na*Y;Y=mb*Y-sb*xb-Eb*zb-Na*eb;var Hb=xb*xb+zb*zb+eb*eb+Y*Y;1E-32<Hb&&(Hb=1/Math.sqrt(Hb));xb*=Hb;zb*=Hb;eb*=Hb;Y*=Hb;var ub=xb,X=zb,Cb=eb,Fb=Y,Gb=2*ub,Ib=2*X,gc=2*Cb,Mb=ub*Gb,Lb=X*Ib,Ob=Cb*gc,Nb=ub*Ib,Pb=X*gc,jc=ub*gc,Ub=Fb*Gb,kc=Fb*Ib,ac=Fb*gc;G.a.o=1-Lb-Ob;G.a.f=Nb-ac;G.a.h=jc+kc;G.a.i=Nb+ac;G.a.m=1-Mb-Ob;G.a.j=Pb-Ub;G.a.l=jc-kc;G.a.g=Pb+Ub;G.a.s=1-Mb-Lb;var Wb,Xb,Rb,hc,Sb,Qb,Yb,ic,Kb;Wb=G.a.o*G.Ra+G.a.f*G.Ua+G.a.h*G.Xa;Xb=G.a.o*G.Sa+G.a.f*G.Va+G.a.h*G.Ya;Rb=G.a.o*G.Ta+G.a.f*G.Wa+G.a.h*G.Za;hc=G.a.i*G.Ra+G.a.m*G.Ua+G.a.j*G.Xa;Sb=G.a.i*G.Sa+G.a.m*G.Va+G.a.j*G.Ya;Qb=G.a.i*G.Ta+G.a.m*G.Wa+G.a.j*G.Za;Yb=G.a.l*G.Ra+G.a.g*G.Ua+G.a.s*G.Xa;ic=G.a.l*G.Sa+G.a.g*G.Va+G.a.s*G.Ya;Kb=G.a.l*G.Ta+G.a.g*G.Wa+G.a.s*G.Za;G.P=Wb;G.R=Xb;G.S=Rb;G.T=hc;G.U=Sb;G.V=Qb;G.W=Yb;G.X=ic;G.Y=Kb;var $b,lb,Tb,bc,dc,uc,mc,ec,fc;$b=G.P*G.a.o+G.R*G.a.f+G.S*G.a.h;lb=G.P*G.a.i+G.R*G.a.m+G.S*G.a.j;Tb=G.P*G.a.l+G.R*G.a.g+G.S*G.a.s;bc=G.T*G.a.o+G.U*G.a.f+G.V*G.a.h;dc=G.T*G.a.i+G.U*G.a.m+G.V*G.a.j;uc=G.T*G.a.l+G.U*G.a.g+G.V*G.a.s;mc=G.W*G.a.o+G.X*G.a.f+G.Y*G.a.h;ec=G.W*G.a.i+G.X*G.a.m+G.Y*G.a.j;fc=G.W*G.a.l+G.X*G.a.g+G.Y*G.a.s;G.P=$b;G.R=lb;G.S=Tb;G.T=bc;G.U=dc;G.V=uc;G.W=mc;G.X=ec;G.Y=fc;G.P*=G.N.x;G.R*=G.N.x;G.S*=G.N.x;G.T*=G.N.y;G.U*=G.N.y;G.V*=G.N.y;G.W*=G.N.z;G.X*=G.N.z;G.Y*=G.N.z}for(var Zb=this.ui,sc=0;Zb.oc[sc]!=u;)++sc;for(;0<sc;){var lc=Zb.oc[sc];Zb.oc[sc]=Zb.oc[sc-1];Zb.oc[sc-1]=lc;--sc}v=!0;break}}v||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},$e:function(){this.$.ed();this.$.Cl()},ra:Ec});Tf.aa=!0;Tf.prototype={$m:function(a,b,e){for(var d=0;d<e;)for(var c=d++,f=b[c],h=0,l=e;h<l;){var g=h++;this.ck[c][g]=this.$a[f][b[g]]}d=this.ck;a=this.ik[a];var k;switch(e){case 4:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[5];k=a[5];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=c[5]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=c[5]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=c[5]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=c[5]*g[4];g=d[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=c[5]*g[4];c=d[5];b=a[5];e=1/c[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[5];g=d[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=d[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=d[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=d[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;c=d[h];b=a[h];l=1/c[h];b[h]=l;g=0;for(k=h;g<k;){var m=g++;b[m]*=l}g=h+1;for(k=e;g<k;)m=g++,c[m]*=l;for(var m=0,n=h;m<n;){var q=m++,g=d[q];k=a[q];for(var p=0,q=q+1;p<q;){var r=p++;k[r]-=b[r]*g[h]}k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}m=h+1;for(n=e;m<n;){k=m++;g=d[k];k=a[k];p=0;for(q=h;p<q;)r=p++,k[r]-=b[r]*g[h];k[h]=-l*g[h];k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}}for(d=1;d<e;)for(c=d++,b=a[c],f=0,h=c;f<h;)l=f++,a[l][c]=b[l]}},Uk:function(a,b){var e=this.$a,d=this.Oi,c=a.La,f=a.Ce,h=a.De,l=f.$a,g=h.$a,k,m,n,q,p,r,v,t,w,B,u,D,C,A,E,x;k=f.P;m=f.R;n=f.S;q=f.T;p=f.U;r=f.V;v=f.W;t=f.X;f=f.Y;w=h.P;B=h.R;u=h.S;D=h.T;C=h.U;A=h.V;E=h.W;x=h.X;for(var h=h.Y,F=0;F<c;){var N=F++,I=a.rows[N].Ba,N=b[N];I.Bm();I.wc&1?(N.md=I.wa*l,N.nd=I.xa*l,N.od=I.ya*l,N.pd=I.Ca*g,N.qd=I.Da*g,N.rd=I.Ea*g):(N.md=0,N.nd=0,N.od=0,N.pd=0,N.qd=0,N.rd=0);if(I.wc&2){var L,M,O;L=k*I.ba+m*I.ca+n*I.da;M=q*I.ba+p*I.ca+r*I.da;O=v*I.ba+t*I.ca+f*I.da;N.fd=L;N.gd=M;N.hd=O;L=w*I.fa+B*I.ga+u*I.ha;M=D*I.fa+C*I.ga+A*I.ha;I=E*I.fa+x*I.ga+h*I.ha;N.jd=L;N.kd=M;N.ld=I}else N.fd=0,N.gd=0,N.hd=0,N.jd=0,N.kd=0,N.ld=0}for(l=0;l<c;)for(g=l++,k=a.rows[g].Ba,m=g,n=c;m<n;)q=m++,p=b[q],r=k.wa*p.md+k.xa*p.nd+k.ya*p.od+(k.ba*p.fd+k.ca*p.gd+k.da*p.hd)+(k.Ca*p.pd+k.Da*p.qd+k.Ea*p.rd)+(k.fa*p.jd+k.ga*p.kd+k.ha*p.ld),g==q?(e[g][q]=r+a.rows[g].Na,d[g][q]=r,p.mass=r+a.rows[g].Na,p.tf=r,0!=p.mass&&(p.mass=1/p.mass),p.tf&&(p.tf=1/p.tf)):(e[g][q]=r,e[q][g]=r,d[g][q]=r,d[q][g]=r);a=0;for(b=this.Ij;a<b;)e=a++,this.zj[e]=!1},ra:Tf};Tb.aa=!0;Tb.Kb=Gb;Tb.prototype=sb(Gb.prototype,{jh:function(a){this.ti.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.$a;var b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.info.rows[A],A=this.Yb[A],x=E.Eg;A.Lh=x.wa*a;A.Mh=x.xa*a;A.Nh=x.ya*a;A.Oh=x.Ca*b;A.Ph=x.Da*b;A.Qh=x.Ea*b;var F,N,I;F=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;A.Nf=F;A.Of=N;A.Pf=I;F=n*x.fa+q*x.ga+p*x.ha;N=r*x.fa+v*x.ga+t*x.ha;I=w*x.fa+B*x.ga+u*x.ha;A.Qf=F;A.Rf=N;A.Sf=I;A.he=a+b+(A.Nf*x.ba+A.Of*x.ca+A.Pf*x.da)+(A.Qf*x.fa+A.Rf*x.ga+A.Sf*x.ha);0!=A.he&&(A.he=1/A.he);x=E.vj;E=E.uj;A.gl=x.wa*a;A.hl=x.xa*a;A.il=x.ya*a;A.jl=x.Ca*b;A.kl=x.Da*b;A.ll=x.Ea*b;A.al=E.wa*a;A.bl=E.xa*a;A.cl=E.ya*a;A.dl=E.Ca*b;A.el=E.Da*b;A.fl=E.Ea*b;F=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;A.oj=F;A.pj=N;A.qj=I;F=n*x.fa+q*x.ga+p*x.ha;N=r*x.fa+v*x.ga+t*x.ha;I=w*x.fa+B*x.ga+u*x.ha;A.rj=F;A.sj=N;A.tj=I;F=e*E.ba+d*E.ca+c*E.da;N=f*E.ba+h*E.ca+l*E.da;I=g*E.ba+k*E.ca+m*E.da;A.Tj=F;A.Uj=N;A.Vj=I;F=n*E.fa+q*E.ga+p*E.ha;N=r*E.fa+v*E.ga+t*E.ha;I=w*E.fa+B*E.ga+u*E.ha;A.Wj=F;A.Xj=N;A.Yj=I;x=a+b+(A.oj*x.ba+A.pj*x.ca+A.qj*x.da)+(A.rj*x.fa+A.sj*x.ga+A.tj*x.ha);N=F=A.oj*E.ba+A.pj*E.ca+A.qj*E.da+(A.rj*E.fa+A.sj*E.ga+A.tj*E.ha);E=a+b+(A.Tj*E.ba+A.Uj*E.ca+A.Vj*E.da)+(A.Wj*E.fa+A.Xj*E.ga+A.Yj*E.ha);(I=x*E-F*N)&&(I=1/I);A.om=E*I;A.pm=-F*I;A.qm=-N*I;A.rm=x*I}},sh:function(a){var b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.ib;g=this.C.jb;k=this.C.kb;m=this.D.ib;n=this.D.jb;q=this.D.kb;for(var p=0,r=this.info.La;p<r;){var v=p++,t=this.info.rows[v],w=t.va,v=this.Yb[v],B=t.vj,u=t.uj,t=w.Xc,B=w.Ue*B.wa+w.Ve*B.xa+w.We*B.ya,u=w.Ue*u.wa+w.Ve*u.xa+w.We*u.ya;w.yc=B;w.xc=u;w.Xc*=a.dtRatio;w.yc*=a.dtRatio;w.xc*=a.dtRatio;b+=v.Lh*t;e+=v.Mh*t;d+=v.Nh*t;b+=v.gl*B;e+=v.hl*B;d+=v.il*B;b+=v.al*u;e+=v.bl*u;d+=v.cl*u;c+=v.Oh*-t;f+=v.Ph*-t;h+=v.Qh*-t;c+=v.jl*-B;f+=v.kl*-B;h+=v.ll*-B;c+=v.dl*-u;f+=v.el*-u;h+=v.fl*-u;l+=v.Nf*t;g+=v.Of*t;k+=v.Pf*t;l+=v.oj*B;g+=v.pj*B;k+=v.qj*B;l+=v.Tj*u;g+=v.Uj*u;k+=v.Vj*u;m+=v.Qf*-t;n+=v.Rf*-t;q+=v.Sf*-t;m+=v.rj*-B;n+=v.sj*-B;q+=v.tj*-B;m+=v.Wj*-u;n+=v.Xj*-u;q+=v.Yj*-u}this.C.eb=b;this.C.fb=e;this.C.gb=d;this.D.eb=c;this.D.fb=f;this.D.gb=h;this.C.ib=l;this.C.jb=g;this.C.kb=k;this.D.ib=m;this.D.jb=n;this.D.kb=q},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.eb;b=this.C.fb;e=this.C.gb;d=this.D.eb;c=this.D.fb;f=this.D.gb;h=this.C.ib;l=this.C.jb;g=this.C.kb;k=this.D.ib;m=this.D.jb;n=this.D.kb;for(var q=0,p=this.info.La;q<p;){var r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=0,B=v.vj,w=w+(a*B.wa+b*B.xa+e*B.ya),w=w-(d*B.Ca+c*B.Da+f*B.Ea),w=w+(h*B.ba+l*B.ca+g*B.da),w=w-(k*B.fa+m*B.ga+n*B.ha),u=0,B=v.uj,u=u+(a*B.wa+b*B.xa+e*B.ya),u=u-(d*B.Ca+c*B.Da+f*B.Ea),u=u+(h*B.ba+l*B.ca+g*B.da),u=u-(k*B.fa+m*B.ga+n*B.ha),B=-(w*r.om+u*r.pm),D=-(w*r.qm+u*r.rm),w=t.yc,u=t.xc;t.yc+=B;t.xc+=D;(v=v.friction*t.Xc)?(B=t.yc*t.yc+t.xc*t.xc,B>v*v&&(v/=Math.sqrt(B),t.yc*=v,t.xc*=v)):(t.yc=0,t.xc=0);B=t.yc-w;D=t.xc-u;a+=r.gl*B;b+=r.hl*B;e+=r.il*B;a+=r.al*D;b+=r.bl*D;e+=r.cl*D;d+=r.jl*-B;c+=r.kl*-B;f+=r.ll*-B;d+=r.dl*-D;c+=r.el*-D;f+=r.fl*-D;h+=r.oj*B;l+=r.pj*B;g+=r.qj*B;h+=r.Tj*D;l+=r.Uj*D;g+=r.Vj*D;k+=r.rj*-B;m+=r.sj*-B;n+=r.tj*-B;k+=r.Wj*-D;m+=r.Xj*-D;n+=r.Yj*-D}q=0;for(p=this.info.La;q<p;)r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=0,u=v.Eg,w+=a*u.wa+b*u.xa+e*u.ya,w-=d*u.Ca+c*u.Da+f*u.Ea,w+=h*u.ba+l*u.ca+g*u.da,w-=k*u.fa+m*u.ga+n*u.ha,v=(v.Ga-w)*r.he,w=t.Xc,t.Xc+=v,0>t.Xc&&(t.Xc=0),v=t.Xc-w,a+=r.Lh*v,b+=r.Mh*v,e+=r.Nh*v,d+=r.Oh*-v,c+=r.Ph*-v,f+=r.Qh*-v,h+=r.Nf*v,l+=r.Of*v,g+=r.Pf*v,k+=r.Qf*-v,m+=r.Rf*-v,n+=r.Sf*-v;this.C.eb=a;this.C.fb=b;this.C.gb=e;this.D.eb=d;this.D.fb=c;this.D.gb=f;this.C.ib=h;this.C.jb=l;this.C.kb=g;this.D.ib=k;this.D.jb=m;this.D.kb=n},Gg:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.Yb[A],A=this.info.rows[A].Eg;E.Lh=A.wa*a;E.Mh=A.xa*a;E.Nh=A.ya*a;E.Oh=A.Ca*b;E.Ph=A.Da*b;E.Qh=A.Ea*b;var x,F,N;x=e*A.ba+d*A.ca+c*A.da;F=f*A.ba+h*A.ca+l*A.da;N=g*A.ba+k*A.ca+m*A.da;E.Nf=x;E.Of=F;E.Pf=N;x=n*A.fa+q*A.ga+p*A.ha;F=r*A.fa+v*A.ga+t*A.ha;N=w*A.fa+B*A.ga+u*A.ha;E.Qf=x;E.Rf=F;E.Sf=N;E.he=a+b+(E.Nf*A.ba+E.Of*A.ca+E.Pf*A.da)+(E.Qf*A.fa+E.Rf*A.ga+E.Sf*A.ha);0!=E.he&&(E.he=1/E.he)}a=0;for(b=this.info.La;a<b;)e=a++,this.info.rows[e].va.ub=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Sc;b=this.C.Tc;e=this.C.Uc;d=this.D.Sc;c=this.D.Tc;f=this.D.Uc;h=this.C.Oc;l=this.C.Pc;g=this.C.Qc;k=this.D.Oc;m=this.D.Pc;n=this.D.Qc;for(var q=0,p=this.info.La;q<p;){var r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=v.Eg,B=0,B=B+(a*w.wa+b*w.xa+e*w.ya),B=B-(d*w.Ca+c*w.Da+f*w.Ea),B=B+(h*w.ba+l*w.ca+g*w.da),B=B-(k*w.fa+m*w.ga+n*w.ha),v=(v.Ga-B)*r.he*F.positionSplitImpulseBaumgarte,w=t.ub;t.ub+=v;0>t.ub&&(t.ub=0);v=t.ub-w;a+=r.Lh*v;b+=r.Mh*v;e+=r.Nh*v;d+=r.Oh*-v;c+=r.Ph*-v;f+=r.Qh*-v;h+=r.Nf*v;l+=r.Of*v;g+=r.Pf*v;k+=r.Qf*-v;m+=r.Rf*-v;n+=r.Sf*-v}this.C.Sc=a;this.C.Tc=b;this.C.Uc=e;this.D.Sc=d;this.D.Tc=c;this.D.Uc=f;this.C.Oc=h;this.C.Pc=l;this.C.Qc=g;this.D.Oc=k;this.D.Pc=m;this.D.Qc=n},lh:function(){this.ti.Ik();this.ti.dd(this.info);var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.Yb[A],x=this.info.rows[A].Eg;E.Lh=x.wa*a;E.Mh=x.xa*a;E.Nh=x.ya*a;E.Oh=x.Ca*b;E.Ph=x.Da*b;E.Qh=x.Ea*b;var L,N,I;L=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;E.Nf=L;E.Of=N;E.Pf=I;var M,O,ha;M=n*x.fa+q*x.ga+p*x.ha;O=r*x.fa+v*x.ga+t*x.ha;ha=w*x.fa+B*x.ga+u*x.ha;E.Qf=M;E.Rf=O;E.Sf=ha;E.he=a+b+(E.Nf*x.ba+E.Of*x.ca+E.Pf*x.da)+(E.Qf*x.fa+E.Rf*x.ga+E.Sf*x.ha);0!=E.he&&(E.he=1/E.he)}for(var ga,qa,pa,Aa,ka,Va,U,R,ya,Ma,Qa,Ha,Oa=Ha=Qa=Ma=ya=R=U=Va=ka=Aa=pa=qa=ga=0,Ba=this.info.La;Oa<Ba;){var Ua=Oa++,H=this.info.rows[Ua],Pa=this.Yb[Ua],ba=H.va,Q=H.Eg,P=0,P=P+(ga*Q.wa+qa*Q.xa+pa*Q.ya),P=P-(Aa*Q.Ca+ka*Q.Da+Va*Q.Ea),P=P+(U*Q.ba+R*Q.ca+ya*Q.da),P=P-(Ma*Q.fa+Qa*Q.ga+Ha*Q.ha),wa=(H.Ga-P)*Pa.he*F.positionNgsBaumgarte,ta=ba.ub;ba.ub+=wa;0>ba.ub&&(ba.ub=0);wa=ba.ub-ta;ga+=Pa.Lh*wa;qa+=Pa.Mh*wa;pa+=Pa.Nh*wa;Aa+=Pa.Oh*-wa;ka+=Pa.Ph*-wa;Va+=Pa.Qh*-wa;U+=Pa.Nf*wa;R+=Pa.Of*wa;ya+=Pa.Pf*wa;Ma+=Pa.Qf*-wa;Qa+=Pa.Rf*-wa;Ha+=Pa.Sf*-wa}var W=this.C;W.a.v+=ga;W.a.A+=qa;W.a.B+=pa;var oa=this.D;oa.a.v+=Aa;oa.a.A+=ka;oa.a.B+=Va;var y=this.C,Ga=Math.sqrt(U*U+R*R+ya*ya),ca=.5*Ga,Ca,xa;if(.5>ca){var Da=ca*ca;Ca=.5*(1-.16666666666666666*Da+Da*Da*.008333333333333333);xa=1-.5*Da+Da*Da*.041666666666666664}else Ca=Math.sin(ca)/Ga,xa=Math.cos(ca);var Ra,la;Ra=U*Ca;la=R*Ca;var Z,Ea;Z=ya*Ca;Ea=xa;var ra,va,J,Ka,Xa=y.a.o,S=y.a.m,Ya=y.a.s,T=Xa+S+Ya,K;0<T?(K=Math.sqrt(T+1),Ka=.5*K,K=.5/K,ra=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,J=(y.a.i-y.a.f)*K):Xa>S?Xa>Ya?(K=Math.sqrt(Xa-S-Ya+1),ra=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,J=(y.a.h+y.a.l)*K,Ka=(y.a.g-y.a.j)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K):S>Ya?(K=Math.sqrt(S-Ya-Xa+1),va=.5*K,K=.5/K,ra=(y.a.f+y.a.i)*K,J=(y.a.j+y.a.g)*K,Ka=(y.a.h-y.a.l)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K);ra=Ea*ra+Ra*Ka+la*J-Z*va;va=Ea*va-Ra*J+la*Ka+Z*ra;J=Ea*J+Ra*va-la*ra+Z*Ka;Ka=Ea*Ka-Ra*ra-la*va-Z*J;var ia=ra*ra+va*va+J*J+Ka*Ka;1E-32<ia&&(ia=1/Math.sqrt(ia));ra*=ia;va*=ia;J*=ia;Ka*=ia;var gb=ra,da=va,bb=J,sa=Ka,fb=2*gb,jb=2*da,Za=2*bb,ma=gb*fb,na=da*jb,Ia=bb*Za,Fa=gb*jb,nb=da*Za,fa=gb*Za,ea=sa*fb,ja=sa*jb,cb=sa*Za;y.a.o=1-na-Ia;y.a.f=Fa-cb;y.a.h=fa+ja;y.a.i=Fa+cb;y.a.m=1-ma-Ia;y.a.j=nb-ea;y.a.l=fa-ja;y.a.g=nb+ea;y.a.s=1-ma-na;var za,tb,Ta,qb,rb,vb,Wa,yb,pb;za=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;tb=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;Ta=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;qb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;rb=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;vb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;Wa=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;yb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;pb=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;y.P=za;y.R=tb;y.S=Ta;y.T=qb;y.U=rb;y.V=vb;y.W=Wa;y.X=yb;y.Y=pb;var $a,ua,sb,G,ob,db,wb,ab,hb;$a=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;ua=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;sb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;G=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;ob=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;db=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;wb=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;ab=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;hb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=$a;y.R=ua;y.S=sb;y.T=G;y.U=ob;y.V=db;y.W=wb;y.X=ab;y.Y=hb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var z=this.D,Db=Math.sqrt(Ma*Ma+Qa*Qa+Ha*Ha),ub=.5*Db,Fb,Eb;if(.5>ub){var Na=ub*ub;Fb=.5*(1-.16666666666666666*Na+Na*Na*.008333333333333333);Eb=1-.5*Na+Na*Na*.041666666666666664}else Fb=Math.sin(ub)/Db,Eb=Math.cos(ub);var mb,xb;mb=Ma*Fb;xb=Qa*Fb;var zb,eb;zb=Ha*Fb;eb=Eb;var Y,La,kb,Sa,ib=z.a.o,Ja=z.a.m,Hb=z.a.s,Ib=ib+Ja+Hb,X;0<Ib?(X=Math.sqrt(Ib+1),Sa=.5*X,X=.5/X,Y=(z.a.g-z.a.j)*X,La=(z.a.h-z.a.l)*X,kb=(z.a.i-z.a.f)*X):ib>Ja?ib>Hb?(X=Math.sqrt(ib-Ja-Hb+1),Y=.5*X,X=.5/X,La=(z.a.f+z.a.i)*X,kb=(z.a.h+z.a.l)*X,Sa=(z.a.g-z.a.j)*X):(X=Math.sqrt(Hb-ib-Ja+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,La=(z.a.j+z.a.g)*X,Sa=(z.a.i-z.a.f)*X):Ja>Hb?(X=Math.sqrt(Ja-Hb-ib+1),La=.5*X,X=.5/X,Y=(z.a.f+z.a.i)*X,kb=(z.a.j+z.a.g)*X,Sa=(z.a.h-z.a.l)*X):(X=Math.sqrt(Hb-ib-Ja+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,La=(z.a.j+z.a.g)*X,Sa=(z.a.i-z.a.f)*X);Y=eb*Y+mb*Sa+xb*kb-zb*La;La=eb*La-mb*kb+xb*Sa+zb*Y;kb=eb*kb+mb*La-xb*Y+zb*Sa;Sa=eb*Sa-mb*Y-xb*La-zb*kb;var Cb=Y*Y+La*La+kb*kb+Sa*Sa;1E-32<Cb&&(Cb=1/Math.sqrt(Cb));Y*=Cb;La*=Cb;kb*=Cb;Sa*=Cb;var Gb=Y,Mb=La,Lb=kb,gc=Sa,Ob=2*Gb,Nb=2*Mb,Pb=2*Lb,Ub=Gb*Ob,Tb=Mb*Nb,jc=Lb*Pb,Zb=Gb*Nb,kc=Mb*Pb,ac=Gb*Pb,Wb=gc*Ob,Xb=gc*Nb,Rb=gc*Pb;z.a.o=1-Tb-jc;z.a.f=Zb-Rb;z.a.h=ac+Xb;z.a.i=Zb+Rb;z.a.m=1-Ub-jc;z.a.j=kc-Wb;z.a.l=ac-Xb;z.a.g=kc+Wb;z.a.s=1-Ub-Tb;var hc,Sb,Qb,Yb,ic,Kb,$b,lb,bc;hc=z.a.o*z.Ra+z.a.f*z.Ua+z.a.h*z.Xa;Sb=z.a.o*z.Sa+z.a.f*z.Va+z.a.h*z.Ya;Qb=z.a.o*z.Ta+z.a.f*z.Wa+z.a.h*z.Za;Yb=z.a.i*z.Ra+z.a.m*z.Ua+z.a.j*z.Xa;ic=z.a.i*z.Sa+z.a.m*z.Va+z.a.j*z.Ya;Kb=z.a.i*z.Ta+z.a.m*z.Wa+z.a.j*z.Za;$b=z.a.l*z.Ra+z.a.g*z.Ua+z.a.s*z.Xa;lb=z.a.l*z.Sa+z.a.g*z.Va+z.a.s*z.Ya;bc=z.a.l*z.Ta+z.a.g*z.Wa+z.a.s*z.Za;z.P=hc;z.R=Sb;z.S=Qb;z.T=Yb;z.U=ic;z.V=Kb;z.W=$b;z.X=lb;z.Y=bc;var dc,ec,fc,mc,lc,nc,oc,sc,pc;dc=z.P*z.a.o+z.R*z.a.f+z.S*z.a.h;ec=z.P*z.a.i+z.R*z.a.m+z.S*z.a.j;fc=z.P*z.a.l+z.R*z.a.g+z.S*z.a.s;mc=z.T*z.a.o+z.U*z.a.f+z.V*z.a.h;lc=z.T*z.a.i+z.U*z.a.m+z.V*z.a.j;nc=z.T*z.a.l+z.U*z.a.g+z.V*z.a.s;oc=z.W*z.a.o+z.X*z.a.f+z.Y*z.a.h;sc=z.W*z.a.i+z.X*z.a.m+z.Y*z.a.j;pc=z.W*z.a.l+z.X*z.a.g+z.Y*z.a.s;z.P=dc;z.R=ec;z.S=fc;z.T=mc;z.U=lc;z.V=nc;z.W=oc;z.X=sc;z.Y=pc;z.P*=z.N.x;z.R*=z.N.x;z.S*=z.N.x;z.T*=z.N.y;z.U*=z.N.y;z.V*=z.N.y;z.W*=z.N.z;z.X*=z.N.z;z.Y*=z.N.z},$e:function(){for(var a=0,b=this.info.La;a<b;){var e=a++,d=this.info.rows[e],e=d.va,c=d.vj,d=d.uj,f,h,l;l=h=f=0;f+=c.wa*e.yc;h+=c.xa*e.yc;l+=c.ya*e.yc;f+=d.wa*e.xc;h+=d.xa*e.xc;l+=d.ya*e.xc;e.Ue=f;e.Ve=h;e.We=l}this.ti.Ik()},ra:Tb});dc.aa=!0;dc.Kb=Gb;dc.prototype=sb(Gb.prototype,{jh:function(a){this.$.ed();this.$.Vd(a,this.info);this.C=this.info.Ce;this.D=this.info.De;a=this.C.$a;var b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.info.rows[A],A=this.Yb[A],x=E.Ba;x.Bm();x.wc&1?(A.md=x.wa*a,A.nd=x.xa*a,A.od=x.ya*a,A.pd=x.Ca*b,A.qd=x.Da*b,A.rd=x.Ea*b):(A.md=0,A.nd=0,A.od=0,A.pd=0,A.qd=0,A.rd=0);if(x.wc&2){var F,N,I;F=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;A.fd=F;A.gd=N;A.hd=I;F=n*x.fa+q*x.ga+p*x.ha;N=r*x.fa+v*x.ga+t*x.ha;I=w*x.fa+B*x.ga+u*x.ha;A.jd=F;A.kd=N;A.ld=I}else A.fd=0,A.gd=0,A.hd=0,A.jd=0,A.kd=0,A.ld=0;A.tf=A.md*x.wa+A.nd*x.xa+A.od*x.ya+(A.pd*x.Ca+A.qd*x.Da+A.rd*x.Ea)+(A.fd*x.ba+A.gd*x.ca+A.hd*x.da)+(A.jd*x.fa+A.kd*x.ga+A.ld*x.ha);A.mass=A.tf+E.Na;A.tf&&(A.tf=1/A.tf);0!=A.mass&&(A.mass=1/A.mass)}},sh:function(a){var b=this.$.Ec==ec.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.La;b<a;){var e=b++,e=this.info.rows[e].va;e.va=0;e.Wc=0;e.ub=0}else{var d,c,f,h,l,g,k,m,n,q;a=this.C.eb;e=this.C.fb;d=this.C.gb;c=this.D.eb;f=this.D.fb;h=this.D.gb;l=this.C.ib;g=this.C.jb;k=this.C.kb;m=this.D.ib;n=this.D.jb;q=this.D.kb;for(var p=0,r=this.info.La;p<r;){var v=p++,t=this.Yb[v],v=this.info.rows[v].va;v.va*=b;v.Wc*=b;v=v.va+v.Wc;a+=t.md*v;e+=t.nd*v;d+=t.od*v;c+=t.pd*-v;f+=t.qd*-v;h+=t.rd*-v;l+=t.fd*v;g+=t.gd*v;k+=t.hd*v;m+=t.jd*-v;n+=t.kd*-v;q+=t.ld*-v}this.C.eb=a;this.C.fb=e;this.C.gb=d;this.D.eb=c;this.D.fb=f;this.D.gb=h;this.C.ib=l;this.C.jb=g;this.C.kb=k;this.D.ib=m;this.D.jb=n;this.D.kb=q}},nh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.eb;b=this.C.fb;e=this.C.gb;d=this.D.eb;c=this.D.fb;f=this.D.gb;h=this.C.ib;l=this.C.jb;g=this.C.kb;k=this.D.ib;m=this.D.jb;n=this.D.kb;for(var q=0,p=this.info.La;q<p;){var r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=v.Ba;if(0!=v.cb){var B=0,B=B+(a*w.wa+b*w.xa+e*w.ya),B=B-(d*w.Ca+c*w.Da+f*w.Ea),B=B+(h*w.ba+l*w.ca+g*w.da),B=B-(k*w.fa+m*w.ga+n*w.ha),B=(-v.motorSpeed-B)*r.tf,u=t.Wc;t.Wc+=B;t.Wc<-v.cb?t.Wc=-v.cb:t.Wc>v.cb&&(t.Wc=v.cb);B=t.Wc-u;w.wc&1&&(a+=r.md*B,b+=r.nd*B,e+=r.od*B,d+=r.pd*-B,c+=r.qd*-B,f+=r.rd*-B);w.wc&2&&(h+=r.fd*B,l+=r.gd*B,g+=r.hd*B,k+=r.jd*-B,m+=r.kd*-B,n+=r.ld*-B)}}q=0;for(p=this.info.La;q<p;)r=q++,v=this.info.rows[r],r=this.Yb[r],t=v.va,w=v.Ba,B=0,B+=a*w.wa+b*w.xa+e*w.ya,B-=d*w.Ca+c*w.Da+f*w.Ea,B+=h*w.ba+l*w.ca+g*w.da,B-=k*w.fa+m*w.ga+n*w.ha,B=(v.Ga-B-t.va*v.Na)*r.mass,u=t.va,t.va+=B,t.va<v.Ja?t.va=v.Ja:t.va>v.Ia&&(t.va=v.Ia),B=t.va-u,w.wc&1&&(a+=r.md*B,b+=r.nd*B,e+=r.od*B,d+=r.pd*-B,c+=r.qd*-B,f+=r.rd*-B),w.wc&2&&(h+=r.fd*B,l+=r.gd*B,g+=r.hd*B,k+=r.jd*-B,m+=r.kd*-B,n+=r.ld*-B);this.C.eb=a;this.C.fb=b;this.C.gb=e;this.D.eb=d;this.D.fb=c;this.D.gb=f;this.C.ib=h;this.C.jb=l;this.C.kb=g;this.D.ib=k;this.D.jb=m;this.D.kb=n},vi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.La;l<g;){var k=l++,m=this.info.rows[k],k=m.va,m=m.Ba;m.wc&1?(b+=m.wa*k.va,e+=m.xa*k.va,d+=m.ya*k.va):m.wc&2&&(c+=m.ba*k.va,f+=m.ca*k.va,h+=m.da*k.va)}this.$.Ai=b*a.invDt;this.$.Bi=e*a.invDt;this.$.Ci=d*a.invDt;this.$.Di=c*a.invDt;this.$.Ei=f*a.invDt;this.$.Fi=h*a.invDt},Gg:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,C=this.info.La;D<C;){var A=D++,E=this.Yb[A],A=this.info.rows[A].Ba;E.md=A.wa*a;E.nd=A.xa*a;E.od=A.ya*a;E.pd=A.Ca*b;E.qd=A.Da*b;E.rd=A.Ea*b;var x,F,N;x=e*A.ba+d*A.ca+c*A.da;F=f*A.ba+h*A.ca+l*A.da;N=g*A.ba+k*A.ca+m*A.da;E.fd=x;E.gd=F;E.hd=N;x=n*A.fa+q*A.ga+p*A.ha;F=r*A.fa+v*A.ga+t*A.ha;N=w*A.fa+B*A.ga+u*A.ha;E.jd=x;E.kd=F;E.ld=N;E.mass=E.md*A.wa+E.nd*A.xa+E.od*A.ya+(E.pd*A.Ca+E.qd*A.Da+E.rd*A.Ea)+(E.fd*A.ba+E.gd*A.ca+E.hd*A.da)+(E.jd*A.fa+E.kd*A.ga+E.ld*A.ha);E.mass&&(E.mass=1/E.mass)}a=0;for(b=this.info.La;a<b;)e=a++,this.info.rows[e].va.ub=0},mh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Sc;b=this.C.Tc;e=this.C.Uc;d=this.D.Sc;c=this.D.Tc;f=this.D.Uc;h=this.C.Oc;l=this.C.Pc;g=this.C.Qc;k=this.D.Oc;m=this.D.Pc;n=this.D.Qc;for(var q=0,p=this.info.La;q<p;){var r=q++,t=this.info.rows[r],r=this.Yb[r],C=t.va,w=t.Ba,B=0,B=B+(a*w.wa+b*w.xa+e*w.ya),B=B-(d*w.Ca+c*w.Da+f*w.Ea),B=B+(h*w.ba+l*w.ca+g*w.da),B=B-(k*w.fa+m*w.ga+n*w.ha),w=(t.Ga*F.positionSplitImpulseBaumgarte-B)*r.mass,B=C.ub;C.ub+=w;C.ub<t.Ja?C.ub=t.Ja:C.ub>t.Ia&&(C.ub=t.Ia);w=C.ub-B;a+=r.md*w;b+=r.nd*w;e+=r.od*w;d+=r.pd*-w;c+=r.qd*-w;f+=r.rd*-w;h+=r.fd*w;l+=r.gd*w;g+=r.hd*w;k+=r.jd*-w;m+=r.kd*-w;n+=r.ld*-w}this.C.Sc=a;this.C.Tc=b;this.C.Uc=e;this.D.Sc=d;this.D.Tc=c;this.D.Uc=f;this.C.Oc=h;this.C.Pc=l;this.C.Qc=g;this.D.Oc=k;this.D.Pc=m;this.D.Qc=n},lh:function(){this.$.ed();this.$.dd(this.info);this.C=this.info.Ce;this.D=this.info.De;var a=this.C.$a,b=this.D.$a,e,d,c,f,h,l,g,k,m,n,q,p,r,t,C,w,B,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;C=this.D.V;w=this.D.W;B=this.D.X;u=this.D.Y;for(var D=0,L=this.info.La;D<L;){var A=D++,E=this.Yb[A],x=this.info.rows[A].Ba;E.md=x.wa*a;E.nd=x.xa*a;E.od=x.ya*a;E.pd=x.Ca*b;E.qd=x.Da*b;E.rd=x.Ea*b;var M,N,I;M=e*x.ba+d*x.ca+c*x.da;N=f*x.ba+h*x.ca+l*x.da;I=g*x.ba+k*x.ca+m*x.da;E.fd=M;E.gd=N;E.hd=I;var O,ha,qa;O=n*x.fa+q*x.ga+p*x.ha;ha=r*x.fa+t*x.ga+C*x.ha;qa=w*x.fa+B*x.ga+u*x.ha;E.jd=O;E.kd=ha;E.ld=qa;E.mass=E.md*x.wa+E.nd*x.xa+E.od*x.ya+(E.pd*x.Ca+E.qd*x.Da+E.rd*x.Ea)+(E.fd*x.ba+E.gd*x.ca+E.hd*x.da)+(E.jd*x.fa+E.kd*x.ga+E.ld*x.ha);E.mass&&(E.mass=1/E.mass)}for(var ga,pa,ya,Aa,ka,Ha,U,R,Ua,Ma,Qa,bb,Oa=bb=Qa=Ma=Ua=R=U=Ha=ka=Aa=ya=pa=ga=0,Ba=this.info.La;Oa<Ba;){var pb=Oa++,H=this.info.rows[pb],Pa=this.Yb[pb],ba=H.va,Q=H.Ba,P=0,P=P+(ga*Q.wa+pa*Q.xa+ya*Q.ya),P=P-(Aa*Q.Ca+ka*Q.Da+Ha*Q.Ea),P=P+(U*Q.ba+R*Q.ca+Ua*Q.da),P=P-(Ma*Q.fa+Qa*Q.ga+bb*Q.ha),wa=(H.Ga*F.positionNgsBaumgarte-P)*Pa.mass,ta=ba.ub;ba.ub+=wa;ba.ub<H.Ja?ba.ub=H.Ja:ba.ub>H.Ia&&(ba.ub=H.Ia);wa=ba.ub-ta;ga+=Pa.md*wa;pa+=Pa.nd*wa;ya+=Pa.od*wa;Aa+=Pa.pd*-wa;ka+=Pa.qd*-wa;Ha+=Pa.rd*-wa;U+=Pa.fd*wa;R+=Pa.gd*wa;Ua+=Pa.hd*wa;Ma+=Pa.jd*-wa;Qa+=Pa.kd*-wa;bb+=Pa.ld*-wa}var W=this.C;W.a.v+=ga;W.a.A+=pa;W.a.B+=ya;var oa=this.D;oa.a.v+=Aa;oa.a.A+=ka;oa.a.B+=Ha;var y=this.C,Ga=Math.sqrt(U*U+R*R+Ua*Ua),ca=.5*Ga,Ca,xa;if(.5>ca){var Da=ca*ca;Ca=.5*(1-.16666666666666666*Da+Da*Da*.008333333333333333);xa=1-.5*Da+Da*Da*.041666666666666664}else Ca=Math.sin(ca)/Ga,xa=Math.cos(ca);var Ra,la;Ra=U*Ca;la=R*Ca;var Z,Ea;Z=Ua*Ca;Ea=xa;var ra,va,J,Ka,Xa=y.a.o,S=y.a.m,Ya=y.a.s,T=Xa+S+Ya,K;0<T?(K=Math.sqrt(T+1),Ka=.5*K,K=.5/K,ra=(y.a.g-y.a.j)*K,va=(y.a.h-y.a.l)*K,J=(y.a.i-y.a.f)*K):Xa>S?Xa>Ya?(K=Math.sqrt(Xa-S-Ya+1),ra=.5*K,K=.5/K,va=(y.a.f+y.a.i)*K,J=(y.a.h+y.a.l)*K,Ka=(y.a.g-y.a.j)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K):S>Ya?(K=Math.sqrt(S-Ya-Xa+1),va=.5*K,K=.5/K,ra=(y.a.f+y.a.i)*K,J=(y.a.j+y.a.g)*K,Ka=(y.a.h-y.a.l)*K):(K=Math.sqrt(Ya-Xa-S+1),J=.5*K,K=.5/K,ra=(y.a.h+y.a.l)*K,va=(y.a.j+y.a.g)*K,Ka=(y.a.i-y.a.f)*K);ra=Ea*ra+Ra*Ka+la*J-Z*va;va=Ea*va-Ra*J+la*Ka+Z*ra;J=Ea*J+Ra*va-la*ra+Z*Ka;Ka=Ea*Ka-Ra*ra-la*va-Z*J;var ia=ra*ra+va*va+J*J+Ka*Ka;1E-32<ia&&(ia=1/Math.sqrt(ia));ra*=ia;va*=ia;J*=ia;Ka*=ia;var gb=ra,da=va,sb=J,sa=Ka,fb=2*gb,jb=2*da,Za=2*sb,ma=gb*fb,na=da*jb,Ia=sb*Za,Fa=gb*jb,nb=da*Za,fa=gb*Za,ea=sa*fb,ja=sa*jb,cb=sa*Za;y.a.o=1-na-Ia;y.a.f=Fa-cb;y.a.h=fa+ja;y.a.i=Fa+cb;y.a.m=1-ma-Ia;y.a.j=nb-ea;y.a.l=fa-ja;y.a.g=nb+ea;y.a.s=1-ma-na;var za,tb,Ta,qb,rb,vb,Wa,yb,ub;za=y.a.o*y.Ra+y.a.f*y.Ua+y.a.h*y.Xa;tb=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;Ta=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;qb=y.a.i*y.Ra+y.a.m*y.Ua+y.a.j*y.Xa;rb=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;vb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;Wa=y.a.l*y.Ra+y.a.g*y.Ua+y.a.s*y.Xa;yb=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;ub=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;y.P=za;y.R=tb;y.S=Ta;y.T=qb;y.U=rb;y.V=vb;y.W=Wa;y.X=yb;y.Y=ub;var $a,ua,wb,G,ob,db,Fb,ab,hb;$a=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;ua=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;wb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;G=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;ob=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;db=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;Fb=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;ab=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;hb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=$a;y.R=ua;y.S=wb;y.T=G;y.U=ob;y.V=db;y.W=Fb;y.X=ab;y.Y=hb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var z=this.D,Db=Math.sqrt(Ma*Ma+Qa*Qa+bb*bb),Gb=.5*Db,Ib,Eb;if(.5>Gb){var Na=Gb*Gb;Ib=.5*(1-.16666666666666666*Na+Na*Na*.008333333333333333);Eb=1-.5*Na+Na*Na*.041666666666666664}else Ib=Math.sin(Gb)/Db,Eb=Math.cos(Gb);var mb,xb;mb=Ma*Ib;xb=Qa*Ib;var zb,eb;zb=bb*Ib;eb=Eb;var Y,La,kb,Sa,ib=z.a.o,Ja=z.a.m,Hb=z.a.s,Mb=ib+Ja+Hb,X;0<Mb?(X=Math.sqrt(Mb+1),Sa=.5*X,X=.5/X,Y=(z.a.g-z.a.j)*X,La=(z.a.h-z.a.l)*X,kb=(z.a.i-z.a.f)*X):ib>Ja?ib>Hb?(X=Math.sqrt(ib-Ja-Hb+1),Y=.5*X,X=.5/X,La=(z.a.f+z.a.i)*X,kb=(z.a.h+z.a.l)*X,Sa=(z.a.g-z.a.j)*X):(X=Math.sqrt(Hb-ib-Ja+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,La=(z.a.j+z.a.g)*X,Sa=(z.a.i-z.a.f)*X):Ja>Hb?(X=Math.sqrt(Ja-Hb-ib+1),La=.5*X,X=.5/X,Y=(z.a.f+z.a.i)*X,kb=(z.a.j+z.a.g)*X,Sa=(z.a.h-z.a.l)*X):(X=Math.sqrt(Hb-ib-Ja+1),kb=.5*X,X=.5/X,Y=(z.a.h+z.a.l)*X,La=(z.a.j+z.a.g)*X,Sa=(z.a.i-z.a.f)*X);Y=eb*Y+mb*Sa+xb*kb-zb*La;La=eb*La-mb*kb+xb*Sa+zb*Y;kb=eb*kb+mb*La-xb*Y+zb*Sa;Sa=eb*Sa-mb*Y-xb*La-zb*kb;var Cb=Y*Y+La*La+kb*kb+Sa*Sa;1E-32<Cb&&(Cb=1/Math.sqrt(Cb));Y*=Cb;La*=Cb;kb*=Cb;Sa*=Cb;var Lb=Y,Nb=La,Pb=kb,Ob=Sa,Ub=2*Lb,Tb=2*Nb,Zb=2*Pb,bc=Lb*Ub,dc=Nb*Tb,jc=Pb*Zb,ec=Lb*Tb,kc=Nb*Zb,ac=Lb*Zb,Wb=Ob*Ub,Xb=Ob*Tb,Rb=Ob*Zb;z.a.o=1-dc-jc;z.a.f=ec-Rb;z.a.h=ac+Xb;z.a.i=ec+Rb;z.a.m=1-bc-jc;z.a.j=kc-Wb;z.a.l=ac-Xb;z.a.g=kc+Wb;z.a.s=1-bc-dc;var hc,Sb,Qb,Yb,ic,Kb,$b,lb,fc;hc=z.a.o*z.Ra+z.a.f*z.Ua+z.a.h*z.Xa;Sb=z.a.o*z.Sa+z.a.f*z.Va+z.a.h*z.Ya;Qb=z.a.o*z.Ta+z.a.f*z.Wa+z.a.h*z.Za;Yb=z.a.i*z.Ra+z.a.m*z.Ua+z.a.j*z.Xa;ic=z.a.i*z.Sa+z.a.m*z.Va+z.a.j*z.Ya;Kb=z.a.i*z.Ta+z.a.m*z.Wa+z.a.j*z.Za;$b=z.a.l*z.Ra+z.a.g*z.Ua+z.a.s*z.Xa;lb=z.a.l*z.Sa+z.a.g*z.Va+z.a.s*z.Ya;fc=z.a.l*z.Ta+z.a.g*z.Wa+z.a.s*z.Za;z.P=hc;z.R=Sb;z.S=Qb;z.T=Yb;z.U=ic;z.V=Kb;z.W=$b;z.X=lb;z.Y=fc;var lc,nc,oc,mc,pc,wc,yc,sc,xc;lc=z.P*z.a.o+z.R*z.a.f+z.S*z.a.h;nc=z.P*z.a.i+z.R*z.a.m+z.S*z.a.j;oc=z.P*z.a.l+z.R*z.a.g+z.S*z.a.s;mc=z.T*z.a.o+z.U*z.a.f+z.V*z.a.h;pc=z.T*z.a.i+z.U*z.a.m+z.V*z.a.j;wc=z.T*z.a.l+z.U*z.a.g+z.V*z.a.s;yc=z.W*z.a.o+z.X*z.a.f+z.Y*z.a.h;sc=z.W*z.a.i+z.X*z.a.m+z.Y*z.a.j;xc=z.W*z.a.l+z.X*z.a.g+z.Y*z.a.s;z.P=lc;z.R=nc;z.S=oc;z.T=mc;z.U=pc;z.V=wc;z.W=yc;z.X=sc;z.Y=xc;z.P*=z.N.x;z.R*=z.N.x;z.S*=z.N.x;z.T*=z.N.y;z.U*=z.N.y;z.V*=z.N.y;z.W*=z.N.z;z.X*=z.N.z;z.Y*=z.N.z},$e:function(){this.$.ed();this.$.Cl()},ra:dc});Ne.aa=!0;Ne.prototype={ra:Ne};C.aa=!0;C.prototype={Hl:function(a){switch(this.Xb){case 1:this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=this.kb=this.jb=this.ib=this.gb=this.fb=this.eb=0;break;case 0:case 2:var b,e,d,c,f;b=this.eb*a;e=this.fb*a;d=this.gb*a;c=this.ib*a;f=this.jb*a;a=this.kb*a;var h=b*b+e*e+d*d,l=c*c+f*f+a*a;if(h||l){h>F.maxTranslationPerStep*F.maxTranslationPerStep&&(h=F.maxTranslationPerStep/Math.sqrt(h),this.eb*=h,this.fb*=h,this.gb*=h,b*=h,e*=h,d*=h);l>F.maxRotationPerStep*F.maxRotationPerStep&&(l=F.maxRotationPerStep/Math.sqrt(l),this.ib*=l,this.jb*=l,this.kb*=l,c*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(c*c+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));c*=b;f*=b;a*=b;b=e;e=this.a.o;d=this.a.m;var l=this.a.s,h=e+d+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+c*e+f*d-a*l;l=b*l-c*d+f*e+a*h;d=b*d+c*l-f*h+a*e;e=b*e-c*h-f*l-a*d;a=h*h+l*l+d*d+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;d*=a;b=e*a;var k=2*f;g=2*h;e=2*d;a=f*k;c=h*g;d*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-c-d;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-d;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-c;f=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=f;this.R=a;this.S=c;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;f=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;c=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=f;this.R=a;this.S=c;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}}},Rm:function(){var a=this.Oc*this.Oc+this.Pc*this.Pc+this.Qc*this.Qc;if(this.Sc*this.Sc+this.Tc*this.Tc+this.Uc*this.Uc||a)switch(this.Xb){case 1:this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;break;case 0:case 2:var b,e,d,c,f;b=this.Sc;e=this.Tc;d=this.Uc;a=this.Oc;c=this.Pc;f=this.Qc;this.Qc=this.Pc=this.Oc=this.Uc=this.Tc=this.Sc=0;this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(a*a+c*c+f*f);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));a*=b;c*=b;f*=b;b=e;var h,l;e=this.a.o;d=this.a.m;l=this.a.s;h=e+d+l;var g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+a*e+c*d-f*l;l=b*l-a*d+c*e+f*h;d=b*d+a*l-c*h+f*e;e=b*e-a*h-c*l-f*d;c=h*h+l*l+d*d+e*e;1E-32<c&&(c=1/Math.sqrt(c));a=h*c;h=l*c;d*=c;b=e*c;var k=2*a;g=2*h;e=2*d;c=a*k;f=h*g;d*=e;l=a*g;h*=e;a*=e;k*=b;g*=b;b*=e;this.a.o=1-f-d;this.a.f=l-b;this.a.h=a+g;this.a.i=l+b;this.a.m=1-c-d;this.a.j=h-k;this.a.l=a-g;this.a.g=h+k;this.a.s=1-c-f;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;l=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=c;this.S=f;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;c=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=c;this.S=f;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}},wj:function(){for(var a,b,e,d,c,f,h,l,g,k=g=l=h=f=c=d=e=b=a=0,m=this.Ac;null!=m;){var n=m.M,q=m.Jb;q.Be();var p=m.jk*q.nf,r,t,C,w,B,u,D,F;r=m.ia.o*q.cg+m.ia.f*q.fg+m.ia.h*q.ig;t=m.ia.o*q.dg+m.ia.f*q.gg+m.ia.h*q.jg;C=m.ia.o*q.eg+m.ia.f*q.hg+m.ia.h*q.kg;w=m.ia.i*q.cg+m.ia.m*q.fg+m.ia.j*q.ig;B=m.ia.i*q.dg+m.ia.m*q.gg+m.ia.j*q.jg;u=m.ia.i*q.eg+m.ia.m*q.hg+m.ia.j*q.kg;D=m.ia.l*q.cg+m.ia.g*q.fg+m.ia.s*q.ig;F=m.ia.l*q.dg+m.ia.g*q.gg+m.ia.s*q.jg;var q=m.ia.l*q.eg+m.ia.g*q.hg+m.ia.s*q.kg,A,E,x,L,N,I;A=r*m.ia.o+t*m.ia.f+C*m.ia.h;E=r*m.ia.i+t*m.ia.m+C*m.ia.j;C=r*m.ia.l+t*m.ia.g+C*m.ia.s;x=w*m.ia.o+B*m.ia.f+u*m.ia.h;L=w*m.ia.i+B*m.ia.m+u*m.ia.j;u=w*m.ia.l+B*m.ia.g+u*m.ia.s;N=D*m.ia.o+F*m.ia.f+q*m.ia.h;I=D*m.ia.i+F*m.ia.m+q*m.ia.j;q=D*m.ia.l+F*m.ia.g+q*m.ia.s;r=A;t=E;w=x;B=L;D=N;F=I;r*=p;t*=p;C*=p;w*=p;B*=p;u*=p;D*=p;F*=p;var q=q*p,M,O,ha;x=m.ia.v*m.ia.v;L=m.ia.A*m.ia.A;M=m.ia.B*m.ia.B;N=-m.ia.v*m.ia.A;I=-m.ia.A*m.ia.B;ha=-m.ia.B*m.ia.v;m=L+M;A=N;E=ha;M=x+M;O=I;x+=L;r+=m*p;t+=A*p;C+=E*p;w+=N*p;B+=M*p;u+=O*p;D+=ha*p;F+=I*p;q+=x*p;k+=p;a+=r;b+=t;e+=C;d+=w;c+=B;f+=u;h+=D;l+=F;g+=q;m=n}this.Lc=k;this.wd=a;this.xd=b;this.yd=e;this.zd=d;this.Ad=c;this.Bd=f;this.Cd=h;this.Dd=l;this.Ed=g;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Lc&&0<a&&0==this.Xb){this.$a=1/this.Lc;a=this.Ad*this.Ed-this.Bd*this.Dd;b=this.zd*this.Ed-this.Bd*this.Cd;e=this.zd*this.Dd-this.Ad*this.Cd;d=this.xd*this.Ed-this.yd*this.Dd;c=this.wd*this.Ed-this.yd*this.Cd;f=this.wd*this.Dd-this.xd*this.Cd;h=this.xd*this.Bd-this.yd*this.Ad;l=this.wd*this.Bd-this.yd*this.zd;g=this.wd*this.Ad-this.xd*this.zd;k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-d*k;this.Ta=h*k;this.Ua=-b*k;this.Va=c*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.Zh=this.Ra;this.$h=this.Sa;this.ai=this.Ta;this.bi=this.Ua;this.ci=this.Va;this.di=this.Wa;this.ei=this.Xa;this.fi=this.Ya;this.gi=this.Za;this.Ra=this.Zh*this.N.x;this.Sa=this.$h*this.N.x;this.Ta=this.ai*this.N.x;this.Ua=this.bi*this.N.y;this.Va=this.ci*this.N.y;this.Wa=this.di*this.N.y;this.Xa=this.ei*this.N.z;this.Ya=this.fi*this.N.z;this.Za=this.gi*this.N.z}else this.gi=this.fi=this.ei=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Xb&&(this.Xb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},Xl:function(){var a=new t;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},Zl:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},tm:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.qa;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){var b=a.M,e=a.qa,d=a.ia,c=this.qa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;c=a.u.oa;d=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,c=a.a.A-a.qa.A,d=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}this.Gb=!1;this.yb=0},ym:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.qa;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Ac;null!=b;){e=b.M;a=b.qa;var d=b.ia,c=this.qa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;a=b.a;d=b.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;b.Jb.Mb(b.u,b.qa);a=b.u.na;c=b.u.oa;d=b.u.pa;f=b.u.ka;h=b.u.la;l=b.u.ma;b.Jb.Mb(b.u,b.a);b.u.na=a<b.u.na?a:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.pa=d<b.u.pa?d:b.u.pa;b.u.ka=f>b.u.ka?f:b.u.ka;b.u.la=h>b.u.la?h:b.u.la;b.u.ma=l>b.u.ma?l:b.u.ma;null!=b.Oa&&(a=b.a.v-b.qa.v,c=b.a.A-b.qa.A,d=b.a.B-b.qa.B,f=b.nc,f.x=a,f.y=c,f.z=d,b.Wb.kc.ec.sd(b.Oa,b.u,b.nc));b=e}this.Gb=!1;this.yb=0},bm:function(){var a=new O;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},gm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},um:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,d,c,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.qa;c=a.ia;d=this.qa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ia;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;d=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,d=a.a.A-a.qa.A,c=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}this.Gb=!1;this.yb=0},vm:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.a.o=e*d;this.a.f=-e*f;this.a.h=c;this.a.i=b*f+d*a*c;this.a.m=b*d-a*c*f;this.a.j=-e*a;this.a.l=a*f-b*d*c;this.a.g=d*a+b*c*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;c=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;f=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;b=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=c;this.S=f;this.T=e;this.U=d;this.V=b;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;c=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;e=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;b=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=c;this.S=f;this.T=e;this.U=d;this.V=b;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;c=this.a;a.v=c.v;a.A=c.A;a.B=c.B;a.o=c.o;a.f=c.f;a.h=c.h;a.i=c.i;a.m=c.m;a.j=c.j;a.l=c.l;a.g=c.g;a.s=c.s;for(a=this.Ac;null!=a;){c=a.M;f=a.qa;d=a.ia;e=this.qa;var k,m,n,q,p;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;f=a.a;d=a.ia;e=this.a;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;a.Jb.Mb(a.u,a.qa);f=a.u.na;e=a.u.oa;d=a.u.pa;b=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=f<a.u.na?f:a.u.na;a.u.oa=e<a.u.oa?e:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=b>a.u.ka?b:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(f=a.a.v-a.qa.v,e=a.a.A-a.qa.A,d=a.a.B-a.qa.B,b=a.nc,b.x=f,b.y=e,b.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=c}this.Gb=!1;this.yb=0},mm:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+d*this.a.l;m=b*this.a.f+e*this.a.m+d*this.a.g;b=b*this.a.h+e*this.a.j+d*this.a.s;e=c*this.a.o+f*this.a.i+h*this.a.l;d=c*this.a.f+f*this.a.m+h*this.a.g;c=c*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=d;this.a.j=c;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;m=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;k=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=c;this.W=f;this.X=h;this.Y=b;l=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;a=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;m=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;k=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;c=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;f=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=c;this.W=f;this.X=h;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;l=this.qa;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Ac;null!=l;){g=l.M;a=l.qa;k=l.ia;m=this.qa;var n,q,p;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;a=l.a;k=l.ia;m=this.a;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;l.Jb.Mb(l.u,l.qa);a=l.u.na;m=l.u.oa;k=l.u.pa;c=l.u.ka;f=l.u.la;h=l.u.ma;l.Jb.Mb(l.u,l.a);l.u.na=a<l.u.na?a:l.u.na;l.u.oa=m<l.u.oa?m:l.u.oa;l.u.pa=k<l.u.pa?k:l.u.pa;l.u.ka=c>l.u.ka?c:l.u.ka;l.u.la=f>l.u.la?f:l.u.la;l.u.ma=h>l.u.ma?h:l.u.ma;null!=l.Oa&&(a=l.a.v-l.qa.v,m=l.a.A-l.qa.A,k=l.a.B-l.qa.B,c=l.nc,c.x=a,c.y=m,c.z=k,l.Wb.kc.ec.sd(l.Oa,l.u,l.nc));l=g}this.Gb=!1;this.yb=0},nm:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);d=l*n;c=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=d*this.a.o+c*this.a.i+g*this.a.l;m=d*this.a.f+c*this.a.m+g*this.a.g;g=d*this.a.h+c*this.a.j+g*this.a.s;d=a*this.a.o+b*this.a.i+f*this.a.l;c=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=d;this.a.m=c;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;h=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;g=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;k=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;m=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;e=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;b=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;f=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;g=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;k=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;m=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;l=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;e=this.qa;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Ac;null!=e;){a=e.M;b=e.qa;h=e.ia;f=this.qa;var q,p,g=f.o*h.o+f.f*h.i+f.h*h.l,k=f.o*h.f+f.f*h.m+f.h*h.g,m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;b=e.a;h=e.ia;f=this.a;g=f.o*h.o+f.f*h.i+f.h*h.l;k=f.o*h.f+f.f*h.m+f.h*h.g;m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;e.Jb.Mb(e.u,e.qa);b=e.u.na;f=e.u.oa;h=e.u.pa;g=e.u.ka;k=e.u.la;m=e.u.ma;e.Jb.Mb(e.u,e.a);e.u.na=b<e.u.na?b:e.u.na;e.u.oa=f<e.u.oa?f:e.u.oa;e.u.pa=h<e.u.pa?h:e.u.pa;e.u.ka=g>e.u.ka?g:e.u.ka;e.u.la=k>e.u.la?k:e.u.la;e.u.ma=m>e.u.ma?m:e.u.ma;null!=e.Oa&&(b=e.a.v-e.qa.v,f=e.a.A-e.qa.A,h=e.a.B-e.qa.B,g=e.nc,g.x=b,g.y=f,g.z=h,e.Wb.kc.ec.sd(e.Oa,e.u,e.nc));e=a}this.Gb=!1;this.yb=0},Ol:function(){var a=new ha,b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},Ql:function(a){var b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},sm:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.a.o=1-g-d;this.a.f=k-c;this.a.h=b+h;this.a.i=k+c;this.a.m=1-a-d;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;g=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;l=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;e=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;b=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=g;this.S=c;this.T=l;this.U=d;this.V=k;this.W=h;this.X=e;this.Y=b;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;c=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;l=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;k=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;e=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=g;this.S=c;this.T=l;this.U=d;this.V=k;this.W=h;this.X=e;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Ac;null!=a;){g=a.M;c=a.qa;d=a.ia;var l=this.qa,m,n,q,p,k=l.o*d.o+l.f*d.i+l.h*d.l,h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;c=a.a;d=a.ia;l=this.a;k=l.o*d.o+l.f*d.i+l.h*d.l;h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;a.Jb.Mb(a.u,a.qa);c=a.u.na;l=a.u.oa;d=a.u.pa;k=a.u.ka;h=a.u.la;e=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=c<a.u.na?c:a.u.na;a.u.oa=l<a.u.oa?l:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=k>a.u.ka?k:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=e>a.u.ma?e:a.u.ma;null!=a.Oa&&(c=a.a.v-a.qa.v,l=a.a.A-a.qa.A,d=a.a.B-a.qa.B,k=a.nc,k.x=c,k.y=l,k.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=g}this.Gb=!1;this.yb=0},hm:function(){var a=this.a,b=new ya;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},km:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},wm:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,d,c,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.qa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Ac;null!=a;){b=a.M;e=a.qa;c=a.ia;d=this.qa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ia;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;d=a.u.oa;c=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.pa=c<a.u.pa?c:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,d=a.a.A-a.qa.A,c=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=d,f.z=c,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}this.Gb=!1;this.yb=0},He:function(){return this.Lc},ce:function(){var a=new O;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed;return a},de:function(a){a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Bf:function(){var a=new Ne;a.mass=this.Lc;var b=a.localInertia;b.e00=this.wd;b.e01=this.xd;b.e02=this.yd;b.e10=this.zd;b.e11=this.Ad;b.e12=this.Bd;b.e20=this.Cd;b.e21=this.Dd;b.e22=this.Ed;return a},Jg:function(a){a.mass=this.Lc;a=a.localInertia;a.e00=this.wd;a.e01=this.xd;a.e02=this.yd;a.e10=this.zd;a.e11=this.Ad;a.e12=this.Bd;a.e20=this.Cd;a.e21=this.Dd;a.e22=this.Ed},Vn:function(a){this.Lc=a.mass;a=a.localInertia;this.wd=a.e00;this.xd=a.e01;this.yd=a.e02;this.zd=a.e10;this.Ad=a.e11;this.Bd=a.e12;this.Cd=a.e20;this.Dd=a.e21;this.Ed=a.e22;a=this.wd*(this.Ad*this.Ed-this.Bd*this.Dd)-this.xd*(this.zd*this.Ed-this.Bd*this.Cd)+this.yd*(this.zd*this.Dd-this.Ad*this.Cd);if(0<this.Lc&&0<a&&0==this.Xb){this.$a=1/this.Lc;a=this.Ad*this.Ed-this.Bd*this.Dd;var b=this.zd*this.Ed-this.Bd*this.Cd,e=this.zd*this.Dd-this.Ad*this.Cd,d=this.xd*this.Ed-this.yd*this.Dd,c=this.wd*this.Ed-this.yd*this.Cd,f=this.wd*this.Dd-this.xd*this.Cd,h=this.xd*this.Bd-this.yd*this.Ad,l=this.wd*this.Bd-this.yd*this.zd,g=this.wd*this.Ad-this.xd*this.zd,k=this.wd*a-this.xd*b+this.yd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Ra=a*k;this.Sa=-d*k;this.Ta=h*k;this.Ua=-b*k;this.Va=c*k;this.Wa=-l*k;this.Xa=e*k;this.Ya=-f*k;this.Za=g*k;this.Zh=this.Ra;this.$h=this.Sa;this.ai=this.Ta;this.bi=this.Ua;this.ci=this.Va;this.di=this.Wa;this.ei=this.Xa;this.fi=this.Ya;this.gi=this.Za;this.Ra=this.Zh*this.N.x;this.Sa=this.$h*this.N.x;this.Ta=this.ai*this.N.x;this.Ua=this.bi*this.N.y;this.Va=this.ci*this.N.y;this.Wa=this.di*this.N.y;this.Xa=this.ei*this.N.z;this.Ya=this.fi*this.N.z;this.Za=this.gi*this.N.z}else this.gi=this.fi=this.ei=this.di=this.ci=this.bi=this.ai=this.$h=this.Zh=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Ra=this.$a=0,0==this.Xb&&(this.Xb=1);a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},Mg:function(){var a=this.N;return new t(a.x,a.y,a.z)},Wn:function(a){var b=this.N;b.x=a.x;b.y=a.y;b.z=a.z;var e,d,c,f,h,l,g;a=this.a.o*this.Ra+this.a.f*this.Ua+this.a.h*this.Xa;b=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;e=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;d=this.a.i*this.Ra+this.a.m*this.Ua+this.a.j*this.Xa;c=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;f=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;h=this.a.l*this.Ra+this.a.g*this.Ua+this.a.s*this.Xa;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;g=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Gb=!1;this.yb=0},Pd:function(){var a=new t;a.x=this.eb;a.y=this.fb;a.z=this.gb;return a},be:function(a){a.x=this.eb;a.y=this.fb;a.z=this.gb},Un:function(a){1==this.Xb?this.gb=this.fb=this.eb=0:(this.eb=a.x,this.fb=a.y,this.gb=a.z);this.Gb=!1;this.yb=0},Cc:function(){var a=new t;a.x=this.ib;a.y=this.jb;a.z=this.kb;return a},Hc:function(a){a.x=this.eb;a.y=this.fb;a.z=this.gb},Qn:function(a){1==this.Xb?this.kb=this.jb=this.ib=0:(this.ib=a.x,this.jb=a.y,this.kb=a.z);this.Gb=!1;this.yb=0},bb:function(a){if(1!=this.Xb){var b,e;b=a.x;e=a.y;a=a.z;this.eb+=b;this.fb+=e;this.gb+=a}this.Gb=!1;this.yb=0},Qa:function(a){if(1!=this.Xb){var b,e;b=a.x;e=a.y;a=a.z;this.ib+=b;this.jb+=e;this.kb+=a}this.Gb=!1;this.yb=0},qc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.eb+=e*this.$a;this.fb+=d*this.$a;this.gb+=a*this.$a;var c,f,h;c=b.x;f=b.y;h=b.z;c-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*d;a=h*e-c*a;c=c*d-f*e;e=this.P*b+this.R*a+this.S*c;d=this.T*b+this.U*a+this.V*c;b=this.W*b+this.X*a+this.Y*c;this.ib+=e;this.jb+=d;this.kb+=b;this.Gb=!1;this.yb=0},rc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.eb+=b*this.$a;this.fb+=e*this.$a;this.gb+=a*this.$a;this.Gb=!1;this.yb=0},Lb:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c;a=this.P*b+this.R*e+this.S*d;c=this.T*b+this.U*e+this.V*d;b=this.W*b+this.X*e+this.Y*d;this.ib+=a;this.jb+=c;this.kb+=b;this.Gb=!1;this.yb=0},lc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.yh+=e;this.zh+=d;this.Ah+=a;var c,f;c=b.x;f=b.y;b=b.z;c-=this.a.v;f-=this.a.A;b-=this.a.B;this.kf+=f*a-b*d;this.lf+=b*e-c*a;this.mf+=c*d-f*e;this.Gb=!1;this.yb=0},mc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.yh+=b;this.zh+=e;this.Ah+=a;this.Gb=!1;this.yb=0},zc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.kf+=b;this.lf+=e;this.mf+=a;this.Gb=!1;this.yb=0},bd:function(){return this.Ug},Tn:function(a){this.Ug=a;this.Gb=!1;this.yb=0},ee:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},fe:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;e-=this.a.v;d-=this.a.A;c-=this.a.B;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},me:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},Ge:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Uh:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d+this.a.v;e=c+this.a.A;a+=this.a.B;d=new t;d.x=b;d.y=e;d.z=a;return d},Vh:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;c=this.a.l*e+this.a.g*d+this.a.s*c;e=a+this.a.v;d=f+this.a.A;c+=this.a.B;b.x=e;b.y=d;b.z=c},xj:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},wl:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;e=this.a.l*e+this.a.g*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Nl:function(){return this.pg},Ng:function(){return this.Ac},Kg:function(){return this.se},ad:function(){return this.Nb},Lg:function(){return this.$g},cd:function(){return this.re},tb:function(a){null==this.Ac?this.Ac=a:(this.ni.M=a,a.ja=this.ni);this.ni=a;this.pg++;a.Wb=this;if(null!=this.kc){var b=this.kc;a.Oa=b.ec.Gh(a,a.u);a.sc=b.Jl++;b.pg++}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.qa,d=a.ia,c=this.qa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;c=a.u.oa;d=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,c=a.a.A-a.qa.A,d=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}},Ln:function(a){var b=a.ja,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ja=b);a==this.Ac&&(this.Ac=this.Ac.M);a==this.ni&&(this.ni=this.ni.ja);a.M=null;a.ja=null;this.pg--;a.Wb=null;if(null!=this.kc){b=this.kc;b.ec.Hh(a.Oa);a.Oa=null;a.sc=-1;for(var d=a.Wb.Nb;null!=d;){var e=d.M,c=d.Ud;if(c.uc==a||c.vc==a){d=d.Mc;d.Gb=!1;d.yb=0;var d=b.wh,f=c.ja,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c==d.vd&&(d.vd=d.vd.M);c==d.qe&&(d.qe=d.qe.ja);c.M=null;c.ja=null;f=c.rb.ja;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.rb==c.C.Nb&&(c.C.Nb=c.C.Nb.M);c.rb==c.C.fc&&(c.C.fc=c.C.fc.ja);c.rb.M=null;c.rb.ja=null;f=c.sb.ja;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ja=f);c.sb==c.D.Nb&&(c.D.Nb=c.D.Nb.M);c.sb==c.D.fc&&(c.D.fc=c.D.fc.ja);c.sb.M=null;c.sb.ja=null;c.C.se--;c.D.se--;c.rb.Mc=null;c.sb.Mc=null;c.rb.Ud=null;c.sb.Ud=null;c.uc=null;c.vc=null;c.C=null;c.D=null;c.ug=!1;c.Li.Je();c.Ka.Je();c.xh=null;f=c.Ke;f.uc=null;f.vc=null;f.C=null;f.D=null;f.aj=null;f.bj=null;c.M=d.bg;d.bg=c;d.ji--}d=e}b.pg--}this.wj();for(a=this.Ac;null!=a;){var b=a.M,e=a.qa,d=a.ia,c=this.qa,l,g,k,m,n,q,p,f=c.o*d.o+c.f*d.i+c.h*d.l,h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ia;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Jb.Mb(a.u,a.qa);e=a.u.na;c=a.u.oa;d=a.u.pa;f=a.u.ka;h=a.u.la;l=a.u.ma;a.Jb.Mb(a.u,a.a);a.u.na=e<a.u.na?e:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.pa=d<a.u.pa?d:a.u.pa;a.u.ka=f>a.u.ka?f:a.u.ka;a.u.la=h>a.u.la?h:a.u.la;a.u.ma=l>a.u.ma?l:a.u.ma;null!=a.Oa&&(e=a.a.v-a.qa.v,c=a.a.A-a.qa.A,d=a.a.B-a.qa.B,f=a.nc,f.x=e,f.y=c,f.z=d,a.Wb.kc.ec.sd(a.Oa,a.u,a.nc));a=b}},lm:function(){return this.Xb},Fm:function(a){this.Xb=a;this.wj()},Hm:function(){this.Gb=!1;this.yb=0},Gm:function(){this.Gb=!0;this.yb=0},Th:function(){return this.yb},Rn:function(a){this.hk=a;this.Gb=!1;this.yb=0},$l:function(){return this.ja},vl:function(){return this.M},ra:C};Yj.aa=!0;Yj.prototype={ra:Yj};Qd.aa=!0;pa.aa=!0;pa.prototype={qc:function(){return this.Fj},me:function(a){this.Fj=a},Hc:function(){return this.Pj},He:function(a){this.Pj=a},zc:function(){var a=this.ia,b=new ya;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Cc:function(a){var b=this.ia;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Pd:function(){var a=this.a,b=new ya;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},be:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Ge:function(a){var b=this.ia;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Wb)for(a=this.Wb,a.wj(),b=a.Ac;null!=b;){var e=b.M,d=b.qa,c=b.ia,f=a.qa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ia;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Jb.Mb(b.u,b.qa);d=b.u.na;f=b.u.oa;c=b.u.pa;h=b.u.ka;l=b.u.la;g=b.u.ma;b.Jb.Mb(b.u,b.a);b.u.na=d<b.u.na?d:b.u.na;b.u.oa=f<b.u.oa?f:b.u.oa;b.u.pa=c<b.u.pa?c:b.u.pa;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;b.u.ma=g>b.u.ma?g:b.u.ma;null!=b.Oa&&(d=b.a.v-b.qa.v,f=b.a.A-b.qa.A,c=b.a.B-b.qa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Wb.kc.ec.sd(b.Oa,b.u,b.nc));b=e}},mc:function(){return this.jk},fe:function(a){this.jk=a;if(null!=this.Wb){a=this.Wb;a.wj();for(var b=a.Ac;null!=b;){var e=b.M,d=b.qa,c=b.ia,f=a.qa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ia;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Jb.Mb(b.u,b.qa);d=b.u.na;f=b.u.oa;c=b.u.pa;h=b.u.ka;l=b.u.la;g=b.u.ma;b.Jb.Mb(b.u,b.a);b.u.na=d<b.u.na?d:b.u.na;b.u.oa=f<b.u.oa?f:b.u.oa;b.u.pa=c<b.u.pa?c:b.u.pa;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;b.u.ma=g>b.u.ma?g:b.u.ma;null!=b.Oa&&(d=b.a.v-b.qa.v,f=b.a.A-b.qa.A,c=b.a.B-b.qa.B,h=b.nc,h.x=d,h.y=f,h.z=c,b.Wb.kc.ec.sd(b.Oa,b.u,b.nc));b=e}}},Qa:function(){return this.u.clone()},bb:function(a){a.Zd(this.u)},rc:function(){return this.Jb},ad:function(){return this.Wb},tb:function(){return this.Aj},ce:function(a){this.Aj=a},Lb:function(){return this.Bj},de:function(a){this.Bj=a},lc:function(){return this.Cj},ee:function(a){this.Cj=a},cd:function(){return this.ja},bd:function(){return this.M},ra:pa};Ng.aa=!0;Ng.prototype={ra:Ng};String.prototype.ra=String;String.aa=!0;Array.aa=!0;Date.prototype.ra=Date;Date.aa=["Date"];var nl={},ll={},ml=Number,kl=Boolean,ol={},pl={};bc.rc={}.toString;Hd.Mg=1;Hd.Ng=2;Hd.BRUTE_FORCE=1;Hd.BVH=2;Bc.nm=0;Bc.Lg=1;Bc.xj=2;Bc.Uh=3;Bc.Th=4;Bc.Vh=5;Bc.SPHERE=0;Bc.BOX=1;Bc.CYLINDER=2;Bc.CONE=3;Bc.CAPSULE=4;Bc.CONVEX_HULL=5;od.Cc=0;t.numCreations=0;F.defaultFriction=.2;F.defaultRestitution=.2;F.defaultDensity=1;F.defaultCollisionGroup=1;F.defaultCollisionMask=1;F.maxTranslationPerStep=20;F.maxRotationPerStep=3.14159265358979;F.bvhProxyPadding=.1;F.bvhIncrementalCollisionThreshold=.45;F.defaultGJKMargin=.05;F.enableGJKCaching=!0;F.maxEPAVertices=128;F.maxEPAPolyhedronFaces=128;F.contactEnableBounceThreshold=.5;F.velocityBaumgarte=.2;F.positionSplitImpulseBaumgarte=.4;F.positionNgsBaumgarte=1;F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;F.defaultContactPositionCorrectionAlgorithm=0;F.alternativeContactPositionCorrectionAlgorithm=1;F.contactPersistenceThreshold=.05;F.maxManifoldPoints=4;F.defaultJointConstraintSolverType=0;F.defaultJointPositionCorrectionAlgorithm=0;F.jointWarmStartingFactorForBaungarte=.8;F.jointWarmStartingFactor=.95;F.minSpringDamperDampingRatio=1E-6;F.minRagdollMaxSwingAngle=1E-6;F.maxJacobianRows=6;F.directMlcpSolverEps=1E-9;F.islandInitialRigidBodyArraySize=128;F.islandInitialConstraintArraySize=128;F.sleepingVelocityThreshold=.2;F.sleepingAngularVelocityThreshold=.5;F.sleepingTimeThreshold=1;F.disableSleeping=!1;F.linearSlop=.005;F.angularSlop=.017453292519943278;Pb.Qa=new Pb;lc.vm=0;lc.$l=1;lc.Zl=2;lc.Xl=257;lc.Ql=258;lc.Ol=259;lc.SUCCEEDED=0;lc.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;lc.GJK_DID_NOT_CONVERGE=2;lc.EPA_FAILED_TO_INIT=257;lc.EPA_FAILED_TO_ADD_VERTEX=258;lc.EPA_DID_NOT_CONVERGE=259;O.numCreations=0;M.numCreations=0;qa.POSITIVE_INFINITY=1/0;qa.NEGATIVE_INFINITY=-1/0;qa.PI=3.14159265358979;qa.TWO_PI=6.28318530717958;qa.HALF_PI=1.570796326794895;qa.TO_RADIANS=.017453292519943278;qa.TO_DEGREES=57.29577951308238;ha.numCreations=0;Fb.Bf=8;Fb.Jg=4;Fb.He=8;Rc.broadPhaseCollisionTime=0;Rc.narrowPhaseCollisionTime=0;Rc.dynamicsTime=0;Rc.totalTime=0;ec.Kg=0;ec.tm=1;ec.hm=2;ec.BAUMGARTE=0;ec.SPLIT_IMPULSE=1;ec.NGS=2;dd.Ge=1;dd.me=2;nc.sm=0;nc.mm=1;nc.wl=2;nc.km=3;nc.wm=4;nc.lm=5;nc.SPHERICAL=0;nc.REVOLUTE=1;nc.CYLINDRICAL=2;nc.PRISMATIC=3;nc.UNIVERSAL=4;nc.RAGDOLL=5;pe.bm=0;pe.vl=1;pe.ITERATIVE=0;pe.DIRECT=1;Qd.Nl=0;Qd.um=1;Qd.gm=2;Qd.DYNAMIC=0;Qd.STATIC=1;Qd.KINEMATIC=2;window.OIMO={};window.OIMO.BroadPhase=Ua;Ua.prototype.createProxy=Ua.prototype.Gh;Ua.prototype.destroyProxy=Ua.prototype.Hh;Ua.prototype.moveProxy=Ua.prototype.sd;Ua.prototype.isOverlapping=Ua.prototype.Lb;Ua.prototype.collectPairs=Ua.prototype.si;Ua.prototype.getProxyPairList=Ua.prototype.Qa;Ua.prototype.isIncremental=Ua.prototype.tb;Ua.prototype.getTestCount=Ua.prototype.bb;Ua.prototype.rayCast=Ua.prototype.Sd;Ua.prototype.convexCast=Ua.prototype.rf;Ua.prototype.aabbTest=Ua.prototype.eh;window.OIMO.Geometry=Ub;Ub.prototype.getType=Ub.prototype.bb;Ub.prototype.getVolume=Ub.prototype.Qa;Ub.prototype.rayCast=Ub.prototype.Sd;window.OIMO.ConvexGeometry=bb;bb.prototype.getGjkMergin=bb.prototype.gn;bb.prototype.setGjkMergin=bb.prototype.Jn;bb.prototype.computeLocalSupportingVertex=bb.prototype.Ld;bb.prototype.rayCast=bb.prototype.Sd;window.OIMO.BroadPhaseProxyCallback=wc;wc.prototype.process=wc.prototype.td;window.OIMO.BroadPhaseType=Hd;window.OIMO.Proxy=pc;pc.prototype.getId=pc.prototype.tb;pc.prototype.getFatAabb=pc.prototype.Qa;pc.prototype.getFatAabbTo=pc.prototype.bb;window.OIMO.ProxyPair=Kc;Kc.prototype.getProxy1=Kc.prototype.Qa;Kc.prototype.getProxy2=Kc.prototype.bb;Kc.prototype.getNext=Kc.prototype.tb;window.OIMO.BruteForceBroadPhase=ub;ub.prototype.createProxy=ub.prototype.Gh;ub.prototype.destroyProxy=ub.prototype.Hh;ub.prototype.moveProxy=ub.prototype.sd;ub.prototype.collectPairs=ub.prototype.si;ub.prototype.rayCast=ub.prototype.Sd;ub.prototype.convexCast=ub.prototype.rf;ub.prototype.aabbTest=ub.prototype.eh;window.OIMO.BvhBroadPhase=fc;fc.prototype.createProxy=fc.prototype.Gh;fc.prototype.destroyProxy=fc.prototype.Hh;fc.prototype.moveProxy=fc.prototype.sd;fc.prototype.collectPairs=fc.prototype.si;fc.prototype.rayCast=fc.prototype.Sd;fc.prototype.convexCast=fc.prototype.rf;fc.prototype.aabbTest=fc.prototype.eh;fc.prototype.getTreeBalance=fc.prototype.wn;window.OIMO.Aabb=Aa;Aa.prototype.init=Aa.prototype.Aa;Aa.prototype.getMin=Aa.prototype.Hc;Aa.prototype.getMinTo=Aa.prototype.ad;Aa.prototype.setMin=Aa.prototype.Pd;Aa.prototype.getMax=Aa.prototype.zc;Aa.prototype.getMaxTo=Aa.prototype.Cc;Aa.prototype.setMax=Aa.prototype.cd;Aa.prototype.getCenter=Aa.prototype.tb;Aa.prototype.getCenterTo=Aa.prototype.Lb;Aa.prototype.getExtents=Aa.prototype.lc;Aa.prototype.getExtentsTo=Aa.prototype.mc;Aa.prototype.combine=Aa.prototype.Qa;Aa.prototype.combined=Aa.prototype.bb;Aa.prototype.overlap=Aa.prototype.bd;Aa.prototype.getIntersection=Aa.prototype.qc;Aa.prototype.getIntersectionTo=Aa.prototype.rc;Aa.prototype.copyFrom=Aa.prototype.Zd;Aa.prototype.clone=Aa.prototype.clone;window.OIMO.BoxGeometry=id;id.prototype.getHalfExtents=id.prototype.hn;id.prototype.getHalfExtentsTo=id.prototype.jn;id.prototype.computeLocalSupportingVertex=id.prototype.Ld;window.OIMO.CapsuleGeometry=hd;hd.prototype.getRadius=hd.prototype.Jh;hd.prototype.getHalfHeight=hd.prototype.mj;hd.prototype.computeLocalSupportingVertex=hd.prototype.Ld;window.OIMO.ConeGeometry=bd;bd.prototype.getRadius=bd.prototype.Jh;bd.prototype.getHalfHeight=bd.prototype.mj;bd.prototype.computeLocalSupportingVertex=bd.prototype.Ld;window.OIMO.ConvexHullGeometry=pd;pd.prototype.getVertices=pd.prototype.An;pd.prototype.computeLocalSupportingVertex=pd.prototype.Ld;window.OIMO.CylinderGeometry=ad;ad.prototype.getRadius=ad.prototype.Jh;ad.prototype.getHalfHeight=ad.prototype.mj;ad.prototype.computeLocalSupportingVertex=ad.prototype.Ld;window.OIMO.GeometryType=Bc;window.OIMO.RayCastHit=Ed;window.OIMO.SphereGeometry=yd;yd.prototype.getRadius=yd.prototype.Jh;yd.prototype.computeLocalSupportingVertex=yd.prototype.Ld;window.OIMO.CollisionMatrix=Sd;Sd.prototype.getDetector=Sd.prototype.Qa;window.OIMO.DetectorResult=nd;nd.prototype.getMaxDepth=nd.prototype.cm;nd.prototype.clear=nd.prototype.clear;window.OIMO.DetectorResultPoint=lj;window.OIMO.Detector=gd;gd.prototype.detect=gd.prototype.Yl;window.OIMO.CapsuleCapsuleDetector=Gd;window.OIMO.GjkEpaDetector=ee;window.OIMO.SphereBoxDetector=xd;window.OIMO.SphereCapsuleDetector=Nd;window.OIMO.SphereSphereDetector=Te;window.OIMO.Vec3=t;t.prototype.init=t.prototype.Aa;t.prototype.zero=t.prototype.Z;t.prototype.add=t.prototype.bd;t.prototype.addScaled=t.prototype.Qa;t.prototype.sub=t.prototype.me;t.prototype.scale=t.prototype.ee;t.prototype.scale3=t.prototype.He;t.prototype.dot=t.prototype.Pd;t.prototype.cross=t.prototype.tb;t.prototype.addEq=t.prototype.cd;t.prototype.addScaledEq=t.prototype.bb;t.prototype.subEq=t.prototype.Ge;t.prototype.scaleEq=t.prototype.fe;t.prototype.scale3Eq=t.prototype.Bf;t.prototype.crossEq=t.prototype.Lb;t.prototype.mulMat3=t.prototype.lc;t.prototype.mulMat4=t.prototype.qc;t.prototype.mulTransform=t.prototype.zc;t.prototype.mulMat3Eq=t.prototype.mc;t.prototype.mulMat4Eq=t.prototype.rc;t.prototype.mulTransformEq=t.prototype.Cc;t.prototype.length=t.prototype.length;t.prototype.lengthSq=t.prototype.be;t.prototype.normalized=t.prototype.de;t.prototype.normalize=t.prototype.ce;t.prototype.negate=t.prototype.Hc;t.prototype.negateEq=t.prototype.ad;t.prototype.copyFrom=t.prototype.Zd;t.prototype.clone=t.prototype.clone;t.prototype.toString=t.prototype.toString;window.OIMO.Transform=ya;ya.prototype.identity=ya.prototype.Mf;ya.prototype.getPosition=ya.prototype.tb;ya.prototype.getPositionTo=ya.prototype.Lb;ya.prototype.setPosition=ya.prototype.zc;ya.prototype.translate=ya.prototype.Hc;ya.prototype.getRotation=ya.prototype.lc;ya.prototype.getRotationTo=ya.prototype.mc;ya.prototype.setRotation=ya.prototype.Cc;ya.prototype.rotate=ya.prototype.qc;ya.prototype.getOrientation=ya.prototype.Qa;ya.prototype.getOrientationTo=ya.prototype.bb;ya.prototype.setOrientation=ya.prototype.rc;ya.prototype.clone=ya.prototype.clone;ya.prototype.copyFrom=ya.prototype.Zd;window.OIMO.Setting=F;window.OIMO.GjkEpa=Pb;Pb.prototype.computeClosestPoints=Pb.prototype.Qa;Pb.prototype.computeDistance=Pb.prototype.bb;Pb.prototype.convexCast=Pb.prototype.rf;Pb.prototype.rayCast=Pb.prototype.Sd;Pb.getInstance=Pb.ad;window.OIMO.GjkEpaResultState=lc;window.OIMO.SimplexUtil=fd;fd.projectOrigin2=fd.bd;fd.projectOrigin3=fd.cd;fd.projectOrigin4=fd.Pd;window.OIMO.Mat3=O;O.prototype.init=O.prototype.Aa;O.prototype.identity=O.prototype.Mf;O.prototype.add=O.prototype.zc;O.prototype.sub=O.prototype.Kg;O.prototype.scale=O.prototype.Bf;O.prototype.mul=O.prototype.de;O.prototype.addEq=O.prototype.Cc;O.prototype.subEq=O.prototype.Lg;O.prototype.scaleEq=O.prototype.Jg;O.prototype.mulEq=O.prototype.ee;O.prototype.prependScale=O.prototype.Ge;O.prototype.appendScale=O.prototype.bd;O.prototype.prependRotation=O.prototype.fe;O.prototype.appendRotation=O.prototype.Hc;O.prototype.prependScaleEq=O.prototype.He;O.prototype.appendScaleEq=O.prototype.cd;O.prototype.prependRotationEq=O.prototype.me;O.prototype.appendRotationEq=O.prototype.ad;O.prototype.transpose=O.prototype.Th;O.prototype.transposeEq=O.prototype.Uh;O.prototype.determinant=O.prototype.Pd;O.prototype.trace=O.prototype.Ng;O.prototype.inverse=O.prototype.be;O.prototype.inverseEq=O.prototype.ce;O.prototype.toArray=O.prototype.Mg;O.prototype.copyFrom=O.prototype.Zd;O.prototype.clone=O.prototype.clone;O.prototype.fromQuat=O.prototype.tb;O.prototype.toQuat=O.prototype.xj;O.prototype.fromEulerXyz=O.prototype.bb;O.prototype.toEulerXyz=O.prototype.Vh;O.prototype.getRow=O.prototype.qc;O.prototype.getCol=O.prototype.lc;O.prototype.getRowTo=O.prototype.rc;O.prototype.getColTo=O.prototype.mc;O.prototype.fromRows=O.prototype.Lb;O.prototype.fromCols=O.prototype.Qa;O.prototype.toString=O.prototype.toString;window.OIMO.Mat4=M;M.prototype.init=M.prototype.Aa;M.prototype.identity=M.prototype.Mf;M.prototype.add=M.prototype.lc;M.prototype.sub=M.prototype.Bf;M.prototype.scale=M.prototype.Ge;M.prototype.mul=M.prototype.Pd;M.prototype.addEq=M.prototype.mc;M.prototype.subEq=M.prototype.Jg;M.prototype.scaleEq=M.prototype.He;M.prototype.mulEq=M.prototype.be;M.prototype.prependScale=M.prototype.fe;M.prototype.appendScale=M.prototype.zc;M.prototype.prependRotation=M.prototype.de;M.prototype.appendRotation=M.prototype.qc;M.prototype.prependTranslation=M.prototype.Uh;M.prototype.appendTranslation=M.prototype.Qa;M.prototype.prependScaleEq=M.prototype.me;M.prototype.appendScaleEq=M.prototype.Cc;M.prototype.prependRotationEq=M.prototype.ee;M.prototype.appendRotationEq=M.prototype.rc;M.prototype.prependTranslationEq=M.prototype.Vh;M.prototype.appendTranslationEq=M.prototype.bb;M.prototype.transpose=M.prototype.Mg;M.prototype.transposeEq=M.prototype.Ng;M.prototype.determinant=M.prototype.Hc;M.prototype.trace=M.prototype.Lg;M.prototype.inverse=M.prototype.bd;M.prototype.inverseEq=M.prototype.cd;M.prototype.lookAt=M.prototype.Lb;M.prototype.perspective=M.prototype.ce;M.prototype.ortho=M.prototype.Th;M.prototype.toArray=M.prototype.Kg;M.prototype.copyFrom=M.prototype.Zd;M.prototype.fromMat3=M.prototype.ad;M.prototype.fromTransform=M.prototype.tb;M.prototype.clone=M.prototype.clone;M.prototype.toString=M.prototype.toString;window.OIMO.MathUtil=qa;qa.abs=qa.abs;qa.sin=qa.sin;qa.cos=qa.cos;qa.tan=qa.tan;qa.asin=qa.asin;qa.acos=qa.acos;qa.atan=qa.atan;qa.safeAsin=qa.fe;qa.safeAcos=qa.ee;qa.atan2=qa.atan2;qa.sqrt=qa.sqrt;qa.clamp=qa.zc;qa.rand=qa.be;qa.randIn=qa.ce;qa.randVec3In=qa.de;window.OIMO.Pool=Ib;Ib.prototype.vec3=Ib.prototype.zc;Ib.prototype.mat3=Ib.prototype.mc;Ib.prototype.mat4=Ib.prototype.qc;Ib.prototype.quat=Ib.prototype.rc;Ib.prototype.dispose=Ib.prototype.Qa;Ib.prototype.disposeVec3=Ib.prototype.lc;Ib.prototype.disposeMat3=Ib.prototype.bb;Ib.prototype.disposeMat4=Ib.prototype.tb;Ib.prototype.disposeQuat=Ib.prototype.Lb;window.OIMO.Quat=ha;ha.prototype.identity=ha.prototype.Mf;ha.prototype.init=ha.prototype.Aa;ha.prototype.add=ha.prototype.Qa;ha.prototype.sub=ha.prototype.Cc;ha.prototype.scale=ha.prototype.rc;ha.prototype.addEq=ha.prototype.bb;ha.prototype.subEq=ha.prototype.Hc;ha.prototype.scaleEq=ha.prototype.zc;ha.prototype.length=ha.prototype.length;ha.prototype.lengthSq=ha.prototype.lc;ha.prototype.dot=ha.prototype.tb;ha.prototype.normalized=ha.prototype.qc;ha.prototype.normalize=ha.prototype.mc;ha.prototype.setArc=ha.prototype.ad;ha.prototype.slerp=ha.prototype.bd;ha.prototype.copyFrom=ha.prototype.Zd;ha.prototype.clone=ha.prototype.clone;ha.prototype.fromMat3=ha.prototype.Lb;ha.prototype.toMat3=ha.prototype.cd;ha.prototype.toString=ha.prototype.toString;window.OIMO.Contact=oc;oc.prototype.getShape1=oc.prototype.lc;oc.prototype.getShape2=oc.prototype.mc;oc.prototype.isTouching=oc.prototype.Zj;oc.prototype.getManifold=oc.prototype.bb;oc.prototype.getContactConstraint=oc.prototype.Qa;oc.prototype.getPrev=oc.prototype.Lb;oc.prototype.getNext=oc.prototype.tb;window.OIMO.ContactLink=Cc;Cc.prototype.getContact=Cc.prototype.Qa;Cc.prototype.getOther=Cc.prototype.tb;Cc.prototype.getPrev=Cc.prototype.Lb;Cc.prototype.getNext=Cc.prototype.bb;window.OIMO.ContactManager=Fd;Fd.prototype.getNumContacts=Fd.prototype.bb;Fd.prototype.getContactList=Fd.prototype.Qa;window.OIMO.TimeStep=jj;window.OIMO.World=Ha;Ha.prototype.step=Ha.prototype.be;Ha.prototype.addRigidBody=Ha.prototype.bb;Ha.prototype.removeRigidBody=Ha.prototype.ce;Ha.prototype.addJoint=Ha.prototype.Qa;Ha.prototype.removeJoint=Ha.prototype.sl;Ha.prototype.setDebugDraw=Ha.prototype.de;Ha.prototype.getDebugDraw=Ha.prototype.mc;Ha.prototype.debugDraw=Ha.prototype.tb;Ha.prototype.rayCast=Ha.prototype.Sd;Ha.prototype.convexCast=Ha.prototype.rf;Ha.prototype.aabbTest=Ha.prototype.eh;Ha.prototype.getRigidBodyList=Ha.prototype.cd;Ha.prototype.getJointList=Ha.prototype.rc;Ha.prototype.getBroadPhase=Ha.prototype.Lb;Ha.prototype.getContactManager=Ha.prototype.lc;Ha.prototype.getNumRigidBodies=Ha.prototype.ad;Ha.prototype.getNumJoints=Ha.prototype.Cc;Ha.prototype.getNumShapes=Ha.prototype.Pd;Ha.prototype.getNumIslands=Ha.prototype.zc;Ha.prototype.getNumVelocityIterations=Ha.prototype.bd;Ha.prototype.setNumVelocityIterations=Ha.prototype.me;Ha.prototype.getNumPositionIterations=Ha.prototype.Hc;Ha.prototype.setNumPositionIterations=Ha.prototype.fe;Ha.prototype.getGravity=Ha.prototype.qc;Ha.prototype.setGravity=Ha.prototype.ee;window.OIMO.AabbTestCallback=ed;ed.prototype.process=ed.prototype.td;window.OIMO.ContactCallback=Xc;Xc.prototype.beginContact=Xc.prototype.Qa;Xc.prototype.preSolve=Xc.prototype.tb;Xc.prototype.postSolve=Xc.prototype.$e;Xc.prototype.endContact=Xc.prototype.bb;window.OIMO.RayCastCallback=Mc;Mc.prototype.process=Mc.prototype.td;window.OIMO.RayCastClosest=wd;wd.prototype.clear=wd.prototype.clear;wd.prototype.process=wd.prototype.td;window.OIMO.DebugDraw=Fb;Fb.prototype.aabb=Fb.prototype.Pk;Fb.prototype.ellipse=Fb.prototype.ellipse;Fb.prototype.arc=Fb.prototype.arc;Fb.prototype.cone=Fb.prototype.Tl;Fb.prototype.cylinder=Fb.prototype.Wl;Fb.prototype.capsule=Fb.prototype.Rl;Fb.prototype.sphere=Fb.prototype.Am;Fb.prototype.box=Fb.prototype.Pl;Fb.prototype.rect=Fb.prototype.rect;Fb.prototype.point=Fb.prototype.bb;Fb.prototype.triangle=Fb.prototype.tb;Fb.prototype.line=Fb.prototype.Qa;window.OIMO.DebugDrawStyle=Re;window.OIMO.Performance=Rc;window.OIMO.ConstraintSolver=Gb;Gb.prototype.preSolveVelocity=Gb.prototype.jh;Gb.prototype.warmStart=Gb.prototype.sh;Gb.prototype.solveVelocity=Gb.prototype.nh;Gb.prototype.postSolveVelocity=Gb.prototype.vi;Gb.prototype.preSolvePosition=Gb.prototype.Gg;Gb.prototype.solvePositionSplitImpulse=Gb.prototype.mh;Gb.prototype.solvePositionNgs=Gb.prototype.lh;Gb.prototype.postSolve=Gb.prototype.$e;window.OIMO.PositionCorrectionAlgorithm=ec;window.OIMO.ContactConstraint=md;md.prototype.getShape1=md.prototype.bb;md.prototype.getShape2=md.prototype.tb;md.prototype.getManifold=md.prototype.Qa;md.prototype.isTouching=md.prototype.Zj;window.OIMO.Manifold=yc;yc.prototype.getNormal=yc.prototype.tb;yc.prototype.getNormalTo=yc.prototype.Lb;yc.prototype.getTangent=yc.prototype.qc;yc.prototype.getTangentTo=yc.prototype.rc;yc.prototype.getBinormal=yc.prototype.Qa;yc.prototype.getBinormalTo=yc.prototype.bb;yc.prototype.getPoints=yc.prototype.mc;yc.prototype.getNumPoints=yc.prototype.lc;window.OIMO.ManifoldPoint=Zb;Zb.prototype.getPosition1=Zb.prototype.Lb;Zb.prototype.getPosition1To=Zb.prototype.lc;Zb.prototype.getPosition2=Zb.prototype.mc;Zb.prototype.getPosition2To=Zb.prototype.qc;Zb.prototype.getDepth=Zb.prototype.bb;Zb.prototype.isWarmStarted=Zb.prototype.zc;Zb.prototype.getNormalImpulse=Zb.prototype.tb;Zb.prototype.getTangentImpulse=Zb.prototype.rc;Zb.prototype.getBinormalImpulse=Zb.prototype.Qa;Zb.prototype.isEnabled=Zb.prototype.Cc;window.OIMO.Joint=L;L.prototype.getRigidBody1=L.prototype.me;L.prototype.getRigidBody2=L.prototype.Ge;L.prototype.getType=L.prototype.Jg;L.prototype.getAnchor1=L.prototype.bb;L.prototype.getAnchor2=L.prototype.Lb;L.prototype.getAnchor1To=L.prototype.tb;L.prototype.getAnchor2To=L.prototype.lc;L.prototype.getLocalAnchor1=L.prototype.be;L.prototype.getLocalAnchor2=L.prototype.de;L.prototype.getLocalAnchor1To=L.prototype.ce;L.prototype.getLocalAnchor2To=L.prototype.ee;L.prototype.getBasis1=L.prototype.Cc;L.prototype.getBasis2=L.prototype.ad;L.prototype.getBasis1To=L.prototype.Hc;L.prototype.getBasis2To=L.prototype.bd;L.prototype.getAllowCollision=L.prototype.Qa;L.prototype.setAllowCollision=L.prototype.Kg;L.prototype.getBreakForce=L.prototype.cd;L.prototype.setBreakForce=L.prototype.Lg;L.prototype.getBreakTorque=L.prototype.Pd;L.prototype.setBreakTorque=L.prototype.Mg;L.prototype.getPositionCorrectionAlgorithm=L.prototype.fe;L.prototype.setPositionCorrectionAlgorithm=L.prototype.Ng;L.prototype.getAppliedForce=L.prototype.mc;L.prototype.getAppliedForceTo=L.prototype.qc;L.prototype.getAppliedTorque=L.prototype.rc;L.prototype.getAppliedTorqueTo=L.prototype.zc;L.prototype.getPrev=L.prototype.Bf;L.prototype.getNext=L.prototype.He;window.OIMO.CylindricalJoint=wb;wb.prototype.getAxis1=wb.prototype.vg;wb.prototype.getAxis2=wb.prototype.xg;wb.prototype.getAxis1To=wb.prototype.wg;wb.prototype.getAxis2To=wb.prototype.yg;wb.prototype.getLocalAxis1=wb.prototype.zg;wb.prototype.getLocalAxis2=wb.prototype.Bg;wb.prototype.getLocalAxis1To=wb.prototype.Ag;wb.prototype.getLocalAxis2To=wb.prototype.Cg;wb.prototype.getTranslationalSpringDamper=wb.prototype.vn;wb.prototype.getRotationalSpringDamper=wb.prototype.nn;wb.prototype.getTranslationalLimitMotor=wb.prototype.un;wb.prototype.getRotationalLimitMotor=wb.prototype.mn;wb.prototype.getAngle=wb.prototype.Xk;wb.prototype.getTranslation=wb.prototype.$k;window.OIMO.JointConfig=Fc;window.OIMO.CylindricalJointConfig=te;te.prototype.init=te.prototype.Aa;window.OIMO.JointLink=Oc;Oc.prototype.getContact=Oc.prototype.Qa;Oc.prototype.getOther=Oc.prototype.tb;Oc.prototype.getPrev=Oc.prototype.Lb;Oc.prototype.getNext=Oc.prototype.bb;window.OIMO.JointType=nc;window.OIMO.PrismaticJoint=Nb;Nb.prototype.getAxis1=Nb.prototype.vg;Nb.prototype.getAxis2=Nb.prototype.xg;Nb.prototype.getAxis1To=Nb.prototype.wg;Nb.prototype.getAxis2To=Nb.prototype.yg;Nb.prototype.getLocalAxis1=Nb.prototype.zg;Nb.prototype.getLocalAxis2=Nb.prototype.Bg;Nb.prototype.getLocalAxis1To=Nb.prototype.Ag;Nb.prototype.getLocalAxis2To=Nb.prototype.Cg;Nb.prototype.getSpringDamper=Nb.prototype.nj;Nb.prototype.getLimitMotor=Nb.prototype.Zk;Nb.prototype.getTranslation=Nb.prototype.$k;window.OIMO.PrismaticJointConfig=Dd;Dd.prototype.init=Dd.prototype.Aa;window.OIMO.RagdollJoint=Mb;Mb.prototype.getAxis1=Mb.prototype.vg;Mb.prototype.getAxis2=Mb.prototype.xg;Mb.prototype.getAxis1To=Mb.prototype.wg;Mb.prototype.getAxis2To=Mb.prototype.yg;Mb.prototype.getLocalAxis1=Mb.prototype.zg;Mb.prototype.getLocalAxis2=Mb.prototype.Bg;Mb.prototype.getLocalAxis1To=Mb.prototype.Ag;Mb.prototype.getLocalAxis2To=Mb.prototype.Cg;Mb.prototype.getTwistSpringDamper=Mb.prototype.zn;Mb.prototype.getTwistLimitMotor=Mb.prototype.yn;Mb.prototype.getSwingSpringDamper=Mb.prototype.tn;Mb.prototype.getSwingAxis=Mb.prototype.rn;Mb.prototype.getSwingAxisTo=Mb.prototype.sn;Mb.prototype.getSwingAngle=Mb.prototype.qn;Mb.prototype.getTwistAngle=Mb.prototype.xn;window.OIMO.RagdollJointConfig=Wd;Wd.prototype.init=Wd.prototype.Aa;window.OIMO.RevoluteJoint=Ob;Ob.prototype.getAxis1=Ob.prototype.vg;Ob.prototype.getAxis2=Ob.prototype.xg;Ob.prototype.getAxis1To=Ob.prototype.wg;Ob.prototype.getAxis2To=Ob.prototype.yg;Ob.prototype.getLocalAxis1=Ob.prototype.zg;Ob.prototype.getLocalAxis2=Ob.prototype.Bg;Ob.prototype.getLocalAxis1To=Ob.prototype.Ag;Ob.prototype.getLocalAxis2To=Ob.prototype.Cg;Ob.prototype.getSpringDamper=Ob.prototype.nj;Ob.prototype.getLimitMotor=Ob.prototype.Zk;Ob.prototype.getAngle=Ob.prototype.Xk;window.OIMO.RevoluteJointConfig=Ce;Ce.prototype.init=Ce.prototype.Aa;window.OIMO.RotationalLimitMotor=Jc;Jc.prototype.setLimits=Jc.prototype.Qa;Jc.prototype.setMotor=Jc.prototype.bb;Jc.prototype.clone=Jc.prototype.clone;window.OIMO.SphericalJoint=se;se.prototype.getSpringDamper=se.prototype.nj;window.OIMO.SphericalJointConfig=re;re.prototype.init=re.prototype.Aa;window.OIMO.SpringDamper=Lb;Lb.prototype.setSpring=Lb.prototype.Qa;Lb.prototype.setSymplecticEuler=Lb.prototype.bb;Lb.prototype.clone=Lb.prototype.clone;window.OIMO.TranslationalLimitMotor=Hc;Hc.prototype.setLimits=Hc.prototype.Qa;Hc.prototype.setMotor=Hc.prototype.bb;Hc.prototype.clone=Hc.prototype.clone;window.OIMO.UniversalJoint=pb;pb.prototype.getAxis1=pb.prototype.vg;pb.prototype.getAxis2=pb.prototype.xg;pb.prototype.getAxis1To=pb.prototype.wg;pb.prototype.getAxis2To=pb.prototype.yg;pb.prototype.getLocalAxis1=pb.prototype.zg;pb.prototype.getLocalAxis2=pb.prototype.Bg;pb.prototype.getLocalAxis1To=pb.prototype.Ag;pb.prototype.getLocalAxis2To=pb.prototype.Cg;pb.prototype.getSpringDamper1=pb.prototype.on;pb.prototype.getSpringDamper2=pb.prototype.pn;pb.prototype.getLimitMotor1=pb.prototype.kn;pb.prototype.getLimitMotor2=pb.prototype.ln;pb.prototype.getAngle1=pb.prototype.en;pb.prototype.getAngle2=pb.prototype.fn;window.OIMO.UniversalJointConfig=qe;qe.prototype.init=qe.prototype.Aa;window.OIMO.ConstraintSolverType=pe;window.OIMO.DirectJointConstraintSolver=Ec;Ec.prototype.preSolveVelocity=Ec.prototype.jh;Ec.prototype.warmStart=Ec.prototype.sh;Ec.prototype.solveVelocity=Ec.prototype.nh;Ec.prototype.postSolveVelocity=Ec.prototype.vi;Ec.prototype.preSolvePosition=Ec.prototype.Gg;Ec.prototype.solvePositionSplitImpulse=Ec.prototype.mh;Ec.prototype.solvePositionNgs=Ec.prototype.lh;Ec.prototype.postSolve=Ec.prototype.$e;window.OIMO.PgsContactConstraintSolver=Tb;Tb.prototype.preSolveVelocity=Tb.prototype.jh;Tb.prototype.warmStart=Tb.prototype.sh;Tb.prototype.solveVelocity=Tb.prototype.nh;Tb.prototype.preSolvePosition=Tb.prototype.Gg;Tb.prototype.solvePositionSplitImpulse=Tb.prototype.mh;Tb.prototype.solvePositionNgs=Tb.prototype.lh;Tb.prototype.postSolve=Tb.prototype.$e;window.OIMO.PgsJointConstraintSolver=dc;dc.prototype.preSolveVelocity=dc.prototype.jh;dc.prototype.warmStart=dc.prototype.sh;dc.prototype.solveVelocity=dc.prototype.nh;dc.prototype.postSolveVelocity=dc.prototype.vi;dc.prototype.preSolvePosition=dc.prototype.Gg;dc.prototype.solvePositionSplitImpulse=dc.prototype.mh;dc.prototype.solvePositionNgs=dc.prototype.lh;dc.prototype.postSolve=dc.prototype.$e;window.OIMO.MassData=Ne;window.OIMO.RigidBody=C;C.prototype.getPosition=C.prototype.Xl;C.prototype.getPositionTo=C.prototype.Zl;C.prototype.setPosition=C.prototype.tm;C.prototype.translate=C.prototype.ym;C.prototype.getRotation=C.prototype.bm;C.prototype.getRotationTo=C.prototype.gm;C.prototype.setRotation=C.prototype.um;C.prototype.setRotationXyz=C.prototype.vm;C.prototype.rotate=C.prototype.mm;C.prototype.rotateXyz=C.prototype.nm;C.prototype.getOrientation=C.prototype.Ol;C.prototype.getOrientationTo=C.prototype.Ql;C.prototype.setOrientation=C.prototype.sm;C.prototype.getTransform=C.prototype.hm;C.prototype.getTransformTo=C.prototype.km;C.prototype.setTransform=C.prototype.wm;C.prototype.getMass=C.prototype.He;C.prototype.getLocalInertia=C.prototype.ce;C.prototype.getLocalInertiaTo=C.prototype.de;C.prototype.getMassData=C.prototype.Bf;C.prototype.getMassDataTo=C.prototype.Jg;C.prototype.setMassData=C.prototype.Vn;C.prototype.getRotationFactor=C.prototype.Mg;C.prototype.setRotationFactor=C.prototype.Wn;C.prototype.getLinearVelocity=C.prototype.Pd;C.prototype.getLinearVelocityTo=C.prototype.be;C.prototype.setLinearVelocity=C.prototype.Un;C.prototype.getAngularVelocity=C.prototype.Cc;C.prototype.getAngularVelocityTo=C.prototype.Hc;C.prototype.setAngularVelocity=C.prototype.Qn;C.prototype.addLinearVelocity=C.prototype.bb;C.prototype.addAngularVelocity=C.prototype.Qa;C.prototype.applyImpulse=C.prototype.qc;C.prototype.applyLinearImpulse=C.prototype.rc;C.prototype.applyAngularImpulse=C.prototype.Lb;C.prototype.applyForce=C.prototype.lc;C.prototype.applyForceToCenter=C.prototype.mc;C.prototype.applyTorque=C.prototype.zc;C.prototype.getGravityScale=C.prototype.bd;C.prototype.setGravityScale=C.prototype.Tn;C.prototype.getLocalPoint=C.prototype.ee;C.prototype.getLocalPointTo=C.prototype.fe;C.prototype.getLocalVector=C.prototype.me;C.prototype.getLocalVectorTo=C.prototype.Ge;C.prototype.getWorldPoint=C.prototype.Uh;C.prototype.getWorldPointTo=C.prototype.Vh;C.prototype.getWorldVector=C.prototype.xj;C.prototype.getWorldVectorTo=C.prototype.wl;C.prototype.getNumShapes=C.prototype.Nl;C.prototype.getShapeList=C.prototype.Ng;C.prototype.getNumContectLinks=C.prototype.Kg;C.prototype.getContactLinkList=C.prototype.ad;C.prototype.getNumJointLinks=C.prototype.Lg;C.prototype.getJointLinkList=C.prototype.cd;C.prototype.addShape=C.prototype.tb;C.prototype.removeShape=C.prototype.Ln;C.prototype.getType=C.prototype.lm;C.prototype.setType=C.prototype.Fm;C.prototype.wakeUp=C.prototype.Hm;C.prototype.sleep=C.prototype.Gm;C.prototype.getSleepTime=C.prototype.Th;C.prototype.setAutoSleep=C.prototype.Rn;C.prototype.getPrev=C.prototype.$l;C.prototype.getNext=C.prototype.vl;window.OIMO.RigidBodyConfig=Yj;window.OIMO.RigidBodyType=Qd;window.OIMO.Shape=pa;pa.prototype.getFriction=pa.prototype.qc;pa.prototype.setFriction=pa.prototype.me;pa.prototype.getRestitution=pa.prototype.Hc;pa.prototype.setRestitution=pa.prototype.He;pa.prototype.getLocalTransform=pa.prototype.zc;pa.prototype.getLocalTransformTo=pa.prototype.Cc;pa.prototype.getTransform=pa.prototype.Pd;pa.prototype.getTransformTo=pa.prototype.be;pa.prototype.setLocalTransform=pa.prototype.Ge;pa.prototype.getDensity=pa.prototype.mc;pa.prototype.setDensity=pa.prototype.fe;pa.prototype.getAabb=pa.prototype.Qa;pa.prototype.getAabbTo=pa.prototype.bb;pa.prototype.getGeometry=pa.prototype.rc;pa.prototype.getRigidBody=pa.prototype.ad;pa.prototype.getCollisionGroup=pa.prototype.tb;pa.prototype.setCollisionGroup=pa.prototype.ce;pa.prototype.getCollisionMask=pa.prototype.Lb;pa.prototype.setCollisionMask=pa.prototype.de;pa.prototype.getContactCallback=pa.prototype.lc;pa.prototype.setContactCallback=pa.prototype.ee;pa.prototype.getPrev=pa.prototype.cd;pa.prototype.getNext=pa.prototype.bd;window.OIMO.ShapeConfig=Ng})();
