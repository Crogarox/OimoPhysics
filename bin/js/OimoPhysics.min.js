/* OimoPhysics 1.1.0 (c) 2018 saharan, The MIT License */'use strict';(function(){function Ga(a){this.Ec=-1;this.ha=new Va;this.pa=new Va;this.a=new Va;var b=a.position;this.ha.v=b.x;this.ha.A=b.y;this.ha.B=b.z;b=a.rotation;this.ha.o=b.e00;this.ha.f=b.e01;this.ha.h=b.e02;this.ha.i=b.e10;this.ha.m=b.e11;this.ha.j=b.e12;this.ha.l=b.e20;this.ha.g=b.e21;this.ha.s=b.e22;var b=this.pa,e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;b=this.a;e=this.ha;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Vj=a.restitution;this.Lj=a.friction;this.qk=a.density;this.Kb=a.geometry;this.Gj=a.collisionGroup;this.Hj=a.collisionMask;this.Ij=a.contactCallback;this.u=new Ta;this.tb=null;this.pc=new t}function be(){}function E(a){this.vi=this.Cc=this.ia=this.M=null;this.sg=0;this.ic=this.Ob=null;this.ve=0;this.Re=this.ue=null;this.eh=0;var b=a.linearVelocity;this.gb=b.x;this.hb=b.y;this.ib=b.z;b=a.angularVelocity;this.kb=b.x;this.lb=b.y;this.mb=b.z;this.Uc=this.Tc=this.Sc=this.Yc=this.Xc=this.Wc=0;this.pa=new Va;this.a=new Va;b=a.position;this.pa.v=b.x;this.pa.A=b.y;this.pa.B=b.z;b=a.rotation;this.pa.o=b.e00;this.pa.f=b.e01;this.pa.h=b.e02;this.pa.i=b.e10;this.pa.m=b.e11;this.pa.j=b.e12;this.pa.l=b.e20;this.pa.g=b.e21;this.pa.s=b.e22;var b=this.a,e=this.pa;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;this.Lb=a.type;this.yb=0;this.Hb=!1;this.nk=a.autoSleep;this.Y=this.X=this.W=this.V=this.U=this.T=this.S=this.R=this.P=this.ni=this.mi=this.li=this.ki=this.ji=this.ii=this.hi=this.gi=this.fi=this.$a=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.Id=this.Hd=this.Gd=this.Fd=this.Ed=this.Dd=this.Cd=this.Bd=this.Ad=this.ab=this.Nc=0;this.Ml=a.linearDamping;this.El=a.angularDamping;this.qf=this.pf=this.nf=this.Hh=this.Gh=this.Fh=0;this.N=new t(1,1,1);this.Ff=!1;this.Yg=1;this.mc=null}function ml(){this.mass=0;this.localInertia=new M}function lc(a){Db.call(this);this.$=a;this.info=new nl;this.Zb=Array(F.maxJacobianRows);a=0;for(var b=this.Zb.length;a<b;){var e=a++;this.Zb[e]=new ol}}function Wb(a){Db.call(this);this.zi=a;this.info=new Yl;this.Zb=Array(F.maxManifoldPoints);a=0;for(var b=this.Zb.length;a<b;){var e=a++;this.Zb[e]=new Zl}}function pl(a){this.tg=a;this.ik=Array(this.tg);this.ab=Array(this.tg);this.Ti=Array(this.tg);a=0;for(var b=this.tg;a<b;){var e=a++;this.ik[e]=Array(this.tg);this.ab[e]=Array(this.tg);this.Ti[e]=Array(this.tg);for(var d=0,c=this.tg;d<c;){var f=d++;this.ik[e][f]=0;this.ab[e][f]=0;this.Ti[e][f]=0}}this.Oj=1<<this.tg;this.Fj=Array(this.Oj);this.pk=Array(this.Oj);a=0;for(b=this.Oj;a<b;){for(var d=e=a++,d=(d&85)+(d>>1&85),d=(d&51)+(d>>2&51),d=(d&15)+(d>>4&15),c=Array(d),f=0,h=d;f<h;){var l=f++;c[l]=Array(d);for(var g=0,k=d;g<k;){var m=g++;c[l][m]=0}}this.Fj[e]=!1;this.pk[e]=c}}function Xb(a){Db.call(this);this.$=a;this.info=new nl;a=F.maxJacobianRows;this.Yh=new pl(a);this.Ke=new ql(a);this.Zb=Array(a);for(var b=0,e=this.Zb.length;b<e;){var d=b++;this.Zb[d]=new ol}b=this.Ke.Mh.length;this.Al=new Tj(b);this.Ai=new Tj(b);this.Kg=Array(a);this.Rh=Array(a);this.vf=Array(a);this.qj=Array(a);for(b=0;b<a;)e=b++,this.Kg[e]=0,this.Rh[e]=0,this.vf[e]=0,this.qj[e]=0}function Tj(a){this.n=a;this.qc=Array(a);this.df=Array(a);for(var b=0;b<a;){var e=b++;this.qc[e]=e}}function ql(a){this.Gn=a;this.bf=0;this.Mh=Array(1<<a);this.We=new $l(a)}function $l(a){this.size=a;this.Qc=0;this.nh=Array(a);this.sh=Array(a);this.ge=0;this.Gg=Array(a)}function rl(a){this.nh=Array(a);this.Gg=Array(a);this.sh=Array(a);this.Xk=Array(a);this.ge=this.Qc=0}function ol(){this.wf=this.mass=this.od=this.nd=this.md=this.ld=this.kd=this.jd=this.ud=this.td=this.sd=this.rd=this.qd=this.pd=0}function Zl(){this.vm=this.um=this.tm=this.sm=this.fe=this.dk=this.ck=this.bk=this.ak=this.$j=this.Zj=this.ll=this.kl=this.jl=this.il=this.hl=this.gl=this.zj=this.yj=this.xj=this.wj=this.vj=this.uj=this.rl=this.ql=this.pl=this.ol=this.nl=this.ml=this.Vf=this.Uf=this.Tf=this.Sf=this.Rf=this.Qf=this.Xh=this.Wh=this.Vh=this.Uh=this.Th=this.Sh=0}function xe(){}function sf(){Lc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper1=new Rc;this.springDamper2=new Rc;this.limitMotor1=new zc;this.limitMotor2=new zc}function yb(a){U.call(this,a,Ac.UNIVERSAL);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.Kc=b.x;this.Lc=b.y;this.Mc=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.Kc*this.Kc+this.Lc*this.Lc+this.Mc*this.Mc?(b=this.Kc*this.Kc+this.Lc*this.Lc+this.Mc*this.Mc,0<b&&(b=1/Math.sqrt(b)),this.Kc*=b,this.Lc*=b,this.Mc*=b):(this.Lc=this.Kc=0,this.Mc=1);var e=this.C.a,b=this.D.a,d,c,f,h,l,g,k,m,n,q,p,r,v;r=e.o*this.qa+e.f*this.ra+e.h*this.sa;v=e.i*this.qa+e.m*this.ra+e.j*this.sa;d=e.l*this.qa+e.g*this.ra+e.s*this.sa;var la,x;la=b.o*this.Kc+b.f*this.Lc+b.h*this.Mc;x=b.i*this.Kc+b.m*this.Lc+b.j*this.Mc;p=b.l*this.Kc+b.g*this.Lc+b.s*this.Mc;l=x*d-p*v;g=p*r-la*d;k=la*v-x*r;l*l+g*g+k*k||(l=r*r,g=v*v,k=d*d,l<g?l<k?(k=1/Math.sqrt(g+k),l=0,g=d*k,k*=-v):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0):g<k?(k=1/Math.sqrt(k+l),l=-d*k,g=0,k*=r):(k=1/Math.sqrt(l+g),l=v*k,g=-r*k,k=0));c=v*k-d*g;f=d*l-r*k;h=r*g-v*l;m=g*p-k*x;n=k*la-l*p;q=l*x-g*la;var A,u;A=e.o*r+e.i*v+e.l*d;u=e.f*r+e.m*v+e.g*d;d=e.h*r+e.j*v+e.s*d;this.qa=A;this.ra=u;this.sa=d;d=e.o*l+e.i*g+e.l*k;r=e.f*l+e.m*g+e.g*k;v=e.h*l+e.j*g+e.s*k;this.Bb=d;this.Cb=r;this.Db=v;d=e.o*c+e.i*f+e.l*h;r=e.f*c+e.m*f+e.g*h;e=e.h*c+e.j*f+e.s*h;this.jc=d;this.kc=r;this.lc=e;e=b.o*m+b.i*n+b.l*q;c=b.f*m+b.m*n+b.g*q;m=b.h*m+b.j*n+b.s*q;this.nb=e;this.ob=c;this.pb=m;e=b.o*l+b.i*g+b.l*k;m=b.f*l+b.m*g+b.g*k;l=b.h*l+b.j*g+b.s*k;this.$g=e;this.ah=m;this.bh=l;l=b.o*la+b.i*x+b.l*p;g=b.f*la+b.m*x+b.g*p;b=b.h*la+b.j*x+b.s*p;this.Kc=l;this.Lc=g;this.Mc=b;this.Ei=this.Dl=this.Di=0;this.Fm=this.Em=this.Dm=!1;this.Lk=a.springDamper1.clone();this.Mk=a.springDamper2.clone();this.Dk=a.limitMotor1.clone();this.Ek=a.limitMotor2.clone()}function Ud(){this.lowerLimit=1;this.motorForce=this.upperLimit=0}function Rc(){this.dampingRatio=this.frequency=0;this.useSymplecticEuler=!1}function Ee(){Lc.call(this);this.springDamper=new Rc}function ag(a){U.call(this,a,0);this.xe=a.springDamper.clone()}function zc(){this.lowerLimit=1;this.motorTorque=this.upperLimit=0}function Df(){Lc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.springDamper=new Rc;this.limitMotor=new zc}function hc(a){U.call(this,a,1);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,d,c,f,h,l,g,k;d=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-1.000001<d&&-.999999>d?(b=this.qa,e=this.ra,c=this.sa,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Bb=0,this.Cb=q*p,this.Db=-m*p):(p=1/Math.sqrt(p+r),this.Bb=m*p,this.Cb=-n*p,this.Db=0):r<v?(p=1/Math.sqrt(v+p),this.Bb=-q*p,this.Cb=0,this.Db=n*p):(p=1/Math.sqrt(p+r),this.Bb=m*p,this.Cb=-n*p,this.Db=0);this.jc=this.ra*this.Db-this.sa*this.Cb;this.kc=this.sa*this.Bb-this.qa*this.Db;this.lc=this.qa*this.Cb-this.ra*this.Bb;n=b*this.qa+e*this.ra+c*this.sa;m=d*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Bb+e*this.Cb+c*this.Db;m=d*this.Bb+f*this.Cb+h*this.Db;q=l*this.Bb+g*this.Cb+k*this.Db;this.$g=n;this.ah=m;this.bh=q;b=b*this.jc+e*this.kc+c*this.lc;e=d*this.jc+f*this.kc+h*this.lc;c=l*this.jc+g*this.kc+k*this.lc;this.Kc=b;this.Lc=e;this.Mc=c;this.angularErrorZ=this.angularErrorY=this.angle=0;this.da=new Uj(this);this.xe=a.springDamper.clone();this.Kh=a.limitMotor.clone()}function Pf(){Lc.call(this);this.localTwistAxis1=new t(1,0,0);this.localTwistAxis2=new t(1,0,0);this.localSwingAxis1=new t(0,1,0);this.twistSpringDamper=new Rc;this.swingSpringDamper=new Rc;this.twistLimitMotor=new zc;this.maxSwingAngle2=this.maxSwingAngle1=3.14159265358979}function zb(a){U.call(this,a,Ac.RAGDOLL);var b=a.localTwistAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localSwingAxis1;this.Bb=b.x;this.Cb=b.y;this.Db=b.z;b=a.localTwistAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.jc=this.ra*this.Db-this.sa*this.Cb;this.kc=this.sa*this.Bb-this.qa*this.Db;this.lc=this.qa*this.Cb-this.ra*this.Bb;if(this.jc*this.jc+this.kc*this.kc+this.lc*this.lc)b=this.jc*this.jc+this.kc*this.kc+this.lc*this.lc,0<b&&(b=1/Math.sqrt(b)),this.jc*=b,this.kc*=b,this.lc*=b,this.Bb=this.kc*this.sa-this.lc*this.ra,this.Cb=this.lc*this.qa-this.jc*this.sa,this.Db=this.jc*this.ra-this.kc*this.qa;else{var b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d;c<f?c<h?(c=1/Math.sqrt(f+h),this.Bb=0,this.Cb=d*c,this.Db=-e*c):(c=1/Math.sqrt(c+f),this.Bb=e*c,this.Cb=-b*c,this.Db=0):f<h?(c=1/Math.sqrt(h+c),this.Bb=-d*c,this.Cb=0,this.Db=b*c):(c=1/Math.sqrt(c+f),this.Bb=e*c,this.Cb=-b*c,this.Db=0);this.jc=this.ra*this.Db-this.sa*this.Cb;this.kc=this.sa*this.Bb-this.qa*this.Db;this.lc=this.qa*this.Cb-this.ra*this.Bb}var l,g,k,m,c=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-1.000001<c&&-.999999>c?(b=this.qa,e=this.ra,d=this.sa,c=b*b,f=e*e,h=d*d,c<f?c<h?(f=1/Math.sqrt(f+h),c=0,d*=f,f*=-e):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0):f<h?(f=1/Math.sqrt(h+c),c=-d*f,d=0,f*=b):(f=1/Math.sqrt(c+f),c=e*f,d=-b*f,f=0),b=c,e=d,c=f,d=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,d=Math.sqrt(.5*(1+c)),c=.5/d,b*=c,e*=c,c*=f);k=e;var h=c,e=d,n=2*b;g=2*k;d=2*h;c=b*n;f=k*g;l=h*d;h=b*g;m=k*d;k=b*d;var n=e*n,q=e*g;g=e*d;b=1-f-l;e=h-g;d=k+q;h+=g;l=1-c-l;g=m-n;k-=q;m+=n;c=1-c-f;f=b*this.qa+e*this.ra+d*this.sa;n=h*this.qa+l*this.ra+g*this.sa;q=k*this.qa+m*this.ra+c*this.sa;this.nb=f;this.ob=n;this.pb=q;f=b*this.Bb+e*this.Cb+d*this.Db;n=h*this.Bb+l*this.Cb+g*this.Db;q=k*this.Bb+m*this.Cb+c*this.Db;this.$g=f;this.ah=n;this.bh=q;b=b*this.jc+e*this.kc+d*this.lc;e=h*this.jc+l*this.kc+g*this.lc;d=k*this.jc+m*this.kc+c*this.lc;this.Kc=b;this.Lc=e;this.Mc=d;this.Tk=a.twistSpringDamper.clone();this.Sk=a.twistLimitMotor.clone();this.Nk=a.swingSpringDamper.clone();this.Pj=a.maxSwingAngle1;this.Qj=a.maxSwingAngle2;this.Pj<F.minRagdollMaxSwingAngle&&(this.Pj=F.minRagdollMaxSwingAngle);this.Qj<F.minRagdollMaxSwingAngle&&(this.Qj=F.minRagdollMaxSwingAngle);this.bl=new zc;this.bl.lowerLimit=-1;this.swingConstraintAxisZ=this.swingConstraintAxisY=this.swingConstraintAxisX=this.swingConstraintAxis1Z=this.swingConstraintAxis1Y=this.swingConstraintAxis1X=this.twistAxisZ=this.twistAxisY=this.twistAxisX=this.swingAxisZ=this.swingAxisY=this.swingAxisX=this.swingError=this.jj=this.aj=this.bl.upperLimit=0}function Vd(){Lc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.limitMotor=new Ud;this.springDamper=new Rc}function Pb(a){U.call(this,a,Ac.PRISMATIC);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,d,c,f,h,l,g,k;d=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-1.000001<d&&-.999999>d?(b=this.qa,e=this.ra,c=this.sa,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Bb=0,this.Cb=q*p,this.Db=-m*p):(p=1/Math.sqrt(p+r),this.Bb=m*p,this.Cb=-n*p,this.Db=0):r<v?(p=1/Math.sqrt(v+p),this.Bb=-q*p,this.Cb=0,this.Db=n*p):(p=1/Math.sqrt(p+r),this.Bb=m*p,this.Cb=-n*p,this.Db=0);this.jc=this.ra*this.Db-this.sa*this.Cb;this.kc=this.sa*this.Bb-this.qa*this.Db;this.lc=this.qa*this.Cb-this.ra*this.Bb;n=b*this.qa+e*this.ra+c*this.sa;m=d*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Bb+e*this.Cb+c*this.Db;m=d*this.Bb+f*this.Cb+h*this.Db;q=l*this.Bb+g*this.Cb+k*this.Db;this.$g=n;this.ah=m;this.bh=q;b=b*this.jc+e*this.kc+c*this.lc;e=d*this.jc+f*this.kc+h*this.lc;c=l*this.jc+g*this.kc+k*this.lc;this.Kc=b;this.Lc=e;this.Mc=c;this.da=new Uj(this);this.angularErrorZ=this.angularErrorY=this.angularErrorX=this.linearErrorZ=this.linearErrorY=this.Yf=0;this.xe=a.springDamper.clone();this.Kh=a.limitMotor.clone()}function Ac(){}function bd(a){this.Ck=a}function am(){this.ub=this.Zc=this.ta=0}function Uj(a){this.$=a;this.je=this.ie=this.he=this.Sd=this.Rd=this.Qd=this.cd=this.bd=this.ad=0}function bg(){Lc.call(this);this.localAxis1=new t(1,0,0);this.localAxis2=new t(1,0,0);this.translationalLimitMotor=new Ud;this.translationalSpringDamper=new Rc;this.rotationalLimitMotor=new zc;this.rotationalSpringDamper=new Rc}function Lc(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=new t;this.localAnchor2=new t;this.allowCollision=!1;this.solverType=F.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=F.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0}function Mb(a){U.call(this,a,2);var b=a.localAxis1;this.qa=b.x;this.ra=b.y;this.sa=b.z;b=a.localAxis2;this.nb=b.x;this.ob=b.y;this.pb=b.z;this.qa*this.qa+this.ra*this.ra+this.sa*this.sa?(b=this.qa*this.qa+this.ra*this.ra+this.sa*this.sa,0<b&&(b=1/Math.sqrt(b)),this.qa*=b,this.ra*=b,this.sa*=b):(this.qa=1,this.sa=this.ra=0);this.nb*this.nb+this.ob*this.ob+this.pb*this.pb?(b=this.nb*this.nb+this.ob*this.ob+this.pb*this.pb,0<b&&(b=1/Math.sqrt(b)),this.nb*=b,this.ob*=b,this.pb*=b):(this.nb=1,this.pb=this.ob=0);var e,d,c,f,h,l,g,k;d=this.qa*this.nb+this.ra*this.ob+this.sa*this.pb;-1.000001<d&&-.999999>d?(b=this.qa,e=this.ra,c=this.sa,d=b*b,f=e*e,h=c*c,d<f?d<h?(f=1/Math.sqrt(f+h),d=0,c*=f,f*=-e):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0):f<h?(f=1/Math.sqrt(h+d),d=-c*f,c=0,f*=b):(f=1/Math.sqrt(d+f),d=e*f,c=-b*f,f=0),b=d,e=c,d=f,c=0):(b=this.ra*this.pb-this.sa*this.ob,e=this.sa*this.nb-this.qa*this.pb,f=this.qa*this.ob-this.ra*this.nb,c=Math.sqrt(.5*(1+d)),d=.5/c,b*=d,e*=d,d*=f);l=e;e=c;var m=2*b;h=2*l;c=2*d;k=b*m;var n=l*h;f=d*c;d=b*h;g=l*c;l=b*c;var m=e*m,q=e*h;h=e*c;b=1-n-f;e=d-h;c=l+q;d+=h;f=1-k-f;h=g-m;l-=q;g+=m;k=1-k-n;var n=this.qa,m=this.ra,q=this.sa,p=n*n,r=m*m,v=q*q;p<r?p<v?(p=1/Math.sqrt(r+v),this.Bb=0,this.Cb=q*p,this.Db=-m*p):(p=1/Math.sqrt(p+r),this.Bb=m*p,this.Cb=-n*p,this.Db=0):r<v?(p=1/Math.sqrt(v+p),this.Bb=-q*p,this.Cb=0,this.Db=n*p):(p=1/Math.sqrt(p+r),this.Bb=m*p,this.Cb=-n*p,this.Db=0);this.jc=this.ra*this.Db-this.sa*this.Cb;this.kc=this.sa*this.Bb-this.qa*this.Db;this.lc=this.qa*this.Cb-this.ra*this.Bb;n=b*this.qa+e*this.ra+c*this.sa;m=d*this.qa+f*this.ra+h*this.sa;q=l*this.qa+g*this.ra+k*this.sa;this.nb=n;this.ob=m;this.pb=q;n=b*this.Bb+e*this.Cb+c*this.Db;m=d*this.Bb+f*this.Cb+h*this.Db;q=l*this.Bb+g*this.Cb+k*this.Db;this.$g=n;this.ah=m;this.bh=q;b=b*this.jc+e*this.kc+c*this.lc;e=d*this.jc+f*this.kc+h*this.lc;c=l*this.jc+g*this.kc+k*this.lc;this.Kc=b;this.Lc=e;this.Mc=c;this.linearErrorZ=this.linearErrorY=this.Yf=this.angularErrorZ=this.angularErrorY=this.angle=0;this.da=new Uj(this);this.Rk=a.translationalSpringDamper.clone();this.Qk=a.translationalLimitMotor.clone();this.Kk=a.rotationalSpringDamper.clone();this.Jk=a.rotationalLimitMotor.clone()}function U(a,b){this.rb=new bd(this);this.sb=new bd(this);this.Hc=F.defaultJointPositionCorrectionAlgorithm;this.Lb=b;this.mc=null;this.C=a.rigidBody1;this.D=a.rigidBody2;this.mk=a.allowCollision;this.Oi=a.breakForce;this.Pi=a.breakTorque;switch(a.solverType){case 0:this.Xj=new lc(this);break;case 1:this.Xj=new Xb(this)}b=a.localAnchor1;this.Ui=b.x;this.Vi=b.y;this.Wi=b.z;a=a.localAnchor2;this.Xi=a.x;this.Yi=a.y;this.Zi=a.z;this.Mc=this.Lc=this.Kc=this.bh=this.ah=this.$g=this.pb=this.ob=this.nb=this.lc=this.kc=this.jc=this.Db=this.Cb=this.Bb=this.sa=this.ra=this.qa=this.Lf=this.Kf=this.Jf=this.If=this.Hf=this.Gf=this.Xb=this.Wb=this.Vb=this.Ub=this.Tb=this.Sb=0;this.Pb=Array(F.maxJacobianRows);a=0;for(b=F.maxJacobianRows;a<b;){var e=a++;this.Pb[e]=new am}}function bm(){this.Aa=new Fe;this.fb=this.motorSpeed=this.Ha=this.Ia=this.Ma=this.Fa=0;this.ta=null}function nl(){this.Je=this.Ie=null;this.Ka=0;this.rows=Array(F.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new bm}}function cm(){this.Hg=new Fe;this.Bj=new Fe;this.Aj=new Fe;this.friction=this.Ma=this.Fa=0;this.ta=null}function Yl(){this.Je=this.Ie=null;this.Ka=0;this.rows=Array(F.maxManifoldPoints);for(var a=0,b=this.rows.length;a<b;){var e=a++;this.rows[e]=new cm}}function Fe(){this.xc=this.ga=this.fa=this.ea=this.ca=this.ba=this.aa=this.Da=this.Ca=this.Ba=this.xa=this.wa=this.va=0}function sl(a){this.Ja=a;this.ul=0;this.vl=Array(F.maxManifoldPoints);a=0;for(var b=F.maxManifoldPoints;a<b;){var e=a++;this.vl[e]=new mc}}function mc(){this.Gc=this.Od=this.Nd=this.Md=this.Ld=this.Kd=this.Jd=this.ec=this.dc=this.cc=this.Gb=this.Fb=this.Eb=this.kf=this.jf=this.hf=this.gf=this.ff=this.ef=0;this.Zd=new tl;this.Mf=this.Ve=!1;this.Ec=-1}function Qb(){this.$d=this.Ni=this.Mi=this.Li=this.dj=this.cj=this.bj=this.rg=this.qg=this.pg=0;this.uc=Array(F.maxManifoldPoints);for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.uc[e]=new mc}}function tl(){this.Ze=this.Ye=this.Xe=this.ub=this.yc=this.zc=this.$c=0}function Cd(a){this.Xj=new Wb(this);this.Ja=a}function Ub(){}function Db(){this.D=this.C=null;this.Ff=!1}function Ge(){}function dl(){this.basisColorZ=new t(0,0,1);this.basisColorY=new t(0,1,0);this.basisColorX=new t(1,0,0);this.basisLength=.5;this.jointRotationalConstraintRadius=.3;this.jointErrorColor=new t(1,.1,.1);this.jointLineColor=new t(.8,.8,.8);this.contactNormalLength=this.contactTangentLength=this.contactBinormalLength=.5;this.contactBinormalColor=new t(.2,.2,1);this.contactTangentColor=new t(.1,.8,.1);this.contactNormalColor=new t(1,.1,.1);this.disabledContactColor=new t(.5,.1,.1);this.newContactColor=new t(1,1,.1);this.contactColor4=new t(.8,.1,1);this.contactColor3=new t(.1,.8,.6);this.contactColor2=new t(1,.6,.1);this.contactColor=new t(1,.1,.1);this.pairColor=new t(1,1,.1);this.bvhNodeColor=new t(.4,.4,.4);this.aabbColor=new t(1,.1,.1);this.kinematicShapeColor=new t(1,.5,.1);this.staticShapeColor=new t(.7,.7,.7);this.sleepingShapeColor2=new t(.2,.8,.5);this.sleepingShapeColor1=new t(.3,.3,.8);this.sleepyShapeColor2=new t(.6,.8,.3);this.sleepyShapeColor1=new t(.5,.25,.6);this.shapeColor2=new t(1,.8,.1);this.shapeColor1=new t(.7,.2,.4)}function Jb(){this.p=new ec;this.wireframe=!1;this.drawShapes=!0;this.drawBvh=!1;this.drawBvhMinLevel=0;this.drawBvhMaxLevel=65536;this.drawContacts=this.drawPairs=this.drawBases=this.drawAabbs=!1;this.drawJoints=!0;this.drawJointLimits=!1;this.hk=Array(5);this.yh=Array(5);this.jk=Array(5);for(var a=0;5>a;){var b=a++,e=b&&4!=b?8:1;this.hk[b]=Array(e);this.yh[b]=Array(e);this.jk[b]=Array(e);for(e=0;8>e;){var d=e++,c=.7853981633974475*b,f=.7853981633974475*d;this.hk[b][d]=new t(Math.sin(c)*Math.cos(f),Math.cos(c),-Math.sin(c)*Math.sin(f));this.yh[b][d]=new t;this.jk[b][d]=new t}}this.oj=Array(8);this.Wl=Array(8);this.de=Array(8);this.Le=Array(8);this.Df=Array(8);for(a=0;8>a;)b=a++,this.oj[b]=new t(Math.cos(.7853981633974475*b),0,-Math.sin(.7853981633974475*b)),this.Wl[b]=new t(Math.cos(.7853981633974475*(b+.5)),0,-Math.sin(.7853981633974475*(b+.5))),this.de[b]=new t,this.Le[b]=new t,this.Df[b]=new t;this.style=new dl}function ce(){this.position=new t;this.normal=new t;this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1}function He(){}function md(){}function Vj(){}function el(){this.u=new Ta;this.Fl=null}function Dk(){this.Ci=new Wj;this.lj=new Va;this.Yf=new t;this.Z=new t;this.Yl=this.nj=null}function Xj(){this.Ci=new Wj;this.lj=new t;this.end=new t;this.nj=null}function za(a,b){null==a&&(a=2);switch(a){case 1:this.hc=new pc;break;case 2:this.hc=new qc}this.Dh=new Ie(this.hc);null==b&&(b=new t(0,-9.80665,0));this.sk=new t(b.x,b.y,b.z);this.oi=this.Ih=this.ui=this.mf=null;this.Sj=this.Fk=this.sg=this.$i=0;this.Hk=10;this.Gk=5;this.Uj=new Xj;this.Ri=new Dk;this.kk=new el;this.og=new ul;this.Te=Array(F.islandInitialConstraintArraySize);this.jh=Array(F.islandInitialRigidBodyArraySize);this.Lh=new vl;this.Ga=new ec;this.Nl=0}function vl(){this.invDt=this.dt=0;this.dtRatio=1}function ul(){this.Af=Array(F.islandInitialRigidBodyArraySize);this.Bf=Array(F.islandInitialConstraintArraySize);this.xh=Array(F.islandInitialConstraintArraySize);this.wh=Array(F.islandInitialConstraintArraySize);this.oh=this.ph=this.zf=this.yf=0}function Ie(a){this.hc=a;this.Mm=new jf;this.ri=0}function cd(){this.Oc=this.Xd=this.M=this.ia=null}function tc(){this.ia=this.M=null;this.rb=new cd;this.sb=new cd;this.Eh=this.D=this.C=this.wc=this.vc=null;this.Qi=new fl;this.Nm=new Je;this.Wj=this.Nj=!1;this.Ja=new Qb;this.Pl=new sl(this.Ja);this.Qe=new Cd(this.Ja);this.vg=!1}function ra(a,b,e,d){null==d&&(d=1);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;this.w=d;ra.numCreations++}function ec(){this.b=Array(256);this.c=0;this.cb=Array(256);this.eb=0;this.Cf=Array(256);this.Xf=0;this.Vd=Array(256);this.ce=0}function Na(){}function P(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){null==v&&(v=1);null==r&&(r=0);null==p&&(p=0);null==q&&(q=0);null==n&&(n=0);null==m&&(m=1);null==k&&(k=0);null==g&&(g=0);null==l&&(l=0);null==h&&(h=0);null==f&&(f=1);null==c&&(c=0);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;P.numCreations++}function M(a,b,e,d,c,f,h,l,g){null==g&&(g=1);null==l&&(l=0);null==h&&(h=0);null==f&&(f=0);null==c&&(c=1);null==d&&(d=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;M.numCreations++}function Id(){}function ic(){}function Fb(){this.Na=Array(4);this.jb=Array(4);this.qb=Array(4);this.kj=Array(3);this.kj[0]=new t(1,0,0);this.kj[1]=new t(0,1,0);this.kj[2]=new t(0,0,1);this.Tn=new t;this.Un=new t;this.Ln=new t;this.Kn=new t;this.Sn=new Va;for(var a=0;4>a;){var b=a++;this.Na[b]=new t;this.jb[b]=new t;this.qb[b]=new t}this.dir=new t;this.closest=new t;this.closestPoint1=new t;this.closestPoint2=new t;this.Ig=new wl}function F(){}function Va(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1}function t(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=e;t.numCreations++}function xl(){this.wl=new t}function de(){this.xd=new t;this.jb=new t;this.qb=new t}function kf(){this.id=++kf.Mb;this.ia=this.M=null;this.Rj=new t;this.Pk=this.Kj=0;this.hj=!1;this.zb=Array(3);this.ze=Array(3);this.Oe=Array(3);this.Zh=new t;this.pi=Array(3);this.pi[0]=1;this.pi[1]=2;this.pi[2]=0}function wl(){this.zb=Array(F.maxEPAVertices);this.ci=new t;this.Ge=0;this.Pc=this.hd=null;this.fh=0;this.Ue=this.ye=null}function cj(){this.Mg=!1}function cg(a){this.Mg=a}function Qf(a){this.Mg=a}function dj(){this.Mg=!1}function ej(){this.Mg=!1}function fl(){}function yl(){this.fc=this.Rc=this.tj=this.w=0;this.Bc=Array(8);this.gc=Array(8);for(var a=0;8>a;){var b=a++;this.Bc[b]=new zl;this.gc[b]=new zl}}function zl(){this.Ra=this.Qa=this.Pa=this.y=this.x=0}function Ek(){this.Mg=!1;this.xg=new yl}function Mc(a){this.Mg=a}function gl(){this.position1=new t;this.position2=new t;this.id=this.depth=0}function Je(){this.numPoints=0;this.normal=new t;this.points=Array(F.maxManifoldPoints);this.incremental=!1;for(var a=0,b=F.maxManifoldPoints;a<b;){var e=a++;this.points[e]=new gl}}function jf(){this.Jb=Array(8);for(var a=0;6>a;){var b=a++;this.Jb[b]=Array(8)}a=new dj;this.Jb[0][0]=new cj;this.Jb[0][1]=new Qf(!1);this.Jb[0][2]=a;this.Jb[0][3]=a;this.Jb[0][4]=new cg(!1);this.Jb[0][5]=a;this.Jb[1][0]=new Qf(!0);this.Jb[1][1]=new Ek;this.Jb[1][2]=a;this.Jb[1][3]=a;this.Jb[1][4]=a;this.Jb[1][5]=a;this.Jb[2][0]=a;this.Jb[2][1]=a;this.Jb[2][2]=a;this.Jb[2][3]=a;this.Jb[2][4]=a;this.Jb[2][5]=a;this.Jb[3][0]=a;this.Jb[3][1]=a;this.Jb[3][2]=a;this.Jb[3][3]=a;this.Jb[3][4]=a;this.Jb[3][5]=a;this.Jb[4][0]=new cg(!0);this.Jb[4][1]=a;this.Jb[4][2]=a;this.Jb[4][3]=a;this.Jb[4][4]=new ej;this.Jb[4][5]=a;this.Jb[5][0]=a;this.Jb[5][1]=a;this.Jb[5][2]=a;this.Jb[5][3]=a;this.Jb[5][4]=a;this.Jb[5][5]=a}function je(a){Wa.call(this,0);this.Rb=this.bb=a;this.He()}function Wj(){this.position=new t;this.normal=new t;this.fraction=0}function $c(){}function Dd(a,b){Wa.call(this,2);this.bb=a;this.Ib=b;this.He()}function Wd(a){Wa.call(this,5);this.Ge=a.length;this.zb=Array(this.Ge);this.ug=Array(this.Ge);for(var b=0,e=this.Ge;b<e;){var d=b++;this.zb[d]=a[d];this.ug[d]=new t}this.Ql=!0;this.He()}function ke(a,b){Wa.call(this,3);this.bb=a;this.Ib=b;this.gk=a/Math.sqrt(a*a+4*b*b);this.Yj=2*b/Math.sqrt(a*a+4*b*b);this.He()}function Ke(a,b){Wa.call(this,4);this.bb=a;this.Ib=b;this.Rb=this.bb;this.He()}function Ad(a){Wa.call(this,1);this.De=a.x;this.Ee=a.y;this.Fe=a.z;this.tk=a.x;this.wk=this.vk=this.uk=0;this.xk=a.y;this.Ak=this.zk=this.yk=0;this.Bk=a.z;this.He();a=a.x<a.y?a.z<a.x?a.z:a.x:a.z<a.y?a.z:a.y;this.Rb>.2*a&&(this.Rb=.2*a)}function Ta(){this.la=this.ka=this.ja=this.oa=this.na=this.ma=0}function hl(){this.Qb=null;this.Tj=0;this.wi=new Al;this.$e=this.Wf=this.Vc=null;this.Zh=Array(1024)}function Al(){this.Kl=0;this.Ej=!1}function il(a,b){td.call(this,a,b);this.Jh=null;this.dh=!1}function fj(){this.Nf=this.Of=this.M=null;this.F=Array(2);this.La=0;this.Ea=null;this.O=0;this.tb=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function qc(){Nb.call(this,2);this.Mj=!0;this.ee=new hl;this.af=Array(1024);this.xf=0}function pc(){Nb.call(this,1);this.Mj=!1}function Ed(){this.hh=this.gh=null}function td(a,b){this.userData=a;this.Ec=b;this.M=this.ia=null;this.I=this.H=this.G=this.L=this.K=this.J=0}function gj(){}function fc(){}function jl(){Wa.call(this,-1);this.min=new t;this.max=new t}function Yj(){Wa.call(this,-1)}function Wa(a){dd.call(this,a);this.Rb=F.defaultGJKMargin;this.Ql=!1}function dd(a){this.Lb=a;this.rf=0}function Nb(a){this.Lb=a;this.si=0;this.ae=this.Se=this.we=null;this.Mj=!1;this.ej=0;this.ih=null;this.Jl=0;this.Jj=new Yj;this.u=new jl;this.Pf=new Va;this.Z=new t;this.Ci=new Wj}function vb(a,b){function e(){}e.prototype=a;a=new e;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}Nb.prototype={Oh:function(){return null},Ph:function(){},vd:function(){},Mb:function(a,b){return a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I?a.I>b.L:!1},yi:function(){},ua:function(){return this.ae},Ab:function(){return this.Mj},Oa:function(){return this.ej},Ud:function(){},uf:function(){},kh:function(){}};dd.prototype={He:function(){},Nb:function(){},ti:function(){return!1},Oa:function(){return this.Lb},ua:function(){return this.rf},Ud:function(a,b,e,d){var c,f,h,l;c=a.x;f=a.y;a=a.z;h=b.x;l=b.y;b=b.z;c-=e.v;f-=e.A;a-=e.B;h-=e.v;l-=e.A;b-=e.B;if(this.ti(e.o*c+e.i*f+e.l*a,e.f*c+e.m*f+e.g*a,e.h*c+e.j*f+e.s*a,e.o*h+e.i*l+e.l*b,e.f*h+e.m*l+e.g*b,e.h*h+e.j*l+e.s*b,d)){var g,k;b=d.position;c=b.x;f=b.y;h=b.z;b=d.normal;l=b.x;g=b.y;k=b.z;var m,n;m=e.o*c+e.f*f+e.h*h;n=e.i*c+e.m*f+e.j*h;h=e.l*c+e.g*f+e.s*h;b=e.o*l+e.f*g+e.h*k;a=e.i*l+e.m*g+e.j*k;l=e.l*l+e.g*g+e.s*k;c=m+e.v;f=n+e.A;h+=e.B;e=d.position;e.x=c;e.y=f;e.z=h;d=d.normal;d.x=b;d.y=a;d.z=l;return!0}return!1}};Wa.ua=dd;Wa.prototype=vb(dd.prototype,{kn:function(){return this.Rb},Pn:function(a){0>a&&(a=0);this.Rb=a},Pd:function(){},Ud:function(a,b,e,d){return this.Ql?Fb.Oa.Ud(this,e,a,b,d):dd.prototype.Ud.call(this,a,b,e,d)}});Yj.ua=Wa;Yj.prototype=vb(Wa.prototype,{za:function(a,b,e){this.an=a;var d,c,f;d=e.x;c=e.y;f=e.z;var h;e=b.o*d+b.i*c+b.l*f;h=b.f*d+b.m*c+b.g*f;b=b.h*d+b.j*c+b.s*f;d=this.tl=new t;d.x=e;d.y=h;d.z=b;this.Rb=a.Rb},Pd:function(a,b){this.an.Pd(a,b);var e=this.tl;if(0<a.x*e.x+a.y*e.y+a.z*e.z){a=this.tl;var e=b.y+a.y,d=b.z+a.z;b.x+=a.x;b.y=e;b.z=d}}});jl.ua=Wa;jl.prototype=vb(Wa.prototype,{Pd:function(a,b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z}});fc.prototype={wd:function(){}};td.prototype={Ab:function(){return this.Ec},ua:function(){var a=new Ta;a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I;return a},Oa:function(a){a.ma=this.J;a.na=this.K;a.oa=this.L;a.ja=this.G;a.ka=this.H;a.la=this.I}};Ed.prototype={ua:function(){return this.gh},Oa:function(){return this.hh},Ab:function(){return this.M}};pc.ua=Nb;pc.prototype=vb(Nb.prototype,{Oh:function(a,b){a=new td(a,this.Jl++);this.si++;null==this.we?this.we=a:(this.Se.M=a,a.ia=this.Se);this.Se=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;return a},Ph:function(a){this.si--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.we&&(this.we=this.we.M);a==this.Se&&(this.Se=this.Se.ia);a.M=null;a.ia=null;a.userData=null},vd:function(a,b){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la},yi:function(){var a=this.ae;if(null!=a){for(;a.gh=null,a.hh=null,a=a.M,null!=a;);this.ae.M=this.ih;this.ih=this.ae;this.ae=null}this.ej=0;for(a=this.we;null!=a;){for(var b=a.M,e=a.M;null!=e;){var d=e.M;this.ej++;if(a.J<e.G&&a.G>e.J&&a.K<e.H&&a.H>e.K&&a.L<e.I&&a.I>e.L){var c=this.ih;null!=c?(this.ih=c.M,c.M=null):c=new Ed;null!=this.ae&&(c.M=this.ae);this.ae=c;c.gh=a;c.hh=e}e=d}a=b}},Ud:function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;for(var l=this.we;null!=l;){var g=l.M,k=d,m=c,n=a,q=f,p=h,r=b,v=k<q?k:q,la=m<p?m:p,x=n<r?n:r,A=m>p?m:p,u=n>r?n:r,C=l.J,K=l.K,B=l.L,D=l.G,z=l.H,t=l.I;if(C>(k>q?k:q)||D<v||K>A||z<la||B>u||t<x)n=!1;else{var q=q-k,p=p-m,L=r-n,r=0>q?-q:q,v=0>p?-p:p,A=0>L?-L:L,la=.5*(D-C),x=.5*(z-K),u=.5*(t-B),k=k-.5*(D+C),m=m-.5*(z+K),n=n-.5*(t+B),B=m*L-n*p;0<(0>B?-B:B)-(x*A+u*v)?n=!0:(n=n*q-k*L,n=0<(0>n?-n:n)-(u*r+la*A));n?n=!0:(n=k*p-m*q,n=0<(0>n?-n:n)-(la*v+x*r));n=n?!1:!0}n&&e.wd(l);l=g}},uf:function(a,b,e,d){for(var c=this.we;null!=c;){var f=c.M,h=this.u.min;h.x=c.J;h.y=c.K;h.z=c.L;h=this.u.max;h.x=c.G;h.y=c.H;h.z=c.I;this.Jj.za(a,b,e);h=Fb.Oa;0==h.pj(this.Jj,this.u,b,this.Pf,null,!1)&&0>=h.distance&&d.wd(c);c=f}},kh:function(a,b){for(var e=this.we;null!=e;){var d=e.M;a.ma<e.G&&a.ja>e.J&&a.na<e.H&&a.ka>e.K&&a.oa<e.I&&a.la>e.L&&b.wd(e);e=d}}});qc.ua=Nb;qc.prototype=vb(Nb.prototype,{lh:function(a,b){this.ej++;var e=0==a.O,d=0==b.O;a==b?e||(this.lh(a.F[0],b),this.lh(a.F[1],b)):a.J<b.G&&a.G>b.J&&a.K<b.H&&a.H>b.K&&a.L<b.I&&a.I>b.L&&(e&&d?(a=a.tb,b=b.tb,e=this.ih,null!=e?(this.ih=e.M,e.M=null):e=new Ed,null!=this.ae&&(e.M=this.ae),this.ae=e,e.gh=a,e.hh=b):d||a.O>b.O?(this.lh(a.F[0],b),this.lh(a.F[1],b)):(this.lh(b.F[0],a),this.lh(b.F[1],a)))},xl:function(a,b,e,d,c,f,h,l){var g=a.J,k=a.K,m=a.L,n=a.G,q=a.H,p=a.I,r;if(g>(b>c?b:c)||n<(b<c?b:c)||k>(e>f?e:f)||q<(e<f?e:f)||m>(d>h?d:h)||p<(d<h?d:h))r=!1;else{var v=c-b,la=f-e,x=h-d;r=0>v?-v:v;var A=0>la?-la:la,u=0>x?-x:x,C=.5*(n-g),t=.5*(q-k),B=.5*(p-m),g=b-.5*(n+g),k=e-.5*(q+k),m=d-.5*(p+m),p=k*x-m*la;0<(0>p?-p:p)-(t*u+B*A)?u=!0:(x=m*v-g*x,u=0<(0>x?-x:x)-(B*r+C*u));u?r=!0:(v=g*la-k*v,r=0<(0>v?-v:v)-(C*A+t*r));r=r?!1:!0}r&&(0==a.O?l.wd(a.tb):(this.xl(a.F[0],b,e,d,c,f,h,l),this.xl(a.F[1],b,e,d,c,f,h,l)))},al:function(a,b,e,d,c){var f=this.u.min;f.x=a.J;f.y=a.K;f.z=a.L;f=this.u.max;f.x=a.G;f.y=a.H;f.z=a.I;this.Jj.za(b,e,d);f=Fb.Oa;0==f.pj(this.Jj,this.u,e,this.Pf,null,!1)&&0>=f.distance&&(0==a.O?c.wd(a.tb):(this.al(a.F[0],b,e,d,c),this.al(a.F[1],b,e,d,c)))},Wk:function(a,b,e){a.J<b.ja&&a.G>b.ma&&a.K<b.ka&&a.H>b.na&&a.L<b.la&&a.I>b.oa&&(0==a.O?e.wd(a.tb):(this.Wk(a.F[0],b,e),this.Wk(a.F[1],b,e)))},Oh:function(a,b){a=new il(a,this.Jl++);this.si++;null==this.we?this.we=a:(this.Se.M=a,a.ia=this.Se);this.Se=a;a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;b=this.ee;var e=b.Vc;null!=e?(b.Vc=e.M,e.M=null):e=new fj;var d=e;d.tb=a;a.Jh=d;d.J=a.J;d.K=a.K;d.L=a.L;d.G=a.G;d.H=a.H;d.I=a.I;b.Tj++;null==b.Wf?b.Wf=d:(b.$e.Nf=d,d.Of=b.$e);b.$e=d;if(null==b.Qb)b.Qb=d;else{for(var c=b.Qb;0<c.O&&(e=b.wi.Hl(c,d),-1!=e);)c=c.F[e];var f=c.Ea,e=b.Vc;null!=e?(b.Vc=e.M,e.M=null):e=new fj;if(null==f)b.Qb=e;else{var h=c.La;f.F[h]=e;e.Ea=f;e.La=h}f=c.La;e.F[f]=c;c.Ea=e;c.La=f;c=c.La^1;e.F[c]=d;d.Ea=e;for(d.La=c;null!=e;){if(b.wi.Ej&&!(2>e.O)){var d=e.Ea,f=e.F[0],h=e.F[1],l=f.O-h.O,c=e.La;1<l?(h=f.F[0],l=f.F[1],h.O>l.O?(f.F[1]=e,e.Ea=f,e.La=1,e.F[0]=l,l.Ea=e,l.La=0):(f.F[0]=e,e.Ea=f,e.La=0,e.F[0]=h,h.Ea=e,h.La=0),h=f.F[0],l=f.F[1],f.J=h.J<l.J?h.J:l.J,f.K=h.K<l.K?h.K:l.K,f.L=h.L<l.L?h.L:l.L,f.G=h.G>l.G?h.G:l.G,f.H=h.H>l.H?h.H:l.H,f.I=h.I>l.I?h.I:l.I,h=f.F[0].O,l=f.F[1].O,f.O=(h>l?h:l)+1,h=e.F[0],l=e.F[1],e.J=h.J<l.J?h.J:l.J,e.K=h.K<l.K?h.K:l.K,e.L=h.L<l.L?h.L:l.L,e.G=h.G>l.G?h.G:l.G,e.H=h.H>l.H?h.H:l.H,e.I=h.I>l.I?h.I:l.I,h=e.F[0].O,l=e.F[1].O,e.O=(h>l?h:l)+1,null!=d?(d.F[c]=f,f.Ea=d,f.La=c):(b.Qb=f,f.Ea=null),e=f):-1>l&&(f=h.F[0],l=h.F[1],f.O>l.O?(h.F[1]=e,e.Ea=h,e.La=1,e.F[1]=l,l.Ea=e,l.La=1):(h.F[0]=e,e.Ea=h,e.La=0,e.F[1]=f,f.Ea=e,f.La=1),f=h.F[0],l=h.F[1],h.J=f.J<l.J?f.J:l.J,h.K=f.K<l.K?f.K:l.K,h.L=f.L<l.L?f.L:l.L,h.G=f.G>l.G?f.G:l.G,h.H=f.H>l.H?f.H:l.H,h.I=f.I>l.I?f.I:l.I,f=h.F[0].O,l=h.F[1].O,h.O=(f>l?f:l)+1,f=e.F[0],l=e.F[1],e.J=f.J<l.J?f.J:l.J,e.K=f.K<l.K?f.K:l.K,e.L=f.L<l.L?f.L:l.L,e.G=f.G>l.G?f.G:l.G,e.H=f.H>l.H?f.H:l.H,e.I=f.I>l.I?f.I:l.I,f=e.F[0].O,l=e.F[1].O,e.O=(f>l?f:l)+1,null!=d?(d.F[c]=h,h.Ea=d,h.La=c):(b.Qb=h,h.Ea=null),e=h)}d=e.F[0].O;c=e.F[1].O;e.O=(d>c?d:c)+1;d=e.F[0];c=e.F[1];e.J=d.J<c.J?d.J:c.J;e.K=d.K<c.K?d.K:c.K;e.L=d.L<c.L?d.L:c.L;e.G=d.G>c.G?d.G:c.G;e.H=d.H>c.H?d.H:c.H;e.I=d.I>c.I?d.I:c.I;e=e.Ea}}if(!a.dh){a.dh=!0;if(this.af.length==this.xf){b=Array(this.xf<<1);e=0;for(d=this.xf;e<d;)c=e++,b[c]=this.af[c],this.af[c]=null;this.af=b}this.af[this.xf++]=a}return a},Ph:function(a){this.si--;var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.we&&(this.we=this.we.M);a==this.Se&&(this.Se=this.Se.ia);a.M=null;a.ia=null;b=this.ee;e=a.Jh;b.Tj--;var d=e.Of,c=e.Nf;null!=d&&(d.Nf=c);null!=c&&(c.Of=d);e==b.Wf&&(b.Wf=b.Wf.Nf);e==b.$e&&(b.$e=b.$e.Of);e.Nf=null;e.Of=null;if(b.Qb==e)b.Qb=null;else{var d=e.Ea,c=d.F[e.La^1],f=d.Ea;if(null==f)c.Ea=null,c.La=0,b.Qb=c,d.F[0]=null,d.F[1]=null,d.La=0,d.Ea=null,d.O=0,d.tb=null,d.M=b.Vc,b.Vc=d;else{var h=d.La;f.F[h]=c;c.Ea=f;c.La=h;d.F[0]=null;d.F[1]=null;d.La=0;d.Ea=null;d.O=0;d.tb=null;d.M=b.Vc;b.Vc=d;for(d=f;null!=d;){if(b.wi.Ej&&!(2>d.O)){var c=d.Ea,h=d.F[0],l=d.F[1],g=h.O-l.O,f=d.La;1<g?(l=h.F[0],g=h.F[1],l.O>g.O?(h.F[1]=d,d.Ea=h,d.La=1,d.F[0]=g,g.Ea=d,g.La=0):(h.F[0]=d,d.Ea=h,d.La=0,d.F[0]=l,l.Ea=d,l.La=0),l=h.F[0],g=h.F[1],h.J=l.J<g.J?l.J:g.J,h.K=l.K<g.K?l.K:g.K,h.L=l.L<g.L?l.L:g.L,h.G=l.G>g.G?l.G:g.G,h.H=l.H>g.H?l.H:g.H,h.I=l.I>g.I?l.I:g.I,l=h.F[0].O,g=h.F[1].O,h.O=(l>g?l:g)+1,l=d.F[0],g=d.F[1],d.J=l.J<g.J?l.J:g.J,d.K=l.K<g.K?l.K:g.K,d.L=l.L<g.L?l.L:g.L,d.G=l.G>g.G?l.G:g.G,d.H=l.H>g.H?l.H:g.H,d.I=l.I>g.I?l.I:g.I,l=d.F[0].O,g=d.F[1].O,d.O=(l>g?l:g)+1,null!=c?(c.F[f]=h,h.Ea=c,h.La=f):(b.Qb=h,h.Ea=null),d=h):-1>g&&(h=l.F[0],g=l.F[1],h.O>g.O?(l.F[1]=d,d.Ea=l,d.La=1,d.F[1]=g,g.Ea=d,g.La=1):(l.F[0]=d,d.Ea=l,d.La=0,d.F[1]=h,h.Ea=d,h.La=1),h=l.F[0],g=l.F[1],l.J=h.J<g.J?h.J:g.J,l.K=h.K<g.K?h.K:g.K,l.L=h.L<g.L?h.L:g.L,l.G=h.G>g.G?h.G:g.G,l.H=h.H>g.H?h.H:g.H,l.I=h.I>g.I?h.I:g.I,h=l.F[0].O,g=l.F[1].O,l.O=(h>g?h:g)+1,h=d.F[0],g=d.F[1],d.J=h.J<g.J?h.J:g.J,d.K=h.K<g.K?h.K:g.K,d.L=h.L<g.L?h.L:g.L,d.G=h.G>g.G?h.G:g.G,d.H=h.H>g.H?h.H:g.H,d.I=h.I>g.I?h.I:g.I,h=d.F[0].O,g=d.F[1].O,d.O=(h>g?h:g)+1,null!=c?(c.F[f]=l,l.Ea=c,l.La=f):(b.Qb=l,l.Ea=null),d=l)}c=d.F[0].O;f=d.F[1].O;d.O=(c>f?c:f)+1;c=d.F[0];f=d.F[1];d.J=c.J<f.J?c.J:f.J;d.K=c.K<f.K?c.K:f.K;d.L=c.L<f.L?c.L:f.L;d.G=c.G>f.G?c.G:f.G;d.H=c.H>f.H?c.H:f.H;d.I=c.I>f.I?c.I:f.I;d=d.Ea}}}a.Jh=null;e.F[0]=null;e.F[1]=null;e.La=0;e.Ea=null;e.O=0;e.tb=null;e.M=b.Vc;b.Vc=e;a.userData=null;a.M=null;a.ia=null;a.dh&&(a.dh=!1)},vd:function(a,b,e){if(!(a.J<=b.ma&&a.G>=b.ja&&a.K<=b.na&&a.H>=b.ka&&a.L<=b.oa&&a.I>=b.la)){a.J=b.ma;a.K=b.na;a.L=b.oa;a.G=b.ja;a.H=b.ka;a.I=b.la;b=F.bvhProxyPadding;a.J-=b;a.K-=b;a.L-=b;a.G+=b;a.H+=b;a.I+=b;if(null!=e){var d;b=e.x;d=e.y;e=e.z;a.J+=0<b?0:b;a.K+=0<d?0:d;a.L+=0<e?0:e;a.G+=0>b?0:b;a.H+=0>d?0:d;a.I+=0>e?0:e}if(!a.dh){a.dh=!0;if(this.af.length==this.xf){e=Array(this.xf<<1);b=0;for(d=this.xf;b<d;){var c=b++;e[c]=this.af[c];this.af[c]=null}this.af=e}this.af[this.xf++]=a}}},yi:function(){var a=this.ae;if(null!=a){for(;a.gh=null,a.hh=null,a=a.M,null!=a;);this.ae.M=this.ih;this.ih=this.ae;this.ae=null}this.ej=0;if(!(2>this.si)){for(var b=this.xf/this.si<F.bvhIncrementalCollisionThreshold,e=0,d=this.xf;e<d;){var c=e++,f=this.af[c];if(f.dh){var h=this.ee,l=f.Jh;h.Tj--;var g=l.Of,k=l.Nf;null!=g&&(g.Nf=k);null!=k&&(k.Of=g);l==h.Wf&&(h.Wf=h.Wf.Nf);l==h.$e&&(h.$e=h.$e.Of);l.Nf=null;l.Of=null;if(h.Qb==l)h.Qb=null;else{var m=l.Ea,n=m.F[l.La^1],q=m.Ea;if(null==q)n.Ea=null,n.La=0,h.Qb=n,m.M=null,m.La=0,m.F[0]=null,m.F[1]=null,m.La=0,m.Ea=null,m.O=0,m.tb=null,m.M=h.Vc,h.Vc=m;else{n.Ea=q;var p=m.La;q.F[p]=n;n.Ea=q;n.La=p;m.M=null;m.La=0;m.F[0]=null;m.F[1]=null;m.La=0;m.Ea=null;m.O=0;m.tb=null;m.M=h.Vc;h.Vc=m;for(var r=q;null!=r;){if(h.wi.Ej&&!(2>r.O)){var v=r.Ea,la=r.F[0],x=r.F[1],A=la.O-x.O,u=r.La;if(1<A){var C=la.F[0],t=la.F[1];if(C.O>t.O){la.F[1]=r;r.Ea=la;r.La=1;r.F[0]=t;t.Ea=r;t.La=0;var B=la.F[0],D=la.F[1];la.J=B.J<D.J?B.J:D.J;la.K=B.K<D.K?B.K:D.K;la.L=B.L<D.L?B.L:D.L;la.G=B.G>D.G?B.G:D.G;la.H=B.H>D.H?B.H:D.H;la.I=B.I>D.I?B.I:D.I;var z=la.F[0].O,Eb=la.F[1].O;la.O=(z>Eb?z:Eb)+1;var L=r.F[0],I=r.F[1];r.J=L.J<I.J?L.J:I.J;r.K=L.K<I.K?L.K:I.K;r.L=L.L<I.L?L.L:I.L;r.G=L.G>I.G?L.G:I.G;r.H=L.H>I.H?L.H:I.H;r.I=L.I>I.I?L.I:I.I;var Rb=r.F[0].O,Ae=r.F[1].O;r.O=(Rb>Ae?Rb:Ae)+1}else{la.F[0]=r;r.Ea=la;r.La=0;r.F[0]=C;C.Ea=r;C.La=0;var lg=la.F[0],db=la.F[1];la.J=lg.J<db.J?lg.J:db.J;la.K=lg.K<db.K?lg.K:db.K;la.L=lg.L<db.L?lg.L:db.L;la.G=lg.G>db.G?lg.G:db.G;la.H=lg.H>db.H?lg.H:db.H;la.I=lg.I>db.I?lg.I:db.I;var E=la.F[0].O,vc=la.F[1].O;la.O=(E>vc?E:vc)+1;var ib=r.F[0],Da=r.F[1];r.J=ib.J<Da.J?ib.J:Da.J;r.K=ib.K<Da.K?ib.K:Da.K;r.L=ib.L<Da.L?ib.L:Da.L;r.G=ib.G>Da.G?ib.G:Da.G;r.H=ib.H>Da.H?ib.H:Da.H;r.I=ib.I>Da.I?ib.I:Da.I;var Ia=r.F[0].O,oa=r.F[1].O;r.O=(Ia>oa?Ia:oa)+1}null!=v?(v.F[u]=la,la.Ea=v,la.La=u):(h.Qb=la,la.Ea=null);r=la}else if(-1>A){var R=x.F[0],M=x.F[1];if(R.O>M.O){x.F[1]=r;r.Ea=x;r.La=1;r.F[1]=M;M.Ea=r;M.La=1;var Ca=x.F[0],xa=x.F[1];x.J=Ca.J<xa.J?Ca.J:xa.J;x.K=Ca.K<xa.K?Ca.K:xa.K;x.L=Ca.L<xa.L?Ca.L:xa.L;x.G=Ca.G>xa.G?Ca.G:xa.G;x.H=Ca.H>xa.H?Ca.H:xa.H;x.I=Ca.I>xa.I?Ca.I:xa.I;var Ra=x.F[0].O,Ba=x.F[1].O;x.O=(Ra>Ba?Ra:Ba)+1;var sa=r.F[0],Sa=r.F[1];r.J=sa.J<Sa.J?sa.J:Sa.J;r.K=sa.K<Sa.K?sa.K:Sa.K;r.L=sa.L<Sa.L?sa.L:Sa.L;r.G=sa.G>Sa.G?sa.G:Sa.G;r.H=sa.H>Sa.H?sa.H:Sa.H;r.I=sa.I>Sa.I?sa.I:Sa.I;var G=r.F[0].O,Qa=r.F[1].O;r.O=(G>Qa?G:Qa)+1}else{x.F[0]=r;r.Ea=x;r.La=0;r.F[1]=R;R.Ea=r;R.La=1;var W=x.F[0],N=x.F[1];x.J=W.J<N.J?W.J:N.J;x.K=W.K<N.K?W.K:N.K;x.L=W.L<N.L?W.L:N.L;x.G=W.G>N.G?W.G:N.G;x.H=W.H>N.H?W.H:N.H;x.I=W.I>N.I?W.I:N.I;var Q=x.F[0].O,Z=x.F[1].O;x.O=(Q>Z?Q:Z)+1;var ba=r.F[0],S=r.F[1];r.J=ba.J<S.J?ba.J:S.J;r.K=ba.K<S.K?ba.K:S.K;r.L=ba.L<S.L?ba.L:S.L;r.G=ba.G>S.G?ba.G:S.G;r.H=ba.H>S.H?ba.H:S.H;r.I=ba.I>S.I?ba.I:S.I;var X=r.F[0].O,y=r.F[1].O;r.O=(X>y?X:y)+1}null!=v?(v.F[u]=x,x.Ea=v,x.La=u):(h.Qb=x,x.Ea=null);r=x}}var fa=r.F[0].O,T=r.F[1].O;r.O=(fa>T?fa:T)+1;var ia=r.F[0],pa=r.F[1];r.J=ia.J<pa.J?ia.J:pa.J;r.K=ia.K<pa.K?ia.K:pa.K;r.L=ia.L<pa.L?ia.L:pa.L;r.G=ia.G>pa.G?ia.G:pa.G;r.H=ia.H>pa.H?ia.H:pa.H;r.I=ia.I>pa.I?ia.I:pa.I;r=r.Ea}}}f.Jh=null;l.M=null;l.La=0;l.F[0]=null;l.F[1]=null;l.La=0;l.Ea=null;l.O=0;l.tb=null;l.M=h.Vc;h.Vc=l;var wa=this.ee,ya=wa.Vc;null!=ya?(wa.Vc=ya.M,ya.M=null):ya=new fj;var ha=ya;ha.tb=f;f.Jh=ha;ha.J=f.J;ha.K=f.K;ha.L=f.L;ha.G=f.G;ha.H=f.H;ha.I=f.I;wa.Tj++;null==wa.Wf?wa.Wf=ha:(wa.$e.Nf=ha,ha.Of=wa.$e);wa.$e=ha;if(null==wa.Qb)wa.Qb=ha;else{for(var Y=wa.Qb;0<Y.O;){var ma=wa.wi.Hl(Y,ha);if(-1==ma)break;else Y=Y.F[ma]}var Ea=Y.Ea,Ha=wa.Vc;null!=Ha?(wa.Vc=Ha.M,Ha.M=null):Ha=new fj;var J=Ha;if(null==Ea)wa.Qb=J;else{var ta=Y.La;Ea.F[ta]=J;J.Ea=Ea;J.La=ta}var ea=Y.La;J.F[ea]=Y;Y.Ea=J;Y.La=ea;var aa=Y.La^1;J.F[aa]=ha;ha.Ea=J;for(ha.La=aa;null!=J;){if(wa.wi.Ej&&!(2>J.O)){var Za=J.Ea,da=J.F[0],O=J.F[1],va=da.O-O.O,ob=J.La;if(1<va){var na=da.F[0],U=da.F[1];if(na.O>U.O){da.F[1]=J;J.Ea=da;J.La=1;J.F[0]=U;U.Ea=J;U.La=0;var La=da.F[0],ab=da.F[1];da.J=La.J<ab.J?La.J:ab.J;da.K=La.K<ab.K?La.K:ab.K;da.L=La.L<ab.L?La.L:ab.L;da.G=La.G>ab.G?La.G:ab.G;da.H=La.H>ab.H?La.H:ab.H;da.I=La.I>ab.I?La.I:ab.I;var ub=da.F[0].O,gb=da.F[1].O;da.O=(ub>gb?ub:gb)+1;var ua=J.F[0],Aa=J.F[1];J.J=ua.J<Aa.J?ua.J:Aa.J;J.K=ua.K<Aa.K?ua.K:Aa.K;J.L=ua.L<Aa.L?ua.L:Aa.L;J.G=ua.G>Aa.G?ua.G:Aa.G;J.H=ua.H>Aa.H?ua.H:Aa.H;J.I=ua.I>Aa.I?ua.I:Aa.I;var Ya=J.F[0].O,Ja=J.F[1].O;J.O=(Ya>Ja?Ya:Ja)+1}else{da.F[0]=J;J.Ea=da;J.La=0;J.F[0]=na;na.Ea=J;na.La=0;var wb=da.F[0],Fa=da.F[1];da.J=wb.J<Fa.J?wb.J:Fa.J;da.K=wb.K<Fa.K?wb.K:Fa.K;da.L=wb.L<Fa.L?wb.L:Fa.L;da.G=wb.G>Fa.G?wb.G:Fa.G;da.H=wb.H>Fa.H?wb.H:Fa.H;da.I=wb.I>Fa.I?wb.I:Fa.I;var ja=da.F[0].O,qa=da.F[1].O;da.O=(ja>qa?ja:qa)+1;var eb=J.F[0],Oa=J.F[1];J.J=eb.J<Oa.J?eb.J:Oa.J;J.K=eb.K<Oa.K?eb.K:Oa.K;J.L=eb.L<Oa.L?eb.L:Oa.L;J.G=eb.G>Oa.G?eb.G:Oa.G;J.H=eb.H>Oa.H?eb.H:Oa.H;J.I=eb.I>Oa.I?eb.I:Oa.I;var Bb=J.F[0].O,mb=J.F[1].O;J.O=(Bb>mb?Bb:mb)+1}null!=Za?(Za.F[ob]=da,da.Ea=Za,da.La=ob):(wa.Qb=da,da.Ea=null);J=da}else if(-1>va){var hb=O.F[0],pb=O.F[1];if(hb.O>pb.O){O.F[1]=J;J.Ea=O;J.La=1;J.F[1]=pb;pb.Ea=J;pb.La=1;var qb=O.F[0],$a=O.F[1];O.J=qb.J<$a.J?qb.J:$a.J;O.K=qb.K<$a.K?qb.K:$a.K;O.L=qb.L<$a.L?qb.L:$a.L;O.G=qb.G>$a.G?qb.G:$a.G;O.H=qb.H>$a.H?qb.H:$a.H;O.I=qb.I>$a.I?qb.I:$a.I;var P=O.F[0].O,Ab=O.F[1].O;O.O=(P>Ab?P:Ab)+1;var bb=J.F[0],Ka=J.F[1];J.J=bb.J<Ka.J?bb.J:Ka.J;J.K=bb.K<Ka.K?bb.K:Ka.K;J.L=bb.L<Ka.L?bb.L:Ka.L;J.G=bb.G>Ka.G?bb.G:Ka.G;J.H=bb.H>Ka.H?bb.H:Ka.H;J.I=bb.I>Ka.I?bb.I:Ka.I;var Zb=J.F[0].O,H=J.F[1].O;J.O=(Zb>H?Zb:H)+1}else{O.F[0]=J;J.Ea=O;J.La=0;J.F[1]=hb;hb.Ea=J;hb.La=1;var cb=O.F[0],jb=O.F[1];O.J=cb.J<jb.J?cb.J:jb.J;O.K=cb.K<jb.K?cb.K:jb.K;O.L=cb.L<jb.L?cb.L:jb.L;O.G=cb.G>jb.G?cb.G:jb.G;O.H=cb.H>jb.H?cb.H:jb.H;O.I=cb.I>jb.I?cb.I:jb.I;var jc=O.F[0].O,kb=O.F[1].O;O.O=(jc>kb?jc:kb)+1;var xb=J.F[0],w=J.F[1];J.J=xb.J<w.J?xb.J:w.J;J.K=xb.K<w.K?xb.K:w.K;J.L=xb.L<w.L?xb.L:w.L;J.G=xb.G>w.G?xb.G:w.G;J.H=xb.H>w.H?xb.H:w.H;J.I=xb.I>w.I?xb.I:w.I;var V=J.F[0].O,ca=J.F[1].O;J.O=(V>ca?V:ca)+1}null!=Za?(Za.F[ob]=O,O.Ea=Za,O.La=ob):(wa.Qb=O,O.Ea=null);J=O}}var ad=J.F[0].O,cc=J.F[1].O;J.O=(ad>cc?ad:cc)+1;var Pa=J.F[0],nb=J.F[1];J.J=Pa.J<nb.J?Pa.J:nb.J;J.K=Pa.K<nb.K?Pa.K:nb.K;J.L=Pa.L<nb.L?Pa.L:nb.L;J.G=Pa.G>nb.G?Pa.G:nb.G;J.H=Pa.H>nb.H?Pa.H:nb.H;J.I=Pa.I>nb.I?Pa.I:nb.I;J=J.Ea}}b&&this.lh(this.ee.Qb,f.Jh);f.dh=!1}this.af[c]=null}b||this.lh(this.ee.Qb,this.ee.Qb);this.xf=0}},Ud:function(a,b,e){null!=this.ee.Qb&&this.xl(this.ee.Qb,a.x,a.y,a.z,b.x,b.y,b.z,e)},uf:function(a,b,e,d){null!=this.ee.Qb&&this.al(this.ee.Qb,a,b,e,d)},kh:function(a,b){null!=this.ee.Qb&&this.Wk(this.ee.Qb,a,b)},zn:function(){return this.ee.Sm()}});il.ua=td;il.prototype=vb(td.prototype,{});Al.prototype={Hl:function(a,b){switch(this.Kl){case 0:var e,d,c;e=b.J+b.G;d=b.K+b.H;c=b.L+b.I;var f=a.F[0],h=a.F[1],l,g;b=f.J+f.G;a=f.K+f.H;f=f.L+f.I;l=h.J+h.G;g=h.K+h.H;h=h.L+h.I;b-=e;a-=d;f-=c;l-=e;g-=d;h-=c;return b*b+a*a+f*f<l*l+g*g+h*h?0:1;case 1:f=a.F[0];e=a.F[1];d=a.H-a.K;c=a.I-a.L;var h=2*((a.G-a.J)*(d+c)+d*c),k,m;d=a.J<b.J?a.J:b.J;k=a.K<b.K?a.K:b.K;l=a.L<b.L?a.L:b.L;c=a.G>b.G?a.G:b.G;m=a.H>b.H?a.H:b.H;g=a.I>b.I?a.I:b.I;a=m-k;l=g-l;d=2*((c-d)*(a+l)+a*l);a=2*d;var n=2*(d-h),h=n;d=f.J<b.J?f.J:b.J;k=f.K<b.K?f.K:b.K;l=f.L<b.L?f.L:b.L;c=f.G>b.G?f.G:b.G;m=f.H>b.H?f.H:b.H;g=f.I>b.I?f.I:b.I;0==f.O?(f=m-k,l=g-l,h+=2*((c-d)*(f+l)+f*l)):(k=m-k,l=g-l,g=f.H-f.K,m=f.I-f.L,h+=2*((c-d)*(k+l)+k*l)-2*((f.G-f.J)*(g+m)+g*m));f=n;d=e.J<b.J?e.J:b.J;k=e.K<b.K?e.K:b.K;l=e.L<b.L?e.L:b.L;c=e.G>b.G?e.G:b.G;m=e.H>b.H?e.H:b.H;g=e.I>b.I?e.I:b.I;0==e.O?(e=m-k,b=g-l,f+=2*((c-d)*(e+b)+e*b)):(b=m-k,l=g-l,g=e.H-e.K,n=e.I-e.L,f+=2*((c-d)*(b+l)+b*l)-2*((e.G-e.J)*(g+n)+g*n));return a<h?a<f?-1:1:h<f?0:1;default:return console.log("BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this.Kl),-1}}};hl.prototype={Sm:function(){return this.dl(this.Qb)},dl:function(a){if(null==a||0==a.O)return 0;var b=a.F[0].O-a.F[1].O;0>b&&(b=-b);return b+this.dl(a.F[0])+this.dl(a.F[1])}};Ta.prototype={za:function(a,b){this.ma=a.x;this.na=a.y;this.oa=a.z;this.ja=b.x;this.ka=b.y;this.la=b.z;return this},Jc:function(){var a=new t;a.x=this.ma;a.y=this.na;a.z=this.oa;return a},dd:function(a){a.x=this.ma;a.y=this.na;a.z=this.oa},Wd:function(a){this.ma=a.x;this.na=a.y;this.oa=a.z;return this},Ac:function(){var a=new t;a.x=this.ja;a.y=this.ka;a.z=this.la;return a},Dc:function(a){a.x=this.ja;a.y=this.ka;a.z=this.la},yd:function(a){this.ja=a.x;this.ka=a.y;this.la=a.z;return this},Ab:function(){var a=new t,b,e,d;b=this.ma+this.ja;e=this.na+this.ka;d=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},Mb:function(a){var b,e,d;b=this.ma+this.ja;e=this.na+this.ka;d=this.oa+this.la;a.x=.5*b;a.y=.5*e;a.z=.5*d},nc:function(){var a=new t,b,e,d;b=this.ja-this.ma;e=this.ka-this.na;d=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*d;return a},oc:function(a){var b,e,d;b=this.ja-this.ma;e=this.ka-this.na;d=this.la-this.oa;a.x=.5*b;a.y=.5*e;a.z=.5*d},ua:function(a){this.ma=this.ma<a.ma?this.ma:a.ma;this.na=this.na<a.na?this.na:a.na;this.oa=this.oa<a.oa?this.oa:a.oa;this.ja=this.ja>a.ja?this.ja:a.ja;this.ka=this.ka>a.ka?this.ka:a.ka;this.la=this.la>a.la?this.la:a.la;return this},Oa:function(a){var b=new Ta;b.ma=this.ma<a.ma?this.ma:a.ma;b.na=this.na<a.na?this.na:a.na;b.oa=this.oa<a.oa?this.oa:a.oa;b.ja=this.ja>a.ja?this.ja:a.ja;b.ka=this.ka>a.ka?this.ka:a.ka;b.la=this.la>a.la?this.la:a.la;return b},ed:function(a){return this.ma<a.ja&&this.ja>a.ma&&this.na<a.ka&&this.ka>a.na&&this.oa<a.la?this.la>a.oa:!1},sc:function(a){var b=new Ta;b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la;return b},tc:function(a,b){b.ma=this.ma>a.ma?this.ma:a.ma;b.na=this.na>a.na?this.na:a.na;b.oa=this.oa>a.oa?this.oa:a.oa;b.ja=this.ja<a.ja?this.ja:a.ja;b.ka=this.ka<a.ka?this.ka:a.ka;b.la=this.la<a.la?this.la:a.la},be:function(a){this.ma=a.ma;this.na=a.na;this.oa=a.oa;this.ja=a.ja;this.ka=a.ka;this.la=a.la;return this},clone:function(){var a=new Ta;a.ma=this.ma;a.na=this.na;a.oa=this.oa;a.ja=this.ja;a.ka=this.ka;a.la=this.la;return a}};Ad.ua=Wa;Ad.prototype=vb(Wa.prototype,{ln:function(){var a=new t;a.x=this.De;a.y=this.Ee;a.z=this.Fe;return a},mn:function(a){a.x=this.De;a.y=this.Ee;a.z=this.Fe},He:function(){this.rf=8*this.De*this.Ee*this.Fe;var a,b,e;a=this.De*this.De;b=this.Ee*this.Ee;e=this.Fe*this.Fe;this.fg=.3333333333333333*(b+e);this.ig=this.hg=this.gg=0;this.jg=.3333333333333333*(e+a);this.mg=this.lg=this.kg=0;this.ng=.3333333333333333*(a+b)},Nb:function(a,b){var e,d,c,f,h;f=b.o*this.tk+b.f*this.uk+b.h*this.vk;h=b.i*this.tk+b.m*this.uk+b.j*this.vk;e=b.l*this.tk+b.g*this.uk+b.s*this.vk;var l,g;l=b.o*this.wk+b.f*this.xk+b.h*this.yk;g=b.i*this.wk+b.m*this.xk+b.j*this.yk;d=b.l*this.wk+b.g*this.xk+b.s*this.yk;var k,m;k=b.o*this.zk+b.f*this.Ak+b.h*this.Bk;m=b.i*this.zk+b.m*this.Ak+b.j*this.Bk;c=b.l*this.zk+b.g*this.Ak+b.s*this.Bk;f=(0>f?-f:f)+(0>l?-l:l)+(0>k?-k:k);h=(0>h?-h:h)+(0>g?-g:g)+(0>m?-m:m);e=(0>e?-e:e)+(0>d?-d:d)+(0>c?-c:c);a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-e;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+e},Pd:function(a,b){var e,d,c;c=d=e=this.Rb;e=e<this.De?e:this.De;d=d<this.Ee?d:this.Ee;c=c<this.Fe?c:this.Fe;e=this.De-e;d=this.Ee-d;c=this.Fe-c;b.x=0<a.x?e:-e;b.y=0<a.y?d:-d;b.z=0<a.z?c:-c},ti:function(a,b,e,d,c,f,h){var l=this.De,g=this.Ee,k=this.Fe;d-=a;c-=b;f-=e;var m=0,n=0,q=0,p=1,r=1,v=1;if(-1E-6<d&&1E-6>d){if(a<=-l||a>=l)return!1}else{var la=1/d,x=(-l-a)*la,l=(l-a)*la;x>l&&(la=x,x=l,l=la);0<x&&(m=x);1>l&&(p=l)}if(-1E-6<c&&1E-6>c){if(b<=-g||b>=g)return!1}else x=1/c,l=(-g-b)*x,g=(g-b)*x,l>g&&(x=l,l=g,g=x),0<l&&(n=l),1>g&&(r=g);if(-1E-6<f&&1E-6>f){if(e<=-k||e>=k)return!1}else l=1/f,g=(-k-e)*l,k=(k-e)*l,g>k&&(l=g,g=k,k=l),0<g&&(q=g),1>k&&(v=k);if(1<=m||1<=n||1<=q||0>=p||0>=r||0>=v)return!1;k=m;m=0;n>k&&(k=n,m=1);q>k&&(k=q,m=2);r<p&&(p=r);v<p&&(p=v);if(k>p||!k)return!1;switch(m){case 0:h.normal.za(0<d?-1:1,0,0);break;case 1:h.normal.za(0,0<c?-1:1,0);break;case 2:h.normal.za(0,0,0<f?-1:1)}h.position.za(a+k*d,b+k*c,e+k*f);h.fraction=k;return!0}});Ke.ua=Wa;Ke.prototype=vb(Wa.prototype,{Qh:function(){return this.bb},rj:function(){return this.Ib},He:function(){var a=this.bb*this.bb,b=this.Ib*this.Ib,e=6.28318530717958*a*this.Ib,d=3.14159265358979*a*this.bb*4/3,c=(this.rf=e+d)?1/this.rf:0;this.fg=b=c*(e*(.25*a+b/3)+d*(.4*a+this.Ib*this.bb*.75+b));this.ig=this.hg=this.gg=0;this.jg=c*(e*a*.5+d*a*.4);this.mg=this.lg=this.kg=0;this.ng=b},Nb:function(a,b){var e,d,c;c=d=e=this.bb;var f,h,l;f=b.f;h=b.m;l=b.g;f=(0>f?-f:f)*this.Ib;h=(0>h?-h:h)*this.Ib;l=(0>l?-l:l)*this.Ib;e+=f;d+=h;c+=l;a.ma=b.v-e;a.na=b.A-d;a.oa=b.B-c;a.ja=b.v+e;a.ka=b.A+d;a.la=b.B+c},Pd:function(a,b){0<a.y?b.za(0,this.Ib,0):b.za(0,-this.Ib,0)},ti:function(a,b,e,d,c,f,h){var l=this.Ib,g=d-a,k=f-e,m,n=g*g+k*k,q=a*g+e*k;m=a*a+e*e-this.bb*this.bb;var p=q*q-n*m;if(0>p)return!1;if(0<n){if(p=Math.sqrt(p),m=(-q-p)/n,1<=m||0>=(-q+p)/n)return!1}else{if(0<=m)return!1;m=0}n=b+(c-b)*m;if(n>-l&&n<l)return 0<m?(f=m,q=h.normal.za(a+g*f,0,e+k*f),b=Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),0<b&&(b=1/b),c=q.y*b,d=q.z*b,q.x=q.x*b,q.y=c,q.z=d,h.position.za(a+f*g,n,e+f*k),h.fraction=f,!0):!1;var g=0>n?-l:l,r;r=a-0;l=b-g;k=e-0;a=d-a;b=c-b;e=f-e;n=a*a+b*b+e*e;q=r*a+l*b+k*e;m=r*r+l*l+k*k-this.bb*this.bb;p=q*q-n*m;if(0>p)return!1;f=(-q-Math.sqrt(p))/n;if(0>f||1<f)return!1;a=r+a*f;n=l+b*f;e=k+e*f;q=a*a+n*n+e*e;0<q&&(q=1/Math.sqrt(q));b=h.position;b.x=a+0;b.y=n+g;b.z=e+0;g=h.normal;g.x=a*q;g.y=n*q;g.z=e*q;h.fraction=f;return!0}});ke.ua=Wa;ke.prototype=vb(Wa.prototype,{Qh:function(){return this.bb},rj:function(){return this.Ib},He:function(){var a=this.bb*this.bb,b=this.Ib*this.Ib*4;this.rf=3.14159265358979*a*this.Ib*2/3;this.fg=.05*(3*a+2*b);this.ig=this.hg=this.gg=0;this.jg=.3*a;this.mg=this.lg=this.kg=0;this.ng=.08333333333333333*(3*a+2*b)},Nb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.bb;h*=this.bb;l*=this.bb;e*=this.Ib;d*=this.Ib;c*=this.Ib;var g,k,m,n,q,p;g=-e-f;k=-d-h;m=-c-l;n=-e+f;q=-d+h;p=-c+l;l=g>n?g:n;h=k>q?k:q;f=m>p?m:p;g=g<n?g:n;k=k<q?k:q;m=m<p?m:p;a.ma=b.v+(g<e?g:e);a.na=b.A+(k<d?k:d);a.oa=b.B+(m<c?m:c);a.ja=b.v+(l>e?l:e);a.ka=b.A+(h>d?h:d);a.la=b.B+(f>c?f:c)},Pd:function(a,b){var e=a.x,d=a.y,c=a.z;0<d&&d*d>this.gk*this.gk*(e*e+d*d+c*c)?(b.za(0,this.Ib-this.Rb/this.gk,0),0>b.y&&(b.y=0)):(e=a.x,a=a.z,d=e*e+a*a,c=2*this.Ib,c=(c-this.Rb)/c*this.bb-this.Rb/this.Yj,0>c&&(c=0),d=0<d?c/Math.sqrt(d):0,c=this.Ib-this.Rb,0>c&&(c=0),b.x=e*d,b.y=-c,b.z=a*d)},ti:function(a,b,e,d,c,f,h){var l=this.Ib;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,m=(l-b)*m;if(n>m)var q=n,n=m,m=q;0<n&&(g=n);1>m&&(k=m)}if(1<=g||0>=k)return!1;b-=l;var q=this.Yj*this.Yj,m=q*(d*d+c*c+f*f)-c*c,n=q*(a*d+b*c+e*f)-b*c,q=q*(a*a+b*b+e*e)-b*b,p=n*n-m*q;if(m){if(0>p)return!1;p=Math.sqrt(p);if(0>m)if(0<c){if(q=0,n=(-n+p)/m,0>=n)return!1}else{if(q=(-n-p)/m,n=1,1<=q)return!1}else if(q=(-n-p)/m,n=(-n+p)/m,1<=q||0>=n)return!1}else if(m=-q/(2*n),0<n){if(q=0,n=m,0>=m)return!1}else if(q=m,n=1,1<=m)return!1;b+=l;if(n<=g||k<=q)return!1;if(q<g){l=g;if(!l)return!1;h.normal.za(0,0<c?-1:1,0)}else{l=q;if(!l)return!1;g=h.normal.za(a+d*l,0,e+f*l);k=Math.sqrt(g.x*g.x+g.y*g.y+g.z*g.z);0<k&&(k=1/k);n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;k=this.Yj;n=g.y*k;m=g.z*k;g.x=g.x*k;g.y=n;g.z=m;h.normal.y+=this.gk}h.position.za(a+l*d,b+l*c,e+l*f);h.fraction=l;return!0}});Wd.ua=Wa;Wd.prototype=vb(Wa.prototype,{Dn:function(){return this.zb},He:function(){this.fg=this.rf=1;this.ig=this.hg=this.gg=0;this.jg=1;this.mg=this.lg=this.kg=0;this.ng=1;for(var a=this.zb[0].x,b=this.zb[0].y,e=this.zb[0].z,d=this.zb[0].x,c=this.zb[0].y,f=this.zb[0].z,h=1,l=this.Ge;h<l;){var g=h++,k=this.zb[g].x,m=this.zb[g].y,g=this.zb[g].z;k<a?a=k:k>d&&(d=k);m<b?b=m:m>c&&(c=m);g<e?e=g:g>f&&(f=g)}h=d-a;l=c-b;k=f-e;this.rf=h*l*k;a=.25*((a+d)*(a+d)+(b+c)*(b+c)+(e+f)*(e+f));h=h*h*.25;l=l*l*.25;k=k*k*.25;this.fg=.3333333333333333*(l+k)+a;this.ig=this.hg=this.gg=0;this.jg=.3333333333333333*(k+h)+a;this.mg=this.lg=this.kg=0;this.ng=.3333333333333333*(h+l)+a},Nb:function(a,b){var e,d,c,f,h,l,g,k,m;m=k=g=this.Rb;var n,q,p;e=this.zb[0];n=e.x;q=e.y;p=e.z;d=b.o*n+b.f*q+b.h*p;e=b.i*n+b.m*q+b.j*p;c=b.l*n+b.g*q+b.s*p;n=d+b.v;q=e+b.A;p=c+b.B;e=n;d=q;c=p;f=n;h=q;l=p;for(var r=1,v=this.Ge;r<v;){n=r++;p=this.zb[n];n=p.x;q=p.y;p=p.z;var la,x;la=b.o*n+b.f*q+b.h*p;x=b.i*n+b.m*q+b.j*p;p=b.l*n+b.g*q+b.s*p;n=la;q=x;n+=b.v;q+=b.A;p+=b.B;e=e<n?e:n;d=d<q?d:q;c=c<p?c:p;f=f>n?f:n;h=h>q?h:q;l=l>p?l:p}a.ma=e-g;a.na=d-k;a.oa=c-m;a.ja=f+g;a.ka=h+k;a.la=l+m},Pd:function(a,b){for(var e=this.zb[0],e=e.x*a.x+e.y*a.y+e.z*a.z,d=0,c=1,f=this.Ge;c<f;){var h=c++,l=this.zb[h],l=l.x*a.x+l.y*a.y+l.z*a.z;l>e&&(e=l,d=h)}a=this.zb[d];b.x=a.x;b.y=a.y;b.z=a.z}});Dd.ua=Wa;Dd.prototype=vb(Wa.prototype,{Qh:function(){return this.bb},rj:function(){return this.Ib},He:function(){var a=this.bb*this.bb,b=this.Ib*this.Ib*4;this.rf=3.14159265358979*a*this.Ib*2;this.fg=.08333333333333333*(3*a+b);this.ig=this.hg=this.gg=0;this.jg=.5*a;this.mg=this.lg=this.kg=0;this.ng=.08333333333333333*(3*a+b)},Nb:function(a,b){var e,d,c,f,h,l;e=b.f;d=b.m;c=b.g;e=0>e?-e:e;d=0>d?-d:d;c=0>c?-c:c;f=Math.sqrt(1-e*e);h=Math.sqrt(1-d*d);l=Math.sqrt(1-c*c);f*=this.bb;h*=this.bb;l*=this.bb;e*=this.Ib;d*=this.Ib;c*=this.Ib;f+=e;h+=d;l+=c;a.ma=b.v-f;a.na=b.A-h;a.oa=b.B-l;a.ja=b.v+f;a.ka=b.A+h;a.la=b.B+l},Pd:function(a,b){var e=a.x,d=a.z,c=e*e+d*d,f=this.bb-this.Rb;0>f&&(f=0);c=0<c?f/Math.sqrt(c):0;f=this.Ib-this.Rb;0>f&&(f=0);b.x=e*c;b.y=0<a.y?f:-f;b.z=d*c},ti:function(a,b,e,d,c,f,h){var l=this.Ib;d-=a;c-=b;f-=e;var g=0,k=1;if(-1E-6<c&&1E-6>c){if(b<=-l||b>=l)return!1}else{var m=1/c,n=(-l-b)*m,l=(l-b)*m;n>l&&(m=n,n=l,l=m);0<n&&(g=n);1>l&&(k=l)}if(1<=g||0>=k)return!1;var l=d*d+f*f,n=a*d+e*f,m=a*a+e*e-this.bb*this.bb,q=n*n-l*m;if(0>q)return!1;if(0<l){if(q=Math.sqrt(q),m=(-n-q)/l,l=(-n+q)/l,1<=m||0>=l)return!1}else{if(0<=m)return!1;m=0;l=1}if(l<=g||k<=m)return!1;if(m<g){if(!g)return!1;h.normal.za(0,0<c?-1:1,0)}else{g=m;if(!g)return!1;k=h.normal.za(a+d*g,0,e+f*g);l=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z);0<l&&(l=1/l);n=k.y*l;m=k.z*l;k.x=k.x*l;k.y=n;k.z=m}h.position.za(a+g*d,b+g*c,e+g*f);h.fraction=g;return!0}});je.ua=Wa;je.prototype=vb(Wa.prototype,{Qh:function(){return this.bb},He:function(){this.rf=4.188790204786386*this.bb*this.bb*this.bb;this.fg=.4*this.bb*this.bb;this.ig=this.hg=this.gg=0;this.jg=.4*this.bb*this.bb;this.mg=this.lg=this.kg=0;this.ng=.4*this.bb*this.bb},Nb:function(a,b){var e,d,c;c=d=e=this.bb;a.ma=b.v-e;a.na=b.A-d;a.oa=b.B-c;a.ja=b.v+e;a.ka=b.A+d;a.la=b.B+c},Pd:function(a,b){b.Z()},ti:function(a,b,e,d,c,f,h){var l;d-=a;c-=b;l=f-e;f=d*d+c*c+l*l;var g=a*d+b*c+e*l,k=g*g-f*(a*a+b*b+e*e-this.bb*this.bb);if(0>k)return!1;f=(-g-Math.sqrt(k))/f;if(0>f||1<f)return!1;a+=d*f;b+=c*f;e+=l*f;d=a*a+b*b+e*e;0<d&&(d=1/Math.sqrt(d));c=h.position;c.x=a;c.y=b;c.z=e;c=h.normal;c.x=a*d;c.y=b*d;c.z=e*d;h.fraction=f;return!0}});jf.prototype={ua:function(a,b){return this.Jb[a][b]}};Je.prototype={gm:function(){for(var a=0,b=0,e=this.numPoints;b<e;){var d=b++;this.points[d].depth>a&&(a=this.points[d].depth)}return a},clear:function(){for(var a=this.numPoints=0,b=this.points;a<b.length;){var e=b[a];++a;e.position1.Z();e.position2.Z();e.depth=0;e.id=0}this.normal.Z()}};Mc.prototype={rh:function(a,b,e,d){var c=a.normal;c.x=b;c.y=e;c.z=d;this.Mg&&(a=a.normal,b=-a.y,e=-a.z,a.x=-a.x,a.y=b,a.z=e)},wg:function(a,b,e,d,c,f,h,l,g){a=a.points[a.numPoints++];a.depth=l;a.id=g;this.Mg?(l=a.position1,l.x=c,l.y=f,l.z=h,c=a.position2,c.x=b,c.y=e,c.z=d):(l=a.position1,l.x=b,l.y=e,l.z=d,b=a.position2,b.x=c,b.y=f,b.z=h)},mh:function(){},bm:function(a,b,e,d,c,f){for(var h=a.numPoints=0,l=a.points;h<l.length;){var g=l[h];++h;g.position1.Z();g.position2.Z();g.depth=0;g.id=0}a.normal.Z();this.Mg?this.mh(a,e,b,c,d,f):this.mh(a,b,e,d,c,f)}};Ek.ua=Mc;Ek.prototype=vb(Mc.prototype,{mh:function(a,b,e,d,c){var f=b,h=e;a.incremental=!1;var l,g,k,m,n,q,p,r,v;l=d.v;g=d.A;k=d.B;m=c.v;n=c.A;q=c.B;p=m-l;r=n-g;v=q-k;var la,x,A,u,C,t,B,D,z,Eb,L,I,Rb,Ae,E,db,M,vc;la=d.o;x=d.i;A=d.l;u=d.f;C=d.m;t=d.g;B=d.h;D=d.j;z=d.s;Eb=c.o;L=c.i;I=c.l;Rb=c.f;Ae=c.m;E=c.g;db=c.h;M=c.j;vc=c.s;var ib=f.De,Da=f.Ee,Ia=f.Fe,oa=h.De,R=h.Ee,U=h.Fe,Ca,xa,Ra,Ba,sa,Sa,G,Qa,W,N,Q,Z,ba,S,X,y,fa,T;Ca=la*ib;xa=x*ib;Ra=A*ib;Ba=u*Da;sa=C*Da;Sa=t*Da;G=B*Ia;Qa=D*Ia;W=z*Ia;N=Eb*oa;Q=L*oa;Z=I*oa;ba=Rb*R;S=Ae*R;X=E*R;y=db*U;fa=M*U;T=vc*U;var ia=1/0,pa=-1,wa=0,ya,ha,Y;Y=ha=ya=0;var ma=ib,Ea=la*N+x*Q+A*Z,Ha=la*ba+x*S+A*X,J=la*y+x*fa+A*T;0>Ea&&(Ea=-Ea);0>Ha&&(Ha=-Ha);0>J&&(J=-J);var ta=Ea+Ha+J,ea=la*p+x*r+A*v,aa=ma+ta,Za=0>ea,da=Za?-ea:ea;if(da<aa){var O=aa-da;O<ia&&(ia=O,pa=0,ya=la,ha=x,Y=A,wa=Za?-1:1);var ma=Da,va=u*N+C*Q+t*Z,ob=u*ba+C*S+t*X,na=u*y+C*fa+t*T;0>va&&(va=-va);0>ob&&(ob=-ob);0>na&&(na=-na);var ta=va+ob+na,ea=u*p+C*r+t*v,P=ma+ta,La=0>ea,ab=La?-ea:ea;if(ab<P){var ub=P-ab;ub<ia&&(ia=ub,pa=1,ya=u,ha=C,Y=t,wa=La?-1:1);var ma=Ia,gb=B*N+D*Q+z*Z,ua=B*ba+D*S+z*X,Aa=B*y+D*fa+z*T;0>gb&&(gb=-gb);0>ua&&(ua=-ua);0>Aa&&(Aa=-Aa);var ta=gb+ua+Aa,ea=B*p+D*r+z*v,Ya=ma+ta,Ja=0>ea,wb=Ja?-ea:ea;if(wb<Ya){var Fa=Ya-wb;Fa<ia&&(ia=Fa,pa=2,ya=B,ha=D,Y=z,wa=Ja?-1:1);var ia=ia>F.linearSlop?ia-F.linearSlop:0,ja=Eb*Ca+L*xa+I*Ra,qa=Eb*Ba+L*sa+I*Sa,eb=Eb*G+L*Qa+I*W;0>ja&&(ja=-ja);0>qa&&(qa=-qa);0>eb&&(eb=-eb);var ma=ja+qa+eb,ta=oa,ea=Eb*p+L*r+I*v,Oa=ma+ta,Bb=0>ea,mb=Bb?-ea:ea;if(mb<Oa){var hb=Oa-mb;hb<ia&&(ia=hb,pa=3,ya=Eb,ha=L,Y=I,wa=Bb?-1:1);var pb=Rb*Ca+Ae*xa+E*Ra,qb=Rb*Ba+Ae*sa+E*Sa,$a=Rb*G+Ae*Qa+E*W;0>pb&&(pb=-pb);0>qb&&(qb=-qb);0>$a&&($a=-$a);var ma=pb+qb+$a,ta=R,ea=Rb*p+Ae*r+E*v,yc=ma+ta,Ab=0>ea,bb=Ab?-ea:ea;if(bb<yc){var Ka=yc-bb;Ka<ia&&(ia=Ka,pa=4,ya=Rb,ha=Ae,Y=E,wa=Ab?-1:1);var Zb=db*Ca+M*xa+vc*Ra,H=db*Ba+M*sa+vc*Sa,cb=db*G+M*Qa+vc*W;0>Zb&&(Zb=-Zb);0>H&&(H=-H);0>cb&&(cb=-cb);var ma=Zb+H+cb,ta=U,ea=db*p+M*r+vc*v,jb=ma+ta,jc=0>ea,kb=jc?-ea:ea;if(kb<jb){var xb=jb-kb;xb<ia&&(ia=xb,pa=5,ya=db,ha=M,Y=vc,wa=jc?-1:1);var ia=ia>F.linearSlop?ia-F.linearSlop:0,w,V,ca;w=x*I-A*L;V=A*Eb-la*I;ca=la*L-x*Eb;if(w||V||ca){var ad=w*w+V*V+ca*ca;0<ad&&(ad=1/Math.sqrt(ad));w*=ad;V*=ad;ca*=ad;var cc=w*Ba+V*sa+ca*Sa,Pa=w*G+V*Qa+ca*W;0>cc&&(cc=-cc);0>Pa&&(Pa=-Pa);var ma=cc+Pa,nb=w*ba+V*S+ca*X,rb=w*y+V*fa+ca*T;0>nb&&(nb=-nb);0>rb&&(rb=-rb);var ta=nb+rb,ea=w*p+V*r+ca*v,Cb=ma+ta,sb=0>ea,ga=sb?-ea:ea;if(ga<Cb){var Ua=Cb-ga;Ua<ia&&(ia=Ua,pa=6,ya=w,ha=V,Y=ca,wa=sb?-1:1)}else return}w=x*E-A*Ae;V=A*Rb-la*E;ca=la*Ae-x*Rb;if(w||V||ca){var fb=w*w+V*V+ca*ca;0<fb&&(fb=1/Math.sqrt(fb));w*=fb;V*=fb;ca*=fb;var Xa=w*Ba+V*sa+ca*Sa,tb=w*G+V*Qa+ca*W;0>Xa&&(Xa=-Xa);0>tb&&(tb=-tb);var ma=Xa+tb,Ma=w*N+V*Q+ca*Z,Gb=w*y+V*fa+ca*T;0>Ma&&(Ma=-Ma);0>Gb&&(Gb=-Gb);var ta=Ma+Gb,ea=w*p+V*r+ca*v,mg=ma+ta,ka=0>ea,Hb=ka?-ea:ea;if(Hb<mg){var Ob=mg-Hb;Ob<ia&&(ia=Ob,pa=7,ya=w,ha=V,Y=ca,wa=ka?-1:1)}else return}w=x*vc-A*M;V=A*db-la*vc;ca=la*M-x*db;if(w||V||ca){var Tc=w*w+V*V+ca*ca;0<Tc&&(Tc=1/Math.sqrt(Tc));w*=Tc;V*=Tc;ca*=Tc;var Xe=w*Ba+V*sa+ca*Sa,Ic=w*G+V*Qa+ca*W;0>Xe&&(Xe=-Xe);0>Ic&&(Ic=-Ic);var ma=Xe+Ic,ye=w*N+V*Q+ca*Z,sc=w*ba+V*S+ca*X;0>ye&&(ye=-ye);0>sc&&(sc=-sc);var ta=ye+sc,ea=w*p+V*r+ca*v,Ql=ma+ta,kl=0>ea,Jc=kl?-ea:ea;if(Jc<Ql){var wc=Ql-Jc;wc<ia&&(ia=wc,pa=8,ya=w,ha=V,Y=ca,wa=kl?-1:1)}else return}w=C*I-t*L;V=t*Eb-u*I;ca=u*L-C*Eb;if(w||V||ca){var $b=w*w+V*V+ca*ca;0<$b&&($b=1/Math.sqrt($b));w*=$b;V*=$b;ca*=$b;var dc=w*Ca+V*xa+ca*Ra,kc=w*G+V*Qa+ca*W;0>dc&&(dc=-dc);0>kc&&(kc=-kc);var ma=dc+kc,Lb=w*ba+V*S+ca*X,Yb=w*y+V*fa+ca*T;0>Lb&&(Lb=-Lb);0>Yb&&(Yb=-Yb);var ta=Lb+Yb,ea=w*p+V*r+ca*v,Sb=ma+ta,nc=0>ea,ac=nc?-ea:ea;if(ac<Sb){var Ib=Sb-ac;Ib<ia&&(ia=Ib,pa=9,ya=w,ha=V,Y=ca,wa=nc?-1:1)}else return}w=C*E-t*Ae;V=t*Rb-u*E;ca=u*Ae-C*Rb;if(w||V||ca){var Vb=w*w+V*V+ca*ca;0<Vb&&(Vb=1/Math.sqrt(Vb));w*=Vb;V*=Vb;ca*=Vb;var bc=w*Ca+V*xa+ca*Ra,Kb=w*G+V*Qa+ca*W;0>bc&&(bc=-bc);0>Kb&&(Kb=-Kb);var ma=bc+Kb,Tb=w*N+V*Q+ca*Z,lb=w*y+V*fa+ca*T;0>Tb&&(Tb=-Tb);0>lb&&(lb=-lb);var ta=Tb+lb,ea=w*p+V*r+ca*v,ra=ma+ta,Na=0>ea,za=Na?-ea:ea;if(za<ra){var rc=ra-za;rc<ia&&(ia=rc,pa=10,ya=w,ha=V,Y=ca,wa=Na?-1:1)}else return}w=C*vc-t*M;V=t*db-u*vc;ca=u*M-C*db;if(w||V||ca){var gc=w*w+V*V+ca*ca;0<gc&&(gc=1/Math.sqrt(gc));w*=gc;V*=gc;ca*=gc;var Zc=w*Ca+V*xa+ca*Ra,Kc=w*G+V*Qa+ca*W;0>Zc&&(Zc=-Zc);0>Kc&&(Kc=-Kc);var ma=Zc+Kc,Ga=w*N+V*Q+ca*Z,oc=w*ba+V*S+ca*X;0>Ga&&(Ga=-Ga);0>oc&&(oc=-oc);var ta=Ga+oc,ea=w*p+V*r+ca*v,uc=ma+ta,Ta=0>ea,Va=Ta?-ea:ea;if(Va<uc){var vb=uc-Va;vb<ia&&(ia=vb,pa=11,ya=w,ha=V,Y=ca,wa=Ta?-1:1)}else return}w=D*I-z*L;V=z*Eb-B*I;ca=B*L-D*Eb;if(w||V||ca){var Nc=w*w+V*V+ca*ca;0<Nc&&(Nc=1/Math.sqrt(Nc));w*=Nc;V*=Nc;ca*=Nc;var Ec=w*Ca+V*xa+ca*Ra,Bl=w*Ba+V*sa+ca*Sa;0>Ec&&(Ec=-Ec);0>Bl&&(Bl=-Bl);var ma=Ec+Bl,Jd=w*ba+V*S+ca*X,Rf=w*y+V*fa+ca*T;0>Jd&&(Jd=-Jd);0>Rf&&(Rf=-Rf);var ta=Jd+Rf,ea=w*p+V*r+ca*v,Bd=ma+ta,Ug=0>ea,Fk=Ug?-ea:ea;if(Fk<Bd){var Wa=Bd-Fk;Wa<ia&&(ia=Wa,pa=12,ya=w,ha=V,Y=ca,wa=Ug?-1:1)}else return}w=D*E-z*Ae;V=z*Rb-B*E;ca=B*Ae-D*Rb;if(w||V||ca){var zb=w*w+V*V+ca*ca;0<zb&&(zb=1/Math.sqrt(zb));w*=zb;V*=zb;ca*=zb;var Cc=w*Ca+V*xa+ca*Ra,Cl=w*Ba+V*sa+ca*Sa;0>Cc&&(Cc=-Cc);0>Cl&&(Cl=-Cl);var ma=Cc+Cl,yb=w*N+V*Q+ca*Z,Ef=w*y+V*fa+ca*T;0>yb&&(yb=-yb);0>Ef&&(Ef=-Ef);var ta=yb+Ef,ea=w*p+V*r+ca*v,Mb=ma+ta,Uc=0>ea,Rl=Uc?-ea:ea;if(Rl<Mb){var Nb=Mb-Rl;Nb<ia&&(ia=Nb,pa=13,ya=w,ha=V,Y=ca,wa=Uc?-1:1)}else return}w=D*vc-z*M;V=z*db-B*vc;ca=B*M-D*db;if(w||V||ca){var ng=w*w+V*V+ca*ca;0<ng&&(ng=1/Math.sqrt(ng));w*=ng;V*=ng;ca*=ng;var Jb=w*Ca+V*xa+ca*Ra,Db=w*Ba+V*sa+ca*Sa;0>Jb&&(Jb=-Jb);0>Db&&(Db=-Db);var ma=Jb+Db,Cg=w*N+V*Q+ca*Z,Ub=w*ba+V*S+ca*X;0>Cg&&(Cg=-Cg);0>Ub&&(Ub=-Ub);var ta=Cg+Ub,ea=w*p+V*r+ca*v,hc=ma+ta,Pb=0>ea,mc=Pb?-ea:ea;if(mc<hc){var ec=hc-mc;ec<ia&&(ia=ec,pa=14,ya=w,ha=V,Y=ca,wa=Pb?-1:1)}else return}if(6<=pa){ya*=wa;ha*=wa;Y*=wa;var Fb=(pa-6)/3|0,dg=pa-6-3*Fb,Yc,Vc,Gc,Sc,Bc,xc,ud,Dg,Gk,Xd,pd,Kd;switch(Fb){case 0:ud=la;Dg=x;Gk=A;var Sl=0<G*ya+Qa*ha+W*Y;0<Ba*ya+sa*ha+Sa*Y?Sl?(Yc=Ba+G,Vc=sa+Qa,Gc=Sa+W):(Yc=Ba-G,Vc=sa-Qa,Gc=Sa-W):Sl?(Yc=G-Ba,Vc=Qa-sa,Gc=W-Sa):(Yc=Ba+G,Vc=sa+Qa,Gc=Sa+W,Yc=-Yc,Vc=-Vc,Gc=-Gc);break;case 1:ud=u;Dg=C;Gk=t;var Tl=0<G*ya+Qa*ha+W*Y;0<Ca*ya+xa*ha+Ra*Y?Tl?(Yc=Ca+G,Vc=xa+Qa,Gc=Ra+W):(Yc=Ca-G,Vc=xa-Qa,Gc=Ra-W):Tl?(Yc=G-Ca,Vc=Qa-xa,Gc=W-Ra):(Yc=Ca+G,Vc=xa+Qa,Gc=Ra+W,Yc=-Yc,Vc=-Vc,Gc=-Gc);break;default:ud=B;Dg=D;Gk=z;var lc=0<Ba*ya+sa*ha+Sa*Y;0<Ca*ya+xa*ha+Ra*Y?lc?(Yc=Ca+Ba,Vc=xa+sa,Gc=Ra+Sa):(Yc=Ca-Ba,Vc=xa-sa,Gc=Ra-Sa):lc?(Yc=Ba-Ca,Vc=sa-xa,Gc=Sa-Ra):(Yc=Ca+Ba,Vc=xa+sa,Gc=Ra+Sa,Yc=-Yc,Vc=-Vc,Gc=-Gc)}Yc=l+Yc;Vc=g+Vc;Gc=k+Gc;switch(dg){case 0:Xd=Eb;pd=L;Kd=I;var sd=0<y*ya+fa*ha+T*Y;0<ba*ya+S*ha+X*Y?sd?(Sc=ba+y,Bc=S+fa,xc=X+T):(Sc=ba-y,Bc=S-fa,xc=X-T):sd?(Sc=y-ba,Bc=fa-S,xc=T-X):(Sc=ba+y,Bc=S+fa,xc=X+T,Sc=-Sc,Bc=-Bc,xc=-xc);break;case 1:Xd=Rb;pd=Ae;Kd=E;var le=0<y*ya+fa*ha+T*Y;0<N*ya+Q*ha+Z*Y?le?(Sc=N+y,Bc=Q+fa,xc=Z+T):(Sc=N-y,Bc=Q-fa,xc=Z-T):le?(Sc=y-N,Bc=fa-Q,xc=T-Z):(Sc=N+y,Bc=Q+fa,xc=Z+T,Sc=-Sc,Bc=-Bc,xc=-xc);break;default:Xd=db;pd=M;Kd=vc;var me=0<ba*ya+S*ha+X*Y;0<N*ya+Q*ha+Z*Y?me?(Sc=N+ba,Bc=Q+S,xc=Z+X):(Sc=N-ba,Bc=Q-S,xc=Z-X):me?(Sc=ba-N,Bc=S-Q,xc=X-Z):(Sc=N+ba,Bc=Q+S,xc=Z+X,Sc=-Sc,Bc=-Bc,xc=-xc)}Sc=m-Sc;Bc=n-Bc;xc=q-xc;var ne,oe,vd;ne=Yc-Sc;oe=Vc-Bc;vd=Gc-xc;var pe=ud*Xd+Dg*pd+Gk*Kd,Xb=ud*ne+Dg*oe+Gk*vd,Lc=Xd*ne+pd*oe+Kd*vd,qc=1/(1-pe*pe),Wc=(pe*Lc-Xb)*qc,nd=(Lc-pe*Xb)*qc,qd,Qb,Wb,ed,fd,gd;qd=Yc+ud*Wc;Qb=Vc+Dg*Wc;Wb=Gc+Gk*Wc;ed=Sc+Xd*nd;fd=Bc+pd*nd;gd=xc+Kd*nd;this.rh(a,-ya,-ha,-Y);this.wg(a,qd,Qb,Wb,ed,fd,gd,ia,4)}else{var Hc,Fc,Dc,Yd;if(3<=pa){wa=-wa;p=-p;r=-r;v=-v;var Be=f,f=h,h=Be,lf=ib,ib=oa,oa=lf,Fd=Da,Da=R,R=Fd,Rc=Ia,Ia=U,U=Rc;Hc=l;Fc=g;Dc=k;l=m;g=n;k=q;m=Hc;n=Fc;q=Dc;Hc=la;Fc=x;Dc=A;la=Eb;x=L;A=I;Eb=Hc;L=Fc;I=Dc;Hc=u;Fc=C;Dc=t;u=Rb;C=Ae;t=E;Rb=Hc;Ae=Fc;E=Dc;Hc=B;Fc=D;Dc=z;B=db;D=M;z=vc;db=Hc;M=Fc;vc=Dc;Hc=Ca;Fc=xa;Dc=Ra;Ca=N;xa=Q;Ra=Z;N=Hc;Q=Fc;Z=Dc;Hc=Ba;Fc=sa;Dc=Sa;Ba=ba;sa=S;Sa=X;ba=Hc;S=Fc;X=Dc;Hc=G;Fc=Qa;Dc=W;G=y;Qa=fa;W=T;y=Hc;fa=Fc;T=Dc;pa-=3;Yd=!0}else Yd=!1;var Ld,Md,qe,wd,xd,yd,Nd,re,ee,Od,Zd,Gd,se,Le;switch(pa){case 0:Ld=Ca;Md=xa;qe=Ra;wd=la;xd=x;yd=A;Nd=u;re=C;ee=t;Od=B;Zd=D;Gd=z;se=Da;Le=Ia;break;case 1:Ld=Ba;Md=sa;qe=Sa;wd=u;xd=C;yd=t;Nd=B;re=D;ee=z;Od=la;Zd=x;Gd=A;se=Ia;Le=ib;break;default:Ld=G,Md=Qa,qe=W,wd=B,xd=D,yd=z,Nd=la,re=x,ee=A,Od=u,Zd=C,Gd=t,se=ib,Le=Da}if(0>wa){Ld=-Ld;Md=-Md;qe=-qe;wd=-wd;xd=-xd;yd=-yd;Hc=Nd;Fc=re;Dc=ee;Nd=Od;re=Zd;ee=Gd;Od=Hc;Zd=Fc;Gd=Dc;var pc=se;se=Le;Le=pc}Ld+=l;Md+=g;qe+=k;var te=1,Me=0,Pd=wd*Eb+xd*L+yd*I;Pd<te&&(te=Pd,Me=0);-Pd<te&&(te=-Pd,Me=1);Pd=wd*Rb+xd*Ae+yd*E;Pd<te&&(te=Pd,Me=2);-Pd<te&&(te=-Pd,Me=3);Pd=wd*db+xd*M+yd*vc;Pd<te&&(te=Pd,Me=4);-Pd<te&&(te=-Pd,Me=5);var hd,zd,rd,id,jd,kd,Oc,Pc,Qc,Xc,ld,od;switch(Me){case 0:hd=N+ba;zd=Q+S;rd=Z+X;hd+=y;zd+=fa;rd+=T;id=N-ba;jd=Q-S;kd=Z-X;id+=y;jd+=fa;kd+=T;Oc=N-ba;Pc=Q-S;Qc=Z-X;Oc-=y;Pc-=fa;Qc-=T;Xc=N+ba;ld=Q+S;od=Z+X;Xc-=y;ld-=fa;od-=T;break;case 1:hd=ba-N;zd=S-Q;rd=X-Z;hd+=y;zd+=fa;rd+=T;id=ba-N;jd=S-Q;kd=X-Z;id-=y;jd-=fa;kd-=T;Oc=N+ba;Pc=Q+S;Qc=Z+X;Oc=-Oc;Pc=-Pc;Qc=-Qc;Oc-=y;Pc-=fa;Qc-=T;Xc=N+ba;ld=Q+S;od=Z+X;Xc=-Xc;ld=-ld;od=-od;Xc+=y;ld+=fa;od+=T;break;case 2:hd=N+ba;zd=Q+S;rd=Z+X;hd+=y;zd+=fa;rd+=T;id=N+ba;jd=Q+S;kd=Z+X;id-=y;jd-=fa;kd-=T;Oc=ba-N;Pc=S-Q;Qc=X-Z;Oc-=y;Pc-=fa;Qc-=T;Xc=ba-N;ld=S-Q;od=X-Z;Xc+=y;ld+=fa;od+=T;break;case 3:hd=N-ba;zd=Q-S;rd=Z-X;hd+=y;zd+=fa;rd+=T;id=N+ba;jd=Q+S;kd=Z+X;id=-id;jd=-jd;kd=-kd;id+=y;jd+=fa;kd+=T;Oc=N+ba;Pc=Q+S;Qc=Z+X;Oc=-Oc;Pc=-Pc;Qc=-Qc;Oc-=y;Pc-=fa;Qc-=T;Xc=N-ba;ld=Q-S;od=Z-X;Xc-=y;ld-=fa;od-=T;break;case 4:hd=N+ba;zd=Q+S;rd=Z+X;hd+=y;zd+=fa;rd+=T;id=ba-N;jd=S-Q;kd=X-Z;id+=y;jd+=fa;kd+=T;Oc=N+ba;Pc=Q+S;Qc=Z+X;Oc=-Oc;Pc=-Pc;Qc=-Qc;Oc+=y;Pc+=fa;Qc+=T;Xc=N-ba;ld=Q-S;od=Z-X;Xc+=y;ld+=fa;od+=T;break;default:hd=N+ba,zd=Q+S,rd=Z+X,hd-=y,zd-=fa,rd-=T,id=N-ba,jd=Q-S,kd=Z-X,id-=y,jd-=fa,kd-=T,Oc=N+ba,Pc=Q+S,Qc=Z+X,Oc=-Oc,Pc=-Pc,Qc=-Qc,Oc-=y,Pc-=fa,Qc-=T,Xc=ba-N,ld=S-Q,od=X-Z,Xc-=y,ld-=fa,od-=T}hd+=p;zd+=r;rd+=v;id+=p;jd+=r;kd+=v;Oc+=p;Pc+=r;Qc+=v;Xc+=p;ld+=r;od+=v;var ic=this.xg;ic.w=se;ic.tj=Le;ic.Rc=0;ic.fc=0;var tc=this.xg,Ne=tc.Bc[tc.Rc++];Ne.x=hd*Nd+zd*re+rd*ee;Ne.y=hd*Od+zd*Zd+rd*Gd;Ne.Pa=hd;Ne.Qa=zd;Ne.Ra=rd;var Ac=this.xg,Oe=Ac.Bc[Ac.Rc++];Oe.x=id*Nd+jd*re+kd*ee;Oe.y=id*Od+jd*Zd+kd*Gd;Oe.Pa=id;Oe.Qa=jd;Oe.Ra=kd;var Mc=this.xg,tf=Mc.Bc[Mc.Rc++];tf.x=Oc*Nd+Pc*re+Qc*ee;tf.y=Oc*Od+Pc*Zd+Qc*Gd;tf.Pa=Oc;tf.Qa=Pc;tf.Ra=Qc;var zc=this.xg,Ye=zc.Bc[zc.Rc++];Ye.x=Xc*Nd+ld*re+od*ee;Ye.y=Xc*Od+ld*Zd+od*Gd;Ye.Pa=Xc;Ye.Qa=ld;Ye.Ra=od;this.xg.clip();this.xg.reduce();var Pe,uf,mf;Yd?(Pe=wd,uf=xd,mf=yd):(Pe=-wd,uf=-xd,mf=-yd);this.rh(a,Pe,uf,mf);for(var Ce=0,nf=this.xg.Rc;Ce<nf;){var vf=Ce++,wf=this.xg.Bc[vf],Qe,Re,fe;Qe=wf.Pa;Re=wf.Qa;fe=wf.Ra;Qe+=l;Re+=g;fe+=k;var ge=(Ld-Qe)*wd+(Md-Re)*xd+(qe-fe)*yd,Se,xf,Ze;Se=Qe+wd*ge;xf=Re+xd*ge;Ze=fe+yd*ge;ge>-F.contactPersistenceThreshold&&(Yd?this.wg(a,Qe,Re,fe,Se,xf,Ze,ge,vf):this.wg(a,Se,xf,Ze,Qe,Re,fe,ge,vf))}}}}}}}}}});yl.prototype={clip:function(){for(var a=0,b=this.Rc;a<b;){var e=a++,d=this.Bc[e],e=this.Bc[(e+1)%this.Rc],c=this.w+d.x,f=this.w+e.x;if(0<c&&0<f)e=this.gc[this.fc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra;else if(0<c&&0>=f){var h=this.gc[this.fc++];h.x=d.x;h.y=d.y;h.Pa=d.Pa;h.Qa=d.Qa;h.Ra=d.Ra;c/=c-f;f=this.gc[this.fc++];f.x=d.x+(e.x-d.x)*c;f.y=d.y+(e.y-d.y)*c;f.Pa=d.Pa+(e.Pa-d.Pa)*c;f.Qa=d.Qa+(e.Qa-d.Qa)*c;f.Ra=d.Ra+(e.Ra-d.Ra)*c}else 0>=c&&0<f&&(c/=c-f,f=this.gc[this.fc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c)}a=this.Bc;this.Bc=this.gc;this.gc=a;this.Rc=this.fc;a=this.fc=0;for(b=this.Rc;a<b;)e=a++,d=this.Bc[e],e=this.Bc[(e+1)%this.Rc],c=this.w-d.x,f=this.w-e.x,0<c&&0<f?(e=this.gc[this.fc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra):0<c&&0>=f?(h=this.gc[this.fc++],h.x=d.x,h.y=d.y,h.Pa=d.Pa,h.Qa=d.Qa,h.Ra=d.Ra,c/=c-f,f=this.gc[this.fc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c):0>=c&&0<f&&(c/=c-f,f=this.gc[this.fc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c);a=this.Bc;this.Bc=this.gc;this.gc=a;this.Rc=this.fc;a=this.fc=0;for(b=this.Rc;a<b;)e=a++,d=this.Bc[e],e=this.Bc[(e+1)%this.Rc],c=this.tj+d.y,f=this.tj+e.y,0<c&&0<f?(e=this.gc[this.fc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra):0<c&&0>=f?(h=this.gc[this.fc++],h.x=d.x,h.y=d.y,h.Pa=d.Pa,h.Qa=d.Qa,h.Ra=d.Ra,c/=c-f,f=this.gc[this.fc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c):0>=c&&0<f&&(c/=c-f,f=this.gc[this.fc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c);a=this.Bc;this.Bc=this.gc;this.gc=a;this.Rc=this.fc;a=this.fc=0;for(b=this.Rc;a<b;)e=a++,d=this.Bc[e],e=this.Bc[(e+1)%this.Rc],c=this.tj-d.y,f=this.tj-e.y,0<c&&0<f?(e=this.gc[this.fc++],e.x=d.x,e.y=d.y,e.Pa=d.Pa,e.Qa=d.Qa,e.Ra=d.Ra):0<c&&0>=f?(h=this.gc[this.fc++],h.x=d.x,h.y=d.y,h.Pa=d.Pa,h.Qa=d.Qa,h.Ra=d.Ra,c/=c-f,f=this.gc[this.fc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c):0>=c&&0<f&&(c/=c-f,f=this.gc[this.fc++],f.x=d.x+(e.x-d.x)*c,f.y=d.y+(e.y-d.y)*c,f.Pa=d.Pa+(e.Pa-d.Pa)*c,f.Qa=d.Qa+(e.Qa-d.Qa)*c,f.Ra=d.Ra+(e.Ra-d.Ra)*c);a=this.Bc;this.Bc=this.gc;this.gc=a;this.Rc=this.fc;this.fc=0},reduce:function(){if(!(4>this.Rc)){for(var a=-1/0,b=1/0,e=-1/0,d=1/0,c=null,f=null,h=null,l=null,g=0,k=this.Rc;g<k;){var m=g++,m=this.Bc[m],n=1*m.x+1*m.y,q=-1*m.x+1*m.y;n>a&&(a=n,c=m);n<b&&(b=n,f=m);q>e&&(e=q,h=m);q<d&&(d=q,l=m)}a=this.gc[this.fc++];a.x=c.x;a.y=c.y;a.Pa=c.Pa;a.Qa=c.Qa;a.Ra=c.Ra;c=this.gc[this.fc++];c.x=h.x;c.y=h.y;c.Pa=h.Pa;c.Qa=h.Qa;c.Ra=h.Ra;h=this.gc[this.fc++];h.x=f.x;h.y=f.y;h.Pa=f.Pa;h.Qa=f.Qa;h.Ra=f.Ra;f=this.gc[this.fc++];f.x=l.x;f.y=l.y;f.Pa=l.Pa;f.Qa=l.Qa;f.Ra=l.Ra;l=this.Bc;this.Bc=this.gc;this.gc=l;this.Rc=this.fc;this.fc=0}}};fl.prototype={Pe:function(){null!=this.ei&&this.ei.clear()}};ej.ua=Mc;ej.prototype=vb(Mc.prototype,{mh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k,m;f=d.f;h=d.m;l=d.g;g=c.f;k=c.m;m=c.g;var n=b.Ib,q=e.Ib;b=b.bb;e=e.bb;var p,r,v,la,x,A;p=d.v+f*-n;r=d.A+h*-n;v=d.B+l*-n;f=d.v+f*n;la=d.A+h*n;x=d.B+l*n;h=c.v+g*-q;l=c.A+k*-q;d=c.B+m*-q;g=c.v+g*q;k=c.A+k*q;A=c.B+m*q;var u,C,t;u=p-h;C=r-l;t=v-d;f-=p;la-=r;c=x-v;m=g-h;x=k-l;g=A-d;k=-(u*f+C*la+t*c);u=u*m+C*x+t*g;C=n*n*4;t=f*m+la*x+c*g;A=q*q*4;C||A?C?A?((q=C*A-t*t)?(n=t*u+A*k,n=0>n?0:n>q?1:n/q):n=0,q=n*t+u,0>q?(q=0,n=k,n=0>n?0:n>C?1:n/C):q>A?(q=1,n=t+k,n=0>n?0:n>C?1:n/C):q/=A):(q=0,n=k,n=0>n?0:n>C?1:n/C):(n=0,q=u,q=0>q?0:q>A?1:q/A):q=n=0;p+=f*n;r+=la*n;v+=c*n;h+=m*q;l+=x*q;d+=g*q;la=p-h;f=r-l;q=v-d;n=la*la+f*f+q*q;n>=(b+e)*(b+e)||(n=Math.sqrt(n),0<n?(la*=1/n,f*=1/n,q*=1/n):(la=1,q=f=0),this.rh(a,la,f,q),this.wg(a,p+la*-b,r+f*-b,v+q*-b,h+la*e,l+f*e,d+q*e,b+e-n,0))}});dj.ua=Mc;dj.prototype=vb(Mc.prototype,{mh:function(a,b,e,d,c,f){var h=Fb.Oa;d=h.pj(b,e,d,c,F.enableGJKCaching?f:null,!0);a.incremental=!0;if(d!=ic.SUCCEEDED)console.log("GjkEpaDetector.hx:28:","GJK/EPA failed: status="+d);else if(!(h.distance>b.Rb+e.Rb)){var l,g,k;f=h.closestPoint1;d=f.x;c=f.y;f=f.z;k=h.closestPoint2;l=k.x;g=k.y;k=k.z;var m,n,q;m=d-l;n=c-g;q=f-k;if(m*m+n*n+q*q){0>h.distance&&(m=-m,n=-n,q=-q);var p=m*m+n*n+q*q;0<p&&(p=1/Math.sqrt(p));m*=p;n*=p;q*=p;this.rh(a,m,n,q);d+=m*-b.Rb;c+=n*-b.Rb;f+=q*-b.Rb;l+=m*e.Rb;g+=n*e.Rb;k+=q*e.Rb;this.wg(a,d,c,f,l,g,k,b.Rb+e.Rb-h.distance,0)}}}});Qf.ua=Mc;Qf.prototype=vb(Mc.prototype,{mh:function(a,b,e,d,c){a.incremental=!1;var f,h,l,g,k;f=e.De;h=e.Ee;e=e.Fe;l=-f;g=-h;k=-e;b=b.bb;var m,n,q;m=d.v-c.v;n=d.A-c.A;q=d.B-c.B;var p,r;p=c.o*m+c.i*n+c.l*q;r=c.f*m+c.m*n+c.g*q;m=c.h*m+c.j*n+c.s*q;if(l<p&&f>p&&g<r&&h>r&&k<m&&e>m){var v;n=f-(0>p?-p:p);v=h-(0>r?-r:r);var la=e-(0>m?-m:m),x,A;n<v?n<la?(l=0<p?1:-1,x=k=g=0,q=A=1):(0<m?(g=l=0,k=1):(g=l=0,k=-1),A=x=1,q=0,n=la):v<la?(0<r?(l=0,g=1):(l=0,g=-1),k=0,x=1,A=0,q=1,n=v):(0<m?(g=l=0,k=1):(g=l=0,k=-1),A=x=1,q=0,n=la);p=l*f+x*p;h=g*h+A*r;m=k*e+q*m;e=c.o*p+c.f*h+c.h*m;r=c.i*p+c.m*h+c.j*m;h=c.l*p+c.g*h+c.s*m;m=c.o*l+c.f*g+c.h*k;p=c.i*l+c.m*g+c.j*k;f=c.l*l+c.g*g+c.s*k;this.rh(a,m,p,f);this.wg(a,d.v+m*-b,d.A+p*-b,d.B+f*-b,c.v+e,c.A+r,c.B+h,n,0)}else f-=1E-9,h-=1E-9,e-=1E-9,l+=1E-9,g+=1E-9,k+=1E-9,f=p<f?p:f,n=r<h?r:h,q=m<e?m:e,f=f>l?f:l,n=n>g?n:g,q=q>k?q:k,p-=f,l=r-n,g=m-q,e=p*p+l*l+g*g,e>=b*b||(e=Math.sqrt(e),r=c.o*f+c.f*n+c.h*q,h=c.i*f+c.m*n+c.j*q,m=c.l*f+c.g*n+c.s*q,k=c.o*p+c.f*l+c.h*g,f=c.i*p+c.m*l+c.j*g,p=c.l*p+c.g*l+c.s*g,g=k*k+f*f+p*p,0<g&&(g=1/Math.sqrt(g)),l=k*g,f*=g,p*=g,this.rh(a,l,f,p),this.wg(a,d.v+l*-b,d.A+f*-b,d.B+p*-b,c.v+r,c.A+h,c.B+m,b-e,0))}});cg.ua=Mc;cg.prototype=vb(Mc.prototype,{mh:function(a,b,e,d,c){a.incremental=!1;var f=e.Ib;b=b.bb;e=e.bb;var h,l,g;h=c.f;l=c.m;g=c.g;var k,m;k=d.v;m=d.A;d=d.B;var n,q,p,r;n=c.v+h*-f;q=c.A+l*-f;p=c.B+g*-f;h=c.v+h*f;l=c.A+l*f;r=c.B+g*f;c=h-n;g=l-q;l=r-p;f=f*f*4;h=(k-n)*c+(m-q)*g+(d-p)*l;h=0>h?0:h>f?1:h/f;f=n+c*h;q+=g*h;p+=l*h;l=k-f;g=m-q;n=d-p;c=l*l+g*g+n*n;c>=(b+e)*(b+e)||(c=Math.sqrt(c),0<c?(l*=1/c,g*=1/c,n*=1/c):(l=1,n=g=0),this.rh(a,l,g,n),this.wg(a,k+l*-b,m+g*-b,d+n*-b,f+l*e,q+g*e,p+n*e,b+e-c,0))}});cj.ua=Mc;cj.prototype=vb(Mc.prototype,{mh:function(a,b,e,d,c){a.incremental=!1;var f,h,l;f=d.v-c.v;h=d.A-c.A;l=d.B-c.B;b=b.bb;e=e.bb;var g=f*f+h*h+l*l;g>=(b+e)*(b+e)||(g=Math.sqrt(g),0<g?(f*=1/g,h*=1/g,l*=1/g):(f=1,l=h=0),this.rh(a,f,h,l),this.wg(a,d.v+f*-b,d.A+h*-b,d.B+l*-b,c.v+f*e,c.A+h*e,c.B+l*e,b+e-g,0))}});wl.prototype={Yn:function(){for(var a=this.hd;null!=a;){for(var b=a.M,e=0;3>e;){var d=e++;a.zb[d].ij=null;a.zb[d].xi=null;if(-1==a.Oe[d])return this.Fc=2,!1;if(null==a.ze[d])return this.Fc=3,!1}a=b}return!0},em:function(a,b,e){if(b.Pk!=a){b.Pk=a;var d=b.Zh;d.x=e.x;d.y=e.y;d.z=e.z;var c=b.zb[0].xd,f=d.y-c.y,h=d.z-c.z;d.x=d.x-c.x;d.y=f;d.z=h;d=b.Zh;c=b.Rj;b.hj=0<d.x*c.x+d.y*c.y+d.z*c.z;if(b.hj){for(d=0;3>d;)if(c=d++,f=b.ze[c],null!=f){h=f.Zh;h.x=e.x;h.y=e.y;h.z=e.z;var l=f.zb[0].xd,g=h.y-l.y,k=h.z-l.z;h.x=h.x-l.x;h.y=g;h.z=k;h=f.Zh;l=f.Rj;f.hj=0<h.x*l.x+h.y*l.y+h.z*l.z;f.hj?this.em(a,f,e):(h=b.zb[c],h.xi=b.zb[b.pi[c]],h.ij=f)}for(a=0;3>a;)e=a++,d=b.ze[e],null!=d&&(c=b.Oe[e],d.ze[c]=null,d.Oe[c]=-1,b.ze[e]=null,b.Oe[e]=-1);this.fh--;a=b.ia;e=b.M;null!=a&&(a.M=e);null!=e&&(e.ia=a);b==this.hd&&(this.hd=this.hd.M);b==this.Pc&&(this.Pc=this.Pc.ia);b.M=null;b.ia=null;b.fk();b.M=this.ye;this.ye=b}else this.Fc=6}},Zg:function(a,b,e,d){this.Fc=0;this.Ge=4;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;this.zb[3]=d;var c=this.ci,f=a.xd;c.x=f.x;c.y=f.y;c.z=f.z;var f=b.xd,h=c.y+f.y,l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=e.xd;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=d.xd;h=c.y+f.y;l=c.z+f.z;c.x+=f.x;c.y=h;c.z=l;f=.25*c.y;h=.25*c.z;c.x=.25*c.x;c.y=f;c.z=h;c=this.ye;null!=c?(this.ye=c.M,c.M=null):c=new kf;f=this.ye;null!=f?(this.ye=f.M,f.M=null):f=new kf;h=this.ye;null!=h?(this.ye=h.M,h.M=null):h=new kf;l=this.ye;null!=l?(this.ye=l.M,l.M=null):l=new kf;c.za(a,b,e,this.ci,!0)||(this.Fc=1);f.za(a,b,d,this.ci,!0)||(this.Fc=1);h.za(a,e,d,this.ci,!0)||(this.Fc=1);l.za(b,e,d,this.ci,!0)||(this.Fc=1);c.Lg(f)||(this.Fc=1);c.Lg(h)||(this.Fc=1);c.Lg(l)||(this.Fc=1);f.Lg(h)||(this.Fc=1);f.Lg(l)||(this.Fc=1);h.Lg(l)||(this.Fc=1);this.fh++;null==this.hd?this.hd=c:(this.Pc.M=c,c.ia=this.Pc);this.Pc=c;this.fh++;null==this.hd?this.hd=f:(this.Pc.M=f,f.ia=this.Pc);this.Pc=f;this.fh++;null==this.hd?this.hd=h:(this.Pc.M=h,h.ia=this.Pc);this.Pc=h;this.fh++;null==this.hd?this.hd=l:(this.Pc.M=l,l.ia=this.Pc);this.Pc=l;return!this.Fc},Km:function(a,b){this.zb[this.Ge++]=a;var e=b.zb[0];this.em(this.Ge,b,a.xd);if(0!=this.Fc)return!1;b=e;for(var d=null,c=null;;){if(null==b.xi)return this.Fc=4,!1;if(null==b.ij)return this.Fc=5,!1;var f=this.ye;null!=f?(this.ye=f.M,f.M=null):f=new kf;null==c&&(c=f);f.za(b,b.xi,a,this.ci,!1)||(this.Fc=1);if(0!=this.Fc)return!1;this.fh++;null==this.hd?this.hd=f:(this.Pc.M=f,f.ia=this.Pc);this.Pc=f;f.Lg(b.ij)||(this.Fc=1);null==d||f.Lg(d)||(this.Fc=1);d=f;b=b.xi;if(b==e)break}d.Lg(c)||(this.Fc=1);return 0==this.Fc?this.Yn():!1}};kf.prototype={za:function(a,b,e,d,c){null==c&&(c=!1);var f,h,l,g,k,m,n,q,p,r,v,la,x=a.xd;f=x.x;h=x.y;l=x.z;var A=b.xd;g=A.x;k=A.y;m=A.z;var u=e.xd;n=u.x;q=u.y;p=u.z;r=d.x;v=d.y;la=d.z;var C,t,B,D,z,Eb,L,I,Rb;C=g-f;t=k-h;B=m-l;D=n-f;z=q-h;Eb=p-l;L=f-r;I=h-v;Rb=l-la;var F,E,db;F=t*Eb-B*z;E=B*D-C*Eb;db=C*z-t*D;var M=!1;if(0>L*F+I*E+Rb*db)if(c){var vc=b;b=e;e=vc;F*=-1;E*=-1;db*=-1}else M=!0;this.zb[0]=a;this.zb[1]=b;this.zb[2]=e;var ib=this.Rj;ib.x=F;ib.y=E;ib.z=db;var Da=a.xd,Ia=b.xd,oa=e.xd,R=this.Zh,U,Ca,xa,Ra,Ba,sa,Sa,G,Qa,W,N,Q,Z,ba,S,X,y,fa;U=Da.x;Ca=Da.y;xa=Da.z;Ra=Ia.x;Ba=Ia.y;sa=Ia.z;Sa=oa.x;G=oa.y;Qa=oa.z;W=Ra-U;N=Ba-Ca;Q=sa-xa;Z=Sa-Ra;ba=G-Ba;S=Qa-sa;X=U-Sa;y=Ca-G;fa=xa-Qa;var T,ia,pa;T=N*S-Q*ba;ia=Q*Z-W*S;pa=W*ba-N*Z;var wa=U*(N*pa-Q*ia)+Ca*(Q*T-W*pa)+xa*(W*ia-N*T),ya=Ra*(ba*pa-S*ia)+Ba*(S*T-Z*pa)+sa*(Z*ia-ba*T),ha=Sa*(y*pa-fa*ia)+G*(fa*T-X*pa)+Qa*(X*ia-y*T),Y=-1,ma,Ea,Ha;Ha=Ea=ma=0;if(0>wa){var J,ta,ea,aa,Za,da;J=Da.x;ta=Da.y;ea=Da.z;aa=Ia.x;Za=Ia.y;da=Ia.z;var O,va,ob;O=aa-J;va=Za-ta;ob=da-ea;var na=O*J+va*ta+ob*ea,na=-na/(O*O+va*va+ob*ob);if(0>na)R.x=J,R.y=ta,R.z=ea;else if(1<na)R.x=aa,R.y=Za,R.z=da;else{var P,La,ab;P=J+O*na;La=ta+va*na;ab=ea+ob*na;R.x=P;R.y=La;R.z=ab}Y=R.x*R.x+R.y*R.y+R.z*R.z;ma=R.x;Ea=R.y;Ha=R.z}if(0>ya){var ub,gb,ua,Aa,Ya,Ja;ub=Ia.x;gb=Ia.y;ua=Ia.z;Aa=oa.x;Ya=oa.y;Ja=oa.z;var wb,Fa,ja;wb=Aa-ub;Fa=Ya-gb;ja=Ja-ua;var qa=wb*ub+Fa*gb+ja*ua,qa=-qa/(wb*wb+Fa*Fa+ja*ja);if(0>qa)R.x=ub,R.y=gb,R.z=ua;else if(1<qa)R.x=Aa,R.y=Ya,R.z=Ja;else{var eb,Oa,Bb;eb=ub+wb*qa;Oa=gb+Fa*qa;Bb=ua+ja*qa;R.x=eb;R.y=Oa;R.z=Bb}var mb=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Y||mb<Y)Y=mb,ma=R.x,Ea=R.y,Ha=R.z}if(0>ha){var hb,pb,qb,$a,yc,Ab;hb=Da.x;pb=Da.y;qb=Da.z;$a=oa.x;yc=oa.y;Ab=oa.z;var bb,Ka,Zb;bb=$a-hb;Ka=yc-pb;Zb=Ab-qb;var H=bb*hb+Ka*pb+Zb*qb,H=-H/(bb*bb+Ka*Ka+Zb*Zb);if(0>H)R.x=hb,R.y=pb,R.z=qb;else if(1<H)R.x=$a,R.y=yc,R.z=Ab;else{var cb,jb,jc;cb=hb+bb*H;jb=pb+Ka*H;jc=qb+Zb*H;R.x=cb;R.y=jb;R.z=jc}var kb=R.x*R.x+R.y*R.y+R.z*R.z;if(0>Y||kb<Y)Y=kb,ma=R.x,Ea=R.y,Ha=R.z}if(0<Y)R.x=ma,R.y=Ea,R.z=Ha;else{var xb=T*T+ia*ia+pa*pa;0<xb&&(xb=1/Math.sqrt(xb));T*=xb;ia*=xb;pa*=xb;var w=T*T+ia*ia+pa*pa,w=(U*T+Ca*ia+xa*pa)/w;ma=T*w;Ea=ia*w;Ha=pa*w;R.x=ma;R.y=Ea;R.z=Ha}var V=this.Zh;this.Kj=V.x*V.x+V.y*V.y+V.z*V.z;this.ze[0]=null;this.ze[1]=null;this.ze[2]=null;this.Oe[0]=-1;this.Oe[1]=-1;this.Oe[2]=-1;return!M},Lg:function(a){for(var b=0,e=0;3>e;)for(var d=e++,c=0;3>c;){var f=c++,h=this.pi[d];this.zb[d]==a.zb[this.pi[f]]&&this.zb[h]==a.zb[f]&&(this.ze[d]=a,this.Oe[d]=f,a.ze[f]=this,a.Oe[f]=d,++b)}return 1!=b?!1:!0},fk:function(){this.ia=this.M=null;this.Pk=0;this.hj=!1;this.Kj=0;this.zb[0]=null;this.zb[1]=null;this.zb[2]=null;this.ze[0]=null;this.ze[1]=null;this.ze[2]=null;this.Oe[0]=0;this.Oe[1]=0;this.Oe[2]=0}};de.prototype={za:function(a,b,e){var d=this.xd;d.x=a.x;d.y=a.y;d.z=a.z;a=this.jb;a.x=b.x;a.y=b.y;a.z=b.z;b=this.qb;b.x=e.x;b.y=e.y;b.z=e.z;this.ij=this.xi=this.M=null;return this},fk:function(){this.ij=this.xi=this.M=null}};xl.prototype={clear:function(){this.wl.Z()}};t.prototype={za:function(a,b,e){this.x=a;this.y=b;this.z=e;return this},Z:function(){this.z=this.y=this.x=0;return this},ed:function(a){return new t(this.x+a.x,this.y+a.y,this.z+a.z)},ua:function(a,b){return new t(this.x+a.x*b,this.y+a.y*b,this.z+a.z*b)},pe:function(a){return new t(this.x-a.x,this.y-a.y,this.z-a.z)},ne:function(a){return new t(this.x*a,this.y*a,this.z*a)},Ne:function(a,b,e){return new t(this.x*a,this.y*b,this.z*e)},Wd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},Ab:function(a){return new t(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},yd:function(a){var b=this.y+a.y,e=this.z+a.z;this.x+=a.x;this.y=b;this.z=e;return this},Oa:function(a,b){var e=this.y+a.y*b,d=this.z+a.z*b;this.x+=a.x*b;this.y=e;this.z=d;return this},Me:function(a){var b=this.y-a.y,e=this.z-a.z;this.x=this.x-a.x;this.y=b;this.z=e;return this},oe:function(a){var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Ef:function(a,b,e){b=this.y*b;e=this.z*e;this.x=this.x*a;this.y=b;this.z=e;return this},Mb:function(a){var b=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=b;this.z=e;return this},nc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02,this.x*a.e10+this.y*a.e11+this.z*a.e12,this.x*a.e20+this.y*a.e21+this.z*a.e22)},sc:function(a){return new t(this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03,this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23)},Ac:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;a=new t;a.x=b;a.y=e;a.z=d;return a},oc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12,e=this.x*a.e20+this.y*a.e21+this.z*a.e22;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02;this.y=b;this.z=e;return this},tc:function(a){var b=this.x*a.e10+this.y*a.e11+this.z*a.e12+a.e13,e=this.x*a.e20+this.y*a.e21+this.z*a.e22+a.e23;this.x=this.x*a.e00+this.y*a.e01+this.z*a.e02+a.e03;this.y=b;this.z=e;return this},Dc:function(a){var b,e,d;b=this.x;e=this.y;d=this.z;var c,f;c=a.o*b+a.f*e+a.h*d;f=a.i*b+a.m*e+a.j*d;d=a.l*b+a.g*e+a.s*d;b=c+a.v;e=f+a.A;d+=a.B;this.x=b;this.y=e;this.z=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},ke:function(){return this.x*this.x+this.y*this.y+this.z*this.z},me:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);return new t(this.x*a,this.y*a,this.z*a)},le:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0<a&&(a=1/a);var b=this.y*a,e=this.z*a;this.x=this.x*a;this.y=b;this.z=e;return this},Jc:function(){return new t(-this.x,-this.y,-this.z)},dd:function(){var a=-this.y,b=-this.z;this.x=-this.x;this.y=a;this.z=b;return this},be:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new t(this.x,this.y,this.z)},toString:function(){return"Vec3["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+", "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+", "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+"]"}};Va.prototype={Pf:function(){this.B=this.A=this.v=0;this.o=1;this.i=this.h=this.f=0;this.m=1;this.g=this.l=this.j=0;this.s=1;return this},Ab:function(){var a=new t;a.x=this.v;a.y=this.A;a.z=this.B;return a},Mb:function(a){a.x=this.v;a.y=this.A;a.z=this.B},Ac:function(a){this.v=a.x;this.A=a.y;this.B=a.z;return this},Jc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.v+=b;this.A+=e;this.B+=a},nc:function(){var a=new M;a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s;return a},oc:function(a){a.e00=this.o;a.e01=this.f;a.e02=this.h;a.e10=this.i;a.e11=this.m;a.e12=this.j;a.e20=this.l;a.e21=this.g;a.e22=this.s},Dc:function(a){this.o=a.e00;this.f=a.e01;this.h=a.e02;this.i=a.e10;this.m=a.e11;this.j=a.e12;this.l=a.e20;this.g=a.e21;this.s=a.e22;return this},sc:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.o+e*this.i+d*this.l;m=b*this.f+e*this.m+d*this.g;b=b*this.h+e*this.j+d*this.s;e=c*this.o+f*this.i+h*this.l;d=c*this.f+f*this.m+h*this.g;c=c*this.h+f*this.j+h*this.s;f=l*this.o+g*this.i+k*this.l;h=l*this.f+g*this.m+k*this.g;l=l*this.h+g*this.j+k*this.s;this.o=a;this.f=m;this.h=b;this.i=e;this.m=d;this.j=c;this.l=f;this.g=h;this.s=l},ua:function(){var a=new ra,b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},Oa:function(a){var b,e,d,c;b=this.o;e=this.m;d=this.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.g-this.j)*f,e=(this.h-this.l)*f,d=(this.i-this.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.f+this.i)*f,d=(this.h+this.l)*f,c=(this.g-this.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.f+this.i)*f,d=(this.j+this.g)*f,c=(this.h-this.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.h+this.l)*f,e=(this.j+this.g)*f,c=(this.i-this.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},tc:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.o=1-g-d;this.f=k-c;this.h=b+h;this.i=k+c;this.m=1-a-d;this.j=e-f;this.l=b-h;this.g=e+f;this.s=1-a-g;return this},clone:function(){var a=new Va;a.v=this.v;a.A=this.A;a.B=this.B;a.o=this.o;a.f=this.f;a.h=this.h;a.i=this.i;a.m=this.m;a.j=this.j;a.l=this.l;a.g=this.g;a.s=this.s;return a},be:function(a){this.v=a.v;this.A=a.A;this.B=a.B;this.o=a.o;this.f=a.f;this.h=a.h;this.i=a.i;this.m=a.m;this.j=a.j;this.l=a.l;this.g=a.g;this.s=a.s;return this}};Fb.nc=function(){return Fb.Oa};Fb.prototype={pj:function(a,b,e,d,c,f){this.mj=a;this.Yk=b;this.rc=e;this.Ic=d;var h=this.Na,l=this.jb,g=this.qb,k=this.closest,m=this.dir;null!=c?(null==c.ei&&(c.ei=new xl),this.Fn(c.ei)):m.Z();if(!(m.x*m.x+m.y*m.y+m.z*m.z)){var n,q,p;n=d.v-e.v;q=d.A-e.A;p=d.B-e.B;m.x=n;m.y=q;m.z=p;1E-6>m.x*m.x+m.y*m.y+m.z*m.z&&m.za(1,0,0)}this.ya=0;this.sf(!1);this.tf(!1);var r=this.Na[this.ya],v=this.jb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var la=this.qb[this.ya],x=r.y-la.y,A=r.z-la.z;r.x=r.x-la.x;r.y=x;r.z=A;this.ya=1;for(var u=0;40>u;){var C=0;switch(this.ya){case 1:var t=h[0];k.x=t.x;k.y=t.y;k.z=t.z;C=1;break;case 2:var B,D,z,Eb,L,I,Rb=h[0];B=Rb.x;D=Rb.y;z=Rb.z;var F=h[1];Eb=F.x;L=F.y;I=F.z;var E,db,M;E=Eb-B;db=L-D;M=I-z;var vc=E*B+db*D+M*z,vc=-vc/(E*E+db*db+M*M);if(0>vc){var ib=k;ib.x=B;ib.y=D;ib.z=z;C=1}else if(1<vc){var Da=k;Da.x=Eb;Da.y=L;Da.z=I;C=2}else{var Ia,oa,R;Ia=B+E*vc;oa=D+db*vc;R=z+M*vc;var U=k;U.x=Ia;U.y=oa;U.z=R;C=3}break;case 3:var Ca=h[0],xa=h[1],Ra=h[2],Ba,sa,Sa,G,Qa,W,N,Q,Z,ba,S,X,y,fa,T,ia,pa,wa,ya=Ca;Ba=ya.x;sa=ya.y;Sa=ya.z;var ha=xa;G=ha.x;Qa=ha.y;W=ha.z;var Y=Ra;N=Y.x;Q=Y.y;Z=Y.z;ba=G-Ba;S=Qa-sa;X=W-Sa;y=N-G;fa=Q-Qa;T=Z-W;ia=Ba-N;pa=sa-Q;wa=Sa-Z;var ma,Ea,Ha;ma=S*T-X*fa;Ea=X*y-ba*T;Ha=ba*fa-S*y;var J=Ba*(S*Ha-X*Ea)+sa*(X*ma-ba*Ha)+Sa*(ba*Ea-S*ma),ta=G*(fa*Ha-T*Ea)+Qa*(T*ma-y*Ha)+W*(y*Ea-fa*ma),ea=N*(pa*Ha-wa*Ea)+Q*(wa*ma-ia*Ha)+Z*(ia*Ea-pa*ma),aa=-1,Za,da,O,va=0;O=da=Za=0;if(0>J){var ob,na,P,La,ab,ub,gb=Ca;ob=gb.x;na=gb.y;P=gb.z;var ua=xa;La=ua.x;ab=ua.y;ub=ua.z;var Aa,Ya,Ja;Aa=La-ob;Ya=ab-na;Ja=ub-P;var wb=Aa*ob+Ya*na+Ja*P,wb=-wb/(Aa*Aa+Ya*Ya+Ja*Ja),Fa;if(0>wb){var ja=k;ja.x=ob;ja.y=na;ja.z=P;Fa=1}else if(1<wb){var qa=k;qa.x=La;qa.y=ab;qa.z=ub;Fa=2}else{var eb,Oa,Bb;eb=ob+Aa*wb;Oa=na+Ya*wb;Bb=P+Ja*wb;var mb=k;mb.x=eb;mb.y=Oa;mb.z=Bb;Fa=3}var hb=k.x*k.x+k.y*k.y+k.z*k.z,va=Fa,aa=hb,pb=k;Za=pb.x;da=pb.y;O=pb.z}if(0>ta){var qb,$a,yc,Ab,bb,Ka,Zb=xa;qb=Zb.x;$a=Zb.y;yc=Zb.z;var H=Ra;Ab=H.x;bb=H.y;Ka=H.z;var cb,jb,jc;cb=Ab-qb;jb=bb-$a;jc=Ka-yc;var kb=cb*qb+jb*$a+jc*yc,kb=-kb/(cb*cb+jb*jb+jc*jc),xb;if(0>kb){var w=k;w.x=qb;w.y=$a;w.z=yc;xb=1}else if(1<kb){var V=k;V.x=Ab;V.y=bb;V.z=Ka;xb=2}else{var ca,ad,cc;ca=qb+cb*kb;ad=$a+jb*kb;cc=yc+jc*kb;var Pa=k;Pa.x=ca;Pa.y=ad;Pa.z=cc;xb=3}var nb=k.x*k.x+k.y*k.y+k.z*k.z;if(0>aa||nb<aa){var va=xb<<1,aa=nb,rb=k;Za=rb.x;da=rb.y;O=rb.z}}if(0>ea){var Cb,sb,ga,Ua,fb,Xa,tb=Ca;Cb=tb.x;sb=tb.y;ga=tb.z;var Ma=Ra;Ua=Ma.x;fb=Ma.y;Xa=Ma.z;var Gb,mg,ka;Gb=Ua-Cb;mg=fb-sb;ka=Xa-ga;var Hb=Gb*Cb+mg*sb+ka*ga,Hb=-Hb/(Gb*Gb+mg*mg+ka*ka),Ob;if(0>Hb){var Tc=k;Tc.x=Cb;Tc.y=sb;Tc.z=ga;Ob=1}else if(1<Hb){var Xe=k;Xe.x=Ua;Xe.y=fb;Xe.z=Xa;Ob=2}else{var Ic,ye,sc;Ic=Cb+Gb*Hb;ye=sb+mg*Hb;sc=ga+ka*Hb;var ra=k;ra.x=Ic;ra.y=ye;ra.z=sc;Ob=3}var kl=k.x*k.x+k.y*k.y+k.z*k.z;if(0>aa||kl<aa){var va=Ob&1|(Ob&2)<<1,aa=kl,Jc=k;Za=Jc.x;da=Jc.y;O=Jc.z}}if(0<aa){var wc=k;wc.x=Za;wc.y=da;wc.z=O;C=va}else{var $b=ma*ma+Ea*Ea+Ha*Ha;0<$b&&($b=1/Math.sqrt($b));ma*=$b;Ea*=$b;Ha*=$b;var dc=ma*ma+Ea*Ea+Ha*Ha,dc=(Ba*ma+sa*Ea+Sa*Ha)/dc;Za=ma*dc;da=Ea*dc;O=Ha*dc;var kc=k;kc.x=Za;kc.y=da;kc.z=O;C=7}break;case 4:var Lb=h[0],Yb=h[1],Sb=h[2],nc=h[3],ac,Ib,Vb,bc,Kb,Tb,lb,Na,za,Ga,rc,gc,Zc,Kc,Ta,oc,uc,Va,zb,vb,Nc,Ec,Wa,Jd,Rf,Bd,Ug,Fk=Lb;ac=Fk.x;Ib=Fk.y;Vb=Fk.z;var yb=Yb;bc=yb.x;Kb=yb.y;Tb=yb.z;var Mb=Sb;lb=Mb.x;Na=Mb.y;za=Mb.z;var Cc=nc;Ga=Cc.x;rc=Cc.y;gc=Cc.z;Zc=bc-ac;Kc=Kb-Ib;Ta=Tb-Vb;oc=lb-ac;uc=Na-Ib;Va=za-Vb;zb=Ga-ac;vb=rc-Ib;Nc=gc-Vb;Ec=lb-bc;Wa=Na-Kb;Jd=za-Tb;Rf=Ga-bc;Bd=rc-Kb;Ug=gc-Tb;var Jb,Nb,Ef,Db,Uc,Ub,hc,ng,Pb,mc,Cg,ec;Jb=Kc*Va-Ta*uc;Nb=Ta*oc-Zc*Va;Ef=Zc*uc-Kc*oc;Db=uc*Nc-Va*vb;Uc=Va*zb-oc*Nc;Ub=oc*vb-uc*zb;hc=vb*Ta-Nc*Kc;ng=Nc*Zc-zb*Ta;Pb=zb*Kc-vb*Zc;mc=Bd*Jd-Ug*Wa;Cg=Ug*Ec-Rf*Jd;ec=Rf*Wa-Bd*Ec;var Fb=0<Zc*mc+Kc*Cg+Ta*ec?1:-1,lc=ac*Jb+Ib*Nb+Vb*Ef,Xb=ac*Db+Ib*Uc+Vb*Ub,Lc=ac*hc+Ib*ng+Vb*Pb,qc=bc*mc+Kb*Cg+Tb*ec,dg=-1,Yc,Vc,Gc,Sc=0;Gc=Vc=Yc=0;if(0>lc*Fb){var Bc,xc,ud,Dg,ic,Xd,pd,Kd,Qb,Wb,Rc,sd,le,me,ne,oe,vd,pe,pc=Lb;Bc=pc.x;xc=pc.y;ud=pc.z;var tc=Yb;Dg=tc.x;ic=tc.y;Xd=tc.z;var Ac=Sb;pd=Ac.x;Kd=Ac.y;Qb=Ac.z;Wb=Dg-Bc;Rc=ic-xc;sd=Xd-ud;le=pd-Dg;me=Kd-ic;ne=Qb-Xd;oe=Bc-pd;vd=xc-Kd;pe=ud-Qb;var Wc,nd,qd;Wc=Rc*ne-sd*me;nd=sd*le-Wb*ne;qd=Wb*me-Rc*le;var Mc=Bc*(Rc*qd-sd*nd)+xc*(sd*Wc-Wb*qd)+ud*(Wb*nd-Rc*Wc),zc=Dg*(me*qd-ne*nd)+ic*(ne*Wc-le*qd)+Xd*(le*nd-me*Wc),ed=pd*(vd*qd-pe*nd)+Kd*(pe*Wc-oe*qd)+Qb*(oe*nd-vd*Wc),fd=-1,gd,Hc,Fc,Dc=0;Fc=Hc=gd=0;if(0>Mc){var Yd,Be,lf,Fd,hj,Ld,Md=Lb;Yd=Md.x;Be=Md.y;lf=Md.z;var qe=Yb;Fd=qe.x;hj=qe.y;Ld=qe.z;var wd,xd,yd;wd=Fd-Yd;xd=hj-Be;yd=Ld-lf;var Nd=wd*Yd+xd*Be+yd*lf,Nd=-Nd/(wd*wd+xd*xd+yd*yd),re;if(0>Nd){var ee=k;ee.x=Yd;ee.y=Be;ee.z=lf;re=1}else if(1<Nd){var Od=k;Od.x=Fd;Od.y=hj;Od.z=Ld;re=2}else{var Zd,Gd,se;Zd=Yd+wd*Nd;Gd=Be+xd*Nd;se=lf+yd*Nd;var Le=k;Le.x=Zd;Le.y=Gd;Le.z=se;re=3}var $c=k.x*k.x+k.y*k.y+k.z*k.z,Dc=re,fd=$c,te=k;gd=te.x;Hc=te.y;Fc=te.z}if(0>zc){var Me,Pd,hd,zd,rd,id,jd=Yb;Me=jd.x;Pd=jd.y;hd=jd.z;var kd=Sb;zd=kd.x;rd=kd.y;id=kd.z;var Oc,Pc,Qc;Oc=zd-Me;Pc=rd-Pd;Qc=id-hd;var Xc=Oc*Me+Pc*Pd+Qc*hd,Xc=-Xc/(Oc*Oc+Pc*Pc+Qc*Qc),ld;if(0>Xc){var od=k;od.x=Me;od.y=Pd;od.z=hd;ld=1}else if(1<Xc){var bd=k;bd.x=zd;bd.y=rd;bd.z=id;ld=2}else{var cd,Ne,Ul;cd=Me+Oc*Xc;Ne=Pd+Pc*Xc;Ul=hd+Qc*Xc;var Oe=k;Oe.x=cd;Oe.y=Ne;Oe.z=Ul;ld=3}var td=k.x*k.x+k.y*k.y+k.z*k.z;if(0>fd||td<fd){var Dc=ld<<1,fd=td,tf=k;gd=tf.x;Hc=tf.y;Fc=tf.z}}if(0>ed){var dd,Ye,Pe,uf,mf,Ce,nf=Lb;dd=nf.x;Ye=nf.y;Pe=nf.z;var vf=Sb;uf=vf.x;mf=vf.y;Ce=vf.z;var wf,Qe,Re;wf=uf-dd;Qe=mf-Ye;Re=Ce-Pe;var fe=wf*dd+Qe*Ye+Re*Pe,fe=-fe/(wf*wf+Qe*Qe+Re*Re),ge;if(0>fe){var Se=k;Se.x=dd;Se.y=Ye;Se.z=Pe;ge=1}else if(1<fe){var xf=k;xf.x=uf;xf.y=mf;xf.z=Ce;ge=2}else{var Ze,yf,ij;Ze=dd+wf*fe;yf=Ye+Qe*fe;ij=Pe+Re*fe;var Gl=k;Gl.x=Ze;Gl.y=yf;Gl.z=ij;ge=3}var Ud=k.x*k.x+k.y*k.y+k.z*k.z;if(0>fd||Ud<fd){var Dc=ge&1|(ge&2)<<1,fd=Ud,Cd=k;gd=Cd.x;Hc=Cd.y;Fc=Cd.z}}var Hl;if(0<fd){var Il=k;Il.x=gd;Il.y=Hc;Il.z=Fc;Hl=Dc}else{var Ff=Wc*Wc+nd*nd+qd*qd;0<Ff&&(Ff=1/Math.sqrt(Ff));Wc*=Ff;nd*=Ff;qd*=Ff;var jj=Wc*Wc+nd*nd+qd*qd,jj=(Bc*Wc+xc*nd+ud*qd)/jj;gd=Wc*jj;Hc=nd*jj;Fc=qd*jj;var Zj=k;Zj.x=gd;Zj.y=Hc;Zj.z=Fc;Hl=7}var dm=k.x*k.x+k.y*k.y+k.z*k.z,Sc=Hl,dg=dm,ak=k;Yc=ak.x;Vc=ak.y;Gc=ak.z}if(0>Xb*Fb){var $e,of,yh,md,og,Qd,Rd,Sd,Dl,pg,qg,Te,af,bf,Ue,Sf,Gf,Hf,If=Lb;$e=If.x;of=If.y;yh=If.z;var eg=Sb;md=eg.x;og=eg.y;Qd=eg.z;var Jl=nc;Rd=Jl.x;Sd=Jl.y;Dl=Jl.z;pg=md-$e;qg=og-of;Te=Qd-yh;af=Rd-md;bf=Sd-og;Ue=Dl-Qd;Sf=$e-Rd;Gf=of-Sd;Hf=yh-Dl;var ue,$d,ae;ue=qg*Ue-Te*bf;$d=Te*af-pg*Ue;ae=pg*bf-qg*af;var em=$e*(qg*ae-Te*$d)+of*(Te*ue-pg*ae)+yh*(pg*$d-qg*ue),fg=md*(bf*ae-Ue*$d)+og*(Ue*ue-af*ae)+Qd*(af*$d-bf*ue),ze=Rd*(Gf*ae-Hf*$d)+Sd*(Hf*ue-Sf*ae)+Dl*(Sf*$d-Gf*ue),Hd=-1,Td,rg,bk,sg=0;bk=rg=Td=0;if(0>em){var De,Ve,pf,Jf,tg,Kf,Lf=Lb;De=Lf.x;Ve=Lf.y;pf=Lf.z;var Mf=Sb;Jf=Mf.x;tg=Mf.y;Kf=Mf.z;var qf,Tf,ug;qf=Jf-De;Tf=tg-Ve;ug=Kf-pf;var Uf=qf*De+Tf*Ve+ug*pf,Uf=-Uf/(qf*qf+Tf*Tf+ug*ug),El;if(0>Uf){var vg=k;vg.x=De;vg.y=Ve;vg.z=pf;El=1}else if(1<Uf){var Nf=k;Nf.x=Jf;Nf.y=tg;Nf.z=Kf;El=2}else{var Vf,zf,Eg;Vf=De+qf*Uf;zf=Ve+Tf*Uf;Eg=pf+ug*Uf;var Fg=k;Fg.x=Vf;Fg.y=zf;Fg.z=Eg;El=3}var Id=k.x*k.x+k.y*k.y+k.z*k.z,sg=El,Hd=Id,wg=k;Td=wg.x;rg=wg.y;bk=wg.z}if(0>fg){var Wf,Xf,rf,Gg,Ed,xg,yg=Sb;Wf=yg.x;Xf=yg.y;rf=yg.z;var zg=nc;Gg=zg.x;Ed=zg.y;xg=zg.z;var gg,Af,Of;gg=Gg-Wf;Af=Ed-Xf;Of=xg-rf;var Yf=gg*Wf+Af*Xf+Of*rf,Yf=-Yf/(gg*gg+Af*Af+Of*Of),fc;if(0>Yf){var Ge=k;Ge.x=Wf;Ge.y=Xf;Ge.z=rf;fc=1}else if(1<Yf){var Dd=k;Dd.x=Gg;Dd.y=Ed;Dd.z=xg;fc=2}else{var ke,Vg,Ke;ke=Wf+gg*Yf;Vg=Xf+Af*Yf;Ke=rf+Of*Yf;var Ad=k;Ad.x=ke;Ad.y=Vg;Ad.z=Ke;fc=3}var kf=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Hd||kf<Hd){var sg=fc<<1,Hd=kf,be=k;Td=be.x;rg=be.y;bk=be.z}}if(0>ze){var kj,lj,zh,Fe,ce,Ah,Bh=Lb;kj=Bh.x;lj=Bh.y;zh=Bh.z;var Ch=nc;Fe=Ch.x;ce=Ch.y;Ah=Ch.z;var Dh,Eh,Fh;Dh=Fe-kj;Eh=ce-lj;Fh=Ah-zh;var Hg=Dh*kj+Eh*lj+Fh*zh,Hg=-Hg/(Dh*Dh+Eh*Eh+Fh*Fh),Gh;if(0>Hg){var Hh=k;Hh.x=kj;Hh.y=lj;Hh.z=zh;Gh=1}else if(1<Hg){var Ih=k;Ih.x=Fe;Ih.y=ce;Ih.z=Ah;Gh=2}else{var mj,Wg,nj;mj=kj+Dh*Hg;Wg=lj+Eh*Hg;nj=zh+Fh*Hg;var Ie=k;Ie.x=mj;Ie.y=Wg;Ie.z=nj;Gh=3}var Je=k.x*k.x+k.y*k.y+k.z*k.z;if(0>Hd||Je<Hd){var sg=Gh&1|(Gh&2)<<1,Hd=Je,je=k;Td=je.x;rg=je.y;bk=je.z}}var Wd;if(0<Hd){var He=k;He.x=Td;He.y=rg;He.z=bk;Wd=sg}else{var Xg=ue*ue+$d*$d+ae*ae;0<Xg&&(Xg=1/Math.sqrt(Xg));ue*=Xg;$d*=Xg;ae*=Xg;var oj=ue*ue+$d*$d+ae*ae,oj=($e*ue+of*$d+yh*ae)/oj;Td=ue*oj;rg=$d*oj;bk=ae*oj;var ck=k;ck.x=Td;ck.y=rg;ck.z=bk;Wd=7}var dk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>dg||dk<dg){var Sc=Wd&1|(Wd&6)<<1,dg=dk,ek=k;Yc=ek.x;Vc=ek.y;Gc=ek.z}}if(0>Lc*Fb){var Ag,Ig,Jh,fk,pj,Yg,Zg,$g,Kh,ah,bh,ch,dh,eh,Jg,Lh,Mh,Nh,Oh=Lb;Ag=Oh.x;Ig=Oh.y;Jh=Oh.z;var Ph=Yb;fk=Ph.x;pj=Ph.y;Yg=Ph.z;var gk=nc;Zg=gk.x;$g=gk.y;Kh=gk.z;ah=fk-Ag;bh=pj-Ig;ch=Yg-Jh;dh=Zg-fk;eh=$g-pj;Jg=Kh-Yg;Lh=Ag-Zg;Mh=Ig-$g;Nh=Jh-Kh;var cf,df,ef;cf=bh*Jg-ch*eh;df=ch*dh-ah*Jg;ef=ah*eh-bh*dh;var de=Ag*(bh*ef-ch*df)+Ig*(ch*cf-ah*ef)+Jh*(ah*df-bh*cf),xe=fk*(eh*ef-Jg*df)+pj*(Jg*cf-dh*ef)+Yg*(dh*df-eh*cf),Bf=Zg*(Mh*ef-Nh*df)+$g*(Nh*cf-Lh*ef)+Kh*(Lh*df-Mh*cf),he=-1,ve,Qh,Rh,Hk=0;Rh=Qh=ve=0;if(0>de){var Zf,hg,ig,Kg,qj,Sh,Th=Lb;Zf=Th.x;hg=Th.y;ig=Th.z;var Uh=Yb;Kg=Uh.x;qj=Uh.y;Sh=Uh.z;var Vh,Wh,Xh;Vh=Kg-Zf;Wh=qj-hg;Xh=Sh-ig;var Lg=Vh*Zf+Wh*hg+Xh*ig,Lg=-Lg/(Vh*Vh+Wh*Wh+Xh*Xh),rj;if(0>Lg){var Yh=k;Yh.x=Zf;Yh.y=hg;Yh.z=ig;rj=1}else if(1<Lg){var Zh=k;Zh.x=Kg;Zh.y=qj;Zh.z=Sh;rj=2}else{var sj,fh,hk;sj=Zf+Vh*Lg;fh=hg+Wh*Lg;hk=ig+Xh*Lg;var ik=k;ik.x=sj;ik.y=fh;ik.z=hk;rj=3}var sf=k.x*k.x+k.y*k.y+k.z*k.z,Hk=rj,he=sf,Ik=k;ve=Ik.x;Qh=Ik.y;Rh=Ik.z}if(0>xe){var tj,uj,$h,Ee,jk,ai,bi=Yb;tj=bi.x;uj=bi.y;$h=bi.z;var ci=nc;Ee=ci.x;jk=ci.y;ai=ci.z;var di,ei,fi;di=Ee-tj;ei=jk-uj;fi=ai-$h;var Mg=di*tj+ei*uj+fi*$h,Mg=-Mg/(di*di+ei*ei+fi*fi),vj;if(0>Mg){var gi=k;gi.x=tj;gi.y=uj;gi.z=$h;vj=1}else if(1<Mg){var hi=k;hi.x=Ee;hi.y=jk;hi.z=ai;vj=2}else{var wj,gh,kk;wj=tj+di*Mg;gh=uj+ei*Mg;kk=$h+fi*Mg;var lk=k;lk.x=wj;lk.y=gh;lk.z=kk;vj=3}var Jk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>he||Jk<he){var Hk=vj<<1,he=Jk,Kk=k;ve=Kk.x;Qh=Kk.y;Rh=Kk.z}}if(0>Bf){var xj,yj,ii,Lk,mk,ji,ki=Lb;xj=ki.x;yj=ki.y;ii=ki.z;var li=nc;Lk=li.x;mk=li.y;ji=li.z;var mi,ni,oi;mi=Lk-xj;ni=mk-yj;oi=ji-ii;var Ng=mi*xj+ni*yj+oi*ii,Ng=-Ng/(mi*mi+ni*ni+oi*oi),pi;if(0>Ng){var qi=k;qi.x=xj;qi.y=yj;qi.z=ii;pi=1}else if(1<Ng){var ri=k;ri.x=Lk;ri.y=mk;ri.z=ji;pi=2}else{var zj,hh,Aj;zj=xj+mi*Ng;hh=yj+ni*Ng;Aj=ii+oi*Ng;var nk=k;nk.x=zj;nk.y=hh;nk.z=Aj;pi=3}var Mk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>he||Mk<he){var Hk=pi&1|(pi&2)<<1,he=Mk,Nk=k;ve=Nk.x;Qh=Nk.y;Rh=Nk.z}}var ok;if(0<he){var Ok=k;Ok.x=ve;Ok.y=Qh;Ok.z=Rh;ok=Hk}else{var ih=cf*cf+df*df+ef*ef;0<ih&&(ih=1/Math.sqrt(ih));cf*=ih;df*=ih;ef*=ih;var Bj=cf*cf+df*df+ef*ef,Bj=(Ag*cf+Ig*df+Jh*ef)/Bj;ve=cf*Bj;Qh=df*Bj;Rh=ef*Bj;var pk=k;pk.x=ve;pk.y=Qh;pk.z=Rh;ok=7}var qk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>dg||qk<dg){var Sc=ok&3|(ok&4)<<1,dg=qk,rk=k;Yc=rk.x;Vc=rk.y;Gc=rk.z}}if(0>qc*Fb){var Bg,Og,si,sk,Cj,jh,kh,lh,ti,mh,nh,oh,ph,qh,Pg,ui,vi,wi,xi=Yb;Bg=xi.x;Og=xi.y;si=xi.z;var yi=Sb;sk=yi.x;Cj=yi.y;jh=yi.z;var tk=nc;kh=tk.x;lh=tk.y;ti=tk.z;mh=sk-Bg;nh=Cj-Og;oh=jh-si;ph=kh-sk;qh=lh-Cj;Pg=ti-jh;ui=Bg-kh;vi=Og-lh;wi=si-ti;var ff,gf,hf;ff=nh*Pg-oh*qh;gf=oh*ph-mh*Pg;hf=mh*qh-nh*ph;var ag=Bg*(nh*hf-oh*gf)+Og*(oh*ff-mh*hf)+si*(mh*gf-nh*ff),Df=sk*(qh*hf-Pg*gf)+Cj*(Pg*ff-ph*hf)+jh*(ph*gf-qh*ff),Cf=kh*(vi*hf-wi*gf)+lh*(wi*ff-ui*hf)+ti*(ui*gf-vi*ff),ie=-1,we,zi,Ai,Pk=0;Ai=zi=we=0;if(0>ag){var $f,jg,kg,Qg,Dj,Bi,Ci=Yb;$f=Ci.x;jg=Ci.y;kg=Ci.z;var Di=Sb;Qg=Di.x;Dj=Di.y;Bi=Di.z;var Ei,Fi,Gi;Ei=Qg-$f;Fi=Dj-jg;Gi=Bi-kg;var Rg=Ei*$f+Fi*jg+Gi*kg,Rg=-Rg/(Ei*Ei+Fi*Fi+Gi*Gi),Ej;if(0>Rg){var Hi=k;Hi.x=$f;Hi.y=jg;Hi.z=kg;Ej=1}else if(1<Rg){var Ii=k;Ii.x=Qg;Ii.y=Dj;Ii.z=Bi;Ej=2}else{var Fj,rh,uk;Fj=$f+Ei*Rg;rh=jg+Fi*Rg;uk=kg+Gi*Rg;var vk=k;vk.x=Fj;vk.y=rh;vk.z=uk;Ej=3}var Pf=k.x*k.x+k.y*k.y+k.z*k.z,Pk=Ej,ie=Pf,Qk=k;we=Qk.x;zi=Qk.y;Ai=Qk.z}if(0>Df){var Gj,Hj,Ji,Vd,wk,Ki,Li=Sb;Gj=Li.x;Hj=Li.y;Ji=Li.z;var Mi=nc;Vd=Mi.x;wk=Mi.y;Ki=Mi.z;var Ni,Oi,Pi;Ni=Vd-Gj;Oi=wk-Hj;Pi=Ki-Ji;var Sg=Ni*Gj+Oi*Hj+Pi*Ji,Sg=-Sg/(Ni*Ni+Oi*Oi+Pi*Pi),Ij;if(0>Sg){var Qi=k;Qi.x=Gj;Qi.y=Hj;Qi.z=Ji;Ij=1}else if(1<Sg){var Ri=k;Ri.x=Vd;Ri.y=wk;Ri.z=Ki;Ij=2}else{var Jj,sh,xk;Jj=Gj+Ni*Sg;sh=Hj+Oi*Sg;xk=Ji+Pi*Sg;var yk=k;yk.x=Jj;yk.y=sh;yk.z=xk;Ij=3}var Rk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ie||Rk<ie){var Pk=Ij<<1,ie=Rk,Sk=k;we=Sk.x;zi=Sk.y;Ai=Sk.z}}if(0>Cf){var Kj,Lj,Si,Tk,zk,Ti,Ui=Yb;Kj=Ui.x;Lj=Ui.y;Si=Ui.z;var Vi=nc;Tk=Vi.x;zk=Vi.y;Ti=Vi.z;var Wi,Xi,Yi;Wi=Tk-Kj;Xi=zk-Lj;Yi=Ti-Si;var Tg=Wi*Kj+Xi*Lj+Yi*Si,Tg=-Tg/(Wi*Wi+Xi*Xi+Yi*Yi),Zi;if(0>Tg){var $i=k;$i.x=Kj;$i.y=Lj;$i.z=Si;Zi=1}else if(1<Tg){var aj=k;aj.x=Tk;aj.y=zk;aj.z=Ti;Zi=2}else{var Mj,th,Nj;Mj=Kj+Wi*Tg;th=Lj+Xi*Tg;Nj=Si+Yi*Tg;var Ak=k;Ak.x=Mj;Ak.y=th;Ak.z=Nj;Zi=3}var Uk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>ie||Uk<ie){var Pk=Zi&1|(Zi&2)<<1,ie=Uk,Vk=k;we=Vk.x;zi=Vk.y;Ai=Vk.z}}var Wk;if(0<ie){var Xk=k;Xk.x=we;Xk.y=zi;Xk.z=Ai;Wk=Pk}else{var uh=ff*ff+gf*gf+hf*hf;0<uh&&(uh=1/Math.sqrt(uh));ff*=uh;gf*=uh;hf*=uh;var Oj=ff*ff+gf*gf+hf*hf,Oj=(Bg*ff+Og*gf+si*hf)/Oj;we=ff*Oj;zi=gf*Oj;Ai=hf*Oj;var Bk=k;Bk.x=we;Bk.y=zi;Bk.z=Ai;Wk=7}var Yk=k.x*k.x+k.y*k.y+k.z*k.z;if(0>dg||Yk<dg){var Sc=Wk<<1,dg=Yk,Ck=k;Yc=Ck.x;Vc=Ck.y;Gc=Ck.z}}if(0<dg){var vh=k;vh.x=Yc;vh.y=Vc;vh.z=Gc;C=Sc}else k.Z(),C=15}if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z){if(!f)return this.distance=0;switch(this.ya){case 1:this.Hn();break;case 2:this.sl();break;case 3:this.zl()}if(4==this.ya){var Pj=this.bn(a,b,e,d,h,l,g);if(0!=Pj)return this.distance=0,Pj;this.distance=-this.depth;return 0}this.distance=0;return 1}this.Am(C);m.x=k.x;m.y=k.y;m.z=k.z;var wh=m,bg=-wh.y,jf=-wh.z;wh.x=-wh.x;wh.y=bg;wh.z=jf;this.sf(!1);this.tf(!1);var Qj=this.Na[this.ya],Rj=this.jb[this.ya];Qj.x=Rj.x;Qj.y=Rj.y;Qj.z=Rj.z;var We=Qj,xh=this.qb[this.ya],cg=We.y-xh.y,Qf=We.z-xh.z;We.x=We.x-xh.x;We.y=cg;We.z=Qf;if(1E-8>m.x*m.x+m.y*m.y+m.z*m.z)throw Error("!?");var Sj=h[this.ya];if(1E-8>Sj.x*m.x+Sj.y*m.y+Sj.z*m.z-(k.x*m.x+k.y*m.y+k.z*m.z))return this.mm(),this.distance=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z),null!=c&&null!=c.ei&&this.On(c.ei),0;this.ya++;++u}return 2},Zl:function(a,b,e,d,c,f,h){this.mj=a;this.Yk=b;this.rc=e;this.Ic=d;var l=this.Na,g=this.closest,k=this.dir,m,n,q;m=d.v-e.v;n=d.A-e.A;q=d.B-e.B;k.x=m;k.y=n;k.z=q;1E-6>k.x*k.x+k.y*k.y+k.z*k.z&&k.za(1,0,0);this.ya=0;if(null!=this.mj)this.sf(!0);else{var p=this.jb[this.ya];p.x=this.rc.v;p.y=this.rc.A;p.z=this.rc.B}this.tf(!0);var r=this.Na[this.ya],v=this.jb[this.ya];r.x=v.x;r.y=v.y;r.z=v.z;var la=this.qb[this.ya],x=r.y-la.y,A=r.z-la.z;r.x=r.x-la.x;r.y=x;r.z=A;this.ya=1;var u=0,C=0,t=this.Ln,B=this.Kn;t.Z();B.x=f.x;B.y=f.y;B.z=f.z;var D=B.y-c.y,z=B.z-c.z;B.x=B.x-c.x;B.y=D;for(B.z=z;40>u;){var Eb=0;switch(this.ya){case 1:var L=l[0];g.x=L.x;g.y=L.y;g.z=L.z;Eb=1;break;case 2:var I,Rb,F,E,db,M,vc=l[0];I=vc.x;Rb=vc.y;F=vc.z;var U=l[1];E=U.x;db=U.y;M=U.z;var Da,Ia,oa;Da=E-I;Ia=db-Rb;oa=M-F;var R=Da*I+Ia*Rb+oa*F,R=-R/(Da*Da+Ia*Ia+oa*oa);if(0>R){var P=g;P.x=I;P.y=Rb;P.z=F;Eb=1}else if(1<R){var Ca=g;Ca.x=E;Ca.y=db;Ca.z=M;Eb=2}else{var xa,Ra,Ba;xa=I+Da*R;Ra=Rb+Ia*R;Ba=F+oa*R;var sa=g;sa.x=xa;sa.y=Ra;sa.z=Ba;Eb=3}break;case 3:var Sa=l[0],G=l[1],Qa=l[2],W,N,Q,Z,ba,S,X,y,fa,T,ia,pa,wa,ya,ha,Y,ma,Ea,Ha=Sa;W=Ha.x;N=Ha.y;Q=Ha.z;var J=G;Z=J.x;ba=J.y;S=J.z;var ta=Qa;X=ta.x;y=ta.y;fa=ta.z;T=Z-W;ia=ba-N;pa=S-Q;wa=X-Z;ya=y-ba;ha=fa-S;Y=W-X;ma=N-y;Ea=Q-fa;var ea,aa,Za;ea=ia*ha-pa*ya;aa=pa*wa-T*ha;Za=T*ya-ia*wa;var da=W*(ia*Za-pa*aa)+N*(pa*ea-T*Za)+Q*(T*aa-ia*ea),O=Z*(ya*Za-ha*aa)+ba*(ha*ea-wa*Za)+S*(wa*aa-ya*ea),va=X*(ma*Za-Ea*aa)+y*(Ea*ea-Y*Za)+fa*(Y*aa-ma*ea),ob=-1,na,ra,La,ab=0;La=ra=na=0;if(0>da){var ub,gb,ua,Aa,Ya,Ja,wb=Sa;ub=wb.x;gb=wb.y;ua=wb.z;var Fa=G;Aa=Fa.x;Ya=Fa.y;Ja=Fa.z;var ja,qa,eb;ja=Aa-ub;qa=Ya-gb;eb=Ja-ua;var Oa=ja*ub+qa*gb+eb*ua,Oa=-Oa/(ja*ja+qa*qa+eb*eb),Bb;if(0>Oa){var mb=g;mb.x=ub;mb.y=gb;mb.z=ua;Bb=1}else if(1<Oa){var hb=g;hb.x=Aa;hb.y=Ya;hb.z=Ja;Bb=2}else{var pb,qb,$a;pb=ub+ja*Oa;qb=gb+qa*Oa;$a=ua+eb*Oa;var yc=g;yc.x=pb;yc.y=qb;yc.z=$a;Bb=3}var Ab=g.x*g.x+g.y*g.y+g.z*g.z,ab=Bb,ob=Ab,bb=g;na=bb.x;ra=bb.y;La=bb.z}if(0>O){var Ka,Zb,H,cb,jb,jc,kb=G;Ka=kb.x;Zb=kb.y;H=kb.z;var xb=Qa;cb=xb.x;jb=xb.y;jc=xb.z;var w,V,ca;w=cb-Ka;V=jb-Zb;ca=jc-H;var ad=w*Ka+V*Zb+ca*H,ad=-ad/(w*w+V*V+ca*ca),cc;if(0>ad){var Pa=g;Pa.x=Ka;Pa.y=Zb;Pa.z=H;cc=1}else if(1<ad){var nb=g;nb.x=cb;nb.y=jb;nb.z=jc;cc=2}else{var rb,Cb,sb;rb=Ka+w*ad;Cb=Zb+V*ad;sb=H+ca*ad;var ga=g;ga.x=rb;ga.y=Cb;ga.z=sb;cc=3}var Ua=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ob||Ua<ob){var ab=cc<<1,ob=Ua,fb=g;na=fb.x;ra=fb.y;La=fb.z}}if(0>va){var Xa,tb,Ma,Gb,mg,ka,Hb=Sa;Xa=Hb.x;tb=Hb.y;Ma=Hb.z;var Ob=Qa;Gb=Ob.x;mg=Ob.y;ka=Ob.z;var Tc,Xe,Ic;Tc=Gb-Xa;Xe=mg-tb;Ic=ka-Ma;var ye=Tc*Xa+Xe*tb+Ic*Ma,ye=-ye/(Tc*Tc+Xe*Xe+Ic*Ic),sc;if(0>ye){var Na=g;Na.x=Xa;Na.y=tb;Na.z=Ma;sc=1}else if(1<ye){var za=g;za.x=Gb;za.y=mg;za.z=ka;sc=2}else{var Jc,wc,$b;Jc=Xa+Tc*ye;wc=tb+Xe*ye;$b=Ma+Ic*ye;var dc=g;dc.x=Jc;dc.y=wc;dc.z=$b;sc=3}var kc=g.x*g.x+g.y*g.y+g.z*g.z;if(0>ob||kc<ob){var ab=sc&1|(sc&2)<<1,ob=kc,Lb=g;na=Lb.x;ra=Lb.y;La=Lb.z}}if(0<ob){var Yb=g;Yb.x=na;Yb.y=ra;Yb.z=La;Eb=ab}else{var Sb=ea*ea+aa*aa+Za*Za;0<Sb&&(Sb=1/Math.sqrt(Sb));ea*=Sb;aa*=Sb;Za*=Sb;var nc=ea*ea+aa*aa+Za*Za,nc=(W*ea+N*aa+Q*Za)/nc;na=ea*nc;ra=aa*nc;La=Za*nc;var ac=g;ac.x=na;ac.y=ra;ac.z=La;Eb=7}break;case 4:var Ib=l[0],Vb=l[1],bc=l[2],Kb=l[3],Tb,lb,Ga,Ta,Va,rc,gc,Zc,Kc,zb,oc,uc,vb,Wa,yb,Nc,Ec,Mb,Jd,Rf,Bd,Ug,Jb,Nb,Db,Cc,Ub,hc=Ib;Tb=hc.x;lb=hc.y;Ga=hc.z;var Ef=Vb;Ta=Ef.x;Va=Ef.y;rc=Ef.z;var Pb=bc;gc=Pb.x;Zc=Pb.y;Kc=Pb.z;var Uc=Kb;zb=Uc.x;oc=Uc.y;uc=Uc.z;vb=Ta-Tb;Wa=Va-lb;yb=rc-Ga;Nc=gc-Tb;Ec=Zc-lb;Mb=Kc-Ga;Jd=zb-Tb;Rf=oc-lb;Bd=uc-Ga;Ug=gc-Ta;Jb=Zc-Va;Nb=Kc-rc;Db=zb-Ta;Cc=oc-Va;Ub=uc-rc;var mc,ec,ng,Fb,ic,Cg,Wb,Qb,Rc,lc,Xb,Lc;mc=Wa*Mb-yb*Ec;ec=yb*Nc-vb*Mb;ng=vb*Ec-Wa*Nc;Fb=Ec*Bd-Mb*Rf;ic=Mb*Jd-Nc*Bd;Cg=Nc*Rf-Ec*Jd;Wb=Rf*yb-Bd*Wa;Qb=Bd*vb-Jd*yb;Rc=Jd*Wa-Rf*vb;lc=Cc*Nb-Ub*Jb;Xb=Ub*Ug-Db*Nb;Lc=Db*Jb-Cc*Ug;var qc=0<vb*lc+Wa*Xb+yb*Lc?1:-1,Yc=Tb*mc+lb*ec+Ga*ng,Vc=Tb*Fb+lb*ic+Ga*Cg,Gc=Tb*Wb+lb*Qb+Ga*Rc,Sc=Ta*lc+Va*Xb+rc*Lc,Bc=-1,xc,ud,pc,tc=0;pc=ud=xc=0;if(0>Yc*qc){var Xd,pd,Kd,Ac,Mc,zc,sd,le,me,ne,oe,vd,pe,dd,$c,bd,Wc,nd,qd=Ib;Xd=qd.x;pd=qd.y;Kd=qd.z;var Cd=Vb;Ac=Cd.x;Mc=Cd.y;zc=Cd.z;var md=bc;sd=md.x;le=md.y;me=md.z;ne=Ac-Xd;oe=Mc-pd;vd=zc-Kd;pe=sd-Ac;dd=le-Mc;$c=me-zc;bd=Xd-sd;Wc=pd-le;nd=Kd-me;var ed,fd,gd;ed=oe*$c-vd*dd;fd=vd*pe-ne*$c;gd=ne*dd-oe*pe;var Hc=Xd*(oe*gd-vd*fd)+pd*(vd*ed-ne*gd)+Kd*(ne*fd-oe*ed),Fc=Ac*(dd*gd-$c*fd)+Mc*($c*ed-pe*gd)+zc*(pe*fd-dd*ed),Dc=sd*(Wc*gd-nd*fd)+le*(nd*ed-bd*gd)+me*(bd*fd-Wc*ed),Yd=-1,Be,lf,Fd,hj=0;Fd=lf=Be=0;if(0>Hc){var Ld,Md,qe,wd,xd,yd,Nd=Ib;Ld=Nd.x;Md=Nd.y;qe=Nd.z;var re=Vb;wd=re.x;xd=re.y;yd=re.z;var ee,Od,Zd;ee=wd-Ld;Od=xd-Md;Zd=yd-qe;var Gd=ee*Ld+Od*Md+Zd*qe,Gd=-Gd/(ee*ee+Od*Od+Zd*Zd),se;if(0>Gd){var Le=g;Le.x=Ld;Le.y=Md;Le.z=qe;se=1}else if(1<Gd){var cd=g;cd.x=wd;cd.y=xd;cd.z=yd;se=2}else{var te,Me,Pd;te=Ld+ee*Gd;Me=Md+Od*Gd;Pd=qe+Zd*Gd;var hd=g;hd.x=te;hd.y=Me;hd.z=Pd;se=3}var zd=g.x*g.x+g.y*g.y+g.z*g.z,hj=se,Yd=zd,rd=g;Be=rd.x;lf=rd.y;Fd=rd.z}if(0>Fc){var id,jd,kd,Oc,Pc,Qc,Xc=Vb;id=Xc.x;jd=Xc.y;kd=Xc.z;var ld=bc;Oc=ld.x;Pc=ld.y;Qc=ld.z;var od,td,fc;od=Oc-id;td=Pc-jd;fc=Qc-kd;var Ne=od*id+td*jd+fc*kd,Ne=-Ne/(od*od+td*td+fc*fc),Ud;if(0>Ne){var Oe=g;Oe.x=id;Oe.y=jd;Oe.z=kd;Ud=1}else if(1<Ne){var Ed=g;Ed.x=Oc;Ed.y=Pc;Ed.z=Qc;Ud=2}else{var tf,Ge,Ye;tf=id+od*Ne;Ge=jd+td*Ne;Ye=kd+fc*Ne;var Pe=g;Pe.x=tf;Pe.y=Ge;Pe.z=Ye;Ud=3}var uf=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||uf<Yd){var hj=Ud<<1,Yd=uf,mf=g;Be=mf.x;lf=mf.y;Fd=mf.z}}if(0>Dc){var Ce,nf,vf,wf,Qe,Re,fe=Ib;Ce=fe.x;nf=fe.y;vf=fe.z;var ge=bc;wf=ge.x;Qe=ge.y;Re=ge.z;var Se,xf,Ze;Se=wf-Ce;xf=Qe-nf;Ze=Re-vf;var yf=Se*Ce+xf*nf+Ze*vf,yf=-yf/(Se*Se+xf*xf+Ze*Ze),ij;if(0>yf){var Dd=g;Dd.x=Ce;Dd.y=nf;Dd.z=vf;ij=1}else if(1<yf){var Ad=g;Ad.x=wf;Ad.y=Qe;Ad.z=Re;ij=2}else{var Id,Wd,ke;Id=Ce+Se*yf;Wd=nf+xf*yf;ke=vf+Ze*yf;var Ff=g;Ff.x=Id;Ff.y=Wd;Ff.z=ke;ij=3}var jj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Yd||jj<Yd){var hj=ij&1|(ij&2)<<1,Yd=jj,Zj=g;Be=Zj.x;lf=Zj.y;Fd=Zj.z}}var Ke;if(0<Yd){var ak=g;ak.x=Be;ak.y=lf;ak.z=Fd;Ke=hj}else{var $e=ed*ed+fd*fd+gd*gd;0<$e&&($e=1/Math.sqrt($e));ed*=$e;fd*=$e;gd*=$e;var of=ed*ed+fd*fd+gd*gd,of=(Xd*ed+pd*fd+Kd*gd)/of;Be=ed*of;lf=fd*of;Fd=gd*of;var yh=g;yh.x=Be;yh.y=lf;yh.z=Fd;Ke=7}var be=g.x*g.x+g.y*g.y+g.z*g.z,tc=Ke,Bc=be,og=g;xc=og.x;ud=og.y;pc=og.z}if(0>Vc*qc){var Qd,Rd,Sd,Fe,pg,qg,Te,af,bf,Ue,Sf,Gf,Hf,If,eg,ce,ue,$d,ae=Ib;Qd=ae.x;Rd=ae.y;Sd=ae.z;var Ie=bc;Fe=Ie.x;pg=Ie.y;qg=Ie.z;var fg=Kb;Te=fg.x;af=fg.y;bf=fg.z;Ue=Fe-Qd;Sf=pg-Rd;Gf=qg-Sd;Hf=Te-Fe;If=af-pg;eg=bf-qg;ce=Qd-Te;ue=Rd-af;$d=Sd-bf;var ze,Hd,Td;ze=Sf*eg-Gf*If;Hd=Gf*Hf-Ue*eg;Td=Ue*If-Sf*Hf;var rg=Qd*(Sf*Td-Gf*Hd)+Rd*(Gf*ze-Ue*Td)+Sd*(Ue*Hd-Sf*ze),kf=Fe*(If*Td-eg*Hd)+pg*(eg*ze-Hf*Td)+qg*(Hf*Hd-If*ze),sg=Te*(ue*Td-$d*Hd)+af*($d*ze-ce*Td)+bf*(ce*Hd-ue*ze),De=-1,Ve,pf,Jf,tg=0;Jf=pf=Ve=0;if(0>rg){var Kf,Lf,Mf,qf,Tf,ug,Uf=Ib;Kf=Uf.x;Lf=Uf.y;Mf=Uf.z;var je=bc;qf=je.x;Tf=je.y;ug=je.z;var vg,Nf,Vf;vg=qf-Kf;Nf=Tf-Lf;Vf=ug-Mf;var zf=vg*Kf+Nf*Lf+Vf*Mf,zf=-zf/(vg*vg+Nf*Nf+Vf*Vf),Eg;if(0>zf){var Fg=g;Fg.x=Kf;Fg.y=Lf;Fg.z=Mf;Eg=1}else if(1<zf){var He=g;He.x=qf;He.y=Tf;He.z=ug;Eg=2}else{var wg,Wf,Xf;wg=Kf+vg*zf;Wf=Lf+Nf*zf;Xf=Mf+Vf*zf;var rf=g;rf.x=wg;rf.y=Wf;rf.z=Xf;Eg=3}var Gg=g.x*g.x+g.y*g.y+g.z*g.z,tg=Eg,De=Gg,Je=g;Ve=Je.x;pf=Je.y;Jf=Je.z}if(0>kf){var xg,yg,zg,gg,Af,Of,Yf=bc;xg=Yf.x;yg=Yf.y;zg=Yf.z;var Ee=Kb;gg=Ee.x;Af=Ee.y;Of=Ee.z;var Vd,de,xe;Vd=gg-xg;de=Af-yg;xe=Of-zg;var Vg=Vd*xg+de*yg+xe*zg,Vg=-Vg/(Vd*Vd+de*de+xe*xe),sf;if(0>Vg){var ag=g;ag.x=xg;ag.y=yg;ag.z=zg;sf=1}else if(1<Vg){var Df=g;Df.x=gg;Df.y=Af;Df.z=Of;sf=2}else{var Pf,kj,lj;Pf=xg+Vd*Vg;kj=yg+de*Vg;lj=zg+xe*Vg;var zh=g;zh.x=Pf;zh.y=kj;zh.z=lj;sf=3}var bg=g.x*g.x+g.y*g.y+g.z*g.z;if(0>De||bg<De){var tg=sf<<1,De=bg,jf=g;Ve=jf.x;pf=jf.y;Jf=jf.z}}if(0>sg){var Ah,Bh,Ch,Dh,Eh,Fh,Hg=Ib;Ah=Hg.x;Bh=Hg.y;Ch=Hg.z;var Gh=Kb;Dh=Gh.x;Eh=Gh.y;Fh=Gh.z;var Hh,Ih,mj;Hh=Dh-Ah;Ih=Eh-Bh;mj=Fh-Ch;var Wg=Hh*Ah+Ih*Bh+mj*Ch,Wg=-Wg/(Hh*Hh+Ih*Ih+mj*mj),nj;if(0>Wg){var cg=g;cg.x=Ah;cg.y=Bh;cg.z=Ch;nj=1}else if(1<Wg){var Qf=g;Qf.x=Dh;Qf.y=Eh;Qf.z=Fh;nj=2}else{var gj,Vj,Wj;gj=Ah+Hh*Wg;Vj=Bh+Ih*Wg;Wj=Ch+mj*Wg;var Xg=g;Xg.x=gj;Xg.y=Vj;Xg.z=Wj;nj=3}var oj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>De||oj<De){var tg=nj&1|(nj&2)<<1,De=oj,ck=g;Ve=ck.x;pf=ck.y;Jf=ck.z}}var dk;if(0<De){var ek=g;ek.x=Ve;ek.y=pf;ek.z=Jf;dk=tg}else{var Ag=ze*ze+Hd*Hd+Td*Td;0<Ag&&(Ag=1/Math.sqrt(Ag));ze*=Ag;Hd*=Ag;Td*=Ag;var Ig=ze*ze+Hd*Hd+Td*Td,Ig=(Qd*ze+Rd*Hd+Sd*Td)/Ig;Ve=ze*Ig;pf=Hd*Ig;Jf=Td*Ig;var Jh=g;Jh.x=Ve;Jh.y=pf;Jh.z=Jf;dk=7}var fk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bc||fk<Bc){var tc=dk&1|(dk&6)<<1,Bc=fk,pj=g;xc=pj.x;ud=pj.y;pc=pj.z}}if(0>Gc*qc){var Yg,Zg,$g,Kh,ah,bh,ch,dh,eh,Jg,Lh,Mh,Nh,Oh,Ph,gk,cf,df,ef=Ib;Yg=ef.x;Zg=ef.y;$g=ef.z;var cj=Vb;Kh=cj.x;ah=cj.y;bh=cj.z;var dj=Kb;ch=dj.x;dh=dj.y;eh=dj.z;Jg=Kh-Yg;Lh=ah-Zg;Mh=bh-$g;Nh=ch-Kh;Oh=dh-ah;Ph=eh-bh;gk=Yg-ch;cf=Zg-dh;df=$g-eh;var Bf,he,ve;Bf=Lh*Ph-Mh*Oh;he=Mh*Nh-Jg*Ph;ve=Jg*Oh-Lh*Nh;var Qh=Yg*(Lh*ve-Mh*he)+Zg*(Mh*Bf-Jg*ve)+$g*(Jg*he-Lh*Bf),Rh=Kh*(Oh*ve-Ph*he)+ah*(Ph*Bf-Nh*ve)+bh*(Nh*he-Oh*Bf),Hk=ch*(cf*ve-df*he)+dh*(df*Bf-gk*ve)+eh*(gk*he-cf*Bf),Zf=-1,hg,ig,Kg,qj=0;Kg=ig=hg=0;if(0>Qh){var Sh,Th,Uh,Vh,Wh,Xh,Lg=Ib;Sh=Lg.x;Th=Lg.y;Uh=Lg.z;var rj=Vb;Vh=rj.x;Wh=rj.y;Xh=rj.z;var Yh,Zh,sj;Yh=Vh-Sh;Zh=Wh-Th;sj=Xh-Uh;var fh=Yh*Sh+Zh*Th+sj*Uh,fh=-fh/(Yh*Yh+Zh*Zh+sj*sj),hk;if(0>fh){var ik=g;ik.x=Sh;ik.y=Th;ik.z=Uh;hk=1}else if(1<fh){var ej=g;ej.x=Vh;ej.y=Wh;ej.z=Xh;hk=2}else{var Ik,tj,uj;Ik=Sh+Yh*fh;tj=Th+Zh*fh;uj=Uh+sj*fh;var $h=g;$h.x=Ik;$h.y=tj;$h.z=uj;hk=3}var Ek=g.x*g.x+g.y*g.y+g.z*g.z,qj=hk,Zf=Ek,jk=g;hg=jk.x;ig=jk.y;Kg=jk.z}if(0>Rh){var ai,bi,ci,di,ei,fi,Mg=Vb;ai=Mg.x;bi=Mg.y;ci=Mg.z;var vj=Kb;di=vj.x;ei=vj.y;fi=vj.z;var gi,hi,wj;gi=di-ai;hi=ei-bi;wj=fi-ci;var gh=gi*ai+hi*bi+wj*ci,gh=-gh/(gi*gi+hi*hi+wj*wj),kk;if(0>gh){var lk=g;lk.x=ai;lk.y=bi;lk.z=ci;kk=1}else if(1<gh){var Jk=g;Jk.x=di;Jk.y=ei;Jk.z=fi;kk=2}else{var Kk,xj,yj;Kk=ai+gi*gh;xj=bi+hi*gh;yj=ci+wj*gh;var ii=g;ii.x=Kk;ii.y=xj;ii.z=yj;kk=3}var Lk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zf||Lk<Zf){var qj=kk<<1,Zf=Lk,mk=g;hg=mk.x;ig=mk.y;Kg=mk.z}}if(0>Hk){var ji,ki,li,mi,ni,oi,Ng=Ib;ji=Ng.x;ki=Ng.y;li=Ng.z;var pi=Kb;mi=pi.x;ni=pi.y;oi=pi.z;var qi,ri,zj;qi=mi-ji;ri=ni-ki;zj=oi-li;var hh=qi*ji+ri*ki+zj*li,hh=-hh/(qi*qi+ri*ri+zj*zj),Aj;if(0>hh){var nk=g;nk.x=ji;nk.y=ki;nk.z=li;Aj=1}else if(1<hh){var Mk=g;Mk.x=mi;Mk.y=ni;Mk.z=oi;Aj=2}else{var Nk,ok,Ok;Nk=ji+qi*hh;ok=ki+ri*hh;Ok=li+zj*hh;var ih=g;ih.x=Nk;ih.y=ok;ih.z=Ok;Aj=3}var Bj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Zf||Bj<Zf){var qj=Aj&1|(Aj&2)<<1,Zf=Bj,pk=g;hg=pk.x;ig=pk.y;Kg=pk.z}}var qk;if(0<Zf){var rk=g;rk.x=hg;rk.y=ig;rk.z=Kg;qk=qj}else{var Bg=Bf*Bf+he*he+ve*ve;0<Bg&&(Bg=1/Math.sqrt(Bg));Bf*=Bg;he*=Bg;ve*=Bg;var Og=Bf*Bf+he*he+ve*ve,Og=(Yg*Bf+Zg*he+$g*ve)/Og;hg=Bf*Og;ig=he*Og;Kg=ve*Og;var si=g;si.x=hg;si.y=ig;si.z=Kg;qk=7}var sk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bc||sk<Bc){var tc=qk&3|(qk&4)<<1,Bc=sk,Cj=g;xc=Cj.x;ud=Cj.y;pc=Cj.z}}if(0>Sc*qc){var jh,kh,lh,ti,mh,nh,oh,ph,qh,Pg,ui,vi,wi,xi,yi,tk,ff,gf,hf=Vb;jh=hf.x;kh=hf.y;lh=hf.z;var fj=bc;ti=fj.x;mh=fj.y;nh=fj.z;var Tj=Kb;oh=Tj.x;ph=Tj.y;qh=Tj.z;Pg=ti-jh;ui=mh-kh;vi=nh-lh;wi=oh-ti;xi=ph-mh;yi=qh-nh;tk=jh-oh;ff=kh-ph;gf=lh-qh;var Cf,ie,we;Cf=ui*yi-vi*xi;ie=vi*wi-Pg*yi;we=Pg*xi-ui*wi;var zi=jh*(ui*we-vi*ie)+kh*(vi*Cf-Pg*we)+lh*(Pg*ie-ui*Cf),Ai=ti*(xi*we-yi*ie)+mh*(yi*Cf-wi*we)+nh*(wi*ie-xi*Cf),Pk=oh*(ff*we-gf*ie)+ph*(gf*Cf-tk*we)+qh*(tk*ie-ff*Cf),$f=-1,jg,kg,Qg,Dj=0;Qg=kg=jg=0;if(0>zi){var Bi,Ci,Di,Ei,Fi,Gi,Rg=Vb;Bi=Rg.x;Ci=Rg.y;Di=Rg.z;var Ej=bc;Ei=Ej.x;Fi=Ej.y;Gi=Ej.z;var Hi,Ii,Fj;Hi=Ei-Bi;Ii=Fi-Ci;Fj=Gi-Di;var rh=Hi*Bi+Ii*Ci+Fj*Di,rh=-rh/(Hi*Hi+Ii*Ii+Fj*Fj),uk;if(0>rh){var vk=g;vk.x=Bi;vk.y=Ci;vk.z=Di;uk=1}else if(1<rh){var Uj=g;Uj.x=Ei;Uj.y=Fi;Uj.z=Gi;uk=2}else{var Qk,Gj,Hj;Qk=Bi+Hi*rh;Gj=Ci+Ii*rh;Hj=Di+Fj*rh;var Ji=g;Ji.x=Qk;Ji.y=Gj;Ji.z=Hj;uk=3}var el=g.x*g.x+g.y*g.y+g.z*g.z,Dj=uk,$f=el,wk=g;jg=wk.x;kg=wk.y;Qg=wk.z}if(0>Ai){var Ki,Li,Mi,Ni,Oi,Pi,Sg=bc;Ki=Sg.x;Li=Sg.y;Mi=Sg.z;var Ij=Kb;Ni=Ij.x;Oi=Ij.y;Pi=Ij.z;var Qi,Ri,Jj;Qi=Ni-Ki;Ri=Oi-Li;Jj=Pi-Mi;var sh=Qi*Ki+Ri*Li+Jj*Mi,sh=-sh/(Qi*Qi+Ri*Ri+Jj*Jj),xk;if(0>sh){var yk=g;yk.x=Ki;yk.y=Li;yk.z=Mi;xk=1}else if(1<sh){var Rk=g;Rk.x=Ni;Rk.y=Oi;Rk.z=Pi;xk=2}else{var Sk,Kj,Lj;Sk=Ki+Qi*sh;Kj=Li+Ri*sh;Lj=Mi+Jj*sh;var Si=g;Si.x=Sk;Si.y=Kj;Si.z=Lj;xk=3}var Tk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>$f||Tk<$f){var Dj=xk<<1,$f=Tk,zk=g;jg=zk.x;kg=zk.y;Qg=zk.z}}if(0>Pk){var Ti,Ui,Vi,Wi,Xi,Yi,Tg=Vb;Ti=Tg.x;Ui=Tg.y;Vi=Tg.z;var Zi=Kb;Wi=Zi.x;Xi=Zi.y;Yi=Zi.z;var $i,aj,Mj;$i=Wi-Ti;aj=Xi-Ui;Mj=Yi-Vi;var th=$i*Ti+aj*Ui+Mj*Vi,th=-th/($i*$i+aj*aj+Mj*Mj),Nj;if(0>th){var Ak=g;Ak.x=Ti;Ak.y=Ui;Ak.z=Vi;Nj=1}else if(1<th){var Uk=g;Uk.x=Wi;Uk.y=Xi;Uk.z=Yi;Nj=2}else{var Vk,Wk,Xk;Vk=Ti+$i*th;Wk=Ui+aj*th;Xk=Vi+Mj*th;var uh=g;uh.x=Vk;uh.y=Wk;uh.z=Xk;Nj=3}var Oj=g.x*g.x+g.y*g.y+g.z*g.z;if(0>$f||Oj<$f){var Dj=Nj&1|(Nj&2)<<1,$f=Oj,Bk=g;jg=Bk.x;kg=Bk.y;Qg=Bk.z}}var Yk;if(0<$f){var Ck=g;Ck.x=jg;Ck.y=kg;Ck.z=Qg;Yk=Dj}else{var vh=Cf*Cf+ie*ie+we*we;0<vh&&(vh=1/Math.sqrt(vh));Cf*=vh;ie*=vh;we*=vh;var Pj=Cf*Cf+ie*ie+we*we,Pj=(jh*Cf+kh*ie+lh*we)/Pj;jg=Cf*Pj;kg=ie*Pj;Qg=we*Pj;var wh=g;wh.x=jg;wh.y=kg;wh.z=Qg;Yk=7}var Dk=g.x*g.x+g.y*g.y+g.z*g.z;if(0>Bc||Dk<Bc){var tc=Yk<<1,Bc=Dk,Xj=g;xc=Xj.x;ud=Xj.y;pc=Xj.z}}if(0<Bc){var Qj=g;Qj.x=xc;Qj.y=ud;Qj.z=pc;Eb=tc}else g.Z(),Eb=15}this.Am(Eb);if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z){if(!C||4==this.ya){h.fraction=C;break}this.mm();h.fraction=C;var Rj=h.normal;Rj.x=k.x;Rj.y=k.y;Rj.z=k.z;var We=Rj,xh=Math.sqrt(We.x*We.x+We.y*We.y+We.z*We.z);0<xh&&(xh=1/xh);var il=We.y*xh,jl=We.z*xh;We.x=We.x*xh;We.y=il;We.z=jl;var Sj=h.position,Yj=this.closestPoint1;Sj.x=Yj.x;Sj.y=Yj.y;Sj.z=Yj.z;var Zk=Sj,ml=Zk.y+c.y*C,nl=Zk.z+c.z*C;Zk.x+=c.x*C;Zk.y=ml;Zk.z=nl;return!0}k.x=g.x;k.y=g.y;k.z=g.z;var $k=k,ol=-$k.y,pl=-$k.z;$k.x=-$k.x;$k.y=ol;$k.z=pl;if(null!=this.mj)this.sf(!0);else{var Kl=this.jb[this.ya];Kl.x=this.rc.v;Kl.y=this.rc.A;Kl.z=this.rc.B}this.tf(!0);var Fl=this.Na[this.ya],Ll=this.jb[this.ya];Fl.x=Ll.x;Fl.y=Ll.y;Fl.z=Ll.z;var al=Fl,Ml=this.qb[this.ya],ql=al.y-Ml.y,rl=al.z-Ml.z;al.x=al.x-Ml.x;al.y=ql;al.z=rl;var bl=l[this.ya],sl=bl.y-t.y,tl=bl.z-t.z;bl.x=bl.x-t.x;bl.y=sl;bl.z=tl;if(1E-8>k.x*k.x+k.y*k.y+k.z*k.z)throw Error("!?");var Nl=l[this.ya],bj=k,dl=Nl.x*bj.x+Nl.y*bj.y+Nl.z*bj.z;if(0>dl){if(0<=B.x*bj.x+B.y*bj.y+B.z*bj.z)break;var ll=dl/(B.x*bj.x+B.y*bj.y+B.z*bj.z),C=C+ll;if(1<=C)break;var ul=t.y+B.y*ll,vl=t.z+B.z*ll;t.x=t.x+B.x*ll;t.y=ul;t.z=vl;for(var fl=0,wl=this.ya+1;fl<wl;){var xl=fl++,cl=l[xl],Ol=-ll,yl=cl.y+B.y*Ol,zl=cl.z+B.z*Ol;cl.x=cl.x+B.x*Ol;cl.y=yl;cl.z=zl}}for(var gl=!1,hl=0,Al=this.ya;hl<Al;){var Pl=hl++,Vl=l[Pl].x-l[this.ya].x,Wl=l[Pl].y-l[this.ya].y,Xl=l[Pl].z-l[this.ya].z;if(1E-8>Vl*Vl+Wl*Wl+Xl*Xl){gl=!0;break}}gl||this.ya++;++u}return!1},mm:function(){switch(this.ya){case 1:var a=this.closestPoint1,b=this.jb[0];a.x=b.x;a.y=b.y;a.z=b.z;var e=this.closestPoint2,d=this.qb[0];e.x=d.x;e.y=d.y;e.z=d.z;break;case 2:var c,f,h,l=this.closest;c=l.x;f=l.y;h=l.z;var g,k,m,n,q,p,r,v,la,x,A,u,t,K,B,D,z,Eb,L=this.Na[0];g=L.x;k=L.y;m=L.z;var I=this.jb[0];n=I.x;q=I.y;p=I.z;var Rb=this.qb[0];r=Rb.x;v=Rb.y;la=Rb.z;var F=this.Na[1];x=F.x;A=F.y;u=F.z;var E=this.jb[1];t=E.x;K=E.y;B=E.z;var db=this.qb[1];D=db.x;z=db.y;Eb=db.z;var M,U,ib;M=x-g;U=A-k;ib=u-m;var Da=M*M+U*U+ib*ib;Da&&(Da=1/Da);var Ia=((c-g)*M+(f-k)*U+(h-m)*ib)*Da,oa,R,P,Ca,xa,Ra,Ba,sa,Sa;oa=t-n;R=K-q;P=B-p;Ca=n+oa*Ia;xa=q+R*Ia;Ra=p+P*Ia;oa=D-r;R=z-v;P=Eb-la;Ba=r+oa*Ia;sa=v+R*Ia;Sa=la+P*Ia;var G=this.closestPoint1;G.x=Ca;G.y=xa;G.z=Ra;var Qa=this.closestPoint2;Qa.x=Ba;Qa.y=sa;Qa.z=Sa;break;case 3:var W,N,Q,Z=this.closest;W=Z.x;N=Z.y;Q=Z.z;var ba,S,X,y,fa,T,ia,pa,wa,ya,ha,Y,ma,Ea,Ha,J,ta,ea,aa,Za,da,O,va,ob,na,ra,La,ab=this.Na[0];ba=ab.x;S=ab.y;X=ab.z;var ub=this.jb[0];y=ub.x;fa=ub.y;T=ub.z;var gb=this.qb[0];ia=gb.x;pa=gb.y;wa=gb.z;var ua=this.Na[1];ya=ua.x;ha=ua.y;Y=ua.z;var Aa=this.jb[1];ma=Aa.x;Ea=Aa.y;Ha=Aa.z;var Ya=this.qb[1];J=Ya.x;ta=Ya.y;ea=Ya.z;var Ja=this.Na[2];aa=Ja.x;Za=Ja.y;da=Ja.z;var wb=this.jb[2];O=wb.x;va=wb.y;ob=wb.z;var Fa=this.qb[2];na=Fa.x;ra=Fa.y;La=Fa.z;var ja,qa,eb,Oa,Bb,mb,hb,pb,qb;ja=ya-ba;qa=ha-S;eb=Y-X;Oa=aa-ba;Bb=Za-S;mb=da-X;hb=W-ba;pb=N-S;qb=Q-X;var $a=ja*ja+qa*qa+eb*eb,yc=ja*Oa+qa*Bb+eb*mb,Ab=Oa*Oa+Bb*Bb+mb*mb,bb=ja*hb+qa*pb+eb*qb,Ka=Oa*hb+Bb*pb+mb*qb,Zb=$a*Ab-yc*yc;Zb&&(Zb=1/Zb);var H=(bb*Ab-Ka*yc)*Zb,cb=(-bb*yc+Ka*$a)*Zb,jb,jc,kb,xb,w,V,ca,ad,cc;jb=ma-y;jc=Ea-fa;kb=Ha-T;xb=y+jb*H;w=fa+jc*H;V=T+kb*H;jb=O-y;jc=va-fa;kb=ob-T;xb+=jb*cb;w+=jc*cb;V+=kb*cb;jb=J-ia;jc=ta-pa;kb=ea-wa;ca=ia+jb*H;ad=pa+jc*H;cc=wa+kb*H;jb=na-ia;jc=ra-pa;kb=La-wa;ca+=jb*cb;ad+=jc*cb;cc+=kb*cb;var Pa=this.closestPoint1;Pa.x=xb;Pa.y=w;Pa.z=V;var nb=this.closestPoint2;nb.x=ca;nb.y=ad;nb.z=cc;break;default:throw Error("!?");}},Fn:function(a){var b=this.dir;a=a.wl;b.x=a.x;b.y=a.y;b.z=a.z},On:function(a){a=a.wl;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;var b=-a.y,e=-a.z;a.x=-a.x;a.y=b;a.z=e},Am:function(a){this.ya=a;this.ya=(this.ya&5)+(this.ya>>1&5);this.ya=(this.ya&3)+(this.ya>>2&3);switch(a){case 2:a=this.Na[0];var b=this.Na[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.Na[1];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 6:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.Na[0];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 10:a=this.Na[0];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.Na[2];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[2];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[2];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.Na[0];b=this.Na[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[0];b=this.jb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[0];b=this.qb[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.Na[1];b=this.Na[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.jb[1];b=this.jb[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.qb[1];b=this.qb[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.Na[0],b=this.Na[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.jb[0],b=this.jb[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.qb[0],b=this.qb[3],a.x=b.x,a.y=b.y,a.z=b.z}},sf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;e=this.rc.o*c+this.rc.i*f+this.rc.l*h;l=this.rc.f*c+this.rc.m*f+this.rc.g*h;b=this.rc.h*c+this.rc.j*f+this.rc.s*h;d=this.dir;d.x=e;d.y=l;d.z=b;this.mj.Pd(this.dir,this.jb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.jb[this.ya],b=this.dir,e=this.mj.Rb,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.jb[this.ya];b=a.x;e=a.y;d=a.z;l=this.rc.o*b+this.rc.f*e+this.rc.h*d;a=this.rc.i*b+this.rc.m*e+this.rc.j*d;e=this.rc.l*b+this.rc.g*e+this.rc.s*d;b=l+this.rc.v;a+=this.rc.A;e+=this.rc.B;l=this.jb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},tf:function(a){var b,e,d,c,f,h;h=this.dir;c=h.x;f=h.y;h=h.z;var l;b=this.Ic.o*c+this.Ic.i*f+this.Ic.l*h;e=this.Ic.f*c+this.Ic.m*f+this.Ic.g*h;l=this.Ic.h*c+this.Ic.j*f+this.Ic.s*h;d=this.dir;d.x=-b;d.y=-e;d.z=-l;this.Yk.Pd(this.dir,this.qb[this.ya]);a&&(a=this.dir,b=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<b&&(b=1/b),e=a.y*b,l=a.z*b,a.x=a.x*b,a.y=e,a.z=l,a=this.qb[this.ya],b=this.dir,e=this.Yk.Rb,l=a.y+b.y*e,d=a.z+b.z*e,a.x+=b.x*e,a.y=l,a.z=d);a=this.qb[this.ya];b=a.x;e=a.y;d=a.z;l=this.Ic.o*b+this.Ic.f*e+this.Ic.h*d;a=this.Ic.i*b+this.Ic.m*e+this.Ic.j*d;e=this.Ic.l*b+this.Ic.g*e+this.Ic.s*d;b=l+this.Ic.v;a+=this.Ic.A;e+=this.Ic.B;l=this.qb[this.ya];l.x=b;l.y=a;l.z=e;a=this.dir;a.x=c;a.y=f;a.z=h},Hn:function(){for(var a=0;3>a;){var b=a++,e=this.dir,b=this.kj[b];e.x=b.x;e.y=b.y;e.z=b.z;this.sf(!1);this.tf(!1);e=this.Na[this.ya];b=this.jb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;var b=this.qb[this.ya],d=e.y-b.y,c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.ya++;this.sl();if(4==this.ya)break;this.ya--;e=this.dir;b=-e.y;d=-e.z;e.x=-e.x;e.y=b;e.z=d;this.sf(!1);this.tf(!1);e=this.Na[this.ya];b=this.jb[this.ya];e.x=b.x;e.y=b.y;e.z=b.z;b=this.qb[this.ya];d=e.y-b.y;c=e.z-b.z;e.x=e.x-b.x;e.y=d;e.z=c;this.ya++;this.sl();if(4==this.ya)break;this.ya--}},sl:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;e=e.z;var d,c,f,h,l,g;f=this.Na[0];d=f.x;c=f.y;f=f.z;g=this.Na[1];h=g.x;l=g.y;g=g.z;d-=h;c-=l;f-=g;for(l=0;3>l;){g=l++;var k,m;g=this.kj[g];h=g.x;k=g.y;m=g.z;g=c*m-f*k;m=f*h-d*m;h=d*k-c*h;k=this.dir;k.x=g;k.y=m;k.z=h;this.sf(!1);this.tf(!1);g=this.Na[this.ya];h=this.jb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.qb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.zl();if(4==this.ya)break;this.ya--;g=this.dir;h=-g.y;k=-g.z;g.x=-g.x;g.y=h;g.z=k;this.sf(!1);this.tf(!1);g=this.Na[this.ya];h=this.jb[this.ya];g.x=h.x;g.y=h.y;g.z=h.z;h=this.qb[this.ya];k=g.y-h.y;m=g.z-h.z;g.x=g.x-h.x;g.y=k;g.z=m;this.ya++;this.zl();if(4==this.ya)break;this.ya--}d=this.dir;d.x=a;d.y=b;d.z=e},zl:function(){var a,b,e;e=this.dir;a=e.x;b=e.y;for(e=e.z;;){var d,c,f,h,l,g,k,m,n;f=this.Na[0];d=f.x;c=f.y;f=f.z;m=this.Na[1];h=m.x;l=m.y;g=m.z;n=this.Na[2];k=n.x;m=n.y;n=n.z;h-=d;l-=c;g-=f;d=k-d;c=m-c;m=n-f;f=l*m-g*c;m=g*d-h*m;c=h*c-l*d;h=this.dir;h.x=f;h.y=m;h.z=c;this.sf(!1);this.tf(!1);c=this.Na[this.ya];f=this.jb[this.ya];c.x=f.x;c.y=f.y;c.z=f.z;f=this.qb[this.ya];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.ya++;if(this.nm())break;this.ya--;c=this.dir;f=-c.y;h=-c.z;c.x=-c.x;c.y=f;c.z=h;this.sf(!1);this.tf(!1);c=this.Na[this.ya];f=this.jb[this.ya];c.x=f.x;c.y=f.y;c.z=f.z;f=this.qb[this.ya];h=c.y-f.y;d=c.z-f.z;c.x=c.x-f.x;c.y=h;c.z=d;this.ya++;if(this.nm())break;this.ya--;break}c=this.dir;c.x=a;c.y=b;c.z=e},nm:function(){var a=this.Na[2].x-this.Na[0].x,b=this.Na[2].y-this.Na[0].y,e=this.Na[2].z-this.Na[0].z,d=this.Na[3].x-this.Na[0].x,c=this.Na[3].y-this.Na[0].y,f=this.Na[3].z-this.Na[0].z,a=(this.Na[1].x-this.Na[0].x)*(b*f-e*c)-(this.Na[1].y-this.Na[0].y)*(a*f-e*d)+(this.Na[1].z-this.Na[0].z)*(a*c-b*d);return 1E-12<a?!0:-1E-12>a},bn:function(a,b,e,d,c,f,h){for(var l=this.Ig;0<l.fh;){var g=l.hd;l.fh--;var k=g.ia,m=g.M;null!=k&&(k.M=m);null!=m&&(m.ia=k);g==l.hd&&(l.hd=l.hd.M);g==l.Pc&&(l.Pc=l.Pc.ia);g.M=null;g.ia=null;g.fk();g.M=l.ye;l.ye=g}for(;0<l.Ge;){var n=l.zb[--l.Ge];n.fk();n.M=l.Ue;l.Ue=n}var q=this.Ig,p=this.Ig,r=p.Ue;null!=r?(p.Ue=r.M,r.M=null):r=new de;var v=r.za(c[0],f[0],h[0]),t=this.Ig,x=t.Ue;null!=x?(t.Ue=x.M,x.M=null):x=new de;var A=x.za(c[1],f[1],h[1]),u=this.Ig,C=u.Ue;null!=C?(u.Ue=C.M,C.M=null):C=new de;var K=C.za(c[2],f[2],h[2]),B=this.Ig,D=B.Ue;null!=D?(B.Ue=D.M,D.M=null):D=new de;if(!q.Zg(v,A,K,D.za(c[3],f[3],h[3])))return ic.EPA_FAILED_TO_INIT;this.ya=0;for(var z=this.Na[0],Eb=this.jb[0],L=this.qb[0],I=0;40>I;){for(var Rb=this.Ig.hd,F=1/0,E=null;null!=Rb;){var db=Rb.M;Rb.Kj<F&&(F=Rb.Kj,E=Rb);Rb=db}var M=E,U=this.dir,P=M.Rj;U.x=P.x;U.y=P.y;U.z=P.z;var Da=U,Ia=Math.sqrt(Da.x*Da.x+Da.y*Da.y+Da.z*Da.z);0<Ia&&(Ia=1/Ia);var oa=Da.y*Ia,R=Da.z*Ia;Da.x=Da.x*Ia;Da.y=oa;Da.z=R;this.sf(!1);this.tf(!1);var ra=this.Na[this.ya],Ca=this.jb[this.ya];ra.x=Ca.x;ra.y=Ca.y;ra.z=Ca.z;var xa=ra,Ra=this.qb[this.ya],Ba=xa.y-Ra.y,sa=xa.z-Ra.z;xa.x=xa.x-Ra.x;xa.y=Ba;xa.z=sa;var Sa=M.zb[0],G=M.zb[1],Qa=M.zb[2],W=Sa.xd,N=this.dir,Q=this.dir;if(1E-6>z.x*Q.x+z.y*Q.y+z.z*Q.z-(W.x*N.x+W.y*N.y+W.z*N.z)||39==I){var Z=this.closest,ba=this.dir;Z.x=ba.x;Z.y=ba.y;Z.z=ba.z;var S=Z,X=this.dir,y=Sa.xd,fa=this.dir,T=(X.x*y.x+X.y*y.y+X.z*y.z)/(fa.x*fa.x+fa.y*fa.y+fa.z*fa.z),ia=S.y*T,pa=S.z*T;S.x=S.x*T;S.y=ia;S.z=pa;var wa,ya,ha,Y=this.closest;wa=Y.x;ya=Y.y;ha=Y.z;var ma,Ea,Ha,J,ta,ea,aa,Za,da,O,va,ob,na,Ga,La,ab,ub,gb,ua,Aa,Ya,Ja,wb,Fa,ja,qa,eb,Oa=Sa.xd;ma=Oa.x;Ea=Oa.y;Ha=Oa.z;var Bb=Sa.jb;J=Bb.x;ta=Bb.y;ea=Bb.z;var mb=Sa.qb;aa=mb.x;Za=mb.y;da=mb.z;var hb=G.xd;O=hb.x;va=hb.y;ob=hb.z;var pb=G.jb;na=pb.x;Ga=pb.y;La=pb.z;var qb=G.qb;ab=qb.x;ub=qb.y;gb=qb.z;var $a=Qa.xd;ua=$a.x;Aa=$a.y;Ya=$a.z;var yc=Qa.jb;Ja=yc.x;wb=yc.y;Fa=yc.z;var Ab=Qa.qb;ja=Ab.x;qa=Ab.y;eb=Ab.z;var bb,Ka,Zb,H,cb,jb,jc,kb,xb;bb=O-ma;Ka=va-Ea;Zb=ob-Ha;H=ua-ma;cb=Aa-Ea;jb=Ya-Ha;jc=wa-ma;kb=ya-Ea;xb=ha-Ha;var w=bb*bb+Ka*Ka+Zb*Zb,V=bb*H+Ka*cb+Zb*jb,ca=H*H+cb*cb+jb*jb,ad=bb*jc+Ka*kb+Zb*xb,cc=H*jc+cb*kb+jb*xb,Pa=w*ca-V*V;Pa&&(Pa=1/Pa);var nb=(ad*ca-cc*V)*Pa,rb=(-ad*V+cc*w)*Pa,Cb,sb,ga,Ua,fb,Xa,tb,Ma,Gb;Cb=na-J;sb=Ga-ta;ga=La-ea;Ua=J+Cb*nb;fb=ta+sb*nb;Xa=ea+ga*nb;Cb=Ja-J;sb=wb-ta;ga=Fa-ea;Ua+=Cb*rb;fb+=sb*rb;Xa+=ga*rb;Cb=ab-aa;sb=ub-Za;ga=gb-da;tb=aa+Cb*nb;Ma=Za+sb*nb;Gb=da+ga*nb;Cb=ja-aa;sb=qa-Za;ga=eb-da;tb+=Cb*rb;Ma+=sb*rb;Gb+=ga*rb;var Na=this.closestPoint1;Na.x=Ua;Na.y=fb;Na.z=Xa;var ka=this.closestPoint2;ka.x=tb;ka.y=Ma;ka.z=Gb;var Hb=this.closest;this.depth=Math.sqrt(Hb.x*Hb.x+Hb.y*Hb.y+Hb.z*Hb.z);return ic.SUCCEEDED}var Ob=this.Ig,Tc=Ob.Ue;null!=Tc?(Ob.Ue=Tc.M,Tc.M=null):Tc=new de;var Xe=Tc.za(z,Eb,L);if(!this.Ig.Km(Xe,M))return ic.EPA_FAILED_TO_ADD_VERTEX;++I}return ic.EPA_DID_NOT_CONVERGE},ua:function(a,b,e,d,c){return this.pj(a,b,e,d,c,!0)},Oa:function(a,b,e,d,c){return this.pj(a,b,e,d,c,!1)},uf:function(a,b,e,d,c,f,h){return this.Zl(a,b,e,d,c,f,h)},Ud:function(a,b,e,d,c){var f=this.Sn;f.v=e.x;f.A=e.y;f.B=e.z;var h=this.Tn,l=this.Un;h.x=d.x;h.y=d.y;h.z=d.z;d=h.y-e.y;var g=h.z-e.z;h.x=h.x-e.x;h.y=d;h.z=g;l.Z();return this.Zl(null,a,f,b,h,l,c)}};Id.oc=function(a,b,e){var d,c,f,h;d=a.x;c=a.y;a=a.z;f=b.x;h=b.y;b=b.z;var l,g,k;l=f-d;g=h-c;k=b-a;var m;m=-(l*d+g*c+k*a)/(l*l+g*g+k*k);if(0>m)return e.x=d,e.y=c,e.z=a,1;if(1<m)return e.x=f,e.y=h,e.z=b,2;e.x=d+l*m;e.y=c+g*m;e.z=a+k*m;return 3};Id.sc=function(a,b,e,d){var c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u,C,K;c=a.x;f=a.y;h=a.z;l=b.x;g=b.y;k=b.z;m=e.x;n=e.y;q=e.z;p=l-c;r=g-f;v=k-h;t=m-l;x=n-g;A=q-k;u=c-m;C=f-n;K=h-q;var B,D,z;B=r*A-v*x;D=v*t-p*A;z=p*x-r*t;var Eb=-1,L,I,Rb,F=0;Rb=I=L=0;if(0>c*(r*z-v*D)+f*(v*B-p*z)+h*(p*D-r*B)){var E;p=a.x;Eb=a.y;L=a.z;r=b.x;v=b.y;E=b.z;var M;M=r-p;Rb=v-Eb;I=E-L;F=-(M*p+Rb*Eb+I*L)/(M*M+Rb*Rb+I*I);0>F?(d.x=p,d.y=Eb,d.z=L,I=1):1<F?(d.x=r,d.y=v,d.z=E,I=2):(p+=M*F,Eb+=Rb*F,L+=I*F,d.x=p,d.y=Eb,d.z=L,I=3);L=d.x*d.x+d.y*d.y+d.z*d.z;F=I;Eb=L;L=d.x;I=d.y;Rb=d.z}0>l*(x*z-A*D)+g*(A*B-t*z)+k*(t*D-x*B)&&(t=b.x,l=b.y,b=b.z,A=e.x,p=e.y,r=e.z,v=A-t,x=p-l,g=r-b,k=-(v*t+x*l+g*b)/(v*v+x*x+g*g),0>k?(d.x=t,d.y=l,d.z=b,b=1):1<k?(d.x=A,d.y=p,d.z=r,b=2):(t+=v*k,l+=x*k,b+=g*k,d.x=t,d.y=l,d.z=b,b=3),l=d.x*d.x+d.y*d.y+d.z*d.z,0>Eb||l<Eb)&&(F=b<<1,Eb=l,L=d.x,I=d.y,Rb=d.z);0>m*(C*z-K*D)+n*(K*B-u*z)+q*(u*D-C*B)&&(n=a.x,m=a.y,a=a.z,u=e.x,C=e.y,b=e.z,l=u-n,K=C-m,e=b-a,q=-(l*n+K*m+e*a)/(l*l+K*K+e*e),0>q?(d.x=n,d.y=m,d.z=a,e=1):1<q?(d.x=u,d.y=C,d.z=b,e=2):(n+=l*q,m+=K*q,e=a+e*q,d.x=n,d.y=m,d.z=e,e=3),a=d.x*d.x+d.y*d.y+d.z*d.z,0>Eb||a<Eb)&&(F=e&1|(e&2)<<1,Eb=a,L=d.x,I=d.y,Rb=d.z);if(0<Eb)return d.x=L,d.y=I,d.z=Rb,F;e=B*B+D*D+z*z;0<e&&(e=1/Math.sqrt(e));B*=e;D*=e;z*=e;c=(c*B+f*D+h*z)/(B*B+D*D+z*z);L=B*c;I=D*c;Rb=z*c;d.x=L;d.y=I;d.z=Rb;return 7};Id.tc=function(a,b,e,d,c){var f,h,l,g,k,m,n,q,p,r,v,t,x,A,u,C,K,B,D,z,Eb,L,I,F,E,M,db;f=a.x;h=a.y;l=a.z;g=b.x;k=b.y;m=b.z;n=e.x;q=e.y;p=e.z;r=d.x;v=d.y;t=d.z;x=g-f;A=k-h;u=m-l;C=n-f;K=q-h;B=p-l;D=r-f;z=v-h;Eb=t-l;L=n-g;I=q-k;F=p-m;E=r-g;M=v-k;db=t-m;var U,P,ib,Da,Ia,oa,R,ra,Ca,xa,Ra,Ba;U=A*B-u*K;P=u*C-x*B;ib=x*K-A*C;Da=K*Eb-B*z;Ia=B*D-C*Eb;oa=C*z-K*D;R=z*u-Eb*A;ra=Eb*x-D*u;Ca=D*A-z*x;xa=M*F-db*I;Ra=db*L-E*F;Ba=E*I-M*L;var sa=0<x*xa+A*Ra+u*Ba?1:-1,Sa=f*U+h*P+l*ib,G=f*Da+h*Ia+l*oa,Qa=f*R+h*ra+l*Ca,W=g*xa+k*Ra+m*Ba,N=-1,Q,Z,ba,S=0;ba=Z=Q=0;if(0>Sa*sa){var X,y,fa,T,ia,pa,wa,ya,ha,Y,ma,Ea,Ha,J,ta,ea,aa,Za;X=a.x;y=a.y;fa=a.z;T=b.x;ia=b.y;pa=b.z;wa=e.x;ya=e.y;ha=e.z;Y=T-X;ma=ia-y;Ea=pa-fa;Ha=wa-T;J=ya-ia;ta=ha-pa;ea=X-wa;aa=y-ya;Za=fa-ha;var da,O,va;da=ma*ta-Ea*J;O=Ea*Ha-Y*ta;va=Y*J-ma*Ha;var ob=X*(ma*va-Ea*O)+y*(Ea*da-Y*va)+fa*(Y*O-ma*da),na=T*(J*va-ta*O)+ia*(ta*da-Ha*va)+pa*(Ha*O-J*da),Na=wa*(aa*va-Za*O)+ya*(Za*da-ea*va)+ha*(ea*O-aa*da),La=-1,ab,ub,gb,ua=0;gb=ub=ab=0;if(0>ob){var Aa,Ya,Ja,wb,Fa,ja;Aa=a.x;Ya=a.y;Ja=a.z;wb=b.x;Fa=b.y;ja=b.z;var qa,eb,Oa;qa=wb-Aa;eb=Fa-Ya;Oa=ja-Ja;var Bb=qa*Aa+eb*Ya+Oa*Ja,Bb=-Bb/(qa*qa+eb*eb+Oa*Oa),mb;if(0>Bb)c.x=Aa,c.y=Ya,c.z=Ja,mb=1;else if(1<Bb)c.x=wb,c.y=Fa,c.z=ja,mb=2;else{var hb,pb,qb;hb=Aa+qa*Bb;pb=Ya+eb*Bb;qb=Ja+Oa*Bb;c.x=hb;c.y=pb;c.z=qb;mb=3}var $a=c.x*c.x+c.y*c.y+c.z*c.z,ua=mb,La=$a;ab=c.x;ub=c.y;gb=c.z}if(0>na){var yc,Ab,bb,Ka,Zb,H;yc=b.x;Ab=b.y;bb=b.z;Ka=e.x;Zb=e.y;H=e.z;var cb,jb,jc;cb=Ka-yc;jb=Zb-Ab;jc=H-bb;var kb=cb*yc+jb*Ab+jc*bb,kb=-kb/(cb*cb+jb*jb+jc*jc),xb;if(0>kb)c.x=yc,c.y=Ab,c.z=bb,xb=1;else if(1<kb)c.x=Ka,c.y=Zb,c.z=H,xb=2;else{var w,V,ca;w=yc+cb*kb;V=Ab+jb*kb;ca=bb+jc*kb;c.x=w;c.y=V;c.z=ca;xb=3}var ad=c.x*c.x+c.y*c.y+c.z*c.z;if(0>La||ad<La)ua=xb<<1,La=ad,ab=c.x,ub=c.y,gb=c.z}if(0>Na){var cc,Pa,nb,rb,Cb,sb;cc=a.x;Pa=a.y;nb=a.z;rb=e.x;Cb=e.y;sb=e.z;var ga,Ua,fb;ga=rb-cc;Ua=Cb-Pa;fb=sb-nb;var Xa=ga*cc+Ua*Pa+fb*nb,Xa=-Xa/(ga*ga+Ua*Ua+fb*fb),tb;if(0>Xa)c.x=cc,c.y=Pa,c.z=nb,tb=1;else if(1<Xa)c.x=rb,c.y=Cb,c.z=sb,tb=2;else{var Ma,Gb,Ga;Ma=cc+ga*Xa;Gb=Pa+Ua*Xa;Ga=nb+fb*Xa;c.x=Ma;c.y=Gb;c.z=Ga;tb=3}var ka=c.x*c.x+c.y*c.y+c.z*c.z;if(0>La||ka<La)ua=tb&1|(tb&2)<<1,La=ka,ab=c.x,ub=c.y,gb=c.z}var Hb;if(0<La)c.x=ab,c.y=ub,c.z=gb,Hb=ua;else{var Ob=da*da+O*O+va*va;0<Ob&&(Ob=1/Math.sqrt(Ob));da*=Ob;O*=Ob;va*=Ob;var Tc=da*da+O*O+va*va,Tc=(X*da+y*O+fa*va)/Tc;ab=da*Tc;ub=O*Tc;gb=va*Tc;c.x=ab;c.y=ub;c.z=gb;Hb=7}var Xe=c.x*c.x+c.y*c.y+c.z*c.z,S=Hb,N=Xe;Q=c.x;Z=c.y;ba=c.z}if(0>G*sa){var Ic,ye,sc,za,Ta,Jc,wc,$b,dc,kc,Lb,Yb,Sb,nc,ac,Ib,Vb,bc;Ic=a.x;ye=a.y;sc=a.z;za=e.x;Ta=e.y;Jc=e.z;wc=d.x;$b=d.y;dc=d.z;kc=za-Ic;Lb=Ta-ye;Yb=Jc-sc;Sb=wc-za;nc=$b-Ta;ac=dc-Jc;Ib=Ic-wc;Vb=ye-$b;bc=sc-dc;var Kb,Tb,lb;Kb=Lb*ac-Yb*nc;Tb=Yb*Sb-kc*ac;lb=kc*nc-Lb*Sb;var Va=Ic*(Lb*lb-Yb*Tb)+ye*(Yb*Kb-kc*lb)+sc*(kc*Tb-Lb*Kb),vb=za*(nc*lb-ac*Tb)+Ta*(ac*Kb-Sb*lb)+Jc*(Sb*Tb-nc*Kb),zb=wc*(Vb*lb-bc*Tb)+$b*(bc*Kb-Ib*lb)+dc*(Ib*Tb-Vb*Kb),rc=-1,gc,Zc,Kc,Wa=0;Kc=Zc=gc=0;if(0>Va){var oc,uc,yb,Mb,Jb,Nc;oc=a.x;uc=a.y;yb=a.z;Mb=e.x;Jb=e.y;Nc=e.z;var Ec,Nb,Jd;Ec=Mb-oc;Nb=Jb-uc;Jd=Nc-yb;var Db=Ec*oc+Nb*uc+Jd*yb,Db=-Db/(Ec*Ec+Nb*Nb+Jd*Jd),Bd;if(0>Db)c.x=oc,c.y=uc,c.z=yb,Bd=1;else if(1<Db)c.x=Mb,c.y=Jb,c.z=Nc,Bd=2;else{var Ub,hc,Pb;Ub=oc+Ec*Db;hc=uc+Nb*Db;Pb=yb+Jd*Db;c.x=Ub;c.y=hc;c.z=Pb;Bd=3}var mc=c.x*c.x+c.y*c.y+c.z*c.z,Wa=Bd,rc=mc;gc=c.x;Zc=c.y;Kc=c.z}if(0>vb){var Cc,ec,Fb,Ef,pc,Uc;Cc=e.x;ec=e.y;Fb=e.z;Ef=d.x;pc=d.y;Uc=d.z;var ic,Wb,Qb;ic=Ef-Cc;Wb=pc-ec;Qb=Uc-Fb;var qc=ic*Cc+Wb*ec+Qb*Fb,qc=-qc/(ic*ic+Wb*Wb+Qb*Qb),tc;if(0>qc)c.x=Cc,c.y=ec,c.z=Fb,tc=1;else if(1<qc)c.x=Ef,c.y=pc,c.z=Uc,tc=2;else{var lc,Xb,Lc;lc=Cc+ic*qc;Xb=ec+Wb*qc;Lc=Fb+Qb*qc;c.x=lc;c.y=Xb;c.z=Lc;tc=3}var Rc=c.x*c.x+c.y*c.y+c.z*c.z;if(0>rc||Rc<rc)Wa=tc<<1,rc=Rc,gc=c.x,Zc=c.y,Kc=c.z}if(0>zb){var Ac,Mc,zc,dd,Yc,Vc;Ac=a.x;Mc=a.y;zc=a.z;dd=d.x;Yc=d.y;Vc=d.z;var Gc,Sc,Bc;Gc=dd-Ac;Sc=Yc-Mc;Bc=Vc-zc;var xc=Gc*Ac+Sc*Mc+Bc*zc,xc=-xc/(Gc*Gc+Sc*Sc+Bc*Bc),ud;if(0>xc)c.x=Ac,c.y=Mc,c.z=zc,ud=1;else if(1<xc)c.x=dd,c.y=Yc,c.z=Vc,ud=2;else{var $c,td,Xd;$c=Ac+Gc*xc;td=Mc+Sc*xc;Xd=zc+Bc*xc;c.x=$c;c.y=td;c.z=Xd;ud=3}var pd=c.x*c.x+c.y*c.y+c.z*c.z;if(0>rc||pd<rc)Wa=ud&1|(ud&2)<<1,rc=pd,gc=c.x,Zc=c.y,Kc=c.z}var Kd;if(0<rc)c.x=gc,c.y=Zc,c.z=Kc,Kd=Wa;else{var fc=Kb*Kb+Tb*Tb+lb*lb;0<fc&&(fc=1/Math.sqrt(fc));Kb*=fc;Tb*=fc;lb*=fc;var bd=Kb*Kb+Tb*Tb+lb*lb,bd=(Ic*Kb+ye*Tb+sc*lb)/bd;gc=Kb*bd;Zc=Tb*bd;Kc=lb*bd;c.x=gc;c.y=Zc;c.z=Kc;Kd=7}var Ud=c.x*c.x+c.y*c.y+c.z*c.z;if(0>N||Ud<N)S=Kd&1|(Kd&6)<<1,N=Ud,Q=c.x,Z=c.y,ba=c.z}if(0>Qa*sa){var sd,le,me,ne,oe,vd,pe,Cd,md,cd,Wc,nd,qd,Ed,Dd,ed,fd,gd;sd=a.x;le=a.y;me=a.z;ne=b.x;oe=b.y;vd=b.z;pe=d.x;Cd=d.y;md=d.z;cd=ne-sd;Wc=oe-le;nd=vd-me;qd=pe-ne;Ed=Cd-oe;Dd=md-vd;ed=sd-pe;fd=le-Cd;gd=me-md;var Hc,Fc,Dc;Hc=Wc*Dd-nd*Ed;Fc=nd*qd-cd*Dd;Dc=cd*Ed-Wc*qd;var Yd=sd*(Wc*Dc-nd*Fc)+le*(nd*Hc-cd*Dc)+me*(cd*Fc-Wc*Hc),Be=ne*(Ed*Dc-Dd*Fc)+oe*(Dd*Hc-qd*Dc)+vd*(qd*Fc-Ed*Hc),lf=pe*(fd*Dc-gd*Fc)+Cd*(gd*Hc-ed*Dc)+md*(ed*Fc-fd*Hc),Fd=-1,Ad,Ld,Md,qe=0;Md=Ld=Ad=0;if(0>Yd){var wd,xd,yd,Nd,re,ee;wd=a.x;xd=a.y;yd=a.z;Nd=b.x;re=b.y;ee=b.z;var Od,Zd,Gd;Od=Nd-wd;Zd=re-xd;Gd=ee-yd;var se=Od*wd+Zd*xd+Gd*yd,se=-se/(Od*Od+Zd*Zd+Gd*Gd),Le;if(0>se)c.x=wd,c.y=xd,c.z=yd,Le=1;else if(1<se)c.x=Nd,c.y=re,c.z=ee,Le=2;else{var Fe,te,Me;Fe=wd+Od*se;te=xd+Zd*se;Me=yd+Gd*se;c.x=Fe;c.y=te;c.z=Me;Le=3}var Pd=c.x*c.x+c.y*c.y+c.z*c.z,qe=Le,Fd=Pd;Ad=c.x;Ld=c.y;Md=c.z}if(0>Be){var hd,zd,rd,id,jd,kd;hd=b.x;zd=b.y;rd=b.z;id=d.x;jd=d.y;kd=d.z;var Oc,Pc,Qc;Oc=id-hd;Pc=jd-zd;Qc=kd-rd;var Xc=Oc*hd+Pc*zd+Qc*rd,Xc=-Xc/(Oc*Oc+Pc*Pc+Qc*Qc),ld;if(0>Xc)c.x=hd,c.y=zd,c.z=rd,ld=1;else if(1<Xc)c.x=id,c.y=jd,c.z=kd,ld=2;else{var od,Ge,Ke;od=hd+Oc*Xc;Ge=zd+Pc*Xc;Ke=rd+Qc*Xc;c.x=od;c.y=Ge;c.z=Ke;ld=3}var Ne=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Fd||Ne<Fd)qe=ld<<1,Fd=Ne,Ad=c.x,Ld=c.y,Md=c.z}if(0>lf){var Vd,Oe,ce,tf,Ie,Ye;Vd=a.x;Oe=a.y;ce=a.z;tf=d.x;Ie=d.y;Ye=d.z;var Pe,uf,mf;Pe=tf-Vd;uf=Ie-Oe;mf=Ye-ce;var Ce=Pe*Vd+uf*Oe+mf*ce,Ce=-Ce/(Pe*Pe+uf*uf+mf*mf),nf;if(0>Ce)c.x=Vd,c.y=Oe,c.z=ce,nf=1;else if(1<Ce)c.x=tf,c.y=Ie,c.z=Ye,nf=2;else{var vf,wf,Qe;vf=Vd+Pe*Ce;wf=Oe+uf*Ce;Qe=ce+mf*Ce;c.x=vf;c.y=wf;c.z=Qe;nf=3}var Re=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Fd||Re<Fd)qe=nf&1|(nf&2)<<1,Fd=Re,Ad=c.x,Ld=c.y,Md=c.z}var fe;if(0<Fd)c.x=Ad,c.y=Ld,c.z=Md,fe=qe;else{var ge=Hc*Hc+Fc*Fc+Dc*Dc;0<ge&&(ge=1/Math.sqrt(ge));Hc*=ge;Fc*=ge;Dc*=ge;var Se=Hc*Hc+Fc*Fc+Dc*Dc,Se=(sd*Hc+le*Fc+me*Dc)/Se;Ad=Hc*Se;Ld=Fc*Se;Md=Dc*Se;c.x=Ad;c.y=Ld;c.z=Md;fe=7}var xf=c.x*c.x+c.y*c.y+c.z*c.z;if(0>N||xf<N)S=fe&3|(fe&4)<<1,N=xf,Q=c.x,Z=c.y,ba=c.z}if(0>W*sa){var Ze,yf,Id,je,Wd,ke,He,Je,Ff,de,be,xe,Ee,$e,of,kf,sf,og;Ze=b.x;yf=b.y;Id=b.z;je=e.x;Wd=e.y;ke=e.z;He=d.x;Je=d.y;Ff=d.z;de=je-Ze;be=Wd-yf;xe=ke-Id;Ee=He-je;$e=Je-Wd;of=Ff-ke;kf=Ze-He;sf=yf-Je;og=Id-Ff;var Qd,Rd,Sd;Qd=be*of-xe*$e;Rd=xe*Ee-de*of;Sd=de*$e-be*Ee;var ag=Ze*(be*Sd-xe*Rd)+yf*(xe*Qd-de*Sd)+Id*(de*Rd-be*Qd),pg=je*($e*Sd-of*Rd)+Wd*(of*Qd-Ee*Sd)+ke*(Ee*Rd-$e*Qd),qg=He*(sf*Sd-og*Rd)+Je*(og*Qd-kf*Sd)+Ff*(kf*Rd-sf*Qd),Te=-1,af,bf,Ue,Sf=0;Ue=bf=af=0;if(0>ag){var Gf,Hf,If,eg,Df,ue;Gf=b.x;Hf=b.y;If=b.z;eg=e.x;Df=e.y;ue=e.z;var $d,ae,jf;$d=eg-Gf;ae=Df-Hf;jf=ue-If;var fg=$d*Gf+ae*Hf+jf*If,fg=-fg/($d*$d+ae*ae+jf*jf),ze;if(0>fg)c.x=Gf,c.y=Hf,c.z=If,ze=1;else if(1<fg)c.x=eg,c.y=Df,c.z=ue,ze=2;else{var Hd,Td,rg;Hd=Gf+$d*fg;Td=Hf+ae*fg;rg=If+jf*fg;c.x=Hd;c.y=Td;c.z=rg;ze=3}var cg=c.x*c.x+c.y*c.y+c.z*c.z,Sf=ze,Te=cg;af=c.x;bf=c.y;Ue=c.z}if(0>pg){var sg,De,Ve,pf,Jf,tg;sg=e.x;De=e.y;Ve=e.z;pf=d.x;Jf=d.y;tg=d.z;var Kf,Lf,Mf;Kf=pf-sg;Lf=Jf-De;Mf=tg-Ve;var qf=Kf*sg+Lf*De+Mf*Ve,qf=-qf/(Kf*Kf+Lf*Lf+Mf*Mf),Tf;if(0>qf)c.x=sg,c.y=De,c.z=Ve,Tf=1;else if(1<qf)c.x=pf,c.y=Jf,c.z=tg,Tf=2;else{var ug,Uf,Qf;ug=sg+Kf*qf;Uf=De+Lf*qf;Qf=Ve+Mf*qf;c.x=ug;c.y=Uf;c.z=Qf;Tf=3}var vg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Te||vg<Te)Sf=Tf<<1,Te=vg,af=c.x,bf=c.y,Ue=c.z}if(0>qg){var Nf,Vf,zf,Eg,Fg,Pf;Nf=b.x;Vf=b.y;zf=b.z;Eg=d.x;Fg=d.y;Pf=d.z;var wg,Wf,Xf;wg=Eg-Nf;Wf=Fg-Vf;Xf=Pf-zf;var rf=wg*Nf+Wf*Vf+Xf*zf,rf=-rf/(wg*wg+Wf*Wf+Xf*Xf),Gg;if(0>rf)c.x=Nf,c.y=Vf,c.z=zf,Gg=1;else if(1<rf)c.x=Eg,c.y=Fg,c.z=Pf,Gg=2;else{var bg,xg,yg;bg=Nf+wg*rf;xg=Vf+Wf*rf;yg=zf+Xf*rf;c.x=bg;c.y=xg;c.z=yg;Gg=3}var zg=c.x*c.x+c.y*c.y+c.z*c.z;if(0>Te||zg<Te)Sf=Gg&1|(Gg&2)<<1,Te=zg,af=c.x,bf=c.y,Ue=c.z}var gg;if(0<Te)c.x=af,c.y=bf,c.z=Ue,gg=Sf;else{var Af=Qd*Qd+Rd*Rd+Sd*Sd;0<Af&&(Af=1/Math.sqrt(Af));Qd*=Af;Rd*=Af;Sd*=Af;var Of=Qd*Qd+Rd*Rd+Sd*Sd,Of=(Ze*Qd+yf*Rd+Id*Sd)/Of;af=Qd*Of;bf=Rd*Of;Ue=Sd*Of;c.x=af;c.y=bf;c.z=Ue;gg=7}var Yf=c.x*c.x+c.y*c.y+c.z*c.z;if(0>N||Yf<N)S=gg<<1,N=Yf,Q=c.x,Z=c.y,ba=c.z}if(0<N)return c.x=Q,c.y=Z,c.z=ba,S;c.Z();return 15};M.prototype={za:function(a,b,e,d,c,f,h,l,g){this.e00=a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Pf:function(){this.e00=1;this.e10=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e12=0;this.e22=1;return this},Ac:function(a){return new M(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22)},Og:function(a){return new M(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22)},Ef:function(a){return new M(this.e00*a,this.e01*a,this.e02*a,this.e10*a,this.e11*a,this.e12*a,this.e20*a,this.e21*a,this.e22*a)},me:function(a){return new M(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22)},Dc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e10+a.e10,c=this.e11+a.e11,f=this.e12+a.e12,h=this.e20+a.e20,l=this.e21+a.e21,g=this.e22+a.e22;this.e00+=a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Pg:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e10-a.e10,c=this.e11-a.e11,f=this.e12-a.e12,h=this.e20-a.e20,l=this.e21-a.e21,g=this.e22-a.e22;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Ng:function(a){var b=this.e01*a,e=this.e02*a,d=this.e10*a,c=this.e11*a,f=this.e12*a,h=this.e20*a,l=this.e21*a,g=this.e22*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},ne:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22,d=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20,c=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21,f=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22,h=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20,l=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21,g=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20;this.e01=b;this.e02=e;this.e10=d;this.e11=c;this.e12=f;this.e20=h;this.e21=l;this.e22=g;return this},Me:function(a,b,e){return new M(this.e00*a,this.e01*a,this.e02*a,this.e10*b,this.e11*b,this.e12*b,this.e20*e,this.e21*e,this.e22*e)},ed:function(a,b,e){return new M(this.e00*a,this.e01*b,this.e02*e,this.e10*a,this.e11*b,this.e12*e,this.e20*a,this.e21*b,this.e22*e)},oe:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22)},Jc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new M(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d)},Ne:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e10*b,h=this.e11*b;b=this.e12*b;var l=this.e20*e,g=this.e21*e;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},yd:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e10*a,h=this.e11*b,l=this.e12*e,g=this.e20*a;b=this.e21*b;e=this.e22*e;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},pe:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;h=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;e=a*this.e02+l*this.e12+g*this.e22;c=k*this.e00+m*this.e10+n*this.e20;f=k*this.e01+m*this.e11+n*this.e21;k=k*this.e02+m*this.e12+n*this.e22;m=q*this.e00+b*this.e10+h*this.e20;n=q*this.e01+b*this.e11+h*this.e21;q=q*this.e02+b*this.e12+h*this.e22;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=k;this.e20=m;this.e21=n;this.e22=q;return this},dd:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e10*a+this.e11*k+this.e12*q,f=this.e10*l+this.e11*m+this.e12*b,h=this.e10*g+this.e11*n+this.e12*p,r=this.e20*a+this.e21*k+this.e22*q,l=this.e20*l+this.e21*m+this.e22*b,g=this.e20*g+this.e21*n+this.e22*p;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e10=c;this.e11=f;this.e12=h;this.e20=r;this.e21=l;this.e22=g;return this},$h:function(){return new M(this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22)},ai:function(){var a=this.e10,b=this.e20,e=this.e01,d=this.e11,c=this.e21,f=this.e02,h=this.e12,l=this.e22;this.e00=this.e00;this.e01=a;this.e02=b;this.e10=e;this.e11=d;this.e12=c;this.e20=f;this.e21=h;this.e22=l;return this},Wd:function(){return this.e00*(this.e11*this.e22-this.e12*this.e21)-this.e01*(this.e10*this.e22-this.e12*this.e20)+this.e02*(this.e10*this.e21-this.e11*this.e20)},Rg:function(){return this.e00+this.e11+this.e22},ke:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);return new M(a*k,-d*k,h*k,-b*k,c*k,-l*k,e*k,-f*k,g*k)},le:function(){var a=this.e11*this.e22-this.e12*this.e21,b=this.e10*this.e22-this.e12*this.e20,e=this.e10*this.e21-this.e11*this.e20,d=this.e01*this.e22-this.e02*this.e21,c=this.e00*this.e22-this.e02*this.e20,f=this.e00*this.e21-this.e01*this.e20,h=this.e01*this.e12-this.e02*this.e11,l=this.e00*this.e12-this.e02*this.e10,g=this.e00*this.e11-this.e01*this.e10,k=this.e00*a-this.e01*b+this.e02*e;k&&(k=1/k);this.e00=a*k;this.e01=-d*k;this.e02=h*k;this.e10=-b*k;this.e11=c*k;this.e12=-l*k;this.e20=e*k;this.e21=-f*k;this.e22=g*k;return this},Qg:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e01,this.e11,this.e21,this.e02,this.e12,this.e22]:[this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22]},be:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;return this},clone:function(){return new M(this.e00,this.e01,this.e02,this.e10,this.e11,this.e12,this.e20,this.e21,this.e22)},Ab:function(a){var b=a.x,e=a.y,d=a.z,c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h,d=d*l,k=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;this.e00=1-g-d;this.e01=k-c;this.e02=b+h;this.e10=k+c;this.e11=1-a-d;this.e12=e-f;this.e20=b-h;this.e21=e+f;this.e22=1-a-g;return this},Dj:function(){var a=new ra,b=this.e00,e=this.e11,d=this.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),a.w=.5*b,b=.5/b,a.x=(this.e21-this.e12)*b,a.y=(this.e02-this.e20)*b,a.z=(this.e10-this.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),a.x=.5*b,b=.5/b,a.y=(this.e01+this.e10)*b,a.z=(this.e02+this.e20)*b,a.w=(this.e21-this.e12)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),a.y=.5*b,b=.5/b,a.x=(this.e01+this.e10)*b,a.z=(this.e12+this.e21)*b,a.w=(this.e02-this.e20)*b):(b=Math.sqrt(d-b-e+1),a.z=.5*b,b=.5/b,a.x=(this.e02+this.e20)*b,a.y=(this.e12+this.e21)*b,a.w=(this.e10-this.e01)*b);return a},Oa:function(a){var b=Math.sin(a.x),e=Math.sin(a.y),d=Math.sin(a.z),c=Math.cos(a.x),f=Math.cos(a.y);a=Math.cos(a.z);this.e00=f*a;this.e01=-f*d;this.e02=e;this.e10=c*d+a*b*e;this.e11=c*a-b*e*d;this.e12=-f*b;this.e20=b*d-c*a*e;this.e21=a*b+c*e*d;this.e22=c*f;return this},bi:function(){var a=this.e02;return-1>=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,-1.570796326794895,.5*-a)):1<=a?(a=Math.atan2(this.e21,this.e11),new t(.5*a,1.570796326794895,.5*a)):new t(Math.atan2(-this.e12,this.e22),Math.asin(a),Math.atan2(-this.e01,this.e00))},sc:function(a){return 0==a?new t(this.e00,this.e01,this.e02):1==a?new t(this.e10,this.e11,this.e12):2==a?new t(this.e20,this.e21,this.e22):null},nc:function(a){return 0==a?new t(this.e00,this.e10,this.e20):1==a?new t(this.e01,this.e11,this.e21):2==a?new t(this.e02,this.e12,this.e22):null},tc:function(a,b){0==a?b.za(this.e00,this.e01,this.e02):1==a?b.za(this.e10,this.e11,this.e12):2==a?b.za(this.e20,this.e21,this.e22):b.Z()},oc:function(a,b){0==a?b.za(this.e00,this.e10,this.e20):1==a?b.za(this.e01,this.e11,this.e21):2==a?b.za(this.e02,this.e12,this.e22):b.Z()},Mb:function(a,b,e){var d=a.y,c=a.z,f=b.x,h=b.y;b=b.z;var l=e.x,g=e.y;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=b;this.e20=l;this.e21=g;this.e22=e;return this},ua:function(a,b,e){var d=b.x,c=e.x,f=a.y,h=b.y,l=e.y,g=a.z;b=b.z;e=e.z;this.e00=a.x;this.e01=d;this.e02=c;this.e10=f;this.e11=h;this.e12=l;this.e20=g;this.e21=b;this.e22=e;return this},toString:function(){return"Mat3["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+",\n     "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+",\n     "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+"]"}};P.prototype={za:function(a,b,e,d,c,f,h,l,g,k,m,n,q,p,r,v){this.e00=a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Pf:function(){this.e00=1;this.e10=this.e03=this.e02=this.e01=0;this.e11=1;this.e21=this.e20=this.e13=this.e12=0;this.e22=1;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},nc:function(a){return new P(this.e00+a.e00,this.e01+a.e01,this.e02+a.e02,this.e03+a.e03,this.e10+a.e10,this.e11+a.e11,this.e12+a.e12,this.e13+a.e13,this.e20+a.e20,this.e21+a.e21,this.e22+a.e22,this.e23+a.e23,this.e30+a.e30,this.e31+a.e31,this.e32+a.e32,this.e33+a.e33)},Ef:function(a){return new P(this.e00-a.e00,this.e01-a.e01,this.e02-a.e02,this.e03-a.e03,this.e10-a.e10,this.e11-a.e11,this.e12-a.e12,this.e13-a.e13,this.e20-a.e20,this.e21-a.e21,this.e22-a.e22,this.e23-a.e23,this.e30-a.e30,this.e31-a.e31,this.e32-a.e32,this.e33-a.e33)},Me:function(a){return new P(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*a,this.e11*a,this.e12*a,this.e13*a,this.e20*a,this.e21*a,this.e22*a,this.e23*a,this.e30*a,this.e31*a,this.e32*a,this.e33*a)},Wd:function(a){return new P(this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30,this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33)},oc:function(a){var b=this.e01+a.e01,e=this.e02+a.e02,d=this.e03+a.e03,c=this.e10+a.e10,f=this.e11+a.e11,h=this.e12+a.e12,l=this.e13+a.e13,g=this.e20+a.e20,k=this.e21+a.e21,m=this.e22+a.e22,n=this.e23+a.e23,q=this.e30+a.e30,p=this.e31+a.e31,r=this.e32+a.e32,v=this.e33+a.e33;this.e00+=a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Ng:function(a){var b=this.e01-a.e01,e=this.e02-a.e02,d=this.e03-a.e03,c=this.e10-a.e10,f=this.e11-a.e11,h=this.e12-a.e12,l=this.e13-a.e13,g=this.e20-a.e20,k=this.e21-a.e21,m=this.e22-a.e22,n=this.e23-a.e23,q=this.e30-a.e30,p=this.e31-a.e31,r=this.e32-a.e32,v=this.e33-a.e33;this.e00=this.e00-a.e00;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Ne:function(a){var b=this.e01*a,e=this.e02*a,d=this.e03*a,c=this.e10*a,f=this.e11*a,h=this.e12*a,l=this.e13*a,g=this.e20*a,k=this.e21*a,m=this.e22*a,n=this.e23*a,q=this.e30*a,p=this.e31*a,r=this.e32*a,v=this.e33*a;this.e00=this.e00*a;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},ke:function(a){var b=this.e00*a.e01+this.e01*a.e11+this.e02*a.e21+this.e03*a.e31,e=this.e00*a.e02+this.e01*a.e12+this.e02*a.e22+this.e03*a.e32,d=this.e00*a.e03+this.e01*a.e13+this.e02*a.e23+this.e03*a.e33,c=this.e10*a.e00+this.e11*a.e10+this.e12*a.e20+this.e13*a.e30,f=this.e10*a.e01+this.e11*a.e11+this.e12*a.e21+this.e13*a.e31,h=this.e10*a.e02+this.e11*a.e12+this.e12*a.e22+this.e13*a.e32,l=this.e10*a.e03+this.e11*a.e13+this.e12*a.e23+this.e13*a.e33,g=this.e20*a.e00+this.e21*a.e10+this.e22*a.e20+this.e23*a.e30,k=this.e20*a.e01+this.e21*a.e11+this.e22*a.e21+this.e23*a.e31,m=this.e20*a.e02+this.e21*a.e12+this.e22*a.e22+this.e23*a.e32,n=this.e20*a.e03+this.e21*a.e13+this.e22*a.e23+this.e23*a.e33,q=this.e30*a.e00+this.e31*a.e10+this.e32*a.e20+this.e33*a.e30,p=this.e30*a.e01+this.e31*a.e11+this.e32*a.e21+this.e33*a.e31,r=this.e30*a.e02+this.e31*a.e12+this.e32*a.e22+this.e33*a.e32,v=this.e30*a.e03+this.e31*a.e13+this.e32*a.e23+this.e33*a.e33;this.e00=this.e00*a.e00+this.e01*a.e10+this.e02*a.e20+this.e03*a.e30;this.e01=b;this.e02=e;this.e03=d;this.e10=c;this.e11=f;this.e12=h;this.e13=l;this.e20=g;this.e21=k;this.e22=m;this.e23=n;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},oe:function(a,b,e){return new P(this.e00*a,this.e01*a,this.e02*a,this.e03*a,this.e10*b,this.e11*b,this.e12*b,this.e13*b,this.e20*e,this.e21*e,this.e22*e,this.e23*e,this.e30,this.e31,this.e32,this.e33)},Ac:function(a,b,e){return new P(this.e00*a,this.e01*b,this.e02*e,this.e03,this.e10*a,this.e11*b,this.e12*e,this.e13,this.e20*a,this.e21*b,this.e22*e,this.e23,this.e30*a,this.e31*b,this.e32*e,this.e33)},me:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new P(a*this.e00+l*this.e10+g*this.e20,a*this.e01+l*this.e11+g*this.e21,a*this.e02+l*this.e12+g*this.e22,a*this.e03+l*this.e13+g*this.e23,k*this.e00+m*this.e10+n*this.e20,k*this.e01+m*this.e11+n*this.e21,k*this.e02+m*this.e12+n*this.e22,k*this.e03+m*this.e13+n*this.e23,q*this.e00+b*this.e10+d*this.e20,q*this.e01+b*this.e11+d*this.e21,q*this.e02+b*this.e12+d*this.e22,q*this.e03+b*this.e13+d*this.e23,this.e30,this.e31,this.e32,this.e33)},sc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;d=d*d*h+f;return new P(this.e00*a+this.e01*k+this.e02*q,this.e00*l+this.e01*m+this.e02*b,this.e00*g+this.e01*n+this.e02*d,this.e03,this.e10*a+this.e11*k+this.e12*q,this.e10*l+this.e11*m+this.e12*b,this.e10*g+this.e11*n+this.e12*d,this.e13,this.e20*a+this.e21*k+this.e22*q,this.e20*l+this.e21*m+this.e22*b,this.e20*g+this.e21*n+this.e22*d,this.e23,this.e30*a+this.e31*k+this.e32*q,this.e30*l+this.e31*m+this.e32*b,this.e30*g+this.e31*n+this.e32*d,this.e33)},ai:function(a,b,e){return new P(this.e00+a*this.e30,this.e01+a*this.e31,this.e02+a*this.e32,this.e03+a*this.e33,this.e10+b*this.e30,this.e11+b*this.e31,this.e12+b*this.e32,this.e13+b*this.e33,this.e20+e*this.e30,this.e21+e*this.e31,this.e22+e*this.e32,this.e23+e*this.e33,this.e30,this.e31,this.e32,this.e33)},ua:function(a,b,e){return new P(this.e00,this.e01,this.e02,this.e00*a+this.e01*b+this.e02*e+this.e03,this.e10,this.e11,this.e12,this.e10*a+this.e11*b+this.e12*e+this.e13,this.e20,this.e21,this.e22,this.e20*a+this.e21*b+this.e22*e+this.e23,this.e30,this.e31,this.e32,this.e30*a+this.e31*b+this.e32*e+this.e33)},pe:function(a,b,e){var d=this.e01*a,c=this.e02*a,f=this.e03*a,h=this.e10*b,l=this.e11*b,g=this.e12*b;b=this.e13*b;var k=this.e20*e,m=this.e21*e,n=this.e22*e;e=this.e23*e;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Dc:function(a,b,e){var d=this.e01*b,c=this.e02*e,f=this.e03,h=this.e10*a,l=this.e11*b,g=this.e12*e,k=this.e13,m=this.e20*a,n=this.e21*b,q=this.e22*e,p=this.e23,r=this.e30*a;b=this.e31*b;e=this.e32*e;var v=this.e33;this.e00=this.e00*a;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=b;this.e32=e;this.e33=v;return this},ne:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c,p=d*e*h+b*c,r=d*d*h+f;d=a*this.e01+l*this.e11+g*this.e21;b=a*this.e02+l*this.e12+g*this.e22;e=a*this.e03+l*this.e13+g*this.e23;var c=k*this.e00+m*this.e10+n*this.e20,f=k*this.e01+m*this.e11+n*this.e21,h=k*this.e02+m*this.e12+n*this.e22,k=k*this.e03+m*this.e13+n*this.e23,m=q*this.e00+p*this.e10+r*this.e20,n=q*this.e01+p*this.e11+r*this.e21,v=q*this.e02+p*this.e12+r*this.e22,q=q*this.e03+p*this.e13+r*this.e23,p=this.e30,r=this.e31,t=this.e32,x=this.e33;this.e00=a*this.e00+l*this.e10+g*this.e20;this.e01=d;this.e02=b;this.e03=e;this.e10=c;this.e11=f;this.e12=h;this.e13=k;this.e20=m;this.e21=n;this.e22=v;this.e23=q;this.e30=p;this.e31=r;this.e32=t;this.e33=x;return this},tc:function(a,b,e,d){var c=Math.sin(a),f=Math.cos(a),h=1-f;a=b*b*h+f;var l=b*e*h-d*c,g=b*d*h+e*c,k=e*b*h+d*c,m=e*e*h+f,n=e*d*h-b*c,q=d*b*h-e*c;b=d*e*h+b*c;var p=d*d*h+f;d=this.e00*l+this.e01*m+this.e02*b;e=this.e00*g+this.e01*n+this.e02*p;var c=this.e03,f=this.e10*a+this.e11*k+this.e12*q,h=this.e10*l+this.e11*m+this.e12*b,r=this.e10*g+this.e11*n+this.e12*p,v=this.e13,t=this.e20*a+this.e21*k+this.e22*q,x=this.e20*l+this.e21*m+this.e22*b,A=this.e20*g+this.e21*n+this.e22*p,u=this.e23,C=this.e30*a+this.e31*k+this.e32*q,l=this.e30*l+this.e31*m+this.e32*b,g=this.e30*g+this.e31*n+this.e32*p,n=this.e33;this.e00=this.e00*a+this.e01*k+this.e02*q;this.e01=d;this.e02=e;this.e03=c;this.e10=f;this.e11=h;this.e12=r;this.e13=v;this.e20=t;this.e21=x;this.e22=A;this.e23=u;this.e30=C;this.e31=l;this.e32=g;this.e33=n;return this},bi:function(a,b,e){var d=this.e01+a*this.e31,c=this.e02+a*this.e32,f=this.e03+a*this.e33,h=this.e10+b*this.e30,l=this.e11+b*this.e31,g=this.e12+b*this.e32;b=this.e13+b*this.e33;var k=this.e20+e*this.e30,m=this.e21+e*this.e31,n=this.e22+e*this.e32;e=this.e23+e*this.e33;var q=this.e30,p=this.e31,r=this.e32,v=this.e33;this.e00+=a*this.e30;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=b;this.e20=k;this.e21=m;this.e22=n;this.e23=e;this.e30=q;this.e31=p;this.e32=r;this.e33=v;return this},Oa:function(a,b,e){var d=this.e01,c=this.e02,f=this.e00*a+this.e01*b+this.e02*e+this.e03,h=this.e10,l=this.e11,g=this.e12,k=this.e10*a+this.e11*b+this.e12*e+this.e13,m=this.e20,n=this.e21,q=this.e22,p=this.e20*a+this.e21*b+this.e22*e+this.e23,r=this.e30,v=this.e31,t=this.e32;a=this.e30*a+this.e31*b+this.e32*e+this.e33;this.e00=this.e00;this.e01=d;this.e02=c;this.e03=f;this.e10=h;this.e11=l;this.e12=g;this.e13=k;this.e20=m;this.e21=n;this.e22=q;this.e23=p;this.e30=r;this.e31=v;this.e32=t;this.e33=a;return this},Qg:function(){return new P(this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33)},Rg:function(){var a=this.e10,b=this.e20,e=this.e30,d=this.e01,c=this.e11,f=this.e21,h=this.e31,l=this.e02,g=this.e12,k=this.e22,m=this.e32,n=this.e03,q=this.e13,p=this.e23,r=this.e33;this.e00=this.e00;this.e01=a;this.e02=b;this.e03=e;this.e10=d;this.e11=c;this.e12=f;this.e13=h;this.e20=l;this.e21=g;this.e22=k;this.e23=m;this.e30=n;this.e31=q;this.e32=p;this.e33=r;return this},Jc:function(){var a=this.e20*this.e31-this.e21*this.e30,b=this.e20*this.e32-this.e22*this.e30,e=this.e20*this.e33-this.e23*this.e30,d=this.e21*this.e32-this.e22*this.e31,c=this.e21*this.e33-this.e23*this.e31,f=this.e22*this.e33-this.e23*this.e32;return this.e00*(this.e11*f-this.e12*c+this.e13*d)-this.e01*(this.e10*f-this.e12*e+this.e13*b)+this.e02*(this.e10*c-this.e11*e+this.e13*a)-this.e03*(this.e10*d-this.e11*b+this.e12*a)},Pg:function(){return this.e00+this.e11+this.e22+this.e33},ed:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,x=this.e30*d-this.e31*b+this.e32*a,A=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);return new P(q*b,-t*b,l*b,-A*b,-p*b,n*b,-k*b,f*b,r*b,-g*b,m*b,-e*b,-v*b,h*b,-x*b,a*b)},yd:function(){var a=this.e00*this.e11-this.e01*this.e10,b=this.e00*this.e12-this.e02*this.e10,e=this.e00*this.e13-this.e03*this.e10,d=this.e01*this.e12-this.e02*this.e11,c=this.e01*this.e13-this.e03*this.e11,f=this.e02*this.e13-this.e03*this.e12,h=this.e20*this.e31-this.e21*this.e30,l=this.e20*this.e32-this.e22*this.e30,g=this.e20*this.e33-this.e23*this.e30,k=this.e21*this.e32-this.e22*this.e31,m=this.e21*this.e33-this.e23*this.e31,n=this.e22*this.e33-this.e23*this.e32,q=this.e11*n-this.e12*m+this.e13*k,p=this.e10*n-this.e12*g+this.e13*l,r=this.e10*m-this.e11*g+this.e13*h,v=this.e10*k-this.e11*l+this.e12*h,t=this.e01*n-this.e02*m+this.e03*k,n=this.e00*n-this.e02*g+this.e03*l,g=this.e00*m-this.e01*g+this.e03*h,h=this.e00*k-this.e01*l+this.e02*h,l=this.e31*f-this.e32*c+this.e33*d,k=this.e30*f-this.e32*e+this.e33*b,m=this.e30*c-this.e31*e+this.e33*a,x=this.e30*d-this.e31*b+this.e32*a,A=this.e21*f-this.e22*c+this.e23*d,f=this.e20*f-this.e22*e+this.e23*b,e=this.e20*c-this.e21*e+this.e23*a,a=this.e20*d-this.e21*b+this.e22*a;(b=this.e00*q-this.e01*p+this.e02*r-this.e03*v)&&(b=1/b);this.e00=q*b;this.e01=-t*b;this.e02=l*b;this.e03=-A*b;this.e10=-p*b;this.e11=n*b;this.e12=-k*b;this.e13=f*b;this.e20=r*b;this.e21=-g*b;this.e22=m*b;this.e23=-e*b;this.e30=-v*b;this.e31=h*b;this.e32=-x*b;this.e33=a*b;return this},Mb:function(a,b,e,d,c,f,h,l,g){d=a-d;c=b-c;f=e-f;var k=1/Math.sqrt(d*d+c*c+f*f);d*=k;c*=k;f*=k;var m=l*f-g*c;g=g*d-h*f;h=h*c-l*d;k=1/Math.sqrt(m*m+g*g+h*h);m*=k;g*=k;h*=k;l=c*h-f*g;var k=f*m-d*h,n=d*g-c*m;this.e00=m;this.e01=g;this.e02=h;this.e03=-(m*a+g*b+h*e);this.e10=l;this.e11=k;this.e12=n;this.e13=-(l*a+k*b+n*e);this.e20=d;this.e21=c;this.e22=f;this.e23=-(d*a+c*b+f*e);this.e32=this.e31=this.e30=0;this.e33=1;return this},le:function(a,b,e,d){a=1/Math.tan(.5*a);d/=e-d;this.e00=a/b;this.e10=this.e03=this.e02=this.e01=0;this.e11=a;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e31=this.e30=0;this.e32=-1;this.e33=0;return this},$h:function(a,b,e,d){d=1/(e-d);this.e00=2/a;this.e10=this.e03=this.e02=this.e01=0;this.e11=2/b;this.e21=this.e20=this.e13=this.e12=0;this.e22=d;this.e23=e*d;this.e33=this.e32=this.e31=this.e30=0;return this},Og:function(a){null==a&&(a=!1);return a?[this.e00,this.e10,this.e20,this.e30,this.e01,this.e11,this.e21,this.e31,this.e02,this.e12,this.e22,this.e32,this.e03,this.e13,this.e23,this.e33]:[this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33]},be:function(a){this.e00=a.e00;this.e01=a.e01;this.e02=a.e02;this.e03=a.e03;this.e10=a.e10;this.e11=a.e11;this.e12=a.e12;this.e13=a.e13;this.e20=a.e20;this.e21=a.e21;this.e22=a.e22;this.e23=a.e23;this.e30=a.e30;this.e31=a.e31;this.e32=a.e32;this.e33=a.e33;return this},dd:function(a){var b=a.e01,e=a.e02,d=a.e10,c=a.e11,f=a.e12,h=a.e20,l=a.e21,g=a.e22;this.e00=a.e00;this.e01=b;this.e02=e;this.e03=0;this.e10=d;this.e11=c;this.e12=f;this.e13=0;this.e20=h;this.e21=l;this.e22=g;this.e32=this.e31=this.e30=this.e23=0;this.e33=1;return this},Ab:function(a){this.e00=a.o;this.e01=a.f;this.e02=a.h;this.e10=a.i;this.e11=a.m;this.e12=a.j;this.e20=a.l;this.e21=a.g;this.e22=a.s;this.e03=a.v;this.e13=a.A;this.e23=a.B;this.e32=this.e31=this.e30=0;this.e33=1;return this},clone:function(){return new P(this.e00,this.e01,this.e02,this.e03,this.e10,this.e11,this.e12,this.e13,this.e20,this.e21,this.e22,this.e23,this.e30,this.e31,this.e32,this.e33)},toString:function(){return"Mat4["+(0<this.e00?(1E7*this.e00+.5|0)/1E7:(1E7*this.e00-.5|0)/1E7)+", "+(0<this.e01?(1E7*this.e01+.5|0)/1E7:(1E7*this.e01-.5|0)/1E7)+", "+(0<this.e02?(1E7*this.e02+.5|0)/1E7:(1E7*this.e02-.5|0)/1E7)+", "+(0<this.e03?(1E7*this.e03+.5|0)/1E7:(1E7*this.e03-.5|0)/1E7)+",\n    "+(0<this.e10?(1E7*this.e10+.5|0)/1E7:(1E7*this.e10-.5|0)/1E7)+", "+(0<this.e11?(1E7*this.e11+.5|0)/1E7:(1E7*this.e11-.5|0)/1E7)+", "+(0<this.e12?(1E7*this.e12+.5|0)/1E7:(1E7*this.e12-.5|0)/1E7)+", "+(0<this.e13?(1E7*this.e13+.5|0)/1E7:(1E7*this.e13-.5|0)/1E7)+",\n    "+(0<this.e20?(1E7*this.e20+.5|0)/1E7:(1E7*this.e20-.5|0)/1E7)+", "+(0<this.e21?(1E7*this.e21+.5|0)/1E7:(1E7*this.e21-.5|0)/1E7)+", "+(0<this.e22?(1E7*this.e22+.5|0)/1E7:(1E7*this.e22-.5|0)/1E7)+", "+(0<this.e23?(1E7*this.e23+.5|0)/1E7:(1E7*this.e23-.5|0)/1E7)+",\n    "+(0<this.e30?(1E7*this.e30+.5|0)/1E7:(1E7*this.e30-.5|0)/1E7)+", "+(0<this.e31?(1E7*this.e31+.5|0)/1E7:(1E7*this.e31-.5|0)/1E7)+", "+(0<this.e32?(1E7*this.e32+.5|0)/1E7:(1E7*this.e32-.5|0)/1E7)+", "+(0<this.e33?(1E7*this.e33+.5|0)/1E7:(1E7*this.e33-.5|0)/1E7)+"]"}};Na.abs=function(a){return 0<a?a:-a};Na.sin=function(a){return Math.sin(a)};Na.cos=function(a){return Math.cos(a)};Na.tan=function(a){return Math.tan(a)};Na.asin=function(a){return Math.asin(a)};Na.acos=function(a){return Math.acos(a)};Na.atan=function(a){return Math.atan(a)};Na.ed=function(a){return-1>=a?-1.570796326794895:1<=a?1.570796326794895:Math.asin(a)};Na.dd=function(a){return-1>=a?3.14159265358979:1<=a?0:Math.acos(a)};Na.atan2=function(a,b){return Math.atan2(a,b)};Na.sqrt=function(a){return Math.sqrt(a)};Na.Ab=function(a,b,e){return a<b?b:a>e?e:a};Na.Ac=function(){return Math.random()};Na.Dc=function(a,b){return a+Math.random()*(b-a)};Na.Jc=function(a,b){return new t(a+Math.random()*(b-a),a+Math.random()*(b-a),a+Math.random()*(b-a))};Na.ym=function(){return new t(-1+2*Math.random(),-1+2*Math.random(),-1+2*Math.random())};ec.prototype={Ac:function(){return 0==this.c?new t:this.b[--this.c]},oc:function(){return 0==this.eb?new M:this.cb[--this.eb]},sc:function(){return 0==this.Xf?new P:this.Cf[--this.Xf]},tc:function(){return 0==this.ce?new ra:this.Vd[--this.ce]},ua:function(a,b,e,d){if(null!=a){a.Z();if(this.c==this.b.length){for(var c=Array(this.c<<1),f=0,h=this.c;f<h;){var l=f++;c[l]=this.b[l];this.b[l]=null}this.b=c}this.b[this.c++]=a}if(null!=b){b.e00=1;b.e01=0;b.e02=0;b.e10=0;b.e11=1;b.e12=0;b.e20=0;b.e21=0;b.e22=1;if(this.eb==this.cb.length){a=Array(this.eb<<1);c=0;for(f=this.eb;c<f;)h=c++,a[h]=this.cb[h],this.cb[h]=null;this.cb=a}this.cb[this.eb++]=b}if(null!=e){e.e00=1;e.e01=0;e.e02=0;e.e03=0;e.e10=0;e.e11=1;e.e12=0;e.e13=0;e.e20=0;e.e21=0;e.e22=1;e.e23=0;e.e30=0;e.e31=0;e.e32=0;e.e33=1;if(this.Xf==this.Cf.length){b=Array(this.Xf<<1);a=0;for(c=this.Xf;a<c;)f=a++,b[f]=this.Cf[f],this.Cf[f]=null;this.Cf=b}this.Cf[this.Xf++]=e}if(null!=d){d.x=0;d.y=0;d.z=0;d.w=1;if(this.ce==this.Vd.length){e=Array(this.ce<<1);b=0;for(a=this.ce;b<a;)c=b++,e[c]=this.Vd[c],this.Vd[c]=null;this.Vd=e}this.Vd[this.ce++]=d}},nc:function(a){a.Z();if(this.c==this.b.length){for(var b=Array(this.c<<1),e=0,d=this.c;e<d;){var c=e++;b[c]=this.b[c];this.b[c]=null}this.b=b}this.b[this.c++]=a},Oa:function(a){a.e00=1;a.e01=0;a.e02=0;a.e10=0;a.e11=1;a.e12=0;a.e20=0;a.e21=0;a.e22=1;if(this.eb==this.cb.length){for(var b=Array(this.eb<<1),e=0,d=this.eb;e<d;){var c=e++;b[c]=this.cb[c];this.cb[c]=null}this.cb=b}this.cb[this.eb++]=a},Ab:function(a){a.e00=1;a.e01=0;a.e02=0;a.e03=0;a.e10=0;a.e11=1;a.e12=0;a.e13=0;a.e20=0;a.e21=0;a.e22=1;a.e23=0;a.e30=0;a.e31=0;a.e32=0;a.e33=1;if(this.Xf==this.Cf.length){for(var b=Array(this.Xf<<1),e=0,d=this.Xf;e<d;){var c=e++;b[c]=this.Cf[c];this.Cf[c]=null}this.Cf=b}this.Cf[this.Xf++]=a},Mb:function(a){a.x=0;a.y=0;a.z=0;a.w=1;if(this.ce==this.Vd.length){for(var b=Array(this.ce<<1),e=0,d=this.ce;e<d;){var c=e++;b[c]=this.Vd[c];this.Vd[c]=null}this.Vd=b}this.Vd[this.ce++]=a}};ra.prototype={Pf:function(){this.z=this.y=this.x=0;this.w=1;return this},za:function(a,b,e,d){this.x=a;this.y=b;this.z=e;this.w=d;return this},ua:function(a){return new ra(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},Dc:function(a){return new ra(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},tc:function(a){return new ra(this.x*a,this.y*a,this.z*a,this.w*a)},Oa:function(a){var b=this.y+a.y,e=this.z+a.z,d=this.w+a.w;this.x+=a.x;this.y=b;this.z=e;this.w=d;return this},Jc:function(a){var b=this.y-a.y,e=this.z-a.z,d=this.w-a.w;this.x=this.x-a.x;this.y=b;this.z=e;this.w=d;return this},Ac:function(a){var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},nc:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Ab:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},sc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);return new ra(this.x*a,this.y*a,this.z*a,this.w*a)},oc:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0<a&&(a=1/a);var b=this.y*a,e=this.z*a,d=this.w*a;this.x=this.x*a;this.y=b;this.z=e;this.w=d;return this},dd:function(a,b){var e=a.x,d=a.y;a=a.z;var c=b.x,f=b.y;b=b.z;var h;this.w=Math.sqrt(.5*(1+(e*c+d*f+a*b)));if(!this.w)return c=e*e,f=d*d,b=a*a,c<f?c<b?(h=1/Math.sqrt(f+b),this.x=0,this.y=a*h,this.z=-d*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h):f<b?(h=1/Math.sqrt(b+c),this.y=0,this.z=e*h,this.x=-a*h):(h=1/Math.sqrt(c+f),this.z=0,this.x=d*h,this.y=-e*h),this;h=.5/this.w;this.x=(d*b-a*f)*h;this.y=(a*c-e*b)*h;this.z=(e*f-d*c)*h;return this},ed:function(a,b){var e,d,c,f=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w;0>f?(f=-f,e=-a.x,d=-a.y,c=-a.z,a=-a.w):(e=a.x,d=a.y,c=a.z,a=a.w);if(.999999<f)return e=new ra(this.x+(e-this.x)*b,this.y+(d-this.y)*b,this.z+(c-this.z)*b,this.w+(a-this.w)*b),d=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),0<d&&(d=1/d),c=e.y*d,a=e.z*d,f=e.w*d,e.x=e.x*d,e.y=c,e.z=a,e.w=f,e;b*=Math.acos(f);e-=this.x*f;d-=this.y*f;c-=this.z*f;a-=this.w*f;var f=1/Math.sqrt(e*e+d*d+c*c+a*a),h=Math.sin(b);b=Math.cos(b);return new ra(this.x*b+e*f*h,this.y*b+d*f*h,this.z*b+c*f*h,this.w*b+a*f*h)},be:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},clone:function(){return new ra(this.x,this.y,this.z,this.w)},Mb:function(a){var b=a.e00,e=a.e11,d=a.e22,c=b+e+d;0<c?(b=Math.sqrt(c+1),this.w=.5*b,b=.5/b,this.x=(a.e21-a.e12)*b,this.y=(a.e02-a.e20)*b,this.z=(a.e10-a.e01)*b):b>e?b>d?(b=Math.sqrt(b-e-d+1),this.x=.5*b,b=.5/b,this.y=(a.e01+a.e10)*b,this.z=(a.e02+a.e20)*b,this.w=(a.e21-a.e12)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b):e>d?(b=Math.sqrt(e-d-b+1),this.y=.5*b,b=.5/b,this.x=(a.e01+a.e10)*b,this.z=(a.e12+a.e21)*b,this.w=(a.e02-a.e20)*b):(b=Math.sqrt(d-b-e+1),this.z=.5*b,b=.5/b,this.x=(a.e02+a.e20)*b,this.y=(a.e12+a.e21)*b,this.w=(a.e10-a.e01)*b);return this},yd:function(){var a=new M,b=this.x,e=this.y,d=this.z,c=this.w,f=2*b,h=2*e,l=2*d,g=b*f,k=e*h,d=d*l,m=b*h,e=e*l,b=b*l,f=c*f,h=c*h,c=c*l;a.e00=1-k-d;a.e01=m-c;a.e02=b+h;a.e10=m+c;a.e11=1-g-d;a.e12=e-f;a.e20=b-h;a.e21=e+f;a.e22=1-g-k;return a},toString:function(){return"Quat["+(0<this.x?(1E7*this.x+.5|0)/1E7:(1E7*this.x-.5|0)/1E7)+" i,\n    "+(0<this.y?(1E7*this.y+.5|0)/1E7:(1E7*this.y-.5|0)/1E7)+" j,\n    "+(0<this.z?(1E7*this.z+.5|0)/1E7:(1E7*this.z-.5|0)/1E7)+" k,\n    "+(0<this.w?(1E7*this.w+.5|0)/1E7:(1E7*this.w-.5|0)/1E7)+"]"}};tc.prototype={Xm:function(){if(null!=this.Eh){var a=this.Nm;this.Eh.bm(a,this.vc.Kb,this.wc.Kb,this.vc.a,this.wc.a,this.Qi);(this.vg=0<a.numPoints)?(this.Ja.Lm(a.normal),this.Qe.Hc=a.gm()>F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?F.alternativeContactPositionCorrectionAlgorithm:F.defaultContactPositionCorrectionAlgorithm,a.incremental?this.Pl.En(a,this.C.a,this.D.a):this.Pl.Vn(a,this.C.a,this.D.a)):this.Ja.Pe()}},Ik:function(){var a=this.vc.Ij,b=this.wc.Ij;a==b&&(b=null);null!=a&&a.cf(this);null!=b&&b.cf(this)},nc:function(){return this.vc},oc:function(){return this.wc},ek:function(){return this.vg},Oa:function(){return this.Ja},ua:function(){return this.Qe},Mb:function(){return this.ia},Ab:function(){return this.M}};cd.prototype={ua:function(){return this.Xd},Ab:function(){return this.Oc},Mb:function(){return this.ia},Oa:function(){return this.M}};Ie.prototype={en:function(){for(var a=this.hc.ae;null!=a;){for(var b=a.M;;){var e;a.gh.Ec<a.hh.Ec?(e=a.gh.userData,a=a.hh.userData):(e=a.hh.userData,a=a.gh.userData);if(!this.Qn(e,a))break;var d=e.Yb,c=a.Yb,f;f=d.ve<c.ve?d.Ob:c.Ob;for(var d=e.Ec,c=a.Ec,h=!1;null!=f;){var l=f.M;f=f.Xd;if(f.vc.Ec==d&&f.wc.Ec==c){h=f.Nj=!0;break}f=l}h||(d=this.eg,null!=d?(this.eg=d.M,d.M=null):d=new tc,null==this.zd?this.zd=d:(this.te.M=d,d.ia=this.te),this.te=d,d.Nj=!0,c=this.Mm.Jb[e.Kb.Lb][a.Kb.Lb],d.vc=e,d.wc=a,d.C=e.Yb,d.D=a.Yb,d.vg=!1,null==d.C.Ob?d.C.Ob=d.rb:(d.C.ic.M=d.rb,d.rb.ia=d.C.ic),d.C.ic=d.rb,null==d.D.Ob?d.D.Ob=d.sb:(d.D.ic.M=d.sb,d.sb.ia=d.D.ic),d.D.ic=d.sb,d.C.ve++,d.D.ve++,d.rb.Oc=d.D,d.sb.Oc=d.C,d.rb.Xd=d,d.sb.Xd=d,d.Eh=c,d=d.Qe,d.vc=e,d.wc=a,d.C=d.vc.Yb,d.D=d.wc.Yb,d.fj=d.C.a,d.gj=d.D.a,this.ri++);break}a=b}},fn:function(){for(var a=this.hc.Mj,b=this.zd;null!=b;){for(var e=b.M;;){if(b.Nj){b.Nj=!1;b.Wj=!1;break}if(!a){var d=b.ia,c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.zd&&(this.zd=this.zd.M);b==this.te&&(this.te=this.te.ia);b.M=null;b.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.C.Ob&&(b.C.Ob=b.C.Ob.M);b.rb==b.C.ic&&(b.C.ic=b.C.ic.ia);b.rb.M=null;b.rb.ia=null;d=b.sb.ia;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.sb==b.D.Ob&&(b.D.Ob=b.D.Ob.M);b.sb==b.D.ic&&(b.D.ic=b.D.ic.ia);b.sb.M=null;b.sb.ia=null;b.C.ve--;b.D.ve--;b.rb.Oc=null;b.sb.Oc=null;b.rb.Xd=null;b.sb.Xd=null;b.vc=null;b.wc=null;b.C=null;b.D=null;b.vg=!1;b.Qi.Pe();b.Ja.Pe();b.Eh=null;d=b.Qe;d.vc=null;d.wc=null;d.C=null;d.D=null;d.fj=null;d.gj=null;b.M=this.eg;this.eg=b;this.ri--;break}var c=b.vc,d=b.wc,f=c.Yb,h=d.Yb,h=!h.Hb&&1!=h.Lb;if((f.Hb||1==f.Lb)&&!h){b.Wj=!0;break}f=c.u;h=d.u;c=c.tb;d=d.tb;if(!(c.J<d.G&&c.G>d.J&&c.K<d.H&&c.H>d.K&&c.L<d.I&&c.I>d.L)){d=b.ia;c=b.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b==this.zd&&(this.zd=this.zd.M);b==this.te&&(this.te=this.te.ia);b.M=null;b.ia=null;d=b.rb.ia;c=b.rb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.rb==b.C.Ob&&(b.C.Ob=b.C.Ob.M);b.rb==b.C.ic&&(b.C.ic=b.C.ic.ia);b.rb.M=null;b.rb.ia=null;d=b.sb.ia;c=b.sb.M;null!=d&&(d.M=c);null!=c&&(c.ia=d);b.sb==b.D.Ob&&(b.D.Ob=b.D.Ob.M);b.sb==b.D.ic&&(b.D.ic=b.D.ic.ia);b.sb.M=null;b.sb.ia=null;b.C.ve--;b.D.ve--;b.rb.Oc=null;b.sb.Oc=null;b.rb.Xd=null;b.sb.Xd=null;b.vc=null;b.wc=null;b.C=null;b.D=null;b.vg=!1;b.Qi.Pe();b.Ja.Pe();b.Eh=null;d=b.Qe;d.vc=null;d.wc=null;d.C=null;d.D=null;d.fj=null;d.gj=null;b.M=this.eg;this.eg=b;this.ri--;break}b.Wj=!(f.ma<h.ja&&f.ja>h.ma&&f.na<h.ka&&f.ka>h.na&&f.oa<h.la&&f.la>h.oa);break}b=e}},Qn:function(a,b){var e=a.Yb,d=b.Yb;if(e==d||0!=e.Lb&&0!=d.Lb||!(a.Gj&b.Hj&&b.Gj&a.Hj))return!1;e.eh<d.eh?(a=e.ue,e=d):a=d.ue;for(;null!=a;){if(a.Oc==e&&!a.Ck.mk)return!1;a=a.M}return!0},Uk:function(){this.hc.yi();this.en();this.fn()},Ik:function(){for(var a=this.zd;null!=a;){var b=a.M;a.vg&&a.Ik();a=b}},Oa:function(){return this.ri},ua:function(){return this.zd}};ul.prototype={Pe:function(){for(;0<this.yf;)this.Af[--this.yf]=null;for(;0<this.zf;)this.Bf[--this.zf]=null;for(;0<this.ph;)this.xh[--this.ph]=null;for(;0<this.oh;)this.wh[--this.oh]=null},lk:function(a){if(this.yf==this.Af.length){for(var b=Array(this.yf<<1),e=0,d=this.yf;e<d;){var c=e++;b[c]=this.Af[c];this.Af[c]=null}this.Af=b}a.Ff=!0;this.Af[this.yf++]=a},Cl:function(a,b){if(this.zf==this.Bf.length){for(var e=Array(this.zf<<1),d=0,c=this.zf;d<c;){var f=d++;e[f]=this.Bf[f];this.Bf[f]=null}this.Bf=e}a.Ff=!0;this.Bf[this.zf++]=a;if(b==Ub.SPLIT_IMPULSE){if(this.ph==this.xh.length){e=Array(this.ph<<1);d=0;for(c=this.ph;d<c;)f=d++,e[f]=this.xh[f],this.xh[f]=null;this.xh=e}this.xh[this.ph++]=a}if(b==Ub.NGS){if(this.oh==this.wh.length){b=Array(this.oh<<1);e=0;for(d=this.oh;e<d;)c=e++,b[c]=this.wh[c],this.wh[c]=null;this.wh=b}this.wh[this.oh++]=a}},Wm:function(a,b){a=a.dt;var e=b.pa,d=b.a;e.v=d.v;e.A=d.A;e.B=d.B;e.o=d.o;e.f=d.f;e.h=d.h;e.i=d.i;e.m=d.m;e.j=d.j;e.l=d.l;e.g=d.g;e.s=d.s;b.nk&&b.gb*b.gb+b.hb*b.hb+b.ib*b.ib<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&b.kb*b.kb+b.lb*b.lb+b.mb*b.mb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?(b.yb+=a,b.yb>F.sleepingTimeThreshold&&(b.Hb=!0,b.yb=0)):b.yb=0;if(!b.Hb){if(0==b.Lb){var e=a*b.Ml,d=e*e,e=1/(1+e+d*(.5+.16666666666666666*e+.041666666666666664*d)),d=a*b.El,c=d*d,d=1/(1+d+c*(.5+.16666666666666666*d+.041666666666666664*c)),f,h,l,c=this.hm*b.Yg;f=this.im*b.Yg;h=this.jm*b.Yg;c+=b.Fh*b.ab;f+=b.Gh*b.ab;h+=b.Hh*b.ab;var g,k;g=b.P*b.nf+b.R*b.pf+b.S*b.qf;k=b.T*b.nf+b.U*b.pf+b.V*b.qf;l=b.W*b.nf+b.X*b.pf+b.Y*b.qf;b.gb+=c*a;b.hb+=f*a;b.ib+=h*a;b.gb*=e;b.hb*=e;b.ib*=e;b.kb+=g*a;b.lb+=k*a;b.mb+=l*a;b.kb*=d;b.lb*=d;b.mb*=d}b.Ll(a);for(a=b.Cc;null!=a;){e=a.M;d=a.pa;f=a.ha;var c=b.pa,m,n,q,p,r;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;d=a.a;f=a.ha;c=b.a;h=c.o*f.o+c.f*f.i+c.h*f.l;l=c.o*f.f+c.f*f.m+c.h*f.g;g=c.o*f.h+c.f*f.j+c.h*f.s;k=c.i*f.o+c.m*f.i+c.j*f.l;m=c.i*f.f+c.m*f.m+c.j*f.g;n=c.i*f.h+c.m*f.j+c.j*f.s;q=c.l*f.o+c.g*f.i+c.s*f.l;p=c.l*f.f+c.g*f.m+c.s*f.g;r=c.l*f.h+c.g*f.j+c.s*f.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=c.o*f.v+c.f*f.A+c.h*f.B;l=c.i*f.v+c.m*f.A+c.j*f.B;f=c.l*f.v+c.g*f.A+c.s*f.B;d.v=h;d.A=l;d.B=f;d.v+=c.v;d.A+=c.A;d.B+=c.B;a.Kb.Nb(a.u,a.pa);d=a.u.ma;c=a.u.na;f=a.u.oa;h=a.u.ja;l=a.u.ka;g=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=d<a.u.ma?d:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=f<a.u.oa?f:a.u.oa;a.u.ja=h>a.u.ja?h:a.u.ja;a.u.ka=l>a.u.ka?l:a.u.ka;a.u.la=g>a.u.la?g:a.u.la;null!=a.tb&&(d=a.a.v-a.pa.v,c=a.a.A-a.pa.A,f=a.a.B-a.pa.B,h=a.pc,h.x=d,h.y=c,h.z=f,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=e}}},Vm:function(a,b,e){for(var d=a.dt,c=!0,f=0,h=this.yf;f<h;){var l=f++,g=this.Af[l],k=g.pa,m=g.a;k.v=m.v;k.A=m.A;k.B=m.B;k.o=m.o;k.f=m.f;k.h=m.h;k.i=m.i;k.m=m.m;k.j=m.j;k.l=m.l;k.g=m.g;k.s=m.s;g.Hb=!1;g.nk&&g.gb*g.gb+g.hb*g.hb+g.ib*g.ib<F.sleepingVelocityThreshold*F.sleepingVelocityThreshold&&g.kb*g.kb+g.lb*g.lb+g.mb*g.mb<F.sleepingAngularVelocityThreshold*F.sleepingAngularVelocityThreshold?g.yb+=d:g.yb=0;g.yb<F.sleepingTimeThreshold&&(c=!1);if(0==g.Lb){var n=d*g.Ml,q=n*n,p=1/(1+n+q*(.5+.16666666666666666*n+.041666666666666664*q)),r=d*g.El,v=r*r,t=1/(1+r+v*(.5+.16666666666666666*r+.041666666666666664*v)),x,A,u,C,K,B;x=this.hm*g.Yg;A=this.im*g.Yg;u=this.jm*g.Yg;x+=g.Fh*g.ab;A+=g.Gh*g.ab;u+=g.Hh*g.ab;var D,z,Eb;D=g.P*g.nf+g.R*g.pf+g.S*g.qf;z=g.T*g.nf+g.U*g.pf+g.V*g.qf;Eb=g.W*g.nf+g.X*g.pf+g.Y*g.qf;C=D;K=z;B=Eb;g.gb+=x*d;g.hb+=A*d;g.ib+=u*d;g.gb*=p;g.hb*=p;g.ib*=p;g.kb+=C*d;g.lb+=K*d;g.mb+=B*d;g.kb*=t;g.lb*=t;g.mb*=t}}if(c)for(var L=0,I=this.yf;L<I;){var Rb=L++,E=this.Af[Rb];E.Hb=!0;E.yb=0}else{for(var M=0,db=this.zf;M<db;){var U=M++;this.Bf[U].qh(a)}for(var P=0,ib=this.zf;P<ib;){var Da=P++;this.Bf[Da].zh(a)}for(var Ia=0;Ia<b;){Ia++;for(var oa=0,R=this.zf;oa<R;){var ra=oa++;this.Bf[ra].vh()}}for(var Ca=0,xa=this.zf;Ca<xa;){var Ra=Ca++;this.Bf[Ra].Bi(a)}for(var Ba=0,sa=this.yf;Ba<sa;){var Sa=Ba++;this.Af[Sa].Ll(d)}for(var G=0,Qa=this.ph;G<Qa;){var W=G++;this.xh[W].Jg(a)}for(var N=0;N<e;){N++;for(var Q=0,Z=this.ph;Q<Z;){var ba=Q++;this.xh[ba].uh()}}for(var S=0,X=this.yf;S<X;){var y=S++;this.Af[y].Tm()}for(var fa=0,T=this.oh;fa<T;){var ia=fa++;this.wh[ia].Jg(a)}for(var pa=0;pa<e;){pa++;for(var wa=0,ya=this.oh;wa<ya;){var ha=wa++;this.wh[ha].th(a)}}for(var Y=0,ma=this.zf;Y<ma;){var Ea=Y++;this.Bf[Ea].cf()}for(var Ha=0,J=this.yf;Ha<J;)for(var ta=Ha++,ea=this.Af[ta],aa=ea.Cc;null!=aa;){var Za=aa.M,da=aa.pa,O=aa.ha,va=ea.pa,ob,na,Ga,La,ab,ub,gb,ua,Aa;ob=va.o*O.o+va.f*O.i+va.h*O.l;na=va.o*O.f+va.f*O.m+va.h*O.g;Ga=va.o*O.h+va.f*O.j+va.h*O.s;La=va.i*O.o+va.m*O.i+va.j*O.l;ab=va.i*O.f+va.m*O.m+va.j*O.g;ub=va.i*O.h+va.m*O.j+va.j*O.s;gb=va.l*O.o+va.g*O.i+va.s*O.l;ua=va.l*O.f+va.g*O.m+va.s*O.g;Aa=va.l*O.h+va.g*O.j+va.s*O.s;da.o=ob;da.f=na;da.h=Ga;da.i=La;da.m=ab;da.j=ub;da.l=gb;da.g=ua;da.s=Aa;var Ya,Ja,wb;Ya=va.o*O.v+va.f*O.A+va.h*O.B;Ja=va.i*O.v+va.m*O.A+va.j*O.B;wb=va.l*O.v+va.g*O.A+va.s*O.B;da.v=Ya;da.A=Ja;da.B=wb;da.v+=va.v;da.A+=va.A;da.B+=va.B;var Fa=aa.a,ja=aa.ha,qa=ea.a,eb,Oa,Bb,mb,hb,pb,qb,$a,yc;eb=qa.o*ja.o+qa.f*ja.i+qa.h*ja.l;Oa=qa.o*ja.f+qa.f*ja.m+qa.h*ja.g;Bb=qa.o*ja.h+qa.f*ja.j+qa.h*ja.s;mb=qa.i*ja.o+qa.m*ja.i+qa.j*ja.l;hb=qa.i*ja.f+qa.m*ja.m+qa.j*ja.g;pb=qa.i*ja.h+qa.m*ja.j+qa.j*ja.s;qb=qa.l*ja.o+qa.g*ja.i+qa.s*ja.l;$a=qa.l*ja.f+qa.g*ja.m+qa.s*ja.g;yc=qa.l*ja.h+qa.g*ja.j+qa.s*ja.s;Fa.o=eb;Fa.f=Oa;Fa.h=Bb;Fa.i=mb;Fa.m=hb;Fa.j=pb;Fa.l=qb;Fa.g=$a;Fa.s=yc;var Ab,bb,Ka;Ab=qa.o*ja.v+qa.f*ja.A+qa.h*ja.B;bb=qa.i*ja.v+qa.m*ja.A+qa.j*ja.B;Ka=qa.l*ja.v+qa.g*ja.A+qa.s*ja.B;Fa.v=Ab;Fa.A=bb;Fa.B=Ka;Fa.v+=qa.v;Fa.A+=qa.A;Fa.B+=qa.B;var Zb,H,cb,jb,jc,kb;aa.Kb.Nb(aa.u,aa.pa);Zb=aa.u.ma;H=aa.u.na;cb=aa.u.oa;jb=aa.u.ja;jc=aa.u.ka;kb=aa.u.la;aa.Kb.Nb(aa.u,aa.a);aa.u.ma=Zb<aa.u.ma?Zb:aa.u.ma;aa.u.na=H<aa.u.na?H:aa.u.na;aa.u.oa=cb<aa.u.oa?cb:aa.u.oa;aa.u.ja=jb>aa.u.ja?jb:aa.u.ja;aa.u.ka=jc>aa.u.ka?jc:aa.u.ka;aa.u.la=kb>aa.u.la?kb:aa.u.la;if(null!=aa.tb){var xb,w,V;xb=aa.a.v-aa.pa.v;w=aa.a.A-aa.pa.A;V=aa.a.B-aa.pa.B;var ca=aa.pc;ca.x=xb;ca.y=w;ca.z=V;aa.Yb.mc.hc.vd(aa.tb,aa.u,aa.pc)}aa=Za}}}};za.prototype={Uk:function(){var a=(new Date).getTime()/1E3;this.Dh.Uk();Ge.broadPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a);for(var a=(new Date).getTime()/1E3,b=this.Dh.zd;null!=b;){var e=b.M;b.Wj||b.Xm();b=e}Ge.narrowPhaseCollisionTime=1E3*((new Date).getTime()/1E3-a)},Um:function(){var a=(new Date).getTime()/1E3;if(F.disableSleeping)for(var b=this.mf;null!=b;){var e=b.M;b.Hb=!1;b.yb=0;b=e}if(this.jh.length<this.$i){for(b=this.jh.length<<1;b<this.$i;)b<<=1;this.jh=Array(b)}this.Sj=0;b=this.og;e=this.sk;b.hm=e.x;b.im=e.y;b.jm=e.z;b=this.mf;for(this.lf=0;null!=b;){for(e=b.M;!b.Ff&&!b.Hb&&1!=b.Lb;){if(0==b.ve&&0==b.eh){this.og.Wm(this.Lh,b);this.Sj++;break}this.$m(b);this.og.Vm(this.Lh,this.Hk,this.Gk);this.og.Pe();this.Sj++;break}b=e}this.Dh.Ik();for(b=this.mf;null!=b;)e=b.M,b.Ff=!1,b=e;for(b=this.mf;null!=b;)e=b.M,b.Fh=0,b.Gh=0,b.Hh=0,b.nf=0,b.pf=0,b.qf=0,b=e;for(;0<this.lf;)this.Te[--this.lf].Ff=!1,this.Te[this.lf]=null;Ge.dynamicsTime=1E3*((new Date).getTime()/1E3-a)},$m:function(a){var b=1;this.og.lk(a);for(this.jh[0]=a;0<b;)if(a=this.jh[--b],this.jh[b]=null,1!=a.Lb){for(var e=a.Ob;null!=e;){var d=e.M,c=e.Xd.Qe,f=e.Xd.Qe.Xj;if(c.ek()&&!f.Ff){if(this.Te.length==this.lf){for(var h=Array(this.lf<<1),l=0,g=this.lf;l<g;){var k=l++;h[k]=this.Te[k];this.Te[k]=null}this.Te=h}this.Te[this.lf++]=f;this.og.Cl(f,c.Hc);e=e.Oc;e.Ff||(this.og.lk(e),this.jh[b++]=e)}e=d}for(d=a.ue;null!=d;){a=d.M;e=d.Ck;c=e.Xj;if(!c.Ff){if(this.Te.length==this.lf){f=Array(this.lf<<1);h=0;for(l=this.lf;h<l;)g=h++,f[g]=this.Te[g],this.Te[g]=null;this.Te=f}this.Te[this.lf++]=c;this.og.Cl(c,e.Hc);d=d.Oc;d.Ff||(this.og.lk(d),this.jh[b++]=d)}d=a}}},Om:function(a,b){a.drawBvh&&this.rk(a,b.Qb,0,a.style.bvhNodeColor)},rk:function(a,b,e,d){if(null!=b){if(e>=a.drawBvhMinLevel&&e<=a.drawBvhMaxLevel){var c=this.Ga,f=0==c.c?new t:c.b[--c.c],c=this.Ga,c=0==c.c?new t:c.b[--c.c];f.x=b.J;f.y=b.K;f.z=b.L;c.x=b.G;c.y=b.H;c.z=b.I;a.Vk(f,c,d);var h=this.Ga;if(null!=f){f.Z();if(h.c==h.b.length){for(var l=Array(h.c<<1),g=0,k=h.c;g<k;){var m=g++;l[m]=h.b[m];h.b[m]=null}h.b=l}h.b[h.c++]=f}f=this.Ga;if(null!=c){c.Z();if(f.c==f.b.length){h=Array(f.c<<1);l=0;for(g=f.c;l<g;)k=l++,h[k]=f.b[k],f.b[k]=null;f.b=h}f.b[f.c++]=c}}this.rk(a,b.F[0],e+1,d);this.rk(a,b.F[1],e+1,d)}},Rm:function(a){for(var b=a.style,e=this.mf;null!=e;){var d=e.M;if(a.drawBases){var c=a.style;a.Zm(e.a,c.basisLength,c.basisColorX,c.basisColorY,c.basisColorZ)}var f=null,h=0==e.Lb;h||(f=2==e.Lb?b.kinematicShapeColor:b.staticShapeColor);for(var l=e.Cc;null!=l;){var g=l.M;h&&(f=l.Ec&1?e.Hb?b.sleepingShapeColor2:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor2:b.shapeColor2:e.Hb?b.sleepingShapeColor1:e.yb>F.sleepingTimeThreshold?b.sleepyShapeColor1:b.shapeColor1);if(a.drawShapes){var k=l.Kb,m=l.a;switch(k.Lb){case 0:a.Bm(m,k.bb,f);break;case 1:var n=k,q=this.Ga,p=0==q.c?new t:q.b[--q.c],r=p;r.x=n.De;r.y=n.Ee;r.z=n.Fe;a.Tl(m,p,f);var v=this.Ga;if(null!=p){p.Z();if(v.c==v.b.length){for(var la=Array(v.c<<1),x=0,A=v.c;x<A;){var u=x++;la[u]=v.b[u];v.b[u]=null}v.b=la}v.b[v.c++]=p}break;case 2:var C=k;a.$l(m,C.bb,C.Ib,f);break;case 3:var K=k;a.Xl(m,K.bb,K.Ib,f);break;case 4:var B=k;a.Vl(m,B.bb,B.Ib,f);break;case 5:var D=k,z=D.Ge,Eb=this.Ga,L=0==Eb.c?new t:Eb.b[--Eb.c],I=this.Ga,Rb=0==I.c?new t:I.b[--I.c],E=this.Ga,U=0==E.c?new t:E.b[--E.c],db=this.Ga,P=0==db.c?new t:db.b[--db.c],vc=this.Ga,ib=0==vc.c?new t:vc.b[--vc.c],Da=this.Ga,Ia=0==Da.c?new t:Da.b[--Da.c],oa=this.Ga,R=0==oa.eb?new M:oa.cb[--oa.eb],ra=this.Ga,Ca=0==ra.c?new t:ra.b[--ra.c],xa=R;xa.e00=m.o;xa.e01=m.f;xa.e02=m.h;xa.e10=m.i;xa.e11=m.m;xa.e12=m.j;xa.e20=m.l;xa.e21=m.g;xa.e22=m.s;var Ra=Ca;Ra.x=m.v;Ra.y=m.A;Ra.z=m.B;for(var Ba=0,sa=z;Ba<sa;){var Sa=Ba++,G=D.ug[Sa],Qa=D.zb[Sa];G.x=Qa.x;G.y=Qa.y;G.z=Qa.z;var W=G,N=W.x*R.e10+W.y*R.e11+W.z*R.e12,Q=W.x*R.e20+W.y*R.e21+W.z*R.e22;W.x=W.x*R.e00+W.y*R.e01+W.z*R.e02;W.y=N;W.z=Q;var Z=W,ba=Z.y+Ca.y,S=Z.z+Ca.z;Z.x=Z.x+Ca.x;Z.y=ba;Z.z=S}if(30<z)for(var X=0,y=z;X<y;){var fa=X++,T=D.ug[fa];L.x=T.x;L.y=T.y;L.z=T.z;var ia=D.ug[(fa+1)%z];Rb.x=ia.x;Rb.y=ia.y;Rb.z=ia.z}else if(this.di.wireframe||10<z)for(var pa=0,wa=z;pa<wa;){var ya=pa++,ha=D.ug[ya];L.x=ha.x;L.y=ha.y;L.z=ha.z;for(var Y=0,ma=ya;Y<ma;){var Ea=Y++,Ha=D.ug[Ea];Rb.x=Ha.x;Rb.y=Ha.y;Rb.z=Ha.z}}else for(var J=0,ta=z;J<ta;){var ea=J++,aa=D.ug[ea];L.x=aa.x;L.y=aa.y;L.z=aa.z;for(var Za=0,da=ea;Za<da;){var O=Za++,va=D.ug[O];Rb.x=va.x;Rb.y=va.y;Rb.z=va.z;for(var ob=0,na=O;ob<na;){var Ga=ob++,La=D.ug[Ga];U.x=La.x;U.y=La.y;U.z=La.z;P.x=Rb.x;P.y=Rb.y;P.z=Rb.z;var ab=P,ub=ab.y-L.y,gb=ab.z-L.z;ab.x=ab.x-L.x;ab.y=ub;ab.z=gb;ib.x=U.x;ib.y=U.y;ib.z=U.z;var ua=ib,Aa=ua.y-L.y,Ya=ua.z-L.z;ua.x=ua.x-L.x;ua.y=Aa;ua.z=Ya;Ia.x=P.x;Ia.y=P.y;Ia.z=P.z;var Ja=Ia,wb=Ja.z*ib.x-Ja.x*ib.z,Fa=Ja.x*ib.y-Ja.y*ib.x;Ja.x=Ja.y*ib.z-Ja.z*ib.y;Ja.y=wb;Ja.z=Fa;var ja=Ja,qa=Math.sqrt(ja.x*ja.x+ja.y*ja.y+ja.z*ja.z);0<qa&&(qa=1/qa);var eb=ja.y*qa,Oa=ja.z*qa;ja.x=ja.x*qa;ja.y=eb;ja.z=Oa;var Bb=-Ia.y,mb=-Ia.z;Ia.x=-Ia.x;Ia.y=Bb;Ia.z=mb}}}var hb=this.Ga;if(null!=L){L.Z();if(hb.c==hb.b.length){for(var pb=Array(hb.c<<1),qb=0,$a=hb.c;qb<$a;){var yc=qb++;pb[yc]=hb.b[yc];hb.b[yc]=null}hb.b=pb}hb.b[hb.c++]=L}var Ab=this.Ga;if(null!=Rb){Rb.Z();if(Ab.c==Ab.b.length){for(var bb=Array(Ab.c<<1),Ka=0,Zb=Ab.c;Ka<Zb;){var H=Ka++;bb[H]=Ab.b[H];Ab.b[H]=null}Ab.b=bb}Ab.b[Ab.c++]=Rb}var cb=this.Ga;if(null!=U){U.Z();if(cb.c==cb.b.length){for(var jb=Array(cb.c<<1),jc=0,kb=cb.c;jc<kb;){var xb=jc++;jb[xb]=cb.b[xb];cb.b[xb]=null}cb.b=jb}cb.b[cb.c++]=U}var w=this.Ga;if(null!=P){P.Z();if(w.c==w.b.length){for(var V=Array(w.c<<1),ca=0,ad=w.c;ca<ad;){var cc=ca++;V[cc]=w.b[cc];w.b[cc]=null}w.b=V}w.b[w.c++]=P}var Pa=this.Ga;if(null!=ib){ib.Z();if(Pa.c==Pa.b.length){for(var nb=Array(Pa.c<<1),rb=0,Cb=Pa.c;rb<Cb;){var sb=rb++;nb[sb]=Pa.b[sb];Pa.b[sb]=null}Pa.b=nb}Pa.b[Pa.c++]=ib}var ga=this.Ga;if(null!=Ia){Ia.Z();if(ga.c==ga.b.length){for(var Ua=Array(ga.c<<1),fb=0,Xa=ga.c;fb<Xa;){var tb=fb++;Ua[tb]=ga.b[tb];ga.b[tb]=null}ga.b=Ua}ga.b[ga.c++]=Ia}var Ma=this.Ga;if(null!=R){R.e00=1;R.e01=0;R.e02=0;R.e10=0;R.e11=1;R.e12=0;R.e20=0;R.e21=0;R.e22=1;if(Ma.eb==Ma.cb.length){for(var Gb=Array(Ma.eb<<1),Na=0,ka=Ma.eb;Na<ka;){var Hb=Na++;Gb[Hb]=Ma.cb[Hb];Ma.cb[Hb]=null}Ma.cb=Gb}Ma.cb[Ma.eb++]=R}var Ob=this.Ga;if(null!=Ca){Ca.Z();if(Ob.c==Ob.b.length){for(var Tc=Array(Ob.c<<1),za=0,Ic=Ob.c;za<Ic;){var Ta=za++;Tc[Ta]=Ob.b[Ta];Ob.b[Ta]=null}Ob.b=Tc}Ob.b[Ob.c++]=Ca}}}if(a.drawAabbs){var sc=l.u,Va=b.aabbColor,vb=this.Ga,Jc=0==vb.c?new t:vb.b[--vb.c],wc=this.Ga,$b=0==wc.c?new t:wc.b[--wc.c],dc=Jc;dc.x=sc.ma;dc.y=sc.na;dc.z=sc.oa;var kc=$b;kc.x=sc.ja;kc.y=sc.ka;kc.z=sc.la;a.Vk(Jc,$b,Va);var Lb=this.Ga;if(null!=Jc){Jc.Z();if(Lb.c==Lb.b.length){for(var Yb=Array(Lb.c<<1),Sb=0,nc=Lb.c;Sb<nc;){var ac=Sb++;Yb[ac]=Lb.b[ac];Lb.b[ac]=null}Lb.b=Yb}Lb.b[Lb.c++]=Jc}var Ib=this.Ga;if(null!=$b){$b.Z();if(Ib.c==Ib.b.length){for(var Vb=Array(Ib.c<<1),bc=0,Kb=Ib.c;bc<Kb;){var Tb=bc++;Vb[Tb]=Ib.b[Tb];Ib.b[Tb]=null}Ib.b=Vb}Ib.b[Ib.c++]=$b}}l=g}e=d}},Pm:function(a){if(a.drawPairs||a.drawContacts)for(var b=this.Dh.zd;null!=b;){var e=b.M;if(a.drawPairs){var d=this.Ga,c=0==d.c?new t:d.b[--d.c],f=this.Ga,h=0==f.c?new t:f.b[--f.c],l=c;l.x=b.vc.a.v;l.y=b.vc.a.A;l.z=b.vc.a.B;var g=h;g.x=b.wc.a.v;g.y=b.wc.a.A;g.z=b.wc.a.B;var k=this.Ga;if(null!=c){c.Z();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=c}var r=this.Ga;if(null!=h){h.Z();if(r.c==r.b.length){for(var v=Array(r.c<<1),la=0,x=r.c;la<x;){var A=la++;v[A]=r.b[A];r.b[A]=null}r.b=v}r.b[r.c++]=h}}if(a.drawContacts)for(var u=b.Qe,C=b.Qe.Ja.uc,K=0,B=b.Qe.Ja.$d;K<B;){var D=K++,z=C[D],Eb=a.style,L=this.Ga,I=0==L.c?new t:L.b[--L.c],F=this.Ga,E=0==F.c?new t:F.b[--F.c],M=this.Ga,db=0==M.c?new t:M.b[--M.c],U=this.Ga,P=0==U.c?new t:U.b[--U.c],ib=this.Ga,Da=0==ib.c?new t:ib.b[--ib.c],Ia=I;Ia.x=z.Jd;Ia.y=z.Kd;Ia.z=z.Ld;var oa=E;oa.x=z.Md;oa.y=z.Nd;oa.z=z.Od;var R=db;R.x=u.Ja.pg;R.y=u.Ja.qg;R.z=u.Ja.rg;var ra=P;ra.x=u.Ja.bj;ra.y=u.Ja.cj;ra.z=u.Ja.dj;var Ca=Da;Ca.x=u.Ja.Li;Ca.y=u.Ja.Mi;Ca.z=u.Ja.Ni;E.x=I.x;E.y=I.y;E.z=I.z;var xa=E,Ra=Eb.contactNormalLength,Ba=xa.y+db.y*Ra,sa=xa.z+db.z*Ra;xa.x=xa.x+db.x*Ra;xa.y=Ba;xa.z=sa;if(a.drawContactBases){E.x=I.x;E.y=I.y;E.z=I.z;var Sa=E,G=Eb.contactTangentLength,Qa=Sa.y+P.y*G,W=Sa.z+P.z*G;Sa.x=Sa.x+P.x*G;Sa.y=Qa;Sa.z=W;E.x=I.x;E.y=I.y;E.z=I.z;var N=E,Q=Eb.contactBinormalLength,Z=N.y+Da.y*Q,ba=N.z+Da.z*Q;N.x=N.x+Da.x*Q;N.y=Z;N.z=ba}var S=this.Ga;if(null!=I){I.Z();if(S.c==S.b.length){for(var X=Array(S.c<<1),y=0,fa=S.c;y<fa;){var T=y++;X[T]=S.b[T];S.b[T]=null}S.b=X}S.b[S.c++]=I}var ia=this.Ga;if(null!=E){E.Z();if(ia.c==ia.b.length){for(var pa=Array(ia.c<<1),wa=0,ya=ia.c;wa<ya;){var ha=wa++;pa[ha]=ia.b[ha];ia.b[ha]=null}ia.b=pa}ia.b[ia.c++]=E}var Y=this.Ga;if(null!=db){db.Z();if(Y.c==Y.b.length){for(var ma=Array(Y.c<<1),Ea=0,Ha=Y.c;Ea<Ha;){var J=Ea++;ma[J]=Y.b[J];Y.b[J]=null}Y.b=ma}Y.b[Y.c++]=db}var ta=this.Ga;if(null!=P){P.Z();if(ta.c==ta.b.length){for(var ea=Array(ta.c<<1),aa=0,Za=ta.c;aa<Za;){var da=aa++;ea[da]=ta.b[da];ta.b[da]=null}ta.b=ea}ta.b[ta.c++]=P}var O=this.Ga;if(null!=Da){Da.Z();if(O.c==O.b.length){for(var va=Array(O.c<<1),ob=0,na=O.c;ob<na;){var Ga=ob++;va[Ga]=O.b[Ga];O.b[Ga]=null}O.b=va}O.b[O.c++]=Da}}b=e}if(a.drawJoints)for(var La=this.Ih;null!=La;){var ab=La.M,ub=this.Ga,gb=0==ub.c?new t:ub.b[--ub.c],ua=this.Ga,Aa=0==ua.c?new t:ua.b[--ua.c],Ya=gb;Ya.x=La.C.a.v;Ya.y=La.C.a.A;Ya.z=La.C.a.B;var Ja=Aa;Ja.x=La.D.a.v;Ja.y=La.D.a.A;Ja.z=La.D.a.B;var wb=this.Ga,Fa=0==wb.c?new t:wb.b[--wb.c],ja=this.Ga,qa=0==ja.c?new t:ja.b[--ja.c],eb=this.Ga,Oa=0==eb.c?new t:eb.b[--eb.c],Bb=this.Ga,mb=0==Bb.c?new t:Bb.b[--Bb.c],hb=this.Ga,pb=0==hb.c?new t:hb.b[--hb.c],qb=this.Ga,$a=0==qb.c?new t:qb.b[--qb.c],yc=this.Ga,Ab=0==yc.c?new t:yc.b[--yc.c],bb=this.Ga,Ka=0==bb.c?new t:bb.b[--bb.c],Zb=Fa;Zb.x=La.Gf;Zb.y=La.Hf;Zb.z=La.If;var H=qa;H.x=La.Jf;H.y=La.Kf;H.z=La.Lf;var cb=Oa;cb.x=La.vb;cb.y=La.wb;cb.z=La.xb;var jb=mb;jb.x=La.Ae;jb.y=La.Be;jb.z=La.Ce;var jc=pb;jc.x=La.Ah;jc.y=La.Bh;jc.z=La.Ch;var kb=$a;kb.x=La.$b;kb.y=La.ac;kb.z=La.bc;var xb=Ab;xb.x=La.qe;xb.y=La.re;xb.z=La.se;var w=Ka;w.x=La.Vg;w.y=La.Wg;w.z=La.Xg;if(a.drawJointLimits)switch(La.Lb){case 1:var V=La.Kh;this.Si(a,Fa,mb,pb,Ab,a.style.jointRotationalConstraintRadius,V.lowerLimit,V.upperLimit,a.style.jointLineColor);break;case 2:var ca=La,ad=a.style.jointLineColor,cc=ca.Jk,Pa=ca.Qk;this.Si(a,qa,mb,pb,Ab,a.style.jointRotationalConstraintRadius,cc.lowerLimit,cc.upperLimit,ad);this.Il(a,Fa,Oa,Pa.lowerLimit,Pa.upperLimit,ad);break;case 3:var nb=La.Kh;this.Il(a,Fa,Oa,nb.lowerLimit,nb.upperLimit,a.style.jointLineColor);break;case 4:var rb=La,Cb=a.style.jointRotationalConstraintRadius,sb=a.style.jointLineColor,ga=rb.Dk,Ua=rb.Ek;this.Si(a,Fa,mb,pb,mb,Cb,rb.Di-ga.upperLimit,rb.Di-ga.lowerLimit,sb);this.Si(a,qa,$a,Ab,$a,Cb,Ua.lowerLimit-rb.Ei,Ua.upperLimit-rb.Ei,sb);break;case 5:var fb=La,Xa=a.style.jointRotationalConstraintRadius,tb=a.style.jointLineColor,Ma=fb.Sk;this.Si(a,qa,Ab,Ka,Ab,Xa,Ma.lowerLimit-fb.jj,Ma.upperLimit-fb.jj,tb);this.Qm(a,Fa,Oa,mb,pb,fb.Pj,fb.Qj,Xa,tb);var Gb=this.Ga,Na=0==Gb.c?new t:Gb.b[--Gb.c];Na.x=qa.x;Na.y=qa.y;Na.z=qa.z;var ka=Na,Hb=ka.y+$a.y*Xa,Ob=ka.z+$a.z*Xa;ka.x=ka.x+$a.x*Xa;ka.y=Hb;ka.z=Ob;var Tc=ka,za=this.Ga;if(null!=Tc){Tc.Z();if(za.c==za.b.length){for(var Ta=Array(za.c<<1),Va=0,sc=za.c;Va<sc;){var vb=Va++;Ta[vb]=za.b[vb];za.b[vb]=null}za.b=Ta}za.b[za.c++]=Tc}}var Wa=this.Ga;if(null!=gb){gb.Z();if(Wa.c==Wa.b.length){for(var Jc=Array(Wa.c<<1),wc=0,$b=Wa.c;wc<$b;){var dc=wc++;Jc[dc]=Wa.b[dc];Wa.b[dc]=null}Wa.b=Jc}Wa.b[Wa.c++]=gb}var kc=this.Ga;if(null!=Aa){Aa.Z();if(kc.c==kc.b.length){for(var Lb=Array(kc.c<<1),Yb=0,Sb=kc.c;Yb<Sb;){var nc=Yb++;Lb[nc]=kc.b[nc];kc.b[nc]=null}kc.b=Lb}kc.b[kc.c++]=Aa}var ac=this.Ga;if(null!=Fa){Fa.Z();if(ac.c==ac.b.length){for(var Ib=Array(ac.c<<1),Vb=0,bc=ac.c;Vb<bc;){var Kb=Vb++;Ib[Kb]=ac.b[Kb];ac.b[Kb]=null}ac.b=Ib}ac.b[ac.c++]=Fa}var Tb=this.Ga;if(null!=qa){qa.Z();if(Tb.c==Tb.b.length){for(var lb=Array(Tb.c<<1),yb=0,zb=Tb.c;yb<zb;){var Mb=yb++;lb[Mb]=Tb.b[Mb];Tb.b[Mb]=null}Tb.b=lb}Tb.b[Tb.c++]=qa}var rc=this.Ga;if(null!=Oa){Oa.Z();if(rc.c==rc.b.length){for(var gc=Array(rc.c<<1),Zc=0,Kc=rc.c;Zc<Kc;){var Db=Zc++;gc[Db]=rc.b[Db];rc.b[Db]=null}rc.b=gc}rc.b[rc.c++]=Oa}var oc=this.Ga;if(null!=mb){mb.Z();if(oc.c==oc.b.length){for(var uc=Array(oc.c<<1),Nb=0,Jb=oc.c;Nb<Jb;){var Ub=Nb++;uc[Ub]=oc.b[Ub];oc.b[Ub]=null}oc.b=uc}oc.b[oc.c++]=mb}var Nc=this.Ga;if(null!=pb){pb.Z();if(Nc.c==Nc.b.length){for(var Ec=Array(Nc.c<<1),hc=0,Jd=Nc.c;hc<Jd;){var Pb=hc++;Ec[Pb]=Nc.b[Pb];Nc.b[Pb]=null}Nc.b=Ec}Nc.b[Nc.c++]=pb}var Bd=this.Ga;if(null!=$a){$a.Z();if(Bd.c==Bd.b.length){for(var ec=Array(Bd.c<<1),qc=0,Fb=Bd.c;qc<Fb;){var ic=qc++;ec[ic]=Bd.b[ic];Bd.b[ic]=null}Bd.b=ec}Bd.b[Bd.c++]=$a}var Cc=this.Ga;if(null!=Ab){Ab.Z();if(Cc.c==Cc.b.length){for(var Wb=Array(Cc.c<<1),mc=0,Qb=Cc.c;mc<Qb;){var pc=mc++;Wb[pc]=Cc.b[pc];Cc.b[pc]=null}Cc.b=Wb}Cc.b[Cc.c++]=Ab}var Uc=this.Ga;if(null!=Ka){Ka.Z();if(Uc.c==Uc.b.length){for(var tc=Array(Uc.c<<1),Ac=0,lc=Uc.c;Ac<lc;){var Xb=Ac++;tc[Xb]=Uc.b[Xb];Uc.b[Xb]=null}Uc.b=tc}Uc.b[Uc.c++]=Ka}La=ab}},Si:function(a,b,e,d,c,f,h,l,g){if(h!=l){var k=this.Ga,k=0==k.c?new t:k.b[--k.c];k.x=b.x;k.y=b.y;k.z=b.z;var m=k.y+c.y*f,n=k.z+c.z*f;k.x+=c.x*f;k.y=m;k.z=n;c=this.Ga;if(null!=k){k.Z();if(c.c==c.b.length){for(var m=Array(c.c<<1),n=0,q=c.c;n<q;){var p=n++;m[p]=c.b[p];c.b[p]=null}c.b=m}c.b[c.c++]=k}}h>l?a.ellipse(b,e,d,f,f,g):a.arc(b,e,d,f,f,h,l,!0,g)},Il:function(a,b,e,d,c){if(d<c){a=this.Ga;a=0==a.c?new t:a.b[--a.c];a.x=b.x;a.y=b.y;a.z=b.z;var f=a.y+e.y*d,h=a.z+e.z*d;a.x+=e.x*d;a.y=f;a.z=h;d=this.Ga;d=0==d.c?new t:d.b[--d.c];d.x=b.x;d.y=b.y;d.z=b.z;b=d.y+e.y*c;f=d.z+e.z*c;d.x+=e.x*c;d.y=b;d.z=f;e=this.Ga;if(null!=a){a.Z();if(e.c==e.b.length){c=Array(e.c<<1);b=0;for(f=e.c;b<f;)h=b++,c[h]=e.b[h],e.b[h]=null;e.b=c}e.b[e.c++]=a}a=this.Ga;if(null!=d){d.Z();if(a.c==a.b.length){e=Array(a.c<<1);c=0;for(b=a.c;c<b;)f=c++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=d}}},Qm:function(a,b,e,d,c,f,h,l){var g=0;a=this.Ga;var k=0==a.c?new t:a.b[--a.c];a=this.Ga;var m=0==a.ce?new ra:a.Vd[--a.ce];a=this.Ga;var n=0==a.eb?new M:a.cb[--a.eb];a=this.Ga;a=0==a.c?new t:a.b[--a.c];for(var q=0;17>q;){q++;var p=Math.cos(g)*f,r=Math.sin(g)*h,v=Math.sqrt(p*p+r*r),la=Math.sin(.5*v),x=Math.cos(.5*v),A=k.Z(),u=A.y+d.y*p,C=A.z+d.z*p;A.x=A.x+d.x*p;A.y=u;A.z=C;p=A;A=p.y+c.y*r;u=p.z+c.z*r;p.x=p.x+c.x*r;p.y=A;p.z=u;r=1/v*la;v=k.y*r;la=k.z*r;k.x=k.x*r;k.y=v;k.z=la;m.x=k.x;m.y=k.y;m.z=k.z;m.w=x;var K=m.x,C=m.y,p=m.z,v=m.w,B=2*K,u=2*C,la=2*p,x=K*B,r=C*u,p=p*la,A=K*u,C=C*la,K=K*la,B=v*B,u=v*u,v=v*la;n.e00=1-r-p;n.e01=A-v;n.e02=K+u;n.e10=A+v;n.e11=1-x-p;n.e12=C-B;n.e20=K-u;n.e21=C+B;n.e22=1-x-r;x=this.Ga;x=0==x.c?new t:x.b[--x.c];r=x.y+e.y*l;v=x.z+e.z*l;x.x=x.x+e.x*l;x.y=r;x.z=v;r=x.x*n.e10+x.y*n.e11+x.z*n.e12;v=x.x*n.e20+x.y*n.e21+x.z*n.e22;x.x=x.x*n.e00+x.y*n.e01+x.z*n.e02;x.y=r;x.z=v;r=x;v=r.y+b.y;la=r.z+b.z;r.x=r.x+b.x;r.y=v;r.z=la;r=this.Ga;if(null!=a){a.Z();if(r.c==r.b.length){v=Array(r.c<<1);la=0;for(p=r.c;la<p;)A=la++,v[A]=r.b[A],r.b[A]=null;r.b=v}r.b[r.c++]=a}a=x;g+=.39269908169872375}b=this.Ga;if(null!=k){k.Z();if(b.c==b.b.length){e=Array(b.c<<1);d=0;for(c=b.c;d<c;)f=d++,e[f]=b.b[f],b.b[f]=null;b.b=e}b.b[b.c++]=k}k=this.Ga;if(null!=m){m.x=0;m.y=0;m.z=0;m.w=1;if(k.ce==k.Vd.length){b=Array(k.ce<<1);e=0;for(d=k.ce;e<d;)c=e++,b[c]=k.Vd[c],k.Vd[c]=null;k.Vd=b}k.Vd[k.ce++]=m}m=this.Ga;if(null!=n){n.e00=1;n.e01=0;n.e02=0;n.e10=0;n.e11=1;n.e12=0;n.e20=0;n.e21=0;n.e22=1;if(m.eb==m.cb.length){k=Array(m.eb<<1);b=0;for(e=m.eb;b<e;)d=b++,k[d]=m.cb[d],m.cb[d]=null;m.cb=k}m.cb[m.eb++]=n}n=this.Ga;if(null!=a){a.Z();if(n.c==n.b.length){m=Array(n.c<<1);k=0;for(b=n.c;k<b;)e=k++,m[e]=n.b[e],n.b[e]=null;n.b=m}n.b[n.c++]=a}},ke:function(a){0<this.Lh.dt&&(this.Lh.dtRatio=a/this.Lh.dt);this.Lh.dt=a;this.Lh.invDt=1/a;a=(new Date).getTime()/1E3;this.Uk();this.Um();Ge.totalTime=1E3*((new Date).getTime()/1E3-a)},Oa:function(a){if(null!=a.mc)throw Error("A rigid body cannot belong to multiple worlds.");null==this.mf?this.mf=a:(this.ui.M=a,a.ia=this.ui);this.ui=a;a.mc=this;for(a=a.Cc;null!=a;){var b=a.M;a.tb=this.hc.Oh(a,a.u);a.Ec=this.Nl++;this.sg++;a=b}this.$i++},le:function(a){if(a.mc!=this)throw Error("The rigid body doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.mf&&(this.mf=this.mf.M);a==this.ui&&(this.ui=this.ui.ia);a.M=null;a.ia=null;a.mc=null;for(a=a.Cc;null!=a;){b=a.M;this.hc.Ph(a.tb);a.tb=null;a.Ec=-1;for(var d=a.Yb.Ob;null!=d;){var e=d.M,c=d.Xd;if(c.vc==a||c.wc==a){d=d.Oc;d.Hb=!1;d.yb=0;var d=this.Dh,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.zd&&(d.zd=d.zd.M);c==d.te&&(d.te=d.te.ia);c.M=null;c.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.C.Ob&&(c.C.Ob=c.C.Ob.M);c.rb==c.C.ic&&(c.C.ic=c.C.ic.ia);c.rb.M=null;c.rb.ia=null;f=c.sb.ia;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.sb==c.D.Ob&&(c.D.Ob=c.D.Ob.M);c.sb==c.D.ic&&(c.D.ic=c.D.ic.ia);c.sb.M=null;c.sb.ia=null;c.C.ve--;c.D.ve--;c.rb.Oc=null;c.sb.Oc=null;c.rb.Xd=null;c.sb.Xd=null;c.vc=null;c.wc=null;c.C=null;c.D=null;c.vg=!1;c.Qi.Pe();c.Ja.Pe();c.Eh=null;f=c.Qe;f.vc=null;f.wc=null;f.C=null;f.D=null;f.fj=null;f.gj=null;c.M=d.eg;d.eg=c;d.ri--}d=e}this.sg--;a=b}this.$i--},ua:function(a){if(null!=a.mc)throw Error("A joint cannot belong to multiple worlds.");null==this.Ih?this.Ih=a:(this.oi.M=a,a.ia=this.oi);this.oi=a;a.mc=this;a.rb.Oc=a.D;a.sb.Oc=a.C;null==a.C.ue?a.C.ue=a.rb:(a.C.Re.M=a.rb,a.rb.ia=a.C.Re);a.C.Re=a.rb;null==a.D.ue?a.D.ue=a.sb:(a.D.Re.M=a.sb,a.sb.ia=a.D.Re);a.D.Re=a.sb;a.C.eh++;a.D.eh++;var b=a.C;b.Hb=!1;b.yb=0;b=a.D;b.Hb=!1;b.yb=0;a.gd();this.Fk++},yl:function(a){if(a.mc!=this)throw Error("The joint doesn't belong to the world.");var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Ih&&(this.Ih=this.Ih.M);a==this.oi&&(this.oi=this.oi.ia);a.M=null;a.ia=null;a.mc=null;b=a.rb.ia;e=a.rb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.rb==a.C.ue&&(a.C.ue=a.C.ue.M);a.rb==a.C.Re&&(a.C.Re=a.C.Re.ia);a.rb.M=null;a.rb.ia=null;b=a.sb.ia;e=a.sb.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a.sb==a.D.ue&&(a.D.ue=a.D.ue.M);a.sb==a.D.Re&&(a.D.Re=a.D.Re.ia);a.sb.M=null;a.sb.ia=null;a.rb.Oc=null;a.sb.Oc=null;a.C.eh--;a.D.eh--;b=a.C;b.Hb=!1;b.yb=0;a=a.D;a.Hb=!1;a.yb=0;this.Fk--},me:function(a){this.di=a},oc:function(){return this.di},Ab:function(){null!=this.di&&(2==this.hc.Lb&&this.Om(this.di,this.hc.ee),this.Rm(this.di),this.Pm(this.di))},Ud:function(a,b,e){var d=this.Uj.lj;d.x=a.x;d.y=a.y;d.z=a.z;d=this.Uj.end;d.x=b.x;d.y=b.y;d.z=b.z;this.Uj.nj=e;this.hc.Ud(a,b,this.Uj)},uf:function(a,b,e,d){this.Ri.Yl=a;var c=this.Ri.lj;c.v=b.v;c.A=b.A;c.B=b.B;c.o=b.o;c.f=b.f;c.h=b.h;c.i=b.i;c.m=b.m;c.j=b.j;c.l=b.l;c.g=b.g;c.s=b.s;c=this.Ri.Yf;c.x=e.x;c.y=e.y;c.z=e.z;this.Ri.nj=d;this.hc.uf(a,b,e,this.Ri)},kh:function(a,b){this.kk.u.be(a);this.kk.Fl=b;this.hc.kh(a,this.kk)},yd:function(){return this.mf},tc:function(){return this.Ih},Mb:function(){return this.hc},nc:function(){return this.Dh},dd:function(){return this.$i},Dc:function(){return this.Fk},Wd:function(){return this.sg},Ac:function(){return this.Sj},ed:function(){return this.Hk},pe:function(a){this.Hk=a},Jc:function(){return this.Gk},oe:function(a){this.Gk=a},sc:function(){return this.sk},ne:function(a){var b=this.sk;b.x=a.x;b.y=a.y;b.z=a.z}};Xj.ua=fc;Xj.prototype=vb(fc.prototype,{wd:function(a){a=a.userData;a.Kb.Ud(this.lj,this.end,a.a,this.Ci)&&this.nj.wd(a,this.Ci)}});Dk.ua=fc;Dk.prototype=vb(fc.prototype,{wd:function(a){a=a.userData;var b=a.Kb.Lb;0>b||5<b||Fb.Oa.uf(this.Yl,a.Kb,this.lj,a.a,this.Yf,this.Z,this.Ci)&&this.nj.wd(a,this.Ci)}});el.ua=fc;el.prototype=vb(fc.prototype,{wd:function(a){a=a.userData;var b=a.u;b.ma<this.u.ja&&b.ja>this.u.ma&&b.na<this.u.ka&&b.ka>this.u.na&&b.oa<this.u.la&&b.la>this.u.oa&&this.Fl.wd(a)}});Vj.prototype={wd:function(){}};md.prototype={ua:function(){},Ab:function(){},cf:function(){},Oa:function(){}};He.prototype={wd:function(){}};ce.ua=He;ce.prototype=vb(He.prototype,{clear:function(){this.shape=null;this.fraction=1;this.position.Z();this.normal.Z();this.hit=!1},wd:function(a,b){if(b.fraction<this.fraction){this.shape=a;this.hit=!0;this.fraction=b.fraction;a=this.position;var e=b.position;a.x=e.x;a.y=e.y;a.z=e.z;a=this.normal;b=b.normal;a.x=b.x;a.y=b.y;a.z=b.z}}});Jb.prototype={Vk:function(a,b){var e=this.p,d=(0==e.c?new t:e.b[--e.c]).za(a.x,a.y,a.z),e=this.p,c=(0==e.c?new t:e.b[--e.c]).za(a.x,a.y,b.z),e=this.p,f=(0==e.c?new t:e.b[--e.c]).za(a.x,b.y,a.z),e=this.p,h=(0==e.c?new t:e.b[--e.c]).za(a.x,b.y,b.z),e=this.p,l=(0==e.c?new t:e.b[--e.c]).za(b.x,a.y,a.z),e=this.p,e=(0==e.c?new t:e.b[--e.c]).za(b.x,a.y,b.z),g=this.p;a=(0==g.c?new t:g.b[--g.c]).za(b.x,b.y,a.z);g=this.p;b=(0==g.c?new t:g.b[--g.c]).za(b.x,b.y,b.z);g=this.p;if(null!=d){d.Z();if(g.c==g.b.length){for(var k=Array(g.c<<1),m=0,n=g.c;m<n;){var q=m++;k[q]=g.b[q];g.b[q]=null}g.b=k}g.b[g.c++]=d}d=this.p;if(null!=c){c.Z();if(d.c==d.b.length){g=Array(d.c<<1);k=0;for(m=d.c;k<m;)n=k++,g[n]=d.b[n],d.b[n]=null;d.b=g}d.b[d.c++]=c}c=this.p;if(null!=f){f.Z();if(c.c==c.b.length){d=Array(c.c<<1);g=0;for(k=c.c;g<k;)m=g++,d[m]=c.b[m],c.b[m]=null;c.b=d}c.b[c.c++]=f}f=this.p;if(null!=h){h.Z();if(f.c==f.b.length){c=Array(f.c<<1);d=0;for(g=f.c;d<g;)k=d++,c[k]=f.b[k],f.b[k]=null;f.b=c}f.b[f.c++]=h}h=this.p;if(null!=l){l.Z();if(h.c==h.b.length){f=Array(h.c<<1);c=0;for(d=h.c;c<d;)g=c++,f[g]=h.b[g],h.b[g]=null;h.b=f}h.b[h.c++]=l}l=this.p;if(null!=e){e.Z();if(l.c==l.b.length){h=Array(l.c<<1);f=0;for(c=l.c;f<c;)d=f++,h[d]=l.b[d],l.b[d]=null;l.b=h}l.b[l.c++]=e}e=this.p;if(null!=a){a.Z();if(e.c==e.b.length){l=Array(e.c<<1);h=0;for(f=e.c;h<f;)c=h++,l[c]=e.b[c],e.b[c]=null;e.b=l}e.b[e.c++]=a}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){e=Array(a.c<<1);l=0;for(h=a.c;l<h;)f=l++,e[f]=a.b[f],a.b[f]=null;a.b=e}a.b[a.c++]=b}},Zm:function(a,b){var e=this.p,d=0==e.c?new t:e.b[--e.c],e=this.p,c=0==e.eb?new M:e.cb[--e.eb],e=this.p,f=0==e.c?new t:e.b[--e.c],e=this.p,h=0==e.c?new t:e.b[--e.c],e=this.p,e=0==e.c?new t:e.b[--e.c];d.x=a.v;d.y=a.A;d.z=a.B;c.e00=a.o;c.e01=a.f;c.e02=a.h;c.e10=a.i;c.e11=a.m;c.e12=a.j;c.e20=a.l;c.e21=a.g;c.e22=a.s;f.za(c.e00,c.e10,c.e20);h.za(c.e01,c.e11,c.e21);e.za(c.e02,c.e12,c.e22);a=f.y*b;var l=f.z*b;f.x=f.x*b;f.y=a;f.z=l;a=f.y+d.y;l=f.z+d.z;f.x+=d.x;f.y=a;f.z=l;a=h.y*b;l=h.z*b;h.x=h.x*b;h.y=a;h.z=l;a=h.y+d.y;l=h.z+d.z;h.x+=d.x;h.y=a;h.z=l;a=e.y*b;l=e.z*b;e.x=e.x*b;e.y=a;e.z=l;b=e.y+d.y;a=e.z+d.z;e.x+=d.x;e.y=b;e.z=a;b=this.p;if(null!=d){d.Z();if(b.c==b.b.length){a=Array(b.c<<1);for(var l=0,g=b.c;l<g;){var k=l++;a[k]=b.b[k];b.b[k]=null}b.b=a}b.b[b.c++]=d}d=this.p;if(null!=c){c.e00=1;c.e01=0;c.e02=0;c.e10=0;c.e11=1;c.e12=0;c.e20=0;c.e21=0;c.e22=1;if(d.eb==d.cb.length){b=Array(d.eb<<1);a=0;for(l=d.eb;a<l;)g=a++,b[g]=d.cb[g],d.cb[g]=null;d.cb=b}d.cb[d.eb++]=c}c=this.p;if(null!=f){f.Z();if(c.c==c.b.length){d=Array(c.c<<1);b=0;for(a=c.c;b<a;)l=b++,d[l]=c.b[l],c.b[l]=null;c.b=d}c.b[c.c++]=f}f=this.p;if(null!=h){h.Z();if(f.c==f.b.length){c=Array(f.c<<1);d=0;for(b=f.c;d<b;)a=d++,c[a]=f.b[a],f.b[a]=null;f.b=c}f.b[f.c++]=h}h=this.p;if(null!=e){e.Z();if(h.c==h.b.length){f=Array(h.c<<1);c=0;for(d=h.c;c<d;)b=c++,f[b]=h.b[b],h.b[b]=null;h.b=f}h.b[h.c++]=e}},ellipse:function(a,b,e,d,c,f){this.arc(a,b,e,d,c,0,6.28318530717958,!1,f)},arc:function(a,b,e,d,c,f,h){var l=this.p,l=0==l.c?new t:l.b[--l.c];l.x=b.x;l.y=b.y;l.z=b.z;b=l.y*d;var g=l.z*d;l.x=l.x*d;l.y=b;l.z=g;b=l;d=this.p;d=0==d.c?new t:d.b[--d.c];d.x=e.x;d.y=e.y;d.z=e.z;e=d.y*c;l=d.z*c;d.x=d.x*c;d.y=e;d.z=l;e=d;c=h-f;0>c&&(c=-c);(l=c/.5235987755982984+.5|0)||(l=1);c=f;f=(h-f)/l;h=this.p;h=0==h.c?new t:h.b[--h.c];h.x=a.x;h.y=a.y;h.z=a.z;d=Math.cos(c);var g=h.y+b.y*d,k=h.z+b.z*d;h.x+=b.x*d;h.y=g;h.z=k;d=Math.sin(c);g=h.y+e.y*d;k=h.z+e.z*d;h.x+=e.x*d;h.y=g;h.z=k;for(d=0;d<l;){d++;c+=f;g=this.p;g=0==g.c?new t:g.b[--g.c];g.x=a.x;g.y=a.y;g.z=a.z;var k=Math.cos(c),m=g.y+b.y*k,n=g.z+b.z*k;g.x=g.x+b.x*k;g.y=m;g.z=n;k=Math.sin(c);m=g.y+e.y*k;n=g.z+e.z*k;g.x=g.x+e.x*k;g.y=m;g.z=n;k=this.p;if(null!=h){h.Z();if(k.c==k.b.length){for(var m=Array(k.c<<1),n=0,q=k.c;n<q;){var p=n++;m[p]=k.b[p];k.b[p]=null}k.b=m}k.b[k.c++]=h}h=g}a=this.p;if(null!=h){h.Z();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(d=a.c;f<d;)l=f++,c[l]=a.b[l],a.b[l]=null;a.b=c}a.b[a.c++]=h}a=this.p;if(null!=b){b.Z();if(a.c==a.b.length){c=Array(a.c<<1);f=0;for(h=a.c;f<h;)d=f++,c[d]=a.b[d],a.b[d]=null;a.b=c}a.b[a.c++]=b}b=this.p;if(null!=e){e.Z();if(b.c==b.b.length){a=Array(b.c<<1);c=0;for(f=b.c;c<f;)h=c++,a[h]=b.b[h],b.b[h]=null;b.b=a}b.b[b.c++]=e}},Xl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.eb?new M:q.cb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var la=v.y+l.y*e,x=v.z+l.z*e;v.x+=l.x*e;v.y=la;v.z=x;var A=this.p,u=0==A.c?new t:A.b[--A.c];u.x=n.x;u.y=n.y;u.z=n.z;var C=-e,K=u.y+l.y*C,B=u.z+l.z*C;u.x+=l.x*C;u.y=K;u.z=B;if(this.wireframe){var D=this.p,z=0==D.c?new t:D.b[--D.c];z.x=u.x;z.y=u.y;z.z=u.z;var Eb=-b,L=z.y+f.y*Eb,I=z.z+f.z*Eb;z.x+=f.x*Eb;z.y=L;z.z=I;var F=z.y+0*k.y,E=z.z+0*k.z;z.x+=0*k.x;z.y=F;z.z=E;var U=this.p,db=0==U.c?new t:U.b[--U.c];db.x=u.x;db.y=u.y;db.z=u.z;var P=db.y+f.y*b,vc=db.z+f.z*b;db.x+=f.x*b;db.y=P;db.z=vc;var ib=db.y+0*k.y,Da=db.z+0*k.z;db.x+=0*k.x;db.y=ib;db.z=Da;var Ia=this.p,oa=0==Ia.c?new t:Ia.b[--Ia.c];oa.x=u.x;oa.y=u.y;oa.z=u.z;var R=oa.y+0*f.y,ra=oa.z+0*f.z;oa.x+=0*f.x;oa.y=R;oa.z=ra;var Ca=-b,xa=oa.y+k.y*Ca,Ra=oa.z+k.z*Ca;oa.x+=k.x*Ca;oa.y=xa;oa.z=Ra;var Ba=this.p,sa=0==Ba.c?new t:Ba.b[--Ba.c];sa.x=u.x;sa.y=u.y;sa.z=u.z;var Sa=sa.y+0*f.y,G=sa.z+0*f.z;sa.x+=0*f.x;sa.y=Sa;sa.z=G;var Qa=sa.y+k.y*b,W=sa.z+k.z*b;sa.x+=k.x*b;sa.y=Qa;sa.z=W;this.ellipse(u,f,k,b,b,d);var N=this.p;if(null!=z){z.Z();if(N.c==N.b.length){for(var Q=Array(N.c<<1),Z=0,ba=N.c;Z<ba;){var S=Z++;Q[S]=N.b[S];N.b[S]=null}N.b=Q}N.b[N.c++]=z}var X=this.p;if(null!=db){db.Z();if(X.c==X.b.length){for(var y=Array(X.c<<1),fa=0,T=X.c;fa<T;){var ia=fa++;y[ia]=X.b[ia];X.b[ia]=null}X.b=y}X.b[X.c++]=db}var pa=this.p;if(null!=oa){oa.Z();if(pa.c==pa.b.length){for(var wa=Array(pa.c<<1),ya=0,ha=pa.c;ya<ha;){var Y=ya++;wa[Y]=pa.b[Y];pa.b[Y]=null}pa.b=wa}pa.b[pa.c++]=oa}var ma=this.p;if(null!=sa){sa.Z();if(ma.c==ma.b.length){for(var Ea=Array(ma.c<<1),Ha=0,J=ma.c;Ha<J;){var ta=Ha++;Ea[ta]=ma.b[ta];ma.b[ta]=null}ma.b=Ea}ma.b[ma.c++]=sa}}else{for(var ea=1/Math.sqrt(b*b+4*e*e),aa=2*e*ea,Za=b*ea,da=0;8>da;){var O=da++,va=this.Df[O],ob=this.oj[O];va.x=ob.x;va.y=ob.y;va.z=ob.z;var na=va,za=na.y*aa,La=na.z*aa;na.x=na.x*aa;na.y=za;na.z=La;na.y+=Za;var ab=this.Df[O],ub=ab.x*p.e10+ab.y*p.e11+ab.z*p.e12,gb=ab.x*p.e20+ab.y*p.e21+ab.z*p.e22;ab.x=ab.x*p.e00+ab.y*p.e01+ab.z*p.e02;ab.y=ub;ab.z=gb;var ua=this.de[O],Aa=this.Wl[O];ua.x=Aa.x;ua.y=Aa.y;ua.z=Aa.z;var Ya=ua,Ja=Ya.y*aa,wb=Ya.z*aa;Ya.x=Ya.x*aa;Ya.y=Ja;Ya.z=wb;Ya.y+=Za;var Fa=this.de[O],ja=Fa.x*p.e10+Fa.y*p.e11+Fa.z*p.e12,qa=Fa.x*p.e20+Fa.y*p.e21+Fa.z*p.e22;Fa.x=Fa.x*p.e00+Fa.y*p.e01+Fa.z*p.e02;Fa.y=ja;Fa.z=qa;var eb=this.Le[O],Oa=this.oj[O];eb.x=Oa.x;eb.y=Oa.y;eb.z=Oa.z;var Bb=eb,mb=Bb.x*p.e10+Bb.y*p.e11+Bb.z*p.e12,hb=Bb.x*p.e20+Bb.y*p.e21+Bb.z*p.e22;Bb.x=Bb.x*p.e00+Bb.y*p.e01+Bb.z*p.e02;Bb.y=mb;Bb.z=hb;var pb=Bb,qb=pb.y*b,$a=pb.z*b;pb.x=pb.x*b;pb.y=qb;pb.z=$a;var yc=pb,Ab=yc.y+n.y,bb=yc.z+n.z;yc.x=yc.x+n.x;yc.y=Ab;yc.z=bb;var Ka=this.Le[O],Zb=-e,H=Ka.y+l.y*Zb,cb=Ka.z+l.z*Zb;Ka.x=Ka.x+l.x*Zb;Ka.y=H;Ka.z=cb}for(var jb=0;8>jb;){var jc=jb++,kb=this.de[jc],xb=this.p,w=0==xb.c?new t:xb.b[--xb.c];w.x=l.x;w.y=l.y;w.z=l.z;var V=w,ca=-V.y,Ga=-V.z;V.x=-V.x;V.y=ca;V.z=Ga;var kb=V,cc=this.p;if(null!=kb){kb.Z();if(cc.c==cc.b.length){for(var Pa=Array(cc.c<<1),nb=0,rb=cc.c;nb<rb;){var Cb=nb++;Pa[Cb]=cc.b[Cb];cc.b[Cb]=null}cc.b=Pa}cc.b[cc.c++]=kb}}}var sb=this.p;if(null!=v){v.Z();if(sb.c==sb.b.length){for(var ga=Array(sb.c<<1),Ua=0,fb=sb.c;Ua<fb;){var Xa=Ua++;ga[Xa]=sb.b[Xa];sb.b[Xa]=null}sb.b=ga}sb.b[sb.c++]=v}var tb=this.p;if(null!=u){u.Z();if(tb.c==tb.b.length){for(var Ma=Array(tb.c<<1),Gb=0,Na=tb.c;Gb<Na;){var ka=Gb++;Ma[ka]=tb.b[ka];tb.b[ka]=null}tb.b=Ma}tb.b[tb.c++]=u}var Hb=this.p;if(null!=n){n.Z();if(Hb.c==Hb.b.length){for(var Ob=Array(Hb.c<<1),Tc=0,Ta=Hb.c;Tc<Ta;){var Ic=Tc++;Ob[Ic]=Hb.b[Ic];Hb.b[Ic]=null}Hb.b=Ob}Hb.b[Hb.c++]=n}var Va=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Va.eb==Va.cb.length){for(var sc=Array(Va.eb<<1),Wa=0,vb=Va.eb;Wa<vb;){var Jc=Wa++;sc[Jc]=Va.cb[Jc];Va.cb[Jc]=null}Va.cb=sc}Va.cb[Va.eb++]=p}var wc=this.p;if(null!=f){f.Z();if(wc.c==wc.b.length){for(var $b=Array(wc.c<<1),dc=0,kc=wc.c;dc<kc;){var Lb=dc++;$b[Lb]=wc.b[Lb];wc.b[Lb]=null}wc.b=$b}wc.b[wc.c++]=f}var Yb=this.p;if(null!=l){l.Z();if(Yb.c==Yb.b.length){for(var Sb=Array(Yb.c<<1),nc=0,ac=Yb.c;nc<ac;){var Ib=nc++;Sb[Ib]=Yb.b[Ib];Yb.b[Ib]=null}Yb.b=Sb}Yb.b[Yb.c++]=l}var Vb=this.p;if(null!=k){k.Z();if(Vb.c==Vb.b.length){for(var bc=Array(Vb.c<<1),Kb=0,Tb=Vb.c;Kb<Tb;){var lb=Kb++;bc[lb]=Vb.b[lb];Vb.b[lb]=null}Vb.b=bc}Vb.b[Vb.c++]=k}},$l:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.eb?new M:q.cb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);var r=this.p,v=0==r.c?new t:r.b[--r.c];v.x=n.x;v.y=n.y;v.z=n.z;var la=v.y+l.y*e,x=v.z+l.z*e;v.x+=l.x*e;v.y=la;v.z=x;var A=this.p,u=0==A.c?new t:A.b[--A.c];u.x=n.x;u.y=n.y;u.z=n.z;var C=-e,K=u.y+l.y*C,B=u.z+l.z*C;u.x+=l.x*C;u.y=K;u.z=B;if(this.wireframe){var D=this.p,z=0==D.c?new t:D.b[--D.c];z.x=v.x;z.y=v.y;z.z=v.z;var Eb=-b,L=z.y+f.y*Eb,I=z.z+f.z*Eb;z.x+=f.x*Eb;z.y=L;z.z=I;var F=z.y+0*k.y,E=z.z+0*k.z;z.x+=0*k.x;z.y=F;z.z=E;var U=this.p,P=0==U.c?new t:U.b[--U.c];P.x=v.x;P.y=v.y;P.z=v.z;var ra=P.y+f.y*b,vc=P.z+f.z*b;P.x+=f.x*b;P.y=ra;P.z=vc;var ib=P.y+0*k.y,Da=P.z+0*k.z;P.x+=0*k.x;P.y=ib;P.z=Da;var Ia=this.p,oa=0==Ia.c?new t:Ia.b[--Ia.c];oa.x=v.x;oa.y=v.y;oa.z=v.z;var R=oa.y+0*f.y,za=oa.z+0*f.z;oa.x+=0*f.x;oa.y=R;oa.z=za;var Ca=-b,xa=oa.y+k.y*Ca,Ra=oa.z+k.z*Ca;oa.x+=k.x*Ca;oa.y=xa;oa.z=Ra;var Ba=this.p,sa=0==Ba.c?new t:Ba.b[--Ba.c];sa.x=v.x;sa.y=v.y;sa.z=v.z;var Sa=sa.y+0*f.y,G=sa.z+0*f.z;sa.x+=0*f.x;sa.y=Sa;sa.z=G;var Qa=sa.y+k.y*b,W=sa.z+k.z*b;sa.x+=k.x*b;sa.y=Qa;sa.z=W;var N=this.p,Q=0==N.c?new t:N.b[--N.c];Q.x=u.x;Q.y=u.y;Q.z=u.z;var Z=-b,ba=Q.y+f.y*Z,S=Q.z+f.z*Z;Q.x+=f.x*Z;Q.y=ba;Q.z=S;var X=Q.y+0*k.y,y=Q.z+0*k.z;Q.x+=0*k.x;Q.y=X;Q.z=y;var fa=this.p,T=0==fa.c?new t:fa.b[--fa.c];T.x=u.x;T.y=u.y;T.z=u.z;var ia=T.y+f.y*b,pa=T.z+f.z*b;T.x+=f.x*b;T.y=ia;T.z=pa;var wa=T.y+0*k.y,ya=T.z+0*k.z;T.x+=0*k.x;T.y=wa;T.z=ya;var ha=this.p,Y=0==ha.c?new t:ha.b[--ha.c];Y.x=u.x;Y.y=u.y;Y.z=u.z;var ma=Y.y+0*f.y,Ea=Y.z+0*f.z;Y.x+=0*f.x;Y.y=ma;Y.z=Ea;var Ha=-b,J=Y.y+k.y*Ha,ta=Y.z+k.z*Ha;Y.x+=k.x*Ha;Y.y=J;Y.z=ta;var ea=this.p,aa=0==ea.c?new t:ea.b[--ea.c];aa.x=u.x;aa.y=u.y;aa.z=u.z;var Za=aa.y+0*f.y,da=aa.z+0*f.z;aa.x+=0*f.x;aa.y=Za;aa.z=da;var O=aa.y+k.y*b,va=aa.z+k.z*b;aa.x+=k.x*b;aa.y=O;aa.z=va;this.ellipse(v,f,k,b,b,d);this.ellipse(u,f,k,b,b,d);var ob=this.p;if(null!=z){z.Z();if(ob.c==ob.b.length){for(var na=Array(ob.c<<1),Ga=0,La=ob.c;Ga<La;){var ab=Ga++;na[ab]=ob.b[ab];ob.b[ab]=null}ob.b=na}ob.b[ob.c++]=z}var ub=this.p;if(null!=P){P.Z();if(ub.c==ub.b.length){for(var gb=Array(ub.c<<1),ua=0,Aa=ub.c;ua<Aa;){var Ya=ua++;gb[Ya]=ub.b[Ya];ub.b[Ya]=null}ub.b=gb}ub.b[ub.c++]=P}var Ja=this.p;if(null!=oa){oa.Z();if(Ja.c==Ja.b.length){for(var wb=Array(Ja.c<<1),Fa=0,ja=Ja.c;Fa<ja;){var qa=Fa++;wb[qa]=Ja.b[qa];Ja.b[qa]=null}Ja.b=wb}Ja.b[Ja.c++]=oa}var eb=this.p;if(null!=sa){sa.Z();if(eb.c==eb.b.length){for(var Oa=Array(eb.c<<1),Bb=0,mb=eb.c;Bb<mb;){var hb=Bb++;Oa[hb]=eb.b[hb];eb.b[hb]=null}eb.b=Oa}eb.b[eb.c++]=sa}var pb=this.p;if(null!=Q){Q.Z();if(pb.c==pb.b.length){for(var qb=Array(pb.c<<1),$a=0,yc=pb.c;$a<yc;){var Ab=$a++;qb[Ab]=pb.b[Ab];pb.b[Ab]=null}pb.b=qb}pb.b[pb.c++]=Q}var bb=this.p;if(null!=T){T.Z();if(bb.c==bb.b.length){for(var Ka=Array(bb.c<<1),Zb=0,H=bb.c;Zb<H;){var cb=Zb++;Ka[cb]=bb.b[cb];bb.b[cb]=null}bb.b=Ka}bb.b[bb.c++]=T}var jb=this.p;if(null!=Y){Y.Z();if(jb.c==jb.b.length){for(var jc=Array(jb.c<<1),kb=0,xb=jb.c;kb<xb;){var w=kb++;jc[w]=jb.b[w];jb.b[w]=null}jb.b=jc}jb.b[jb.c++]=Y}var V=this.p;if(null!=aa){aa.Z();if(V.c==V.b.length){for(var ca=Array(V.c<<1),Na=0,cc=V.c;Na<cc;){var Pa=Na++;ca[Pa]=V.b[Pa];V.b[Pa]=null}V.b=ca}V.b[V.c++]=aa}}else{for(var nb=0;8>nb;){var rb=nb++,Cb=this.Df[rb],sb=this.oj[rb];Cb.x=sb.x;Cb.y=sb.y;Cb.z=sb.z;var ga=Cb,Ua=ga.x*p.e10+ga.y*p.e11+ga.z*p.e12,fb=ga.x*p.e20+ga.y*p.e21+ga.z*p.e22;ga.x=ga.x*p.e00+ga.y*p.e01+ga.z*p.e02;ga.y=Ua;ga.z=fb;var Xa=this.de[rb],tb=this.Df[rb];Xa.x=tb.x;Xa.y=tb.y;Xa.z=tb.z;var Ma=Xa,Gb=Ma.y*b,Va=Ma.z*b;Ma.x=Ma.x*b;Ma.y=Gb;Ma.z=Va;var ka=Ma,Hb=ka.y+n.y,Ob=ka.z+n.z;ka.x=ka.x+n.x;ka.y=Hb;ka.z=Ob;var Ta=this.Le[rb],Wa=this.de[rb];Ta.x=Wa.x;Ta.y=Wa.y;Ta.z=Wa.z;var Ic=this.de[rb],vb=Ic.y+l.y*e,sc=Ic.z+l.z*e;Ic.x=Ic.x+l.x*e;Ic.y=vb;Ic.z=sc;var yb=this.Le[rb],zb=-e,Jc=yb.y+l.y*zb,wc=yb.z+l.z*zb;yb.x=yb.x+l.x*zb;yb.y=Jc;yb.z=wc}for(var $b=0;8>$b;){var dc=$b++,kc=v,Lb=this.de[dc],Yb=this.de[(dc+1)%8],Sb=l,kc=u,Lb=this.Le[(dc+1)%8],Yb=this.Le[dc],nc=this.p,ac=0==nc.c?new t:nc.b[--nc.c];ac.x=l.x;ac.y=l.y;ac.z=l.z;var Ib=ac,Vb=-Ib.y,bc=-Ib.z;Ib.x=-Ib.x;Ib.y=Vb;Ib.z=bc;var Sb=Ib,Kb=this.p;if(null!=Sb){Sb.Z();if(Kb.c==Kb.b.length){for(var Tb=Array(Kb.c<<1),lb=0,Mb=Kb.c;lb<Mb;){var Db=lb++;Tb[Db]=Kb.b[Db];Kb.b[Db]=null}Kb.b=Tb}Kb.b[Kb.c++]=Sb}var kc=this.de[dc],Lb=this.Le[dc],Yb=this.Le[(dc+1)%8],Nb=this.de[(dc+1)%8],Sb=this.Df[dc],rc=this.Df[(dc+1)%8];this.rect(kc,Lb,Yb,Nb,Sb,Sb,rc,rc,d)}}var gc=this.p;if(null!=v){v.Z();if(gc.c==gc.b.length){for(var Zc=Array(gc.c<<1),Kc=0,Jb=gc.c;Kc<Jb;){var oc=Kc++;Zc[oc]=gc.b[oc];gc.b[oc]=null}gc.b=Zc}gc.b[gc.c++]=v}var uc=this.p;if(null!=u){u.Z();if(uc.c==uc.b.length){for(var Ub=Array(uc.c<<1),Pb=0,hc=uc.c;Pb<hc;){var Nc=Pb++;Ub[Nc]=uc.b[Nc];uc.b[Nc]=null}uc.b=Ub}uc.b[uc.c++]=u}var Ec=this.p;if(null!=n){n.Z();if(Ec.c==Ec.b.length){for(var ec=Array(Ec.c<<1),Jd=0,qc=Ec.c;Jd<qc;){var ic=Jd++;ec[ic]=Ec.b[ic];Ec.b[ic]=null}Ec.b=ec}Ec.b[Ec.c++]=n}var Fb=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(Fb.eb==Fb.cb.length){for(var Wb=Array(Fb.eb<<1),mc=0,pc=Fb.eb;mc<pc;){var Cc=mc++;Wb[Cc]=Fb.cb[Cc];Fb.cb[Cc]=null}Fb.cb=Wb}Fb.cb[Fb.eb++]=p}var Qb=this.p;if(null!=f){f.Z();if(Qb.c==Qb.b.length){for(var tc=Array(Qb.c<<1),Ac=0,Xb=Qb.c;Ac<Xb;){var Uc=Ac++;tc[Uc]=Qb.b[Uc];Qb.b[Uc]=null}Qb.b=tc}Qb.b[Qb.c++]=f}var lc=this.p;if(null!=l){l.Z();if(lc.c==lc.b.length){for(var Lc=Array(lc.c<<1),Rc=0,Mc=lc.c;Rc<Mc;){var zc=Rc++;Lc[zc]=lc.b[zc];lc.b[zc]=null}lc.b=Lc}lc.b[lc.c++]=l}var fc=this.p;if(null!=k){k.Z();if(fc.c==fc.b.length){for(var dd=Array(fc.c<<1),bd=0,$c=fc.c;bd<$c;){var cd=bd++;dd[cd]=fc.b[cd];fc.b[cd]=null}fc.b=dd}fc.b[fc.c++]=k}},Vl:function(a,b,e,d){var c=this.p,f=0==c.c?new t:c.b[--c.c],h=this.p,l=0==h.c?new t:h.b[--h.c],g=this.p,k=0==g.c?new t:g.b[--g.c],m=this.p,n=0==m.c?new t:m.b[--m.c],q=this.p,p=0==q.eb?new M:q.cb[--q.eb];n.x=a.v;n.y=a.A;n.z=a.B;p.e00=a.o;p.e01=a.f;p.e02=a.h;p.e10=a.i;p.e11=a.m;p.e12=a.j;p.e20=a.l;p.e21=a.g;p.e22=a.s;f.za(p.e00,p.e10,p.e20);l.za(p.e01,p.e11,p.e21);k.za(p.e02,p.e12,p.e22);for(var r=this.yh,v=this.jk,la=0;5>la;)for(var x=la++,A=0,u=this.yh[x].length;A<u;){var C=A++,K=v[x][C],B=this.hk[x][C];K.x=B.x;K.y=B.y;K.z=B.z;var D=K,z=D.x*p.e10+D.y*p.e11+D.z*p.e12,Eb=D.x*p.e20+D.y*p.e21+D.z*p.e22;D.x=D.x*p.e00+D.y*p.e01+D.z*p.e02;D.y=z;D.z=Eb}for(var L=0;4>L;){var I=L++;if(!I)for(var F=0;3>F;)for(var E=F++,P=0,U=this.yh[E].length;P<U;){var ra=P++,vc=r[E][ra],ib=v[E][ra];vc.x=ib.x;vc.y=ib.y;vc.z=ib.z;var Da=vc,Ia=Da.y*b,oa=Da.z*b;Da.x=Da.x*b;Da.y=Ia;Da.z=oa;var R=Da,Ga=R.y+n.y,Ca=R.z+n.z;R.x=R.x+n.x;R.y=Ga;R.z=Ca;var xa=R,Ra=xa.y+l.y*e,Ba=xa.z+l.z*e;xa.x=xa.x+l.x*e;xa.y=Ra;xa.z=Ba}if(2==I)for(var sa=2;5>sa;)for(var Sa=sa++,G=0,Qa=this.yh[Sa].length;G<Qa;){var W=G++,N=r[Sa][W],Q=v[Sa][W];N.x=Q.x;N.y=Q.y;N.z=Q.z;var Z=N,ba=Z.y*b,S=Z.z*b;Z.x=Z.x*b;Z.y=ba;Z.z=S;var X=Z,y=X.y+n.y,fa=X.z+n.z;X.x=X.x+n.x;X.y=y;X.z=fa;var T=X,ia=-e,pa=T.y+l.y*ia,wa=T.z+l.z*ia;T.x=T.x+l.x*ia;T.y=pa;T.z=wa}for(var ya=0;8>ya;){var ha=ya++,Y,ma,Ea,Ha,J,ta,ea,aa;I?3==I?this.wireframe?(Y=r[4][0],ma=r[I][(ha+1)%8],Ea=r[I][ha]):(Y=r[4][0],ma=r[I][(ha+1)%8],Ea=r[I][ha],J=v[4][0],ta=v[I][(ha+1)%8],ea=v[I][ha]):this.wireframe?(Y=r[I][ha],ma=r[I][(ha+1)%8],Ea=r[I+1][ha]):(Y=r[I][ha],ma=r[I][(ha+1)%8],Ea=r[I+1][ha],Ha=r[I+1][(ha+1)%8],J=v[I][ha],ta=v[I][(ha+1)%8],ea=v[I+1][ha],aa=v[I+1][(ha+1)%8],this.rect(Y,Ea,Ha,ma,J,ea,aa,ta,d)):this.wireframe?(Y=r[0][0],ma=r[1][ha]):(Y=r[0][0],ma=r[1][ha],Ea=r[1][(ha+1)%8],J=v[0][0],ta=v[1][ha],ea=v[1][(ha+1)%8])}}var Za=this.p,da=0==Za.c?new t:Za.b[--Za.c];da.x=n.x;da.y=n.y;da.z=n.z;var O=da.y+l.y*e,va=da.z+l.z*e;da.x+=l.x*e;da.y=O;da.z=va;var ob=this.p,na=0==ob.c?new t:ob.b[--ob.c];na.x=n.x;na.y=n.y;na.z=n.z;var za=-e,La=na.y+l.y*za,ab=na.z+l.z*za;na.x+=l.x*za;na.y=La;na.z=ab;if(this.wireframe){var ub=this.p,gb=0==ub.c?new t:ub.b[--ub.c];gb.x=da.x;gb.y=da.y;gb.z=da.z;var ua=-b,Aa=gb.y+f.y*ua,Ya=gb.z+f.z*ua;gb.x+=f.x*ua;gb.y=Aa;gb.z=Ya;var Ja=gb.y+0*k.y,wb=gb.z+0*k.z;gb.x+=0*k.x;gb.y=Ja;gb.z=wb;var Fa=this.p,ja=0==Fa.c?new t:Fa.b[--Fa.c];ja.x=da.x;ja.y=da.y;ja.z=da.z;var qa=ja.y+f.y*b,eb=ja.z+f.z*b;ja.x+=f.x*b;ja.y=qa;ja.z=eb;var Oa=ja.y+0*k.y,Bb=ja.z+0*k.z;ja.x+=0*k.x;ja.y=Oa;ja.z=Bb;var mb=this.p,hb=0==mb.c?new t:mb.b[--mb.c];hb.x=da.x;hb.y=da.y;hb.z=da.z;var pb=hb.y+0*f.y,qb=hb.z+0*f.z;hb.x+=0*f.x;hb.y=pb;hb.z=qb;var $a=-b,Na=hb.y+k.y*$a,Ab=hb.z+k.z*$a;hb.x+=k.x*$a;hb.y=Na;hb.z=Ab;var bb=this.p,Ka=0==bb.c?new t:bb.b[--bb.c];Ka.x=da.x;Ka.y=da.y;Ka.z=da.z;var Zb=Ka.y+0*f.y,H=Ka.z+0*f.z;Ka.x+=0*f.x;Ka.y=Zb;Ka.z=H;var cb=Ka.y+k.y*b,jb=Ka.z+k.z*b;Ka.x+=k.x*b;Ka.y=cb;Ka.z=jb;var jc=this.p,kb=0==jc.c?new t:jc.b[--jc.c];kb.x=na.x;kb.y=na.y;kb.z=na.z;var xb=-b,w=kb.y+f.y*xb,V=kb.z+f.z*xb;kb.x+=f.x*xb;kb.y=w;kb.z=V;var ca=kb.y+0*k.y,Ta=kb.z+0*k.z;kb.x+=0*k.x;kb.y=ca;kb.z=Ta;var cc=this.p,Pa=0==cc.c?new t:cc.b[--cc.c];Pa.x=na.x;Pa.y=na.y;Pa.z=na.z;var nb=Pa.y+f.y*b,rb=Pa.z+f.z*b;Pa.x+=f.x*b;Pa.y=nb;Pa.z=rb;var Cb=Pa.y+0*k.y,sb=Pa.z+0*k.z;Pa.x+=0*k.x;Pa.y=Cb;Pa.z=sb;var ga=this.p,Ua=0==ga.c?new t:ga.b[--ga.c];Ua.x=na.x;Ua.y=na.y;Ua.z=na.z;var fb=Ua.y+0*f.y,Xa=Ua.z+0*f.z;Ua.x+=0*f.x;Ua.y=fb;Ua.z=Xa;var tb=-b,Ma=Ua.y+k.y*tb,Gb=Ua.z+k.z*tb;Ua.x+=k.x*tb;Ua.y=Ma;Ua.z=Gb;var Va=this.p,ka=0==Va.c?new t:Va.b[--Va.c];ka.x=na.x;ka.y=na.y;ka.z=na.z;var Hb=ka.y+0*f.y,Ob=ka.z+0*f.z;ka.x+=0*f.x;ka.y=Hb;ka.z=Ob;var Wa=ka.y+k.y*b,vb=ka.z+k.z*b;ka.x+=k.x*b;ka.y=Wa;ka.z=vb;this.ellipse(da,f,k,b,b,d);this.ellipse(na,f,k,b,b,d);var Ic=this.p;if(null!=gb){gb.Z();if(Ic.c==Ic.b.length){for(var yb=Array(Ic.c<<1),sc=0,zb=Ic.c;sc<zb;){var Db=sc++;yb[Db]=Ic.b[Db];Ic.b[Db]=null}Ic.b=yb}Ic.b[Ic.c++]=gb}var Jc=this.p;if(null!=ja){ja.Z();if(Jc.c==Jc.b.length){for(var wc=Array(Jc.c<<1),$b=0,dc=Jc.c;$b<dc;){var kc=$b++;wc[kc]=Jc.b[kc];Jc.b[kc]=null}Jc.b=wc}Jc.b[Jc.c++]=ja}var Lb=this.p;if(null!=hb){hb.Z();if(Lb.c==Lb.b.length){for(var Yb=Array(Lb.c<<1),Sb=0,nc=Lb.c;Sb<nc;){var ac=Sb++;Yb[ac]=Lb.b[ac];Lb.b[ac]=null}Lb.b=Yb}Lb.b[Lb.c++]=hb}var Ib=this.p;if(null!=Ka){Ka.Z();if(Ib.c==Ib.b.length){for(var Vb=Array(Ib.c<<1),bc=0,Kb=Ib.c;bc<Kb;){var Tb=bc++;Vb[Tb]=Ib.b[Tb];Ib.b[Tb]=null}Ib.b=Vb}Ib.b[Ib.c++]=Ka}var lb=this.p;if(null!=kb){kb.Z();if(lb.c==lb.b.length){for(var Mb=Array(lb.c<<1),Nb=0,Fb=lb.c;Nb<Fb;){var rc=Nb++;Mb[rc]=lb.b[rc];lb.b[rc]=null}lb.b=Mb}lb.b[lb.c++]=kb}var gc=this.p;if(null!=Pa){Pa.Z();if(gc.c==gc.b.length){for(var Zc=Array(gc.c<<1),Kc=0,Jb=gc.c;Kc<Jb;){var oc=Kc++;Zc[oc]=gc.b[oc];gc.b[oc]=null}gc.b=Zc}gc.b[gc.c++]=Pa}var uc=this.p;if(null!=Ua){Ua.Z();if(uc.c==uc.b.length){for(var Qb=Array(uc.c<<1),Ub=0,Pb=uc.c;Ub<Pb;){var Nc=Ub++;Qb[Nc]=uc.b[Nc];uc.b[Nc]=null}uc.b=Qb}uc.b[uc.c++]=Ua}var Ec=this.p;if(null!=ka){ka.Z();if(Ec.c==Ec.b.length){for(var ic=Array(Ec.c<<1),lc=0,ec=Ec.c;lc<ec;){var hc=lc++;ic[hc]=Ec.b[hc];Ec.b[hc]=null}Ec.b=ic}Ec.b[Ec.c++]=ka}}else{for(var qc=0;8>qc;){var Wb=qc++,mc=this.Df[Wb],pc=this.oj[Wb];mc.x=pc.x;mc.y=pc.y;mc.z=pc.z;var Cc=mc,tc=Cc.x*p.e10+Cc.y*p.e11+Cc.z*p.e12,Ac=Cc.x*p.e20+Cc.y*p.e21+Cc.z*p.e22;Cc.x=Cc.x*p.e00+Cc.y*p.e01+Cc.z*p.e02;Cc.y=tc;Cc.z=Ac;var Xb=this.de[Wb],fc=this.Df[Wb];Xb.x=fc.x;Xb.y=fc.y;Xb.z=fc.z;var Uc=Xb,Lc=Uc.y*b,Rc=Uc.z*b;Uc.x=Uc.x*b;Uc.y=Lc;Uc.z=Rc;var zc=Uc,Mc=zc.y+n.y,dd=zc.z+n.z;zc.x=zc.x+n.x;zc.y=Mc;zc.z=dd;var bd=this.Le[Wb],cd=this.de[Wb];bd.x=cd.x;bd.y=cd.y;bd.z=cd.z;var $c=this.de[Wb],Ad=$c.y+l.y*e,Cd=$c.z+l.z*e;$c.x=$c.x+l.x*e;$c.y=Ad;$c.z=Cd;var md=this.Le[Wb],td=-e,Ed=md.y+l.y*td,Yc=md.z+l.z*td;md.x=md.x+l.x*td;md.y=Ed;md.z=Yc}for(var Vc=0;8>Vc;){var Gc=Vc++,Sc=this.Df[Gc],Bc=this.Df[(Gc+1)%8];this.rect(this.de[Gc],this.Le[Gc],this.Le[(Gc+1)%8],this.de[(Gc+1)%8],Sc,Sc,Bc,Bc,d)}}var xc=this.p;if(null!=da){da.Z();if(xc.c==xc.b.length){for(var ud=Array(xc.c<<1),Dd=0,Ud=xc.c;Dd<Ud;){var Xd=Dd++;ud[Xd]=xc.b[Xd];xc.b[Xd]=null}xc.b=ud}xc.b[xc.c++]=da}var pd=this.p;if(null!=na){na.Z();if(pd.c==pd.b.length){for(var Kd=Array(pd.c<<1),Vd=0,ce=pd.c;Vd<ce;){var Id=Vd++;Kd[Id]=pd.b[Id];pd.b[Id]=null}pd.b=Kd}pd.b[pd.c++]=na}var sd=this.p;if(null!=n){n.Z();if(sd.c==sd.b.length){for(var le=Array(sd.c<<1),me=0,ne=sd.c;me<ne;){var oe=me++;le[oe]=sd.b[oe];sd.b[oe]=null}sd.b=le}sd.b[sd.c++]=n}var vd=this.p;if(null!=p){p.e00=1;p.e01=0;p.e02=0;p.e10=0;p.e11=1;p.e12=0;p.e20=0;p.e21=0;p.e22=1;if(vd.eb==vd.cb.length){for(var pe=Array(vd.eb<<1),de=0,je=vd.eb;de<je;){var Wd=de++;pe[Wd]=vd.cb[Wd];vd.cb[Wd]=null}vd.cb=pe}vd.cb[vd.eb++]=p}var Wc=this.p;if(null!=f){f.Z();if(Wc.c==Wc.b.length){for(var nd=Array(Wc.c<<1),qd=0,ke=Wc.c;qd<ke;){var be=qd++;nd[be]=Wc.b[be];Wc.b[be]=null}Wc.b=nd}Wc.b[Wc.c++]=f}var ed=this.p;if(null!=l){l.Z();if(ed.c==ed.b.length){for(var fd=Array(ed.c<<1),gd=0,Hc=ed.c;gd<Hc;){var Fc=gd++;fd[Fc]=ed.b[Fc];ed.b[Fc]=null}ed.b=fd}ed.b[ed.c++]=l}var Dc=this.p;if(null!=k){k.Z();if(Dc.c==Dc.b.length){for(var Yd=Array(Dc.c<<1),Be=0,xe=Dc.c;Be<xe;){var Fd=Be++;Yd[Fd]=Dc.b[Fd];Dc.b[Fd]=null}Dc.b=Yd}Dc.b[Dc.c++]=k}},Bm:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],d=this.p,d=0==d.eb?new M:d.cb[--d.eb];c.x=a.v;c.y=a.A;c.z=a.B;d.e00=a.o;d.e01=a.f;d.e02=a.h;d.e10=a.i;d.e11=a.m;d.e12=a.j;d.e20=a.l;d.e21=a.g;d.e22=a.s;a=this.yh;for(var f=this.jk,h=0;5>h;)for(var l=h++,g=0,k=this.yh[l].length;g<k;){var m=g++,n=f[l][m],q=this.hk[l][m];n.x=q.x;n.y=q.y;n.z=q.z;var q=n.x*d.e10+n.y*d.e11+n.z*d.e12,p=n.x*d.e20+n.y*d.e21+n.z*d.e22;n.x=n.x*d.e00+n.y*d.e01+n.z*d.e02;n.y=q;n.z=p;n=a[l][m];m=f[l][m];n.x=m.x;n.y=m.y;n.z=m.z;m=n;n=m.y*b;q=m.z*b;m.x=m.x*b;m.y=n;m.z=q;n=m.y+c.y;q=m.z+c.z;m.x=m.x+c.x;m.y=n;m.z=q}for(b=0;4>b;)for(h=b++,l=0;8>l;){var r=l++,v;h&&3!=h&&!this.wireframe&&(g=a[h][r],k=a[h][(r+1)%8],m=a[h+1][r],n=a[h+1][(r+1)%8],q=f[h][r],p=f[h][(r+1)%8],v=f[h+1][r],r=f[h+1][(r+1)%8],this.rect(g,m,n,k,q,v,r,p,e))}e=this.p;if(null!=c){c.Z();if(e.c==e.b.length){a=Array(e.c<<1);f=0;for(b=e.c;f<b;)h=f++,a[h]=e.b[h],e.b[h]=null;e.b=a}e.b[e.c++]=c}c=this.p;if(null!=d){d.e00=1;d.e01=0;d.e02=0;d.e10=0;d.e11=1;d.e12=0;d.e20=0;d.e21=0;d.e22=1;if(c.eb==c.cb.length){e=Array(c.eb<<1);a=0;for(f=c.eb;a<f;)b=a++,e[b]=c.cb[b],c.cb[b]=null;c.cb=e}c.cb[c.eb++]=d}},Tl:function(a,b,e){var d=this.p,c=0==d.c?new t:d.b[--d.c],f=this.p,h=0==f.c?new t:f.b[--f.c],l=this.p,g=0==l.c?new t:l.b[--l.c],k=this.p,m=0==k.c?new t:k.b[--k.c],n=this.p,q=0==n.eb?new M:n.cb[--n.eb];m.x=a.v;m.y=a.A;m.z=a.B;q.e00=a.o;q.e01=a.f;q.e02=a.h;q.e10=a.i;q.e11=a.m;q.e12=a.j;q.e20=a.l;q.e21=a.g;q.e22=a.s;c.za(q.e00,q.e10,q.e20);h.za(q.e01,q.e11,q.e21);g.za(q.e02,q.e12,q.e22);var p=b.x,r=b.y,v=b.z,la=this.p,x=0==la.c?new t:la.b[--la.c];x.x=m.x;x.y=m.y;x.z=m.z;var A=-p,u=x.y+c.y*A,C=x.z+c.z*A;x.x+=c.x*A;x.y=u;x.z=C;var K=-r,B=x.y+h.y*K,D=x.z+h.z*K;x.x+=h.x*K;x.y=B;x.z=D;var z=-v,Eb=x.y+g.y*z,L=x.z+g.z*z;x.x+=g.x*z;x.y=Eb;x.z=L;var I=this.p,F=0==I.c?new t:I.b[--I.c];F.x=m.x;F.y=m.y;F.z=m.z;var E=-p,P=F.y+c.y*E,U=F.z+c.z*E;F.x+=c.x*E;F.y=P;F.z=U;var ra=-r,vc=F.y+h.y*ra,ib=F.z+h.z*ra;F.x+=h.x*ra;F.y=vc;F.z=ib;var Da=F.y+g.y*v,Ia=F.z+g.z*v;F.x+=g.x*v;F.y=Da;F.z=Ia;var oa=this.p,R=0==oa.c?new t:oa.b[--oa.c];R.x=m.x;R.y=m.y;R.z=m.z;var za=-p,Ca=R.y+c.y*za,xa=R.z+c.z*za;R.x+=c.x*za;R.y=Ca;R.z=xa;var Ra=R.y+h.y*r,Ba=R.z+h.z*r;R.x+=h.x*r;R.y=Ra;R.z=Ba;var sa=-v,Sa=R.y+g.y*sa,G=R.z+g.z*sa;R.x+=g.x*sa;R.y=Sa;R.z=G;var Qa=this.p,W=0==Qa.c?new t:Qa.b[--Qa.c];W.x=m.x;W.y=m.y;W.z=m.z;var N=-p,Q=W.y+c.y*N,Z=W.z+c.z*N;W.x+=c.x*N;W.y=Q;W.z=Z;var ba=W.y+h.y*r,S=W.z+h.z*r;W.x+=h.x*r;W.y=ba;W.z=S;var X=W.y+g.y*v,y=W.z+g.z*v;W.x+=g.x*v;W.y=X;W.z=y;var fa=this.p,T=0==fa.c?new t:fa.b[--fa.c];T.x=m.x;T.y=m.y;T.z=m.z;var ia=T.y+c.y*p,pa=T.z+c.z*p;T.x+=c.x*p;T.y=ia;T.z=pa;var wa=-r,ya=T.y+h.y*wa,ha=T.z+h.z*wa;T.x+=h.x*wa;T.y=ya;T.z=ha;var Y=-v,ma=T.y+g.y*Y,Ea=T.z+g.z*Y;T.x+=g.x*Y;T.y=ma;T.z=Ea;var Ha=this.p,J=0==Ha.c?new t:Ha.b[--Ha.c];J.x=m.x;J.y=m.y;J.z=m.z;var ta=J.y+c.y*p,ea=J.z+c.z*p;J.x+=c.x*p;J.y=ta;J.z=ea;var aa=-r,Za=J.y+h.y*aa,da=J.z+h.z*aa;J.x+=h.x*aa;J.y=Za;J.z=da;var O=J.y+g.y*v,va=J.z+g.z*v;J.x+=g.x*v;J.y=O;J.z=va;var ob=this.p,na=0==ob.c?new t:ob.b[--ob.c];na.x=m.x;na.y=m.y;na.z=m.z;var Ga=na.y+c.y*p,La=na.z+c.z*p;na.x+=c.x*p;na.y=Ga;na.z=La;var ab=na.y+h.y*r,ub=na.z+h.z*r;na.x+=h.x*r;na.y=ab;na.z=ub;var gb=-v,ua=na.y+g.y*gb,Aa=na.z+g.z*gb;na.x+=g.x*gb;na.y=ua;na.z=Aa;var Ya=this.p,Ja=0==Ya.c?new t:Ya.b[--Ya.c];Ja.x=m.x;Ja.y=m.y;Ja.z=m.z;var wb=Ja.y+c.y*p,Fa=Ja.z+c.z*p;Ja.x+=c.x*p;Ja.y=wb;Ja.z=Fa;var ja=Ja.y+h.y*r,qa=Ja.z+h.z*r;Ja.x+=h.x*r;Ja.y=ja;Ja.z=qa;var eb=Ja.y+g.y*v,Oa=Ja.z+g.z*v;Ja.x+=g.x*v;Ja.y=eb;Ja.z=Oa;if(!this.wireframe){var Bb=this.p,mb=0==Bb.c?new t:Bb.b[--Bb.c];mb.x=c.x;mb.y=c.y;mb.z=c.z;var hb=-mb.y,pb=-mb.z;mb.x=-mb.x;mb.y=hb;mb.z=pb;var qb=this.p,$a=0==qb.c?new t:qb.b[--qb.c];$a.x=h.x;$a.y=h.y;$a.z=h.z;var Na=-$a.y,Ab=-$a.z;$a.x=-$a.x;$a.y=Na;$a.z=Ab;var bb=this.p,Ka=0==bb.c?new t:bb.b[--bb.c];Ka.x=g.x;Ka.y=g.y;Ka.z=g.z;var Zb=-Ka.y,H=-Ka.z;Ka.x=-Ka.x;Ka.y=Zb;Ka.z=H;this.rect(x,F,W,R,mb,mb,mb,mb,e);this.rect(T,na,Ja,J,c,c,c,c,e);this.rect(x,T,J,F,$a,$a,$a,$a,e);this.rect(R,W,Ja,na,h,h,h,h,e);this.rect(x,R,na,T,Ka,Ka,Ka,Ka,e);this.rect(F,J,Ja,W,g,g,g,g,e);var cb=this.p;if(null!=mb){mb.Z();if(cb.c==cb.b.length){for(var jb=Array(cb.c<<1),jc=0,kb=cb.c;jc<kb;){var xb=jc++;jb[xb]=cb.b[xb];cb.b[xb]=null}cb.b=jb}cb.b[cb.c++]=mb}var w=this.p;if(null!=$a){$a.Z();if(w.c==w.b.length){for(var V=Array(w.c<<1),ca=0,Va=w.c;ca<Va;){var cc=ca++;V[cc]=w.b[cc];w.b[cc]=null}w.b=V}w.b[w.c++]=$a}var Pa=this.p;if(null!=Ka){Ka.Z();if(Pa.c==Pa.b.length){for(var nb=Array(Pa.c<<1),rb=0,Cb=Pa.c;rb<Cb;){var sb=rb++;nb[sb]=Pa.b[sb];Pa.b[sb]=null}Pa.b=nb}Pa.b[Pa.c++]=Ka}}var ga=this.p;if(null!=x){x.Z();if(ga.c==ga.b.length){for(var Ua=Array(ga.c<<1),fb=0,Xa=ga.c;fb<Xa;){var tb=fb++;Ua[tb]=ga.b[tb];ga.b[tb]=null}ga.b=Ua}ga.b[ga.c++]=x}var Ma=this.p;if(null!=F){F.Z();if(Ma.c==Ma.b.length){for(var Gb=Array(Ma.c<<1),Ta=0,ka=Ma.c;Ta<ka;){var Hb=Ta++;Gb[Hb]=Ma.b[Hb];Ma.b[Hb]=null}Ma.b=Gb}Ma.b[Ma.c++]=F}var Ob=this.p;if(null!=R){R.Z();if(Ob.c==Ob.b.length){for(var Wa=Array(Ob.c<<1),vb=0,yb=Ob.c;vb<yb;){var zb=vb++;Wa[zb]=Ob.b[zb];Ob.b[zb]=null}Ob.b=Wa}Ob.b[Ob.c++]=R}var sc=this.p;if(null!=W){W.Z();if(sc.c==sc.b.length){for(var Db=Array(sc.c<<1),Mb=0,Jc=sc.c;Mb<Jc;){var wc=Mb++;Db[wc]=sc.b[wc];sc.b[wc]=null}sc.b=Db}sc.b[sc.c++]=W}var $b=this.p;if(null!=T){T.Z();if($b.c==$b.b.length){for(var dc=Array($b.c<<1),kc=0,Lb=$b.c;kc<Lb;){var Yb=kc++;dc[Yb]=$b.b[Yb];$b.b[Yb]=null}$b.b=dc}$b.b[$b.c++]=T}var Sb=this.p;if(null!=J){J.Z();if(Sb.c==Sb.b.length){for(var nc=Array(Sb.c<<1),ac=0,Ib=Sb.c;ac<Ib;){var Vb=ac++;nc[Vb]=Sb.b[Vb];Sb.b[Vb]=null}Sb.b=nc}Sb.b[Sb.c++]=J}var bc=this.p;if(null!=na){na.Z();if(bc.c==bc.b.length){for(var Kb=Array(bc.c<<1),Tb=0,lb=bc.c;Tb<lb;){var Nb=Tb++;Kb[Nb]=bc.b[Nb];bc.b[Nb]=null}bc.b=Kb}bc.b[bc.c++]=na}var Fb=this.p;if(null!=Ja){Ja.Z();if(Fb.c==Fb.b.length){for(var Wb=Array(Fb.c<<1),rc=0,gc=Fb.c;rc<gc;){var Zc=rc++;Wb[Zc]=Fb.b[Zc];Fb.b[Zc]=null}Fb.b=Wb}Fb.b[Fb.c++]=Ja}var Kc=this.p;if(null!=m){m.Z();if(Kc.c==Kc.b.length){for(var Qb=Array(Kc.c<<1),oc=0,uc=Kc.c;oc<uc;){var Ub=oc++;Qb[Ub]=Kc.b[Ub];Kc.b[Ub]=null}Kc.b=Qb}Kc.b[Kc.c++]=m}var Jb=this.p;if(null!=q){q.e00=1;q.e01=0;q.e02=0;q.e10=0;q.e11=1;q.e12=0;q.e20=0;q.e21=0;q.e22=1;if(Jb.eb==Jb.cb.length){for(var ic=Array(Jb.eb<<1),lc=0,Ec=Jb.eb;lc<Ec;){var hc=lc++;ic[hc]=Jb.cb[hc];Jb.cb[hc]=null}Jb.cb=ic}Jb.cb[Jb.eb++]=q}var Pb=this.p;if(null!=c){c.Z();if(Pb.c==Pb.b.length){for(var mc=Array(Pb.c<<1),ec=0,qc=Pb.c;ec<qc;){var pc=ec++;mc[pc]=Pb.b[pc];Pb.b[pc]=null}Pb.b=mc}Pb.b[Pb.c++]=c}var Xb=this.p;if(null!=h){h.Z();if(Xb.c==Xb.b.length){for(var tc=Array(Xb.c<<1),Cc=0,zc=Xb.c;Cc<zc;){var Ac=Cc++;tc[Ac]=Xb.b[Ac];Xb.b[Ac]=null}Xb.b=tc}Xb.b[Xb.c++]=h}var fc=this.p;if(null!=g){g.Z();if(fc.c==fc.b.length){for(var Lc=Array(fc.c<<1),Uc=0,Rc=fc.c;Uc<Rc;){var Mc=Uc++;Lc[Mc]=fc.b[Mc];fc.b[Mc]=null}fc.b=Lc}fc.b[fc.c++]=g}},rect:function(){},Oa:function(){},Ab:function(){},ua:function(){}};Db.prototype={qh:function(){},zh:function(){},vh:function(){},Bi:function(){},Jg:function(){},uh:function(){},th:function(){},cf:function(){}};Cd.prototype={Yd:function(a,b){b.Ie=this.C;b.Je=this.D;var e,d,c,f,h,l,g,k,m;e=this.Ja.pg;d=this.Ja.qg;c=this.Ja.rg;f=this.Ja.bj;h=this.Ja.cj;l=this.Ja.dj;g=this.Ja.Li;k=this.Ja.Mi;m=this.Ja.Ni;for(var n=Math.sqrt(this.vc.Lj*this.wc.Lj),q=Math.sqrt(this.vc.Vj*this.wc.Vj),p=this.Ja.$d,r=b.Ka=0;r<p;){var v=r++,v=this.Ja.uc[v];if(0>v.Gc)v.Mf=!0,v=v.Zd,v.$c=0,v.zc=0,v.yc=0,v.ub=0,v.Xe=0,v.Ye=0,v.Ze=0;else{v.Mf=!1;var t=b.rows[b.Ka++];t.friction=n;t.Ma=0;var x=t.Hg;x.va=e;x.wa=d;x.xa=c;x.Ba=e;x.Ca=d;x.Da=c;x.aa=v.Fb*c-v.Gb*d;x.ba=v.Gb*e-v.Eb*c;x.ca=v.Eb*d-v.Fb*e;x.ea=v.dc*c-v.ec*d;x.fa=v.ec*e-v.cc*c;x.ga=v.cc*d-v.dc*e;x=t.Bj;x.va=f;x.wa=h;x.xa=l;x.Ba=f;x.Ca=h;x.Da=l;x.aa=v.Fb*l-v.Gb*h;x.ba=v.Gb*f-v.Eb*l;x.ca=v.Eb*h-v.Fb*f;x.ea=v.dc*l-v.ec*h;x.fa=v.ec*f-v.cc*l;x.ga=v.cc*h-v.dc*f;x=t.Aj;x.va=g;x.wa=k;x.xa=m;x.Ba=g;x.Ca=k;x.Da=m;x.aa=v.Fb*m-v.Gb*k;x.ba=v.Gb*g-v.Eb*m;x.ca=v.Eb*k-v.Fb*g;x.ea=v.dc*m-v.ec*k;x.fa=v.ec*g-v.cc*m;x.ga=v.cc*k-v.dc*g;x=t.Hg;x=x.va*this.C.gb+x.wa*this.C.hb+x.xa*this.C.ib+(x.aa*this.C.kb+x.ba*this.C.lb+x.ca*this.C.mb)-(x.Ba*this.D.gb+x.Ca*this.D.hb+x.Da*this.D.ib+(x.ea*this.D.kb+x.fa*this.D.lb+x.ga*this.D.mb));t.Fa=x<-F.contactEnableBounceThreshold&&!v.Ve?-x*q:0;this.Hc==Ub.BAUMGARTE&&v.Gc>F.linearSlop&&(x=(v.Gc-F.linearSlop)*F.velocityBaumgarte*a.invDt,t.Fa<x&&(t.Fa=x));v.Ve||(x=v.Zd,x.$c=0,x.zc=0,x.yc=0,x.ub=0,x.Xe=0,x.Ye=0,x.Ze=0);t.ta=v.Zd}}},fd:function(a){a.Ie=this.C;a.Je=this.D;var b,e,d;b=this.Ja.pg;e=this.Ja.qg;d=this.Ja.rg;for(var c=this.Ja.$d,f=a.Ka=0;f<c;){var h=f++,h=this.Ja.uc[h];if(!h.Mf){var l=a.rows[a.Ka++],g=l.Hg;g.va=b;g.wa=e;g.xa=d;g.Ba=b;g.Ca=e;g.Da=d;g.aa=h.Fb*d-h.Gb*e;g.ba=h.Gb*b-h.Eb*d;g.ca=h.Eb*e-h.Fb*b;g.ea=h.dc*d-h.ec*e;g.fa=h.ec*b-h.cc*d;g.ga=h.cc*e-h.dc*b;l.Fa=h.Gc-F.linearSlop;0>l.Fa&&(l.Fa=0);l.ta=h.Zd}}},Ok:function(){this.Ja.Ol(this.fj,this.gj)},Oa:function(){return this.vc},Ab:function(){return this.wc},ua:function(){return this.Ja},ek:function(){for(var a=0,b=this.Ja.$d;a<b;){var e=a++;if(0<=this.Ja.uc[e].Gc)return!0}return!1}};tl.prototype={be:function(a){this.$c=a.$c;this.zc=a.zc;this.yc=a.yc;this.Xe=a.Xe;this.Ye=a.Ye;this.Ze=a.Ze}};Qb.prototype={Pe:function(){for(var a=0,b=this.$d;a<b;){var e=a++,e=this.uc[e];e.ef=0;e.ff=0;e.gf=0;e.hf=0;e.jf=0;e.kf=0;e.Eb=0;e.Fb=0;e.Gb=0;e.cc=0;e.dc=0;e.ec=0;e.Jd=0;e.Kd=0;e.Ld=0;e.Md=0;e.Nd=0;e.Od=0;e.Gc=0;var d=e.Zd;d.$c=0;d.zc=0;d.yc=0;d.ub=0;d.Xe=0;d.Ye=0;d.Ze=0;e.Ve=!1;e.Mf=!1;e.Ec=-1}this.$d=0},Lm:function(a){this.pg=a.x;this.qg=a.y;this.rg=a.z;var b=a.x,e=a.y;a=a.z;var d=b*b,c=e*e,f=a*a,h;d<c?d<f?(f=1/Math.sqrt(c+f),d=0,c=-a*f,f*=e,h=e*f-a*c,a=-b*f,b*=c):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d):c<f?(f=1/Math.sqrt(d+f),d=a*f,c=0,f*=-b,h=e*f,a=a*d-b*f,b=-e*d):(c=1/Math.sqrt(d+c),d=-e*c,c*=b,f=0,h=-a*c,a*=d,b=b*c-e*d);this.bj=d;this.cj=c;this.dj=f;this.Li=h;this.Mi=a;this.Ni=b},Ol:function(a,b){for(var e=0,d=this.$d;e<d;){var c=e++,c=this.uc[c],f,h,l;f=a.o*c.ef+a.f*c.ff+a.h*c.gf;h=a.i*c.ef+a.m*c.ff+a.j*c.gf;l=a.l*c.ef+a.g*c.ff+a.s*c.gf;c.Eb=f;c.Fb=h;c.Gb=l;f=b.o*c.hf+b.f*c.jf+b.h*c.kf;h=b.i*c.hf+b.m*c.jf+b.j*c.kf;l=b.l*c.hf+b.g*c.jf+b.s*c.kf;c.cc=f;c.dc=h;c.ec=l;c.Jd=c.Eb+a.v;c.Kd=c.Fb+a.A;c.Ld=c.Gb+a.B;c.Md=c.cc+b.v;c.Nd=c.dc+b.A;c.Od=c.ec+b.B;c.Gc=-((c.Jd-c.Md)*this.pg+(c.Kd-c.Nd)*this.qg+(c.Ld-c.Od)*this.rg)}},Ab:function(){var a=new t;a.x=this.pg;a.y=this.qg;a.z=this.rg;return a},Mb:function(a){a.x=this.pg;a.y=this.qg;a.z=this.rg},sc:function(){var a=new t;a.x=this.bj;a.y=this.cj;a.z=this.dj;return a},tc:function(a){a.x=this.bj;a.y=this.cj;a.z=this.dj},ua:function(){var a=new t;a.x=this.Li;a.y=this.Mi;a.z=this.Ni;return a},Oa:function(a){a.x=this.Li;a.y=this.Mi;a.z=this.Ni},oc:function(){return this.uc},nc:function(){return this.$d}};mc.prototype={Mb:function(){var a=new t;a.x=this.Jd;a.y=this.Kd;a.z=this.Ld;return a},nc:function(a){a.x=this.Jd;a.y=this.Kd;a.z=this.Ld},oc:function(){var a=new t;a.x=this.Md;a.y=this.Nd;a.z=this.Od;return a},sc:function(a){a.x=this.Md;a.y=this.Nd;a.z=this.Od},Oa:function(){return this.Gc},Ac:function(){return this.Ve},Ab:function(){return this.Zd.$c},tc:function(){return this.Zd.zc},ua:function(){return this.Zd.yc},Dc:function(){return!this.Mf}};sl.prototype={Mn:function(){for(var a=this.Ja.$d;0<=--a;){var b=this.Ja.uc[a],e,d;e=b.Jd-b.Md;d=b.Kd-b.Nd;var b=b.Ld-b.Od,c=this.Ja.pg*e+this.Ja.qg*d+this.Ja.rg*b;c>F.contactPersistenceThreshold?this.zm(a):(e+=this.Ja.pg*-c,d+=this.Ja.qg*-c,b+=this.Ja.rg*-c,e*e+d*d+b*b>F.contactPersistenceThreshold*F.contactPersistenceThreshold&&this.zm(a))}},zm:function(a){var b=--this.Ja.$d;if(a!=b){var e=this.Ja.uc[a];this.Ja.uc[a]=this.Ja.uc[b];this.Ja.uc[b]=e}a=this.Ja.uc[b];a.ef=0;a.ff=0;a.gf=0;a.hf=0;a.jf=0;a.kf=0;a.Eb=0;a.Fb=0;a.Gb=0;a.cc=0;a.dc=0;a.ec=0;a.Jd=0;a.Kd=0;a.Ld=0;a.Md=0;a.Nd=0;a.Od=0;a.Gc=0;b=a.Zd;b.$c=0;b.zc=0;b.yc=0;b.ub=0;b.Xe=0;b.Ye=0;b.Ze=0;a.Ve=!1;a.Mf=!1;a.Ec=-1},Ym:function(a,b,e){var d=this.Ja.$d;if(d==F.maxManifoldPoints){var d=this.Ja.uc[this.dn(a,b,e)],c=a.position1;d.Jd=c.x;d.Kd=c.y;d.Ld=c.z;c=a.position2;d.Md=c.x;d.Nd=c.y;d.Od=c.z;d.Eb=d.Jd-b.v;d.Fb=d.Kd-b.A;d.Gb=d.Ld-b.B;d.cc=d.Md-e.v;d.dc=d.Nd-e.A;d.ec=d.Od-e.B;var f,c=b.o*d.Eb+b.i*d.Fb+b.l*d.Gb;f=b.f*d.Eb+b.m*d.Fb+b.g*d.Gb;b=b.h*d.Eb+b.j*d.Fb+b.s*d.Gb;d.ef=c;d.ff=f;d.gf=b;b=e.o*d.cc+e.i*d.dc+e.l*d.ec;c=e.f*d.cc+e.m*d.dc+e.g*d.ec;e=e.h*d.cc+e.j*d.dc+e.s*d.ec;d.hf=b;d.jf=c;d.kf=e;d.Gc=a.depth;e=d.Zd;e.$c=0;e.zc=0;e.yc=0;e.ub=0;e.Xe=0;e.Ye=0;e.Ze=0;d.Ec=a.id;d.Ve=!1;d.Mf=!1}else d=this.Ja.uc[d],c=a.position1,d.Jd=c.x,d.Kd=c.y,d.Ld=c.z,c=a.position2,d.Md=c.x,d.Nd=c.y,d.Od=c.z,d.Eb=d.Jd-b.v,d.Fb=d.Kd-b.A,d.Gb=d.Ld-b.B,d.cc=d.Md-e.v,d.dc=d.Nd-e.A,d.ec=d.Od-e.B,c=b.o*d.Eb+b.i*d.Fb+b.l*d.Gb,f=b.f*d.Eb+b.m*d.Fb+b.g*d.Gb,b=b.h*d.Eb+b.j*d.Fb+b.s*d.Gb,d.ef=c,d.ff=f,d.gf=b,b=e.o*d.cc+e.i*d.dc+e.l*d.ec,c=e.f*d.cc+e.m*d.dc+e.g*d.ec,e=e.h*d.cc+e.j*d.dc+e.s*d.ec,d.hf=b,d.jf=c,d.kf=e,d.Gc=a.depth,e=d.Zd,e.$c=0,e.zc=0,e.yc=0,e.ub=0,e.Xe=0,e.Ye=0,e.Ze=0,d.Ec=a.id,d.Ve=!1,d.Mf=!1,this.Ja.$d++},dn:function(a,b){var e=this.Ja.uc[0],d=this.Ja.uc[1],c=this.Ja.uc[2],f=this.Ja.uc[3],h=e.Gc,l=0;d.Gc>h&&(h=d.Gc,l=1);c.Gc>h&&(h=c.Gc,l=2);f.Gc>h&&(h=f.Gc,l=3);var g,k,m,n=a.position1;g=n.x;k=n.y;m=n.z;g-=b.v;k-=b.A;m-=b.B;var q=d.Eb,p=d.Fb,r=d.Gb,v=c.Eb,t=c.Fb,x=c.Gb,A=f.Eb,u=f.Fb,C=f.Gb,K,B,D,z,F,L,I,E,M,P,U,ra,vc,ib,Da,Ia,oa,R;K=v-q;B=t-p;D=x-r;z=g-A;F=k-u;L=m-C;I=A-q;E=u-p;M=C-r;P=g-v;U=k-t;ra=m-x;vc=g-q;ib=k-p;Da=m-r;Ia=A-v;oa=u-t;R=C-x;var za,Ca,xa,Ra,Ba,sa,Sa,G,Qa;za=B*L-D*F;Ca=D*z-K*L;xa=K*F-B*z;Ra=E*ra-M*U;Ba=M*P-I*ra;sa=I*U-E*P;Sa=ib*R-Da*oa;G=Da*Ia-vc*R;Qa=vc*oa-ib*Ia;var W=za*za+Ca*Ca+xa*xa,N=Ra*Ra+Ba*Ba+sa*sa,Q=Sa*Sa+G*G+Qa*Qa,Z=W>N?W>Q?W:Q:N>Q?N:Q,ba=e.Eb,S=e.Fb,X=e.Gb,y=c.Eb,fa=c.Fb,T=c.Gb,ia=f.Eb,pa=f.Fb,wa=f.Gb,ya,ha,Y,ma,Ea,Ha,J,ta,ea,aa,Za,da,O,va,ob,na,Ga,La;ya=y-ba;ha=fa-S;Y=T-X;ma=g-ia;Ea=k-pa;Ha=m-wa;J=ia-ba;ta=pa-S;ea=wa-X;aa=g-y;Za=k-fa;da=m-T;O=g-ba;va=k-S;ob=m-X;na=ia-y;Ga=pa-fa;La=wa-T;var ab,ub,gb,ua,Aa,Ya,Ja,wb,Fa;ab=ha*Ha-Y*Ea;ub=Y*ma-ya*Ha;gb=ya*Ea-ha*ma;ua=ta*da-ea*Za;Aa=ea*aa-J*da;Ya=J*Za-ta*aa;Ja=va*La-ob*Ga;wb=ob*na-O*La;Fa=O*Ga-va*na;var ja=ab*ab+ub*ub+gb*gb,qa=ua*ua+Aa*Aa+Ya*Ya,eb=Ja*Ja+wb*wb+Fa*Fa,Oa=ja>qa?ja>eb?ja:eb:qa>eb?qa:eb,Bb=e.Eb,mb=e.Fb,hb=e.Gb,pb=d.Eb,qb=d.Fb,$a=d.Gb,Na=f.Eb,Ab=f.Fb,bb=f.Gb,Ka,Zb,H,cb,jb,jc,kb,xb,w,V,ca,Ta,Va,Pa,nb,rb,Cb,sb;Ka=pb-Bb;Zb=qb-mb;H=$a-hb;cb=g-Na;jb=k-Ab;jc=m-bb;kb=Na-Bb;xb=Ab-mb;w=bb-hb;V=g-pb;ca=k-qb;Ta=m-$a;Va=g-Bb;Pa=k-mb;nb=m-hb;rb=Na-pb;Cb=Ab-qb;sb=bb-$a;var ga,Ua,fb,Xa,tb,Ma,Gb,Wa,ka;ga=Zb*jc-H*jb;Ua=H*cb-Ka*jc;fb=Ka*jb-Zb*cb;Xa=xb*Ta-w*ca;tb=w*V-kb*Ta;Ma=kb*ca-xb*V;Gb=Pa*sb-nb*Cb;Wa=nb*rb-Va*sb;ka=Va*Cb-Pa*rb;var Hb=ga*ga+Ua*Ua+fb*fb,Ob=Xa*Xa+tb*tb+Ma*Ma,vb=Gb*Gb+Wa*Wa+ka*ka,yb=Hb>Ob?Hb>vb?Hb:vb:Ob>vb?Ob:vb,zb=e.Eb,Db=e.Fb,sc=e.Gb,Fb=d.Eb,Jb=d.Fb,Mb=d.Gb,wc=c.Eb,$b=c.Fb,dc=c.Gb,kc,Lb,Yb,Sb,nc,ac,Ib,Vb,bc,Kb,Tb,lb,Nb,Pb,Ub,rc,gc,Wb;kc=Fb-zb;Lb=Jb-Db;Yb=Mb-sc;Sb=g-wc;nc=k-$b;ac=m-dc;Ib=wc-zb;Vb=$b-Db;bc=dc-sc;Kb=g-Fb;Tb=k-Jb;lb=m-Mb;Nb=g-zb;Pb=k-Db;Ub=m-sc;rc=wc-Fb;gc=$b-Jb;Wb=dc-Mb;var Qb,Xb,oc,uc,fc,hc,ic,lc,mc;Qb=Lb*ac-Yb*nc;Xb=Yb*Sb-kc*ac;oc=kc*nc-Lb*Sb;uc=Vb*lb-bc*Tb;fc=bc*Kb-Ib*lb;hc=Ib*Tb-Vb*Kb;ic=Pb*Wb-Ub*gc;lc=Ub*rc-Nb*Wb;mc=Nb*gc-Pb*rc;var ec=Qb*Qb+Xb*Xb+oc*oc,pc=uc*uc+fc*fc+hc*hc,qc=ic*ic+lc*lc+mc*mc,Ac=ec>pc?ec>qc?ec:qc:pc>qc?pc:qc,tc=Z,zc=0;if(Oa>tc&&1!=l||!l)tc=Oa,zc=1;yb>tc&&2!=l&&(tc=yb,zc=2);Ac>tc&&3!=l&&(tc=Ac,zc=3);return zc},gn:function(a,b,e){for(var d=F.contactPersistenceThreshold*F.contactPersistenceThreshold,c=-1,f=0,h=this.Ja.$d;f<h;){var l=f++,g=this.Ja.uc[l],k,m,n,q,p,r;p=a.position1;k=p.x;m=p.y;n=p.z;r=a.position2;q=r.x;p=r.y;r=r.z;k-=b.v;m-=b.A;n-=b.B;q-=e.v;p-=e.A;r-=e.B;k=g.Eb-k;m=g.Fb-m;n=g.Gb-n;q=g.cc-q;p=g.dc-p;g=g.ec-r;r=k*k+m*m+n*n;g=q*q+p*p+g*g;g=r<g?r:g;g<d&&(d=g,c=l)}return c},Vn:function(a,b,e){this.ul=this.Ja.$d;for(var d=0,c=this.ul;d<c;){var f=d++,h=this.vl[f],f=this.Ja.uc[f];h.ef=f.ef;h.ff=f.ff;h.gf=f.gf;h.hf=f.hf;h.jf=f.jf;h.kf=f.kf;h.Eb=f.Eb;h.Fb=f.Fb;h.Gb=f.Gb;h.cc=f.cc;h.dc=f.dc;h.ec=f.ec;h.Jd=f.Jd;h.Kd=f.Kd;h.Ld=f.Ld;h.Md=f.Md;h.Nd=f.Nd;h.Od=f.Od;h.Gc=f.Gc;h.Zd.be(f.Zd);h.Ec=f.Ec;h.Ve=f.Ve;h.Mf=!1}d=a.numPoints;this.Ja.$d=d;for(c=0;c<d;){var f=c++,h=this.Ja.uc[f],f=a.points[f],l=f.position1;h.Jd=l.x;h.Kd=l.y;h.Ld=l.z;l=f.position2;h.Md=l.x;h.Nd=l.y;h.Od=l.z;h.Eb=h.Jd-b.v;h.Fb=h.Kd-b.A;h.Gb=h.Ld-b.B;h.cc=h.Md-e.v;h.dc=h.Nd-e.A;h.ec=h.Od-e.B;var g,k,l=b.o*h.Eb+b.i*h.Fb+b.l*h.Gb;g=b.f*h.Eb+b.m*h.Fb+b.g*h.Gb;k=b.h*h.Eb+b.j*h.Fb+b.s*h.Gb;h.ef=l;h.ff=g;h.gf=k;l=e.o*h.cc+e.i*h.dc+e.l*h.ec;g=e.f*h.cc+e.m*h.dc+e.g*h.ec;k=e.h*h.cc+e.j*h.dc+e.s*h.ec;h.hf=l;h.jf=g;h.kf=k;h.Gc=f.depth;l=h.Zd;l.$c=0;l.zc=0;l.yc=0;l.ub=0;l.Xe=0;l.Ye=0;l.Ze=0;h.Ec=f.id;h.Ve=!1;h.Mf=!1;f=0;for(l=this.ul;f<l;)if(g=f++,g=this.vl[g],h.Ec==g.Ec){h.Zd.be(g.Zd);h.Ve=!0;break}}},En:function(a,b,e){this.Ja.Ol(b,e);for(var d=0,c=this.Ja.$d;d<c;){var f=d++;this.Ja.uc[f].Ve=!0}a=a.points[0];d=this.gn(a,b,e);-1==d?this.Ym(a,b,e):(d=this.Ja.uc[d],c=a.position1,d.Jd=c.x,d.Kd=c.y,d.Ld=c.z,c=a.position2,d.Md=c.x,d.Nd=c.y,d.Od=c.z,d.Eb=d.Jd-b.v,d.Fb=d.Kd-b.A,d.Gb=d.Ld-b.B,d.cc=d.Md-e.v,d.dc=d.Nd-e.A,d.ec=d.Od-e.B,c=b.o*d.Eb+b.i*d.Fb+b.l*d.Gb,f=b.f*d.Eb+b.m*d.Fb+b.g*d.Gb,b=b.h*d.Eb+b.j*d.Fb+b.s*d.Gb,d.ef=c,d.ff=f,d.gf=b,b=e.o*d.cc+e.i*d.dc+e.l*d.ec,c=e.f*d.cc+e.m*d.dc+e.g*d.ec,e=e.h*d.cc+e.j*d.dc+e.s*d.ec,d.hf=b,d.jf=c,d.kf=e,d.Gc=a.depth);this.Mn()}};Fe.prototype={Cm:function(){this.xc=0;if(0!=this.va||0!=this.wa||0!=this.xa||0!=this.Ba||0!=this.Ca||0!=this.Da)this.xc|=1;if(0!=this.aa||0!=this.ba||0!=this.ca||0!=this.ea||0!=this.fa||0!=this.ga)this.xc|=2}};U.prototype={gd:function(){var a=this.C.a,b=this.D.a,e,d,c;e=a.o*this.Ui+a.f*this.Vi+a.h*this.Wi;d=a.i*this.Ui+a.m*this.Vi+a.j*this.Wi;c=a.l*this.Ui+a.g*this.Vi+a.s*this.Wi;this.Sb=e;this.Tb=d;this.Ub=c;e=b.o*this.Xi+b.f*this.Yi+b.h*this.Zi;d=b.i*this.Xi+b.m*this.Yi+b.j*this.Zi;c=b.l*this.Xi+b.g*this.Yi+b.s*this.Zi;this.Vb=e;this.Wb=d;this.Xb=c;this.Gf=this.Sb+a.v;this.Hf=this.Tb+a.A;this.If=this.Ub+a.B;this.Jf=this.Vb+b.v;this.Kf=this.Wb+b.A;this.Lf=this.Xb+b.B;e=a.o*this.qa+a.f*this.ra+a.h*this.sa;d=a.i*this.qa+a.m*this.ra+a.j*this.sa;c=a.l*this.qa+a.g*this.ra+a.s*this.sa;this.vb=e;this.wb=d;this.xb=c;e=a.o*this.Bb+a.f*this.Cb+a.h*this.Db;d=a.i*this.Bb+a.m*this.Cb+a.j*this.Db;c=a.l*this.Bb+a.g*this.Cb+a.s*this.Db;this.Ae=e;this.Be=d;this.Ce=c;e=a.o*this.jc+a.f*this.kc+a.h*this.lc;d=a.i*this.jc+a.m*this.kc+a.j*this.lc;a=a.l*this.jc+a.g*this.kc+a.s*this.lc;this.Ah=e;this.Bh=d;this.Ch=a;a=b.o*this.nb+b.f*this.ob+b.h*this.pb;e=b.i*this.nb+b.m*this.ob+b.j*this.pb;d=b.l*this.nb+b.g*this.ob+b.s*this.pb;this.$b=a;this.ac=e;this.bc=d;a=b.o*this.$g+b.f*this.ah+b.h*this.bh;e=b.i*this.$g+b.m*this.ah+b.j*this.bh;d=b.l*this.$g+b.g*this.ah+b.s*this.bh;this.qe=a;this.re=e;this.se=d;a=b.o*this.Kc+b.f*this.Lc+b.h*this.Mc;e=b.i*this.Kc+b.m*this.Lc+b.j*this.Mc;b=b.l*this.Kc+b.g*this.Lc+b.s*this.Mc;this.Vg=a;this.Wg=e;this.Xg=b},Yd:function(a,b){b.Ie=this.C;b.Je=this.D;b.Ka=0},fd:function(a){a.Ie=this.C;a.Je=this.D;a.Ka=0},Gl:function(){var a=this.Fi*this.Fi+this.Gi*this.Gi+this.Hi*this.Hi,b=this.Ii*this.Ii+this.Ji*this.Ji+this.Ki*this.Ki;0<this.Oi&&a>this.Oi*this.Oi?this.mc.yl(this):0<this.Pi&&b>this.Pi*this.Pi&&this.mc.yl(this)},pe:function(){return this.C},Me:function(){return this.D},Ng:function(){return this.Lb},Oa:function(){var a=new t;a.x=this.Gf;a.y=this.Hf;a.z=this.If;return a},Mb:function(){var a=new t;a.x=this.Jf;a.y=this.Kf;a.z=this.Lf;return a},Ab:function(a){a.x=this.Gf;a.y=this.Hf;a.z=this.If},nc:function(a){a.x=this.Jf;a.y=this.Kf;a.z=this.Lf},ke:function(){var a=new t;a.x=this.Ui;a.y=this.Vi;a.z=this.Wi;return a},me:function(){var a=new t;a.x=this.Xi;a.y=this.Yi;a.z=this.Zi;return a},le:function(a){a.x=this.Ui;a.y=this.Vi;a.z=this.Wi},ne:function(a){a.x=this.Xi;a.y=this.Yi;a.z=this.Zi},Dc:function(){var a=new M,b,e,d,c,f,h,l,g,k;b=this.vb;e=this.Ae;d=this.Ah;c=this.wb;f=this.Be;h=this.Bh;l=this.xb;g=this.Ce;k=this.Ch;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},dd:function(){var a=new M,b,e,d,c,f,h,l,g,k;b=this.$b;e=this.qe;d=this.Vg;c=this.ac;f=this.re;h=this.Wg;l=this.bc;g=this.se;k=this.Xg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k;return a},Jc:function(a){var b,e,d,c,f,h,l,g,k;b=this.vb;e=this.Ae;d=this.Ah;c=this.wb;f=this.Be;h=this.Bh;l=this.xb;g=this.Ce;k=this.Ch;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},ed:function(a){var b,e,d,c,f,h,l,g,k;b=this.$b;e=this.qe;d=this.Vg;c=this.ac;f=this.re;h=this.Wg;l=this.bc;g=this.se;k=this.Xg;a.e00=b;a.e01=e;a.e02=d;a.e10=c;a.e11=f;a.e12=h;a.e20=l;a.e21=g;a.e22=k},ua:function(){return this.mk},Og:function(a){this.mk=a},yd:function(){return this.Oi},Pg:function(a){this.Oi=a},Wd:function(){return this.Pi},Qg:function(a){this.Pi=a},oe:function(){return this.Hc},Rg:function(a){switch(a){case 0:case 1:case 2:break;default:throw Error("invalid position correction algorithm id: "+a);}this.Hc=a},oc:function(){var a=new t;a.x=this.Fi;a.y=this.Gi;a.z=this.Hi;return a},sc:function(a){a.x=this.Fi;a.y=this.Gi;a.z=this.Hi},tc:function(){var a=new t;a.x=this.Ii;a.y=this.Ji;a.z=this.Ki;return a},Ac:function(a){a.x=this.Ii;a.y=this.Ji;a.z=this.Ki},Ef:function(){return this.ia},Ne:function(){return this.M}};Mb.ua=U;Mb.prototype=vb(U.prototype,{Td:function(a,b,e){var d=e?1:this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorY*d,d=this.angularErrorZ*d,l,g,k,m,n,q,p,r,v,t,x,A;l=-this.Ub;g=this.Tb;k=this.Ub;m=-this.Sb;n=-this.Tb;q=this.Sb;p=-this.Xb;r=this.Wb;v=this.Xb;t=-this.Vb;x=-this.Wb;A=this.Vb;var u,C=1/(this.C.ab+this.D.ab),K=this.da.ad,B=this.da.bd,D=this.da.cd,z=(this.C.P*K+this.C.R*B+this.C.S*D)*K+(this.C.T*K+this.C.U*B+this.C.V*D)*B+(this.C.W*K+this.C.X*B+this.C.Y*D)*D;u=(this.D.P*K+this.D.R*B+this.D.S*D)*K+(this.D.T*K+this.D.U*B+this.D.V*D)*B+(this.D.W*K+this.D.X*B+this.D.Y*D)*D;if(0<z){var E=K*this.Sb+B*this.Tb+D*this.Ub,E=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-E*E;0<E&&(z=0<this.C.ab?1/(1/z+this.C.Nc*E):0)}0<u&&(K=K*this.Vb+B*this.Wb+D*this.Xb,K=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-K*K,0<K&&(u=0<this.D.ab?1/(1/u+this.D.Nc*K):0));z=z+u?1/(z+u):0;if(0>=this.Rk.frequency||!e){u=this.Pb[0];K=a.rows[a.Ka++];B=K.Aa;B.va=0;B.wa=0;B.xa=0;B.Ba=0;B.Ca=0;B.Da=0;B.aa=0;B.ba=0;B.ca=0;B.ea=0;B.fa=0;B.ga=0;K.Fa=0;K.Ma=0;K.Ia=0;K.Ha=0;K.motorSpeed=0;K.fb=0;K.ta=null;K.ta=u;u=K;var K=this.Yf,E=this.Qk,D=this.Rk,L,B=F.linearSlop;if(e)D=0,L=1;else{if(0<D.frequency){var B=0,I=6.28318530717958*D.frequency,M=D.dampingRatio;M<F.minSpringDamperDampingRatio&&(M=F.minSpringDamperDampingRatio);L=b.dt;M=2*M*I;I*=I;D.useSymplecticEuler?(D=1/(L*M),L=I/M):(D=1/(L*(L*I+M)),L=I/(L*I+M))}else D=0,L=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<E.motorForce?(u.motorSpeed=E.motorSpeed,u.fb=E.motorForce*b.dt):(u.motorSpeed=0,u.fb=0)}var M=E.lowerLimit,P=E.upperLimit;M>P?K=I=E=0:M==P?(E=-1/0,I=1/0,K-=M):K<M?(E=-1/0,I=0,K=K-M+B,0<K&&(K=0)):K>P?(E=0,I=1/0,K=K-P-B,0>K&&(K=0)):K=I=E=0;u.Ia=E;u.Ha=I;u.Ma=D*(C?1/C:0);u.Fa=K*L;u=u.Aa;u.va=this.da.ad;u.wa=this.da.bd;u.xa=this.da.cd;u.Ba=this.da.ad;u.Ca=this.da.bd;u.Da=this.da.cd;u.aa=-0;u.ba=-l;u.ca=-g;u.ea=-0;u.fa=-p;u.ga=-r}u=this.Pb[1];l=a.rows[a.Ka++];g=l.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.aa=0;g.ba=0;g.ca=0;g.ea=0;g.fa=0;g.ga=0;l.Fa=0;l.Ma=0;l.Ia=0;l.Ha=0;l.motorSpeed=0;l.fb=0;l.ta=u;u=l;u.Fa=c;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=this.da.Qd;u.wa=this.da.Rd;u.xa=this.da.Sd;u.Ba=this.da.Qd;u.Ca=this.da.Rd;u.Da=this.da.Sd;u.aa=-k;u.ba=-0;u.ca=-m;u.ea=-v;u.fa=-0;u.ga=-t;c=this.Pb[2];u=a.rows[a.Ka++];k=u.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;u.Fa=0;u.Ma=0;u.Ia=0;u.Ha=0;u.motorSpeed=0;u.fb=0;u.ta=c;u.Fa=f;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=this.da.he;u.wa=this.da.ie;u.xa=this.da.je;u.Ba=this.da.he;u.Ca=this.da.ie;u.Da=this.da.je;u.aa=-n;u.ba=-q;u.ca=-0;u.ea=-x;u.fa=-A;u.ga=-0;if(0>=this.Kk.frequency||!e)f=this.Pb[3],n=a.rows[a.Ka++],q=n.Aa,q.va=0,q.wa=0,q.xa=0,q.Ba=0,q.Ca=0,q.Da=0,q.aa=0,q.ba=0,q.ca=0,q.ea=0,q.fa=0,q.ga=0,n.Fa=0,n.Ma=0,n.Ia=0,n.Ha=0,n.motorSpeed=0,n.fb=0,n.ta=f,u=n,f=this.angle,q=this.Jk,x=this.Kk,n=F.angularSlop,e?(e=0,x=1):(0<x.frequency?(n=0,e=6.28318530717958*x.frequency,c=x.dampingRatio,c<F.minSpringDamperDampingRatio&&(c=F.minSpringDamperDampingRatio),A=b.dt,c=2*c*e,k=e*e,x.useSymplecticEuler?(e=1/(A*c),x=k/c):(e=1/(A*(A*k+c)),x=k/(A*k+c))):(e=0,x=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<q.motorTorque?(u.motorSpeed=q.motorSpeed,u.fb=q.motorTorque*b.dt):(u.motorSpeed=0,u.fb=0)),b=q.lowerLimit,q=q.upperLimit,A=.5*(b+q),f=((f-A+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+A,b>q?b=c=A=0:b==q?(A=-1/0,c=1/0,b=f-b):f<b?(A=-1/0,c=0,b=f-b+n,0<b&&(b=0)):f>q?(A=0,c=1/0,b=f-q-n,0>b&&(b=0)):b=c=A=0,u.Ia=A,u.Ha=c,u.Ma=e*(z?1/z:0),u.Fa=b*x,u=u.Aa,u.aa=this.da.ad,u.ba=this.da.bd,u.ca=this.da.cd,u.ea=this.da.ad,u.fa=this.da.bd,u.ga=this.da.cd;b=this.Pb[4];z=a.rows[a.Ka++];e=z.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.aa=0;e.ba=0;e.ca=0;e.ea=0;e.fa=0;e.ga=0;z.Fa=0;z.Ma=0;z.Ia=0;z.Ha=0;z.motorSpeed=0;z.fb=0;z.ta=b;u=z;u.Fa=h;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.aa=this.da.Qd;u.ba=this.da.Rd;u.ca=this.da.Sd;u.ea=this.da.Qd;u.fa=this.da.Rd;u.ga=this.da.Sd;h=this.Pb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.aa=0;b.ba=0;b.ca=0;b.ea=0;b.fa=0;b.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=h;u=a;u.Fa=d;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.aa=this.da.he;u.ba=this.da.ie;u.ca=this.da.je;u.ea=this.da.he;u.fa=this.da.ie;u.ga=this.da.je},gd:function(){U.prototype.gd.call(this);var a=this.da,b=a.$.C.ab,e=a.$.D.ab,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u,C,K,B,D,z,F,L,I,E,M,P,db,ra,za=a.$.vb*a.$.$b+a.$.wb*a.$.ac+a.$.xb*a.$.bc;if(-1.000001<za&&-.999999>za){var ib,Da,Ia,oa=a.$.vb,R=a.$.wb,Ga=a.$.xb,Ca=oa*oa,xa=R*R,Ra=Ga*Ga,Ba;Ca<xa?Ca<Ra?(Ba=1/Math.sqrt(xa+Ra),ib=0,Da=Ga*Ba,Ia=-R*Ba):(Ba=1/Math.sqrt(Ca+xa),ib=R*Ba,Da=-oa*Ba,Ia=0):xa<Ra?(Ba=1/Math.sqrt(Ra+Ca),ib=-Ga*Ba,Da=0,Ia=oa*Ba):(Ba=1/Math.sqrt(Ca+xa),ib=R*Ba,Da=-oa*Ba,Ia=0);d=ib;c=Da;f=Ia;h=0}else{var sa,Sa,G;sa=a.$.wb*a.$.bc-a.$.xb*a.$.ac;Sa=a.$.xb*a.$.$b-a.$.vb*a.$.bc;G=a.$.vb*a.$.ac-a.$.wb*a.$.$b;var Qa=Math.sqrt(.5*(1+za)),za=.5/Qa;sa*=za;Sa*=za;G*=za;d=sa;c=Sa;f=G;h=Qa}var W,N,Q,Z,ba,S,X,y;Q=N=W=0;Z=1;ba=d;S=c;X=f;y=h;var fa=W*ba+N*S+Q*X+Z*y;0>fa&&(fa=-fa,ba=-ba,S=-S,X=-X,y=-y);if(.999999<fa){var T,ia,pa,wa;T=ba-W;ia=S-N;pa=X-Q;wa=y-Z;ba=W+b/(b+e)*T;S=N+b/(b+e)*ia;X=Q+b/(b+e)*pa;y=Z+b/(b+e)*wa;var ya=ba*ba+S*S+X*X+y*y;1E-32<ya&&(ya=1/Math.sqrt(ya));l=ba*ya;g=S*ya;k=X*ya;m=y*ya}else{var ha=b/(b+e)*Math.acos(fa);ba+=W*-fa;S+=N*-fa;X+=Q*-fa;y+=Z*-fa;var Y=ba*ba+S*S+X*X+y*y;1E-32<Y&&(Y=1/Math.sqrt(Y));ba*=Y;S*=Y;X*=Y;y*=Y;var ma=Math.sin(ha),Ea=Math.cos(ha);W*=Ea;N*=Ea;Q*=Ea;Z*=Ea;l=W+ba*ma;g=N+S*ma;k=Q+X*ma;m=Z+y*ma}var Ha=l,J=g,ta=k,ea=m,aa=2*Ha,Za=2*J,da=2*ta,O=Ha*aa,va=J*Za,ob=ta*da,na=Ha*Za,Na=J*da,La=Ha*da,ab=ea*aa,ub=ea*Za,gb=ea*da;n=1-va-ob;q=na-gb;p=La+ub;r=na+gb;v=1-O-ob;t=Na-ab;x=La-ub;A=Na+ab;u=1-O-va;var ua,Aa;ua=n*a.$.vb+q*a.$.wb+p*a.$.xb;Aa=r*a.$.vb+v*a.$.wb+t*a.$.xb;C=x*a.$.vb+A*a.$.wb+u*a.$.xb;I=a.ad;E=a.bd;M=a.cd;P=a.Qd;db=a.Rd;ra=a.Sd;var Ya=I*ua+E*Aa+M*C;if(-1.000001<Ya&&-.999999>Ya){var Ja,wb,Fa,ja=I*I,qa=E*E,eb=M*M,Oa;ja<qa?ja<eb?(Oa=1/Math.sqrt(qa+eb),Ja=0,wb=M*Oa,Fa=-E*Oa):(Oa=1/Math.sqrt(ja+qa),Ja=E*Oa,wb=-I*Oa,Fa=0):qa<eb?(Oa=1/Math.sqrt(eb+ja),Ja=-M*Oa,wb=0,Fa=I*Oa):(Oa=1/Math.sqrt(ja+qa),Ja=E*Oa,wb=-I*Oa,Fa=0);l=Ja;g=wb;k=Fa;m=0}else{var Bb,mb,hb;Bb=E*C-M*Aa;mb=M*ua-I*C;hb=I*Aa-E*ua;var pb=Math.sqrt(.5*(1+Ya)),Ya=.5/pb;Bb*=Ya;mb*=Ya;hb*=Ya;l=Bb;g=mb;k=hb;m=pb}var qb=l,$a=g,Ta=k,Ab=m,bb=2*qb,Ka=2*$a,Zb=2*Ta,H=qb*bb,cb=$a*Ka,jb=Ta*Zb,Va=qb*Ka,kb=$a*Zb,xb=qb*Zb,w=Ab*bb,V=Ab*Ka,ca=Ab*Zb;n=1-cb-jb;q=Va-ca;p=xb+V;r=Va+ca;v=1-H-jb;t=kb-w;x=xb-V;A=kb+w;u=1-H-cb;var Wa,cc,Pa;Wa=n*P+q*db+p*ra;cc=r*P+v*db+t*ra;Pa=x*P+A*db+u*ra;K=Wa;B=cc;D=Pa;z=Aa*D-C*B;F=C*K-ua*D;L=ua*B-Aa*K;if(1E-6<z*z+F*F+L*L){var nb=z*z+F*F+L*L;0<nb&&(nb=1/Math.sqrt(nb));z*=nb;F*=nb;L*=nb}else{var rb=ua*ua,Cb=Aa*Aa,sb=C*C,ga;rb<Cb?rb<sb?(ga=1/Math.sqrt(Cb+sb),z=0,F=C*ga,L=-Aa*ga):(ga=1/Math.sqrt(rb+Cb),z=Aa*ga,F=-ua*ga,L=0):Cb<sb?(ga=1/Math.sqrt(sb+rb),z=-C*ga,F=0,L=ua*ga):(ga=1/Math.sqrt(rb+Cb),z=Aa*ga,F=-ua*ga,L=0)}K=F*C-L*Aa;B=L*ua-z*C;D=z*Aa-F*ua;a.ad=ua;a.bd=Aa;a.cd=C;a.Qd=K;a.Rd=B;a.Sd=D;a.he=z;a.ie=F;a.je=L;var Ua,fb,Xa;Ua=this.wb*this.bc-this.xb*this.ac;fb=this.xb*this.$b-this.vb*this.bc;Xa=this.vb*this.ac-this.wb*this.$b;var tb=this.vb*this.$b+this.wb*this.ac+this.xb*this.bc,Ma=-1>=tb?3.14159265358979:1<=tb?0:Math.acos(tb),Gb=Ua*Ua+fb*fb+Xa*Xa;0<Gb&&(Gb=1/Math.sqrt(Gb));Ua*=Gb;fb*=Gb;Xa*=Gb;Ua*=Ma;fb*=Ma;Xa*=Ma;this.angularErrorY=Ua*this.da.Qd+fb*this.da.Rd+Xa*this.da.Sd;this.angularErrorZ=Ua*this.da.he+fb*this.da.ie+Xa*this.da.je;var vb,ka,Hb;vb=this.Be*this.se-this.Ce*this.re;ka=this.Ce*this.qe-this.Ae*this.se;Hb=this.Ae*this.re-this.Be*this.qe;tb=this.Ae*this.qe+this.Be*this.re+this.Ce*this.se;this.angle=-1>=tb?3.14159265358979:1<=tb?0:Math.acos(tb);0>vb*this.da.ad+ka*this.da.bd+Hb*this.da.cd&&(this.angle=-this.angle);var Ob,yb,zb;Ob=this.Jf-this.Gf;yb=this.Kf-this.Hf;zb=this.Lf-this.If;this.Yf=Ob*this.da.ad+yb*this.da.bd+zb*this.da.cd;this.linearErrorY=Ob*this.da.Qd+yb*this.da.Rd+zb*this.da.Sd;this.linearErrorZ=Ob*this.da.he+yb*this.da.ie+zb*this.da.je},Yd:function(a,b){U.prototype.Yd.call(this,a,b);this.Td(b,a,!1)},fd:function(a){U.prototype.fd.call(this,a);this.Td(a,null,!0)},yg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Ag:function(){var a=new t;a.x=this.$b;a.y=this.ac;a.z=this.bc;return a},zg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Bg:function(a){a.x=this.$b;a.y=this.ac;a.z=this.bc},Cg:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Eg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Dg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Fg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},yn:function(){return this.Rk},qn:function(){return this.Kk},xn:function(){return this.Qk},pn:function(){return this.Jk},cl:function(){return this.angle},fl:function(){return this.Yf}});Lc.prototype={Zg:function(a,b,e){this.rigidBody1=a;this.rigidBody2=b;var d=this.rigidBody1,c,f,h;c=e.x;f=e.y;h=e.z;c-=d.a.v;f-=d.a.A;h-=d.a.B;a=d.a.o*c+d.a.i*f+d.a.l*h;b=d.a.f*c+d.a.m*f+d.a.g*h;d=d.a.h*c+d.a.j*f+d.a.s*h;c=this.localAnchor1;c.x=a;c.y=b;c.z=d;b=this.rigidBody2;d=e.x;c=e.y;f=e.z;d-=b.a.v;c-=b.a.A;f-=b.a.B;e=b.a.o*d+b.a.i*c+b.a.l*f;a=b.a.f*d+b.a.m*c+b.a.g*f;b=b.a.h*d+b.a.j*c+b.a.s*f;d=this.localAnchor2;d.x=e;d.y=a;d.z=b}};bg.ua=Lc;bg.prototype=vb(Lc.prototype,{za:function(a,b,e,d){this.Zg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this}});bd.prototype={ua:function(){return this.Ck},Ab:function(){return this.Oc},Mb:function(){return this.ia},Oa:function(){return this.M}};Pb.ua=U;Pb.prototype=vb(U.prototype,{Td:function(a,b,e){var d=e?1:this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c=this.linearErrorY*d,f=this.linearErrorZ*d,h=this.angularErrorX*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,x,A,u;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;q=-this.Tb;p=this.Sb;r=-this.Xb;v=this.Wb;t=this.Xb;x=-this.Vb;A=-this.Wb;u=this.Vb;var C,K;K=1/(this.C.ab+this.D.ab);if(0>=this.xe.frequency||!e){C=this.Pb[0];var B=a.rows[a.Ka++],D=B.Aa;D.va=0;D.wa=0;D.xa=0;D.Ba=0;D.Ca=0;D.Da=0;D.aa=0;D.ba=0;D.ca=0;D.ea=0;D.fa=0;D.ga=0;B.Fa=0;B.Ma=0;B.Ia=0;B.Ha=0;B.motorSpeed=0;B.fb=0;B.ta=C;C=B;var B=this.Yf,z=this.Kh,E=this.xe,D=F.linearSlop;if(e)E=0,e=1;else{if(0<E.frequency){var D=0,L=6.28318530717958*E.frequency,I=E.dampingRatio;I<F.minSpringDamperDampingRatio&&(I=F.minSpringDamperDampingRatio);e=b.dt;I=2*I*L;L*=L;E.useSymplecticEuler?(E=1/(e*I),e=L/I):(E=1/(e*(e*L+I)),e=L/(e*L+I))}else E=0,e=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<z.motorForce?(C.motorSpeed=z.motorSpeed,C.fb=z.motorForce*b.dt):(C.motorSpeed=0,C.fb=0)}b=z.lowerLimit;L=z.upperLimit;b>L?b=I=z=0:b==L?(z=-1/0,I=1/0,b=B-b):B<b?(z=-1/0,I=0,b=B-b+D,0<b&&(b=0)):B>L?(z=0,I=1/0,b=B-L-D,0>b&&(b=0)):b=I=z=0;C.Ia=z;C.Ha=I;C.Ma=E*(K?1/K:0);C.Fa=b*e;K=C.Aa;K.va=this.da.ad;K.wa=this.da.bd;K.xa=this.da.cd;K.Ba=this.da.ad;K.Ca=this.da.bd;K.Da=this.da.cd;K.aa=-0;K.ba=-g;K.ca=-k;K.ea=-0;K.fa=-r;K.ga=-v}g=this.Pb[1];k=a.rows[a.Ka++];r=k.Aa;r.va=0;r.wa=0;r.xa=0;r.Ba=0;r.Ca=0;r.Da=0;r.aa=0;r.ba=0;r.ca=0;r.ea=0;r.fa=0;r.ga=0;k.Fa=0;k.Ma=0;k.Ia=0;k.Ha=0;k.motorSpeed=0;k.fb=0;k.ta=g;C=k;C.Fa=c;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;K=C.Aa;K.va=this.da.Qd;K.wa=this.da.Rd;K.xa=this.da.Sd;K.Ba=this.da.Qd;K.Ca=this.da.Rd;K.Da=this.da.Sd;K.aa=-m;K.ba=-0;K.ca=-n;K.ea=-t;K.fa=-0;K.ga=-x;c=this.Pb[2];m=a.rows[a.Ka++];n=m.Aa;n.va=0;n.wa=0;n.xa=0;n.Ba=0;n.Ca=0;n.Da=0;n.aa=0;n.ba=0;n.ca=0;n.ea=0;n.fa=0;n.ga=0;m.Fa=0;m.Ma=0;m.Ia=0;m.Ha=0;m.motorSpeed=0;m.fb=0;m.ta=c;C=m;C.Fa=f;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;K=C.Aa;K.va=this.da.he;K.wa=this.da.ie;K.xa=this.da.je;K.Ba=this.da.he;K.Ca=this.da.ie;K.Da=this.da.je;K.aa=-q;K.ba=-p;K.ca=-0;K.ea=-A;K.fa=-u;K.ga=-0;f=this.Pb[3];q=a.rows[a.Ka++];p=q.Aa;p.va=0;p.wa=0;p.xa=0;p.Ba=0;p.Ca=0;p.Da=0;p.aa=0;p.ba=0;p.ca=0;p.ea=0;p.fa=0;p.ga=0;q.Fa=0;q.Ma=0;q.Ia=0;q.Ha=0;q.motorSpeed=0;q.fb=0;q.ta=f;C=q;C.Fa=h;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;K=C.Aa;K.aa=1;K.ba=0;K.ca=0;K.ea=1;K.fa=0;K.ga=0;h=this.Pb[4];f=a.rows[a.Ka++];q=f.Aa;q.va=0;q.wa=0;q.xa=0;q.Ba=0;q.Ca=0;q.Da=0;q.aa=0;q.ba=0;q.ca=0;q.ea=0;q.fa=0;q.ga=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.fb=0;f.ta=h;C=f;C.Fa=l;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;K=C.Aa;K.aa=0;K.ba=1;K.ca=0;K.ea=0;K.fa=1;K.ga=0;l=this.Pb[5];a=a.rows[a.Ka++];h=a.Aa;h.va=0;h.wa=0;h.xa=0;h.Ba=0;h.Ca=0;h.Da=0;h.aa=0;h.ba=0;h.ca=0;h.ea=0;h.fa=0;h.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=l;C=a;C.Fa=d;C.Ma=0;C.Ia=-1/0;C.Ha=1/0;K=C.Aa;K.aa=0;K.ba=0;K.ca=1;K.ea=0;K.fa=0;K.ga=1},gd:function(){U.prototype.gd.call(this);var a=this.da,b=a.$.C.ab,e=a.$.D.ab,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u,C,K,B,D,z,F,L,I,E,M,P,db,ra,za=a.$.vb*a.$.$b+a.$.wb*a.$.ac+a.$.xb*a.$.bc;if(-1.000001<za&&-.999999>za){var ib,Da,Ia,oa=a.$.vb,R=a.$.wb,Ga=a.$.xb,Ca=oa*oa,xa=R*R,Ra=Ga*Ga,Ba;Ca<xa?Ca<Ra?(Ba=1/Math.sqrt(xa+Ra),ib=0,Da=Ga*Ba,Ia=-R*Ba):(Ba=1/Math.sqrt(Ca+xa),ib=R*Ba,Da=-oa*Ba,Ia=0):xa<Ra?(Ba=1/Math.sqrt(Ra+Ca),ib=-Ga*Ba,Da=0,Ia=oa*Ba):(Ba=1/Math.sqrt(Ca+xa),ib=R*Ba,Da=-oa*Ba,Ia=0);d=ib;c=Da;f=Ia;h=0}else{var sa,Sa,G;sa=a.$.wb*a.$.bc-a.$.xb*a.$.ac;Sa=a.$.xb*a.$.$b-a.$.vb*a.$.bc;G=a.$.vb*a.$.ac-a.$.wb*a.$.$b;var Qa=Math.sqrt(.5*(1+za)),za=.5/Qa;sa*=za;Sa*=za;G*=za;d=sa;c=Sa;f=G;h=Qa}var W,N,Q,Z,ba,S,X,y;Q=N=W=0;Z=1;ba=d;S=c;X=f;y=h;var fa=W*ba+N*S+Q*X+Z*y;0>fa&&(fa=-fa,ba=-ba,S=-S,X=-X,y=-y);if(.999999<fa){var T,ia,pa,wa;T=ba-W;ia=S-N;pa=X-Q;wa=y-Z;ba=W+b/(b+e)*T;S=N+b/(b+e)*ia;X=Q+b/(b+e)*pa;y=Z+b/(b+e)*wa;var ya=ba*ba+S*S+X*X+y*y;1E-32<ya&&(ya=1/Math.sqrt(ya));l=ba*ya;g=S*ya;k=X*ya;m=y*ya}else{var ha=b/(b+e)*Math.acos(fa);ba+=W*-fa;S+=N*-fa;X+=Q*-fa;y+=Z*-fa;var Y=ba*ba+S*S+X*X+y*y;1E-32<Y&&(Y=1/Math.sqrt(Y));ba*=Y;S*=Y;X*=Y;y*=Y;var ma=Math.sin(ha),Ea=Math.cos(ha);W*=Ea;N*=Ea;Q*=Ea;Z*=Ea;l=W+ba*ma;g=N+S*ma;k=Q+X*ma;m=Z+y*ma}var Ha=l,J=g,ta=k,ea=m,aa=2*Ha,Za=2*J,da=2*ta,O=Ha*aa,va=J*Za,ob=ta*da,na=Ha*Za,Na=J*da,La=Ha*da,ab=ea*aa,ub=ea*Za,gb=ea*da;n=1-va-ob;q=na-gb;p=La+ub;r=na+gb;v=1-O-ob;t=Na-ab;x=La-ub;A=Na+ab;u=1-O-va;var ua,Aa;ua=n*a.$.vb+q*a.$.wb+p*a.$.xb;Aa=r*a.$.vb+v*a.$.wb+t*a.$.xb;C=x*a.$.vb+A*a.$.wb+u*a.$.xb;I=a.ad;E=a.bd;M=a.cd;P=a.Qd;db=a.Rd;ra=a.Sd;var Ya=I*ua+E*Aa+M*C;if(-1.000001<Ya&&-.999999>Ya){var Ja,wb,Fa,ja=I*I,qa=E*E,eb=M*M,Oa;ja<qa?ja<eb?(Oa=1/Math.sqrt(qa+eb),Ja=0,wb=M*Oa,Fa=-E*Oa):(Oa=1/Math.sqrt(ja+qa),Ja=E*Oa,wb=-I*Oa,Fa=0):qa<eb?(Oa=1/Math.sqrt(eb+ja),Ja=-M*Oa,wb=0,Fa=I*Oa):(Oa=1/Math.sqrt(ja+qa),Ja=E*Oa,wb=-I*Oa,Fa=0);l=Ja;g=wb;k=Fa;m=0}else{var Bb,mb,hb;Bb=E*C-M*Aa;mb=M*ua-I*C;hb=I*Aa-E*ua;var pb=Math.sqrt(.5*(1+Ya)),Ya=.5/pb;Bb*=Ya;mb*=Ya;hb*=Ya;l=Bb;g=mb;k=hb;m=pb}var qb=l,$a=g,Ta=k,Ab=m,bb=2*qb,Ka=2*$a,Va=2*Ta,H=qb*bb,cb=$a*Ka,jb=Ta*Va,Wa=qb*Ka,kb=$a*Va,xb=qb*Va,w=Ab*bb,V=Ab*Ka,ca=Ab*Va;n=1-cb-jb;q=Wa-ca;p=xb+V;r=Wa+ca;v=1-H-jb;t=kb-w;x=xb-V;A=kb+w;u=1-H-cb;var vb,cc,Pa;vb=n*P+q*db+p*ra;cc=r*P+v*db+t*ra;Pa=x*P+A*db+u*ra;K=vb;B=cc;D=Pa;z=Aa*D-C*B;F=C*K-ua*D;L=ua*B-Aa*K;if(1E-6<z*z+F*F+L*L){var nb=z*z+F*F+L*L;0<nb&&(nb=1/Math.sqrt(nb));z*=nb;F*=nb;L*=nb}else{var rb=ua*ua,Cb=Aa*Aa,sb=C*C,ga;rb<Cb?rb<sb?(ga=1/Math.sqrt(Cb+sb),z=0,F=C*ga,L=-Aa*ga):(ga=1/Math.sqrt(rb+Cb),z=Aa*ga,F=-ua*ga,L=0):Cb<sb?(ga=1/Math.sqrt(sb+rb),z=-C*ga,F=0,L=ua*ga):(ga=1/Math.sqrt(rb+Cb),z=Aa*ga,F=-ua*ga,L=0)}K=F*C-L*Aa;B=L*ua-z*C;D=z*Aa-F*ua;a.ad=ua;a.bd=Aa;a.cd=C;a.Qd=K;a.Rd=B;a.Sd=D;a.he=z;a.ie=F;a.je=L;var Ua,fb,Xa,tb,Ma,Gb,yb,ka,Hb,Ob,zb,Db,Fb,Jb,sc,Mb,Nb,Pb;Ua=this.vb;fb=this.Ae;Xa=this.Ah;tb=this.wb;Ma=this.Be;Gb=this.Bh;yb=this.xb;ka=this.Ce;Hb=this.Ch;Ob=this.$b;zb=this.qe;Db=this.Vg;Fb=this.ac;Jb=this.re;sc=this.Wg;Mb=this.bc;Nb=this.se;Pb=this.Xg;var wc,$b,dc,kc,Lb,Yb,Sb,nc;wc=Ob*Ua+zb*fb+Db*Xa;$b=Ob*tb+zb*Ma+Db*Gb;dc=Ob*yb+zb*ka+Db*Hb;kc=Fb*Ua+Jb*fb+sc*Xa;Lb=Fb*tb+Jb*Ma+sc*Gb;Yb=Fb*yb+Jb*ka+sc*Hb;Sb=Mb*Ua+Nb*fb+Pb*Xa;nc=Mb*tb+Nb*Ma+Pb*Gb;var ac,Ib,Vb,bc,Kb=Mb*yb+Nb*ka+Pb*Hb,Tb=wc+Lb+Kb,lb;0<Tb?(lb=Math.sqrt(Tb+1),bc=.5*lb,lb=.5/lb,ac=(nc-Yb)*lb,Ib=(dc-Sb)*lb,Vb=(kc-$b)*lb):wc>Lb?wc>Kb?(lb=Math.sqrt(wc-Lb-Kb+1),ac=.5*lb,lb=.5/lb,Ib=($b+kc)*lb,Vb=(dc+Sb)*lb,bc=(nc-Yb)*lb):(lb=Math.sqrt(Kb-wc-Lb+1),Vb=.5*lb,lb=.5/lb,ac=(dc+Sb)*lb,Ib=(Yb+nc)*lb,bc=(kc-$b)*lb):Lb>Kb?(lb=Math.sqrt(Lb-Kb-wc+1),Ib=.5*lb,lb=.5/lb,ac=($b+kc)*lb,Vb=(Yb+nc)*lb,bc=(dc-Sb)*lb):(lb=Math.sqrt(Kb-wc-Lb+1),Vb=.5*lb,lb=.5/lb,ac=(dc+Sb)*lb,Ib=(Yb+nc)*lb,bc=(kc-$b)*lb);var Ub=bc,Wb=2*(-1>=Ub?3.14159265358979:1<=Ub?0:Math.acos(Ub));this.angularErrorX=ac;this.angularErrorY=Ib;this.angularErrorZ=Vb;var Qb=this.angularErrorX*this.angularErrorX+this.angularErrorY*this.angularErrorY+this.angularErrorZ*this.angularErrorZ;0<Qb&&(Qb=1/Math.sqrt(Qb));this.angularErrorX*=Qb;this.angularErrorY*=Qb;this.angularErrorZ*=Qb;this.angularErrorX*=Wb;this.angularErrorY*=Wb;this.angularErrorZ*=Wb;var rc,gc,Xb;rc=this.Jf-this.Gf;gc=this.Kf-this.Hf;Xb=this.Lf-this.If;this.Yf=rc*this.da.ad+gc*this.da.bd+Xb*this.da.cd;this.linearErrorY=rc*this.da.Qd+gc*this.da.Rd+Xb*this.da.Sd;this.linearErrorZ=rc*this.da.he+gc*this.da.ie+Xb*this.da.je},Yd:function(a,b){U.prototype.Yd.call(this,a,b);this.Td(b,a,!1)},fd:function(a){U.prototype.fd.call(this,a);this.Td(a,null,!0)},yg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Ag:function(){var a=new t;a.x=this.$b;a.y=this.ac;a.z=this.bc;return a},zg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Bg:function(a){a.x=this.$b;a.y=this.ac;a.z=this.bc},Cg:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Eg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Dg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Fg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},sj:function(){return this.xe},el:function(){return this.Kh},fl:function(){return this.Yf}});Vd.ua=Lc;Vd.prototype=vb(Lc.prototype,{za:function(a,b,e,d){this.Zg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this}});zb.ua=U;zb.prototype=vb(U.prototype,{Td:function(a,b,e){var d=e?1:this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l,g,k,m,n,q,p,r,v,t,x,A;l=-this.Ub;g=this.Tb;k=this.Ub;m=-this.Sb;n=-this.Tb;q=this.Sb;p=-this.Xb;r=this.Wb;v=this.Xb;t=-this.Vb;x=-this.Wb;A=this.Vb;var u=this.swingAxisX,C=this.swingAxisY,K=this.swingAxisZ,d=(this.C.P*u+this.C.R*C+this.C.S*K)*u+(this.C.T*u+this.C.U*C+this.C.V*K)*C+(this.C.W*u+this.C.X*C+this.C.Y*K)*K,B=(this.D.P*u+this.D.R*C+this.D.S*K)*u+(this.D.T*u+this.D.U*C+this.D.V*K)*C+(this.D.W*u+this.D.X*C+this.D.Y*K)*K;if(0<d){var D=u*this.Sb+C*this.Tb+K*this.Ub,D=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-D*D;0<D&&(d=0<this.C.ab?1/(1/d+this.C.Nc*D):0)}0<B&&(u=u*this.Vb+C*this.Wb+K*this.Xb,u=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-u*u,0<u&&(B=0<this.D.ab?1/(1/B+this.D.Nc*u):0));B=d+B?1/(d+B):0;C=this.$b;K=this.ac;D=this.bc;d=(this.C.P*C+this.C.R*K+this.C.S*D)*C+(this.C.T*C+this.C.U*K+this.C.V*D)*K+(this.C.W*C+this.C.X*K+this.C.Y*D)*D;u=(this.D.P*C+this.D.R*K+this.D.S*D)*C+(this.D.T*C+this.D.U*K+this.D.V*D)*K+(this.D.W*C+this.D.X*K+this.D.Y*D)*D;if(0<d){var z=C*this.Sb+K*this.Tb+D*this.Ub,z=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-z*z;0<z&&(d=0<this.C.ab?1/(1/d+this.C.Nc*z):0)}0<u&&(C=C*this.Vb+K*this.Wb+D*this.Xb,C=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-C*C,0<C&&(u=0<this.D.ab?1/(1/u+this.D.Nc*C):0));d=d+u?1/(d+u):0;u=this.Pb[0];C=a.rows[a.Ka++];K=C.Aa;K.va=0;K.wa=0;K.xa=0;K.Ba=0;K.Ca=0;K.Da=0;K.aa=0;K.ba=0;K.ca=0;K.ea=0;K.fa=0;K.ga=0;C.Fa=0;C.Ma=0;C.Ia=0;C.Ha=0;C.motorSpeed=0;C.fb=0;C.ta=u;u=C;u.Fa=c;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=1;u.wa=0;u.xa=0;u.Ba=1;u.Ca=0;u.Da=0;u.aa=-0;u.ba=-l;u.ca=-g;u.ea=-0;u.fa=-p;u.ga=-r;u=this.Pb[1];c=a.rows[a.Ka++];l=c.Aa;l.va=0;l.wa=0;l.xa=0;l.Ba=0;l.Ca=0;l.Da=0;l.aa=0;l.ba=0;l.ca=0;l.ea=0;l.fa=0;l.ga=0;c.Fa=0;c.Ma=0;c.Ia=0;c.Ha=0;c.motorSpeed=0;c.fb=0;c.ta=u;u=c;u.Fa=f;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=0;u.wa=1;u.xa=0;u.Ba=0;u.Ca=1;u.Da=0;u.aa=-k;u.ba=-0;u.ca=-m;u.ea=-v;u.fa=-0;u.ga=-t;u=this.Pb[2];f=a.rows[a.Ka++];k=f.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;f.Fa=0;f.Ma=0;f.Ia=0;f.Ha=0;f.motorSpeed=0;f.fb=0;f.ta=u;u=f;u.Fa=h;u.Ma=0;u.Ia=-1/0;u.Ha=1/0;u=u.Aa;u.va=0;u.wa=0;u.xa=1;u.Ba=0;u.Ca=0;u.Da=1;u.aa=-n;u.ba=-q;u.ca=-0;u.ea=-x;u.fa=-A;u.ga=-0;0<this.swingError&&(0>=this.Nk.frequency||!e)&&(u=this.Pb[3],h=a.rows[a.Ka++],n=h.Aa,n.va=0,n.wa=0,n.xa=0,n.Ba=0,n.Ca=0,n.Da=0,n.aa=0,n.ba=0,n.ca=0,n.ea=0,n.fa=0,n.ga=0,h.Fa=0,h.Ma=0,h.Ia=0,h.Ha=0,h.motorSpeed=0,h.fb=0,h.ta=u,u=h,h=this.swingError,x=this.bl,q=this.Nk,n=F.angularSlop,e?(q=0,A=1):(0<q.frequency?(n=0,k=6.28318530717958*q.frequency,f=q.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),A=b.dt,f=2*f*k,k*=k,q.useSymplecticEuler?(q=1/(A*f),A=k/f):(q=1/(A*(A*k+f)),A=k/(A*k+f))):(q=0,A=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<x.motorTorque?(u.motorSpeed=x.motorSpeed,u.fb=x.motorTorque*b.dt):(u.motorSpeed=0,u.fb=0)),f=x.lowerLimit,x=x.upperLimit,k=.5*(f+x),h=((h-k+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,h+=k,f>x?h=m=k=0:f==x?(k=-1/0,m=1/0,h-=f):h<f?(k=-1/0,m=0,h=h-f+n,0<h&&(h=0)):h>x?(k=0,m=1/0,h=h-x-n,0>h&&(h=0)):h=m=k=0,u.Ia=k,u.Ha=m,u.Ma=q*(B?1/B:0),u.Fa=h*A,u=u.Aa,u.aa=this.swingAxisX,u.ba=this.swingAxisY,u.ca=this.swingAxisZ,u.ea=this.swingAxisX,u.fa=this.swingAxisY,u.ga=this.swingAxisZ);if(0>=this.Tk.frequency||!e)B=this.Pb[4],a=a.rows[a.Ka++],u=a.Aa,u.va=0,u.wa=0,u.xa=0,u.Ba=0,u.Ca=0,u.Da=0,u.aa=0,u.ba=0,u.ca=0,u.ea=0,u.fa=0,u.ga=0,a.Fa=0,a.Ma=0,a.Ia=0,a.Ha=0,a.motorSpeed=0,a.fb=0,a.ta=B,u=a,a=this.jj,h=this.Sk,n=this.Tk,B=F.angularSlop,e?(e=0,n=1):(0<n.frequency?(B=0,e=6.28318530717958*n.frequency,x=n.dampingRatio,x<F.minSpringDamperDampingRatio&&(x=F.minSpringDamperDampingRatio),q=b.dt,x=2*x*e,A=e*e,n.useSymplecticEuler?(e=1/(q*x),n=A/x):(e=1/(q*(q*A+x)),n=A/(q*A+x))):(e=0,n=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<h.motorTorque?(u.motorSpeed=h.motorSpeed,u.fb=h.motorTorque*b.dt):(u.motorSpeed=0,u.fb=0)),b=h.lowerLimit,h=h.upperLimit,q=.5*(b+h),a=((a-q+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,a+=q,b>h?b=x=q=0:b==h?(q=-1/0,x=1/0,b=a-b):a<b?(q=-1/0,x=0,b=a-b+B,0<b&&(b=0)):a>h?(q=0,x=1/0,b=a-h-B,0>b&&(b=0)):b=x=q=0,u.Ia=q,u.Ha=x,u.Ma=e*(d?1/d:0),u.Fa=b*n,u=u.Aa,u.aa=this.twistAxisX,u.ba=this.twistAxisY,u.ca=this.twistAxisZ,u.ea=this.twistAxisX,u.fa=this.twistAxisY,u.ga=this.twistAxisZ},gd:function(){U.prototype.gd.call(this);var a,b,e,d,c,f;a=this.vb;b=this.wb;e=this.xb;d=this.$b;c=this.ac;f=this.bc;var h,l,g,k,m,n,q,p,r;h=this.vb;l=this.Ae;g=this.Ah;k=this.wb;m=this.Be;n=this.Bh;q=this.xb;p=this.Ce;r=this.Ch;var v,t,x,A,u,C,K,B;C=a*d+b*c+e*f;-1.000001<C&&-.999999>C?(u=a*a,d=b*b,c=e*e,u<d?u<c?(d=1/Math.sqrt(d+c),u=0,e*=d,a=-b*d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0):d<c?(d=1/Math.sqrt(c+u),u=-e*d,e=0,a*=d):(d=1/Math.sqrt(u+d),u=b*d,e=-a*d,a=0),v=u,t=e,x=a,A=0):(u=Math.sqrt(.5*(1+C)),C=.5/u,v=(b*f-e*c)*C,t=(e*d-a*f)*C,x=(a*c-b*d)*C,A=u);C=v;f=t;u=x;a=A;c=2*C;e=2*f;b=2*u;K=C*c;B=f*e;d=u*b;u=C*e;f*=b;C*=b;var D=a*c,z=a*e;c=a*b;a=1-B-d;b=u-c;e=C+z;u+=c;d=1-K-d;c=f-D;C-=z;f+=D;K=1-K-B;this.aj=2*(-1>=A?3.14159265358979:1<=A?0:Math.acos(A));A=v;B=x;x=a*this.qe+u*this.re+C*this.se;D=b*this.qe+d*this.re+f*this.se;v=e*this.qe+c*this.re+K*this.se;this.jj=Math.atan2(this.Ah*x+this.Bh*D+this.Ch*v,this.Ae*x+this.Be*D+this.Ce*v);this.twistAxisX=this.vb+this.$b;this.twistAxisY=this.wb+this.ac;this.twistAxisZ=this.xb+this.bc;v=this.twistAxisX*this.twistAxisX+this.twistAxisY*this.twistAxisY+this.twistAxisZ*this.twistAxisZ;0<v&&(v=1/Math.sqrt(v));this.twistAxisX*=v;this.twistAxisY*=v;this.twistAxisZ*=v;x=Math.sqrt(A*A+t*t+B*B);0<x&&(x=1/x);A*=x*this.aj;t*=x*this.aj;B*=x*this.aj;v=l*A+m*t+p*B;t=g*A+n*t+r*B;x=this.Pj;A=this.Qj;x=1/(x*x);B=1/(A*A);(A=v*v*x+t*t*B)?(D=Math.sqrt(1/A),A=v*D,D*=t,z=A*x,B*=D,x=1/Math.sqrt(z*z+B*B),z*=x,B*=x,v=(v-A)*z+(t-D)*B,0<v?(this.swingError=v,this.swingAxisX=0,this.swingAxisY=z,this.swingAxisZ=B,h=h*this.swingAxisX+l*this.swingAxisY+g*this.swingAxisZ,k=k*this.swingAxisX+m*this.swingAxisY+n*this.swingAxisZ,q=q*this.swingAxisX+p*this.swingAxisY+r*this.swingAxisZ,this.swingAxisX=h,this.swingAxisY=k,this.swingAxisZ=q,q=a*this.swingAxisX+b*this.swingAxisY+e*this.swingAxisZ,p=u*this.swingAxisX+d*this.swingAxisY+c*this.swingAxisZ,r=C*this.swingAxisX+f*this.swingAxisY+K*this.swingAxisZ,this.swingAxisX=q,this.swingAxisY=p,this.swingAxisZ=r,this.swingConstraintAxisX=this.swingAxisX,this.swingConstraintAxisY=this.swingAxisY,this.swingConstraintAxisZ=this.swingAxisZ):this.swingError=0):this.swingError=this.swingAxisZ=this.swingAxisY=this.swingAxisX=0;this.linearErrorX=this.Jf-this.Gf;this.linearErrorY=this.Kf-this.Hf;this.linearErrorZ=this.Lf-this.If},Yd:function(a,b){U.prototype.Yd.call(this,a,b);this.Td(b,a,!1)},fd:function(a){U.prototype.fd.call(this,a);this.Td(a,null,!0)},yg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Ag:function(){var a=new t;a.x=this.$b;a.y=this.ac;a.z=this.bc;return a},zg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Bg:function(a){a.x=this.$b;a.y=this.ac;a.z=this.bc},Cg:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Eg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Dg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Fg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},Cn:function(){return this.Tk},Bn:function(){return this.Sk},wn:function(){return this.Nk},un:function(){var a=new t;a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ;return a},vn:function(a){a.x=this.swingAxisX;a.y=this.swingAxisY;a.z=this.swingAxisZ},tn:function(){return this.aj},An:function(){return this.jj}});Pf.ua=Lc;Pf.prototype=vb(Lc.prototype,{za:function(a,b,e,d,c){this.Zg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;var g;e=a.a.o*f+a.a.i*h+a.a.l*l;g=a.a.f*f+a.a.m*h+a.a.g*l;f=a.a.h*f+a.a.j*h+a.a.s*l;h=this.localTwistAxis1;h.x=e;h.y=g;h.z=f;g=d.x;f=d.y;h=d.z;d=b.a.o*g+b.a.i*f+b.a.l*h;e=b.a.f*g+b.a.m*f+b.a.g*h;b=b.a.h*g+b.a.j*f+b.a.s*h;g=this.localTwistAxis2;g.x=d;g.y=e;g.z=b;d=c.x;e=c.y;g=c.z;c=a.a.o*d+a.a.i*e+a.a.l*g;b=a.a.f*d+a.a.m*e+a.a.g*g;a=a.a.h*d+a.a.j*e+a.a.s*g;d=this.localSwingAxis1;d.x=c;d.y=b;d.z=a;return this}});hc.ua=U;hc.prototype=vb(U.prototype,{Td:function(a,b,e){var d=e?1:this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.angularErrorY*d,d=this.angularErrorZ*d,g,k,m,n,q,p,r,v,t,x,A,u;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;q=-this.Tb;p=this.Sb;r=-this.Xb;v=this.Wb;t=this.Xb;x=-this.Vb;A=-this.Wb;u=this.Vb;var C=this.da.ad,K=this.da.bd,B=this.da.cd,D=(this.C.P*C+this.C.R*K+this.C.S*B)*C+(this.C.T*C+this.C.U*K+this.C.V*B)*K+(this.C.W*C+this.C.X*K+this.C.Y*B)*B,z=(this.D.P*C+this.D.R*K+this.D.S*B)*C+(this.D.T*C+this.D.U*K+this.D.V*B)*K+(this.D.W*C+this.D.X*K+this.D.Y*B)*B;if(0<D){var E=C*this.Sb+K*this.Tb+B*this.Ub,E=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-E*E;0<E&&(D=0<this.C.ab?1/(1/D+this.C.Nc*E):0)}0<z&&(C=C*this.Vb+K*this.Wb+B*this.Xb,C=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-C*C,0<C&&(z=0<this.D.ab?1/(1/z+this.D.Nc*C):0));D=D+z?1/(D+z):0;z=this.Pb[0];C=a.rows[a.Ka++];K=C.Aa;K.va=0;K.wa=0;K.xa=0;K.Ba=0;K.Ca=0;K.Da=0;K.aa=0;K.ba=0;K.ca=0;K.ea=0;K.fa=0;K.ga=0;C.Fa=0;C.Ma=0;C.Ia=0;C.Ha=0;C.motorSpeed=0;C.fb=0;C.ta=z;z=C;z.Fa=c;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.va=1;z.wa=0;z.xa=0;z.Ba=1;z.Ca=0;z.Da=0;z.aa=-0;z.ba=-g;z.ca=-k;z.ea=-0;z.fa=-r;z.ga=-v;z=this.Pb[1];c=a.rows[a.Ka++];g=c.Aa;g.va=0;g.wa=0;g.xa=0;g.Ba=0;g.Ca=0;g.Da=0;g.aa=0;g.ba=0;g.ca=0;g.ea=0;g.fa=0;g.ga=0;c.Fa=0;c.Ma=0;c.Ia=0;c.Ha=0;c.motorSpeed=0;c.fb=0;c.ta=z;z=c;z.Fa=f;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.va=0;z.wa=1;z.xa=0;z.Ba=0;z.Ca=1;z.Da=0;z.aa=-m;z.ba=-0;z.ca=-n;z.ea=-t;z.fa=-0;z.ga=-x;f=this.Pb[2];z=a.rows[a.Ka++];m=z.Aa;m.va=0;m.wa=0;m.xa=0;m.Ba=0;m.Ca=0;m.Da=0;m.aa=0;m.ba=0;m.ca=0;m.ea=0;m.fa=0;m.ga=0;z.Fa=0;z.Ma=0;z.Ia=0;z.Ha=0;z.motorSpeed=0;z.fb=0;z.ta=f;z.Fa=h;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.va=0;z.wa=0;z.xa=1;z.Ba=0;z.Ca=0;z.Da=1;z.aa=-q;z.ba=-p;z.ca=-0;z.ea=-A;z.fa=-u;z.ga=-0;if(0>=this.xe.frequency||!e)h=this.Pb[3],q=a.rows[a.Ka++],p=q.Aa,p.va=0,p.wa=0,p.xa=0,p.Ba=0,p.Ca=0,p.Da=0,p.aa=0,p.ba=0,p.ca=0,p.ea=0,p.fa=0,p.ga=0,q.Fa=0,q.Ma=0,q.Ia=0,q.Ha=0,q.motorSpeed=0,q.fb=0,q.ta=h,z=q,h=this.angle,p=this.Kh,A=this.xe,q=F.angularSlop,e?(e=0,A=1):(0<A.frequency?(q=0,e=6.28318530717958*A.frequency,f=A.dampingRatio,f<F.minSpringDamperDampingRatio&&(f=F.minSpringDamperDampingRatio),u=b.dt,f=2*f*e,m=e*e,A.useSymplecticEuler?(e=1/(u*f),A=m/f):(e=1/(u*(u*m+f)),A=m/(u*m+f))):(e=0,A=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0),0<p.motorTorque?(z.motorSpeed=p.motorSpeed,z.fb=p.motorTorque*b.dt):(z.motorSpeed=0,z.fb=0)),b=p.lowerLimit,p=p.upperLimit,u=.5*(b+p),h=((h-u+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979+u,b>p?b=f=u=0:b==p?(u=-1/0,f=1/0,b=h-b):h<b?(u=-1/0,f=0,b=h-b+q,0<b&&(b=0)):h>p?(u=0,f=1/0,b=h-p-q,0>b&&(b=0)):b=f=u=0,z.Ia=u,z.Ha=f,z.Ma=e*(D?1/D:0),z.Fa=b*A,z=z.Aa,z.aa=this.da.ad,z.ba=this.da.bd,z.ca=this.da.cd,z.ea=this.da.ad,z.fa=this.da.bd,z.ga=this.da.cd;b=this.Pb[4];D=a.rows[a.Ka++];e=D.Aa;e.va=0;e.wa=0;e.xa=0;e.Ba=0;e.Ca=0;e.Da=0;e.aa=0;e.ba=0;e.ca=0;e.ea=0;e.fa=0;e.ga=0;D.Fa=0;D.Ma=0;D.Ia=0;D.Ha=0;D.motorSpeed=0;D.fb=0;D.ta=b;z=D;z.Fa=l;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.aa=this.da.Qd;z.ba=this.da.Rd;z.ca=this.da.Sd;z.ea=this.da.Qd;z.fa=this.da.Rd;z.ga=this.da.Sd;l=this.Pb[5];a=a.rows[a.Ka++];b=a.Aa;b.va=0;b.wa=0;b.xa=0;b.Ba=0;b.Ca=0;b.Da=0;b.aa=0;b.ba=0;b.ca=0;b.ea=0;b.fa=0;b.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=l;z=a;z.Fa=d;z.Ma=0;z.Ia=-1/0;z.Ha=1/0;z=z.Aa;z.aa=this.da.he;z.ba=this.da.ie;z.ca=this.da.je;z.ea=this.da.he;z.fa=this.da.ie;z.ga=this.da.je},gd:function(){U.prototype.gd.call(this);var a=this.da,b=a.$.C.ab,e=a.$.D.ab,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u,C,K,B,D,z,F,E,I,M,P,ra,db,za,Ga=a.$.vb*a.$.$b+a.$.wb*a.$.ac+a.$.xb*a.$.bc;if(-1.000001<Ga&&-.999999>Ga){var ib,Da,Ia,oa=a.$.vb,R=a.$.wb,Na=a.$.xb,Ca=oa*oa,xa=R*R,Ra=Na*Na,Ba;Ca<xa?Ca<Ra?(Ba=1/Math.sqrt(xa+Ra),ib=0,Da=Na*Ba,Ia=-R*Ba):(Ba=1/Math.sqrt(Ca+xa),ib=R*Ba,Da=-oa*Ba,Ia=0):xa<Ra?(Ba=1/Math.sqrt(Ra+Ca),ib=-Na*Ba,Da=0,Ia=oa*Ba):(Ba=1/Math.sqrt(Ca+xa),ib=R*Ba,Da=-oa*Ba,Ia=0);d=ib;c=Da;f=Ia;h=0}else{var sa,Sa,G;sa=a.$.wb*a.$.bc-a.$.xb*a.$.ac;Sa=a.$.xb*a.$.$b-a.$.vb*a.$.bc;G=a.$.vb*a.$.ac-a.$.wb*a.$.$b;var Qa=Math.sqrt(.5*(1+Ga)),Ga=.5/Qa;sa*=Ga;Sa*=Ga;G*=Ga;d=sa;c=Sa;f=G;h=Qa}var W,N,Q,Z,ba,S,X,y;Q=N=W=0;Z=1;ba=d;S=c;X=f;y=h;var fa=W*ba+N*S+Q*X+Z*y;0>fa&&(fa=-fa,ba=-ba,S=-S,X=-X,y=-y);if(.999999<fa){var T,ia,pa,wa;T=ba-W;ia=S-N;pa=X-Q;wa=y-Z;ba=W+b/(b+e)*T;S=N+b/(b+e)*ia;X=Q+b/(b+e)*pa;y=Z+b/(b+e)*wa;var ya=ba*ba+S*S+X*X+y*y;1E-32<ya&&(ya=1/Math.sqrt(ya));l=ba*ya;g=S*ya;k=X*ya;m=y*ya}else{var ha=b/(b+e)*Math.acos(fa);ba+=W*-fa;S+=N*-fa;X+=Q*-fa;y+=Z*-fa;var Y=ba*ba+S*S+X*X+y*y;1E-32<Y&&(Y=1/Math.sqrt(Y));ba*=Y;S*=Y;X*=Y;y*=Y;var ma=Math.sin(ha),Ea=Math.cos(ha);W*=Ea;N*=Ea;Q*=Ea;Z*=Ea;l=W+ba*ma;g=N+S*ma;k=Q+X*ma;m=Z+y*ma}var Ha=l,J=g,ta=k,ea=m,aa=2*Ha,Za=2*J,da=2*ta,O=Ha*aa,va=J*Za,ob=ta*da,na=Ha*Za,Va=J*da,La=Ha*da,ab=ea*aa,ub=ea*Za,gb=ea*da;n=1-va-ob;q=na-gb;p=La+ub;r=na+gb;v=1-O-ob;t=Va-ab;x=La-ub;A=Va+ab;u=1-O-va;var ua,Aa;ua=n*a.$.vb+q*a.$.wb+p*a.$.xb;Aa=r*a.$.vb+v*a.$.wb+t*a.$.xb;C=x*a.$.vb+A*a.$.wb+u*a.$.xb;I=a.ad;M=a.bd;P=a.cd;ra=a.Qd;db=a.Rd;za=a.Sd;var Ya=I*ua+M*Aa+P*C;if(-1.000001<Ya&&-.999999>Ya){var Ja,wb,Fa,ja=I*I,qa=M*M,eb=P*P,Oa;ja<qa?ja<eb?(Oa=1/Math.sqrt(qa+eb),Ja=0,wb=P*Oa,Fa=-M*Oa):(Oa=1/Math.sqrt(ja+qa),Ja=M*Oa,wb=-I*Oa,Fa=0):qa<eb?(Oa=1/Math.sqrt(eb+ja),Ja=-P*Oa,wb=0,Fa=I*Oa):(Oa=1/Math.sqrt(ja+qa),Ja=M*Oa,wb=-I*Oa,Fa=0);l=Ja;g=wb;k=Fa;m=0}else{var Bb,mb,hb;Bb=M*C-P*Aa;mb=P*ua-I*C;hb=I*Aa-M*ua;var pb=Math.sqrt(.5*(1+Ya)),Ya=.5/pb;Bb*=Ya;mb*=Ya;hb*=Ya;l=Bb;g=mb;k=hb;m=pb}var qb=l,$a=g,Ta=k,Ab=m,bb=2*qb,Ka=2*$a,Wa=2*Ta,H=qb*bb,cb=$a*Ka,jb=Ta*Wa,vb=qb*Ka,kb=$a*Wa,xb=qb*Wa,w=Ab*bb,V=Ab*Ka,ca=Ab*Wa;n=1-cb-jb;q=vb-ca;p=xb+V;r=vb+ca;v=1-H-jb;t=kb-w;x=xb-V;A=kb+w;u=1-H-cb;var yb,zb,Pa;yb=n*ra+q*db+p*za;zb=r*ra+v*db+t*za;Pa=x*ra+A*db+u*za;K=yb;B=zb;D=Pa;z=Aa*D-C*B;F=C*K-ua*D;E=ua*B-Aa*K;if(1E-6<z*z+F*F+E*E){var nb=z*z+F*F+E*E;0<nb&&(nb=1/Math.sqrt(nb));z*=nb;F*=nb;E*=nb}else{var rb=ua*ua,Cb=Aa*Aa,sb=C*C,ga;rb<Cb?rb<sb?(ga=1/Math.sqrt(Cb+sb),z=0,F=C*ga,E=-Aa*ga):(ga=1/Math.sqrt(rb+Cb),z=Aa*ga,F=-ua*ga,E=0):Cb<sb?(ga=1/Math.sqrt(sb+rb),z=-C*ga,F=0,E=ua*ga):(ga=1/Math.sqrt(rb+Cb),z=Aa*ga,F=-ua*ga,E=0)}K=F*C-E*Aa;B=E*ua-z*C;D=z*Aa-F*ua;a.ad=ua;a.bd=Aa;a.cd=C;a.Qd=K;a.Rd=B;a.Sd=D;a.he=z;a.ie=F;a.je=E;var Ua,fb,Xa;Ua=this.wb*this.bc-this.xb*this.ac;fb=this.xb*this.$b-this.vb*this.bc;Xa=this.vb*this.ac-this.wb*this.$b;var tb=this.vb*this.$b+this.wb*this.ac+this.xb*this.bc,Ma=-1>=tb?3.14159265358979:1<=tb?0:Math.acos(tb),Gb=Ua*Ua+fb*fb+Xa*Xa;0<Gb&&(Gb=1/Math.sqrt(Gb));Ua*=Gb;fb*=Gb;Xa*=Gb;Ua*=Ma;fb*=Ma;Xa*=Ma;this.angularErrorY=Ua*this.da.Qd+fb*this.da.Rd+Xa*this.da.Sd;this.angularErrorZ=Ua*this.da.he+fb*this.da.ie+Xa*this.da.je;var Db,ka,Hb;Db=this.Be*this.se-this.Ce*this.re;ka=this.Ce*this.qe-this.Ae*this.se;Hb=this.Ae*this.re-this.Be*this.qe;tb=this.Ae*this.qe+this.Be*this.re+this.Ce*this.se;this.angle=-1>=tb?3.14159265358979:1<=tb?0:Math.acos(tb);0>Db*this.da.ad+ka*this.da.bd+Hb*this.da.cd&&(this.angle=-this.angle);this.linearErrorX=this.Jf-this.Gf;this.linearErrorY=this.Kf-this.Hf;this.linearErrorZ=this.Lf-this.If},Yd:function(a,b){U.prototype.Yd.call(this,a,b);this.Td(b,a,!1)},fd:function(a){U.prototype.fd.call(this,a);this.Td(a,null,!0)},yg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Ag:function(){var a=new t;a.x=this.$b;a.y=this.ac;a.z=this.bc;return a},zg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Bg:function(a){a.x=this.$b;a.y=this.ac;a.z=this.bc},Cg:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Eg:function(){var a=new t;a.x=this.nb;a.y=this.ob;a.z=this.pb;return a},Dg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Fg:function(a){a.x=this.nb;a.y=this.ob;a.z=this.pb},sj:function(){return this.xe},el:function(){return this.Kh},cl:function(){return this.angle}});Df.ua=Lc;Df.prototype=vb(Lc.prototype,{za:function(a,b,e,d){this.Zg(a,b,e);var c,f,h;c=d.x;f=d.y;h=d.z;var l;e=a.a.o*c+a.a.i*f+a.a.l*h;l=a.a.f*c+a.a.m*f+a.a.g*h;a=a.a.h*c+a.a.j*f+a.a.s*h;c=this.localAxis1;c.x=e;c.y=l;c.z=a;l=d.x;a=d.y;c=d.z;d=b.a.o*l+b.a.i*a+b.a.l*c;e=b.a.f*l+b.a.m*a+b.a.g*c;b=b.a.h*l+b.a.j*a+b.a.s*c;l=this.localAxis2;l.x=d;l.y=e;l.z=b;return this}});zc.prototype={ua:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},Oa:function(a,b){this.motorSpeed=a;this.motorTorque=b;return this},clone:function(){var a=new zc;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorTorque=this.motorTorque;return a}};ag.ua=U;ag.prototype=vb(U.prototype,{Td:function(a,b,e){if(!(0<this.xe.frequency&&e)){var d,c,f;d=this.Jf-this.Gf;c=this.Kf-this.Hf;f=this.Lf-this.If;var h;if(0<this.xe.frequency){h=6.28318530717958*this.xe.frequency;e=this.xe.dampingRatio;e<F.minSpringDamperDampingRatio&&(e=F.minSpringDamperDampingRatio);b=b.dt;e=2*e*h;var l=h*h;this.xe.useSymplecticEuler?(h=1/(b*e),b=l/e):(h=1/(b*(b*l+e)),b=l/(b*l+e));h*=this.C.ab+this.D.ab}else h=0,b=e?1:this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;var g,k,m,n,q,p,r,v,t,x;g=-this.Ub;k=this.Tb;m=this.Ub;n=-this.Sb;e=-this.Tb;l=this.Sb;q=-this.Xb;p=this.Wb;r=this.Xb;v=-this.Vb;t=-this.Wb;x=this.Vb;var A=this.Pb[0],u=a.rows[a.Ka++],C=u.Aa;C.va=0;C.wa=0;C.xa=0;C.Ba=0;C.Ca=0;C.Da=0;C.aa=0;C.ba=0;C.ca=0;C.ea=0;C.fa=0;C.ga=0;u.Fa=0;u.Ma=0;u.Ia=0;u.Ha=0;u.motorSpeed=0;u.fb=0;u.ta=A;A=u;A.Fa=d*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=1;d.wa=0;d.xa=0;d.Ba=1;d.Ca=0;d.Da=0;d.aa=-0;d.ba=-g;d.ca=-k;d.ea=-0;d.fa=-q;d.ga=-p;d=this.Pb[1];g=a.rows[a.Ka++];k=g.Aa;k.va=0;k.wa=0;k.xa=0;k.Ba=0;k.Ca=0;k.Da=0;k.aa=0;k.ba=0;k.ca=0;k.ea=0;k.fa=0;k.ga=0;g.Fa=0;g.Ma=0;g.Ia=0;g.Ha=0;g.motorSpeed=0;g.fb=0;g.ta=d;A=g;A.Fa=c*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=0;d.wa=1;d.xa=0;d.Ba=0;d.Ca=1;d.Da=0;d.aa=-m;d.ba=-0;d.ca=-n;d.ea=-r;d.fa=-0;d.ga=-v;c=this.Pb[2];a=a.rows[a.Ka++];d=a.Aa;d.va=0;d.wa=0;d.xa=0;d.Ba=0;d.Ca=0;d.Da=0;d.aa=0;d.ba=0;d.ca=0;d.ea=0;d.fa=0;d.ga=0;a.Fa=0;a.Ma=0;a.Ia=0;a.Ha=0;a.motorSpeed=0;a.fb=0;a.ta=c;A=a;A.Fa=f*b;A.Ma=h;A.Ia=-1/0;A.Ha=1/0;d=A.Aa;d.va=0;d.wa=0;d.xa=1;d.Ba=0;d.Ca=0;d.Da=1;d.aa=-e;d.ba=-l;d.ca=-0;d.ea=-t;d.fa=-x;d.ga=-0}},Yd:function(a,b){U.prototype.Yd.call(this,a,b);this.Td(b,a,!1)},fd:function(a){U.prototype.fd.call(this,a);this.Td(a,null,!0)},sj:function(){return this.xe}});Ee.ua=Lc;Ee.prototype=vb(Lc.prototype,{za:function(a,b,e){this.Zg(a,b,e);return this}});Rc.prototype={ua:function(a,b){this.frequency=a;this.dampingRatio=b;return this},Oa:function(a){this.useSymplecticEuler=a;return this},clone:function(){var a=new Rc;a.frequency=this.frequency;a.dampingRatio=this.dampingRatio;a.useSymplecticEuler=this.useSymplecticEuler;return a}};Ud.prototype={ua:function(a,b){this.lowerLimit=a;this.upperLimit=b;return this},Oa:function(a,b){this.motorSpeed=a;this.motorForce=b;return this},clone:function(){var a=new Ud;a.lowerLimit=this.lowerLimit;a.upperLimit=this.upperLimit;a.motorSpeed=this.motorSpeed;a.motorForce=this.motorForce;return a}};yb.ua=U;yb.prototype=vb(U.prototype,{Td:function(a,b,e){var d=e?1:this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0,c,f;c=this.linearErrorX*d;f=this.linearErrorY*d;var h=this.linearErrorZ*d,l=this.Dl*d,g,k,m,n,q,p,r,v,t,x,A,u,C,E,B,D,z,M;g=0;k=-this.Ub;m=this.Tb;n=this.Ub;q=0;p=-this.Sb;r=-this.Tb;v=this.Sb;x=t=0;A=-this.Xb;u=this.Wb;C=this.Xb;E=0;B=-this.Vb;D=-this.Wb;z=this.Vb;M=0;g=-g;k=-k;m=-m;n=-n;q=-q;p=-p;r=-r;v=-v;t=-t;x=-x;A=-A;u=-u;C=-C;E=-E;B=-B;D=-D;z=-z;M=-M;var L=this.Zf,I=this.$f,P=this.ag,U=(this.C.P*L+this.C.R*I+this.C.S*P)*L+(this.C.T*L+this.C.U*I+this.C.V*P)*I+(this.C.W*L+this.C.X*I+this.C.Y*P)*P,ra=(this.D.P*L+this.D.R*I+this.D.S*P)*L+(this.D.T*L+this.D.U*I+this.D.V*P)*I+(this.D.W*L+this.D.X*I+this.D.Y*P)*P;if(0<U){var db=L*this.Sb+I*this.Tb+P*this.Ub,za=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-db*db;0<za&&(U=0<this.C.ab?1/(1/U+this.C.Nc*za):0)}if(0<ra){var Ga=L*this.Vb+I*this.Wb+P*this.Xb,ib=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-Ga*Ga;0<ib&&(ra=0<this.D.ab?1/(1/ra+this.D.Nc*ib):0)}var Da=U+ra?1/(U+ra):0,Ia=this.bg,oa=this.cg,R=this.dg,Na=(this.C.P*Ia+this.C.R*oa+this.C.S*R)*Ia+(this.C.T*Ia+this.C.U*oa+this.C.V*R)*oa+(this.C.W*Ia+this.C.X*oa+this.C.Y*R)*R,Ca=(this.D.P*Ia+this.D.R*oa+this.D.S*R)*Ia+(this.D.T*Ia+this.D.U*oa+this.D.V*R)*oa+(this.D.W*Ia+this.D.X*oa+this.D.Y*R)*R;if(0<Na){var xa=Ia*this.Sb+oa*this.Tb+R*this.Ub,Ra=this.Sb*this.Sb+this.Tb*this.Tb+this.Ub*this.Ub-xa*xa;0<Ra&&(Na=0<this.C.ab?1/(1/Na+this.C.Nc*Ra):0)}if(0<Ca){var Ba=Ia*this.Vb+oa*this.Wb+R*this.Xb,sa=this.Vb*this.Vb+this.Wb*this.Wb+this.Xb*this.Xb-Ba*Ba;0<sa&&(Ca=0<this.D.ab?1/(1/Ca+this.D.Nc*sa):0)}var Sa=Na+Ca?1/(Na+Ca):0,G=this.Pb[0],Qa=a.rows[a.Ka++],W=Qa.Aa;W.va=0;W.wa=0;W.xa=0;W.Ba=0;W.Ca=0;W.Da=0;W.aa=0;W.ba=0;W.ca=0;W.ea=0;W.fa=0;W.ga=0;Qa.Fa=0;Qa.Ma=0;Qa.Ia=0;Qa.Ha=0;Qa.motorSpeed=0;Qa.fb=0;Qa.ta=G;var N=Qa;N.Fa=c;N.Ma=0;N.Ia=-1/0;N.Ha=1/0;var Q=N.Aa;Q.va=1;Q.wa=0;Q.xa=0;Q.Ba=1;Q.Ca=0;Q.Da=0;Q.aa=g;Q.ba=k;Q.ca=m;Q.ea=x;Q.fa=A;Q.ga=u;var Z=this.Pb[1],ba=a.rows[a.Ka++],S=ba.Aa;S.va=0;S.wa=0;S.xa=0;S.Ba=0;S.Ca=0;S.Da=0;S.aa=0;S.ba=0;S.ca=0;S.ea=0;S.fa=0;S.ga=0;ba.Fa=0;ba.Ma=0;ba.Ia=0;ba.Ha=0;ba.motorSpeed=0;ba.fb=0;ba.ta=Z;N=ba;N.Fa=f;N.Ma=0;N.Ia=-1/0;N.Ha=1/0;Q=N.Aa;Q.va=0;Q.wa=1;Q.xa=0;Q.Ba=0;Q.Ca=1;Q.Da=0;Q.aa=n;Q.ba=q;Q.ca=p;Q.ea=C;Q.fa=E;Q.ga=B;var X=this.Pb[2],y=a.rows[a.Ka++],fa=y.Aa;fa.va=0;fa.wa=0;fa.xa=0;fa.Ba=0;fa.Ca=0;fa.Da=0;fa.aa=0;fa.ba=0;fa.ca=0;fa.ea=0;fa.fa=0;fa.ga=0;y.Fa=0;y.Ma=0;y.Ia=0;y.Ha=0;y.motorSpeed=0;y.fb=0;y.ta=X;N=y;N.Fa=h;N.Ma=0;N.Ia=-1/0;N.Ha=1/0;Q=N.Aa;Q.va=0;Q.wa=0;Q.xa=1;Q.Ba=0;Q.Ca=0;Q.Da=1;Q.aa=r;Q.ba=v;Q.ca=t;Q.ea=D;Q.fa=z;Q.ga=M;if(!this.Dm&&(0>=this.Lk.frequency||!e)){var T=this.Pb[3],ia=a.rows[a.Ka++],pa=ia.Aa;pa.va=0;pa.wa=0;pa.xa=0;pa.Ba=0;pa.Ca=0;pa.Da=0;pa.aa=0;pa.ba=0;pa.ca=0;pa.ea=0;pa.fa=0;pa.ga=0;ia.Fa=0;ia.Ma=0;ia.Ia=0;ia.Ha=0;ia.motorSpeed=0;ia.fb=0;ia.ta=T;var N=ia,wa=this.Di,ya=this.Dk,ha=this.Lk,Y,ma,Ea=F.angularSlop;if(e)Y=0,ma=1;else{if(0<ha.frequency){var Ea=0,Ha=6.28318530717958*ha.frequency,J=ha.dampingRatio;J<F.minSpringDamperDampingRatio&&(J=F.minSpringDamperDampingRatio);var ta=b.dt,ea=2*J*Ha,aa=Ha*Ha;ha.useSymplecticEuler?(Y=1/(ta*ea),ma=aa/ea):(Y=1/(ta*(ta*aa+ea)),ma=aa/(ta*aa+ea))}else Y=0,ma=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<ya.motorTorque?(N.motorSpeed=ya.motorSpeed,N.fb=ya.motorTorque*b.dt):(N.motorSpeed=0,N.fb=0)}var Za=ya.lowerLimit,da=ya.upperLimit,O=.5*(Za+da),wa=wa-O,wa=((wa+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,wa=wa+O,va,ob,na;Za>da?na=ob=va=0:Za==da?(va=-1/0,ob=1/0,na=wa-Za):wa<Za?(va=-1/0,ob=0,na=wa-Za+Ea,0<na&&(na=0)):wa>da?(va=0,ob=1/0,na=wa-da-Ea,0>na&&(na=0)):na=ob=va=0;var Va=Da?1/Da:0;N.Ia=va;N.Ha=ob;N.Ma=Y*Va;N.Fa=na*ma;Q=N.Aa;Q.aa=this.Zf;Q.ba=this.$f;Q.ca=this.ag;Q.ea=this.Zf;Q.fa=this.$f;Q.ga=this.ag}if(!this.Em){var La=this.Pb[4],ab=a.rows[a.Ka++],ub=ab.Aa;ub.va=0;ub.wa=0;ub.xa=0;ub.Ba=0;ub.Ca=0;ub.Da=0;ub.aa=0;ub.ba=0;ub.ca=0;ub.ea=0;ub.fa=0;ub.ga=0;ab.Fa=0;ab.Ma=0;ab.Ia=0;ab.Ha=0;ab.motorSpeed=0;ab.fb=0;ab.ta=La;N=ab;N.Fa=l;N.Ma=0;N.Ia=-1/0;N.Ha=1/0;Q=N.Aa;Q.aa=this.Sg;Q.ba=this.Tg;Q.ca=this.Ug;Q.ea=this.Sg;Q.fa=this.Tg;Q.ga=this.Ug}if(!this.Fm&&(0>=this.Mk.frequency||!e)){var gb=this.Pb[5],ua=a.rows[a.Ka++],Aa=ua.Aa;Aa.va=0;Aa.wa=0;Aa.xa=0;Aa.Ba=0;Aa.Ca=0;Aa.Da=0;Aa.aa=0;Aa.ba=0;Aa.ca=0;Aa.ea=0;Aa.fa=0;Aa.ga=0;ua.Fa=0;ua.Ma=0;ua.Ia=0;ua.Ha=0;ua.motorSpeed=0;ua.fb=0;ua.ta=gb;var N=ua,Ya=this.Ei,Ja=this.Ek,wb=this.Mk,Fa,ja,qa=F.angularSlop;if(e)Fa=0,ja=1;else{if(0<wb.frequency){var qa=0,eb=6.28318530717958*wb.frequency,Oa=wb.dampingRatio;Oa<F.minSpringDamperDampingRatio&&(Oa=F.minSpringDamperDampingRatio);var Ta=b.dt,mb=2*Oa*eb,hb=eb*eb;wb.useSymplecticEuler?(Fa=1/(Ta*mb),ja=hb/mb):(Fa=1/(Ta*(Ta*hb+mb)),ja=hb/(Ta*hb+mb))}else Fa=0,ja=this.Hc==Ub.BAUMGARTE?b.invDt*F.velocityBaumgarte:0;0<Ja.motorTorque?(N.motorSpeed=Ja.motorSpeed,N.fb=Ja.motorTorque*b.dt):(N.motorSpeed=0,N.fb=0)}var pb=Ja.lowerLimit,qb=Ja.upperLimit,$a=.5*(pb+qb),Ya=Ya-$a,Ya=((Ya+3.14159265358979)%6.28318530717958+6.28318530717958)%6.28318530717958-3.14159265358979,Ya=Ya+$a,Wa,Ab,bb;pb>qb?bb=Ab=Wa=0:pb==qb?(Wa=-1/0,Ab=1/0,bb=Ya-pb):Ya<pb?(Wa=-1/0,Ab=0,bb=Ya-pb+qa,0<bb&&(bb=0)):Ya>qb?(Wa=0,Ab=1/0,bb=Ya-qb-qa,0>bb&&(bb=0)):bb=Ab=Wa=0;var Ka=Sa?1/Sa:0;N.Ia=Wa;N.Ha=Ab;N.Ma=Fa*Ka;N.Fa=bb*ja;Q=N.Aa;Q.aa=this.bg;Q.ba=this.cg;Q.ca=this.dg;Q.ea=this.bg;Q.fa=this.cg;Q.ga=this.dg}},gd:function(){U.prototype.gd.call(this);var a,b,e,d,c,f,h,l,g;a=this.vb;b=this.wb;e=this.xb;h=this.Vg;l=this.Wg;g=this.Xg;d=l*e-g*b;c=g*a-h*e;f=h*b-l*a;this.Zf=c*g-f*l;this.$f=f*h-d*g;this.ag=d*l-c*h;this.Sg=d;this.Tg=c;this.Ug=f;this.bg=b*f-e*c;this.cg=e*d-a*f;this.dg=a*c-b*d;a=this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag;0<a&&(a=1/Math.sqrt(a));this.Zf*=a;this.$f*=a;this.ag*=a;a=this.Sg*this.Sg+this.Tg*this.Tg+this.Ug*this.Ug;0<a&&(a=1/Math.sqrt(a));this.Sg*=a;this.Tg*=a;this.Ug*=a;a=this.bg*this.bg+this.cg*this.cg+this.dg*this.dg;0<a&&(a=1/Math.sqrt(a));this.bg*=a;this.cg*=a;this.dg*=a;this.Dm=!(this.Zf*this.Zf+this.$f*this.$f+this.ag*this.ag);this.Em=!(this.Sg*this.Sg+this.Tg*this.Tg+this.Ug*this.Ug);this.Fm=!(this.bg*this.bg+this.cg*this.cg+this.dg*this.dg);var k,m,n,q,p,r,v,t,x;k=this.vb;a=this.Ae;b=this.Ah;m=this.wb;e=this.Be;d=this.Bh;n=this.xb;c=this.Ce;f=this.Ch;q=this.$b;p=this.qe;h=this.Vg;r=this.ac;v=this.re;l=this.Wg;t=this.bc;x=this.se;g=this.Xg;var A,u,C;A=k*h+m*l+n*g;u=a*p+e*v+c*x;C=b*p+d*v+f*x;-1>=A?(e=Math.atan2(C,u),a=.5*e,b=-1.570796326794895,e=.5*-e):1<=A?(e=Math.atan2(C,u),a=.5*e,b=1.570796326794895,e*=.5):(A=Math.asin(A),k=Math.atan2(-(k*p+m*v+n*x),k*q+m*r+n*t),a=Math.atan2(-(a*h+e*l+c*g),b*h+d*l+f*g),b=A,e=k);this.Di=a;this.Dl=b;this.Ei=e;this.linearErrorX=this.Jf-this.Gf;this.linearErrorY=this.Kf-this.Hf;this.linearErrorZ=this.Lf-this.If},Yd:function(a,b){U.prototype.Yd.call(this,a,b);this.Td(b,a,!1)},fd:function(a){U.prototype.fd.call(this,a);this.Td(a,null,!0)},yg:function(){var a=new t;a.x=this.vb;a.y=this.wb;a.z=this.xb;return a},Ag:function(){var a=new t;a.x=this.Vg;a.y=this.Wg;a.z=this.Xg;return a},zg:function(a){a.x=this.vb;a.y=this.wb;a.z=this.xb},Bg:function(a){a.x=this.Vg;a.y=this.Wg;a.z=this.Xg},Cg:function(){var a=new t;a.x=this.qa;a.y=this.ra;a.z=this.sa;return a},Eg:function(){var a=new t;a.x=this.Kc;a.y=this.Lc;a.z=this.Mc;return a},Dg:function(a){a.x=this.qa;a.y=this.ra;a.z=this.sa},Fg:function(a){a.x=this.Kc;a.y=this.Lc;a.z=this.Mc},rn:function(){return this.Lk},sn:function(){return this.Mk},nn:function(){return this.Dk},on:function(){return this.Ek},hn:function(){return this.Di},jn:function(){return this.Ei}});sf.ua=Lc;sf.prototype=vb(Lc.prototype,{za:function(a,b,e,d,c){this.Zg(a,b,e);var f,h,l;f=d.x;h=d.y;l=d.z;d=a.a.o*f+a.a.i*h+a.a.l*l;e=a.a.f*f+a.a.m*h+a.a.g*l;a=a.a.h*f+a.a.j*h+a.a.s*l;f=this.localAxis1;f.x=d;f.y=e;f.z=a;d=c.x;e=c.y;f=c.z;c=b.a.o*d+b.a.i*e+b.a.l*f;a=b.a.f*d+b.a.m*e+b.a.g*f;b=b.a.h*d+b.a.j*e+b.a.s*f;d=this.localAxis2;d.x=c;d.y=a;d.z=b;return this}});rl.prototype={za:function(a){this.Qc=a.Qc;for(var b=0,e=this.Qc;b<e;){var d=b++;this.nh[d]=a.nh[d];this.sh[d]=a.sh[d]}this.ge=a.ge;b=0;for(e=this.ge;b<e;)d=b++,this.Gg[d]=a.Gg[d]},Zk:function(a,b,e,d,c,f,h){for(var l=0,g=this.ge;l<g;){var k=l++,k=this.Gg[k],m=a.rows[k];this.Xk[k]=m.Fa*f-e[k]-m.Ma*d[k]}l=b.Ti;g=0;for(k=this.Qc;g<k;){var n=g++,m=this.nh[n],n=this.sh[n],q=a.rows[m],n=(0>n?q.Ia:0<n?q.Ha:0)-d[m];if(c[m]=n)for(var q=0,p=this.ge;q<p;){var r=q++,v=r=this.Gg[r],t=this.Xk;t[v]-=l[m][r]*n}}g=this.Gg;k=this.ge;for(n=m=0;n<k;)q=n++,m|=1<<g[q];b.Fj[m]||(b.cn(m,g,k),b.Fj[m]=!0);g=b.pk[m];b=!0;k=0;for(m=this.ge;k<m;){for(var n=k++,q=this.Gg[n],p=a.rows[q],v=r=d[q],t=0,x=this.ge;t<x;)var A=t++,v=v+this.Xk[this.Gg[A]]*g[n][A];if(v<p.Ia-F.directMlcpSolverEps||v>p.Ha+F.directMlcpSolverEps){b=!1;break}c[q]=v-r}if(h)return!0;if(!b)return!1;h=0;for(g=this.Qc;h<g;){n=h++;k=this.nh[n];m=a.rows[k];n=this.sh[n];q=d[k]+c[k];p=e[k];r=0;for(v=a.Ka;r<v;)t=r++,p+=l[k][t]*c[t];k=m.Fa*f-p-m.Ma*q;if(0>n&&k>F.directMlcpSolverEps||0<n&&k<-F.directMlcpSolverEps){b=!1;break}}return b}};ql.prototype={Nh:function(a,b){if(b==a.Ka)null==this.Mh[this.bf]&&(this.Mh[this.bf]=new rl(this.Gn)),this.Mh[this.bf++].za(this.We);else{var e=a.rows[b],d=e.Ia>-1/0,c=e.Ha<1/0;0==e.Ia&&0==e.Ha?(c=this.We,c.nh[c.Qc]=b,c.sh[c.Qc]=0,c.Qc++,this.Nh(a,b+1),this.We.Qc--):(e=this.We,e.Gg[e.ge]=b,e.ge++,this.Nh(a,b+1),this.We.ge--,d&&(d=this.We,d.nh[d.Qc]=b,d.sh[d.Qc]=-1,d.Qc++,this.Nh(a,b+1),this.We.Qc--),c&&(c=this.We,c.nh[c.Qc]=b,c.sh[c.Qc]=1,c.Qc++,this.Nh(a,b+1),this.We.Qc--))}}};Tj.prototype={};Xb.ua=Db;Xb.prototype=vb(Db.prototype,{qh:function(a){this.$.gd();this.$.Yd(a,this.info);this.C=this.info.Ie;this.D=this.info.Je;this.Yh.$k(this.info,this.Zb);a=this.Ke;a.bf=0;var b=a.We;b.Qc=0;b.ge=0;a.Nh(this.info,0);a=this.Al;for(var b=this.Ke.bf,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.qc[h];h<b?(a.df[e]=h,++e):(a.df[b+d]=h,++d)}b=a.qc;a.qc=a.df;a.df=b},zh:function(a){var b=this.$.Hc==Ub.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ta;e.ta=0;e.Zc=0;e.ub=0}else{a=0;for(e=this.info.Ka;a<e;){var d=a++,c=this.info.rows[d],f=c.ta,h=f.ta*b;h<c.Ia?h=c.Ia:h>c.Ha&&(h=c.Ha);f.ta=h;0<c.fb?(h=f.Zc*b,c=c.fb,h<-c?h=-c:h>c&&(h=c),f.Zc=h):f.Zc=0;this.vf[d]=f.ta+f.Zc}var b=this.vf,e=a=!1,l,g,k,m,n,q,p,r,d=this.C.gb,f=this.C.hb,c=this.C.ib,h=this.D.gb;l=this.D.hb;g=this.D.ib;k=this.C.kb;m=this.C.lb;n=this.C.mb;q=this.D.kb;p=this.D.lb;r=this.D.mb;for(var v=0,t=this.info.Ka;v<t;){var x=v++,A=this.info.rows[x].Aa,u=this.Zb[x],x=b[x];A.xc&1&&(d+=u.pd*x,f+=u.qd*x,c+=u.rd*x,h+=u.sd*-x,l+=u.td*-x,g+=u.ud*-x,a=!0);A.xc&2&&(k+=u.jd*x,m+=u.kd*x,n+=u.ld*x,q+=u.md*-x,p+=u.nd*-x,r+=u.od*-x,e=!0)}a&&(this.C.gb=d,this.C.hb=f,this.C.ib=c,this.D.gb=h,this.D.hb=l,this.D.ib=g);e&&(this.C.kb=k,this.C.lb=m,this.C.mb=n,this.D.kb=q,this.D.lb=p,this.D.mb=r)}},vh:function(){var a=this.info.Ka,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.gb;e=this.C.hb;d=this.C.ib;c=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.ta,v=v.Aa,x=0,x=x+(b*v.va+e*v.wa+d*v.xa),x=x-(c*v.Ba+f*v.Ca+h*v.Da),x=x+(l*v.aa+g*v.ba+k*v.ca),x=x-(m*v.ea+n*v.fa+q*v.ga);this.Kg[r]=x;this.Rh[r]=t.ta;this.qj[r]=0}b=this.Yh.Ti;for(e=0;e<a;)if(d=e++,h=this.info.rows[d],c=h.ta,l=this.Zb[d],0<h.fb)for(f=c.Zc,h=f+l.wf*(-h.motorSpeed-this.Kg[d]),l=c.Zc,h<-l?h=-l:h>l&&(h=l),c.Zc=h,c=h-f,this.qj[d]=c,f=0,h=a;f<h;)g=l=f++,k=this.Kg,k[g]+=c*b[d][l];e=!1;d=0;for(c=this.Ke.bf;d<c;)if(b=d++,b=this.Al.qc[b],this.Ke.Mh[b].Zk(this.info,this.Yh,this.Kg,this.Rh,this.vf,1,!1)){for(e=0;e<a;)c=e++,d=this.vf[c],this.info.rows[c].ta.ta+=d,f=this.qj,f[c]+=d;a=this.qj;d=e=!1;c=this.C.gb;f=this.C.hb;h=this.C.ib;l=this.D.gb;g=this.D.hb;k=this.D.ib;m=this.C.kb;n=this.C.lb;q=this.C.mb;p=this.D.kb;r=this.D.lb;t=this.D.mb;v=0;for(x=this.info.Ka;v<x;){var A=v++,u=this.info.rows[A].Aa,C=this.Zb[A],A=a[A];u.xc&1&&(c+=C.pd*A,f+=C.qd*A,h+=C.rd*A,l+=C.sd*-A,g+=C.td*-A,k+=C.ud*-A,e=!0);u.xc&2&&(m+=C.jd*A,n+=C.kd*A,q+=C.ld*A,p+=C.md*-A,r+=C.nd*-A,t+=C.od*-A,d=!0)}e&&(this.C.gb=c,this.C.hb=f,this.C.ib=h,this.D.gb=l,this.D.hb=g,this.D.ib=k);d&&(this.C.kb=m,this.C.lb=n,this.C.mb=q,this.D.kb=p,this.D.lb=r,this.D.mb=t);a=this.Al;for(e=0;a.qc[e]!=b;)++e;for(;0<e;)b=a.qc[e],a.qc[e]=a.qc[e-1],a.qc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:338:","could not find solution. (velocity)")},Bi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ta,m=m.Aa;m.xc&1?(b+=m.va*k.ta,e+=m.wa*k.ta,d+=m.xa*k.ta):m.xc&2&&(c+=m.aa*k.ta,f+=m.ba*k.ta,h+=m.ca*k.ta)}this.$.Fi=b*a.invDt;this.$.Gi=e*a.invDt;this.$.Hi=d*a.invDt;this.$.Ii=c*a.invDt;this.$.Ji=f*a.invDt;this.$.Ki=h*a.invDt},Jg:function(){this.$.gd();this.$.fd(this.info);this.C=this.info.Ie;this.D=this.info.Je;this.Yh.$k(this.info,this.Zb);var a=this.Ke;a.bf=0;var b=a.We;b.Qc=0;b.ge=0;a.Nh(this.info,0);for(var a=this.Ai,b=this.Ke.bf,e=0,d=0,c=0,f=a.n;c<f;){var h=c++,h=a.qc[h];h<b?(a.df[e]=h,++e):(a.df[b+d]=h,++d)}b=a.qc;a.qc=a.df;a.df=b;a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},uh:function(){var a=this.info.Ka,b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.Wc;e=this.C.Xc;d=this.C.Yc;c=this.D.Wc;f=this.D.Xc;h=this.D.Yc;l=this.C.Sc;g=this.C.Tc;k=this.C.Uc;m=this.D.Sc;n=this.D.Tc;q=this.D.Uc;for(var p=0;p<a;){var r=p++,v=this.info.rows[r],t=v.ta,v=v.Aa,x=0,x=x+(b*v.va+e*v.wa+d*v.xa),x=x-(c*v.Ba+f*v.Ca+h*v.Da),x=x+(l*v.aa+g*v.ba+k*v.ca),x=x-(m*v.ea+n*v.fa+q*v.ga);this.Kg[r]=x;this.Rh[r]=t.ub}e=!1;d=0;for(c=this.Ke.bf;d<c;)if(b=d++,b=this.Ai.qc[b],this.Ke.Mh[b].Zk(this.info,this.Yh,this.Kg,this.Rh,this.vf,F.positionSplitImpulseBaumgarte,!1)){for(e=0;e<a;)d=e++,this.info.rows[d].ta.ub+=this.vf[d];a=this.vf;d=e=!1;c=this.C.Wc;f=this.C.Xc;h=this.C.Yc;l=this.D.Wc;g=this.D.Xc;k=this.D.Yc;m=this.C.Sc;n=this.C.Tc;q=this.C.Uc;p=this.D.Sc;r=this.D.Tc;t=this.D.Uc;v=0;for(x=this.info.Ka;v<x;){var A=v++,u=this.info.rows[A].Aa,C=this.Zb[A],A=a[A];u.xc&1&&(c+=C.pd*A,f+=C.qd*A,h+=C.rd*A,l+=C.sd*-A,g+=C.td*-A,k+=C.ud*-A,e=!0);u.xc&2&&(m+=C.jd*A,n+=C.kd*A,q+=C.ld*A,p+=C.md*-A,r+=C.nd*-A,t+=C.od*-A,d=!0)}e&&(this.C.Wc=c,this.C.Xc=f,this.C.Yc=h,this.D.Wc=l,this.D.Xc=g,this.D.Yc=k);d&&(this.C.Sc=m,this.C.Tc=n,this.C.Uc=q,this.D.Sc=p,this.D.Tc=r,this.D.Uc=t);a=this.Ai;for(e=0;a.qc[e]!=b;)++e;for(;0<e;)b=a.qc[e],a.qc[e]=a.qc[e-1],a.qc[e-1]=b,--e;e=!0;break}e||console.log("DirectJointConstraintSolver.hx:454:","could not find solution. (split impulse)")},th:function(){this.$.gd();this.$.fd(this.info);this.C=this.info.Ie;this.D=this.info.Je;this.Yh.$k(this.info,this.Zb);var a=this.Ke;a.bf=0;var b=a.We;b.Qc=0;b.ge=0;a.Nh(this.info,0);for(var e=this.Ai,d=this.Ke.bf,c=0,f=0,h=0,l=e.n;h<l;){var g=h++,k=e.qc[g];k<d?(e.df[c]=k,++c):(e.df[d+f]=k,++f)}var m=e.qc;e.qc=e.df;e.df=m;for(var n=this.info.Ka,q=0;q<n;){var p=q++,r=this.info.rows[p].ta;this.Kg[p]=0;this.Rh[p]=r.ub}for(var v=!1,t=0,x=this.Ke.bf;t<x;){var A=t++,u=this.Ai.qc[A];if(this.Ke.Mh[u].Zk(this.info,this.Yh,this.Kg,this.Rh,this.vf,F.positionNgsBaumgarte,!1)){for(var C=0,E=n;C<E;){var B=C++;this.info.rows[B].ta.ub+=this.vf[B]}for(var D=this.vf,z=!1,M=!1,L,I,P,U,ra,za,Ga,Na,ib,Da,Ia,oa,R=oa=Ia=Da=ib=Na=Ga=za=ra=U=P=I=L=0,Ta=this.info.Ka;R<Ta;){var Ca=R++,xa=this.info.rows[Ca].Aa,Ra=this.Zb[Ca],Ba=D[Ca];xa.xc&1&&(L+=Ra.pd*Ba,I+=Ra.qd*Ba,P+=Ra.rd*Ba,U+=Ra.sd*-Ba,ra+=Ra.td*-Ba,za+=Ra.ud*-Ba,z=!0);xa.xc&2&&(Ga+=Ra.jd*Ba,Na+=Ra.kd*Ba,ib+=Ra.ld*Ba,Da+=Ra.md*-Ba,Ia+=Ra.nd*-Ba,oa+=Ra.od*-Ba,M=!0)}if(z){var sa=this.C;sa.a.v+=L;sa.a.A+=I;sa.a.B+=P;var Sa=this.D;Sa.a.v+=U;Sa.a.A+=ra;Sa.a.B+=za}if(M){var G=this.C,Qa=Math.sqrt(Ga*Ga+Na*Na+ib*ib),W=.5*Qa,N,Q;if(.5>W){var Z=W*W;N=.5*(1-.16666666666666666*Z+Z*Z*.008333333333333333);Q=1-.5*Z+Z*Z*.041666666666666664}else N=Math.sin(W)/Qa,Q=Math.cos(W);var ba,S,X;ba=Ga*N;S=Na*N;X=ib*N;var y,fa,T,ia;y=ba;fa=S;T=X;ia=Q;var pa,wa,ya,ha,Y=G.a.o,ma=G.a.m,Ea=G.a.s,Ha=Y+ma+Ea,J;0<Ha?(J=Math.sqrt(Ha+1),ha=.5*J,J=.5/J,pa=(G.a.g-G.a.j)*J,wa=(G.a.h-G.a.l)*J,ya=(G.a.i-G.a.f)*J):Y>ma?Y>Ea?(J=Math.sqrt(Y-ma-Ea+1),pa=.5*J,J=.5/J,wa=(G.a.f+G.a.i)*J,ya=(G.a.h+G.a.l)*J,ha=(G.a.g-G.a.j)*J):(J=Math.sqrt(Ea-Y-ma+1),ya=.5*J,J=.5/J,pa=(G.a.h+G.a.l)*J,wa=(G.a.j+G.a.g)*J,ha=(G.a.i-G.a.f)*J):ma>Ea?(J=Math.sqrt(ma-Ea-Y+1),wa=.5*J,J=.5/J,pa=(G.a.f+G.a.i)*J,ya=(G.a.j+G.a.g)*J,ha=(G.a.h-G.a.l)*J):(J=Math.sqrt(Ea-Y-ma+1),ya=.5*J,J=.5/J,pa=(G.a.h+G.a.l)*J,wa=(G.a.j+G.a.g)*J,ha=(G.a.i-G.a.f)*J);pa=ia*pa+y*ha+fa*ya-T*wa;wa=ia*wa-y*ya+fa*ha+T*pa;ya=ia*ya+y*wa-fa*pa+T*ha;ha=ia*ha-y*pa-fa*wa-T*ya;var ta=pa*pa+wa*wa+ya*ya+ha*ha;1E-32<ta&&(ta=1/Math.sqrt(ta));pa*=ta;wa*=ta;ya*=ta;ha*=ta;var ea=pa,aa=wa,Za=ya,da=ha,O=2*ea,va=2*aa,ob=2*Za,na=ea*O,Va=aa*va,La=Za*ob,ab=ea*va,ub=aa*ob,gb=ea*ob,ua=da*O,Aa=da*va,Ya=da*ob;G.a.o=1-Va-La;G.a.f=ab-Ya;G.a.h=gb+Aa;G.a.i=ab+Ya;G.a.m=1-na-La;G.a.j=ub-ua;G.a.l=gb-Aa;G.a.g=ub+ua;G.a.s=1-na-Va;var Ja,Wa,Fa,ja,qa,eb,Oa,Bb,mb;Ja=G.a.o*G.Sa+G.a.f*G.Va+G.a.h*G.Ya;Wa=G.a.o*G.Ta+G.a.f*G.Wa+G.a.h*G.Za;Fa=G.a.o*G.Ua+G.a.f*G.Xa+G.a.h*G.$a;ja=G.a.i*G.Sa+G.a.m*G.Va+G.a.j*G.Ya;qa=G.a.i*G.Ta+G.a.m*G.Wa+G.a.j*G.Za;eb=G.a.i*G.Ua+G.a.m*G.Xa+G.a.j*G.$a;Oa=G.a.l*G.Sa+G.a.g*G.Va+G.a.s*G.Ya;Bb=G.a.l*G.Ta+G.a.g*G.Wa+G.a.s*G.Za;mb=G.a.l*G.Ua+G.a.g*G.Xa+G.a.s*G.$a;G.P=Ja;G.R=Wa;G.S=Fa;G.T=ja;G.U=qa;G.V=eb;G.W=Oa;G.X=Bb;G.Y=mb;var hb,pb,qb,$a,vb,Ab,bb,Ka,yb;hb=G.P*G.a.o+G.R*G.a.f+G.S*G.a.h;pb=G.P*G.a.i+G.R*G.a.m+G.S*G.a.j;qb=G.P*G.a.l+G.R*G.a.g+G.S*G.a.s;$a=G.T*G.a.o+G.U*G.a.f+G.V*G.a.h;vb=G.T*G.a.i+G.U*G.a.m+G.V*G.a.j;Ab=G.T*G.a.l+G.U*G.a.g+G.V*G.a.s;bb=G.W*G.a.o+G.X*G.a.f+G.Y*G.a.h;Ka=G.W*G.a.i+G.X*G.a.m+G.Y*G.a.j;yb=G.W*G.a.l+G.X*G.a.g+G.Y*G.a.s;G.P=hb;G.R=pb;G.S=qb;G.T=$a;G.U=vb;G.V=Ab;G.W=bb;G.X=Ka;G.Y=yb;G.P*=G.N.x;G.R*=G.N.x;G.S*=G.N.x;G.T*=G.N.y;G.U*=G.N.y;G.V*=G.N.y;G.W*=G.N.z;G.X*=G.N.z;G.Y*=G.N.z;var H=this.D,cb=Math.sqrt(Da*Da+Ia*Ia+oa*oa),jb=.5*cb,zb,kb;if(.5>jb){var xb=jb*jb;zb=.5*(1-.16666666666666666*xb+xb*xb*.008333333333333333);kb=1-.5*xb+xb*xb*.041666666666666664}else zb=Math.sin(jb)/cb,kb=Math.cos(jb);var w,V,ca;w=Da*zb;V=Ia*zb;ca=oa*zb;var Db,cc,Pa,nb;Db=w;cc=V;Pa=ca;nb=kb;var rb,Cb,sb,ga,Ua=H.a.o,fb=H.a.m,Xa=H.a.s,tb=Ua+fb+Xa,Ma;0<tb?(Ma=Math.sqrt(tb+1),ga=.5*Ma,Ma=.5/Ma,rb=(H.a.g-H.a.j)*Ma,Cb=(H.a.h-H.a.l)*Ma,sb=(H.a.i-H.a.f)*Ma):Ua>fb?Ua>Xa?(Ma=Math.sqrt(Ua-fb-Xa+1),rb=.5*Ma,Ma=.5/Ma,Cb=(H.a.f+H.a.i)*Ma,sb=(H.a.h+H.a.l)*Ma,ga=(H.a.g-H.a.j)*Ma):(Ma=Math.sqrt(Xa-Ua-fb+1),sb=.5*Ma,Ma=.5/Ma,rb=(H.a.h+H.a.l)*Ma,Cb=(H.a.j+H.a.g)*Ma,ga=(H.a.i-H.a.f)*Ma):fb>Xa?(Ma=Math.sqrt(fb-Xa-Ua+1),Cb=.5*Ma,Ma=.5/Ma,rb=(H.a.f+H.a.i)*Ma,sb=(H.a.j+H.a.g)*Ma,ga=(H.a.h-H.a.l)*Ma):(Ma=Math.sqrt(Xa-Ua-fb+1),sb=.5*Ma,Ma=.5/Ma,rb=(H.a.h+H.a.l)*Ma,Cb=(H.a.j+H.a.g)*Ma,ga=(H.a.i-H.a.f)*Ma);rb=nb*rb+Db*ga+cc*sb-Pa*Cb;Cb=nb*Cb-Db*sb+cc*ga+Pa*rb;sb=nb*sb+Db*Cb-cc*rb+Pa*ga;ga=nb*ga-Db*rb-cc*Cb-Pa*sb;var Gb=rb*rb+Cb*Cb+sb*sb+ga*ga;1E-32<Gb&&(Gb=1/Math.sqrt(Gb));rb*=Gb;Cb*=Gb;sb*=Gb;ga*=Gb;var Fb=rb,ka=Cb,Hb=sb,Ob=ga,Jb=2*Fb,Mb=2*ka,Nb=2*Hb,Pb=Fb*Jb,sc=ka*Mb,Qb=Hb*Nb,Ub=Fb*Mb,Wb=ka*Nb,Xb=Fb*Nb,$b=Ob*Jb,dc=Ob*Mb,kc=Ob*Nb;H.a.o=1-sc-Qb;H.a.f=Ub-kc;H.a.h=Xb+dc;H.a.i=Ub+kc;H.a.m=1-Pb-Qb;H.a.j=Wb-$b;H.a.l=Xb-dc;H.a.g=Wb+$b;H.a.s=1-Pb-sc;var Lb,Yb,Sb,nc,ac,Ib,Vb,bc,Kb;Lb=H.a.o*H.Sa+H.a.f*H.Va+H.a.h*H.Ya;Yb=H.a.o*H.Ta+H.a.f*H.Wa+H.a.h*H.Za;Sb=H.a.o*H.Ua+H.a.f*H.Xa+H.a.h*H.$a;nc=H.a.i*H.Sa+H.a.m*H.Va+H.a.j*H.Ya;ac=H.a.i*H.Ta+H.a.m*H.Wa+H.a.j*H.Za;Ib=H.a.i*H.Ua+H.a.m*H.Xa+H.a.j*H.$a;Vb=H.a.l*H.Sa+H.a.g*H.Va+H.a.s*H.Ya;bc=H.a.l*H.Ta+H.a.g*H.Wa+H.a.s*H.Za;Kb=H.a.l*H.Ua+H.a.g*H.Xa+H.a.s*H.$a;H.P=Lb;H.R=Yb;H.S=Sb;H.T=nc;H.U=ac;H.V=Ib;H.W=Vb;H.X=bc;H.Y=Kb;var Tb,lb,fc,hc,ic,rc,gc,lc,mc;Tb=H.P*H.a.o+H.R*H.a.f+H.S*H.a.h;lb=H.P*H.a.i+H.R*H.a.m+H.S*H.a.j;fc=H.P*H.a.l+H.R*H.a.g+H.S*H.a.s;hc=H.T*H.a.o+H.U*H.a.f+H.V*H.a.h;ic=H.T*H.a.i+H.U*H.a.m+H.V*H.a.j;rc=H.T*H.a.l+H.U*H.a.g+H.V*H.a.s;gc=H.W*H.a.o+H.X*H.a.f+H.Y*H.a.h;lc=H.W*H.a.i+H.X*H.a.m+H.Y*H.a.j;mc=H.W*H.a.l+H.X*H.a.g+H.Y*H.a.s;H.P=Tb;H.R=lb;H.S=fc;H.T=hc;H.U=ic;H.V=rc;H.W=gc;H.X=lc;H.Y=mc;H.P*=H.N.x;H.R*=H.N.x;H.S*=H.N.x;H.T*=H.N.y;H.U*=H.N.y;H.V*=H.N.y;H.W*=H.N.z;H.X*=H.N.z;H.Y*=H.N.z}for(var ec=this.Ai,oc=0;ec.qc[oc]!=u;)++oc;for(;0<oc;){var uc=ec.qc[oc];ec.qc[oc]=ec.qc[oc-1];ec.qc[oc-1]=uc;--oc}v=!0;break}}v||console.log("DirectJointConstraintSolver.hx:506:","could not find solution. (NGS)")},cf:function(){this.$.gd();this.$.Gl()}});pl.prototype={cn:function(a,b,e){for(var d=0;d<e;)for(var c=d++,f=b[c],h=0,l=e;h<l;){var g=h++;this.ik[c][g]=this.ab[f][b[g]]}d=this.ik;a=this.pk[a];var k;switch(e){case 4:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:c=d[0];b=a[0];e=1/c[0];b[0]=e;c[1]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[1];k=a[1];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[2];k=a[2];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[3];k=a[3];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[4];k=a[4];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];g=d[5];k=a[5];k[0]=-e*g[0];g[1]-=c[1]*g[0];g[2]-=c[2]*g[0];g[3]-=c[3]*g[0];g[4]-=c[4]*g[0];g[5]-=c[5]*g[0];c=d[1];b=a[1];e=1/c[1];b[1]=e;b[0]*=e;c[2]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[2];k=a[2];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[3];k=a[3];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[4];k=a[4];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];g=d[5];k=a[5];k[0]-=b[0]*g[1];k[1]=-e*g[1];g[2]-=c[2]*g[1];g[3]-=c[3]*g[1];g[4]-=c[4]*g[1];g[5]-=c[5]*g[1];c=d[2];b=a[2];e=1/c[2];b[2]=e;b[0]*=e;b[1]*=e;c[3]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[1];k=a[1];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[3];k=a[3];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[4];k=a[4];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];g=d[5];k=a[5];k[0]-=b[0]*g[2];k[1]-=b[1]*g[2];k[2]=-e*g[2];g[3]-=c[3]*g[2];g[4]-=c[4]*g[2];g[5]-=c[5]*g[2];c=d[3];b=a[3];e=1/c[3];b[3]=e;b[0]*=e;b[1]*=e;b[2]*=e;c[4]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[1];k=a[1];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[2];k=a[2];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[4];k=a[4];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];g=d[5];k=a[5];k[0]-=b[0]*g[3];k[1]-=b[1]*g[3];k[2]-=b[2]*g[3];k[3]=-e*g[3];g[4]-=c[4]*g[3];g[5]-=c[5]*g[3];c=d[4];b=a[4];e=1/c[4];b[4]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;c[5]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[4];g[5]-=c[5]*g[4];g=d[1];k=a[1];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];g[5]-=c[5]*g[4];g=d[2];k=a[2];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];g[5]-=c[5]*g[4];g=d[3];k=a[3];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];g[5]-=c[5]*g[4];g=d[5];k=a[5];k[0]-=b[0]*g[4];k[1]-=b[1]*g[4];k[2]-=b[2]*g[4];k[3]-=b[3]*g[4];k[4]=-e*g[4];g[5]-=c[5]*g[4];c=d[5];b=a[5];e=1/c[5];b[5]=e;b[0]*=e;b[1]*=e;b[2]*=e;b[3]*=e;b[4]*=e;g=d[0];k=a[0];k[0]-=b[0]*g[5];g=d[1];k=a[1];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];g=d[2];k=a[2];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];g=d[3];k=a[3];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];g=d[4];k=a[4];k[0]-=b[0]*g[5];k[1]-=b[1]*g[5];k[2]-=b[2]*g[5];k[3]-=b[3]*g[5];k[4]-=b[4]*g[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<e;){h=f++;c=d[h];b=a[h];l=1/c[h];b[h]=l;g=0;for(k=h;g<k;){var m=g++;b[m]*=l}g=h+1;for(k=e;g<k;)m=g++,c[m]*=l;for(var m=0,n=h;m<n;){var q=m++,g=d[q];k=a[q];for(var p=0,q=q+1;p<q;){var r=p++;k[r]-=b[r]*g[h]}k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}m=h+1;for(n=e;m<n;){k=m++;g=d[k];k=a[k];p=0;for(q=h;p<q;)r=p++,k[r]-=b[r]*g[h];k[h]=-l*g[h];k=h+1;for(p=e;k<p;)q=k++,g[q]-=c[q]*g[h]}}for(d=1;d<e;)for(c=d++,b=a[c],f=0,h=c;f<h;)l=f++,a[l][c]=b[l]}},$k:function(a,b){var e=this.ab,d=this.Ti,c=a.Ka,f=a.Ie,h=a.Je,l=f.ab,g=h.ab,k,m,n,q,p,r,v,t,x,A,u,C,E,B,D,z;k=f.P;m=f.R;n=f.S;q=f.T;p=f.U;r=f.V;v=f.W;t=f.X;f=f.Y;x=h.P;A=h.R;u=h.S;C=h.T;E=h.U;B=h.V;D=h.W;z=h.X;for(var h=h.Y,F=0;F<c;){var L=F++,I=a.rows[L].Aa,L=b[L];I.Cm();I.xc&1?(L.pd=I.va*l,L.qd=I.wa*l,L.rd=I.xa*l,L.sd=I.Ba*g,L.td=I.Ca*g,L.ud=I.Da*g):(L.pd=0,L.qd=0,L.rd=0,L.sd=0,L.td=0,L.ud=0);if(I.xc&2){var M,P,U;M=k*I.aa+m*I.ba+n*I.ca;P=q*I.aa+p*I.ba+r*I.ca;U=v*I.aa+t*I.ba+f*I.ca;L.jd=M;L.kd=P;L.ld=U;M=x*I.ea+A*I.fa+u*I.ga;P=C*I.ea+E*I.fa+B*I.ga;I=D*I.ea+z*I.fa+h*I.ga;L.md=M;L.nd=P;L.od=I}else L.jd=0,L.kd=0,L.ld=0,L.md=0,L.nd=0,L.od=0}for(l=0;l<c;)for(g=l++,k=a.rows[g].Aa,m=g,n=c;m<n;)q=m++,p=b[q],r=k.va*p.pd+k.wa*p.qd+k.xa*p.rd+(k.aa*p.jd+k.ba*p.kd+k.ca*p.ld)+(k.Ba*p.sd+k.Ca*p.td+k.Da*p.ud)+(k.ea*p.md+k.fa*p.nd+k.ga*p.od),g==q?(e[g][q]=r+a.rows[g].Ma,d[g][q]=r,p.mass=r+a.rows[g].Ma,p.wf=r,0!=p.mass&&(p.mass=1/p.mass),p.wf&&(p.wf=1/p.wf)):(e[g][q]=r,e[q][g]=r,d[g][q]=r,d[q][g]=r);a=0;for(b=this.Oj;a<b;)e=a++,this.Fj[e]=!1}};Wb.ua=Db;Wb.prototype=vb(Db.prototype,{qh:function(a){this.zi.Yd(a,this.info);this.C=this.info.Ie;this.D=this.info.Je;a=this.C.ab;var b=this.D.ab,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;x=this.D.W;A=this.D.X;u=this.D.Y;for(var C=0,E=this.info.Ka;C<E;){var B=C++,D=this.info.rows[B],B=this.Zb[B],z=D.Hg;B.Sh=z.va*a;B.Th=z.wa*a;B.Uh=z.xa*a;B.Vh=z.Ba*b;B.Wh=z.Ca*b;B.Xh=z.Da*b;var F,L,I;F=e*z.aa+d*z.ba+c*z.ca;L=f*z.aa+h*z.ba+l*z.ca;I=g*z.aa+k*z.ba+m*z.ca;B.Qf=F;B.Rf=L;B.Sf=I;F=n*z.ea+q*z.fa+p*z.ga;L=r*z.ea+v*z.fa+t*z.ga;I=x*z.ea+A*z.fa+u*z.ga;B.Tf=F;B.Uf=L;B.Vf=I;B.fe=a+b+(B.Qf*z.aa+B.Rf*z.ba+B.Sf*z.ca)+(B.Tf*z.ea+B.Uf*z.fa+B.Vf*z.ga);0!=B.fe&&(B.fe=1/B.fe);z=D.Bj;D=D.Aj;B.ml=z.va*a;B.nl=z.wa*a;B.ol=z.xa*a;B.pl=z.Ba*b;B.ql=z.Ca*b;B.rl=z.Da*b;B.gl=D.va*a;B.hl=D.wa*a;B.il=D.xa*a;B.jl=D.Ba*b;B.kl=D.Ca*b;B.ll=D.Da*b;F=e*z.aa+d*z.ba+c*z.ca;L=f*z.aa+h*z.ba+l*z.ca;I=g*z.aa+k*z.ba+m*z.ca;B.uj=F;B.vj=L;B.wj=I;F=n*z.ea+q*z.fa+p*z.ga;L=r*z.ea+v*z.fa+t*z.ga;I=x*z.ea+A*z.fa+u*z.ga;B.xj=F;B.yj=L;B.zj=I;F=e*D.aa+d*D.ba+c*D.ca;L=f*D.aa+h*D.ba+l*D.ca;I=g*D.aa+k*D.ba+m*D.ca;B.Zj=F;B.$j=L;B.ak=I;F=n*D.ea+q*D.fa+p*D.ga;L=r*D.ea+v*D.fa+t*D.ga;I=x*D.ea+A*D.fa+u*D.ga;B.bk=F;B.ck=L;B.dk=I;z=a+b+(B.uj*z.aa+B.vj*z.ba+B.wj*z.ca)+(B.xj*z.ea+B.yj*z.fa+B.zj*z.ga);L=F=B.uj*D.aa+B.vj*D.ba+B.wj*D.ca+(B.xj*D.ea+B.yj*D.fa+B.zj*D.ga);D=a+b+(B.Zj*D.aa+B.$j*D.ba+B.ak*D.ca)+(B.bk*D.ea+B.ck*D.fa+B.dk*D.ga);(I=z*D-F*L)&&(I=1/I);B.sm=D*I;B.tm=-F*I;B.um=-L*I;B.vm=z*I}},zh:function(a){var b,e,d,c,f,h,l,g,k,m,n,q;b=this.C.gb;e=this.C.hb;d=this.C.ib;c=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0,r=this.info.Ka;p<r;){var v=p++,t=this.info.rows[v],x=t.ta,v=this.Zb[v],A=t.Bj,u=t.Aj,t=x.$c,A=x.Xe*A.va+x.Ye*A.wa+x.Ze*A.xa,u=x.Xe*u.va+x.Ye*u.wa+x.Ze*u.xa;x.zc=A;x.yc=u;x.$c*=a.dtRatio;x.zc*=a.dtRatio;x.yc*=a.dtRatio;b+=v.Sh*t;e+=v.Th*t;d+=v.Uh*t;b+=v.ml*A;e+=v.nl*A;d+=v.ol*A;b+=v.gl*u;e+=v.hl*u;d+=v.il*u;c+=v.Vh*-t;f+=v.Wh*-t;h+=v.Xh*-t;c+=v.pl*-A;f+=v.ql*-A;h+=v.rl*-A;c+=v.jl*-u;f+=v.kl*-u;h+=v.ll*-u;l+=v.Qf*t;g+=v.Rf*t;k+=v.Sf*t;l+=v.uj*A;g+=v.vj*A;k+=v.wj*A;l+=v.Zj*u;g+=v.$j*u;k+=v.ak*u;m+=v.Tf*-t;n+=v.Uf*-t;q+=v.Vf*-t;m+=v.xj*-A;n+=v.yj*-A;q+=v.zj*-A;m+=v.bk*-u;n+=v.ck*-u;q+=v.dk*-u}this.C.gb=b;this.C.hb=e;this.C.ib=d;this.D.gb=c;this.D.hb=f;this.D.ib=h;this.C.kb=l;this.C.lb=g;this.C.mb=k;this.D.kb=m;this.D.lb=n;this.D.mb=q},vh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.gb;b=this.C.hb;e=this.C.ib;d=this.D.gb;c=this.D.hb;f=this.D.ib;h=this.C.kb;l=this.C.lb;g=this.C.mb;k=this.D.kb;m=this.D.lb;n=this.D.mb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Zb[r],t=v.ta,x=0,A=v.Bj,x=x+(a*A.va+b*A.wa+e*A.xa),x=x-(d*A.Ba+c*A.Ca+f*A.Da),x=x+(h*A.aa+l*A.ba+g*A.ca),x=x-(k*A.ea+m*A.fa+n*A.ga),u=0,A=v.Aj,u=u+(a*A.va+b*A.wa+e*A.xa),u=u-(d*A.Ba+c*A.Ca+f*A.Da),u=u+(h*A.aa+l*A.ba+g*A.ca),u=u-(k*A.ea+m*A.fa+n*A.ga),A=-(x*r.sm+u*r.tm),C=-(x*r.um+u*r.vm),x=t.zc,u=t.yc;t.zc+=A;t.yc+=C;(v=v.friction*t.$c)?(A=t.zc*t.zc+t.yc*t.yc,A>v*v&&(v/=Math.sqrt(A),t.zc*=v,t.yc*=v)):(t.zc=0,t.yc=0);A=t.zc-x;C=t.yc-u;a+=r.ml*A;b+=r.nl*A;e+=r.ol*A;a+=r.gl*C;b+=r.hl*C;e+=r.il*C;d+=r.pl*-A;c+=r.ql*-A;f+=r.rl*-A;d+=r.jl*-C;c+=r.kl*-C;f+=r.ll*-C;h+=r.uj*A;l+=r.vj*A;g+=r.wj*A;h+=r.Zj*C;l+=r.$j*C;g+=r.ak*C;k+=r.xj*-A;m+=r.yj*-A;n+=r.zj*-A;k+=r.bk*-C;m+=r.ck*-C;n+=r.dk*-C}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.Zb[r],t=v.ta,x=0,u=v.Hg,x+=a*u.va+b*u.wa+e*u.xa,x-=d*u.Ba+c*u.Ca+f*u.Da,x+=h*u.aa+l*u.ba+g*u.ca,x-=k*u.ea+m*u.fa+n*u.ga,v=(v.Fa-x)*r.fe,x=t.$c,t.$c+=v,0>t.$c&&(t.$c=0),v=t.$c-x,a+=r.Sh*v,b+=r.Th*v,e+=r.Uh*v,d+=r.Vh*-v,c+=r.Wh*-v,f+=r.Xh*-v,h+=r.Qf*v,l+=r.Rf*v,g+=r.Sf*v,k+=r.Tf*-v,m+=r.Uf*-v,n+=r.Vf*-v;this.C.gb=a;this.C.hb=b;this.C.ib=e;this.D.gb=d;this.D.hb=c;this.D.ib=f;this.C.kb=h;this.C.lb=l;this.C.mb=g;this.D.kb=k;this.D.lb=m;this.D.mb=n},Jg:function(){this.zi.Ok();this.zi.fd(this.info);var a=this.C.ab,b=this.D.ab,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;x=this.D.W;A=this.D.X;u=this.D.Y;for(var C=0,F=this.info.Ka;C<F;){var B=C++,D=this.Zb[B],B=this.info.rows[B].Hg;D.Sh=B.va*a;D.Th=B.wa*a;D.Uh=B.xa*a;D.Vh=B.Ba*b;D.Wh=B.Ca*b;D.Xh=B.Da*b;var z,E,L;z=e*B.aa+d*B.ba+c*B.ca;E=f*B.aa+h*B.ba+l*B.ca;L=g*B.aa+k*B.ba+m*B.ca;D.Qf=z;D.Rf=E;D.Sf=L;z=n*B.ea+q*B.fa+p*B.ga;E=r*B.ea+v*B.fa+t*B.ga;L=x*B.ea+A*B.fa+u*B.ga;D.Tf=z;D.Uf=E;D.Vf=L;D.fe=a+b+(D.Qf*B.aa+D.Rf*B.ba+D.Sf*B.ca)+(D.Tf*B.ea+D.Uf*B.fa+D.Vf*B.ga);0!=D.fe&&(D.fe=1/D.fe)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},uh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Wc;b=this.C.Xc;e=this.C.Yc;d=this.D.Wc;c=this.D.Xc;f=this.D.Yc;h=this.C.Sc;l=this.C.Tc;g=this.C.Uc;k=this.D.Sc;m=this.D.Tc;n=this.D.Uc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Zb[r],t=v.ta,x=v.Hg,A=0,A=A+(a*x.va+b*x.wa+e*x.xa),A=A-(d*x.Ba+c*x.Ca+f*x.Da),A=A+(h*x.aa+l*x.ba+g*x.ca),A=A-(k*x.ea+m*x.fa+n*x.ga),v=(v.Fa-A)*r.fe*F.positionSplitImpulseBaumgarte,x=t.ub;t.ub+=v;0>t.ub&&(t.ub=0);v=t.ub-x;a+=r.Sh*v;b+=r.Th*v;e+=r.Uh*v;d+=r.Vh*-v;c+=r.Wh*-v;f+=r.Xh*-v;h+=r.Qf*v;l+=r.Rf*v;g+=r.Sf*v;k+=r.Tf*-v;m+=r.Uf*-v;n+=r.Vf*-v}this.C.Wc=a;this.C.Xc=b;this.C.Yc=e;this.D.Wc=d;this.D.Xc=c;this.D.Yc=f;this.C.Sc=h;this.C.Tc=l;this.C.Uc=g;this.D.Sc=k;this.D.Tc=m;this.D.Uc=n},th:function(){this.zi.Ok();this.zi.fd(this.info);var a=this.C.ab,b=this.D.ab,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;x=this.D.W;A=this.D.X;u=this.D.Y;for(var C=0,E=this.info.Ka;C<E;){var B=C++,D=this.Zb[B],z=this.info.rows[B].Hg;D.Sh=z.va*a;D.Th=z.wa*a;D.Uh=z.xa*a;D.Vh=z.Ba*b;D.Wh=z.Ca*b;D.Xh=z.Da*b;var M,L,I;M=e*z.aa+d*z.ba+c*z.ca;L=f*z.aa+h*z.ba+l*z.ca;I=g*z.aa+k*z.ba+m*z.ca;D.Qf=M;D.Rf=L;D.Sf=I;var P,U,ra;P=n*z.ea+q*z.fa+p*z.ga;U=r*z.ea+v*z.fa+t*z.ga;ra=x*z.ea+A*z.fa+u*z.ga;D.Tf=P;D.Uf=U;D.Vf=ra;D.fe=a+b+(D.Qf*z.aa+D.Rf*z.ba+D.Sf*z.ca)+(D.Tf*z.ea+D.Uf*z.fa+D.Vf*z.ga);0!=D.fe&&(D.fe=1/D.fe)}for(var za,Ga,Na,ib,Da,Ia,oa,R,Ta,Ca,xa,Ra,Ba=Ra=xa=Ca=Ta=R=oa=Ia=Da=ib=Na=Ga=za=0,sa=this.info.Ka;Ba<sa;){var Sa=Ba++,G=this.info.rows[Sa],Qa=this.Zb[Sa],W=G.ta,N=G.Hg,Q=0,Q=Q+(za*N.va+Ga*N.wa+Na*N.xa),Q=Q-(ib*N.Ba+Da*N.Ca+Ia*N.Da),Q=Q+(oa*N.aa+R*N.ba+Ta*N.ca),Q=Q-(Ca*N.ea+xa*N.fa+Ra*N.ga),Z=(G.Fa-Q)*Qa.fe*F.positionNgsBaumgarte,ba=W.ub;W.ub+=Z;0>W.ub&&(W.ub=0);Z=W.ub-ba;za+=Qa.Sh*Z;Ga+=Qa.Th*Z;Na+=Qa.Uh*Z;ib+=Qa.Vh*-Z;Da+=Qa.Wh*-Z;Ia+=Qa.Xh*-Z;oa+=Qa.Qf*Z;R+=Qa.Rf*Z;Ta+=Qa.Sf*Z;Ca+=Qa.Tf*-Z;xa+=Qa.Uf*-Z;Ra+=Qa.Vf*-Z}var S=this.C;S.a.v+=za;S.a.A+=Ga;S.a.B+=Na;var X=this.D;X.a.v+=ib;X.a.A+=Da;X.a.B+=Ia;var y=this.C,fa=Math.sqrt(oa*oa+R*R+Ta*Ta),T=.5*fa,ia,pa;if(.5>T){var wa=T*T;ia=.5*(1-.16666666666666666*wa+wa*wa*.008333333333333333);pa=1-.5*wa+wa*wa*.041666666666666664}else ia=Math.sin(T)/fa,pa=Math.cos(T);var ya,ha;ya=oa*ia;ha=R*ia;var Y,ma;Y=Ta*ia;ma=pa;var Ea,Ha,J,ta,ea=y.a.o,aa=y.a.m,Za=y.a.s,da=ea+aa+Za,O;0<da?(O=Math.sqrt(da+1),ta=.5*O,O=.5/O,Ea=(y.a.g-y.a.j)*O,Ha=(y.a.h-y.a.l)*O,J=(y.a.i-y.a.f)*O):ea>aa?ea>Za?(O=Math.sqrt(ea-aa-Za+1),Ea=.5*O,O=.5/O,Ha=(y.a.f+y.a.i)*O,J=(y.a.h+y.a.l)*O,ta=(y.a.g-y.a.j)*O):(O=Math.sqrt(Za-ea-aa+1),J=.5*O,O=.5/O,Ea=(y.a.h+y.a.l)*O,Ha=(y.a.j+y.a.g)*O,ta=(y.a.i-y.a.f)*O):aa>Za?(O=Math.sqrt(aa-Za-ea+1),Ha=.5*O,O=.5/O,Ea=(y.a.f+y.a.i)*O,J=(y.a.j+y.a.g)*O,ta=(y.a.h-y.a.l)*O):(O=Math.sqrt(Za-ea-aa+1),J=.5*O,O=.5/O,Ea=(y.a.h+y.a.l)*O,Ha=(y.a.j+y.a.g)*O,ta=(y.a.i-y.a.f)*O);Ea=ma*Ea+ya*ta+ha*J-Y*Ha;Ha=ma*Ha-ya*J+ha*ta+Y*Ea;J=ma*J+ya*Ha-ha*Ea+Y*ta;ta=ma*ta-ya*Ea-ha*Ha-Y*J;var va=Ea*Ea+Ha*Ha+J*J+ta*ta;1E-32<va&&(va=1/Math.sqrt(va));Ea*=va;Ha*=va;J*=va;ta*=va;var ob=Ea,na=Ha,Va=J,La=ta,ab=2*ob,Wa=2*na,gb=2*Va,ua=ob*ab,Aa=na*Wa,Ya=Va*gb,Ja=ob*Wa,wb=na*gb,Fa=ob*gb,ja=La*ab,qa=La*Wa,eb=La*gb;y.a.o=1-Aa-Ya;y.a.f=Ja-eb;y.a.h=Fa+qa;y.a.i=Ja+eb;y.a.m=1-ua-Ya;y.a.j=wb-ja;y.a.l=Fa-qa;y.a.g=wb+ja;y.a.s=1-ua-Aa;var Oa,Bb,mb,hb,pb,qb,$a,vb,Ab;Oa=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;Bb=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;mb=y.a.o*y.Ua+y.a.f*y.Xa+y.a.h*y.$a;hb=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;pb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;qb=y.a.i*y.Ua+y.a.m*y.Xa+y.a.j*y.$a;$a=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;vb=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;Ab=y.a.l*y.Ua+y.a.g*y.Xa+y.a.s*y.$a;y.P=Oa;y.R=Bb;y.S=mb;y.T=hb;y.U=pb;y.V=qb;y.W=$a;y.X=vb;y.Y=Ab;var bb,Ka,yb,H,cb,jb,zb,kb,xb;bb=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;Ka=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;yb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;H=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;cb=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;jb=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;zb=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;kb=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;xb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=bb;y.R=Ka;y.S=yb;y.T=H;y.U=cb;y.V=jb;y.W=zb;y.X=kb;y.Y=xb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var w=this.D,V=Math.sqrt(Ca*Ca+xa*xa+Ra*Ra),ca=.5*V,Db,Fb;if(.5>ca){var Pa=ca*ca;Db=.5*(1-.16666666666666666*Pa+Pa*Pa*.008333333333333333);Fb=1-.5*Pa+Pa*Pa*.041666666666666664}else Db=Math.sin(ca)/V,Fb=Math.cos(ca);var nb,rb;nb=Ca*Db;rb=xa*Db;var Cb,sb;Cb=Ra*Db;sb=Fb;var ga,Ua,fb,Xa,tb=w.a.o,Ma=w.a.m,Gb=w.a.s,Mb=tb+Ma+Gb,ka;0<Mb?(ka=Math.sqrt(Mb+1),Xa=.5*ka,ka=.5/ka,ga=(w.a.g-w.a.j)*ka,Ua=(w.a.h-w.a.l)*ka,fb=(w.a.i-w.a.f)*ka):tb>Ma?tb>Gb?(ka=Math.sqrt(tb-Ma-Gb+1),ga=.5*ka,ka=.5/ka,Ua=(w.a.f+w.a.i)*ka,fb=(w.a.h+w.a.l)*ka,Xa=(w.a.g-w.a.j)*ka):(ka=Math.sqrt(Gb-tb-Ma+1),fb=.5*ka,ka=.5/ka,ga=(w.a.h+w.a.l)*ka,Ua=(w.a.j+w.a.g)*ka,Xa=(w.a.i-w.a.f)*ka):Ma>Gb?(ka=Math.sqrt(Ma-Gb-tb+1),Ua=.5*ka,ka=.5/ka,ga=(w.a.f+w.a.i)*ka,fb=(w.a.j+w.a.g)*ka,Xa=(w.a.h-w.a.l)*ka):(ka=Math.sqrt(Gb-tb-Ma+1),fb=.5*ka,ka=.5/ka,ga=(w.a.h+w.a.l)*ka,Ua=(w.a.j+w.a.g)*ka,Xa=(w.a.i-w.a.f)*ka);ga=sb*ga+nb*Xa+rb*fb-Cb*Ua;Ua=sb*Ua-nb*fb+rb*Xa+Cb*ga;fb=sb*fb+nb*Ua-rb*ga+Cb*Xa;Xa=sb*Xa-nb*ga-rb*Ua-Cb*fb;var Hb=ga*ga+Ua*Ua+fb*fb+Xa*Xa;1E-32<Hb&&(Hb=1/Math.sqrt(Hb));ga*=Hb;Ua*=Hb;fb*=Hb;Xa*=Hb;var Ob=ga,Jb=Ua,Nb=fb,Pb=Xa,Qb=2*Ob,Ub=2*Jb,Wb=2*Nb,Xb=Ob*Qb,ec=Jb*Ub,fc=Nb*Wb,$b=Ob*Ub,dc=Jb*Wb,kc=Ob*Wb,Lb=Pb*Qb,Yb=Pb*Ub,Sb=Pb*Wb;w.a.o=1-ec-fc;w.a.f=$b-Sb;w.a.h=kc+Yb;w.a.i=$b+Sb;w.a.m=1-Xb-fc;w.a.j=dc-Lb;w.a.l=kc-Yb;w.a.g=dc+Lb;w.a.s=1-Xb-ec;var nc,ac,Ib,Vb,bc,Kb,Tb,lb,hc;nc=w.a.o*w.Sa+w.a.f*w.Va+w.a.h*w.Ya;ac=w.a.o*w.Ta+w.a.f*w.Wa+w.a.h*w.Za;Ib=w.a.o*w.Ua+w.a.f*w.Xa+w.a.h*w.$a;Vb=w.a.i*w.Sa+w.a.m*w.Va+w.a.j*w.Ya;bc=w.a.i*w.Ta+w.a.m*w.Wa+w.a.j*w.Za;Kb=w.a.i*w.Ua+w.a.m*w.Xa+w.a.j*w.$a;Tb=w.a.l*w.Sa+w.a.g*w.Va+w.a.s*w.Ya;lb=w.a.l*w.Ta+w.a.g*w.Wa+w.a.s*w.Za;hc=w.a.l*w.Ua+w.a.g*w.Xa+w.a.s*w.$a;w.P=nc;w.R=ac;w.S=Ib;w.T=Vb;w.U=bc;w.V=Kb;w.W=Tb;w.X=lb;w.Y=hc;var ic,lc,rc,gc,mc,pc,qc,oc,uc;ic=w.P*w.a.o+w.R*w.a.f+w.S*w.a.h;lc=w.P*w.a.i+w.R*w.a.m+w.S*w.a.j;rc=w.P*w.a.l+w.R*w.a.g+w.S*w.a.s;gc=w.T*w.a.o+w.U*w.a.f+w.V*w.a.h;mc=w.T*w.a.i+w.U*w.a.m+w.V*w.a.j;pc=w.T*w.a.l+w.U*w.a.g+w.V*w.a.s;qc=w.W*w.a.o+w.X*w.a.f+w.Y*w.a.h;oc=w.W*w.a.i+w.X*w.a.m+w.Y*w.a.j;uc=w.W*w.a.l+w.X*w.a.g+w.Y*w.a.s;w.P=ic;w.R=lc;w.S=rc;w.T=gc;w.U=mc;w.V=pc;w.W=qc;w.X=oc;w.Y=uc;w.P*=w.N.x;w.R*=w.N.x;w.S*=w.N.x;w.T*=w.N.y;w.U*=w.N.y;w.V*=w.N.y;w.W*=w.N.z;w.X*=w.N.z;w.Y*=w.N.z},cf:function(){for(var a=0,b=this.info.Ka;a<b;){var e=a++,d=this.info.rows[e],e=d.ta,c=d.Bj,d=d.Aj,f,h,l;l=h=f=0;f+=c.va*e.zc;h+=c.wa*e.zc;l+=c.xa*e.zc;f+=d.va*e.yc;h+=d.wa*e.yc;l+=d.xa*e.yc;e.Xe=f;e.Ye=h;e.Ze=l}this.zi.Ok()}});lc.ua=Db;lc.prototype=vb(Db.prototype,{qh:function(a){this.$.gd();this.$.Yd(a,this.info);this.C=this.info.Ie;this.D=this.info.Je;a=this.C.ab;var b=this.D.ab,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;x=this.D.W;A=this.D.X;u=this.D.Y;for(var C=0,F=this.info.Ka;C<F;){var B=C++,D=this.info.rows[B],B=this.Zb[B],z=D.Aa;z.Cm();z.xc&1?(B.pd=z.va*a,B.qd=z.wa*a,B.rd=z.xa*a,B.sd=z.Ba*b,B.td=z.Ca*b,B.ud=z.Da*b):(B.pd=0,B.qd=0,B.rd=0,B.sd=0,B.td=0,B.ud=0);if(z.xc&2){var E,L,I;E=e*z.aa+d*z.ba+c*z.ca;L=f*z.aa+h*z.ba+l*z.ca;I=g*z.aa+k*z.ba+m*z.ca;B.jd=E;B.kd=L;B.ld=I;E=n*z.ea+q*z.fa+p*z.ga;L=r*z.ea+v*z.fa+t*z.ga;I=x*z.ea+A*z.fa+u*z.ga;B.md=E;B.nd=L;B.od=I}else B.jd=0,B.kd=0,B.ld=0,B.md=0,B.nd=0,B.od=0;B.wf=B.pd*z.va+B.qd*z.wa+B.rd*z.xa+(B.sd*z.Ba+B.td*z.Ca+B.ud*z.Da)+(B.jd*z.aa+B.kd*z.ba+B.ld*z.ca)+(B.md*z.ea+B.nd*z.fa+B.od*z.ga);B.mass=B.wf+D.Ma;B.wf&&(B.wf=1/B.wf);0!=B.mass&&(B.mass=1/B.mass)}},zh:function(a){var b=this.$.Hc==Ub.BAUMGARTE?F.jointWarmStartingFactorForBaungarte:F.jointWarmStartingFactor,b=b*a.dtRatio;if(0>=b)for(b=0,a=this.info.Ka;b<a;){var e=b++,e=this.info.rows[e].ta;e.ta=0;e.Zc=0;e.ub=0}else{var d,c,f,h,l,g,k,m,n,q;a=this.C.gb;e=this.C.hb;d=this.C.ib;c=this.D.gb;f=this.D.hb;h=this.D.ib;l=this.C.kb;g=this.C.lb;k=this.C.mb;m=this.D.kb;n=this.D.lb;q=this.D.mb;for(var p=0,r=this.info.Ka;p<r;){var v=p++,t=this.Zb[v],v=this.info.rows[v].ta;v.ta*=b;v.Zc*=b;v=v.ta+v.Zc;a+=t.pd*v;e+=t.qd*v;d+=t.rd*v;c+=t.sd*-v;f+=t.td*-v;h+=t.ud*-v;l+=t.jd*v;g+=t.kd*v;k+=t.ld*v;m+=t.md*-v;n+=t.nd*-v;q+=t.od*-v}this.C.gb=a;this.C.hb=e;this.C.ib=d;this.D.gb=c;this.D.hb=f;this.D.ib=h;this.C.kb=l;this.C.lb=g;this.C.mb=k;this.D.kb=m;this.D.lb=n;this.D.mb=q}},vh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.gb;b=this.C.hb;e=this.C.ib;d=this.D.gb;c=this.D.hb;f=this.D.ib;h=this.C.kb;l=this.C.lb;g=this.C.mb;k=this.D.kb;m=this.D.lb;n=this.D.mb;for(var q=0,p=this.info.Ka;q<p;){var r=q++,v=this.info.rows[r],r=this.Zb[r],t=v.ta,x=v.Aa;if(0!=v.fb){var A=0,A=A+(a*x.va+b*x.wa+e*x.xa),A=A-(d*x.Ba+c*x.Ca+f*x.Da),A=A+(h*x.aa+l*x.ba+g*x.ca),A=A-(k*x.ea+m*x.fa+n*x.ga),A=(-v.motorSpeed-A)*r.wf,u=t.Zc;t.Zc+=A;t.Zc<-v.fb?t.Zc=-v.fb:t.Zc>v.fb&&(t.Zc=v.fb);A=t.Zc-u;x.xc&1&&(a+=r.pd*A,b+=r.qd*A,e+=r.rd*A,d+=r.sd*-A,c+=r.td*-A,f+=r.ud*-A);x.xc&2&&(h+=r.jd*A,l+=r.kd*A,g+=r.ld*A,k+=r.md*-A,m+=r.nd*-A,n+=r.od*-A)}}q=0;for(p=this.info.Ka;q<p;)r=q++,v=this.info.rows[r],r=this.Zb[r],t=v.ta,x=v.Aa,A=0,A+=a*x.va+b*x.wa+e*x.xa,A-=d*x.Ba+c*x.Ca+f*x.Da,A+=h*x.aa+l*x.ba+g*x.ca,A-=k*x.ea+m*x.fa+n*x.ga,A=(v.Fa-A-t.ta*v.Ma)*r.mass,u=t.ta,t.ta+=A,t.ta<v.Ia?t.ta=v.Ia:t.ta>v.Ha&&(t.ta=v.Ha),A=t.ta-u,x.xc&1&&(a+=r.pd*A,b+=r.qd*A,e+=r.rd*A,d+=r.sd*-A,c+=r.td*-A,f+=r.ud*-A),x.xc&2&&(h+=r.jd*A,l+=r.kd*A,g+=r.ld*A,k+=r.md*-A,m+=r.nd*-A,n+=r.od*-A);this.C.gb=a;this.C.hb=b;this.C.ib=e;this.D.gb=d;this.D.hb=c;this.D.ib=f;this.C.kb=h;this.C.lb=l;this.C.mb=g;this.D.kb=k;this.D.lb=m;this.D.mb=n},Bi:function(a){for(var b,e,d,c,f,h,l=h=f=c=d=e=b=0,g=this.info.Ka;l<g;){var k=l++,m=this.info.rows[k],k=m.ta,m=m.Aa;m.xc&1?(b+=m.va*k.ta,e+=m.wa*k.ta,d+=m.xa*k.ta):m.xc&2&&(c+=m.aa*k.ta,f+=m.ba*k.ta,h+=m.ca*k.ta)}this.$.Fi=b*a.invDt;this.$.Gi=e*a.invDt;this.$.Hi=d*a.invDt;this.$.Ii=c*a.invDt;this.$.Ji=f*a.invDt;this.$.Ki=h*a.invDt},Jg:function(){this.$.gd();this.$.fd(this.info);this.C=this.info.Ie;this.D=this.info.Je;var a=this.C.ab,b=this.D.ab,e,d,c,f,h,l,g,k,m,n,q,p,r,v,t,x,A,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;v=this.D.U;t=this.D.V;x=this.D.W;A=this.D.X;u=this.D.Y;for(var C=0,E=this.info.Ka;C<E;){var B=C++,D=this.Zb[B],B=this.info.rows[B].Aa;D.pd=B.va*a;D.qd=B.wa*a;D.rd=B.xa*a;D.sd=B.Ba*b;D.td=B.Ca*b;D.ud=B.Da*b;var z,F,L;z=e*B.aa+d*B.ba+c*B.ca;F=f*B.aa+h*B.ba+l*B.ca;L=g*B.aa+k*B.ba+m*B.ca;D.jd=z;D.kd=F;D.ld=L;z=n*B.ea+q*B.fa+p*B.ga;F=r*B.ea+v*B.fa+t*B.ga;L=x*B.ea+A*B.fa+u*B.ga;D.md=z;D.nd=F;D.od=L;D.mass=D.pd*B.va+D.qd*B.wa+D.rd*B.xa+(D.sd*B.Ba+D.td*B.Ca+D.ud*B.Da)+(D.jd*B.aa+D.kd*B.ba+D.ld*B.ca)+(D.md*B.ea+D.nd*B.fa+D.od*B.ga);D.mass&&(D.mass=1/D.mass)}a=0;for(b=this.info.Ka;a<b;)e=a++,this.info.rows[e].ta.ub=0},uh:function(){var a,b,e,d,c,f,h,l,g,k,m,n;a=this.C.Wc;b=this.C.Xc;e=this.C.Yc;d=this.D.Wc;c=this.D.Xc;f=this.D.Yc;h=this.C.Sc;l=this.C.Tc;g=this.C.Uc;k=this.D.Sc;m=this.D.Tc;n=this.D.Uc;for(var q=0,p=this.info.Ka;q<p;){var r=q++,t=this.info.rows[r],r=this.Zb[r],E=t.ta,x=t.Aa,A=0,A=A+(a*x.va+b*x.wa+e*x.xa),A=A-(d*x.Ba+c*x.Ca+f*x.Da),A=A+(h*x.aa+l*x.ba+g*x.ca),A=A-(k*x.ea+m*x.fa+n*x.ga),x=(t.Fa*F.positionSplitImpulseBaumgarte-A)*r.mass,A=E.ub;E.ub+=x;E.ub<t.Ia?E.ub=t.Ia:E.ub>t.Ha&&(E.ub=t.Ha);x=E.ub-A;a+=r.pd*x;b+=r.qd*x;e+=r.rd*x;d+=r.sd*-x;c+=r.td*-x;f+=r.ud*-x;h+=r.jd*x;l+=r.kd*x;g+=r.ld*x;k+=r.md*-x;m+=r.nd*-x;n+=r.od*-x}this.C.Wc=a;this.C.Xc=b;this.C.Yc=e;this.D.Wc=d;this.D.Xc=c;this.D.Yc=f;this.C.Sc=h;this.C.Tc=l;this.C.Uc=g;this.D.Sc=k;this.D.Tc=m;this.D.Uc=n},th:function(){this.$.gd();this.$.fd(this.info);this.C=this.info.Ie;this.D=this.info.Je;var a=this.C.ab,b=this.D.ab,e,d,c,f,h,l,g,k,m,n,q,p,r,t,E,x,A,u;e=this.C.P;d=this.C.R;c=this.C.S;f=this.C.T;h=this.C.U;l=this.C.V;g=this.C.W;k=this.C.X;m=this.C.Y;n=this.D.P;q=this.D.R;p=this.D.S;r=this.D.T;t=this.D.U;E=this.D.V;x=this.D.W;A=this.D.X;u=this.D.Y;for(var C=0,K=this.info.Ka;C<K;){var B=C++,D=this.Zb[B],z=this.info.rows[B].Aa;D.pd=z.va*a;D.qd=z.wa*a;D.rd=z.xa*a;D.sd=z.Ba*b;D.td=z.Ca*b;D.ud=z.Da*b;var M,L,I;M=e*z.aa+d*z.ba+c*z.ca;L=f*z.aa+h*z.ba+l*z.ca;I=g*z.aa+k*z.ba+m*z.ca;D.jd=M;D.kd=L;D.ld=I;var P,U,ra;P=n*z.ea+q*z.fa+p*z.ga;U=r*z.ea+t*z.fa+E*z.ga;ra=x*z.ea+A*z.fa+u*z.ga;D.md=P;D.nd=U;D.od=ra;D.mass=D.pd*z.va+D.qd*z.wa+D.rd*z.xa+(D.sd*z.Ba+D.td*z.Ca+D.ud*z.Da)+(D.jd*z.aa+D.kd*z.ba+D.ld*z.ca)+(D.md*z.ea+D.nd*z.fa+D.od*z.ga);D.mass&&(D.mass=1/D.mass)}for(var za,Ga,Na,Ta,Da,Ia,oa,R,Va,Ca,xa,Ra,Ba=Ra=xa=Ca=Va=R=oa=Ia=Da=Ta=Na=Ga=za=0,sa=this.info.Ka;Ba<sa;){var Sa=Ba++,G=this.info.rows[Sa],Qa=this.Zb[Sa],W=G.ta,N=G.Aa,Q=0,Q=Q+(za*N.va+Ga*N.wa+Na*N.xa),Q=Q-(Ta*N.Ba+Da*N.Ca+Ia*N.Da),Q=Q+(oa*N.aa+R*N.ba+Va*N.ca),Q=Q-(Ca*N.ea+xa*N.fa+Ra*N.ga),Z=(G.Fa*F.positionNgsBaumgarte-Q)*Qa.mass,ba=W.ub;W.ub+=Z;W.ub<G.Ia?W.ub=G.Ia:W.ub>G.Ha&&(W.ub=G.Ha);Z=W.ub-ba;za+=Qa.pd*Z;Ga+=Qa.qd*Z;Na+=Qa.rd*Z;Ta+=Qa.sd*-Z;Da+=Qa.td*-Z;Ia+=Qa.ud*-Z;oa+=Qa.jd*Z;R+=Qa.kd*Z;Va+=Qa.ld*Z;Ca+=Qa.md*-Z;xa+=Qa.nd*-Z;Ra+=Qa.od*-Z}var S=this.C;S.a.v+=za;S.a.A+=Ga;S.a.B+=Na;var X=this.D;X.a.v+=Ta;X.a.A+=Da;X.a.B+=Ia;var y=this.C,fa=Math.sqrt(oa*oa+R*R+Va*Va),T=.5*fa,ia,pa;if(.5>T){var wa=T*T;ia=.5*(1-.16666666666666666*wa+wa*wa*.008333333333333333);pa=1-.5*wa+wa*wa*.041666666666666664}else ia=Math.sin(T)/fa,pa=Math.cos(T);var ya,ha;ya=oa*ia;ha=R*ia;var Y,ma;Y=Va*ia;ma=pa;var Ea,Ha,J,ta,ea=y.a.o,aa=y.a.m,Za=y.a.s,da=ea+aa+Za,O;0<da?(O=Math.sqrt(da+1),ta=.5*O,O=.5/O,Ea=(y.a.g-y.a.j)*O,Ha=(y.a.h-y.a.l)*O,J=(y.a.i-y.a.f)*O):ea>aa?ea>Za?(O=Math.sqrt(ea-aa-Za+1),Ea=.5*O,O=.5/O,Ha=(y.a.f+y.a.i)*O,J=(y.a.h+y.a.l)*O,ta=(y.a.g-y.a.j)*O):(O=Math.sqrt(Za-ea-aa+1),J=.5*O,O=.5/O,Ea=(y.a.h+y.a.l)*O,Ha=(y.a.j+y.a.g)*O,ta=(y.a.i-y.a.f)*O):aa>Za?(O=Math.sqrt(aa-Za-ea+1),Ha=.5*O,O=.5/O,Ea=(y.a.f+y.a.i)*O,J=(y.a.j+y.a.g)*O,ta=(y.a.h-y.a.l)*O):(O=Math.sqrt(Za-ea-aa+1),J=.5*O,O=.5/O,Ea=(y.a.h+y.a.l)*O,Ha=(y.a.j+y.a.g)*O,ta=(y.a.i-y.a.f)*O);Ea=ma*Ea+ya*ta+ha*J-Y*Ha;Ha=ma*Ha-ya*J+ha*ta+Y*Ea;J=ma*J+ya*Ha-ha*Ea+Y*ta;ta=ma*ta-ya*Ea-ha*Ha-Y*J;var va=Ea*Ea+Ha*Ha+J*J+ta*ta;1E-32<va&&(va=1/Math.sqrt(va));Ea*=va;Ha*=va;J*=va;ta*=va;var Wa=Ea,na=Ha,vb=J,La=ta,ab=2*Wa,ub=2*na,gb=2*vb,ua=Wa*ab,Aa=na*ub,Ya=vb*gb,Ja=Wa*ub,wb=na*gb,Fa=Wa*gb,ja=La*ab,qa=La*ub,eb=La*gb;y.a.o=1-Aa-Ya;y.a.f=Ja-eb;y.a.h=Fa+qa;y.a.i=Ja+eb;y.a.m=1-ua-Ya;y.a.j=wb-ja;y.a.l=Fa-qa;y.a.g=wb+ja;y.a.s=1-ua-Aa;var Oa,Bb,mb,hb,pb,qb,$a,yb,Ab;Oa=y.a.o*y.Sa+y.a.f*y.Va+y.a.h*y.Ya;Bb=y.a.o*y.Ta+y.a.f*y.Wa+y.a.h*y.Za;mb=y.a.o*y.Ua+y.a.f*y.Xa+y.a.h*y.$a;hb=y.a.i*y.Sa+y.a.m*y.Va+y.a.j*y.Ya;pb=y.a.i*y.Ta+y.a.m*y.Wa+y.a.j*y.Za;qb=y.a.i*y.Ua+y.a.m*y.Xa+y.a.j*y.$a;$a=y.a.l*y.Sa+y.a.g*y.Va+y.a.s*y.Ya;yb=y.a.l*y.Ta+y.a.g*y.Wa+y.a.s*y.Za;Ab=y.a.l*y.Ua+y.a.g*y.Xa+y.a.s*y.$a;y.P=Oa;y.R=Bb;y.S=mb;y.T=hb;y.U=pb;y.V=qb;y.W=$a;y.X=yb;y.Y=Ab;var bb,Ka,zb,H,cb,jb,Db,kb,xb;bb=y.P*y.a.o+y.R*y.a.f+y.S*y.a.h;Ka=y.P*y.a.i+y.R*y.a.m+y.S*y.a.j;zb=y.P*y.a.l+y.R*y.a.g+y.S*y.a.s;H=y.T*y.a.o+y.U*y.a.f+y.V*y.a.h;cb=y.T*y.a.i+y.U*y.a.m+y.V*y.a.j;jb=y.T*y.a.l+y.U*y.a.g+y.V*y.a.s;Db=y.W*y.a.o+y.X*y.a.f+y.Y*y.a.h;kb=y.W*y.a.i+y.X*y.a.m+y.Y*y.a.j;xb=y.W*y.a.l+y.X*y.a.g+y.Y*y.a.s;y.P=bb;y.R=Ka;y.S=zb;y.T=H;y.U=cb;y.V=jb;y.W=Db;y.X=kb;y.Y=xb;y.P*=y.N.x;y.R*=y.N.x;y.S*=y.N.x;y.T*=y.N.y;y.U*=y.N.y;y.V*=y.N.y;y.W*=y.N.z;y.X*=y.N.z;y.Y*=y.N.z;var w=this.D,V=Math.sqrt(Ca*Ca+xa*xa+Ra*Ra),ca=.5*V,Fb,Jb;if(.5>ca){var Pa=ca*ca;Fb=.5*(1-.16666666666666666*Pa+Pa*Pa*.008333333333333333);Jb=1-.5*Pa+Pa*Pa*.041666666666666664}else Fb=Math.sin(ca)/V,Jb=Math.cos(ca);var nb,rb;nb=Ca*Fb;rb=xa*Fb;var Cb,sb;Cb=Ra*Fb;sb=Jb;var ga,Ua,fb,Xa,tb=w.a.o,Ma=w.a.m,Gb=w.a.s,Mb=tb+Ma+Gb,ka;0<Mb?(ka=Math.sqrt(Mb+1),Xa=.5*ka,ka=.5/ka,ga=(w.a.g-w.a.j)*ka,Ua=(w.a.h-w.a.l)*ka,fb=(w.a.i-w.a.f)*ka):tb>Ma?tb>Gb?(ka=Math.sqrt(tb-Ma-Gb+1),ga=.5*ka,ka=.5/ka,Ua=(w.a.f+w.a.i)*ka,fb=(w.a.h+w.a.l)*ka,Xa=(w.a.g-w.a.j)*ka):(ka=Math.sqrt(Gb-tb-Ma+1),fb=.5*ka,ka=.5/ka,ga=(w.a.h+w.a.l)*ka,Ua=(w.a.j+w.a.g)*ka,Xa=(w.a.i-w.a.f)*ka):Ma>Gb?(ka=Math.sqrt(Ma-Gb-tb+1),Ua=.5*ka,ka=.5/ka,ga=(w.a.f+w.a.i)*ka,fb=(w.a.j+w.a.g)*ka,Xa=(w.a.h-w.a.l)*ka):(ka=Math.sqrt(Gb-tb-Ma+1),fb=.5*ka,ka=.5/ka,ga=(w.a.h+w.a.l)*ka,Ua=(w.a.j+w.a.g)*ka,Xa=(w.a.i-w.a.f)*ka);ga=sb*ga+nb*Xa+rb*fb-Cb*Ua;Ua=sb*Ua-nb*fb+rb*Xa+Cb*ga;fb=sb*fb+nb*Ua-rb*ga+Cb*Xa;Xa=sb*Xa-nb*ga-rb*Ua-Cb*fb;var Hb=ga*ga+Ua*Ua+fb*fb+Xa*Xa;1E-32<Hb&&(Hb=1/Math.sqrt(Hb));ga*=Hb;Ua*=Hb;fb*=Hb;Xa*=Hb;var Ob=ga,Nb=Ua,Pb=fb,Qb=Xa,Wb=2*Ob,Ub=2*Nb,Xb=2*Pb,ec=Ob*Wb,fc=Nb*Ub,hc=Pb*Xb,$b=Ob*Ub,dc=Nb*Xb,kc=Ob*Xb,Lb=Qb*Wb,Yb=Qb*Ub,Sb=Qb*Xb;w.a.o=1-fc-hc;w.a.f=$b-Sb;w.a.h=kc+Yb;w.a.i=$b+Sb;w.a.m=1-ec-hc;w.a.j=dc-Lb;w.a.l=kc-Yb;w.a.g=dc+Lb;w.a.s=1-ec-fc;var nc,ac,Ib,Vb,bc,Kb,Tb,lb,ic;nc=w.a.o*w.Sa+w.a.f*w.Va+w.a.h*w.Ya;ac=w.a.o*w.Ta+w.a.f*w.Wa+w.a.h*w.Za;Ib=w.a.o*w.Ua+w.a.f*w.Xa+w.a.h*w.$a;Vb=w.a.i*w.Sa+w.a.m*w.Va+w.a.j*w.Ya;bc=w.a.i*w.Ta+w.a.m*w.Wa+w.a.j*w.Za;Kb=w.a.i*w.Ua+w.a.m*w.Xa+w.a.j*w.$a;Tb=w.a.l*w.Sa+w.a.g*w.Va+w.a.s*w.Ya;lb=w.a.l*w.Ta+w.a.g*w.Wa+w.a.s*w.Za;ic=w.a.l*w.Ua+w.a.g*w.Xa+w.a.s*w.$a;w.P=nc;w.R=ac;w.S=Ib;w.T=Vb;w.U=bc;w.V=Kb;w.W=Tb;w.X=lb;w.Y=ic;var lc,mc,rc,gc,pc,qc,tc,oc,uc;lc=w.P*w.a.o+w.R*w.a.f+w.S*w.a.h;mc=w.P*w.a.i+w.R*w.a.m+w.S*w.a.j;rc=w.P*w.a.l+w.R*w.a.g+w.S*w.a.s;gc=w.T*w.a.o+w.U*w.a.f+w.V*w.a.h;pc=w.T*w.a.i+w.U*w.a.m+w.V*w.a.j;qc=w.T*w.a.l+w.U*w.a.g+w.V*w.a.s;tc=w.W*w.a.o+w.X*w.a.f+w.Y*w.a.h;oc=w.W*w.a.i+w.X*w.a.m+w.Y*w.a.j;uc=w.W*w.a.l+w.X*w.a.g+w.Y*w.a.s;w.P=lc;w.R=mc;w.S=rc;w.T=gc;w.U=pc;w.V=qc;w.W=tc;w.X=oc;w.Y=uc;w.P*=w.N.x;w.R*=w.N.x;w.S*=w.N.x;w.T*=w.N.y;w.U*=w.N.y;w.V*=w.N.y;w.W*=w.N.z;w.X*=w.N.z;w.Y*=w.N.z},cf:function(){this.$.gd();this.$.Gl()}});E.prototype={Ll:function(a){switch(this.Lb){case 1:this.Uc=this.Tc=this.Sc=this.Yc=this.Xc=this.Wc=this.mb=this.lb=this.kb=this.ib=this.hb=this.gb=0;break;case 0:case 2:var b,e,d,c,f;b=this.gb*a;e=this.hb*a;d=this.ib*a;c=this.kb*a;f=this.lb*a;a=this.mb*a;var h=b*b+e*e+d*d,l=c*c+f*f+a*a;if(h||l){h>F.maxTranslationPerStep*F.maxTranslationPerStep&&(h=F.maxTranslationPerStep/Math.sqrt(h),this.gb*=h,this.hb*=h,this.ib*=h,b*=h,e*=h,d*=h);l>F.maxRotationPerStep*F.maxRotationPerStep&&(l=F.maxRotationPerStep/Math.sqrt(l),this.kb*=l,this.lb*=l,this.mb*=l,c*=l,f*=l,a*=l);this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(c*c+f*f+a*a);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));c*=b;f*=b;a*=b;b=e;e=this.a.o;d=this.a.m;var l=this.a.s,h=e+d+l,g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+c*e+f*d-a*l;l=b*l-c*d+f*e+a*h;d=b*d+c*l-f*h+a*e;e=b*e-c*h-f*l-a*d;a=h*h+l*l+d*d+e*e;1E-32<a&&(a=1/Math.sqrt(a));f=h*a;h=l*a;d*=a;b=e*a;var k=2*f;g=2*h;e=2*d;a=f*k;c=h*g;d*=e;l=f*g;h*=e;f*=e;k*=b;g*=b;b*=e;this.a.o=1-c-d;this.a.f=l-b;this.a.h=f+g;this.a.i=l+b;this.a.m=1-a-d;this.a.j=h-k;this.a.l=f-g;this.a.g=h+k;this.a.s=1-a-c;f=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;b=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;e=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;d=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;h=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=f;this.R=a;this.S=c;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;f=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;c=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=f;this.R=a;this.S=c;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}}},Tm:function(){var a=this.Sc*this.Sc+this.Tc*this.Tc+this.Uc*this.Uc;if(this.Wc*this.Wc+this.Xc*this.Xc+this.Yc*this.Yc||a)switch(this.Lb){case 1:this.Uc=this.Tc=this.Sc=this.Yc=this.Xc=this.Wc=0;break;case 0:case 2:var b,e,d,c,f;b=this.Wc;e=this.Xc;d=this.Yc;a=this.Sc;c=this.Tc;f=this.Uc;this.Uc=this.Tc=this.Sc=this.Yc=this.Xc=this.Wc=0;this.a.v+=b;this.a.A+=e;this.a.B+=d;b=Math.sqrt(a*a+c*c+f*f);e=.5*b;.5>e?(e*=e,b=.5*(1-.16666666666666666*e+e*e*.008333333333333333),e=1-.5*e+e*e*.041666666666666664):(b=Math.sin(e)/b,e=Math.cos(e));a*=b;c*=b;f*=b;b=e;var h,l;e=this.a.o;d=this.a.m;l=this.a.s;h=e+d+l;var g;0<h?(g=Math.sqrt(h+1),e=.5*g,g=.5/g,h=(this.a.g-this.a.j)*g,l=(this.a.h-this.a.l)*g,d=(this.a.i-this.a.f)*g):e>d?e>l?(g=Math.sqrt(e-d-l+1),h=.5*g,g=.5/g,l=(this.a.f+this.a.i)*g,d=(this.a.h+this.a.l)*g,e=(this.a.g-this.a.j)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g):d>l?(g=Math.sqrt(d-l-e+1),l=.5*g,g=.5/g,h=(this.a.f+this.a.i)*g,d=(this.a.j+this.a.g)*g,e=(this.a.h-this.a.l)*g):(g=Math.sqrt(l-e-d+1),d=.5*g,g=.5/g,h=(this.a.h+this.a.l)*g,l=(this.a.j+this.a.g)*g,e=(this.a.i-this.a.f)*g);h=b*h+a*e+c*d-f*l;l=b*l-a*d+c*e+f*h;d=b*d+a*l-c*h+f*e;e=b*e-a*h-c*l-f*d;c=h*h+l*l+d*d+e*e;1E-32<c&&(c=1/Math.sqrt(c));a=h*c;h=l*c;d*=c;b=e*c;var k=2*a;g=2*h;e=2*d;c=a*k;f=h*g;d*=e;l=a*g;h*=e;a*=e;k*=b;g*=b;b*=e;this.a.o=1-f-d;this.a.f=l-b;this.a.h=a+g;this.a.i=l+b;this.a.m=1-c-d;this.a.j=h-k;this.a.l=a-g;this.a.g=h+k;this.a.s=1-c-f;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;b=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;e=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;d=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;l=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;h=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=c;this.S=f;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;c=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;b=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;e=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;d=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;l=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=c;this.S=f;this.T=b;this.U=e;this.V=d;this.W=l;this.X=h;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z}},Cj:function(){for(var a,b,e,d,c,f,h,l,g,k=g=l=h=f=c=d=e=b=a=0,m=this.Cc;null!=m;){var n=m.M,q=m.Kb;q.He();var p=m.qk*q.rf,r,t,E,x,A,u,C,F;r=m.ha.o*q.fg+m.ha.f*q.ig+m.ha.h*q.lg;t=m.ha.o*q.gg+m.ha.f*q.jg+m.ha.h*q.mg;E=m.ha.o*q.hg+m.ha.f*q.kg+m.ha.h*q.ng;x=m.ha.i*q.fg+m.ha.m*q.ig+m.ha.j*q.lg;A=m.ha.i*q.gg+m.ha.m*q.jg+m.ha.j*q.mg;u=m.ha.i*q.hg+m.ha.m*q.kg+m.ha.j*q.ng;C=m.ha.l*q.fg+m.ha.g*q.ig+m.ha.s*q.lg;F=m.ha.l*q.gg+m.ha.g*q.jg+m.ha.s*q.mg;var q=m.ha.l*q.hg+m.ha.g*q.kg+m.ha.s*q.ng,B,D,z,M,L,I;B=r*m.ha.o+t*m.ha.f+E*m.ha.h;D=r*m.ha.i+t*m.ha.m+E*m.ha.j;E=r*m.ha.l+t*m.ha.g+E*m.ha.s;z=x*m.ha.o+A*m.ha.f+u*m.ha.h;M=x*m.ha.i+A*m.ha.m+u*m.ha.j;u=x*m.ha.l+A*m.ha.g+u*m.ha.s;L=C*m.ha.o+F*m.ha.f+q*m.ha.h;I=C*m.ha.i+F*m.ha.m+q*m.ha.j;q=C*m.ha.l+F*m.ha.g+q*m.ha.s;r=B;t=D;x=z;A=M;C=L;F=I;r*=p;t*=p;E*=p;x*=p;A*=p;u*=p;C*=p;F*=p;var q=q*p,P,U,ra;z=m.ha.v*m.ha.v;M=m.ha.A*m.ha.A;P=m.ha.B*m.ha.B;L=-m.ha.v*m.ha.A;I=-m.ha.A*m.ha.B;ra=-m.ha.B*m.ha.v;m=M+P;B=L;D=ra;P=z+P;U=I;z+=M;r+=m*p;t+=B*p;E+=D*p;x+=L*p;A+=P*p;u+=U*p;C+=ra*p;F+=I*p;q+=z*p;k+=p;a+=r;b+=t;e+=E;d+=x;c+=A;f+=u;h+=C;l+=F;g+=q;m=n}this.Nc=k;this.Ad=a;this.Bd=b;this.Cd=e;this.Dd=d;this.Ed=c;this.Fd=f;this.Gd=h;this.Hd=l;this.Id=g;a=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd);if(0<this.Nc&&0<a&&0==this.Lb){this.ab=1/this.Nc;a=this.Ed*this.Id-this.Fd*this.Hd;b=this.Dd*this.Id-this.Fd*this.Gd;e=this.Dd*this.Hd-this.Ed*this.Gd;d=this.Bd*this.Id-this.Cd*this.Hd;c=this.Ad*this.Id-this.Cd*this.Gd;f=this.Ad*this.Hd-this.Bd*this.Gd;h=this.Bd*this.Fd-this.Cd*this.Ed;l=this.Ad*this.Fd-this.Cd*this.Dd;g=this.Ad*this.Ed-this.Bd*this.Dd;k=this.Ad*a-this.Bd*b+this.Cd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Sa=a*k;this.Ta=-d*k;this.Ua=h*k;this.Va=-b*k;this.Wa=c*k;this.Xa=-l*k;this.Ya=e*k;this.Za=-f*k;this.$a=g*k;this.fi=this.Sa;this.gi=this.Ta;this.hi=this.Ua;this.ii=this.Va;this.ji=this.Wa;this.ki=this.Xa;this.li=this.Ya;this.mi=this.Za;this.ni=this.$a;this.Sa=this.fi*this.N.x;this.Ta=this.gi*this.N.x;this.Ua=this.hi*this.N.x;this.Va=this.ii*this.N.y;this.Wa=this.ji*this.N.y;this.Xa=this.ki*this.N.y;this.Ya=this.li*this.N.z;this.Za=this.mi*this.N.z;this.$a=this.ni*this.N.z}else this.ni=this.mi=this.li=this.ki=this.ji=this.ii=this.hi=this.gi=this.fi=this.$a=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.ab=0,0==this.Lb&&(this.Lb=1);a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Hb=!1;this.yb=0},cm:function(){var a=new t;a.x=this.a.v;a.y=this.a.A;a.z=this.a.B;return a},dm:function(a){a.x=this.a.v;a.y=this.a.A;a.z=this.a.B},ym:function(a){this.a.v=a.x;this.a.A=a.y;this.a.B=a.z;a=this.pa;var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Cc;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.pc,f.x=e,f.y=c,f.z=d,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=b}this.Hb=!1;this.yb=0},Rn:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.a.v+=b;this.a.A+=e;this.a.B+=a;b=this.pa;e=this.a;b.v=e.v;b.A=e.A;b.B=e.B;b.o=e.o;b.f=e.f;b.h=e.h;b.i=e.i;b.m=e.m;b.j=e.j;b.l=e.l;b.g=e.g;b.s=e.s;for(b=this.Cc;null!=b;){e=b.M;a=b.pa;var d=b.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;a=b.a;d=b.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;a.o=f;a.f=h;a.h=l;a.i=g;a.m=k;a.j=m;a.l=n;a.g=q;a.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;a.v=f;a.A=h;a.B=d;a.v+=c.v;a.A+=c.A;a.B+=c.B;b.Kb.Nb(b.u,b.pa);a=b.u.ma;c=b.u.na;d=b.u.oa;f=b.u.ja;h=b.u.ka;l=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=a<b.u.ma?a:b.u.ma;b.u.na=c<b.u.na?c:b.u.na;b.u.oa=d<b.u.oa?d:b.u.oa;b.u.ja=f>b.u.ja?f:b.u.ja;b.u.ka=h>b.u.ka?h:b.u.ka;b.u.la=l>b.u.la?l:b.u.la;null!=b.tb&&(a=b.a.v-b.pa.v,c=b.a.A-b.pa.A,d=b.a.B-b.pa.B,f=b.pc,f.x=a,f.y=c,f.z=d,b.Yb.mc.hc.vd(b.tb,b.u,b.pc));b=e}this.Hb=!1;this.yb=0},km:function(){var a=new M;a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s;return a},lm:function(a){a.e00=this.a.o;a.e01=this.a.f;a.e02=this.a.h;a.e10=this.a.i;a.e11=this.a.m;a.e12=this.a.j;a.e20=this.a.l;a.e21=this.a.g;a.e22=this.a.s},In:function(a){this.a.o=a.e00;this.a.f=a.e01;this.a.h=a.e02;this.a.i=a.e10;this.a.m=a.e11;this.a.j=a.e12;this.a.l=a.e20;this.a.g=a.e21;this.a.s=a.e22;var b,e,d,c,f,h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Cc;null!=a;){b=a.M;e=a.pa;c=a.ha;d=this.pa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.pc,f.x=e,f.y=d,f.z=c,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=b}this.Hb=!1;this.yb=0},Jn:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;a=Math.sin(b);var c=Math.sin(e),f=Math.sin(d);b=Math.cos(b);e=Math.cos(e);d=Math.cos(d);this.a.o=e*d;this.a.f=-e*f;this.a.h=c;this.a.i=b*f+d*a*c;this.a.m=b*d-a*c*f;this.a.j=-e*a;this.a.l=a*f-b*d*c;this.a.g=d*a+b*c*f;this.a.s=b*e;var h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;c=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;f=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;e=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;b=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=c;this.S=f;this.T=e;this.U=d;this.V=b;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;c=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;f=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;e=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;b=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=c;this.S=f;this.T=e;this.U=d;this.V=b;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;c=this.a;a.v=c.v;a.A=c.A;a.B=c.B;a.o=c.o;a.f=c.f;a.h=c.h;a.i=c.i;a.m=c.m;a.j=c.j;a.l=c.l;a.g=c.g;a.s=c.s;for(a=this.Cc;null!=a;){c=a.M;f=a.pa;d=a.ha;e=this.pa;var k,m,n,q,p;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;f=a.a;d=a.ha;e=this.a;b=e.o*d.o+e.f*d.i+e.h*d.l;h=e.o*d.f+e.f*d.m+e.h*d.g;l=e.o*d.h+e.f*d.j+e.h*d.s;g=e.i*d.o+e.m*d.i+e.j*d.l;k=e.i*d.f+e.m*d.m+e.j*d.g;m=e.i*d.h+e.m*d.j+e.j*d.s;n=e.l*d.o+e.g*d.i+e.s*d.l;q=e.l*d.f+e.g*d.m+e.s*d.g;p=e.l*d.h+e.g*d.j+e.s*d.s;f.o=b;f.f=h;f.h=l;f.i=g;f.m=k;f.j=m;f.l=n;f.g=q;f.s=p;b=e.o*d.v+e.f*d.A+e.h*d.B;h=e.i*d.v+e.m*d.A+e.j*d.B;d=e.l*d.v+e.g*d.A+e.s*d.B;f.v=b;f.A=h;f.B=d;f.v+=e.v;f.A+=e.A;f.B+=e.B;a.Kb.Nb(a.u,a.pa);f=a.u.ma;e=a.u.na;d=a.u.oa;b=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=f<a.u.ma?f:a.u.ma;a.u.na=e<a.u.na?e:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=b>a.u.ja?b:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(f=a.a.v-a.pa.v,e=a.a.A-a.pa.A,d=a.a.B-a.pa.B,b=a.pc,b.x=f,b.y=e,b.z=d,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=c}this.Hb=!1;this.yb=0},rm:function(a){var b,e,d,c,f,h,l,g,k;b=a.e00;e=a.e01;d=a.e02;c=a.e10;f=a.e11;h=a.e12;l=a.e20;g=a.e21;k=a.e22;var m;a=b*this.a.o+e*this.a.i+d*this.a.l;m=b*this.a.f+e*this.a.m+d*this.a.g;b=b*this.a.h+e*this.a.j+d*this.a.s;e=c*this.a.o+f*this.a.i+h*this.a.l;d=c*this.a.f+f*this.a.m+h*this.a.g;c=c*this.a.h+f*this.a.j+h*this.a.s;f=l*this.a.o+g*this.a.i+k*this.a.l;h=l*this.a.f+g*this.a.m+k*this.a.g;l=l*this.a.h+g*this.a.j+k*this.a.s;this.a.o=a;this.a.f=m;this.a.h=b;this.a.i=e;this.a.m=d;this.a.j=c;this.a.l=f;this.a.g=h;this.a.s=l;l=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;g=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;a=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;m=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;k=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;c=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;f=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;h=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;b=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=c;this.W=f;this.X=h;this.Y=b;l=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;a=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;m=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;k=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;c=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;f=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;h=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=l;this.R=g;this.S=a;this.T=m;this.U=k;this.V=c;this.W=f;this.X=h;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;l=this.pa;g=this.a;l.v=g.v;l.A=g.A;l.B=g.B;l.o=g.o;l.f=g.f;l.h=g.h;l.i=g.i;l.m=g.m;l.j=g.j;l.l=g.l;l.g=g.g;l.s=g.s;for(l=this.Cc;null!=l;){g=l.M;a=l.pa;k=l.ha;m=this.pa;var n,q,p;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;a=l.a;k=l.ha;m=this.a;c=m.o*k.o+m.f*k.i+m.h*k.l;f=m.o*k.f+m.f*k.m+m.h*k.g;h=m.o*k.h+m.f*k.j+m.h*k.s;b=m.i*k.o+m.m*k.i+m.j*k.l;e=m.i*k.f+m.m*k.m+m.j*k.g;d=m.i*k.h+m.m*k.j+m.j*k.s;n=m.l*k.o+m.g*k.i+m.s*k.l;q=m.l*k.f+m.g*k.m+m.s*k.g;p=m.l*k.h+m.g*k.j+m.s*k.s;a.o=c;a.f=f;a.h=h;a.i=b;a.m=e;a.j=d;a.l=n;a.g=q;a.s=p;c=m.o*k.v+m.f*k.A+m.h*k.B;f=m.i*k.v+m.m*k.A+m.j*k.B;k=m.l*k.v+m.g*k.A+m.s*k.B;a.v=c;a.A=f;a.B=k;a.v+=m.v;a.A+=m.A;a.B+=m.B;l.Kb.Nb(l.u,l.pa);a=l.u.ma;m=l.u.na;k=l.u.oa;c=l.u.ja;f=l.u.ka;h=l.u.la;l.Kb.Nb(l.u,l.a);l.u.ma=a<l.u.ma?a:l.u.ma;l.u.na=m<l.u.na?m:l.u.na;l.u.oa=k<l.u.oa?k:l.u.oa;l.u.ja=c>l.u.ja?c:l.u.ja;l.u.ka=f>l.u.ka?f:l.u.ka;l.u.la=h>l.u.la?h:l.u.la;null!=l.tb&&(a=l.a.v-l.pa.v,m=l.a.A-l.pa.A,k=l.a.B-l.pa.B,c=l.pc,c.x=a,c.y=m,c.z=k,l.Yb.mc.hc.vd(l.tb,l.u,l.pc));l=g}this.Hb=!1;this.yb=0},wm:function(a){var b,e,d,c,f,h,l;b=a.x;e=a.y;a=a.z;h=Math.sin(b);var g=Math.sin(e),k=Math.sin(a),m=Math.cos(b);l=Math.cos(e);var n=Math.cos(a);d=l*n;c=-l*k;a=m*k+n*h*g;b=m*n-h*g*k;f=-l*h;e=h*k-m*n*g;h=n*h+m*g*k;l*=m;k=d*this.a.o+c*this.a.i+g*this.a.l;m=d*this.a.f+c*this.a.m+g*this.a.g;g=d*this.a.h+c*this.a.j+g*this.a.s;d=a*this.a.o+b*this.a.i+f*this.a.l;c=a*this.a.f+b*this.a.m+f*this.a.g;a=a*this.a.h+b*this.a.j+f*this.a.s;b=e*this.a.o+h*this.a.i+l*this.a.l;f=e*this.a.f+h*this.a.m+l*this.a.g;e=e*this.a.h+h*this.a.j+l*this.a.s;this.a.o=k;this.a.f=m;this.a.h=g;this.a.i=d;this.a.m=c;this.a.j=a;this.a.l=b;this.a.g=f;this.a.s=e;e=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;a=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;b=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;f=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;h=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;g=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;k=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;m=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;l=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;e=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;a=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;b=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;f=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;h=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;g=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;k=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;m=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;l=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=e;this.R=a;this.S=b;this.T=f;this.U=h;this.V=g;this.W=k;this.X=m;this.Y=l;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;e=this.pa;a=this.a;e.v=a.v;e.A=a.A;e.B=a.B;e.o=a.o;e.f=a.f;e.h=a.h;e.i=a.i;e.m=a.m;e.j=a.j;e.l=a.l;e.g=a.g;e.s=a.s;for(e=this.Cc;null!=e;){a=e.M;b=e.pa;h=e.ha;f=this.pa;var q,p,g=f.o*h.o+f.f*h.i+f.h*h.l,k=f.o*h.f+f.f*h.m+f.h*h.g,m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;b=e.a;h=e.ha;f=this.a;g=f.o*h.o+f.f*h.i+f.h*h.l;k=f.o*h.f+f.f*h.m+f.h*h.g;m=f.o*h.h+f.f*h.j+f.h*h.s;l=f.i*h.o+f.m*h.i+f.j*h.l;d=f.i*h.f+f.m*h.m+f.j*h.g;c=f.i*h.h+f.m*h.j+f.j*h.s;n=f.l*h.o+f.g*h.i+f.s*h.l;q=f.l*h.f+f.g*h.m+f.s*h.g;p=f.l*h.h+f.g*h.j+f.s*h.s;b.o=g;b.f=k;b.h=m;b.i=l;b.m=d;b.j=c;b.l=n;b.g=q;b.s=p;g=f.o*h.v+f.f*h.A+f.h*h.B;k=f.i*h.v+f.m*h.A+f.j*h.B;h=f.l*h.v+f.g*h.A+f.s*h.B;b.v=g;b.A=k;b.B=h;b.v+=f.v;b.A+=f.A;b.B+=f.B;e.Kb.Nb(e.u,e.pa);b=e.u.ma;f=e.u.na;h=e.u.oa;g=e.u.ja;k=e.u.ka;m=e.u.la;e.Kb.Nb(e.u,e.a);e.u.ma=b<e.u.ma?b:e.u.ma;e.u.na=f<e.u.na?f:e.u.na;e.u.oa=h<e.u.oa?h:e.u.oa;e.u.ja=g>e.u.ja?g:e.u.ja;e.u.ka=k>e.u.ka?k:e.u.ka;e.u.la=m>e.u.la?m:e.u.la;null!=e.tb&&(b=e.a.v-e.pa.v,f=e.a.A-e.pa.A,h=e.a.B-e.pa.B,g=e.pc,g.x=b,g.y=f,g.z=h,e.Yb.mc.hc.vd(e.tb,e.u,e.pc));e=a}this.Hb=!1;this.yb=0},Ul:function(){var a=new ra,b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c;return a},am:function(a){var b,e,d,c;b=this.a.o;e=this.a.m;d=this.a.s;c=b+e+d;var f;0<c?(f=Math.sqrt(c+1),c=.5*f,f=.5/f,b=(this.a.g-this.a.j)*f,e=(this.a.h-this.a.l)*f,d=(this.a.i-this.a.f)*f):b>e?b>d?(f=Math.sqrt(b-e-d+1),b=.5*f,f=.5/f,e=(this.a.f+this.a.i)*f,d=(this.a.h+this.a.l)*f,c=(this.a.g-this.a.j)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f):e>d?(f=Math.sqrt(e-d-b+1),e=.5*f,f=.5/f,b=(this.a.f+this.a.i)*f,d=(this.a.j+this.a.g)*f,c=(this.a.h-this.a.l)*f):(f=Math.sqrt(d-b-e+1),d=.5*f,f=.5/f,b=(this.a.h+this.a.l)*f,e=(this.a.j+this.a.g)*f,c=(this.a.i-this.a.f)*f);a.x=b;a.y=e;a.z=d;a.w=c},xm:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c=a.w,f=2*b,h=2*e,l=2*d;a=b*f;var g=e*h;d*=l;var k=b*h;e*=l;b*=l;f*=c;h*=c;c*=l;this.a.o=1-g-d;this.a.f=k-c;this.a.h=b+h;this.a.i=k+c;this.a.m=1-a-d;this.a.j=e-f;this.a.l=b-h;this.a.g=e+f;this.a.s=1-a-g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;g=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;c=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;l=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;d=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;k=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;e=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;b=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=g;this.S=c;this.T=l;this.U=d;this.V=k;this.W=h;this.X=e;this.Y=b;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;g=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;c=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;l=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;d=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;k=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;e=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;b=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=g;this.S=c;this.T=l;this.U=d;this.V=k;this.W=h;this.X=e;this.Y=b;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;g=this.a;a.v=g.v;a.A=g.A;a.B=g.B;a.o=g.o;a.f=g.f;a.h=g.h;a.i=g.i;a.m=g.m;a.j=g.j;a.l=g.l;a.g=g.g;a.s=g.s;for(a=this.Cc;null!=a;){g=a.M;c=a.pa;d=a.ha;var l=this.pa,m,n,q,p,k=l.o*d.o+l.f*d.i+l.h*d.l,h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;c=a.a;d=a.ha;l=this.a;k=l.o*d.o+l.f*d.i+l.h*d.l;h=l.o*d.f+l.f*d.m+l.h*d.g;e=l.o*d.h+l.f*d.j+l.h*d.s;b=l.i*d.o+l.m*d.i+l.j*d.l;f=l.i*d.f+l.m*d.m+l.j*d.g;m=l.i*d.h+l.m*d.j+l.j*d.s;n=l.l*d.o+l.g*d.i+l.s*d.l;q=l.l*d.f+l.g*d.m+l.s*d.g;p=l.l*d.h+l.g*d.j+l.s*d.s;c.o=k;c.f=h;c.h=e;c.i=b;c.m=f;c.j=m;c.l=n;c.g=q;c.s=p;k=l.o*d.v+l.f*d.A+l.h*d.B;h=l.i*d.v+l.m*d.A+l.j*d.B;d=l.l*d.v+l.g*d.A+l.s*d.B;c.v=k;c.A=h;c.B=d;c.v+=l.v;c.A+=l.A;c.B+=l.B;a.Kb.Nb(a.u,a.pa);c=a.u.ma;l=a.u.na;d=a.u.oa;k=a.u.ja;h=a.u.ka;e=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=c<a.u.ma?c:a.u.ma;a.u.na=l<a.u.na?l:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=k>a.u.ja?k:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=e>a.u.la?e:a.u.la;null!=a.tb&&(c=a.a.v-a.pa.v,l=a.a.A-a.pa.A,d=a.a.B-a.pa.B,k=a.pc,k.x=c,k.y=l,k.z=d,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=g}this.Hb=!1;this.yb=0},om:function(){var a=this.a,b=new Va;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},pm:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Nn:function(a){this.a.v=a.v;this.a.A=a.A;this.a.B=a.B;this.a.o=a.o;this.a.f=a.f;this.a.h=a.h;this.a.i=a.i;this.a.m=a.m;this.a.j=a.j;this.a.l=a.l;this.a.g=a.g;this.a.s=a.s;var b,e,d,c,f,h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;a=this.pa;b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s;for(a=this.Cc;null!=a;){b=a.M;e=a.pa;c=a.ha;d=this.pa;var k,m,n,q,p;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;e=a.a;c=a.ha;d=this.a;f=d.o*c.o+d.f*c.i+d.h*c.l;h=d.o*c.f+d.f*c.m+d.h*c.g;l=d.o*c.h+d.f*c.j+d.h*c.s;g=d.i*c.o+d.m*c.i+d.j*c.l;k=d.i*c.f+d.m*c.m+d.j*c.g;m=d.i*c.h+d.m*c.j+d.j*c.s;n=d.l*c.o+d.g*c.i+d.s*c.l;q=d.l*c.f+d.g*c.m+d.s*c.g;p=d.l*c.h+d.g*c.j+d.s*c.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=d.o*c.v+d.f*c.A+d.h*c.B;h=d.i*c.v+d.m*c.A+d.j*c.B;c=d.l*c.v+d.g*c.A+d.s*c.B;e.v=f;e.A=h;e.B=c;e.v+=d.v;e.A+=d.A;e.B+=d.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;d=a.u.na;c=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=d<a.u.na?d:a.u.na;a.u.oa=c<a.u.oa?c:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,d=a.a.A-a.pa.A,c=a.a.B-a.pa.B,f=a.pc,f.x=e,f.y=d,f.z=c,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=b}this.Hb=!1;this.yb=0},Ne:function(){return this.Nc},le:function(){var a=new M;a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id;return a},me:function(a){a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id},Ef:function(){var a=new ml;a.mass=this.Nc;var b=a.localInertia;b.e00=this.Ad;b.e01=this.Bd;b.e02=this.Cd;b.e10=this.Dd;b.e11=this.Ed;b.e12=this.Fd;b.e20=this.Gd;b.e21=this.Hd;b.e22=this.Id;return a},Ng:function(a){a.mass=this.Nc;a=a.localInertia;a.e00=this.Ad;a.e01=this.Bd;a.e02=this.Cd;a.e10=this.Dd;a.e11=this.Ed;a.e12=this.Fd;a.e20=this.Gd;a.e21=this.Hd;a.e22=this.Id},bo:function(a){this.Nc=a.mass;a=a.localInertia;this.Ad=a.e00;this.Bd=a.e01;this.Cd=a.e02;this.Dd=a.e10;this.Ed=a.e11;this.Fd=a.e12;this.Gd=a.e20;this.Hd=a.e21;this.Id=a.e22;a=this.Ad*(this.Ed*this.Id-this.Fd*this.Hd)-this.Bd*(this.Dd*this.Id-this.Fd*this.Gd)+this.Cd*(this.Dd*this.Hd-this.Ed*this.Gd);if(0<this.Nc&&0<a&&0==this.Lb){this.ab=1/this.Nc;a=this.Ed*this.Id-this.Fd*this.Hd;var b=this.Dd*this.Id-this.Fd*this.Gd,e=this.Dd*this.Hd-this.Ed*this.Gd,d=this.Bd*this.Id-this.Cd*this.Hd,c=this.Ad*this.Id-this.Cd*this.Gd,f=this.Ad*this.Hd-this.Bd*this.Gd,h=this.Bd*this.Fd-this.Cd*this.Ed,l=this.Ad*this.Fd-this.Cd*this.Dd,g=this.Ad*this.Ed-this.Bd*this.Dd,k=this.Ad*a-this.Bd*b+this.Cd*e;if(-1E-32>k||1E-32<k)k=1/k;this.Sa=a*k;this.Ta=-d*k;this.Ua=h*k;this.Va=-b*k;this.Wa=c*k;this.Xa=-l*k;this.Ya=e*k;this.Za=-f*k;this.$a=g*k;this.fi=this.Sa;this.gi=this.Ta;this.hi=this.Ua;this.ii=this.Va;this.ji=this.Wa;this.ki=this.Xa;this.li=this.Ya;this.mi=this.Za;this.ni=this.$a;this.Sa=this.fi*this.N.x;this.Ta=this.gi*this.N.x;this.Ua=this.hi*this.N.x;this.Va=this.ii*this.N.y;this.Wa=this.ji*this.N.y;this.Xa=this.ki*this.N.y;this.Ya=this.li*this.N.z;this.Za=this.mi*this.N.z;this.$a=this.ni*this.N.z}else this.ni=this.mi=this.li=this.ki=this.ji=this.ii=this.hi=this.gi=this.fi=this.$a=this.Za=this.Ya=this.Xa=this.Wa=this.Va=this.Ua=this.Ta=this.Sa=this.ab=0,0==this.Lb&&(this.Lb=1);a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Hb=!1;this.yb=0},Qg:function(){var a=this.N;return new t(a.x,a.y,a.z)},Gm:function(a){var b=this.N;b.x=a.x;b.y=a.y;b.z=a.z;var e,d,c,f,h,l,g;a=this.a.o*this.Sa+this.a.f*this.Va+this.a.h*this.Ya;b=this.a.o*this.Ta+this.a.f*this.Wa+this.a.h*this.Za;e=this.a.o*this.Ua+this.a.f*this.Xa+this.a.h*this.$a;d=this.a.i*this.Sa+this.a.m*this.Va+this.a.j*this.Ya;c=this.a.i*this.Ta+this.a.m*this.Wa+this.a.j*this.Za;f=this.a.i*this.Ua+this.a.m*this.Xa+this.a.j*this.$a;h=this.a.l*this.Sa+this.a.g*this.Va+this.a.s*this.Ya;l=this.a.l*this.Ta+this.a.g*this.Wa+this.a.s*this.Za;g=this.a.l*this.Ua+this.a.g*this.Xa+this.a.s*this.$a;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;a=this.P*this.a.o+this.R*this.a.f+this.S*this.a.h;b=this.P*this.a.i+this.R*this.a.m+this.S*this.a.j;e=this.P*this.a.l+this.R*this.a.g+this.S*this.a.s;d=this.T*this.a.o+this.U*this.a.f+this.V*this.a.h;c=this.T*this.a.i+this.U*this.a.m+this.V*this.a.j;f=this.T*this.a.l+this.U*this.a.g+this.V*this.a.s;h=this.W*this.a.o+this.X*this.a.f+this.Y*this.a.h;l=this.W*this.a.i+this.X*this.a.m+this.Y*this.a.j;g=this.W*this.a.l+this.X*this.a.g+this.Y*this.a.s;this.P=a;this.R=b;this.S=e;this.T=d;this.U=c;this.V=f;this.W=h;this.X=l;this.Y=g;this.P*=this.N.x;this.R*=this.N.x;this.S*=this.N.x;this.T*=this.N.y;this.U*=this.N.y;this.V*=this.N.y;this.W*=this.N.z;this.X*=this.N.z;this.Y*=this.N.z;this.Hb=!1;this.yb=0},Wd:function(){var a=new t;a.x=this.gb;a.y=this.hb;a.z=this.ib;return a},ke:function(a){a.x=this.gb;a.y=this.hb;a.z=this.ib},ao:function(a){1==this.Lb?this.ib=this.hb=this.gb=0:(this.gb=a.x,this.hb=a.y,this.ib=a.z);this.Hb=!1;this.yb=0},Dc:function(){var a=new t;a.x=this.kb;a.y=this.lb;a.z=this.mb;return a},Jc:function(a){a.x=this.gb;a.y=this.hb;a.z=this.ib},Xn:function(a){1==this.Lb?this.mb=this.lb=this.kb=0:(this.kb=a.x,this.lb=a.y,this.mb=a.z);this.Hb=!1;this.yb=0},Oa:function(a){if(1!=this.Lb){var b,e;b=a.x;e=a.y;a=a.z;this.gb+=b;this.hb+=e;this.ib+=a}this.Hb=!1;this.yb=0},ua:function(a){if(1!=this.Lb){var b,e;b=a.x;e=a.y;a=a.z;this.kb+=b;this.lb+=e;this.mb+=a}this.Hb=!1;this.yb=0},sc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.gb+=e*this.ab;this.hb+=d*this.ab;this.ib+=a*this.ab;var c,f,h;c=b.x;f=b.y;h=b.z;c-=this.a.v;f-=this.a.A;h-=this.a.B;b=f*a-h*d;a=h*e-c*a;c=c*d-f*e;e=this.P*b+this.R*a+this.S*c;d=this.T*b+this.U*a+this.V*c;b=this.W*b+this.X*a+this.Y*c;this.kb+=e;this.lb+=d;this.mb+=b;this.Hb=!1;this.yb=0},tc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.gb+=b*this.ab;this.hb+=e*this.ab;this.ib+=a*this.ab;this.Hb=!1;this.yb=0},Mb:function(a){var b,e,d;b=a.x;e=a.y;d=a.z;var c;a=this.P*b+this.R*e+this.S*d;c=this.T*b+this.U*e+this.V*d;b=this.W*b+this.X*e+this.Y*d;this.kb+=a;this.lb+=c;this.mb+=b;this.Hb=!1;this.yb=0},nc:function(a,b){var e,d;e=a.x;d=a.y;a=a.z;this.Fh+=e;this.Gh+=d;this.Hh+=a;var c,f;c=b.x;f=b.y;b=b.z;c-=this.a.v;f-=this.a.A;b-=this.a.B;this.nf+=f*a-b*d;this.pf+=b*e-c*a;this.qf+=c*d-f*e;this.Hb=!1;this.yb=0},oc:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.Fh+=b;this.Gh+=e;this.Hh+=a;this.Hb=!1;this.yb=0},Ac:function(a){var b,e;b=a.x;e=a.y;a=a.z;this.nf+=b;this.pf+=e;this.qf+=a;this.Hb=!1;this.yb=0},ed:function(){return this.Yg},$n:function(a){this.Yg=a;this.Hb=!1;this.yb=0},ne:function(a){var b,e;b=a.x;e=a.y;a=a.z;b-=this.a.v;e-=this.a.A;a-=this.a.B;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},oe:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;e-=this.a.v;d-=this.a.A;c-=this.a.B;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},pe:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.i*e+this.a.l*a;c=this.a.f*b+this.a.m*e+this.a.g*a;a=this.a.h*b+this.a.j*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},Me:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.i*d+this.a.l*c;f=this.a.f*e+this.a.m*d+this.a.g*c;e=this.a.h*e+this.a.j*d+this.a.s*c;b.x=a;b.y=f;b.z=e},ai:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d+this.a.v;e=c+this.a.A;a+=this.a.B;d=new t;d.x=b;d.y=e;d.z=a;return d},bi:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;c=this.a.l*e+this.a.g*d+this.a.s*c;e=a+this.a.v;d=f+this.a.A;c+=this.a.B;b.x=e;b.y=d;b.z=c},Dj:function(a){var b,e;b=a.x;e=a.y;a=a.z;var d,c;d=this.a.o*b+this.a.f*e+this.a.h*a;c=this.a.i*b+this.a.m*e+this.a.j*a;a=this.a.l*b+this.a.g*e+this.a.s*a;b=d;e=c;d=new t;d.x=b;d.y=e;d.z=a;return d},Bl:function(a,b){var e,d,c;e=a.x;d=a.y;c=a.z;var f;a=this.a.o*e+this.a.f*d+this.a.h*c;f=this.a.i*e+this.a.m*d+this.a.j*c;e=this.a.l*e+this.a.g*d+this.a.s*c;b.x=a;b.y=f;b.z=e},Sl:function(){return this.sg},Rg:function(){return this.Cc},Og:function(){return this.ve},dd:function(){return this.Ob},Pg:function(){return this.eh},yd:function(){return this.ue},Ab:function(a){null==this.Cc?this.Cc=a:(this.vi.M=a,a.ia=this.vi);this.vi=a;this.sg++;a.Yb=this;if(null!=this.mc){var b=this.mc;a.tb=b.hc.Oh(a,a.u);a.Ec=b.Nl++;b.sg++}this.Cj();for(a=this.Cc;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,f,h,l,g,k,m,n,q,p;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.pc,f.x=e,f.y=c,f.z=d,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=b}},Wn:function(a){var b=a.ia,e=a.M;null!=b&&(b.M=e);null!=e&&(e.ia=b);a==this.Cc&&(this.Cc=this.Cc.M);a==this.vi&&(this.vi=this.vi.ia);a.M=null;a.ia=null;this.sg--;a.Yb=null;if(null!=this.mc){b=this.mc;b.hc.Ph(a.tb);a.tb=null;a.Ec=-1;for(var d=a.Yb.Ob;null!=d;){var e=d.M,c=d.Xd;if(c.vc==a||c.wc==a){d=d.Oc;d.Hb=!1;d.yb=0;var d=b.Dh,f=c.ia,h=c.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c==d.zd&&(d.zd=d.zd.M);c==d.te&&(d.te=d.te.ia);c.M=null;c.ia=null;f=c.rb.ia;h=c.rb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.rb==c.C.Ob&&(c.C.Ob=c.C.Ob.M);c.rb==c.C.ic&&(c.C.ic=c.C.ic.ia);c.rb.M=null;c.rb.ia=null;f=c.sb.ia;h=c.sb.M;null!=f&&(f.M=h);null!=h&&(h.ia=f);c.sb==c.D.Ob&&(c.D.Ob=c.D.Ob.M);c.sb==c.D.ic&&(c.D.ic=c.D.ic.ia);c.sb.M=null;c.sb.ia=null;c.C.ve--;c.D.ve--;c.rb.Oc=null;c.sb.Oc=null;c.rb.Xd=null;c.sb.Xd=null;c.vc=null;c.wc=null;c.C=null;c.D=null;c.vg=!1;c.Qi.Pe();c.Ja.Pe();c.Eh=null;f=c.Qe;f.vc=null;f.wc=null;f.C=null;f.D=null;f.fj=null;f.gj=null;c.M=d.eg;d.eg=c;d.ri--}d=e}b.sg--}this.Cj();for(a=this.Cc;null!=a;){var b=a.M,e=a.pa,d=a.ha,c=this.pa,l,g,k,m,n,q,p,f=c.o*d.o+c.f*d.i+c.h*d.l,h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;e=a.a;d=a.ha;c=this.a;f=c.o*d.o+c.f*d.i+c.h*d.l;h=c.o*d.f+c.f*d.m+c.h*d.g;l=c.o*d.h+c.f*d.j+c.h*d.s;g=c.i*d.o+c.m*d.i+c.j*d.l;k=c.i*d.f+c.m*d.m+c.j*d.g;m=c.i*d.h+c.m*d.j+c.j*d.s;n=c.l*d.o+c.g*d.i+c.s*d.l;q=c.l*d.f+c.g*d.m+c.s*d.g;p=c.l*d.h+c.g*d.j+c.s*d.s;e.o=f;e.f=h;e.h=l;e.i=g;e.m=k;e.j=m;e.l=n;e.g=q;e.s=p;f=c.o*d.v+c.f*d.A+c.h*d.B;h=c.i*d.v+c.m*d.A+c.j*d.B;d=c.l*d.v+c.g*d.A+c.s*d.B;e.v=f;e.A=h;e.B=d;e.v+=c.v;e.A+=c.A;e.B+=c.B;a.Kb.Nb(a.u,a.pa);e=a.u.ma;c=a.u.na;d=a.u.oa;f=a.u.ja;h=a.u.ka;l=a.u.la;a.Kb.Nb(a.u,a.a);a.u.ma=e<a.u.ma?e:a.u.ma;a.u.na=c<a.u.na?c:a.u.na;a.u.oa=d<a.u.oa?d:a.u.oa;a.u.ja=f>a.u.ja?f:a.u.ja;a.u.ka=h>a.u.ka?h:a.u.ka;a.u.la=l>a.u.la?l:a.u.la;null!=a.tb&&(e=a.a.v-a.pa.v,c=a.a.A-a.pa.A,d=a.a.B-a.pa.B,f=a.pc,f.x=e,f.y=c,f.z=d,a.Yb.mc.hc.vd(a.tb,a.u,a.pc));a=b}},qm:function(){return this.Lb},Hm:function(a){this.Lb=a;this.Cj()},Jm:function(){this.Hb=!1;this.yb=0},Im:function(){this.Hb=!0;this.yb=0},$h:function(){return this.yb},Zn:function(a){this.nk=a;this.Hb=!1;this.yb=0},fm:function(){return this.ia},Rl:function(){return this.M}};Ga.prototype={sc:function(){return this.Lj},pe:function(a){this.Lj=a},Jc:function(){return this.Vj},Ne:function(a){this.Vj=a},Ac:function(){var a=this.ha,b=new Va;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},Dc:function(a){var b=this.ha;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Wd:function(){var a=this.a,b=new Va;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;return b},ke:function(a){var b=this.a;a.v=b.v;a.A=b.A;a.B=b.B;a.o=b.o;a.f=b.f;a.h=b.h;a.i=b.i;a.m=b.m;a.j=b.j;a.l=b.l;a.g=b.g;a.s=b.s},Me:function(a){var b=this.ha;b.v=a.v;b.A=a.A;b.B=a.B;b.o=a.o;b.f=a.f;b.h=a.h;b.i=a.i;b.m=a.m;b.j=a.j;b.l=a.l;b.g=a.g;b.s=a.s;if(null!=this.Yb)for(a=this.Yb,a.Cj(),b=a.Cc;null!=b;){var e=b.M,d=b.pa,c=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ha;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Kb.Nb(b.u,b.pa);d=b.u.ma;f=b.u.na;c=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=d<b.u.ma?d:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.tb&&(d=b.a.v-b.pa.v,f=b.a.A-b.pa.A,c=b.a.B-b.pa.B,h=b.pc,h.x=d,h.y=f,h.z=c,b.Yb.mc.hc.vd(b.tb,b.u,b.pc));b=e}},oc:function(){return this.qk},oe:function(a){this.qk=a;if(null!=this.Yb){a=this.Yb;a.Cj();for(var b=a.Cc;null!=b;){var e=b.M,d=b.pa,c=b.ha,f=a.pa,h,l,g,k,m,n,q,p,r;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;d=b.a;c=b.ha;f=a.a;h=f.o*c.o+f.f*c.i+f.h*c.l;l=f.o*c.f+f.f*c.m+f.h*c.g;g=f.o*c.h+f.f*c.j+f.h*c.s;k=f.i*c.o+f.m*c.i+f.j*c.l;m=f.i*c.f+f.m*c.m+f.j*c.g;n=f.i*c.h+f.m*c.j+f.j*c.s;q=f.l*c.o+f.g*c.i+f.s*c.l;p=f.l*c.f+f.g*c.m+f.s*c.g;r=f.l*c.h+f.g*c.j+f.s*c.s;d.o=h;d.f=l;d.h=g;d.i=k;d.m=m;d.j=n;d.l=q;d.g=p;d.s=r;h=f.o*c.v+f.f*c.A+f.h*c.B;l=f.i*c.v+f.m*c.A+f.j*c.B;c=f.l*c.v+f.g*c.A+f.s*c.B;d.v=h;d.A=l;d.B=c;d.v+=f.v;d.A+=f.A;d.B+=f.B;b.Kb.Nb(b.u,b.pa);d=b.u.ma;f=b.u.na;c=b.u.oa;h=b.u.ja;l=b.u.ka;g=b.u.la;b.Kb.Nb(b.u,b.a);b.u.ma=d<b.u.ma?d:b.u.ma;b.u.na=f<b.u.na?f:b.u.na;b.u.oa=c<b.u.oa?c:b.u.oa;b.u.ja=h>b.u.ja?h:b.u.ja;b.u.ka=l>b.u.ka?l:b.u.ka;b.u.la=g>b.u.la?g:b.u.la;null!=b.tb&&(d=b.a.v-b.pa.v,f=b.a.A-b.pa.A,c=b.a.B-b.pa.B,h=b.pc,h.x=d,h.y=f,h.z=c,b.Yb.mc.hc.vd(b.tb,b.u,b.pc));b=e}}},ua:function(){return this.u.clone()},Oa:function(a){a.be(this.u)},tc:function(){return this.Kb},dd:function(){return this.Yb},Ab:function(){return this.Gj},le:function(a){this.Gj=a},Mb:function(){return this.Hj},me:function(a){this.Hj=a},nc:function(){return this.Ij},ne:function(a){this.Ij=a},yd:function(){return this.ia},ed:function(){return this.M}};gj.Me=1;gj.Ne=2;gj.BRUTE_FORCE=1;gj.BVH=2;$c.om=0;$c.pe=1;$c.Rg=2;$c.Ng=3;$c.Ef=4;$c.Og=5;$c.Qg=0;$c.Pg=5;$c.SPHERE=0;$c.BOX=1;$c.CYLINDER=2;$c.CONE=3;$c.CAPSULE=4;$c.CONVEX_HULL=5;Ek.le=1;kf.Mb=0;t.numCreations=0;F.defaultFriction=.2;F.defaultRestitution=.2;F.defaultDensity=1;F.defaultCollisionGroup=1;F.defaultCollisionMask=1;F.maxTranslationPerStep=20;F.maxRotationPerStep=3.14159265358979;F.bvhProxyPadding=.1;F.bvhIncrementalCollisionThreshold=.45;F.defaultGJKMargin=.05;F.enableGJKCaching=!0;F.maxEPAVertices=128;F.maxEPAPolyhedronFaces=128;F.contactEnableBounceThreshold=.5;F.velocityBaumgarte=.2;F.positionSplitImpulseBaumgarte=.4;F.positionNgsBaumgarte=1;F.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;F.defaultContactPositionCorrectionAlgorithm=0;F.alternativeContactPositionCorrectionAlgorithm=1;F.contactPersistenceThreshold=.05;F.maxManifoldPoints=4;F.defaultJointConstraintSolverType=0;F.defaultJointPositionCorrectionAlgorithm=0;F.jointWarmStartingFactorForBaungarte=.8;F.jointWarmStartingFactor=.95;F.minSpringDamperDampingRatio=1E-6;F.minRagdollMaxSwingAngle=1E-6;F.maxJacobianRows=6;F.directMlcpSolverEps=1E-9;F.islandInitialRigidBodyArraySize=128;F.islandInitialConstraintArraySize=128;F.sleepingVelocityThreshold=.2;F.sleepingAngularVelocityThreshold=.5;F.sleepingTimeThreshold=1;F.disableSleeping=!1;F.linearSlop=.005;F.angularSlop=.017453292519943278;Fb.Oa=new Fb;ic.wm=0;ic.Ul=1;ic.Sl=2;ic.Rl=257;ic.Bl=258;ic.Dj=259;ic.SUCCEEDED=0;ic.GJK_FAILED_TO_MAKE_TETRAHEDRON=1;ic.GJK_DID_NOT_CONVERGE=2;ic.EPA_FAILED_TO_INIT=257;ic.EPA_FAILED_TO_ADD_VERTEX=258;ic.EPA_DID_NOT_CONVERGE=259;M.numCreations=0;P.numCreations=0;Na.POSITIVE_INFINITY=1/0;Na.NEGATIVE_INFINITY=-1/0;Na.PI=3.14159265358979;Na.TWO_PI=6.28318530717958;Na.HALF_PI=1.570796326794895;Na.TO_RADIANS=.017453292519943278;Na.TO_DEGREES=57.29577951308238;ra.numCreations=0;Jb.me=8;Jb.ne=4;Jb.ke=8;Ge.broadPhaseCollisionTime=0;Ge.narrowPhaseCollisionTime=0;Ge.dynamicsTime=0;Ge.totalTime=0;Ub.oe=0;Ub.qm=1;Ub.dm=2;Ub.BAUMGARTE=0;Ub.SPLIT_IMPULSE=1;Ub.NGS=2;Fe.Wd=1;Fe.yd=2;Ac.pm=0;Ac.lm=1;Ac.$h=2;Ac.fm=3;Ac.xm=4;Ac.km=5;Ac.SPHERICAL=0;Ac.REVOLUTE=1;Ac.CYLINDRICAL=2;Ac.PRISMATIC=3;Ac.UNIVERSAL=4;Ac.RAGDOLL=5;xe.am=0;xe.ai=1;xe.ITERATIVE=0;xe.DIRECT=1;be.bi=0;be.rm=1;be.cm=2;be.DYNAMIC=0;be.STATIC=1;be.KINEMATIC=2;oimo_m_M.co=1E-6;window.OIMO={};window.OIMO.BroadPhase=Nb;Nb.prototype.createProxy=Nb.prototype.Oh;Nb.prototype.destroyProxy=Nb.prototype.Ph;Nb.prototype.moveProxy=Nb.prototype.vd;Nb.prototype.isOverlapping=Nb.prototype.Mb;Nb.prototype.collectPairs=Nb.prototype.yi;Nb.prototype.getProxyPairList=Nb.prototype.ua;Nb.prototype.isIncremental=Nb.prototype.Ab;Nb.prototype.getTestCount=Nb.prototype.Oa;Nb.prototype.rayCast=Nb.prototype.Ud;Nb.prototype.convexCast=Nb.prototype.uf;Nb.prototype.aabbTest=Nb.prototype.kh;window.OIMO.Geometry=dd;dd.prototype.getType=dd.prototype.Oa;dd.prototype.getVolume=dd.prototype.ua;dd.prototype.rayCast=dd.prototype.Ud;window.OIMO.ConvexGeometry=Wa;Wa.prototype.getGjkMergin=Wa.prototype.kn;Wa.prototype.setGjkMergin=Wa.prototype.Pn;Wa.prototype.computeLocalSupportingVertex=Wa.prototype.Pd;Wa.prototype.rayCast=Wa.prototype.Ud;window.OIMO.BroadPhaseProxyCallback=fc;fc.prototype.process=fc.prototype.wd;window.OIMO.BroadPhaseType=gj;window.OIMO.Proxy=td;td.prototype.getId=td.prototype.Ab;td.prototype.getFatAabb=td.prototype.ua;td.prototype.getFatAabbTo=td.prototype.Oa;window.OIMO.ProxyPair=Ed;Ed.prototype.getProxy1=Ed.prototype.ua;Ed.prototype.getProxy2=Ed.prototype.Oa;Ed.prototype.getNext=Ed.prototype.Ab;window.OIMO.BruteForceBroadPhase=pc;pc.prototype.createProxy=pc.prototype.Oh;pc.prototype.destroyProxy=pc.prototype.Ph;pc.prototype.moveProxy=pc.prototype.vd;pc.prototype.collectPairs=pc.prototype.yi;pc.prototype.rayCast=pc.prototype.Ud;pc.prototype.convexCast=pc.prototype.uf;pc.prototype.aabbTest=pc.prototype.kh;window.OIMO.BvhBroadPhase=qc;qc.prototype.createProxy=qc.prototype.Oh;qc.prototype.destroyProxy=qc.prototype.Ph;qc.prototype.moveProxy=qc.prototype.vd;qc.prototype.collectPairs=qc.prototype.yi;qc.prototype.rayCast=qc.prototype.Ud;qc.prototype.convexCast=qc.prototype.uf;qc.prototype.aabbTest=qc.prototype.kh;qc.prototype.getTreeBalance=qc.prototype.zn;window.OIMO.Aabb=Ta;Ta.prototype.init=Ta.prototype.za;Ta.prototype.getMin=Ta.prototype.Jc;Ta.prototype.getMinTo=Ta.prototype.dd;Ta.prototype.setMin=Ta.prototype.Wd;Ta.prototype.getMax=Ta.prototype.Ac;Ta.prototype.getMaxTo=Ta.prototype.Dc;Ta.prototype.setMax=Ta.prototype.yd;Ta.prototype.getCenter=Ta.prototype.Ab;Ta.prototype.getCenterTo=Ta.prototype.Mb;Ta.prototype.getExtents=Ta.prototype.nc;Ta.prototype.getExtentsTo=Ta.prototype.oc;Ta.prototype.combine=Ta.prototype.ua;Ta.prototype.combined=Ta.prototype.Oa;Ta.prototype.overlap=Ta.prototype.ed;Ta.prototype.getIntersection=Ta.prototype.sc;Ta.prototype.getIntersectionTo=Ta.prototype.tc;Ta.prototype.copyFrom=Ta.prototype.be;Ta.prototype.clone=Ta.prototype.clone;window.OIMO.BoxGeometry=Ad;Ad.prototype.getHalfExtents=Ad.prototype.ln;Ad.prototype.getHalfExtentsTo=Ad.prototype.mn;Ad.prototype.computeLocalSupportingVertex=Ad.prototype.Pd;window.OIMO.CapsuleGeometry=Ke;Ke.prototype.getRadius=Ke.prototype.Qh;Ke.prototype.getHalfHeight=Ke.prototype.rj;Ke.prototype.computeLocalSupportingVertex=Ke.prototype.Pd;window.OIMO.ConeGeometry=ke;ke.prototype.getRadius=ke.prototype.Qh;ke.prototype.getHalfHeight=ke.prototype.rj;ke.prototype.computeLocalSupportingVertex=ke.prototype.Pd;window.OIMO.ConvexHullGeometry=Wd;Wd.prototype.getVertices=Wd.prototype.Dn;Wd.prototype.computeLocalSupportingVertex=Wd.prototype.Pd;window.OIMO.CylinderGeometry=Dd;Dd.prototype.getRadius=Dd.prototype.Qh;Dd.prototype.getHalfHeight=Dd.prototype.rj;Dd.prototype.computeLocalSupportingVertex=Dd.prototype.Pd;window.OIMO.GeometryType=$c;window.OIMO.RayCastHit=Wj;window.OIMO.SphereGeometry=je;je.prototype.getRadius=je.prototype.Qh;je.prototype.computeLocalSupportingVertex=je.prototype.Pd;window.OIMO.CollisionMatrix=jf;jf.prototype.getDetector=jf.prototype.ua;window.OIMO.DetectorResult=Je;Je.prototype.getMaxDepth=Je.prototype.gm;Je.prototype.clear=Je.prototype.clear;window.OIMO.DetectorResultPoint=gl;window.OIMO.Detector=Mc;Mc.prototype.detect=Mc.prototype.bm;window.OIMO.CapsuleCapsuleDetector=ej;window.OIMO.GjkEpaDetector=dj;window.OIMO.SphereBoxDetector=Qf;window.OIMO.SphereCapsuleDetector=cg;window.OIMO.SphereSphereDetector=cj;window.OIMO.Vec3=t;t.prototype.init=t.prototype.za;t.prototype.zero=t.prototype.Z;t.prototype.add=t.prototype.ed;t.prototype.addScaled=t.prototype.ua;t.prototype.sub=t.prototype.pe;t.prototype.scale=t.prototype.ne;t.prototype.scale3=t.prototype.Ne;t.prototype.dot=t.prototype.Wd;t.prototype.cross=t.prototype.Ab;t.prototype.addEq=t.prototype.yd;t.prototype.addScaledEq=t.prototype.Oa;t.prototype.subEq=t.prototype.Me;t.prototype.scaleEq=t.prototype.oe;t.prototype.scale3Eq=t.prototype.Ef;t.prototype.crossEq=t.prototype.Mb;t.prototype.mulMat3=t.prototype.nc;t.prototype.mulMat4=t.prototype.sc;t.prototype.mulTransform=t.prototype.Ac;t.prototype.mulMat3Eq=t.prototype.oc;t.prototype.mulMat4Eq=t.prototype.tc;t.prototype.mulTransformEq=t.prototype.Dc;t.prototype.length=t.prototype.length;t.prototype.lengthSq=t.prototype.ke;t.prototype.normalized=t.prototype.me;t.prototype.normalize=t.prototype.le;t.prototype.negate=t.prototype.Jc;t.prototype.negateEq=t.prototype.dd;t.prototype.copyFrom=t.prototype.be;t.prototype.clone=t.prototype.clone;t.prototype.toString=t.prototype.toString;window.OIMO.Transform=Va;Va.prototype.identity=Va.prototype.Pf;Va.prototype.getPosition=Va.prototype.Ab;Va.prototype.getPositionTo=Va.prototype.Mb;Va.prototype.setPosition=Va.prototype.Ac;Va.prototype.translate=Va.prototype.Jc;Va.prototype.getRotation=Va.prototype.nc;Va.prototype.getRotationTo=Va.prototype.oc;Va.prototype.setRotation=Va.prototype.Dc;Va.prototype.rotate=Va.prototype.sc;Va.prototype.getOrientation=Va.prototype.ua;Va.prototype.getOrientationTo=Va.prototype.Oa;Va.prototype.setOrientation=Va.prototype.tc;Va.prototype.clone=Va.prototype.clone;Va.prototype.copyFrom=Va.prototype.be;window.OIMO.Setting=F;window.OIMO.GjkEpa=Fb;Fb.prototype.computeClosestPoints=Fb.prototype.ua;Fb.prototype.computeDistance=Fb.prototype.Oa;Fb.prototype.convexCast=Fb.prototype.uf;Fb.prototype.rayCast=Fb.prototype.Ud;Fb.getInstance=Fb.nc;window.OIMO.GjkEpaResultState=ic;window.OIMO.SimplexUtil=Id;Id.projectOrigin2=Id.oc;Id.projectOrigin3=Id.sc;Id.projectOrigin4=Id.tc;window.OIMO.Mat3=M;M.prototype.init=M.prototype.za;M.prototype.identity=M.prototype.Pf;M.prototype.add=M.prototype.Ac;M.prototype.sub=M.prototype.Og;M.prototype.scale=M.prototype.Ef;M.prototype.mul=M.prototype.me;M.prototype.addEq=M.prototype.Dc;M.prototype.subEq=M.prototype.Pg;M.prototype.scaleEq=M.prototype.Ng;M.prototype.mulEq=M.prototype.ne;M.prototype.prependScale=M.prototype.Me;M.prototype.appendScale=M.prototype.ed;M.prototype.prependRotation=M.prototype.oe;M.prototype.appendRotation=M.prototype.Jc;M.prototype.prependScaleEq=M.prototype.Ne;M.prototype.appendScaleEq=M.prototype.yd;M.prototype.prependRotationEq=M.prototype.pe;M.prototype.appendRotationEq=M.prototype.dd;M.prototype.transpose=M.prototype.$h;M.prototype.transposeEq=M.prototype.ai;M.prototype.determinant=M.prototype.Wd;M.prototype.trace=M.prototype.Rg;M.prototype.inverse=M.prototype.ke;M.prototype.inverseEq=M.prototype.le;M.prototype.toArray=M.prototype.Qg;M.prototype.copyFrom=M.prototype.be;M.prototype.clone=M.prototype.clone;M.prototype.fromQuat=M.prototype.Ab;M.prototype.toQuat=M.prototype.Dj;M.prototype.fromEulerXyz=M.prototype.Oa;M.prototype.toEulerXyz=M.prototype.bi;M.prototype.getRow=M.prototype.sc;M.prototype.getCol=M.prototype.nc;M.prototype.getRowTo=M.prototype.tc;M.prototype.getColTo=M.prototype.oc;M.prototype.fromRows=M.prototype.Mb;M.prototype.fromCols=M.prototype.ua;M.prototype.toString=M.prototype.toString;window.OIMO.Mat4=P;P.prototype.init=P.prototype.za;P.prototype.identity=P.prototype.Pf;P.prototype.add=P.prototype.nc;P.prototype.sub=P.prototype.Ef;P.prototype.scale=P.prototype.Me;P.prototype.mul=P.prototype.Wd;P.prototype.addEq=P.prototype.oc;P.prototype.subEq=P.prototype.Ng;P.prototype.scaleEq=P.prototype.Ne;P.prototype.mulEq=P.prototype.ke;P.prototype.prependScale=P.prototype.oe;P.prototype.appendScale=P.prototype.Ac;P.prototype.prependRotation=P.prototype.me;P.prototype.appendRotation=P.prototype.sc;P.prototype.prependTranslation=P.prototype.ai;P.prototype.appendTranslation=P.prototype.ua;P.prototype.prependScaleEq=P.prototype.pe;P.prototype.appendScaleEq=P.prototype.Dc;P.prototype.prependRotationEq=P.prototype.ne;P.prototype.appendRotationEq=P.prototype.tc;P.prototype.prependTranslationEq=P.prototype.bi;P.prototype.appendTranslationEq=P.prototype.Oa;P.prototype.transpose=P.prototype.Qg;P.prototype.transposeEq=P.prototype.Rg;P.prototype.determinant=P.prototype.Jc;P.prototype.trace=P.prototype.Pg;P.prototype.inverse=P.prototype.ed;P.prototype.inverseEq=P.prototype.yd;P.prototype.lookAt=P.prototype.Mb;P.prototype.perspective=P.prototype.le;P.prototype.ortho=P.prototype.$h;P.prototype.toArray=P.prototype.Og;P.prototype.copyFrom=P.prototype.be;P.prototype.fromMat3=P.prototype.dd;P.prototype.fromTransform=P.prototype.Ab;P.prototype.clone=P.prototype.clone;P.prototype.toString=P.prototype.toString;window.OIMO.MathUtil=Na;Na.abs=Na.abs;Na.sin=Na.sin;Na.cos=Na.cos;Na.tan=Na.tan;Na.asin=Na.asin;Na.acos=Na.acos;Na.atan=Na.atan;Na.safeAsin=Na.ed;Na.safeAcos=Na.dd;Na.atan2=Na.atan2;Na.sqrt=Na.sqrt;Na.clamp=Na.Ab;Na.rand=Na.Ac;Na.randIn=Na.Dc;Na.randVec3In=Na.Jc;window.OIMO.Pool=ec;ec.prototype.vec3=ec.prototype.Ac;ec.prototype.mat3=ec.prototype.oc;ec.prototype.mat4=ec.prototype.sc;ec.prototype.quat=ec.prototype.tc;ec.prototype.dispose=ec.prototype.ua;ec.prototype.disposeVec3=ec.prototype.nc;ec.prototype.disposeMat3=ec.prototype.Oa;ec.prototype.disposeMat4=ec.prototype.Ab;ec.prototype.disposeQuat=ec.prototype.Mb;window.OIMO.Quat=ra;ra.prototype.identity=ra.prototype.Pf;ra.prototype.init=ra.prototype.za;ra.prototype.add=ra.prototype.ua;ra.prototype.sub=ra.prototype.Dc;ra.prototype.scale=ra.prototype.tc;ra.prototype.addEq=ra.prototype.Oa;ra.prototype.subEq=ra.prototype.Jc;ra.prototype.scaleEq=ra.prototype.Ac;ra.prototype.length=ra.prototype.length;ra.prototype.lengthSq=ra.prototype.nc;ra.prototype.dot=ra.prototype.Ab;ra.prototype.normalized=ra.prototype.sc;ra.prototype.normalize=ra.prototype.oc;ra.prototype.setArc=ra.prototype.dd;ra.prototype.slerp=ra.prototype.ed;ra.prototype.copyFrom=ra.prototype.be;ra.prototype.clone=ra.prototype.clone;ra.prototype.fromMat3=ra.prototype.Mb;ra.prototype.toMat3=ra.prototype.yd;ra.prototype.toString=ra.prototype.toString;window.OIMO.Contact=tc;tc.prototype.getShape1=tc.prototype.nc;tc.prototype.getShape2=tc.prototype.oc;tc.prototype.isTouching=tc.prototype.ek;tc.prototype.getManifold=tc.prototype.Oa;tc.prototype.getContactConstraint=tc.prototype.ua;tc.prototype.getPrev=tc.prototype.Mb;tc.prototype.getNext=tc.prototype.Ab;window.OIMO.ContactLink=cd;cd.prototype.getContact=cd.prototype.ua;cd.prototype.getOther=cd.prototype.Ab;cd.prototype.getPrev=cd.prototype.Mb;cd.prototype.getNext=cd.prototype.Oa;window.OIMO.ContactManager=Ie;Ie.prototype.getNumContacts=Ie.prototype.Oa;Ie.prototype.getContactList=Ie.prototype.ua;window.OIMO.TimeStep=vl;window.OIMO.World=za;za.prototype.step=za.prototype.ke;za.prototype.addRigidBody=za.prototype.Oa;za.prototype.removeRigidBody=za.prototype.le;za.prototype.addJoint=za.prototype.ua;za.prototype.removeJoint=za.prototype.yl;za.prototype.setDebugDraw=za.prototype.me;za.prototype.getDebugDraw=za.prototype.oc;za.prototype.debugDraw=za.prototype.Ab;za.prototype.rayCast=za.prototype.Ud;za.prototype.convexCast=za.prototype.uf;za.prototype.aabbTest=za.prototype.kh;za.prototype.getRigidBodyList=za.prototype.yd;za.prototype.getJointList=za.prototype.tc;za.prototype.getBroadPhase=za.prototype.Mb;za.prototype.getContactManager=za.prototype.nc;za.prototype.getNumRigidBodies=za.prototype.dd;za.prototype.getNumJoints=za.prototype.Dc;za.prototype.getNumShapes=za.prototype.Wd;za.prototype.getNumIslands=za.prototype.Ac;za.prototype.getNumVelocityIterations=za.prototype.ed;za.prototype.setNumVelocityIterations=za.prototype.pe;za.prototype.getNumPositionIterations=za.prototype.Jc;za.prototype.setNumPositionIterations=za.prototype.oe;za.prototype.getGravity=za.prototype.sc;za.prototype.setGravity=za.prototype.ne;window.OIMO.AabbTestCallback=Vj;Vj.prototype.process=Vj.prototype.wd;window.OIMO.ContactCallback=md;md.prototype.beginContact=md.prototype.ua;md.prototype.preSolve=md.prototype.Ab;md.prototype.postSolve=md.prototype.cf;md.prototype.endContact=md.prototype.Oa;window.OIMO.RayCastCallback=He;He.prototype.process=He.prototype.wd;window.OIMO.RayCastClosest=ce;ce.prototype.clear=ce.prototype.clear;ce.prototype.process=ce.prototype.wd;window.OIMO.DebugDraw=Jb;Jb.prototype.aabb=Jb.prototype.Vk;Jb.prototype.ellipse=Jb.prototype.ellipse;Jb.prototype.arc=Jb.prototype.arc;Jb.prototype.cone=Jb.prototype.Xl;Jb.prototype.cylinder=Jb.prototype.$l;Jb.prototype.capsule=Jb.prototype.Vl;Jb.prototype.sphere=Jb.prototype.Bm;Jb.prototype.box=Jb.prototype.Tl;Jb.prototype.rect=Jb.prototype.rect;Jb.prototype.point=Jb.prototype.Oa;Jb.prototype.triangle=Jb.prototype.Ab;Jb.prototype.line=Jb.prototype.ua;window.OIMO.DebugDrawStyle=dl;window.OIMO.Performance=Ge;window.OIMO.ConstraintSolver=Db;Db.prototype.preSolveVelocity=Db.prototype.qh;Db.prototype.warmStart=Db.prototype.zh;Db.prototype.solveVelocity=Db.prototype.vh;Db.prototype.postSolveVelocity=Db.prototype.Bi;Db.prototype.preSolvePosition=Db.prototype.Jg;Db.prototype.solvePositionSplitImpulse=Db.prototype.uh;Db.prototype.solvePositionNgs=Db.prototype.th;Db.prototype.postSolve=Db.prototype.cf;window.OIMO.PositionCorrectionAlgorithm=Ub;window.OIMO.ContactConstraint=Cd;Cd.prototype.getShape1=Cd.prototype.Oa;Cd.prototype.getShape2=Cd.prototype.Ab;Cd.prototype.getManifold=Cd.prototype.ua;Cd.prototype.isTouching=Cd.prototype.ek;window.OIMO.Manifold=Qb;Qb.prototype.getNormal=Qb.prototype.Ab;Qb.prototype.getNormalTo=Qb.prototype.Mb;Qb.prototype.getTangent=Qb.prototype.sc;Qb.prototype.getTangentTo=Qb.prototype.tc;Qb.prototype.getBinormal=Qb.prototype.ua;Qb.prototype.getBinormalTo=Qb.prototype.Oa;Qb.prototype.getPoints=Qb.prototype.oc;Qb.prototype.getNumPoints=Qb.prototype.nc;window.OIMO.ManifoldPoint=mc;mc.prototype.getPosition1=mc.prototype.Mb;mc.prototype.getPosition1To=mc.prototype.nc;mc.prototype.getPosition2=mc.prototype.oc;mc.prototype.getPosition2To=mc.prototype.sc;mc.prototype.getDepth=mc.prototype.Oa;mc.prototype.isWarmStarted=mc.prototype.Ac;mc.prototype.getNormalImpulse=mc.prototype.Ab;mc.prototype.getTangentImpulse=mc.prototype.tc;mc.prototype.getBinormalImpulse=mc.prototype.ua;mc.prototype.isEnabled=mc.prototype.Dc;window.OIMO.Joint=U;U.prototype.getRigidBody1=U.prototype.pe;U.prototype.getRigidBody2=U.prototype.Me;U.prototype.getType=U.prototype.Ng;U.prototype.getAnchor1=U.prototype.Oa;U.prototype.getAnchor2=U.prototype.Mb;U.prototype.getAnchor1To=U.prototype.Ab;U.prototype.getAnchor2To=U.prototype.nc;U.prototype.getLocalAnchor1=U.prototype.ke;U.prototype.getLocalAnchor2=U.prototype.me;U.prototype.getLocalAnchor1To=U.prototype.le;U.prototype.getLocalAnchor2To=U.prototype.ne;U.prototype.getBasis1=U.prototype.Dc;U.prototype.getBasis2=U.prototype.dd;U.prototype.getBasis1To=U.prototype.Jc;U.prototype.getBasis2To=U.prototype.ed;U.prototype.getAllowCollision=U.prototype.ua;U.prototype.setAllowCollision=U.prototype.Og;U.prototype.getBreakForce=U.prototype.yd;U.prototype.setBreakForce=U.prototype.Pg;U.prototype.getBreakTorque=U.prototype.Wd;U.prototype.setBreakTorque=U.prototype.Qg;U.prototype.getPositionCorrectionAlgorithm=U.prototype.oe;U.prototype.setPositionCorrectionAlgorithm=U.prototype.Rg;U.prototype.getAppliedForce=U.prototype.oc;U.prototype.getAppliedForceTo=U.prototype.sc;U.prototype.getAppliedTorque=U.prototype.tc;U.prototype.getAppliedTorqueTo=U.prototype.Ac;U.prototype.getPrev=U.prototype.Ef;U.prototype.getNext=U.prototype.Ne;window.OIMO.CylindricalJoint=Mb;Mb.prototype.getAxis1=Mb.prototype.yg;Mb.prototype.getAxis2=Mb.prototype.Ag;Mb.prototype.getAxis1To=Mb.prototype.zg;Mb.prototype.getAxis2To=Mb.prototype.Bg;Mb.prototype.getLocalAxis1=Mb.prototype.Cg;Mb.prototype.getLocalAxis2=Mb.prototype.Eg;Mb.prototype.getLocalAxis1To=Mb.prototype.Dg;Mb.prototype.getLocalAxis2To=Mb.prototype.Fg;Mb.prototype.getTranslationalSpringDamper=Mb.prototype.yn;Mb.prototype.getRotationalSpringDamper=Mb.prototype.qn;Mb.prototype.getTranslationalLimitMotor=Mb.prototype.xn;Mb.prototype.getRotationalLimitMotor=Mb.prototype.pn;Mb.prototype.getAngle=Mb.prototype.cl;Mb.prototype.getTranslation=Mb.prototype.fl;window.OIMO.JointConfig=Lc;window.OIMO.CylindricalJointConfig=bg;bg.prototype.init=bg.prototype.za;window.OIMO.JointLink=bd;bd.prototype.getContact=bd.prototype.ua;bd.prototype.getOther=bd.prototype.Ab;bd.prototype.getPrev=bd.prototype.Mb;bd.prototype.getNext=bd.prototype.Oa;window.OIMO.JointType=Ac;window.OIMO.PrismaticJoint=Pb;Pb.prototype.getAxis1=Pb.prototype.yg;Pb.prototype.getAxis2=Pb.prototype.Ag;Pb.prototype.getAxis1To=Pb.prototype.zg;Pb.prototype.getAxis2To=Pb.prototype.Bg;Pb.prototype.getLocalAxis1=Pb.prototype.Cg;Pb.prototype.getLocalAxis2=Pb.prototype.Eg;Pb.prototype.getLocalAxis1To=Pb.prototype.Dg;Pb.prototype.getLocalAxis2To=Pb.prototype.Fg;Pb.prototype.getSpringDamper=Pb.prototype.sj;Pb.prototype.getLimitMotor=Pb.prototype.el;Pb.prototype.getTranslation=Pb.prototype.fl;window.OIMO.PrismaticJointConfig=Vd;Vd.prototype.init=Vd.prototype.za;window.OIMO.RagdollJoint=zb;zb.prototype.getAxis1=zb.prototype.yg;zb.prototype.getAxis2=zb.prototype.Ag;zb.prototype.getAxis1To=zb.prototype.zg;zb.prototype.getAxis2To=zb.prototype.Bg;zb.prototype.getLocalAxis1=zb.prototype.Cg;zb.prototype.getLocalAxis2=zb.prototype.Eg;zb.prototype.getLocalAxis1To=zb.prototype.Dg;zb.prototype.getLocalAxis2To=zb.prototype.Fg;zb.prototype.getTwistSpringDamper=zb.prototype.Cn;zb.prototype.getTwistLimitMotor=zb.prototype.Bn;zb.prototype.getSwingSpringDamper=zb.prototype.wn;zb.prototype.getSwingAxis=zb.prototype.un;zb.prototype.getSwingAxisTo=zb.prototype.vn;zb.prototype.getSwingAngle=zb.prototype.tn;zb.prototype.getTwistAngle=zb.prototype.An;window.OIMO.RagdollJointConfig=Pf;Pf.prototype.init=Pf.prototype.za;window.OIMO.RevoluteJoint=hc;hc.prototype.getAxis1=hc.prototype.yg;hc.prototype.getAxis2=hc.prototype.Ag;hc.prototype.getAxis1To=hc.prototype.zg;hc.prototype.getAxis2To=hc.prototype.Bg;hc.prototype.getLocalAxis1=hc.prototype.Cg;hc.prototype.getLocalAxis2=hc.prototype.Eg;hc.prototype.getLocalAxis1To=hc.prototype.Dg;hc.prototype.getLocalAxis2To=hc.prototype.Fg;hc.prototype.getSpringDamper=hc.prototype.sj;hc.prototype.getLimitMotor=hc.prototype.el;hc.prototype.getAngle=hc.prototype.cl;window.OIMO.RevoluteJointConfig=Df;Df.prototype.init=Df.prototype.za;window.OIMO.RotationalLimitMotor=zc;zc.prototype.setLimits=zc.prototype.ua;zc.prototype.setMotor=zc.prototype.Oa;zc.prototype.clone=zc.prototype.clone;window.OIMO.SphericalJoint=ag;ag.prototype.getSpringDamper=ag.prototype.sj;window.OIMO.SphericalJointConfig=Ee;Ee.prototype.init=Ee.prototype.za;window.OIMO.SpringDamper=Rc;Rc.prototype.setSpring=Rc.prototype.ua;Rc.prototype.setSymplecticEuler=Rc.prototype.Oa;Rc.prototype.clone=Rc.prototype.clone;window.OIMO.TranslationalLimitMotor=Ud;Ud.prototype.setLimits=Ud.prototype.ua;Ud.prototype.setMotor=Ud.prototype.Oa;Ud.prototype.clone=Ud.prototype.clone;window.OIMO.UniversalJoint=yb;yb.prototype.getAxis1=yb.prototype.yg;yb.prototype.getAxis2=yb.prototype.Ag;yb.prototype.getAxis1To=yb.prototype.zg;yb.prototype.getAxis2To=yb.prototype.Bg;yb.prototype.getLocalAxis1=yb.prototype.Cg;yb.prototype.getLocalAxis2=yb.prototype.Eg;yb.prototype.getLocalAxis1To=yb.prototype.Dg;yb.prototype.getLocalAxis2To=yb.prototype.Fg;yb.prototype.getSpringDamper1=yb.prototype.rn;yb.prototype.getSpringDamper2=yb.prototype.sn;yb.prototype.getLimitMotor1=yb.prototype.nn;yb.prototype.getLimitMotor2=yb.prototype.on;yb.prototype.getAngle1=yb.prototype.hn;yb.prototype.getAngle2=yb.prototype.jn;window.OIMO.UniversalJointConfig=sf;sf.prototype.init=sf.prototype.za;window.OIMO.ConstraintSolverType=xe;window.OIMO.DirectJointConstraintSolver=Xb;Xb.prototype.preSolveVelocity=Xb.prototype.qh;Xb.prototype.warmStart=Xb.prototype.zh;Xb.prototype.solveVelocity=Xb.prototype.vh;Xb.prototype.postSolveVelocity=Xb.prototype.Bi;Xb.prototype.preSolvePosition=Xb.prototype.Jg;Xb.prototype.solvePositionSplitImpulse=Xb.prototype.uh;Xb.prototype.solvePositionNgs=Xb.prototype.th;Xb.prototype.postSolve=Xb.prototype.cf;window.OIMO.PgsContactConstraintSolver=Wb;Wb.prototype.preSolveVelocity=Wb.prototype.qh;Wb.prototype.warmStart=Wb.prototype.zh;Wb.prototype.solveVelocity=Wb.prototype.vh;Wb.prototype.preSolvePosition=Wb.prototype.Jg;Wb.prototype.solvePositionSplitImpulse=Wb.prototype.uh;Wb.prototype.solvePositionNgs=Wb.prototype.th;Wb.prototype.postSolve=Wb.prototype.cf;window.OIMO.PgsJointConstraintSolver=lc;lc.prototype.preSolveVelocity=lc.prototype.qh;lc.prototype.warmStart=lc.prototype.zh;lc.prototype.solveVelocity=lc.prototype.vh;lc.prototype.postSolveVelocity=lc.prototype.Bi;lc.prototype.preSolvePosition=lc.prototype.Jg;lc.prototype.solvePositionSplitImpulse=lc.prototype.uh;lc.prototype.solvePositionNgs=lc.prototype.th;lc.prototype.postSolve=lc.prototype.cf;window.OIMO.MassData=ml;window.OIMO.RigidBody=E;E.prototype.getPosition=E.prototype.cm;E.prototype.getPositionTo=E.prototype.dm;E.prototype.setPosition=E.prototype.ym;E.prototype.translate=E.prototype.Rn;E.prototype.getRotation=E.prototype.km;E.prototype.getRotationTo=E.prototype.lm;E.prototype.setRotation=E.prototype.In;E.prototype.setRotationXyz=E.prototype.Jn;E.prototype.rotate=E.prototype.rm;E.prototype.rotateXyz=E.prototype.wm;E.prototype.getOrientation=E.prototype.Ul;E.prototype.getOrientationTo=E.prototype.am;E.prototype.setOrientation=E.prototype.xm;E.prototype.getTransform=E.prototype.om;E.prototype.getTransformTo=E.prototype.pm;E.prototype.setTransform=E.prototype.Nn;E.prototype.getMass=E.prototype.Ne;E.prototype.getLocalInertia=E.prototype.le;E.prototype.getLocalInertiaTo=E.prototype.me;E.prototype.getMassData=E.prototype.Ef;E.prototype.getMassDataTo=E.prototype.Ng;E.prototype.setMassData=E.prototype.bo;E.prototype.getRotationFactor=E.prototype.Qg;E.prototype.setRotationFactor=E.prototype.Gm;E.prototype.getLinearVelocity=E.prototype.Wd;E.prototype.getLinearVelocityTo=E.prototype.ke;E.prototype.setLinearVelocity=E.prototype.ao;E.prototype.getAngularVelocity=E.prototype.Dc;E.prototype.getAngularVelocityTo=E.prototype.Jc;E.prototype.setAngularVelocity=E.prototype.Xn;E.prototype.addLinearVelocity=E.prototype.Oa;E.prototype.addAngularVelocity=E.prototype.ua;E.prototype.applyImpulse=E.prototype.sc;E.prototype.applyLinearImpulse=E.prototype.tc;E.prototype.applyAngularImpulse=E.prototype.Mb;E.prototype.applyForce=E.prototype.nc;E.prototype.applyForceToCenter=E.prototype.oc;E.prototype.applyTorque=E.prototype.Ac;E.prototype.getGravityScale=E.prototype.ed;E.prototype.setGravityScale=E.prototype.$n;E.prototype.getLocalPoint=E.prototype.ne;E.prototype.getLocalPointTo=E.prototype.oe;E.prototype.getLocalVector=E.prototype.pe;E.prototype.getLocalVectorTo=E.prototype.Me;E.prototype.getWorldPoint=E.prototype.ai;E.prototype.getWorldPointTo=E.prototype.bi;E.prototype.getWorldVector=E.prototype.Dj;E.prototype.getWorldVectorTo=E.prototype.Bl;E.prototype.getNumShapes=E.prototype.Sl;E.prototype.getShapeList=E.prototype.Rg;E.prototype.getNumContectLinks=E.prototype.Og;E.prototype.getContactLinkList=E.prototype.dd;E.prototype.getNumJointLinks=E.prototype.Pg;E.prototype.getJointLinkList=E.prototype.yd;E.prototype.addShape=E.prototype.Ab;E.prototype.removeShape=E.prototype.Wn;E.prototype.getType=E.prototype.qm;E.prototype.setType=E.prototype.Hm;E.prototype.wakeUp=E.prototype.Jm;E.prototype.sleep=E.prototype.Im;E.prototype.getSleepTime=E.prototype.$h;E.prototype.setAutoSleep=E.prototype.Zn;E.prototype.getPrev=E.prototype.fm;E.prototype.getNext=E.prototype.Rl;window.OIMO.RigidBodyConfig=function(){this.position=new t;this.rotation=new M;this.linearVelocity=new t;this.angularVelocity=new t;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=0};window.OIMO.RigidBodyType=be;window.OIMO.Shape=Ga;Ga.prototype.getFriction=Ga.prototype.sc;Ga.prototype.setFriction=Ga.prototype.pe;Ga.prototype.getRestitution=Ga.prototype.Jc;Ga.prototype.setRestitution=Ga.prototype.Ne;Ga.prototype.getLocalTransform=Ga.prototype.Ac;Ga.prototype.getLocalTransformTo=Ga.prototype.Dc;Ga.prototype.getTransform=Ga.prototype.Wd;Ga.prototype.getTransformTo=Ga.prototype.ke;Ga.prototype.setLocalTransform=Ga.prototype.Me;Ga.prototype.getDensity=Ga.prototype.oc;Ga.prototype.setDensity=Ga.prototype.oe;Ga.prototype.getAabb=Ga.prototype.ua;Ga.prototype.getAabbTo=Ga.prototype.Oa;Ga.prototype.getGeometry=Ga.prototype.tc;Ga.prototype.getRigidBody=Ga.prototype.dd;Ga.prototype.getCollisionGroup=Ga.prototype.Ab;Ga.prototype.setCollisionGroup=Ga.prototype.le;Ga.prototype.getCollisionMask=Ga.prototype.Mb;Ga.prototype.setCollisionMask=Ga.prototype.me;Ga.prototype.getContactCallback=Ga.prototype.nc;Ga.prototype.setContactCallback=Ga.prototype.ne;Ga.prototype.getPrev=Ga.prototype.yd;Ga.prototype.getNext=Ga.prototype.ed;window.OIMO.ShapeConfig=function(){this.position=new t;this.rotation=new M;this.friction=F.defaultFriction;this.restitution=F.defaultRestitution;this.density=F.defaultDensity;this.collisionGroup=F.defaultCollisionGroup;this.collisionMask=F.defaultCollisionMask;this.contactCallback=this.geometry=null}})();